Snapshot complet du projet ZenFleet - Sat Aug 23 17:43:40 CET 2025
===================================================

////////////////////////////////////////////////////////////////
CHEMIN : ./.env
////////////////////////////////////////////////////////////////

APP_NAME=ZenFleet
APP_ENV=local
APP_KEY=base64:8WWgKSWhsypIcEcojZl8q9k0HmecY7oORuGSQCjHmMs=
APP_DEBUG=true
APP_URL=http://localhost

LOG_CHANNEL=stack
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=debug

# Configuration PostgreSQL (corrigée pour correspondre au docker-compose.yml)
DB_CONNECTION=pgsql
DB_HOST=database
DB_PORT=5432
DB_DATABASE=zenfleet_db
DB_USERNAME=zenfleet_user
DB_PASSWORD=zenfleet_pass

BROADCAST_DRIVER=log
CACHE_DRIVER=redis
FILESYSTEM_DISK=local
QUEUE_CONNECTION=redis
SESSION_DRIVER=redis
SESSION_LIFETIME=120

# Configuration Redis (corrigée pour Docker)
REDIS_HOST=redis
REDIS_PASSWORD=null
REDIS_PORT=6379

MAIL_MAILER=smtp
MAIL_HOST=mailpit
MAIL_PORT=1025
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_ENCRYPTION=null
MAIL_FROM_ADDRESS="noreply@zenfleet.com"
MAIL_FROM_NAME="${APP_NAME}"

AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false

PUSHER_APP_ID=
PUSHER_APP_KEY=
PUSHER_APP_SECRET=
PUSHER_HOST=
PUSHER_PORT=443
PUSHER_SCHEME=https
PUSHER_APP_CLUSTER=mt1

VITE_APP_NAME="${APP_NAME}"
VITE_PUSHER_APP_KEY="${PUSHER_APP_KEY}"
VITE_PUSHER_HOST="${PUSHER_HOST}"
VITE_PUSHER_PORT="${PUSHER_PORT}"
VITE_PUSHER_SCHEME="${PUSHER_SCHEME}"
VITE_PUSHER_APP_CLUSTER="${PUSHER_APP_CLUSTER}"

# Configuration du service PDF (corrigée)
PDF_SERVICE_HOST=pdf-service
PDF_SERVICE_PORT=3000
PDF_SERVICE_URL=http://pdf-service:3000/generate-pdf
PDF_SERVICE_HEALTH_URL=http://pdf-service:3000/health
#PDF_SERVICE_URL=http://pdf-service:3000/generate-pdf
#PDF_SERVICE_HEALTH_URL=http://node:3000/health
PDF_SERVICE_TIMEOUT=120
PDF_SERVICE_RETRIES=3

# Configuration des ports pour Docker Compose
FORWARD_NGINX_HTTP_PORT=80
FORWARD_NGINX_HTTPS_PORT=443
FORWARD_DB_PORT=5432
FORWARD_REDIS_PORT=6379
FORWARD_NODE_PORT=3000

# Configuration de l'environnement Node.js
NODE_ENV=production


--- FIN DU FICHIER : ./.env ---


////////////////////////////////////////////////////////////////
CHEMIN : ./docker-compose.yml
////////////////////////////////////////////////////////////////

networks:
  zenfleet_network:
    driver: bridge

volumes:
  zenfleet_postgres_data:
  zenfleet_redis_data:

services:
  # --- Service PHP (Application Laravel) ---
  php:
    build:
      context: .
      dockerfile: ./docker/php/Dockerfile
      args:
        USER_ID: ${UID:-1000}
        GROUP_ID: ${GID:-1000}
    container_name: zenfleet_php
    restart: unless-stopped
    dns:
      - 8.8.8.8
      - 1.1.1.1
    volumes:
      - ./:/var/www/html
    networks:
      - zenfleet_network
    depends_on:
      database:
        condition: service_healthy
      redis:
        condition: service_healthy
      pdf-service:
        condition: service_healthy

  # --- Service Nginx (Serveur Web) ---
  nginx:
    image: nginx:1.25-alpine
    container_name: zenfleet_nginx
    restart: unless-stopped
    ports: ["80:80"]
    volumes:
      - ./:/var/www/html
      - ./docker/nginx/zenfleet.conf:/etc/nginx/conf.d/default.conf
    networks:
      - zenfleet_network
    depends_on:
      - php

  # --- Base de Données (PostgreSQL) ---
  database:
    image: postgres:15-alpine
    container_name: zenfleet_database
    restart: unless-stopped
    ports: ["5432:5432"]
    volumes:
      - zenfleet_postgres_data:/var/lib/postgresql/data
    environment:
      POSTGRES_DB: ${DB_DATABASE}
      POSTGRES_USER: ${DB_USERNAME}
      POSTGRES_PASSWORD: ${DB_PASSWORD}
    networks:
      - zenfleet_network
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U ${DB_USERNAME}"]
      interval: 10s
      timeout: 5s
      retries: 5

  # --- Cache & Queues (Redis) ---
  redis:
    image: redis:alpine
    container_name: zenfleet_redis
    restart: unless-stopped
    volumes:
      - zenfleet_redis_data:/data
    networks:
      - zenfleet_network
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]
      interval: 10s
      timeout: 5s
      retries: 3
  
  # --- Service Node.js pour le DÉVELOPPEMENT (yarn, vite) ---
  node:
    build:
      context: .
      dockerfile: ./docker/node_dev/Dockerfile
      args:
        USER_ID: ${UID:-1000}
        GROUP_ID: ${GID:-1000}
    container_name: zenfleet_node_dev
    volumes:
      - .:/var/www/html
    dns:
      - 8.8.8.8
      - 1.1.1.1
    working_dir: /var/www/html
    tty: true

  # --- Microservice de Génération de PDF ---
  pdf-service:
    build:
      context: ./pdf-service
    container_name: zenfleet_pdf_service
    restart: unless-stopped
    networks:
      zenfleet_network:
        aliases:
          - node
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3000/health"]
      interval: 30s
      timeout: 10s
      retries: 5
      start_period: 30s

--- FIN DU FICHIER : ./docker-compose.yml ---


////////////////////////////////////////////////////////////////
CHEMIN : ./package.json
////////////////////////////////////////////////////////////////

{
    "private": true,
    "type": "module",
    "scripts": {
        "dev": "vite",
        "build": "vite build"
    },
    "devDependencies": {
        "@tailwindcss/forms": "^0.5.2",
        "alpinejs": "^3.4.2",
        "autoprefixer": "^10.4.2",
        "axios": "^1.6.4",
        "laravel-vite-plugin": "^1.0",
        "postcss": "^8.4.31",
        "tailwindcss": "^3.1.0",
        "vite": "^5.0"
    },
    "dependencies": {
        "apexcharts": "^3.49.1",
        "tom-select": "^2.3.1",
        "flatpickr": "^4.6.13"
    }
}
--- FIN DU FICHIER : ./package.json ---


////////////////////////////////////////////////////////////////
CHEMIN : ./composer.json
////////////////////////////////////////////////////////////////

{
    "name": "laravel/laravel",
    "type": "project",
    "description": "The skeleton application for the Laravel framework.",
    "keywords": ["laravel", "framework"],
    "license": "MIT",
    "require": {
        "php": "^8.1",
        "blade-ui-kit/blade-icons": "^1.8",
        "doctrine/dbal": "^3.9",
        "guzzlehttp/guzzle": "^7.2",
        "laravel/framework": "^10.10",
        "laravel/sanctum": "^3.3",
        "laravel/tinker": "^2.8",
        "league/csv": "^9.23",
        "predis/predis": "^3.1",
        "spatie/laravel-permission": "^6.19"
    },
    "require-dev": {
        "fakerphp/faker": "^1.9.1",
        "laravel-lang/lang": "^15.2",
        "laravel/breeze": "^1.29",
        "laravel/pint": "^1.0",
        "laravel/sail": "^1.18",
        "mockery/mockery": "^1.4.4",
        "nunomaduro/collision": "^7.0",
        "phpunit/phpunit": "^10.1",
        "spatie/laravel-ignition": "^2.0"
    },
    "autoload": {
        "psr-4": {
            "App\\": "app/",
            "Database\\Factories\\": "database/factories/",
            "Database\\Seeders\\": "database/seeders/"
        }
    },
    "autoload-dev": {
        "psr-4": {
            "Tests\\": "tests/"
        }
    },
    "scripts": {
        "post-autoload-dump": [
            "Illuminate\\Foundation\\ComposerScripts::postAutoloadDump",
            "@php artisan package:discover --ansi"
        ],
        "post-update-cmd": [
            "@php artisan vendor:publish --tag=laravel-assets --ansi --force"
        ],
        "post-root-package-install": [
            "@php -r \"file_exists('.env') || copy('.env.example', '.env');\""
        ],
        "post-create-project-cmd": [
            "@php artisan key:generate --ansi"
        ]
    },
    "extra": {
        "laravel": {
            "dont-discover": []
        }
    },
    "config": {
        "optimize-autoloader": true,
        "preferred-install": "dist",
        "sort-packages": true,
        "allow-plugins": {
            "pestphp/pest-plugin": true,
            "php-http/discovery": true
        }
    },
    "minimum-stability": "stable",
    "prefer-stable": true
}
--- FIN DU FICHIER : ./composer.json ---


////////////////////////////////////////////////////////////////
CHEMIN : ./vite.config.js
////////////////////////////////////////////////////////////////

import { defineConfig } from 'vite';
import laravel from 'laravel-vite-plugin';

export default defineConfig({
    plugins: [
        laravel({
            input: [
                'resources/css/app.css',
                'resources/js/app.js',
            ],
            refresh: true,
        }),
    ],
});

--- FIN DU FICHIER : ./vite.config.js ---


////////////////////////////////////////////////////////////////
CHEMIN : ./tailwind.config.js
////////////////////////////////////////////////////////////////

import defaultTheme from 'tailwindcss/defaultTheme';
import forms from '@tailwindcss/forms';

/** @type {import('tailwindcss').Config} */
export default {
    content: [
        './vendor/laravel/framework/src/Illuminate/Pagination/resources/views/*.blade.php',
        './storage/framework/views/*.php',
        './resources/views/**/*.blade.php',
    ],

    theme: {
        extend: {
            fontFamily: {
                sans: ['Inter', ...defaultTheme.fontFamily.sans],
            },
            colors: {
                primary: {
                    50: '#f0f9ff',
                    100: '#e0f2fe',
                    200: '#bae6fd',
                    300: '#7dd3fc',
                    400: '#38bdf8',
                    500: '#0ea5e9',
                    600: '#0284c7',
                    700: '#0369a1',
                    800: '#075985',
                    900: '#0c4a6e',
                },
                secondary: {
                    50: '#f8fafc',
                    100: '#f1f5f9',
                    200: '#e2e8f0',
                    300: '#cbd5e1',
                    400: '#94a3b8',
                    500: '#64748b',
                    600: '#475569',
                    700: '#334155',
                    800: '#1e293b',
                    900: '#0f172a',
                },
                success: {
                    50: '#f0fdf4',
                    100: '#dcfce7',
                    200: '#bbf7d0',
                    300: '#86efac',
                    400: '#4ade80',
                    500: '#22c55e',
                    600: '#16a34a',
                    700: '#15803d',
                    800: '#166534',
                    900: '#14532d',
                },
                warning: {
                    50: '#fffbeb',
                    100: '#fef3c7',
                    200: '#fde68a',
                    300: '#fcd34d',
                    400: '#fbbf24',
                    500: '#f59e0b',
                    600: '#d97706',
                    700: '#b45309',
                    800: '#92400e',
                    900: '#78350f',
                },
                danger: {
                    50: '#fef2f2',
                    100: '#fee2e2',
                    200: '#fecaca',
                    300: '#fca5a5',
                    400: '#f87171',
                    500: '#ef4444',
                    600: '#dc2626',
                    700: '#b91c1c',
                    800: '#991b1b',
                    900: '#7f1d1d',
                },
                info: {
                    50: '#ecfeff',
                    100: '#cffafe',
                    200: '#a5f3fc',
                    300: '#67e8f9',
                    400: '#22d3ee',
                    500: '#06b6d4',
                    600: '#0891b2',
                    700: '#0e7490',
                    800: '#155e75',
                    900: '#164e63',
                },
            }
        }
    },

    plugins: [forms],
};
--- FIN DU FICHIER : ./tailwind.config.js ---


////////////////////////////////////////////////////////////////
CHEMIN : ./postcss.config.js
////////////////////////////////////////////////////////////////

export default {
    plugins: {
        tailwindcss: {},
        autoprefixer: {},
    },
};

--- FIN DU FICHIER : ./postcss.config.js ---


////////////////////////////////////////////////////////////////
CHEMIN : ./README.md
////////////////////////////////////////////////////////////////

<p align="center"><a href="https://laravel.com" target="_blank"><img src="https://raw.githubusercontent.com/laravel/art/master/logo-lockup/5%20SVG/2%20CMYK/1%20Full%20Color/laravel-logolockup-cmyk-red.svg" width="400" alt="Laravel Logo"></a></p>

<p align="center">
<a href="https://github.com/laravel/framework/actions"><img src="https://github.com/laravel/framework/workflows/tests/badge.svg" alt="Build Status"></a>
<a href="https://packagist.org/packages/laravel/framework"><img src="https://img.shields.io/packagist/dt/laravel/framework" alt="Total Downloads"></a>
<a href="https://packagist.org/packages/laravel/framework"><img src="https://img.shields.io/packagist/v/laravel/framework" alt="Latest Stable Version"></a>
<a href="https://packagist.org/packages/laravel/framework"><img src="https://img.shields.io/packagist/l/laravel/framework" alt="License"></a>
</p>

## About Laravel

Laravel is a web application framework with expressive, elegant syntax. We believe development must be an enjoyable and creative experience to be truly fulfilling. Laravel takes the pain out of development by easing common tasks used in many web projects, such as:

- [Simple, fast routing engine](https://laravel.com/docs/routing).
- [Powerful dependency injection container](https://laravel.com/docs/container).
- Multiple back-ends for [session](https://laravel.com/docs/session) and [cache](https://laravel.com/docs/cache) storage.
- Expressive, intuitive [database ORM](https://laravel.com/docs/eloquent).
- Database agnostic [schema migrations](https://laravel.com/docs/migrations).
- [Robust background job processing](https://laravel.com/docs/queues).
- [Real-time event broadcasting](https://laravel.com/docs/broadcasting).

Laravel is accessible, powerful, and provides tools required for large, robust applications.

## Learning Laravel

Laravel has the most extensive and thorough [documentation](https://laravel.com/docs) and video tutorial library of all modern web application frameworks, making it a breeze to get started with the framework.

You may also try the [Laravel Bootcamp](https://bootcamp.laravel.com), where you will be guided through building a modern Laravel application from scratch.

If you don't feel like reading, [Laracasts](https://laracasts.com) can help. Laracasts contains thousands of video tutorials on a range of topics including Laravel, modern PHP, unit testing, and JavaScript. Boost your skills by digging into our comprehensive video library.

## Laravel Sponsors

We would like to extend our thanks to the following sponsors for funding Laravel development. If you are interested in becoming a sponsor, please visit the [Laravel Partners program](https://partners.laravel.com).

### Premium Partners

- **[Vehikl](https://vehikl.com/)**
- **[Tighten Co.](https://tighten.co)**
- **[WebReinvent](https://webreinvent.com/)**
- **[Kirschbaum Development Group](https://kirschbaumdevelopment.com)**
- **[64 Robots](https://64robots.com)**
- **[Curotec](https://www.curotec.com/services/technologies/laravel/)**
- **[Cyber-Duck](https://cyber-duck.co.uk)**
- **[DevSquad](https://devsquad.com/hire-laravel-developers)**
- **[Jump24](https://jump24.co.uk)**
- **[Redberry](https://redberry.international/laravel/)**
- **[Active Logic](https://activelogic.com)**
- **[byte5](https://byte5.de)**
- **[OP.GG](https://op.gg)**

## Contributing

Thank you for considering contributing to the Laravel framework! The contribution guide can be found in the [Laravel documentation](https://laravel.com/docs/contributions).

## Code of Conduct

In order to ensure that the Laravel community is welcoming to all, please review and abide by the [Code of Conduct](https://laravel.com/docs/contributions#code-of-conduct).

## Security Vulnerabilities

If you discover a security vulnerability within Laravel, please send an e-mail to Taylor Otwell via [taylor@laravel.com](mailto:taylor@laravel.com). All security vulnerabilities will be promptly addressed.

## License

The Laravel framework is open-sourced software licensed under the [MIT license](https://opensource.org/licenses/MIT).

--- FIN DU FICHIER : ./README.md ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Console/Kernel.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Console;

use Illuminate\Console\Scheduling\Schedule;
use Illuminate\Foundation\Console\Kernel as ConsoleKernel;

class Kernel extends ConsoleKernel
{
    /**
     * Define the application's command schedule.
     */
    protected function schedule(Schedule $schedule): void
    {
        // $schedule->command('inspire')->hourly();
    }

    /**
     * Register the commands for the application.
     */
    protected function commands(): void
    {
        $this->load(__DIR__.'/Commands');

        require base_path('routes/console.php');
    }
}

--- FIN DU FICHIER : ./app/Console/Kernel.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Exceptions/Handler.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Exceptions;

use Illuminate\Foundation\Exceptions\Handler as ExceptionHandler;
use Throwable;

class Handler extends ExceptionHandler
{
    /**
     * The list of the inputs that are never flashed to the session on validation exceptions.
     *
     * @var array<int, string>
     */
    protected $dontFlash = [
        'current_password',
        'password',
        'password_confirmation',
    ];

    /**
     * Register the exception handling callbacks for the application.
     */
    public function register(): void
    {
        $this->reportable(function (Throwable $e) {
            //
        });
    }
}

--- FIN DU FICHIER : ./app/Exceptions/Handler.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Controllers/Admin/AssignmentController.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Http\Requests\Admin\Assignment\StoreAssignmentRequest;
use App\Http\Requests\Admin\Assignment\UpdateAssignmentRequest;
use App\Models\Assignment;
use App\Services\AssignmentService;
use Illuminate\Http\RedirectResponse;
use Illuminate\Http\Request;
use Illuminate\View\View;
use Illuminate\Http\JsonResponse;

class AssignmentController extends Controller
{
    protected AssignmentService $assignmentService;

    public function __construct(AssignmentService $assignmentService)
    {
        $this->assignmentService = $assignmentService;
    }

    /**
     * Affiche la liste des affectations.
     */
    public function index(Request $request): View
    {
        $this->authorize('view assignments');
        $filters = $request->only(['search', 'status', 'per_page']);
        $assignments = $this->assignmentService->getFilteredAssignments($filters);

        return view('admin.assignments.index', compact('assignments', 'filters'));
    }

    /**
     * Affiche le formulaire de création.
     */
    public function create(): View
    {
         $this->authorize('create assignments');
        $data = $this->assignmentService->getDataForCreateForm();

        return view('admin.assignments.create', $data);
    }

    /**
     * Enregistre une nouvelle affectation.
     */
    public function store(StoreAssignmentRequest $request): RedirectResponse
    {
        $this->assignmentService->createAssignment($request->validated());
        return redirect()->route('admin.assignments.index')->with('success', 'Affectation créée avec succès.');
    }

    /**
     * Affiche les détails d'une affectation.
     */
    public function show(Assignment $assignment): View
    {
         $this->authorize('view assignments');
        $assignment->load(['vehicle', 'driver', 'creator', 'handoverForm']);

        return view('admin.assignments.show', compact('assignment'));
    }

    /**
     * Affiche le formulaire de modification.
     */
    public function edit(Assignment $assignment): View
    {
         $this->authorize('edit assignments');
        $assignment->load(['vehicle', 'driver']);

        return view('admin.assignments.edit', compact('assignment'));
    }

    /**
     * Met à jour une affectation.
     */
    public function update(UpdateAssignmentRequest $request, Assignment $assignment): RedirectResponse
    {
        $this->assignmentService->updateAssignment($assignment, $request->validated());
        return redirect()->route('admin.assignments.index')->with('success', 'Affectation mise à jour avec succès.');
    }

    /**
     * Termine une affectation en cours.
     */
    public function end(Request $request, Assignment $assignment): JsonResponse|RedirectResponse
    {
        $this->authorize('end assignments');

        // Personnalisation des messages d'erreur
        $messages = [
            'end_datetime.required' => 'La date de fin est obligatoire.',
            'end_datetime.date' => 'Le format de la date de fin est invalide.',
            'end_datetime.after_or_equal' => 'La date de fin doit être supérieure ou égale à la date de début.',
            'end_mileage.required' => 'Le kilométrage de fin est obligatoire.',
            'end_mileage.integer' => 'Le kilométrage de fin doit être un nombre.',
            'end_mileage.min' => 'Le kilométrage de fin doit être supérieur ou égal au kilométrage de début.',
        ];

        // Validation des données de la requête
        $validated = $request->validate([
            'end_datetime' => ['required', 'date', 'after_or_equal:'.$assignment->start_datetime],
            'end_mileage' => ['required', 'integer', 'min:'.$assignment->start_mileage],
        ], $messages);

        $success = $this->assignmentService->endAssignment(
            $assignment,
            $validated['end_mileage'],
            $validated['end_datetime']
        );

        if ($success) {
            $message = 'Affectation terminée avec succès.';
            // Si la requête attend du JSON (AJAX), on retourne une réponse JSON
            if ($request->expectsJson()) {
                return response()->json(['success' => true, 'message' => $message]);
            }
            // Sinon, on fait une redirection classique
            return redirect()->route('admin.assignments.index')->with('success', $message);
        }

        // En cas d'échec
        $errorMessage = 'Une erreur est survenue lors de la clôture de l\'affectation.';
        if ($request->expectsJson()) {
            return response()->json(['success' => false, 'message' => $errorMessage], 500);
        }
        return redirect()->back()->with('error', $errorMessage);
    }
}
--- FIN DU FICHIER : ./app/Http/Controllers/Admin/AssignmentController.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Controllers/Admin/DashboardController.php
////////////////////////////////////////////////////////////////

<?php
namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use Illuminate\View\View;

class DashboardController extends Controller
{
    /**
     * Affiche le tableau de bord principal de l'application.
     */
    public function index(): View
    {
        // Pour l'instant, il affiche une vue simple.
        // Plus tard, nous y ajouterons des statistiques globales.
        return view('dashboard'); 
    }
}

--- FIN DU FICHIER : ./app/Http/Controllers/Admin/DashboardController.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Controllers/Admin/DriverController.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\Driver;
use App\Models\DriverStatus;
use App\Models\User;
use Illuminate\Http\RedirectResponse;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Storage;
use Illuminate\Validation\Rule;
use Illuminate\View\View;
use App\Http\Requests\Admin\Driver\StoreDriverRequest;
use App\Http\Requests\Admin\Driver\UpdateDriverRequest;
use Illuminate\Support\Facades\Validator;
use League\Csv\Reader;
use League\Csv\Statement;
use League\Csv\Writer;
use Illuminate\Database\QueryException;
use Illuminate\Support\Facades\Log;
use Illuminate\Support\Str;
use App\Services\DriverService;
use App\Services\ImportExportService;


class DriverController extends Controller
{

    protected DriverService $driverService;
    protected ImportExportService $importExportService;

    public function __construct(DriverService $driverService, ImportExportService $importExportService)
    {
        $this->driverService = $driverService;
        $this->importExportService = $importExportService;
    }

    // Méthodes existantes inchangées (index, create, store, edit, update, destroy, restore, forceDelete)
    public function index(Request $request): View
    {
        $this->authorize('view drivers');
        $filters = $request->only(['search', 'status_id', 'per_page', 'view_deleted']);
        $drivers = $this->driverService->getFilteredDrivers($filters);
        $driverStatuses = DriverStatus::orderBy('name')->get();
        return view('admin.drivers.index', compact('drivers', 'driverStatuses', 'filters'));
    }

    public function create(): View
    {
        $this->authorize('create drivers');
        $driverStatuses = DriverStatus::orderBy('name')->get();
        $users = User::orderBy('name')->get();
        return view('admin.drivers.create', compact('driverStatuses', 'users'));
    }

    public function store(StoreDriverRequest $request): RedirectResponse
    {
        $this->driverService->createDriver($request->validated());
        return redirect()->route('admin.drivers.index')->with('success', 'Nouveau chauffeur ajouté avec succès.');
    }

    public function edit(Driver $driver): View
    {
        $this->authorize('edit drivers');

        // CORRECTION : On récupère la liste des utilisateurs qui ne sont pas encore chauffeurs,
        // en y ajoutant l'utilisateur actuel du chauffeur s'il en a un.
        $assignedUserIds = Driver::whereNotNull('user_id')->where('id', '!=', $driver->id)->pluck('user_id');
        $linkableUsers = User::whereNotIn('id', $assignedUserIds)->orderBy('name')->get();

        $driverStatuses = DriverStatus::orderBy('name')->get();

        // CORRECTION : On ajoute la variable '$linkableUsers' aux données passées à la vue
        return view('admin.drivers.edit', compact('driver', 'driverStatuses', 'linkableUsers'));
    }

    public function update(UpdateDriverRequest $request, Driver $driver): RedirectResponse
    {
        $this->driverService->updateDriver($driver, $request->validated());
        return redirect()->route('admin.drivers.index')->with('success', 'Le chauffeur a été mis à jour.');
    }

    public function destroy(Driver $driver): RedirectResponse
    {
        $this->authorize('delete drivers');
        $archived = $this->driverService->archiveDriver($driver);

        if ($archived) {
            return redirect()->route('admin.drivers.index')->with('success', "Le chauffeur {$driver->first_name} {$driver->last_name} a été archivé.");
        }

        return redirect()->back()->with('error', 'Impossible d\'archiver ce chauffeur car il est lié à des affectations.');
    }

    public function restore($driverId): RedirectResponse
    {
        $this->authorize('restore drivers');
        $this->driverService->restoreDriver($driverId);
        return redirect()->route('admin.drivers.index', ['view_deleted' => true])->with('success', "Le chauffeur a été restauré.");
    }

    /**
     * Supprime définitivement un chauffeur.
     */
    public function forceDelete($driverId): RedirectResponse
    {
        $this->authorize('force delete drivers');

        // On appelle le service et on vérifie le résultat
        $deleted = $this->driverService->forceDeleteDriver($driverId);

        if ($deleted) {
            return redirect()->route('admin.drivers.index', ['view_deleted' => true])->with('success', 'Le chauffeur a été supprimé définitivement.');
        }

        // Si la suppression a échoué, on affiche un message d'erreur clair
        return redirect()->back()->with('error', 'Impossible de supprimer ce chauffeur car il est lié à un historique d\'affectations.');
    }


    /**
     * Affiche le formulaire d'importation de chauffeurs.
     */
    public function showImportForm(): View
    {
        $this->authorize('create drivers');
        return view('admin.drivers.import');
    }

    /**
     * Télécharge le fichier modèle CSV complet pour l'importation.
     */
    public function downloadTemplate()
    {
        $this->authorize('create drivers');

        $csv = Writer::createFromString('');
        $csv->setOutputBOM(Writer::BOM_UTF8); // Ajoute le BOM UTF-8 pour garantir la compatibilité

        // En-têtes complets en français
        $headers = [
            'nom', 'prenom', 'date_naissance', 'statut', 'matricule', 
            'telephone', 'email_personnel', 'adresse', 'numero_permis', 
            'categorie_permis', 'date_delivrance_permis', 'autorite_delivrance', 
            'date_recrutement', 'date_fin_contrat', 'contact_urgence_nom', 
            'contact_urgence_telephone', 'groupe_sanguin'
        ];

        // Ligne d'exemple
        $example = [
            'Merzouki', 'Saïd', '1985-04-12', 'Disponible', 'DIF-2022-00123', 
            '0671020304', 'smerzouki@email.com', '123 Rue de la Paix, 16018 Alger', 'P-987654', 
            'B,C', '2016-08-20', 'Daïra El Biar', 
            '2020-01-15', '2025-11-14', 'Merzouki Ali', 
            '0565040302', 'O+'
        ];

        $csv->insertOne($headers);
        $csv->insertOne($example);

        return response($csv->toString(), 200, [
            'Content-Type' => 'text/csv; charset=UTF-8',
            'Content-Disposition' => 'attachment; filename="template_import_chauffeurs.csv"',
        ]);
    }

    /**
     * Traite l'importation du fichier CSV.
     * Version refactorisée pour une gestion robuste du BOM et une simplification.
     */
    public function handleImport(Request $request): RedirectResponse
    {
        $this->authorize('create drivers');
        
        $request->validate(['csv_file' => 'required|file|mimes:csv,txt']);
        
        $file = $request->file('csv_file');
        
        try {
            // Lecture du contenu du fichier
            $fileContent = file_get_contents($file->getRealPath());
            
            // Correction : Suppression manuelle et fiable du BOM UTF-8
            if (str_starts_with($fileContent, "\xef\xbb\xbf")) {
                $fileContent = substr($fileContent, 3);
            }
            
            // Création du lecteur CSV directement depuis la chaîne de caractères nettoyée
            $csv = Reader::createFromString($fileContent);
            $csv->setHeaderOffset(0);
            
            $records = Statement::create()->process($csv);
            
            $successCount = 0;
            $errorRows = [];
            $importId = Str::uuid()->toString();
            
            $statuses = DriverStatus::pluck('id', 'name');
            $defaultStatusId = $statuses->get('Disponible');
            
            Log::info("Début de l'importation CSV des chauffeurs (refactorisée)", [
                'import_id' => $importId,
                'file' => $file->getClientOriginalName(),
                'records_count' => count($records),
            ]);
            
            foreach ($records as $offset => $record) {
                try {
                    // La sanitisation des clés n'est plus nécessaire car le BOM est supprimé à la source.
                    // On nettoie juste les valeurs.
                    $sanitizedRecord = array_map('trim', $record);

                    $data = $this->prepareDataForValidation($sanitizedRecord);
                    $validator = Validator::make($data, $this->getValidationRules());
                    
                    if ($validator->fails()) {
                        $errorRows[] = ['line' => $offset + 2, 'errors' => $validator->errors()->all(), 'data' => $record];
                        continue;
                    }
                    
                    $validatedData = $validator->validated();
                    $statusName = $validatedData['statut'] ?? null;
                    $statusId = $statuses->get($statusName, $defaultStatusId);
                    
                    unset($validatedData['statut']);
                    $validatedData['status_id'] = $statusId;
                    
                    Driver::create($validatedData);
                    $successCount++;
                    
                } catch (QueryException $e) {
                    $errorMessage = $this->formatDatabaseError($e);
                    $errorRows[] = ['line' => $offset + 2, 'errors' => [$errorMessage], 'data' => $record];
                } catch (\Exception $e) {
                    $errorRows[] = ['line' => $offset + 2, 'errors' => ["Erreur inattendue: " . $e->getMessage()], 'data' => $record];
                }
            }
            
            Log::info("Fin de l'importation CSV des chauffeurs", [
                'import_id' => $importId,
                'success_count' => $successCount,
                'error_count' => count($errorRows)
            ]);
            
            return redirect()->route('admin.drivers.import.results')
                ->with('successCount', $successCount)
                ->with('errorRows', $errorRows)
                ->with('importId', $importId)
                ->with('fileName', $file->getClientOriginalName());
                
        } catch (\Exception $e) {
            Log::critical("Erreur critique lors de l'importation CSV", [
                'error' => $e->getMessage(),
                'file' => $file->getClientOriginalName()
            ]);
            
            return redirect()->route('admin.drivers.import.show')
                ->with('error', "Une erreur est survenue lors de la lecture du fichier CSV: " . $e->getMessage())
                ->withInput();
        }
    }
    
    /**
     * Affiche les résultats de l'importation.
     */
    public function showImportResults(): View
    {
        $this->authorize('create drivers');
        
        $successCount = session('successCount', 0);
        $errorRows = session('errorRows', []);
        $importId = session('importId', null);
        $fileName = session('fileName', 'Fichier CSV');
        $encoding = session('encoding', 'utf8');
        
        return view('admin.drivers.import-results', compact(
            'successCount', 
            'errorRows', 
            'importId', 
            'fileName', 
            'encoding'
        ));
    }
    
    /**
     * Détecte l'encodage d'un contenu de fichier.
     */
    private function detectEncoding(string $content): string
    {
        // Liste des encodages à tester dans l'ordre de priorité
        $encodings = ['UTF-8', 'ISO-8859-1', 'Windows-1252'];
        
        foreach ($encodings as $encoding) {
            $sample = mb_convert_encoding($content, 'UTF-8', $encoding);
            
            // Si la conversion ne génère pas de caractères invalides, c'est probablement le bon encodage
            if (!preg_match('/\p{Cc}(?!\n|\t|\r)/u', $sample)) {
                switch ($encoding) {
                    case 'UTF-8': return 'utf8';
                    case 'ISO-8859-1': return 'iso';
                    case 'Windows-1252': return 'windows';
                }
            }
        }
        
        // Par défaut, on suppose Windows-1252 (encodage courant pour les CSV générés par Excel)
        return 'windows';
    }
    
    /**
     * Convertit un contenu vers UTF-8 depuis un encodage spécifié.
     */
    private function convertToUtf8(string $content, string $fromEncoding): string
    {
        $sourceEncoding = match($fromEncoding) {
            'iso' => 'ISO-8859-1',
            'windows' => 'Windows-1252',
            default => 'UTF-8'
        };
        
        return mb_convert_encoding($content, 'UTF-8', $sourceEncoding);
    }
    
    /**
     * Nettoie les données d'un enregistrement CSV.
     */
    private function sanitizeRecord(array $record): array
    {
        $sanitized = [];
        
        foreach ($record as $key => $value) {
            // Nettoyage des clés (y compris le BOM UTF-8)
            $cleanKey = trim($key);
            if (str_starts_with($cleanKey, "\xef\xbb\xbf")) {
                $cleanKey = substr($cleanKey, 3);
            }
            
            // Nettoyage des valeurs
            if (is_string($value)) {
                // Suppression des caractères invisibles et normalisation des espaces
                $cleanValue = trim(preg_replace('/\s+/', ' ', $value));
                
                // Conversion des chaînes vides en NULL
                $sanitized[$cleanKey] = $cleanValue === '' ? null : $cleanValue;
            } else {
                $sanitized[$cleanKey] = $value;
            }
        }
        
        return $sanitized;
    }
    
    /**
     * Prépare les données pour la validation.
     */
    private function prepareDataForValidation(array $record): array
    {
        $map = [
            'nom' => 'last_name', 
            'prenom' => 'first_name', 
            'date_naissance' => 'birth_date',
            'statut' => 'statut', 
            'matricule' => 'employee_number', 
            'telephone' => 'personal_phone',
            'email_personnel' => 'personal_email', 
            'adresse' => 'address', 
            'numero_permis' => 'license_number',
            'categorie_permis' => 'license_category', 
            'date_delivrance_permis' => 'license_issue_date',
            'autorite_delivrance' => 'license_authority', 
            'date_recrutement' => 'recruitment_date',
            'date_fin_contrat' => 'contract_end_date', 
            'contact_urgence_nom' => 'emergency_contact_name',
            'contact_urgence_telephone' => 'emergency_contact_phone', 
            'groupe_sanguin' => 'blood_type',
        ];
        
        $dataToValidate = [];
        
        foreach ($map as $csvHeader => $dbField) {
            if (array_key_exists($csvHeader, $record)) {
                $value = $record[$csvHeader];
                
                // Traitement spécifique pour les dates
                if (in_array($dbField, ['birth_date', 'license_issue_date', 'recruitment_date', 'contract_end_date']) && $value) {
                    $value = $this->formatDate($value);
                }
                
                $dataToValidate[$dbField] = $value;
            }
        }
        
        return $dataToValidate;
    }
    
    /**
     * Formate une date en format YYYY-MM-DD.
     */
    private function formatDate($dateString)
    {
        if (!$dateString) return null;
        
        // Si la date est déjà au format YYYY-MM-DD
        if (preg_match('/^\d{4}-\d{2}-\d{2}$/', $dateString)) {
            return $dateString;
        }
        
        // Essayer de parser différents formats de date
        $formats = [
            'd/m/Y', // 31/12/2023
            'd-m-Y', // 31-12-2023
            'd.m.Y', // 31.12.2023
            'Y/m/d', // 2023/12/31
            'Y-m-d', // 2023-12-31
            'Y.m.d', // 2023.12.31
            'd/m/y', // 31/12/23
            'd-m-y', // 31-12-23
            'd.m.y'  // 31.12.23
        ];
        
        foreach ($formats as $format) {
            $date = \DateTime::createFromFormat($format, $dateString);
            if ($date !== false) {
                return $date->format('Y-m-d');
            }
        }
        
        // Si aucun format ne correspond, retourner la chaîne originale
        return $dateString;
    }
    
    /**
     * Formate une erreur de base de données de manière conviviale.
     */
    private function formatDatabaseError(QueryException $e): string
    {
        $errorCode = $e->getCode();
        $errorMessage = $e->getMessage();
        
        // Erreurs de contrainte d'unicité
        if (strpos($errorMessage, 'unique constraint') !== false || $errorCode == 23505) {
            if (strpos($errorMessage, 'employee_number') !== false) {
                return "Le matricule existe déjà dans la base de données.";
            }
            if (strpos($errorMessage, 'personal_email') !== false) {
                return "L'adresse email existe déjà dans la base de données.";
            }
            if (strpos($errorMessage, 'license_number') !== false) {
                return "Le numéro de permis existe déjà dans la base de données.";
            }
            return "Une valeur unique existe déjà dans la base de données.";
        }
        
        // Erreurs de contrainte de clé étrangère
        if (strpos($errorMessage, 'foreign key constraint') !== false || $errorCode == 23503) {
            return "Référence à une valeur qui n'existe pas dans la base de données.";
        }
        
        // Erreurs de type de données
        if (strpos($errorMessage, 'invalid input syntax') !== false || $errorCode == 22007) {
            if (strpos($errorMessage, 'date/time') !== false) {
                return "Format de date invalide. Utilisez le format AAAA-MM-JJ.";
            }
            return "Format de données invalide.";
        }
        
        // Erreur par défaut
        return "Erreur de base de données: " . $e->getMessage();
    }
    
    /**
     * Règles de validation pour l'importation de chauffeurs.
     */
    private function getValidationRules(): array
    {
        return [
            'last_name' => ['required', 'string', 'max:255'],
            'first_name' => ['required', 'string', 'max:255'],
            'birth_date' => ['required', 'date_format:Y-m-d'],
            'statut' => ['nullable', 'string'],
            'employee_number' => ['nullable', 'string', 'max:100', 'unique:drivers,employee_number,NULL,id,deleted_at,NULL'],
            'personal_phone' => ['nullable', 'string', 'max:50'],
            'personal_email' => ['nullable', 'email', 'max:255', 'unique:drivers,personal_email,NULL,id,deleted_at,NULL'],
            'address' => ['nullable', 'string', 'max:1000'],
            'license_number' => ['nullable', 'string', 'max:100', 'unique:drivers,license_number,NULL,id,deleted_at,NULL'],
            'license_category' => ['nullable', 'string', 'max:50'],
            'license_issue_date' => ['nullable', 'date_format:Y-m-d'],
            'license_authority' => ['nullable', 'string', 'max:255'],
            'recruitment_date' => ['nullable', 'date_format:Y-m-d'],
            'contract_end_date' => ['nullable', 'date_format:Y-m-d', 'after_or_equal:recruitment_date'],
            'emergency_contact_name' => ['nullable', 'string', 'max:255'],
            'emergency_contact_phone' => ['nullable', 'string', 'max:50'],
            'blood_type' => ['nullable', 'string', 'max:10'],
        ];
    }
}
--- FIN DU FICHIER : ./app/Http/Controllers/Admin/DriverController.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Controllers/Admin/Handover/VehicleHandoverController.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Controllers\Admin\Handover;

use App\Http\Controllers\Controller;
use App\Models\Assignment;
use App\Models\Handover\VehicleHandoverForm;
use App\Models\Handover\VehicleHandoverDetail;
use App\Services\PdfGenerationService;
use Illuminate\Http\RedirectResponse;
use Illuminate\Http\Request;
use Illuminate\Http\Response;
use Illuminate\Support\Facades\DB;
use Illuminate\Support\Facades\Storage;
use Illuminate\Support\Str;
use Illuminate\View\View;
use Illuminate\Support\Facades\Log;
use Illuminate\Support\Facades\File;

class VehicleHandoverController extends Controller
{
    // ... (les méthodes create, store, show, edit, update, uploadSigned, destroy restent inchangées)
    public function create(Assignment $assignment): View
    {
        $this->authorize('create handovers');
        $assignment->load(['vehicle.vehicleType', 'driver']);
        return view('admin.handovers.vehicles.create', compact('assignment'));
    }

    public function store(Request $request): RedirectResponse
    {
        $this->authorize('create handovers');
        $validated = $request->validate([
            'assignment_id' => 'required|exists:assignments,id|unique:vehicle_handover_forms,assignment_id',
            'issue_date' => 'required|date',
            'general_observations' => 'nullable|string|max:2000',
            'checklist' => 'required|array',
            'checklist.*.*' => 'required|in:Bon,Moyen,Mauvais,N/A,Oui,Non',
        ]);

        $assignment = Assignment::with('vehicle')->findOrFail($validated['assignment_id']);

        $handoverForm = DB::transaction(function () use ($validated, $assignment) {
            $handover = VehicleHandoverForm::create([
                'assignment_id' => $validated['assignment_id'],
                'issue_date' => $validated['issue_date'],
                'current_mileage' => $assignment->vehicle->current_mileage,
                'general_observations' => $validated['general_observations'],
            ]);

            foreach ($validated['checklist'] as $category => $items) {
                foreach ($items as $itemKey => $status) {
                    VehicleHandoverDetail::create([
                        'handover_form_id' => $handover->id,
                        'category' => str_replace('_', ' ', $category),
                        'item' => str_replace('_', ' ', $itemKey),
                        'status' => $status,
                    ]);
                }
            }
            return $handover;
        });

        return redirect()->route('admin.handovers.vehicles.show', $handoverForm)->with('flash', [
            'type' => 'success',
            'message' => 'Fiche de remise créée avec succès.'
        ]);
    }

    public function show(VehicleHandoverForm $handover): View
    {
        $this->authorize('view handovers');
        $handover->load(['assignment.vehicle.vehicleType', 'assignment.driver', 'assignment.organization', 'details']);
        $checklist = $handover->details->groupBy('category');
        return view('admin.handovers.vehicles.show', ['handoverForm' => $handover, 'checklist' => $checklist]);
    }

    public function edit(VehicleHandoverForm $handover): View
    {
        $this->authorize('edit handovers');
        $handover->load(['assignment.vehicle.vehicleType', 'assignment.driver', 'details']);
        $detailsMap = $handover->details->mapWithKeys(function ($detail) {
            return [Str::slug($detail->category, '_') . '.' . Str::slug($detail->item, '_') => $detail->status];
        });
        return view('admin.handovers.vehicles.edit', compact('handover', 'detailsMap'));
    }

    public function update(Request $request, VehicleHandoverForm $handover): RedirectResponse
    {
        $this->authorize('edit handovers');
        $validated = $request->validate([
            'issue_date' => 'required|date',
            'general_observations' => 'nullable|string|max:2000',
            'checklist' => 'required|array',
            'checklist.*.*' => 'required|in:Bon,Moyen,Mauvais,N/A,Oui,Non',
        ]);

        DB::transaction(function () use ($validated, $handover) {
            $handover->update([
                'issue_date' => $validated['issue_date'],
                'general_observations' => $validated['general_observations'],
            ]);
            
            $handover->details()->delete();
            foreach ($validated['checklist'] as $category => $items) {
                foreach ($items as $itemKey => $status) {
                    VehicleHandoverDetail::create([
                        'handover_form_id' => $handover->id,
                        'category' => str_replace('_', ' ', $category),
                        'item' => str_replace('_', ' ', $itemKey),
                        'status' => $status,
                    ]);
                }
            }
        });

        return redirect()->route('admin.handovers.vehicles.show', $handover)->with('flash', [
            'type' => 'success',
            'message' => 'Fiche de remise mise à jour avec succès.'
        ]);
    }
    
    public function uploadSigned(Request $request, VehicleHandoverForm $handover): RedirectResponse
    {
        $this->authorize('upload signed handovers');
        $request->validate([
            'signed_form' => ['required', 'file', 'mimes:pdf,jpg,jpeg,png', 'max:5120'],
        ]);

        if ($handover->signed_form_path) {
            Storage::disk('public')->delete($handover->signed_form_path);
        }

        $path = $request->file('signed_form')->store('handovers/signed', 'public');
        $handover->update(['signed_form_path' => $path]);

        return back()->with('flash', [
            'type' => 'success',
            'message' => 'Fiche signée téléversée avec succès.'
        ]);
    }
    
    public function destroy(VehicleHandoverForm $handover): RedirectResponse
    {
        $this->authorize('delete handovers');
        
        $assignmentId = $handover->assignment_id;
        $handover->delete();

        return redirect()->route('admin.assignments.index')->with('flash', [
            'type' => 'warning',
            'message' => 'Fiche de remise archivée',
            'description' => "La fiche de remise pour l'affectation N°{$assignmentId} a été archivée."
        ]);
    }

    /**
     * Génère et télécharge la fiche de remise au format PDF en utilisant la nouvelle vue optimisée.
     */
    public function downloadPdf(VehicleHandoverForm $handover, PdfGenerationService $pdfService): Response|RedirectResponse
    {
        $this->authorize('view handovers');
        $handover->load(['assignment.vehicle.vehicleType', 'assignment.driver', 'assignment.organization', 'details']);
        $checklist = $handover->details->groupBy('category');

        // Déterminer le chemin de l'image du croquis et la convertir en base64
        $sketchName = $handover->assignment->vehicle->vehicleType->name === 'Moto' ? 'scooter_sketch.png' : 'car_sketch.png';
        $sketchPath = public_path('images/' . $sketchName);
        $vehicle_sketch_base64 = '';
        if (File::exists($sketchPath)) {
            $fileContent = File::get($sketchPath);
            $vehicle_sketch_base64 = 'data:image/png;base64,' . base64_encode($fileContent);
        }

        // Rendre la nouvelle vue PDF avec les données nécessaires
        $html = view('admin.handovers.vehicles.pdf', [
            'handoverForm' => $handover,
            'checklist' => $checklist,
            'vehicle_sketch_base64' => $vehicle_sketch_base64,
        ])->render();

        try {
            $pdfContent = $pdfService->generateFromHtml($html);
            $fileName = 'fiche-remise-' . $handover->assignment->id . '-' . $handover->issue_date->format('Y-m-d') . '.pdf';

            return new Response($pdfContent, 200, [
                'Content-Type' => 'application/pdf',
                'Content-Disposition' => 'attachment; filename="'.$fileName.'"',
            ]);

        } catch (\Exception $e) {
            Log::error("Erreur de génération PDF pour la fiche {$handover->id}: " . $e->getMessage(), ['exception' => $e]);
            
            return back()->with('flash', [
                'type' => 'error',
                'message' => 'Erreur lors de la génération du PDF.',
                'description' => 'Le service PDF a échoué. Veuillez réessayer ou contacter le support si le problème persiste.'
            ]);
        }
    }
}
--- FIN DU FICHIER : ./app/Http/Controllers/Admin/Handover/VehicleHandoverController.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Controllers/Admin/Maintenance/DashboardController.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Controllers\Admin\Maintenance;

use App\Http\Controllers\Controller;
use App\Models\Maintenance\MaintenancePlan;
use App\Models\Vehicle;
use Carbon\Carbon;
use Illuminate\View\View;
use Illuminate\Support\Facades\DB;

class DashboardController extends Controller
{
    public function index(): View
    {
        // --- Données pour le Graphique d'État de la Flotte ---
        $vehicleStats = Vehicle::query()
            ->join('vehicle_statuses', 'vehicles.status_id', '=', 'vehicle_statuses.id')
            ->select('vehicle_statuses.name', DB::raw('count(vehicles.id) as count'))
            ->groupBy('vehicle_statuses.name')
            ->pluck('count', 'name');

        // --- Données pour les Jauges d'Urgence de Maintenance ---
        $urgentPlans = MaintenancePlan::with('vehicle', 'maintenanceType')
            ->where(function ($query) {
                // Échéance par date dans les 45 prochains jours ou dépassée
                $query->where('next_due_date', '<=', Carbon::now()->addDays(45));
            })
            ->orWhere(function ($query) {
                // Échéance par kilométrage proche (à 2000 km ou moins) ou dépassée
                $query->whereNotNull('next_due_mileage')
                      ->whereHas('vehicle', function($vehicleQuery) {
                          $vehicleQuery->whereRaw('maintenance_plans.next_due_mileage - vehicles.current_mileage <= 2000');
                      });
            })
            ->whereHas('vehicle', fn($q) => $q->whereNull('deleted_at')) // Uniquement pour les véhicules actifs
            ->orderBy('next_due_date', 'asc')
            ->limit(6) // On limite à 6 pour un affichage clair
            ->get()
            ->map(function ($plan) {
                // Calcul du pourcentage d'urgence pour la jauge
                $urgencyPercent = 0;
                if ($plan->next_due_mileage && $plan->vehicle && $plan->vehicle->current_mileage > 0) {
                    $urgencyPercent = round(($plan->vehicle->current_mileage / $plan->next_due_mileage) * 100);
                }
                // La logique de date pourrait être plus complexe, on se base sur le kilométrage pour la jauge

                return [
                    'id' => $plan->id,
                    'vehicle_name' => $plan->vehicle->brand . ' ' . $plan->vehicle->model,
                    'plate' => $plan->vehicle->registration_plate,
                    'maintenance_type' => $plan->maintenanceType->name,
                    'urgency_percent' => min($urgencyPercent, 100), // Plafonner à 100%
                    'next_due' => $plan->next_due_mileage ? number_format($plan->next_due_mileage, 0, ',', ' ') . ' km' : $plan->next_due_date->format('d/m/Y'),
                ];
            });

        return view('admin.maintenance.dashboard', [
            'vehicleStats' => $vehicleStats,
            'urgentPlans' => $urgentPlans,
        ]);
    }
}

--- FIN DU FICHIER : ./app/Http/Controllers/Admin/Maintenance/DashboardController.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Controllers/Admin/Maintenance/MaintenanceLogController.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Controllers\Admin\Maintenance;

use App\Http\Controllers\Controller;
use App\Models\Maintenance\MaintenanceLog;
use App\Models\Maintenance\MaintenancePlan;
use App\Models\Maintenance\MaintenanceStatus;
use App\Models\Vehicle;
use Carbon\Carbon;
use Illuminate\Http\RedirectResponse;
use Illuminate\Http\Request;

class MaintenanceLogController extends Controller
{
    /**
     * Enregistre une nouvelle intervention de maintenance et met à jour le plan associé.
     */
    public function store(Request $request): RedirectResponse
    {
        $this->authorize('log maintenance');

        // On récupère le plan pour la validation du kilométrage
        $plan = MaintenancePlan::with('vehicle')->find($request->input('maintenance_plan_id'));

        $validated = $request->validate([
            'vehicle_id' => ['required', 'exists:vehicles,id'],
            'maintenance_type_id' => ['required', 'exists:maintenance_types,id'],
            'maintenance_plan_id' => ['nullable', 'exists:maintenance_plans,id'],
            'performed_on_date' => ['required', 'date'],
            'performed_at_mileage' => ['required', 'integer', 'gte:' . ($plan ? $plan->vehicle->current_mileage : 0)],
            'cost' => ['nullable', 'numeric', 'min:0'],
            'details' => ['nullable', 'string', 'max:2000'],
            'performed_by' => ['nullable', 'string', 'max:255'],
        ]);

        $statusTerminee = MaintenanceStatus::where('name', 'Terminée')->firstOrFail();
        $validated['maintenance_status_id'] = $statusTerminee->id;

        MaintenanceLog::create($validated);

        if ($plan) {
            $recurrenceUnit = $plan->recurrenceUnit;
            $recurrenceValue = $plan->recurrence_value;

            if ($recurrenceUnit->name === 'Kilomètres') {
                $plan->next_due_mileage = $validated['performed_at_mileage'] + $recurrenceValue;
            } elseif ($recurrenceUnit->name === 'Jours') {
                $plan->next_due_date = Carbon::parse($validated['performed_on_date'])->addDays($recurrenceValue);
            } elseif ($recurrenceUnit->name === 'Mois') {
                $plan->next_due_date = Carbon::parse($validated['performed_on_date'])->addMonths($recurrenceValue);
            }
            $plan->save();
        }

        // Mettre à jour le kilométrage principal du véhicule
        $vehicle = Vehicle::find($validated['vehicle_id']);
        if ($vehicle && $validated['performed_at_mileage'] > $vehicle->current_mileage) {
            $vehicle->update(['current_mileage' => $validated['performed_at_mileage']]);
        }

        return back()->with('success', 'Intervention de maintenance enregistrée avec succès.');
    }
}

--- FIN DU FICHIER : ./app/Http/Controllers/Admin/Maintenance/MaintenanceLogController.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Controllers/Admin/Maintenance/MaintenancePlanController.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Controllers\Admin\Maintenance;

use App\Http\Controllers\Controller;
use App\Models\Maintenance\MaintenancePlan;
use App\Models\Maintenance\MaintenanceType;
use App\Models\Maintenance\RecurrenceUnit;
use App\Models\Vehicle;
use Carbon\Carbon;
use Illuminate\Http\RedirectResponse;
use Illuminate\Http\Request;
use Illuminate\Validation\Rule;
use Illuminate\View\View;



class MaintenancePlanController extends Controller
{
    /**
     * Affiche la liste des plans de maintenance.
     */

 /**
     * Affiche la liste des plans de maintenance avec filtres.
     */
public function index(Request $request): View
    {
        $this->authorize('manage maintenance plans');

        $query = MaintenancePlan::with(['vehicle', 'maintenanceType', 'recurrenceUnit']);

        if ($request->filled('vehicle_id')) {
            $query->where('vehicle_id', $request->vehicle_id);
        }
        if ($request->filled('maintenance_type_id')) {
            $query->where('maintenance_type_id', $request->maintenance_type_id);
        }

        $query->orderBy('next_due_date', 'asc');
        $plans = $query->paginate(15)->withQueryString();

        // On prépare un tableau simple et propre pour la vue
        $plansForJs = $plans->getCollection()->mapWithKeys(function ($plan) {
            return [$plan->id => [
                'id' => $plan->id,
                'vehicle_id' => $plan->vehicle_id,
                'maintenance_type_id' => $plan->maintenance_type_id,
                'recurrence_value' => $plan->recurrence_value,
                'notes' => $plan->notes,
                'next_due_date' => $plan->next_due_date ? $plan->next_due_date->format('Y-m-d') : null,
                'next_due_mileage' => $plan->next_due_mileage,
                'vehicle' => $plan->vehicle ? $plan->vehicle->only('brand', 'model', 'registration_plate', 'current_mileage') : null,
                'maintenance_type' => $plan->maintenanceType ? $plan->maintenanceType->only('name') : null,
                'recurrence_unit' => $plan->recurrenceUnit ? $plan->recurrenceUnit->only('name') : null,
            ]];
        });

        $vehicles = Vehicle::orderBy('brand')->get();
        $maintenanceTypes = MaintenanceType::orderBy('name')->get();
	$recurrenceUnits = RecurrenceUnit::all();


        return view('admin.maintenance.plans.index', [
            'plans' => $plans,
            'plansForJs' => $plansForJs,
            'vehicles' => $vehicles,
            'maintenanceTypes' => $maintenanceTypes,
	    'recurrenceUnits' => $recurrenceUnits,
	    'filters' => $request->only(['vehicle_id', 'maintenance_type_id']),
        ]);
    }


         /**
     * Affiche le formulaire de création de plan de maintenance.
     */
    public function create(): View
    {
        $this->authorize('manage maintenance plans');

        // On passe simplement les données brutes nécessaires aux listes déroulantes.
        $vehicles = Vehicle::whereDoesntHave('maintenancePlans')->orderBy('brand')->get();
        $maintenanceTypes = MaintenanceType::orderBy('name')->get();
        $recurrenceUnits = RecurrenceUnit::all();

        return view('admin.maintenance.plans.create', compact('vehicles', 'maintenanceTypes', 'recurrenceUnits'));
    }

    /**
     * Affiche le formulaire de modification (cette méthode n'est plus utilisée,
     * car l'édition se fait via une modale directement dans la page index).
     * On la garde par convention pour un contrôleur de ressource.
     */
    public function edit(MaintenancePlan $plan): RedirectResponse
    {
        return redirect()->route('admin.maintenance.plans.index');
    }

    /**
     * Met à jour un plan de maintenance existant.
     */
    public function update(Request $request, MaintenancePlan $plan): RedirectResponse
    {
        $this->authorize('manage maintenance plans');

        $validated = $request->validate([
            'recurrence_value' => ['required', 'integer', 'min:1'],
            'recurrence_unit_id' => ['required', 'exists:recurrence_units,id'],
            'next_due_date' => ['nullable', 'date'],
            'next_due_mileage' => ['nullable', 'integer', 'min:0'],
            'notes' => ['nullable', 'string', 'max:2000'],
        ]);

        $plan->update($validated);

        return back()->with('success', 'Plan de maintenance mis à jour avec succès.');
    }


    /**
     * Enregistre un nouveau plan de maintenance.
     */
    public function store(Request $request): RedirectResponse
    {
        $this->authorize('manage maintenance plans');

        $validated = $request->validate([
            'vehicle_id' => ['required', 'exists:vehicles,id'],
            'maintenance_type_id' => ['required', 'exists:maintenance_types,id'],
            'recurrence_value' => ['required', 'integer', 'min:1'],
            'recurrence_unit_id' => ['required', 'exists:recurrence_units,id'],
            'next_due_date' => ['nullable', 'date'],
            'next_due_mileage' => ['nullable', 'integer', 'min:0'],
            'notes' => ['nullable', 'string', 'max:2000'],
        ]);

        $planData = $validated;

        // Calcul automatique de la première échéance si non fournie
        if (empty($planData['next_due_date']) && empty($planData['next_due_mileage'])) {
            $vehicle = Vehicle::find($planData['vehicle_id']);
            $recurrenceUnit = RecurrenceUnit::find($planData['recurrence_unit_id']);
            $recurrenceValue = $planData['recurrence_value'];

            if ($recurrenceUnit->name === 'Kilomètres') {
                $planData['next_due_mileage'] = $vehicle->current_mileage + $recurrenceValue;
            } elseif ($recurrenceUnit->name === 'Jours') {
                $planData['next_due_date'] = Carbon::now()->addDays($recurrenceValue);
            } elseif ($recurrenceUnit->name === 'Mois') {
                $planData['next_due_date'] = Carbon::now()->addMonths($recurrenceValue);
            }
        }

        MaintenancePlan::create($planData);

        return redirect()->route('admin.maintenance.plans.index')->with('success', 'Nouveau plan de maintenance ajouté avec succès.');
    }


}

--- FIN DU FICHIER : ./app/Http/Controllers/Admin/Maintenance/MaintenancePlanController.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Controllers/Admin/OrganizationController.php
////////////////////////////////////////////////////////////////

<?php
namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Http\Requests\Admin\Organization\StoreOrganizationRequest;
use App\Http\Requests\Admin\Organization\UpdateOrganizationRequest;
use App\Models\Organization;
use Illuminate\Http\RedirectResponse;
use Illuminate\View\View;

class OrganizationController extends Controller
{
    public function index(): View
    {
        $this->authorize('view organizations');
        // On désactive le scope global pour que l'Admin puisse voir toutes les organisations
        $organizations = Organization::withoutGlobalScope('organization')
            ->withCount('users') // Compte les utilisateurs pour l'affichage
            ->paginate(15);
        return view('admin.organizations.index', compact('organizations'));
    }

    public function create(): View
    {
        $this->authorize('create organizations');
        return view('admin.organizations.create');
    }

    public function store(StoreOrganizationRequest $request): RedirectResponse
    {
        Organization::create($request->validated());
        return redirect()->route('admin.organizations.index')->with('success', 'Organisation créée avec succès.');
    }

    public function edit(Organization $organization): View
    {
        $this->authorize('edit organizations');
        return view('admin.organizations.edit', compact('organization'));
    }

    public function update(UpdateOrganizationRequest $request, Organization $organization): RedirectResponse
    {
        $organization->update($request->validated());
        return redirect()->route('admin.organizations.index')->with('success', 'Organisation mise à jour avec succès.');
    }

    public function destroy(Organization $organization): RedirectResponse
    {
        $this->authorize('delete organizations');
        // A FAIRE : Ajouter une logique pour empêcher la suppression de sa propre organisation
        $organization->delete();
        return redirect()->route('admin.organizations.index')->with('success', 'Organisation supprimée. Attention, toutes les données associées (véhicules, chauffeurs, etc.) ont également été supprimées.');
    }
}

--- FIN DU FICHIER : ./app/Http/Controllers/Admin/OrganizationController.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Controllers/Admin/PlanningController.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Repositories\Interfaces\VehicleRepositoryInterface;
use Carbon\Carbon;
use Illuminate\Http\Request;
use Illuminate\View\View;

class PlanningController extends Controller
{
    private VehicleRepositoryInterface $vehicleRepository;

    public function __construct(VehicleRepositoryInterface $vehicleRepository)
    {
        $this->vehicleRepository = $vehicleRepository;
    }

    /**
     * Affiche la vue du planning GANTT.
     *
     * @param Request $request
     * @return View
     */
    public function index(Request $request): View
    {
        $this->authorize('view assignments'); // Reuse permission from assignments

        // --- Gestion de la Période ---
        $viewMode = $request->input('view_mode', 'week');
        $baseDate = $request->has('date') ? Carbon::parse($request->input('date')) : Carbon::today();

        switch ($viewMode) {
            case 'day':
                $startDate = $baseDate->copy()->startOfDay();
                $endDate = $baseDate->copy()->endOfDay();
                break;
            case 'month':
                $startDate = $baseDate->copy()->startOfMonth();
                $endDate = $baseDate->copy()->endOfMonth();
                break;
            case 'year':
                $startDate = $baseDate->copy()->startOfYear();
                $endDate = $baseDate->copy()->endOfYear();
                break;
            case 'week':
            default:
                $startDate = $baseDate->copy()->startOfWeek(Carbon::MONDAY);
                $endDate = $baseDate->copy()->endOfWeek(Carbon::SUNDAY);
                break;
        }

        // --- Récupération des données ---
        $filters = $request->only(['search', 'per_page', 'sort']);
        $vehicles = $this->vehicleRepository->getForPlanning(
            $filters,
            $startDate->toDateString(),
            $endDate->toDateString()
        );

        return view('admin.planning.index', [
            'vehicles' => $vehicles,
            'filters' => $filters,
            'dateRange' => [
                'start' => $startDate,
                'end' => $endDate,
            ],
            'baseDate' => $baseDate,
            'viewMode' => $viewMode,
        ]);
    }
}
--- FIN DU FICHIER : ./app/Http/Controllers/Admin/PlanningController.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Controllers/Admin/RoleController.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Http\RedirectResponse;
use Illuminate\Http\Request;
use Illuminate\View\View;
use Spatie\Permission\Models\Permission;
use Spatie\Permission\Models\Role;

class RoleController extends Controller
{
    /**
     * Affiche la liste des rôles.
     */
    public function index(): View
    {
        $roles = Role::orderBy('name')->get();

        return view('admin.roles.index', compact('roles'));
    }

    /**
     * Affiche le formulaire pour modifier un rôle et ses permissions.
     */
    public function edit(Role $role): View
    {
        // Récupère toutes les permissions disponibles pour les afficher
        $permissions = Permission::all();

        return view('admin.roles.edit', compact('role', 'permissions'));
    }

    /**
     * Met à jour un rôle avec les permissions sélectionnées.
     */
/**
 * Met à jour un rôle avec les permissions sélectionnées.
 */
public function update(Request $request, Role $role): RedirectResponse
{
    // 1. Valider que les données entrantes sont bien des IDs de permissions valides
    $validated = $request->validate([
        'permissions' => 'sometimes|array',
        'permissions.*' => 'exists:permissions,id', // Valide que chaque ID existe dans la table 'permissions'
    ]);

    // 2. Récupérer le tableau d'IDs de permissions depuis la requête validée
    $permissionIds = $validated['permissions'] ?? [];

    // 3. Trouver les objets Permission correspondant à ces IDs
    $permissions = Permission::whereIn('id', $permissionIds)->get();

    // 4. Synchroniser les permissions en utilisant la collection d'objets Permission.
    // C'est la méthode la plus robuste qui élimine toute ambiguïté.
    $role->syncPermissions($permissions);

    return redirect()->route('admin.roles.index')
        ->with('success', "Les permissions pour le rôle '{$role->name}' ont été mises à jour.");
}




}

--- FIN DU FICHIER : ./app/Http/Controllers/Admin/RoleController.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Controllers/Admin/SupplierCategoryController.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Http\Requests\Admin\SupplierCategory\StoreSupplierCategoryRequest;
use App\Services\SupplierCategoryService;
use Illuminate\Http\JsonResponse;

class SupplierCategoryController extends Controller
{
    protected $supplierCategoryService;

    public function __construct(SupplierCategoryService $supplierCategoryService)
    {
        $this->supplierCategoryService = $supplierCategoryService;
    }

    public function store(StoreSupplierCategoryRequest $request): JsonResponse
    {
        $category = $this->supplierCategoryService->createCategory($request->validated());
        return response()->json([
            'success' => true,
            'message' => 'Catégorie ajoutée avec succès.',
            'category' => $category
        ]);
    }
}
--- FIN DU FICHIER : ./app/Http/Controllers/Admin/SupplierCategoryController.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Controllers/Admin/SupplierController.php
////////////////////////////////////////////////////////////////

<?php
namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Http\Requests\Admin\Supplier\StoreSupplierRequest;
use App\Http\Requests\Admin\Supplier\UpdateSupplierRequest;
use App\Models\Supplier;
use App\Services\SupplierService;
use Illuminate\Http\RedirectResponse;
use Illuminate\Http\Request;
use Illuminate\View\View;

class SupplierController extends Controller
{
    protected SupplierService $supplierService;

    public function __construct(SupplierService $supplierService)
    {
        $this->supplierService = $supplierService;
    }

    public function index(Request $request): View
    {
        $this->authorize('view suppliers');
        $filters = $request->only(['search', 'per_page']);
        $suppliers = $this->supplierService->getFilteredSuppliers($filters);
        return view('admin.suppliers.index', compact('suppliers', 'filters'));
    }

    public function create(): View
    {
        $this->authorize('create suppliers');

        // La méthode du service retourne déjà un tableau prêt pour la vue.
        $data = $this->supplierService->getDataForCreateForm();

        return view('admin.suppliers.create', $data);
    }

    public function store(StoreSupplierRequest $request): RedirectResponse
    {
        $this->supplierService->createSupplier($request->validated());
        return redirect()->route('admin.suppliers.index')->with('success', 'Fournisseur créé avec succès.');
    }

    public function edit(Supplier $supplier): View
    {
        $this->authorize('edit suppliers');
        $data = $this->supplierService->getDataForCreateForm();
        $data['supplier'] = $supplier;
        return view('admin.suppliers.edit', $data);
    }

    public function update(UpdateSupplierRequest $request, Supplier $supplier): RedirectResponse
    {
        $this->supplierService->updateSupplier($supplier, $request->validated());
        return redirect()->route('admin.suppliers.index')->with('success', 'Fournisseur mis à jour avec succès.');
    }

    public function destroy(Supplier $supplier): RedirectResponse
    {
        $this->authorize('delete suppliers');
        $this->supplierService->archiveSupplier($supplier);
        return redirect()->route('admin.suppliers.index')->with('success', 'Fournisseur archivé avec succès.');
    }
}
--- FIN DU FICHIER : ./app/Http/Controllers/Admin/SupplierController.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Controllers/Admin/UserController.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\User;
use App\Models\Organization;
use Illuminate\Http\RedirectResponse;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Hash;
use Illuminate\Validation\Rules;
use Illuminate\View\View;
use Spatie\Permission\Models\Role;

class UserController extends Controller
{
    public function index(): View
    {
        $this->authorize('view users');

        $query = User::with(['roles', 'organization']);

        // Si l'utilisateur n'est pas Super Admin, on filtre par son organisation
        if (!auth()->user()->hasRole('Super Admin')) {
            $query->where('organization_id', auth()->user()->organization_id);
        }

        $users = $query->orderBy('id', 'desc')->paginate(15);

        return view('admin.users.index', compact('users'));
    }

    public function create(): View
    {
        $this->authorize('create users');
        $roles = Role::all();
        $user = auth()->user();

        if ($user->hasRole('Super Admin')) {
            $organizations = Organization::withoutGlobalScope('organization')->orderBy('name')->get();
        } else {
            $organizations = Organization::where('id', $user->organization_id)->get();
        }

        return view('admin.users.create', compact('roles', 'organizations'));
    }

    public function store(Request $request): RedirectResponse
    {
        $this->authorize('create users');

        $user = auth()->user();
        $organizationId = $user->hasRole('Super Admin') ? $request->input('organization_id') : $user->organization_id;

        $request->merge(['organization_id' => $organizationId]);

        $validated = $request->validate([
            'first_name' => ['required', 'string', 'max:255'],
            'last_name' => ['required', 'string', 'max:255'],
            'email' => ['required', 'string', 'email', 'max:255', 'unique:'.User::class],
            'password' => ['required', 'confirmed', Rules\Password::defaults()],
            'organization_id' => ['required', 'exists:organizations,id'],
            'roles' => 'sometimes|array',
            'roles.*' => 'exists:roles,id', // Valide que les IDs existent
        ]);

        $newUser = User::create([
            'first_name' => $validated['first_name'],
            'last_name' => $validated['last_name'],
            'email' => $validated['email'],
            'password' => Hash::make($validated['password']),
            'organization_id' => $validated['organization_id'],
        ]);

        // CORRECTION : On récupère les modèles de Rôle avant de synchroniser
        if (!empty($validated['roles'])) {
            $rolesToSync = Role::whereIn('id', $validated['roles'])->get();
            $newUser->syncRoles($rolesToSync);
        }

        return redirect()->route('admin.users.index')->with('success', 'Utilisateur créé avec succès.');
    }

    public function edit(User $user): View
    {
        $this->authorize('edit users');
        $roles = Role::all();
        $loggedInUser = auth()->user();

        if ($loggedInUser->hasRole('Super Admin')) {
            $organizations = Organization::withoutGlobalScope('organization')->orderBy('name')->get();
        } else {
            // Un admin ne peut voir que sa propre organisation
            $organizations = Organization::where('id', $loggedInUser->organization_id)->get();
            // On s'assure qu'un admin ne peut pas éditer un utilisateur d'une autre organisation
            if ($user->organization_id !== $loggedInUser->organization_id) {
                abort(403, 'Vous n\'êtes pas autorisé à modifier cet utilisateur.');
            }
        }

        return view('admin.users.edit', compact('user', 'roles', 'organizations'));
    }

    public function update(Request $request, User $user): RedirectResponse
    {
        $this->authorize('edit users');
        $loggedInUser = auth()->user();

        // Un admin ne peut pas changer l'organisation d'un utilisateur
        if (!$loggedInUser->hasRole('Super Admin')) {
            if ($request->input('organization_id') && $request->input('organization_id') != $loggedInUser->organization_id) {
                abort(403, 'Vous n\'êtes pas autorisé à changer l\'organisation de l\'utilisateur.');
            }
        }

        $validated = $request->validate([
            'first_name' => ['required', 'string', 'max:255'],
            'last_name' => ['required', 'string', 'max:255'],
            'email' => ['required', 'string', 'email', 'max:255', 'unique:users,email,'.$user->id],
            'organization_id' => ['required', 'exists:organizations,id'],
            'roles' => 'sometimes|array',
            'roles.*' => 'exists:roles,id',
            'password' => ['nullable', 'confirmed', Rules\Password::defaults()],
        ]);

        $userData = [
            'first_name' => $validated['first_name'],
            'last_name' => $validated['last_name'],
            'email' => $validated['email'],
            'organization_id' => $validated['organization_id'],
        ];
        if (!empty($validated['password'])) {
            $userData['password'] = Hash::make($validated['password']);
        }

        $user->update($userData);

        // CORRECTION : On récupère les modèles de Rôle avant de synchroniser
        $rolesToSync = Role::whereIn('id', $validated['roles'] ?? [])->get();
        $user->syncRoles($rolesToSync);

        return redirect()->route('admin.users.index')->with('success', 'Utilisateur mis à jour avec succès.');
    }

    public function destroy(User $user): RedirectResponse
    {
        $this->authorize('delete users');
        if (auth()->id() == $user->id) {
            return back()->with('error', 'Vous ne pouvez pas supprimer votre propre compte.');
        }
        $user->delete();
        return redirect()->route('admin.users.index')->with('success', 'Utilisateur supprimé avec succès.');
    }
}
--- FIN DU FICHIER : ./app/Http/Controllers/Admin/UserController.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Controllers/Admin/VehicleController.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Http\Requests\Admin\Vehicle\StoreVehicleRequest;
use App\Http\Requests\Admin\UpdateVehicleRequest;
use App\Models\FuelType;
use App\Models\TransmissionType;
use App\Models\User;
use App\Models\Vehicle;
use App\Models\VehicleStatus;
use App\Models\VehicleType;
use App\Services\ImportExportService;
use App\Services\VehicleService;
use Illuminate\Http\RedirectResponse;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\Log;
use Illuminate\Support\Facades\Storage;
use Illuminate\Support\Facades\Validator;
use Illuminate\Support\Str;
use Illuminate\View\View;
use League\Csv\Reader;
use League\Csv\Statement;
use League\Csv\Writer;


class VehicleController extends Controller
{
    protected $vehicleService;
    protected $importExportService;

    /**
     * Constructeur avec injection des services
     */
    public function __construct(VehicleService $vehicleService, ImportExportService $importExportService)
    {
        $this->vehicleService = $vehicleService;
        $this->importExportService = $importExportService;
    }

    /**
     * Affiche la liste des véhicules
     */
    public function index(Request $request)
    {
        // Utilisation de la permission spécifique 'view vehicles' comme dans DriverController
        $this->authorize('view vehicles');

        $filters = $request->only(['search', 'status_id', 'view_deleted']);
        $vehicles = $this->vehicleService->getFilteredVehicles($filters);

        // Correction: Passer la variable sous le nom attendu par la vue
        $vehicleStatuses = VehicleStatus::all();

        return view('admin.vehicles.index', compact('vehicles', 'vehicleStatuses', 'filters'));
    }


    /**
     * Méthode privée pour récupérer les utilisateurs assignables
     * en fonction du rôle de l'utilisateur connecté.
     */
    private function getAssignableUsers()
    {
        $user = Auth::user();

        if ($user->hasRole('Super Admin')) {
            // Le Super Admin peut voir tous les utilisateurs
            return User::orderBy('name')->get();
        }

        // Un Admin ne voit que les utilisateurs de sa propre organisation
        return User::where('organization_id', $user->organization_id)->orderBy('name')->get();
    }

    
    /**
     * Affiche le formulaire de création d'un véhicule
     */
    public function create()
    {
        // Utilisation de la permission spécifique 'create vehicles'
        $this->authorize('create vehicles');

        $users = $this->getAssignableUsers();
        //$users = User::orderBy('name')->get();
        $vehicleTypes = VehicleType::all();
        $fuelTypes = FuelType::all();
        $transmissionTypes = TransmissionType::all();
        $vehicleStatuses = VehicleStatus::all();

        return view('admin.vehicles.create', compact('users','vehicleTypes', 'fuelTypes', 'transmissionTypes', 'vehicleStatuses'));
    }

    /**
     * Enregistre un nouveau véhicule
     */
    public function store(Request $request)
    {
        // Utilisation de la permission spécifique 'create vehicles'
        $this->authorize('create vehicles');

        try {
            $validated = $request->validate([
                'registration_plate' => 'required|string|max:20',
                'vin' => 'nullable|string|max:50',
                'brand' => 'required|string|max:50',
                'model' => 'required|string|max:50',
                'color' => 'nullable|string|max:30',
                'vehicle_type_id' => 'required|exists:vehicle_types,id',
                'fuel_type_id' => 'required|exists:fuel_types,id',
                'transmission_type_id' => 'required|exists:transmission_types,id',
                'status_id' => 'required|exists:vehicle_statuses,id',
                'year' => 'nullable|integer|min:1900|max:' . (date('Y') + 1),
                'acquisition_date' => 'nullable|date',
                'purchase_price' => 'nullable|numeric|min:0',
                'current_value' => 'nullable|numeric|min:0',
                'initial_mileage' => 'nullable|integer|min:0',
                'engine_capacity' => 'nullable|integer|min:0',
                'power' => 'nullable|integer|min:0',
                'seats' => 'nullable|integer|min:0',
                'notes' => 'nullable|string',
                'photo' => 'nullable|image|max:2048',
                'users' => 'nullable|array',
                'users.*' => 'exists:users,id',
            ]);

            // Ajouter l'ID de l'organisation
            $validated['organization_id'] = auth()->user()->organization_id;

            // Créer le véhicule
            $vehicle = $this->vehicleService->createVehicle(
                $validated,
                $request->file('photo'),
                $request->input('users', [])
            );

            return redirect()->route('admin.vehicles.index')
                ->with('success', __('vehicles.messages.create_success'));
        } catch (\Exception $e) {
            Log::error('Erreur lors de la création du véhicule', [
                'exception' => $e->getMessage(),
                'trace' => $e->getTraceAsString()
            ]);

            return back()->withInput()->with('error', 'Une erreur est survenue lors de la création du véhicule.');
        }
    }

    /**
     * Affiche les détails d'un véhicule
     */
    public function show(Vehicle $vehicle)
    {
        // Utilisation de la permission spécifique 'view vehicles'
        $this->authorize('view vehicles');

        return view('admin.vehicles.show', compact('vehicle'));
    }

    /**
     * Affiche le formulaire d'édition d'un véhicule
     */
    public function edit(Vehicle $vehicle)
    {
        // Utilisation de la permission spécifique 'edit vehicles'
        $this->authorize('edit vehicles');

        $users = $this->getAssignableUsers();
        //$users = User::orderBy('name')->get();
        $vehicleTypes = VehicleType::all();
        $fuelTypes = FuelType::all();
        $transmissionTypes = TransmissionType::all();
        $vehicleStatuses = VehicleStatus::all();

        return view('admin.vehicles.edit', compact('vehicle', 'users', 'vehicleTypes', 'fuelTypes', 'transmissionTypes', 'vehicleStatuses'));
    }

    /**
     * Met à jour un véhicule
     */
    public function update(Request $request, Vehicle $vehicle)
    {
        // Utilisation de la permission spécifique 'edit vehicles'
        $this->authorize('edit vehicles');

        try {
            $validated = $request->validate([
                'registration_plate' => 'required|string|max:20',
                'vin' => 'nullable|string|max:50',
                'brand' => 'required|string|max:50',
                'model' => 'required|string|max:50',
                'color' => 'nullable|string|max:30',
                'vehicle_type_id' => 'required|exists:vehicle_types,id',
                'fuel_type_id' => 'required|exists:fuel_types,id',
                'transmission_type_id' => 'required|exists:transmission_types,id',
                'status_id' => 'required|exists:vehicle_statuses,id',
                'year' => 'nullable|integer|min:1900|max:' . (date('Y') + 1),
                'acquisition_date' => 'nullable|date',
                'purchase_price' => 'nullable|numeric|min:0',
                'current_value' => 'nullable|numeric|min:0',
                'initial_mileage' => 'nullable|integer|min:0',
                'engine_capacity' => 'nullable|integer|min:0',
                'power' => 'nullable|integer|min:0',
                'seats' => 'nullable|integer|min:0',
                'notes' => 'nullable|string',
                'photo' => 'nullable|image|max:2048',
                'users' => 'nullable|array',
                'users.*' => 'exists:users,id',
            ]);

            // Mettre à jour le véhicule
            $this->vehicleService->updateVehicle(
                $vehicle,
                $validated,
                $request->file('photo'),
                $request->input('users', [])
            );

            return redirect()->route('admin.vehicles.index')
                ->with('success', __('vehicles.messages.update_success'));
        } catch (\Exception $e) {
            Log::error('Erreur lors de la mise à jour du véhicule', [
                'vehicle_id' => $vehicle->id,
                'exception' => $e->getMessage(),
                'trace' => $e->getTraceAsString()
            ]);

            return back()->withInput()->with('error', 'Une erreur est survenue lors de la mise à jour du véhicule.');
        }
    }

    /**
     * Archive un véhicule (soft delete)
     */
    public function destroy(Vehicle $vehicle)
    {
        // Utilisation de la permission spécifique 'delete vehicles'
        $this->authorize('delete vehicles');

        try {
            $this->vehicleService->archiveVehicle($vehicle);

            return redirect()->route('admin.vehicles.index')
                ->with('success', __('vehicles.messages.archive_success'));
        } catch (\Exception $e) {
            Log::error('Erreur lors de l\'archivage du véhicule', [
                'vehicle_id' => $vehicle->id,
                'exception' => $e->getMessage()
            ]);

            return back()->with('error', 'Une erreur est survenue lors de l\'archivage du véhicule.');
        }
    }

    /**
     * Restaure un véhicule archivé
     */
    public function restore($id)
    {
        // Utilisation de la permission spécifique 'restore vehicles'
        $this->authorize('restore vehicles');

        try {
            $this->vehicleService->restoreVehicle($id);

            return redirect()->route('admin.vehicles.index')
                ->with('success', __('vehicles.messages.restore_success'));
        } catch (\Exception $e) {
            Log::error('Erreur lors de la restauration du véhicule', [
                'vehicle_id' => $id,
                'exception' => $e->getMessage()
            ]);

            return back()->with('error', 'Une erreur est survenue lors de la restauration du véhicule.');
        }
    }

    /**
     * Supprime définitivement un véhicule
     */
    public function forceDelete($id)
    {
        // Utilisation de la permission spécifique 'force delete vehicles'
        $this->authorize('force delete vehicles');

        try {
            $this->vehicleService->forceDeleteVehicle($id);

            return redirect()->route('admin.vehicles.index')
                ->with('success', __('vehicles.messages.delete_success'));
        } catch (\Exception $e) {
            Log::error('Erreur lors de la suppression définitive du véhicule', [
                'vehicle_id' => $id,
                'exception' => $e->getMessage()
            ]);

            return back()->with('error', 'Une erreur est survenue lors de la suppression définitive du véhicule.');
        }
    }

    /**
     * Affiche la page d'importation de véhicules
     */
    public function showImportForm()
    {
        // Utilisation de la permission spécifique 'create vehicles' pour l'importation
        $this->authorize('create vehicles');

        return view('admin.vehicles.import');
    }

    /**
     * Traite l'importation de véhicules depuis un fichier CSV
     */
     public function handleImport(Request $request): RedirectResponse
    {
        $this->authorize('create vehicles');
        $request->validate(['csv_file' => ['required', 'file', 'mimes:csv,txt']]);

        // Pré-charger les données de référence (case-insensitive)
        $vehicleTypes = VehicleType::all()->keyBy(fn($item) => strtolower($item->name));
        $fuelTypes = FuelType::all()->keyBy(fn($item) => strtolower($item->name));
        $transmissionTypes = TransmissionType::all()->keyBy(fn($item) => strtolower($item->name));
        $vehicleStatuses = VehicleStatus::all()->keyBy(fn($item) => strtolower($item->name));

        $path = $request->file('csv_file')->getRealPath();
        $csv = Reader::createFromPath($path, 'r');
        $csv->setHeaderOffset(0);
        $records = Statement::create()->process($csv);

        $successCount = 0;
        $errorRows = [];
        $rowNumber = 1;

        foreach ($records as $record) {
            $rowNumber++;
            $data = array_map('trim', $record);

            // Conversion des noms en ID et formatage des données
            $preparedData = [
                'registration_plate' => $data['immatriculation'] ?? null,
                'vin' => $data['numero_serie_vin'] ?? null,
                'brand' => $data['marque'] ?? null,
                'model' => $data['modele'] ?? null,
                'color' => $data['couleur'] ?? null,
                'manufacturing_year' => $this->importExportService->formatInteger($data['annee_fabrication'] ?? null),
                'acquisition_date' => $this->importExportService->formatDate($data['date_acquisition'] ?? null),
                'purchase_price' => $this->importExportService->formatDecimal($data['prix_achat'] ?? null),
                'current_value' => $this->importExportService->formatDecimal($data['valeur_actuelle'] ?? null),
                'initial_mileage' => $this->importExportService->formatInteger($data['kilometrage_initial'] ?? null),
                'engine_displacement_cc' => $this->importExportService->formatInteger($data['cylindree_cc'] ?? null),
                'power_hp' => $this->importExportService->formatInteger($data['puissance_cv'] ?? null),
                'seats' => $this->importExportService->formatInteger($data['nombre_places'] ?? null),
                'notes' => $data['notes'] ?? null,
                'vehicle_type_id' => $vehicleTypes->get(strtolower($data['type_vehicule'] ?? ''))?->id,
                'fuel_type_id' => $fuelTypes->get(strtolower($data['type_carburant'] ?? ''))?->id,
                'transmission_type_id' => $transmissionTypes->get(strtolower($data['type_transmission'] ?? ''))?->id,
                'status_id' => $vehicleStatuses->get(strtolower($data['statut'] ?? ''))?->id,
            ];
            
            // Utilisation du FormRequest pour la validation pour la cohérence
            $validator = Validator::make($preparedData, (new StoreVehicleRequest())->rules());

            if ($validator->fails()) {
                $errorRows[] = ['line' => $rowNumber, 'errors' => $validator->errors()->all(), 'data' => $record];
            } else {
                $validatedData = $validator->validated();
                $validatedData["current_mileage"] = $validatedData["initial_mileage"] ?? 0;
                // Assurer que l'organization_id est ajouté
                $validatedData['organization_id'] = auth()->user()->organization_id;
                Vehicle::create($validatedData);
                $successCount++;
            }
        }

        // Redirection vers la page de résultats
        return redirect()->route('admin.vehicles.import.results')
            ->with('successCount', $successCount)
            ->with('errorRows', $errorRows)
            ->with('importId', uniqid())
            ->with('fileName', $request->file('csv_file')->getClientOriginalName());
    }

    /**
     * Affiche les résultats de l'importation
     */
    public function showImportResults(Request $request)
    {
        // Utilisation de la permission spécifique 'create vehicles' pour voir les résultats d'importation
        $this->authorize('create vehicles');

        // Récupérer les résultats de l'importation depuis la session
        $successCount = session('successCount', 0);
        $errorRows = session('errorRows', []);
        $importId = session('importId', null);
        $fileName = session('fileName', 'Fichier CSV');
        $encoding = session('encoding', 'utf8');

        // Si aucun résultat n'est disponible, rediriger vers la page d'importation
        if ($successCount === 0 && empty($errorRows)) {
            return redirect()->route('admin.vehicles.import.show')
                ->with('error', 'Aucun résultat d\'importation disponible. Veuillez importer un fichier.');
        }

        return view('admin.vehicles.import-results', compact(
            'successCount',
            'errorRows',
            'importId',
            'fileName',
            'encoding'
        ));
    }

    /**
     * Exporte les lignes en erreur vers un fichier CSV
     */
    public function exportErrors(Request $request, $import_id)
    {
        // Utilisation de la permission spécifique 'create vehicles' pour exporter les erreurs
        $this->authorize('create vehicles');

        // Récupérer les résultats de l'importation depuis la session
        $results = session('import_results');

        // Vérifier que les résultats correspondent à l'ID d'importation demandé
        if (!$results || $results['import_id'] !== $import_id) {
            return redirect()->route('admin.vehicles.import.show')
                ->with('error', 'Les données d\'erreur demandées ne sont plus disponibles.');
        }

        $errorRows = $results['error_rows'] ?? [];

        // Utiliser le service pour exporter les erreurs
        return $this->importExportService->exportErrorRows($errorRows, $import_id);
    }

    /**
     * Génère un fichier CSV modèle pour l'importation
     */
    public function downloadTemplate()
    {
        // Utilisation de la permission spécifique 'create vehicles' pour télécharger le template
        $this->authorize('create vehicles');

        // En-têtes du CSV
        $headers = [
            'immatriculation',
            'numero_serie_vin',
            'marque',
            'modele',
            'couleur',
            'type_vehicule',
            'type_carburant',
            'type_transmission',
            'statut',
            'annee_fabrication',
            'date_acquisition',
            'prix_achat',
            'valeur_actuelle',
            'kilometrage_initial',
            'cylindree_cc',
            'puissance_cv',
            'nombre_places',
            'notes'
        ];

        // Exemple de données
        $example = [
            'AB-123-CD',
            'VF1234567890ABCDE',
            'Renault',
            'Clio',
            'Bleu',
            'Berline',
            'Diesel',
            'Manuelle',
            'Parking',
            '2020',
            '2021-01-15',
            '15000',
            '12000',
            '10000',
            '1500',
            '90',
            '5',
            'Véhicule de service'
        ];

        // Utiliser le service pour générer le template
        return $this->importExportService->generateCsvTemplate(
            'modele_import_vehicules.csv',
            $headers,
            $example
        );
    }
}
--- FIN DU FICHIER : ./app/Http/Controllers/Admin/VehicleController.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Controllers/Api/AssignmentController.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Controllers\Api;

use App\Http\Controllers\Controller;
use App\Models\Assignment;
use Illuminate\Http\Request;
use Illuminate\Http\JsonResponse;
use App\Http\Requests\Admin\Assignment\StoreAssignmentRequest;
use App\Services\AssignmentService;

class AssignmentController extends Controller
{
    protected AssignmentService $assignmentService;

    public function __construct(AssignmentService $assignmentService)
    {
        $this->assignmentService = $assignmentService;
    }

    /**
     * Display the specified resource.
     */
    public function show(Assignment $assignment): JsonResponse
    {
        $this->authorize('view assignments');
        $assignment->load(['vehicle', 'driver']);
        return response()->json($assignment);
    }

    /**
     * Store a newly created resource in storage.
     */
    public function store(StoreAssignmentRequest $request): JsonResponse
    {
        $this->authorize('create assignments');
        $assignment = $this->assignmentService->createAssignment($request->validated());
        return response()->json($assignment, 201);
    }

    /**
     * Update the specified resource in storage.
     */
    public function update(Request $request, Assignment $assignment): JsonResponse
    {
        $this->authorize('edit assignments');
        // Validation will be more detailed later
        $validated = $request->validate([
            'driver_id' => 'sometimes|required|exists:drivers,id',
            'start_datetime' => 'sometimes|required|date',
            'end_datetime' => 'nullable|date|after_or_equal:start_datetime',
            // Add other fields as needed
        ]);

        $this->assignmentService->updateAssignment($assignment, $validated);

        return response()->json($assignment->fresh());
    }

    /**
     * Remove the specified resource from storage.
     */
    public function destroy(Assignment $assignment): JsonResponse
    {
        $this->authorize('delete assignments');
        $assignment->delete();
        return response()->json(null, 204);
    }

    /**
     * Move or resize an assignment from the GANTT chart.
     */
    public function move(Request $request, Assignment $assignment): JsonResponse
    {
        $this->authorize('edit assignments');

        $validated = $request->validate([
            'start_datetime' => 'required|date',
            'end_datetime' => 'required|date|after_or_equal:start_datetime',
            'vehicle_id' => 'sometimes|required|exists:vehicles,id'
        ]);

        // Basic conflict check (will be enhanced later)
        $conflicting = Assignment::where('vehicle_id', $validated['vehicle_id'] ?? $assignment->vehicle_id)
            ->where('id', '!=', $assignment->id)
            ->where(function ($query) use ($validated) {
                $query->where(function($q) use ($validated) {
                    $q->where('start_datetime', '<', $validated['end_datetime'])
                      ->where('end_datetime', '>', $validated['start_datetime']);
                });
            })->exists();

        if ($conflicting) {
            return response()->json(['message' => 'Conflit d\'affectation détecté.'], 409);
        }

        $assignment->update($validated);

        return response()->json($assignment);
    }
}
--- FIN DU FICHIER : ./app/Http/Controllers/Api/AssignmentController.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Controllers/Auth/AuthenticatedSessionController.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use App\Http\Requests\Auth\LoginRequest;
use App\Providers\RouteServiceProvider;
use Illuminate\Http\RedirectResponse;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Illuminate\View\View;

class AuthenticatedSessionController extends Controller
{
    /**
     * Display the login view.
     */
    public function create(): View
    {
        return view('auth.login');
    }

    /**
     * Handle an incoming authentication request.
     */
    public function store(LoginRequest $request): RedirectResponse
    {
        $request->authenticate();

        $request->session()->regenerate();

        return redirect()->intended(RouteServiceProvider::HOME);
    }

    /**
     * Destroy an authenticated session.
     */
    public function destroy(Request $request): RedirectResponse
    {
        Auth::guard('web')->logout();

        $request->session()->invalidate();

        $request->session()->regenerateToken();

        return redirect('/');
    }
}

--- FIN DU FICHIER : ./app/Http/Controllers/Auth/AuthenticatedSessionController.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Controllers/Auth/ConfirmablePasswordController.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use App\Providers\RouteServiceProvider;
use Illuminate\Http\RedirectResponse;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Illuminate\Validation\ValidationException;
use Illuminate\View\View;

class ConfirmablePasswordController extends Controller
{
    /**
     * Show the confirm password view.
     */
    public function show(): View
    {
        return view('auth.confirm-password');
    }

    /**
     * Confirm the user's password.
     */
    public function store(Request $request): RedirectResponse
    {
        if (! Auth::guard('web')->validate([
            'email' => $request->user()->email,
            'password' => $request->password,
        ])) {
            throw ValidationException::withMessages([
                'password' => __('auth.password'),
            ]);
        }

        $request->session()->put('auth.password_confirmed_at', time());

        return redirect()->intended(RouteServiceProvider::HOME);
    }
}

--- FIN DU FICHIER : ./app/Http/Controllers/Auth/ConfirmablePasswordController.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Controllers/Auth/EmailVerificationNotificationController.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use App\Providers\RouteServiceProvider;
use Illuminate\Http\RedirectResponse;
use Illuminate\Http\Request;

class EmailVerificationNotificationController extends Controller
{
    /**
     * Send a new email verification notification.
     */
    public function store(Request $request): RedirectResponse
    {
        if ($request->user()->hasVerifiedEmail()) {
            return redirect()->intended(RouteServiceProvider::HOME);
        }

        $request->user()->sendEmailVerificationNotification();

        return back()->with('status', 'verification-link-sent');
    }
}

--- FIN DU FICHIER : ./app/Http/Controllers/Auth/EmailVerificationNotificationController.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Controllers/Auth/EmailVerificationPromptController.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use App\Providers\RouteServiceProvider;
use Illuminate\Http\RedirectResponse;
use Illuminate\Http\Request;
use Illuminate\View\View;

class EmailVerificationPromptController extends Controller
{
    /**
     * Display the email verification prompt.
     */
    public function __invoke(Request $request): RedirectResponse|View
    {
        return $request->user()->hasVerifiedEmail()
                    ? redirect()->intended(RouteServiceProvider::HOME)
                    : view('auth.verify-email');
    }
}

--- FIN DU FICHIER : ./app/Http/Controllers/Auth/EmailVerificationPromptController.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Controllers/Auth/NewPasswordController.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use Illuminate\Auth\Events\PasswordReset;
use Illuminate\Http\RedirectResponse;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Hash;
use Illuminate\Support\Facades\Password;
use Illuminate\Support\Str;
use Illuminate\Validation\Rules;
use Illuminate\View\View;

class NewPasswordController extends Controller
{
    /**
     * Display the password reset view.
     */
    public function create(Request $request): View
    {
        return view('auth.reset-password', ['request' => $request]);
    }

    /**
     * Handle an incoming new password request.
     *
     * @throws \Illuminate\Validation\ValidationException
     */
    public function store(Request $request): RedirectResponse
    {
        $request->validate([
            'token' => ['required'],
            'email' => ['required', 'email'],
            'password' => ['required', 'confirmed', Rules\Password::defaults()],
        ]);

        // Here we will attempt to reset the user's password. If it is successful we
        // will update the password on an actual user model and persist it to the
        // database. Otherwise we will parse the error and return the response.
        $status = Password::reset(
            $request->only('email', 'password', 'password_confirmation', 'token'),
            function ($user) use ($request) {
                $user->forceFill([
                    'password' => Hash::make($request->password),
                    'remember_token' => Str::random(60),
                ])->save();

                event(new PasswordReset($user));
            }
        );

        // If the password was successfully reset, we will redirect the user back to
        // the application's home authenticated view. If there is an error we can
        // redirect them back to where they came from with their error message.
        return $status == Password::PASSWORD_RESET
                    ? redirect()->route('login')->with('status', __($status))
                    : back()->withInput($request->only('email'))
                            ->withErrors(['email' => __($status)]);
    }
}

--- FIN DU FICHIER : ./app/Http/Controllers/Auth/NewPasswordController.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Controllers/Auth/PasswordController.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use Illuminate\Http\RedirectResponse;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Hash;
use Illuminate\Validation\Rules\Password;

class PasswordController extends Controller
{
    /**
     * Update the user's password.
     */
    public function update(Request $request): RedirectResponse
    {
        $validated = $request->validateWithBag('updatePassword', [
            'current_password' => ['required', 'current_password'],
            'password' => ['required', Password::defaults(), 'confirmed'],
        ]);

        $request->user()->update([
            'password' => Hash::make($validated['password']),
        ]);

        return back()->with('status', 'password-updated');
    }
}

--- FIN DU FICHIER : ./app/Http/Controllers/Auth/PasswordController.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Controllers/Auth/PasswordResetLinkController.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use Illuminate\Http\RedirectResponse;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Password;
use Illuminate\View\View;

class PasswordResetLinkController extends Controller
{
    /**
     * Display the password reset link request view.
     */
    public function create(): View
    {
        return view('auth.forgot-password');
    }

    /**
     * Handle an incoming password reset link request.
     *
     * @throws \Illuminate\Validation\ValidationException
     */
    public function store(Request $request): RedirectResponse
    {
        $request->validate([
            'email' => ['required', 'email'],
        ]);

        // We will send the password reset link to this user. Once we have attempted
        // to send the link, we will examine the response then see the message we
        // need to show to the user. Finally, we'll send out a proper response.
        $status = Password::sendResetLink(
            $request->only('email')
        );

        return $status == Password::RESET_LINK_SENT
                    ? back()->with('status', __($status))
                    : back()->withInput($request->only('email'))
                            ->withErrors(['email' => __($status)]);
    }
}

--- FIN DU FICHIER : ./app/Http/Controllers/Auth/PasswordResetLinkController.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Controllers/Auth/RegisteredUserController.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use App\Models\User;
use App\Providers\RouteServiceProvider;
use Illuminate\Auth\Events\Registered;
use Illuminate\Http\RedirectResponse;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\Hash;
use Illuminate\Validation\Rules; // Assurez-vous que cette importation est présente

class RegisteredUserController extends Controller
{
    /**
     * Display the registration view.
     */
    public function create(): \Illuminate\View\View // Type de retour ajusté pour PHP 8+
    {
        return view('auth.register');
    }

    /**
     * Handle an incoming registration request.
     *
     * @throws \Illuminate\Validation\ValidationException
     */
    public function store(Request $request): RedirectResponse
    {
        $request->validate([
            'first_name' => ['required', 'string', 'max:255'],
            'last_name' => ['required', 'string', 'max:255'],
            'email' => ['required', 'string', 'lowercase', 'email', 'max:255', 'unique:'.User::class],
            'phone' => ['nullable', 'string', 'max:50', 'unique:'.User::class], // Règle unique pour le téléphone aussi
            'password' => ['required', 'confirmed', Rules\Password::defaults()],
        ]);

        // Le champ 'name' sera automatiquement rempli par UserObserver
        // lors de l'événement 'saving' ou 'creating'.
        $user = User::create([
            'first_name' => $request->first_name,
            'last_name' => $request->last_name,
            'email' => $request->email,
            'phone' => $request->phone,
            'password' => Hash::make($request->password),
        ]);

        event(new Registered($user));

        Auth::login($user);

        return redirect(RouteServiceProvider::HOME);
    }
}

--- FIN DU FICHIER : ./app/Http/Controllers/Auth/RegisteredUserController.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Controllers/Auth/VerifyEmailController.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use App\Providers\RouteServiceProvider;
use Illuminate\Auth\Events\Verified;
use Illuminate\Foundation\Auth\EmailVerificationRequest;
use Illuminate\Http\RedirectResponse;

class VerifyEmailController extends Controller
{
    /**
     * Mark the authenticated user's email address as verified.
     */
    public function __invoke(EmailVerificationRequest $request): RedirectResponse
    {
        if ($request->user()->hasVerifiedEmail()) {
            return redirect()->intended(RouteServiceProvider::HOME.'?verified=1');
        }

        if ($request->user()->markEmailAsVerified()) {
            event(new Verified($request->user()));
        }

        return redirect()->intended(RouteServiceProvider::HOME.'?verified=1');
    }
}

--- FIN DU FICHIER : ./app/Http/Controllers/Auth/VerifyEmailController.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Controllers/Controller.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Controllers;

use Illuminate\Foundation\Auth\Access\AuthorizesRequests;
use Illuminate\Foundation\Validation\ValidatesRequests;
use Illuminate\Routing\Controller as BaseController;

class Controller extends BaseController
{
    use AuthorizesRequests, ValidatesRequests;
}

--- FIN DU FICHIER : ./app/Http/Controllers/Controller.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Controllers/ProfileController.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Controllers;

use App\Http\Requests\ProfileUpdateRequest;
use Illuminate\Http\RedirectResponse;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\Redirect;
use Illuminate\View\View;

class ProfileController extends Controller
{
    /**
     * Display the user's profile form.
     */
    public function edit(Request $request): View
    {
        return view('profile.edit', [
            'user' => $request->user(),
        ]);
    }

    /**
     * Update the user's profile information.
     */

   public function update(ProfileUpdateRequest $request): RedirectResponse
    {
    // La requête $request->validated() contiendra 'first_name', 'last_name', 'email', 'phone'
    // L'UserObserver s'occupera de mettre à jour 'name'
    $request->user()->fill($request->validated());

    if ($request->user()->isDirty('email')) {
        $request->user()->email_verified_at = null;
    }

    $request->user()->save();

    return Redirect::route('profile.edit')->with('status', 'profile-updated');
   }


    /**
     * Delete the user's account.
     */
    public function destroy(Request $request): RedirectResponse
    {
        $request->validateWithBag('userDeletion', [
            'password' => ['required', 'current_password'],
        ]);

        $user = $request->user();

        Auth::logout();

        $user->delete();

        $request->session()->invalidate();
        $request->session()->regenerateToken();

        return Redirect::to('/');
    }
}

--- FIN DU FICHIER : ./app/Http/Controllers/ProfileController.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Kernel.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http;

use Illuminate\Foundation\Http\Kernel as HttpKernel;

class Kernel extends HttpKernel
{
    /**
     * The application's global HTTP middleware stack.
     *
     * These middleware are run during every request to your application.
     *
     * @var array<int, class-string|string>
     */

    protected $middleware = [
        // \App\Http\Middleware\TrustHosts::class,
        \App\Http\Middleware\TrustProxies::class,
        \Illuminate\Http\Middleware\HandleCors::class,
        \App\Http\Middleware\PreventRequestsDuringMaintenance::class,
        \Illuminate\Foundation\Http\Middleware\ValidatePostSize::class,
        \App\Http\Middleware\TrimStrings::class,
        \Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull::class,
    ];
	    /**
     * The application's route middleware groups.
     *
     * @var array<string, array<int, class-string|string>>
     */
    protected $middlewareGroups = [
        'web' => [
            \App\Http\Middleware\EncryptCookies::class,
            \Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse::class,
            \Illuminate\Session\Middleware\StartSession::class,
            \Illuminate\View\Middleware\ShareErrorsFromSession::class,
            \App\Http\Middleware\VerifyCsrfToken::class,
            \Illuminate\Routing\Middleware\SubstituteBindings::class,
        ],

        'api' => [
            // \Laravel\Sanctum\Http\Middleware\EnsureFrontendRequestsAreStateful::class,
            \Illuminate\Routing\Middleware\ThrottleRequests::class.':api',
            \Illuminate\Routing\Middleware\SubstituteBindings::class,
        ],
    ];

    /**
     * The application's middleware aliases.
     *
     * Aliases may be used instead of class names to conveniently assign middleware to routes and groups.
     *
     * @var array<string, class-string|string>
     */
    protected $middlewareAliases = [
        'auth' => \App\Http\Middleware\Authenticate::class,
        'auth.basic' => \Illuminate\Auth\Middleware\AuthenticateWithBasicAuth::class,
        'auth.session' => \Illuminate\Session\Middleware\AuthenticateSession::class,
        'cache.headers' => \Illuminate\Http\Middleware\SetCacheHeaders::class,
        'can' => \Illuminate\Auth\Middleware\Authorize::class,
        'guest' => \App\Http\Middleware\RedirectIfAuthenticated::class,
        'password.confirm' => \Illuminate\Auth\Middleware\RequirePassword::class,
        'precognitive' => \Illuminate\Foundation\Http\Middleware\HandlePrecognitiveRequests::class,
        'signed' => \App\Http\Middleware\ValidateSignature::class,
        'throttle' => \Illuminate\Routing\Middleware\ThrottleRequests::class,
        'verified' => \Illuminate\Auth\Middleware\EnsureEmailIsVerified::class,

 // AJOUT PERMANANT :
	'role' => \Spatie\Permission\Middleware\RoleMiddleware::class,            
	'permission' => \Spatie\Permission\Middleware\PermissionMiddleware::class,
	'role_or_permission' => \Spatie\Permission\Middleware\RoleOrPermissionMiddleware::class, 

    ];
}

--- FIN DU FICHIER : ./app/Http/Kernel.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Middleware/Authenticate.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Middleware;

use Illuminate\Auth\Middleware\Authenticate as Middleware;
use Illuminate\Http\Request;

class Authenticate extends Middleware
{
    /**
     * Get the path the user should be redirected to when they are not authenticated.
     */
    protected function redirectTo(Request $request): ?string
    {
        return $request->expectsJson() ? null : route('login');
    }
}

--- FIN DU FICHIER : ./app/Http/Middleware/Authenticate.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Middleware/EncryptCookies.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Middleware;

use Illuminate\Cookie\Middleware\EncryptCookies as Middleware;

class EncryptCookies extends Middleware
{
    /**
     * The names of the cookies that should not be encrypted.
     *
     * @var array<int, string>
     */
    protected $except = [
        //
    ];
}

--- FIN DU FICHIER : ./app/Http/Middleware/EncryptCookies.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Middleware/PreventRequestsDuringMaintenance.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Middleware;

use Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance as Middleware;

class PreventRequestsDuringMaintenance extends Middleware
{
    /**
     * The URIs that should be reachable while maintenance mode is enabled.
     *
     * @var array<int, string>
     */
    protected $except = [
        //
    ];
}

--- FIN DU FICHIER : ./app/Http/Middleware/PreventRequestsDuringMaintenance.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Middleware/RedirectIfAuthenticated.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Middleware;

use App\Providers\RouteServiceProvider;
use Closure;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Symfony\Component\HttpFoundation\Response;

class RedirectIfAuthenticated
{
    /**
     * Handle an incoming request.
     *
     * @param  \Closure(\Illuminate\Http\Request): (\Symfony\Component\HttpFoundation\Response)  $next
     */
    public function handle(Request $request, Closure $next, string ...$guards): Response
    {
        $guards = empty($guards) ? [null] : $guards;

        foreach ($guards as $guard) {
            if (Auth::guard($guard)->check()) {
                return redirect(RouteServiceProvider::HOME);
            }
        }

        return $next($request);
    }
}

--- FIN DU FICHIER : ./app/Http/Middleware/RedirectIfAuthenticated.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Middleware/TrimStrings.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Middleware;

use Illuminate\Foundation\Http\Middleware\TrimStrings as Middleware;

class TrimStrings extends Middleware
{
    /**
     * The names of the attributes that should not be trimmed.
     *
     * @var array<int, string>
     */
    protected $except = [
        'current_password',
        'password',
        'password_confirmation',
    ];
}

--- FIN DU FICHIER : ./app/Http/Middleware/TrimStrings.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Middleware/TrustHosts.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Middleware;

use Illuminate\Http\Middleware\TrustHosts as Middleware;

class TrustHosts extends Middleware
{
    /**
     * Get the host patterns that should be trusted.
     *
     * @return array<int, string|null>
     */
    public function hosts(): array
    {
        return [
            $this->allSubdomainsOfApplicationUrl(),
        ];
    }
}

--- FIN DU FICHIER : ./app/Http/Middleware/TrustHosts.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Middleware/TrustProxies.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Middleware;

use Illuminate\Http\Middleware\TrustProxies as Middleware;
use Illuminate\Http\Request;

class TrustProxies extends Middleware
{
    /**
     * The trusted proxies for this application.
     *
     * @var array<int, string>|string|null
     */
    protected $proxies;

    /**
     * The headers that should be used to detect proxies.
     *
     * @var int
     */
    protected $headers =
        Request::HEADER_X_FORWARDED_FOR |
        Request::HEADER_X_FORWARDED_HOST |
        Request::HEADER_X_FORWARDED_PORT |
        Request::HEADER_X_FORWARDED_PROTO |
        Request::HEADER_X_FORWARDED_AWS_ELB;
}

--- FIN DU FICHIER : ./app/Http/Middleware/TrustProxies.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Middleware/ValidateSignature.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Middleware;

use Illuminate\Routing\Middleware\ValidateSignature as Middleware;

class ValidateSignature extends Middleware
{
    /**
     * The names of the query string parameters that should be ignored.
     *
     * @var array<int, string>
     */
    protected $except = [
        // 'fbclid',
        // 'utm_campaign',
        // 'utm_content',
        // 'utm_medium',
        // 'utm_source',
        // 'utm_term',
    ];
}

--- FIN DU FICHIER : ./app/Http/Middleware/ValidateSignature.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Middleware/VerifyCsrfToken.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Middleware;

use Illuminate\Foundation\Http\Middleware\VerifyCsrfToken as Middleware;

class VerifyCsrfToken extends Middleware
{
    /**
     * The URIs that should be excluded from CSRF verification.
     *
     * @var array<int, string>
     */
    protected $except = [
        //
    ];
}

--- FIN DU FICHIER : ./app/Http/Middleware/VerifyCsrfToken.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Requests/Admin/Assignment/StoreAssignmentRequest.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Requests\Admin\Assignment;

use Illuminate\Foundation\Http\FormRequest;

class StoreAssignmentRequest extends FormRequest
{
    /**
     * Determine if the user is authorized to make this request.
     */
    public function authorize(): bool
    {
        // L'utilisateur doit avoir la permission de créer des affectations.
        return $this->user()->can('create assignments');
    }

    /**
     * Get the validation rules that apply to the request.
     *
     * @return array<string, \Illuminate\Contracts\Validation\ValidationRule|array<mixed>|string>
     */
    public function rules(): array
    {
        return [
            'vehicle_id' => ['required', 'exists:vehicles,id'],
            'driver_id' => ['required', 'exists:drivers,id'],
            'start_datetime' => ['required', 'date'],
            'start_mileage' => ['required', 'integer', 'min:0'],
            'reason' => ['nullable', 'string', 'max:1000'],
            'notes' => ['nullable', 'string', 'max:1000'],
        ];
    }
}

--- FIN DU FICHIER : ./app/Http/Requests/Admin/Assignment/StoreAssignmentRequest.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Requests/Admin/Driver/StoreDriverRequest.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Requests\Admin\Driver;

use Illuminate\Foundation\Http\FormRequest;
use Illuminate\Validation\Rule;

class StoreDriverRequest extends FormRequest
{
    /**
     * Détermine si l'utilisateur est autorisé à faire cette requête.
     */
    public function authorize(): bool
    {
        return $this->user()->can('create drivers');
    }

    /**
     * Récupère les règles de validation qui s'appliquent à la requête.
     */
    public function rules(): array
    {
        return [
            // Étape 1
            'first_name' => ['required', 'string', 'max:255'],
            'last_name' => ['required', 'string', 'max:255'],
            'birth_date' => ['nullable', 'date'],
            'personal_phone' => ['nullable', 'string', 'max:50'],
            'address' => ['nullable', 'string', 'max:1000'],
            'blood_type' => ['nullable', 'string', 'max:10'],
            'photo' => ['nullable', 'image', 'mimes:jpeg,png,jpg,gif', 'max:2048'],
            'personal_email' => ['nullable', 'string', 'email', 'max:255'],

            // Étape 2
            'employee_number' => ['nullable', 'string', 'max:100', Rule::unique('drivers')->whereNull('deleted_at')],
            'recruitment_date' => ['nullable', 'date'],
            'contract_end_date' => ['nullable', 'date', 'after_or_equal:recruitment_date'],
            'status_id' => ['required', 'exists:driver_statuses,id'],
            'user_id' => ['nullable', 'sometimes', 'exists:users,id', Rule::unique('drivers')->whereNull('deleted_at')],

            // Étape 3
            'license_number' => ['nullable', 'string', 'max:100'],
            'license_category' => ['nullable', 'string', 'max:50'],
            'license_issue_date' => ['nullable', 'date'],
            'license_authority' => ['nullable', 'string', 'max:255'],
            'emergency_contact_name' => ['nullable', 'string', 'max:255'],
            'emergency_contact_phone' => ['nullable', 'string', 'max:50'],
        ];
    }
}

--- FIN DU FICHIER : ./app/Http/Requests/Admin/Driver/StoreDriverRequest.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Requests/Admin/Driver/UpdateDriverRequest.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Requests\Admin\Driver;

use Illuminate\Foundation\Http\FormRequest;
use Illuminate\Validation\Rule;

class UpdateDriverRequest extends FormRequest
{
    public function authorize(): bool
    {
        return $this->user()->can('edit drivers');
    }

    public function rules(): array
    {
        $driverId = $this->route('driver')->id;

        return [
            'first_name' => ['required', 'string', 'max:255'],
            'last_name' => ['required', 'string', 'max:255'],
            'employee_number' => ['nullable', 'string', 'max:100', Rule::unique('drivers')->ignore($driverId)->whereNull('deleted_at')],
            'user_id' => ['nullable', 'sometimes', 'exists:users,id', Rule::unique('drivers')->ignore($driverId)->whereNull('deleted_at')],
            'status_id' => ['required', 'exists:driver_statuses,id'],
            // ... (toutes les autres règles identiques à StoreDriverRequest)
            'photo' => ['nullable', 'image', 'mimes:jpeg,png,jpg,gif', 'max:2048'],
            'blood_type' => ['nullable', 'string', 'max:10'],
            'birth_date' => ['nullable', 'date'],
            'personal_phone' => ['nullable', 'string', 'max:50'],
            'address' => ['nullable', 'string', 'max:1000'],
            'recruitment_date' => ['nullable', 'date'],
            'contract_end_date' => ['nullable', 'date', 'after_or_equal:recruitment_date'],
            'license_number' => ['nullable', 'string', 'max:100'],
            'license_category' => ['nullable', 'string', 'max:50'],
            'license_issue_date' => ['nullable', 'date'],
            'license_authority' => ['nullable', 'string', 'max:255'],
            'emergency_contact_name' => ['nullable', 'string', 'max:255'],
            'emergency_contact_phone' => ['nullable', 'string', 'max:50'],
            'personal_email' => ['nullable', 'string', 'email', 'max:255'],


        ];
    }
}

--- FIN DU FICHIER : ./app/Http/Requests/Admin/Driver/UpdateDriverRequest.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Requests/Admin/Organization/StoreOrganizationRequest.php
////////////////////////////////////////////////////////////////

<?php
namespace App\Http\Requests\Admin\Organization;
use Illuminate\Foundation\Http\FormRequest;
class StoreOrganizationRequest extends FormRequest
{
    public function authorize(): bool { return $this->user()->can('create organizations'); }
    public function rules(): array {
        return [ 'name' => 'required|string|max:255|unique:organizations,name' ];
    }
}

--- FIN DU FICHIER : ./app/Http/Requests/Admin/Organization/StoreOrganizationRequest.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Requests/Admin/Organization/UpdateOrganizationRequest.php
////////////////////////////////////////////////////////////////

<?php
namespace App\Http\Requests\Admin\Organization;
use Illuminate\Foundation\Http\FormRequest;
use Illuminate\Validation\Rule;
class UpdateOrganizationRequest extends FormRequest
{
    public function authorize(): bool { return $this->user()->can('edit organizations'); }
    public function rules(): array {
        $organizationId = $this->route('organization')->id;
        return [ 'name' => ['required','string','max:255', Rule::unique('organizations')->ignore($organizationId)] ];
    }
}

--- FIN DU FICHIER : ./app/Http/Requests/Admin/Organization/UpdateOrganizationRequest.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Requests/Admin/Supplier/StoreSupplierRequest.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Requests\Admin\Supplier;

use Illuminate\Foundation\Http\FormRequest;
use Illuminate\Validation\Rule;

class StoreSupplierRequest extends FormRequest
{
    /**
     * Détermine si l'utilisateur est autorisé à effectuer cette requête.
     */
    public function authorize(): bool
    {
        // Seuls les utilisateurs avec la permission peuvent créer des fournisseurs.
        // Nous créerons cette permission plus tard.
        return $this->user()->can('create suppliers');
    }

    /**
     * Obtient les règles de validation qui s'appliquent à la requête.
     */
    public function rules(): array
    {
        return [
            'name' => ['required', 'string', 'max:255'],
            'contact_name' => ['nullable', 'string', 'max:255'],
            'phone' => ['nullable', 'string', 'regex:/^[\+\d\s\(\)-]{8,20}$/'],
            'email' => ['nullable', 'email:rfc,dns', 'max:255', Rule::unique('suppliers', 'email')],
            'address' => ['nullable', 'string'],
            'supplier_category_id' => ['nullable', 'exists:supplier_categories,id'],
        ];
    }
}
--- FIN DU FICHIER : ./app/Http/Requests/Admin/Supplier/StoreSupplierRequest.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Requests/Admin/Supplier/UpdateSupplierRequest.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Requests\Admin\Supplier;

use Illuminate\Foundation\Http\FormRequest;
use Illuminate\Validation\Rule;

class UpdateSupplierRequest extends FormRequest
{
    /**
     * Détermine si l'utilisateur est autorisé à effectuer cette requête.
     */
    public function authorize(): bool
    {
        return $this->user()->can('edit suppliers');
    }

    /**
     * Obtient les règles de validation qui s'appliquent à la requête.
     */
    public function rules(): array
    {
        $supplierId = $this->route('supplier')->id;

        return [
            'name' => ['required', 'string', 'max:255'],
            'contact_name' => ['nullable', 'string', 'max:255'],
            'phone' => ['nullable', 'string', 'regex:/^[\+\d\s\(\)-]{8,20}$/'],
            'email' => ['nullable', 'email:rfc,dns', 'max:255', Rule::unique('suppliers', 'email')->ignore($supplierId)],
            'address' => ['nullable', 'string'],
            'supplier_category_id' => ['nullable', 'exists:supplier_categories,id'],
        ];
    }
}
--- FIN DU FICHIER : ./app/Http/Requests/Admin/Supplier/UpdateSupplierRequest.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Requests/Admin/SupplierCategory/StoreSupplierCategoryRequest.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Requests\Admin\SupplierCategory;

use Illuminate\Foundation\Http\FormRequest;

class StoreSupplierCategoryRequest extends FormRequest
{
    /**
     * Determine if the user is authorized to make this request.
     */
    public function authorize(): bool
    {
        // We'll rely on the controller's authorization for now
        return true;
    }

    /**
     * Get the validation rules that apply to the request.
     *
     * @return array<string, \Illuminate\Contracts\Validation\ValidationRule|array|string>
     */
    public function rules(): array
    {
        return [
            'name' => 'required|string|max:255|unique:supplier_categories,name',
        ];
    }
}
--- FIN DU FICHIER : ./app/Http/Requests/Admin/SupplierCategory/StoreSupplierCategoryRequest.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Requests/Admin/Vehicle/StoreVehicleRequest.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Requests\Admin\Vehicle;

use Illuminate\Foundation\Http\FormRequest;
use Illuminate\Validation\Rule;

class StoreVehicleRequest extends FormRequest
{
    /**
     * Détermine si l'utilisateur est autorisé à faire cette requête.
     */
    public function authorize(): bool
    {
        return $this->user()->can('create vehicles');
    }

    /**
     * Récupère les règles de validation qui s'appliquent à la requête.
     */
    public function rules(): array
    {
        return [
            'registration_plate' => ['required', 'string', 'max:50', Rule::unique('vehicles')->whereNull('deleted_at')],
            'vin' => ['nullable', 'string', 'size:17', Rule::unique('vehicles')->whereNull('deleted_at')],
            'brand' => ['required', 'string', 'max:100'],
            'model' => ['required', 'string', 'max:100'],
            'color' => ['nullable', 'string', 'max:50'],
            'vehicle_type_id' => ['required', 'exists:vehicle_types,id'],
            'fuel_type_id' => ['required', 'exists:fuel_types,id'],
            'transmission_type_id' => ['required', 'exists:transmission_types,id'],
            'status_id' => ['required', 'exists:vehicle_statuses,id'],
            'manufacturing_year' => ['nullable', 'integer', 'digits:4', 'min:1950', 'max:'.(date('Y') + 1)],
            'acquisition_date' => ['nullable', 'date'],
            'purchase_price' => ['nullable', 'numeric', 'min:0'],
            'current_value' => ['nullable', 'numeric', 'min:0'],
            'initial_mileage' => ['nullable', 'integer', 'min:0'],
            'current_mileage' => ['nullable', 'integer', 'min:0', 'gte:initial_mileage'], // This rule is for creation, should be initial_mileage
            'engine_displacement_cc' => ['nullable', 'integer', 'min:0'],
            'power_hp' => ['nullable', 'integer', 'min:0'],
            'seats' => ['nullable', 'integer', 'min:1'],
            'notes' => ['nullable', 'string'],
            'photo' => ['nullable', 'image', 'mimes:jpeg,png,jpg,gif', 'max:2048'],
        ];
    }
}


--- FIN DU FICHIER : ./app/Http/Requests/Admin/Vehicle/StoreVehicleRequest.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Requests/Admin/Vehicle/UpdateVehicleRequest.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Requests\Admin\Vehicle;

use Illuminate\Foundation\Http\FormRequest;
use Illuminate\Validation\Rule;

class UpdateVehicleRequest extends FormRequest
{
    public function authorize(): bool
    {
        return $this->user()->can('edit vehicles');
    }

    public function rules(): array
    {
        $vehicleId = $this->route('vehicle')->id;

        return [
            'registration_plate' => ['required', 'string', 'max:50', Rule::unique('vehicles')->ignore($vehicleId)->whereNull('deleted_at')],
            'vin' => ['nullable', 'string', 'size:17', Rule::unique('vehicles')->ignore($vehicleId)->whereNull('deleted_at')],
            'brand' => ['required', 'string', 'max:100'],
            'model' => ['required', 'string', 'max:100'],
            'color' => ['nullable', 'string', 'max:50'],
            'vehicle_type_id' => ['required', 'exists:vehicle_types,id'],
            'fuel_type_id' => ['required', 'exists:fuel_types,id'],
            'transmission_type_id' => ['required', 'exists:transmission_types,id'],
            'status_id' => ['required', 'exists:vehicle_statuses,id'],
            'manufacturing_year' => ['nullable', 'integer', 'digits:4', 'min:1950', 'max:'.(date('Y') + 1)],
            'acquisition_date' => ['nullable', 'date'],
            'purchase_price' => ['nullable', 'numeric', 'min:0'],
            'current_value' => ['nullable', 'numeric', 'min:0'],
            'initial_mileage' => ['nullable', 'integer', 'min:0'],
            'current_mileage' => ['nullable', 'integer', 'min:0', 'gte:' . $this->route('vehicle')->current_mileage],
            'engine_displacement_cc' => ['nullable', 'integer', 'min:0'],
            'power_hp' => ['nullable', 'integer', 'min:0'],
            'seats' => ['nullable', 'integer', 'min:1'],
            'notes' => ['nullable', 'string'],
            'photo' => ['nullable', 'image', 'mimes:jpeg,png,jpg,gif', 'max:2048'],
        ];
    }
}



--- FIN DU FICHIER : ./app/Http/Requests/Admin/Vehicle/UpdateVehicleRequest.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Requests/Auth/LoginRequest.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Requests\Auth;

use Illuminate\Auth\Events\Lockout;
use Illuminate\Foundation\Http\FormRequest;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\RateLimiter;
use Illuminate\Support\Str;
use Illuminate\Validation\ValidationException;

class LoginRequest extends FormRequest
{
    /**
     * Determine if the user is authorized to make this request.
     */
    public function authorize(): bool
    {
        return true;
    }

    /**
     * Get the validation rules that apply to the request.
     *
     * @return array<string, \Illuminate\Contracts\Validation\Rule|array|string>
     */
    public function rules(): array
    {
        return [
            'email' => ['required', 'string', 'email'],
            'password' => ['required', 'string'],
        ];
    }

    /**
     * Attempt to authenticate the request's credentials.
     *
     * @throws \Illuminate\Validation\ValidationException
     */
    public function authenticate(): void
    {
        $this->ensureIsNotRateLimited();

        if (! Auth::attempt($this->only('email', 'password'), $this->boolean('remember'))) {
            RateLimiter::hit($this->throttleKey());

            throw ValidationException::withMessages([
                'email' => trans('auth.failed'),
            ]);
        }

        RateLimiter::clear($this->throttleKey());
    }

    /**
     * Ensure the login request is not rate limited.
     *
     * @throws \Illuminate\Validation\ValidationException
     */
    public function ensureIsNotRateLimited(): void
    {
        if (! RateLimiter::tooManyAttempts($this->throttleKey(), 5)) {
            return;
        }

        event(new Lockout($this));

        $seconds = RateLimiter::availableIn($this->throttleKey());

        throw ValidationException::withMessages([
            'email' => trans('auth.throttle', [
                'seconds' => $seconds,
                'minutes' => ceil($seconds / 60),
            ]),
        ]);
    }

    /**
     * Get the rate limiting throttle key for the request.
     */
    public function throttleKey(): string
    {
        return Str::transliterate(Str::lower($this->string('email')).'|'.$this->ip());
    }
}

--- FIN DU FICHIER : ./app/Http/Requests/Auth/LoginRequest.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Http/Requests/ProfileUpdateRequest.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Http\Requests;

use App\Models\User;
use Illuminate\Foundation\Http\FormRequest;
use Illuminate\Validation\Rule;

class ProfileUpdateRequest extends FormRequest
{
    /**
     * Get the validation rules that apply to the request.
     *
     * @return array<string, \Illuminate\Contracts\Validation\Rule|array|string>
     */
    
public function rules(): array
{
    return [
        'first_name' => ['required', 'string', 'max:255'],
        'last_name' => ['required', 'string', 'max:255'],
        // 'name' => ['required', 'string', 'max:255'], // On peut supprimer cette ligne
        'email' => ['required', 'string', 'lowercase', 'email', 'max:255', Rule::unique(User::class)->ignore($this->user()->id)],
        'phone' => ['nullable', 'string', 'max:50', Rule::unique(User::class)->ignore($this->user()->id)],
    ];
}

}

--- FIN DU FICHIER : ./app/Http/Requests/ProfileUpdateRequest.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Models/Assignment.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Models;

use App\Models\Concerns\BelongsToOrganization;
use App\Models\Handover\VehicleHandoverForm;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\SoftDeletes;
// CORRECTION : Ajout des bons namespaces pour les relations
use Illuminate\Database\Eloquent\Relations\BelongsTo;
use Illuminate\Database\Eloquent\Relations\HasOne;

class Assignment extends Model
{
    use HasFactory, SoftDeletes, BelongsToOrganization;

    protected $fillable = [
        'vehicle_id', 'driver_id', 'start_datetime', 'end_datetime', 'start_mileage',
        'end_mileage', 'reason', 'notes', 'created_by_user_id', 'organization_id',
    ];

    protected $casts = [
        'start_datetime' => 'datetime',
        'end_datetime' => 'datetime',
    ];

    // CORRECTION : Ajout des bons types de retour
    public function vehicle(): BelongsTo
    {
        return $this->belongsTo(Vehicle::class);
    }

    public function driver(): BelongsTo
    {
        return $this->belongsTo(Driver::class);
    }

    public function creator(): BelongsTo
    {
        return $this->belongsTo(User::class, 'created_by_user_id');
    }

    public function handoverForm(): HasOne
    {
        return $this->hasOne(VehicleHandoverForm::class);
    }
}
--- FIN DU FICHIER : ./app/Models/Assignment.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Models/Concerns/BelongsToOrganization.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Models\Concerns;

use App\Models\Organization;
use Illuminate\Database\Eloquent\Builder;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Relations\BelongsTo;
use Illuminate\Support\Facades\Auth;

trait BelongsToOrganization
{
    protected static function bootBelongsToOrganization()
    {
        // Filtre automatiquement toutes les requêtes de LECTURE
        static::addGlobalScope('organization', function (Builder $builder) {
            if (Auth::check() && Auth::user()->organization_id) {
                // Le Super Admin n'est PAS filtré, il voit tout.
                if (!Auth::user()->hasRole('Super Admin')) {
                    $builder->where($builder->getModel()->getTable() . '.organization_id', Auth::user()->organization_id);
                }
            }
        });

        // Lie automatiquement chaque NOUVEL enregistrement à l'organisation de l'utilisateur
        static::creating(function (Model $model) {
            if (Auth::check() && !isset($model->organization_id)) {
                $model->organization_id = Auth::user()->organization_id;
            }
        });
    }

    public function organization(): BelongsTo
    {
        return $this->belongsTo(Organization::class);
    }
}
--- FIN DU FICHIER : ./app/Models/Concerns/BelongsToOrganization.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Models/Driver.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Models;

use App\Models\Concerns\BelongsToOrganization;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\SoftDeletes;
// CORRECTION : Ajout des bons namespaces pour les relations
use Illuminate\Database\Eloquent\Relations\BelongsTo;
use Illuminate\Database\Eloquent\Relations\HasMany;

class Driver extends Model
{
    use HasFactory, SoftDeletes, BelongsToOrganization;

    protected $fillable = [
        'user_id', 'employee_number', 'first_name', 'last_name', 'photo_path', 'birth_date',
        'blood_type', 'address', 'personal_phone', 'personal_email', 'license_number',
        'license_category', 'license_issue_date', 'license_authority', 'license_expiry_date',
        'recruitment_date', 'contract_end_date', 'status_id', 'emergency_contact_name',
        'emergency_contact_phone', 'organization_id',
    ];

    protected $casts = [
        'birth_date' => 'date',
        'license_issue_date' => 'date',
        'license_expiry_date' => 'date',
        'recruitment_date' => 'date',
        'contract_end_date' => 'date',
    ];

    // CORRECTION : Ajout des bons types de retour
    public function user(): BelongsTo
    {
        return $this->belongsTo(User::class);
    }

    public function driverStatus(): BelongsTo
    {
        return $this->belongsTo(DriverStatus::class, 'status_id');
    }

    public function assignments(): HasMany
    {
        return $this->hasMany(Assignment::class);
    }

    /**
     * Vérifie si le chauffeur a une affectation actuellement en cours.
     */
    public function isCurrentlyAssigned(): bool
    {
       return $this->assignments()->whereNull('end_datetime')->exists();
    }

    /**
     * Get the user's full name.
     *
     * @return string
     */
    public function getFullNameAttribute(): string
    {
        return "{$this->first_name} {$this->last_name}";
    }
}
--- FIN DU FICHIER : ./app/Models/Driver.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Models/DriverStatus.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class DriverStatus extends Model
{
    use HasFactory;
    public $timestamps = false;
    protected $fillable = ['name'];
}

--- FIN DU FICHIER : ./app/Models/DriverStatus.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Models/FuelType.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class FuelType extends Model
{
    use HasFactory;

    // Indique à Laravel que ce modèle n'utilise pas les colonnes created_at et updated_at.
    public $timestamps = false;

    // Définit le champ 'name' comme étant assignable en masse.
    protected $fillable = ['name'];
}

--- FIN DU FICHIER : ./app/Models/FuelType.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Models/Handover/VehicleHandoverDetail.php
////////////////////////////////////////////////////////////////

<?php
namespace App\Models\Handover;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Relations\BelongsTo;

class VehicleHandoverDetail extends Model
{
    use HasFactory;
    public $timestamps = false;
    protected $fillable = ['handover_form_id', 'category', 'item', 'status'];
    public function handoverForm(): BelongsTo { return $this->belongsTo(VehicleHandoverForm::class, 'handover_form_id'); }
}

--- FIN DU FICHIER : ./app/Models/Handover/VehicleHandoverDetail.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Models/Handover/VehicleHandoverForm.php
////////////////////////////////////////////////////////////////

<?php
namespace App\Models\Handover;

use App\Models\Concerns\BelongsToOrganization;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\SoftDeletes;

// --- DÉBUT DES CORRECTIONS ---
use App\Models\Assignment; // 1. Indique à PHP où trouver le modèle Assignment
use Illuminate\Database\Eloquent\Relations\BelongsTo; // 2. Corrige le type-hint pour la relation BelongsTo
use Illuminate\Database\Eloquent\Relations\HasMany;   // 3. Corrige le type-hint pour la relation HasMany
// --- FIN DES CORRECTIONS ---

class VehicleHandoverForm extends Model
{
    use HasFactory, SoftDeletes, BelongsToOrganization;

    protected $fillable = [
        'assignment_id', 'issue_date', 'current_mileage', 'general_observations',
        'additional_observations', 'signed_form_path', 'organization_id',
    ];

    protected $casts = ['issue_date' => 'date'];

    /**
     * Relation: Une fiche de remise appartient à une affectation.
     * CORRECTION: Ajout du bon type de retour (BelongsTo)
     */
    public function assignment(): BelongsTo
    {
        return $this->belongsTo(Assignment::class);
    }

    /**
     * Relation: Une fiche de remise a plusieurs lignes de détail.
     * CORRECTION: Ajout du bon type de retour (HasMany)
     */
    public function details(): HasMany
    {
        return $this->hasMany(VehicleHandoverDetail::class, 'handover_form_id');
    }

    /**
     * Mark this handover form as the latest version and mark others as obsolete.
     */
    public function markAsLatestVersion()
    {
        // Mark all other handover forms for this assignment as not latest
        static::where('assignment_id', $this->assignment_id)
            ->where('id', '!=', $this->id)
            ->update(['is_latest_version' => false]);

        // Mark this one as latest
        $this->update(['is_latest_version' => true]);
    }
}
--- FIN DU FICHIER : ./app/Models/Handover/VehicleHandoverForm.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Models/Maintenance/MaintenanceLog.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Models\Maintenance;

use App\Models\Concerns\BelongsToOrganization;
use App\Models\Vehicle;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\SoftDeletes;
// CORRECTION : Ajout du bon namespace pour la relation
use Illuminate\Database\Eloquent\Relations\BelongsTo;

class MaintenanceLog extends Model
{
    use HasFactory; // Le SoftDeletes est déjà dans la migration mais on peut l'ajouter ici pour la cohérence
    use BelongsToOrganization, SoftDeletes;

    protected $fillable = [
        'vehicle_id', 'maintenance_plan_id', 'maintenance_type_id', 'maintenance_status_id',
        'performed_on_date', 'performed_at_mileage', 'cost', 'details', 'performed_by', 'organization_id',
    ];

    protected $casts = [
        'performed_on_date' => 'date',
        'cost' => 'decimal:2',
    ];

    // CORRECTION : Ajout des bons types de retour
    public function vehicle(): BelongsTo
    {
        return $this->belongsTo(Vehicle::class);
    }

    public function maintenancePlan(): BelongsTo
    {
        return $this->belongsTo(MaintenancePlan::class);
    }

    public function maintenanceType(): BelongsTo
    {
        return $this->belongsTo(MaintenanceType::class);
    }

    public function maintenanceStatus(): BelongsTo
    {
        return $this->belongsTo(MaintenanceStatus::class);
    }
}
--- FIN DU FICHIER : ./app/Models/Maintenance/MaintenanceLog.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Models/Maintenance/MaintenancePlan.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Models\Maintenance;

use App\Models\Concerns\BelongsToOrganization;
use App\Models\Vehicle;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\SoftDeletes;
// CORRECTION : Ajout du bon namespace pour la relation
use Illuminate\Database\Eloquent\Relations\BelongsTo;

class MaintenancePlan extends Model
{
    use HasFactory, SoftDeletes, BelongsToOrganization;

    protected $fillable = [
        'vehicle_id', 'maintenance_type_id', 'recurrence_value', 'recurrence_unit_id',
        'next_due_date', 'next_due_mileage', 'notes', 'organization_id',
    ];

    protected $casts = [
        'next_due_date' => 'date',
    ];

    // CORRECTION : Ajout des bons types de retour
    public function vehicle(): BelongsTo
    {
        return $this->belongsTo(Vehicle::class);
    }

    public function maintenanceType(): BelongsTo
    {
        return $this->belongsTo(MaintenanceType::class);
    }

    public function recurrenceUnit(): BelongsTo
    {
        return $this->belongsTo(RecurrenceUnit::class);
    }
}
--- FIN DU FICHIER : ./app/Models/Maintenance/MaintenancePlan.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Models/Maintenance/MaintenanceStatus.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Models\Maintenance;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class MaintenanceStatus extends Model
{
    use HasFactory;

    /**
     * Indique si le modèle doit être horodaté.
     *
     * @var bool
     */
    public $timestamps = false;

    /**
     * Les attributs qui peuvent être assignés en masse.
     *
     * @var array<int, string>
     */
    protected $fillable = [
        'name',
    ];
}

--- FIN DU FICHIER : ./app/Models/Maintenance/MaintenanceStatus.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Models/Maintenance/MaintenanceType.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Models\Maintenance;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class MaintenanceType extends Model
{
    use HasFactory;

    /**
     * Indique si le modèle doit être horodaté.
     *
     * @var bool
     */
    public $timestamps = false;

    /**
     * Les attributs qui peuvent être assignés en masse.
     *
     * @var array<int, string>
     */
    protected $fillable = [
        'name',
        'description',
    ];
}

--- FIN DU FICHIER : ./app/Models/Maintenance/MaintenanceType.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Models/Maintenance/RecurrenceUnit.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Models\Maintenance;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class RecurrenceUnit extends Model
{
    use HasFactory;

    /**
     * Indique si le modèle doit être horodaté.
     *
     * @var bool
     */
    public $timestamps = false;

    /**
     * Les attributs qui peuvent être assignés en masse.
     *
     * @var array<int, string>
     */
    protected $fillable = [
        'name',
    ];
}

--- FIN DU FICHIER : ./app/Models/Maintenance/RecurrenceUnit.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Models/Organization.php
////////////////////////////////////////////////////////////////

<?php
namespace App\Models;

use App\Models\Handover\VehicleHandoverForm;
use App\Models\Maintenance\MaintenanceLog;
use App\Models\Maintenance\MaintenancePlan;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Relations\HasMany;
use Illuminate\Support\Str;

class Organization extends Model
{
    use HasFactory;
    protected $fillable = ['uuid', 'name', 'address', 'contact_email', 'status'];

    protected static function boot()
    {
        parent::boot();
        static::creating(function ($model) {
            if (empty($model->uuid)) {
                $model->uuid = (string) Str::uuid();
            }
        });
    }

    public function users(): HasMany { return $this->hasMany(User::class); }
    public function vehicles(): HasMany { return $this->hasMany(Vehicle::class); }
    public function drivers(): HasMany { return $this->hasMany(Driver::class); }
    public function assignments(): HasMany { return $this->hasMany(Assignment::class); }
    public function maintenancePlans(): HasMany { return $this->hasMany(MaintenancePlan::class); }
    public function maintenanceLogs(): HasMany { return $this->hasMany(MaintenanceLog::class); }
    public function handoverForms(): HasMany { return $this->hasMany(VehicleHandoverForm::class); }
}

--- FIN DU FICHIER : ./app/Models/Organization.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Models/Supplier.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Models;

use App\Models\Concerns\BelongsToOrganization;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Relations\BelongsTo;
use Illuminate\Database\Eloquent\Relations\HasMany;
use Illuminate\Database\Eloquent\SoftDeletes;

class Supplier extends Model
{
    use HasFactory, SoftDeletes, BelongsToOrganization;

    protected $fillable = [
        'name',
        'contact_name',
        'phone',
        'email',
        'address',
        'supplier_category_id',
        'organization_id',
    ];

    /**
     * Relation : Un fournisseur appartient à une catégorie.
     */
    public function category(): BelongsTo
    {
        return $this->belongsTo(SupplierCategory::class, 'supplier_category_id');
    }

    /**
     * Relation : Un fournisseur peut être lié à plusieurs dépenses.
     * (Anticipation pour le futur module de gestion des dépenses)
     */
    public function expenses(): HasMany
    {
        // Note : Le modèle Expense sera à créer dans le futur.
        // return $this->hasMany(Expense::class);
        return $this->hasMany('App\Models\Expense'); // Placeholder
    }

    /**
     * Relation : Un fournisseur peut être lié à plusieurs interventions de maintenance.
     * (Anticipation pour le futur module de maintenance)
     */
    public function maintenances(): HasMany
    {
        // Note : Le modèle MaintenanceLog existe déjà.
        return $this->hasMany(Maintenance\MaintenanceLog::class);
    }

    // La relation organization() est maintenant gérée par le trait BelongsToOrganization.
}

--- FIN DU FICHIER : ./app/Models/Supplier.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Models/SupplierCategory.php
////////////////////////////////////////////////////////////////

<?php
namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Relations\HasMany;

class SupplierCategory extends Model
{
    use HasFactory;
    protected $fillable = ['name', 'organization_id'];

    public function suppliers(): HasMany
    {
        return $this->hasMany(Supplier::class);
    }
}

--- FIN DU FICHIER : ./app/Models/SupplierCategory.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Models/TransmissionType.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class TransmissionType extends Model
{
    use HasFactory;
    // Indique à Laravel que ce modèle n'utilise pas les colonnes created_at et updated_at.
    public $timestamps = false;

    // Définit le champ 'name' comme étant assignable en masse.
    protected $fillable = ['name'];

}

--- FIN DU FICHIER : ./app/Models/TransmissionType.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Models/User.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Relations\BelongsTo;
use Illuminate\Database\Eloquent\Relations\HasOne;
use Illuminate\Database\Eloquent\SoftDeletes;
use Illuminate\Foundation\Auth\User as Authenticatable;
use Illuminate\Notifications\Notifiable;
use Laravel\Sanctum\HasApiTokens;
use Spatie\Permission\Traits\HasRoles;
use Illuminate\Database\Eloquent\Relations\BelongsToMany; 

class User extends Authenticatable
{
    // CORRECTION : On retire "BelongsToOrganization" et on nettoie les doublons
    use HasApiTokens, HasFactory, Notifiable, HasRoles, SoftDeletes;

    /**
     * The attributes that are mass assignable.
     */
    protected $fillable = [
        'name',
        'first_name',
        'last_name',
        'email',
        'phone',
        'password',
        'organization_id',
    ];

    /**
     * The attributes that should be hidden for serialization.
     */
    protected $hidden = [
        'password',
        'remember_token',
    ];

    /**
     * The attributes that should be cast.
     */
    protected $casts = [
        'email_verified_at' => 'datetime',
        'password' => 'hashed',
    ];

    /**
     * Un utilisateur appartient toujours à une organisation.
     */
    public function organization(): BelongsTo
    {
        return $this->belongsTo(Organization::class);
    }

    /**
     * Un utilisateur peut avoir un profil de chauffeur.
     */
    public function driver(): HasOne
    {
        return $this->hasOne(Driver::class);
    }
    
    /**
     * La relation qui retourne les véhicules auxquels cet utilisateur a accès.
     */
    public function vehicles(): BelongsToMany
    {
        return $this->belongsToMany(Vehicle::class, 'user_vehicle');
    }
}
--- FIN DU FICHIER : ./app/Models/User.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Models/ValidationLevel.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class ValidationLevel extends Model
{
    use HasFactory;

    /**
     * Indicates if the model should be timestamped.
     * Laravel handles timestamps by default if the columns exist,
     * so no 'public $timestamps = true;' is explicitly needed.
     * Only set 'public $timestamps = false;' if you DON'T have/want them.
     */

    /**
     * The attributes that are mass assignable.
     *
     * @var array<int, string>
     */
    protected $fillable = [
        'level_number',
        'name',
        'description',
    ];

    /**
     * Define the relationship with users.
     * Un niveau de validation peut être associé à plusieurs utilisateurs.
     */
    public function users()
    {
        return $this->belongsToMany(User::class, 'user_validation_levels');
    }
}

--- FIN DU FICHIER : ./app/Models/ValidationLevel.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Models/Vehicle.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Models;

use App\Models\Concerns\BelongsToOrganization;
use App\Models\Maintenance\MaintenanceLog;
use App\Models\Maintenance\MaintenancePlan;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Relations\BelongsToMany;
use Illuminate\Database\Eloquent\SoftDeletes;
// CORRECTION : Ajout des bons namespaces pour les relations
use Illuminate\Database\Eloquent\Relations\BelongsTo;
use Illuminate\Database\Eloquent\Relations\HasMany;

class Vehicle extends Model
{
    use HasFactory, SoftDeletes, BelongsToOrganization;

    protected $fillable = [
        'registration_plate', 'vin', 'brand', 'model', 'color', 'vehicle_type_id',
        'fuel_type_id', 'transmission_type_id', 'status_id', 'manufacturing_year',
        'acquisition_date', 'purchase_price', 'current_value', 'initial_mileage',
        'current_mileage', 'engine_displacement_cc', 'power_hp', 'seats', 'status_reason', 'notes', 'organization_id',
    ];

    protected $casts = [
        'acquisition_date' => 'date',
    ];

    // CORRECTION : Ajout du bon type de retour (BelongsTo)
    public function vehicleType(): BelongsTo { return $this->belongsTo(VehicleType::class); }
    public function fuelType(): BelongsTo { return $this->belongsTo(FuelType::class); }
    public function transmissionType(): BelongsTo { return $this->belongsTo(TransmissionType::class); }
    public function vehicleStatus(): BelongsTo { return $this->belongsTo(VehicleStatus::class, 'status_id'); }

    // CORRECTION : Ajout du bon type de retour (HasMany)
    public function assignments(): HasMany { return $this->hasMany(Assignment::class); }
    public function maintenancePlans(): HasMany { return $this->hasMany(MaintenancePlan::class); }
    public function maintenanceLogs(): HasMany { return $this->hasMany(MaintenanceLog::class); }
    
    /**
     * Vérifie si le véhicule a une affectation actuellement en cours.
     */
    public function isCurrentlyAssigned(): bool
    {
       return $this->assignments()->whereNull('end_datetime')->exists();
    }

    /**
     * La relation qui retourne les utilisateurs autorisés à utiliser ce véhicule.
     */
    public function users(): BelongsToMany
    {
        return $this->belongsToMany(User::class, 'user_vehicle');
    }
}
--- FIN DU FICHIER : ./app/Models/Vehicle.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Models/VehicleStatus.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class VehicleStatus extends Model
{
    use HasFactory;
    // Indique à Laravel que ce modèle n'utilise pas les colonnes created_at et updated_at.
    public $timestamps = false;

    // Définit le champ 'name' comme étant assignable en masse.
    protected $fillable = ['name'];

}

--- FIN DU FICHIER : ./app/Models/VehicleStatus.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Models/VehicleType.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class VehicleType extends Model
{
    use HasFactory;
    // Indique à Laravel que ce modèle n'utilise pas les colonnes created_at et updated_at.
    public $timestamps = false;

    // Définit le champ 'name' comme étant assignable en masse.
    protected $fillable = ['name'];


}

--- FIN DU FICHIER : ./app/Models/VehicleType.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Observers/DriverObserver.php
////////////////////////////////////////////////////////////////

<?php
namespace App\Observers;
use App\Models\Driver;
use Carbon\Carbon;

class DriverObserver
{
    /**
     * Gère l'événement "saving" du modèle Driver.
     */
    public function saving(Driver $driver): void
    {
        if ($driver->isDirty('license_issue_date') && !is_null($driver->license_issue_date)) {
            $driver->license_expiry_date = Carbon::parse($driver->license_issue_date)->addYears(10);
        }
    }
}

--- FIN DU FICHIER : ./app/Observers/DriverObserver.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Observers/UserObserver.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Observers;

use App\Models\User;

class UserObserver
{
    /**
     * Handle the User "saving" event.
     *
     * This method is called before a user is created or updated.
     * We use it to automatically populate the 'name' field
     * from 'first_name' and 'last_name'.
     *
     * @param  \App\Models\User  $user
     * @return void
     */
    public function saving(User $user): void
    {
        // Vérifie si first_name ou last_name ont été modifiés ou sont en cours de définition
        if ($user->isDirty('first_name') || $user->isDirty('last_name') || !$user->exists) {
            $firstName = $user->first_name ?? '';
            $lastName = $user->last_name ?? '';

            $user->name = trim($firstName . ' ' . $lastName);

            // Si le nom est vide après le trim (cas où first_name et last_name sont vides ou null),
            // et que la colonne 'name' ne peut être null, on pourrait lui assigner une valeur par défaut
            // ou s'appuyer sur la validation pour que first_name/last_name soient requis.
            // Breeze s'attend à ce que 'name' ne soit pas null.
            if (empty($user->name) && !empty($user->email)) {
                // Fallback simple si le nom est vide mais que l'email existe (ex: pour les anciens utilisateurs sans first/last name)
                // Ou vous pourriez choisir de lever une exception ou de mettre une valeur placeholder.
                // Pour l'instant, on s'attend à ce que first_name/last_name soient fournis à la création.
            }
        }
    }

    /**
     * Handle the User "created" event.
     *
     * @param  \App\Models\User  $user
     * @return void
     */
    public function created(User $user): void
    {
        //
    }

    /**
     * Handle the User "updated" event.
     *
     * @param  \App\Models\User  $user
     * @return void
     */
    public function updated(User $user): void
    {
        //
    }

    /**
     * Handle the User "deleted" event.
     *
     * @param  \App\Models\User  $user
     * @return void
     */
    public function deleted(User $user): void
    {
        //
    }

    /**
     * Handle the User "restored" event.
     *
     * @param  \App\Models\User  $user
     * @return void
     */
    public function restored(User $user): void
    {
        //
    }

    /**
     * Handle the User "force deleted" event.
     *
     * @param  \App\Models\User  $user
     * @return void
     */
    public function forceDeleted(User $user): void
    {
        //
    }
}

--- FIN DU FICHIER : ./app/Observers/UserObserver.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Policies/VehiclePolicy.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Policies;

use App\Models\User;
use App\Models\Vehicle;
use Illuminate\Auth\Access\HandlesAuthorization;

class VehiclePolicy
{
    use HandlesAuthorization;

    /**
     * Determine whether the user can view any vehicles.
     */
    public function viewAny(User $user): bool
    {
        return $user->can("view vehicles");
    }

    /**
     * Determine whether the user can view the vehicle.
     */
    public function view(User $user, Vehicle $vehicle): bool
    {
        return $user->can("view vehicles") && $vehicle->organization_id === $user->organization_id;
    }

    /**
     * Determine whether the user can create vehicles.
     */
    public function create(User $user): bool
    {
        return $user->can("create vehicles");
    }

    /**
     * Determine whether the user can update the vehicle.
     */
    public function update(User $user, Vehicle $vehicle): bool
    {
        return $user->can("edit vehicles") && $vehicle->organization_id === $user->organization_id;
    }

    /**
     * Determine whether the user can delete the vehicle.
     */
    public function delete(User $user, Vehicle $vehicle): bool
    {
        return $user->can("delete vehicles") && $vehicle->organization_id === $user->organization_id;
    }

    /**
     * Determine whether the user can restore the vehicle.
     */
    public function restore(User $user, Vehicle $vehicle): bool
    {
        return $user->can("restore vehicles") && $vehicle->organization_id === $user->organization_id;
    }

    /**
     * Determine whether the user can permanently delete the vehicle.
     */
    public function forceDelete(User $user, Vehicle $vehicle): bool
    {
        return $user->can("force delete vehicles") && $vehicle->organization_id === $user->organization_id;
    }
}


--- FIN DU FICHIER : ./app/Policies/VehiclePolicy.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Providers/AppServiceProvider.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Providers;

use Illuminate\Support\ServiceProvider;

class AppServiceProvider extends ServiceProvider
{
    /**
     * Register any application services.
     */
    public function register(): void
    {
        //
    }

    /**
     * Bootstrap any application services.
     */
    public function boot(): void
    {
        //
    }
}

--- FIN DU FICHIER : ./app/Providers/AppServiceProvider.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Providers/AuthServiceProvider.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Providers;

// use Illuminate\Support\Facades\Gate;
use Illuminate\Foundation\Support\Providers\AuthServiceProvider as ServiceProvider;

class AuthServiceProvider extends ServiceProvider
{
    /**
     * The model to policy mappings for the application.
     *
     * @var array<class-string, class-string>
     */
    protected $policies = [
        //
    ];

    /**
     * Register any authentication / authorization services.
     */
    public function boot(): void
    {
        //
    }
}

--- FIN DU FICHIER : ./app/Providers/AuthServiceProvider.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Providers/BroadcastServiceProvider.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Providers;

use Illuminate\Support\Facades\Broadcast;
use Illuminate\Support\ServiceProvider;

class BroadcastServiceProvider extends ServiceProvider
{
    /**
     * Bootstrap any application services.
     */
    public function boot(): void
    {
        Broadcast::routes();

        require base_path('routes/channels.php');
    }
}

--- FIN DU FICHIER : ./app/Providers/BroadcastServiceProvider.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Providers/EventServiceProvider.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Providers;

use App\Models\User;                // <--- AJOUTEZ CETTE LIGNE
use App\Observers\UserObserver;    // <--- AJOUTEZ CETTE LIGNE
use App\Models\Driver; // <-- Ajouter
use App\Observers\DriverObserver; // <-- Ajouter
use Illuminate\Auth\Events\Registered;
use Illuminate\Auth\Listeners\SendEmailVerificationNotification;
use Illuminate\Foundation\Support\Providers\EventServiceProvider as ServiceProvider;
use Illuminate\Support\Facades\Event;

class EventServiceProvider extends ServiceProvider
{
    /**
     * The event to listener mappings for the application.
     *
     * @var array<class-string, array<int, class-string>>
     */
    protected $listen = [
        Registered::class => [
            SendEmailVerificationNotification::class,
        ],
    ];

    /**
     * Register any events for your application.
     */
    public function boot(): void
    {
        User::observe(UserObserver::class); // <--- AJOUTEZ CETTE LIGNE
        Driver::observe(DriverObserver::class); // <-- Ajouter cette ligne 
    }

    /**
     * Determine if events and listeners should be automatically discovered.
     */
    public function shouldDiscoverEvents(): bool
    {
        return false;
    }
}

--- FIN DU FICHIER : ./app/Providers/EventServiceProvider.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Providers/RepositoryServiceProvider.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Providers;

use Illuminate\Support\ServiceProvider;
// Interfaces
use App\Repositories\Interfaces\VehicleRepositoryInterface;
use App\Repositories\Interfaces\DriverRepositoryInterface;
use App\Repositories\Interfaces\AssignmentRepositoryInterface;
use App\Repositories\Interfaces\SupplierRepositoryInterface;
// Implémentations
use App\Repositories\Eloquent\VehicleRepository;
use App\Repositories\Eloquent\DriverRepository;
use App\Repositories\Eloquent\AssignmentRepository;
use App\Repositories\Eloquent\SupplierRepository;

class RepositoryServiceProvider extends ServiceProvider
{
    /**
     * Register services.
     */
    public function register(): void
    {
        // Liaison pour les Véhicules (déjà présente)
        $this->app->bind(
            VehicleRepositoryInterface::class,
            VehicleRepository::class
        );

        // CORRECTION : Ajout de la liaison pour les Chauffeurs
        $this->app->bind(
            DriverRepositoryInterface::class,
            DriverRepository::class
        );

        // --- AJOUT POUR LES AFFECTATION
        $this->app->bind(
            AssignmentRepositoryInterface::class,
            AssignmentRepository::class
	);
	
	// ----- AJOUT POUR SUPPLIER
	$this->app->bind(
		SupplierRepositoryInterface::class, 
		SupplierRepository::class
	);
    }

    /**
     * Bootstrap services.
     */
    public function boot(): void
    {
        //
    }
}

--- FIN DU FICHIER : ./app/Providers/RepositoryServiceProvider.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Providers/RouteServiceProvider.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Providers;

use Illuminate\Cache\RateLimiting\Limit;
use Illuminate\Foundation\Support\Providers\RouteServiceProvider as ServiceProvider;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\RateLimiter;
use Illuminate\Support\Facades\Route;

class RouteServiceProvider extends ServiceProvider
{
    /**
     * The path to your application's "home" route.
     *
     * Typically, users are redirected here after authentication.
     *
     * @var string
     */
    public const HOME = '/dashboard';

    /**
     * Define your route model bindings, pattern filters, and other route configuration.
     */
    public function boot(): void
    {
        RateLimiter::for('api', function (Request $request) {
            return Limit::perMinute(60)->by($request->user()?->id ?: $request->ip());
        });

        $this->routes(function () {
            Route::middleware('api')
                ->prefix('api')
                ->group(base_path('routes/api.php'));

            Route::middleware('web')
                ->group(base_path('routes/web.php'));
        });
    }
}

--- FIN DU FICHIER : ./app/Providers/RouteServiceProvider.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Repositories/Eloquent/AssignmentRepository.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Repositories\Eloquent;

use App\Models\Assignment;
use App\Repositories\Interfaces\AssignmentRepositoryInterface;
use Illuminate\Pagination\LengthAwarePaginator;

class AssignmentRepository implements AssignmentRepositoryInterface
{
    public function getFiltered(array $filters): LengthAwarePaginator
    {
        $perPage = $filters['per_page'] ?? 15;
        $query = Assignment::query()->with(['vehicle', 'driver']);

        if (!empty($filters['status'])) {
            if ($filters['status'] === 'active') {
                $query->whereNull('end_datetime');
            } elseif ($filters['status'] === 'ended') {
                $query->whereNotNull('end_datetime');
            }
        }

        if (!empty($filters['search'])) {
            $searchTerm = strtolower($filters['search']);
            $query->where(function ($q) use ($searchTerm) {
                $q->whereHas('vehicle', function ($subQuery) use ($searchTerm) {
                    $subQuery->whereRaw('LOWER(registration_plate) LIKE ?', ["%{$searchTerm}%"]);
                })->orWhereHas('driver', function ($subQuery) use ($searchTerm) {
                    $subQuery->whereRaw('LOWER(first_name) LIKE ?', ["%{$searchTerm}%"])
                             ->orWhereRaw('LOWER(last_name) LIKE ?', ["%{$searchTerm}%"]);
                });
            });
        }

        return $query->orderBy('start_datetime', 'desc')->paginate($perPage)->withQueryString();
    }

    public function find(int $id): ?Assignment
    {
        return Assignment::find($id);
    }

    public function create(array $data): Assignment
    {
        return Assignment::create($data);
    }

    public function update(Assignment $assignment, array $data): bool
    {
        return $assignment->update($data);
    }
}

--- FIN DU FICHIER : ./app/Repositories/Eloquent/AssignmentRepository.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Repositories/Eloquent/DriverRepository.php
////////////////////////////////////////////////////////////////

<?php
namespace App\Repositories\Eloquent;

use App\Models\Driver;
use App\Repositories\Interfaces\DriverRepositoryInterface;
use Illuminate\Pagination\LengthAwarePaginator;

class DriverRepository implements DriverRepositoryInterface
{
    public function getFiltered(array $filters): LengthAwarePaginator
    {
        $perPage = $filters['per_page'] ?? 15;
        $query = Driver::query()->with(['driverStatus', 'user']);

        if (!empty($filters['view_deleted'])) {
            $query->onlyTrashed();
        }
        if (!empty($filters['status_id'])) {
            $query->where('status_id', $filters['status_id']);
        }
        if (!empty($filters['search'])) {
            $searchTerm = strtolower($filters['search']);
            $query->where(function ($q) use ($searchTerm) {
                $q->whereRaw('LOWER(first_name) LIKE ?', ["%{$searchTerm}%"])
                  ->orWhereRaw('LOWER(last_name) LIKE ?', ["%{$searchTerm}%"])
                  ->orWhereRaw('LOWER(employee_number) LIKE ?', ["%{$searchTerm}%"]);
            });
        }
        return $query->orderBy('id', 'desc')->paginate($perPage)->withQueryString();
    }

    public function find(int $id): ?Driver { return Driver::find($id); }
    public function findTrashed(int $id): ?Driver { return Driver::onlyTrashed()->find($id); }
    public function create(array $data): Driver { return Driver::create($data); }
    public function update(Driver $driver, array $data): bool { return $driver->update($data); }
    public function delete(Driver $driver): bool { return $driver->delete(); }
    public function restore(Driver $driver): bool { return $driver->restore(); }
    public function forceDelete(Driver $driver): bool { return $driver->forceDelete(); }
}

--- FIN DU FICHIER : ./app/Repositories/Eloquent/DriverRepository.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Repositories/Eloquent/SupplierRepository.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Repositories\Eloquent;

use App\Models\Supplier;
use App\Repositories\Interfaces\SupplierRepositoryInterface;
use Illuminate\Pagination\LengthAwarePaginator;

class SupplierRepository implements SupplierRepositoryInterface
{
    public function getFiltered(array $filters): LengthAwarePaginator
    {
        $perPage = $filters['per_page'] ?? 15;
        $query = Supplier::query()->with('category');

        if (!empty($filters['search'])) {
            $searchTerm = '%' . $filters['search'] . '%';
            $query->where(function ($q) use ($searchTerm) {
                $q->where('name', 'ILIKE', $searchTerm)
                  ->orWhere('contact_name', 'ILIKE', $searchTerm)
                  ->orWhere('email', 'ILIKE', $searchTerm);
            });
        }

        return $query->orderBy('name', 'asc')->paginate($perPage)->withQueryString();
    }

    public function create(array $data): Supplier
    {
        return Supplier::create($data);
    }

    public function update(Supplier $supplier, array $data): bool
    {
        return $supplier->update($data);
    }

    public function archive(Supplier $supplier): bool
    {
        return $supplier->delete();
    }
}
--- FIN DU FICHIER : ./app/Repositories/Eloquent/SupplierRepository.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Repositories/Eloquent/VehicleRepository.php
////////////////////////////////////////////////////////////////

<?php
namespace App\Repositories\Eloquent;

use App\Models\Vehicle;
use App\Repositories\Interfaces\VehicleRepositoryInterface;
use Illuminate\Pagination\LengthAwarePaginator;
use Illuminate\Support\Facades\Auth;

class VehicleRepository implements VehicleRepositoryInterface
{
    public function getFiltered(array $filters): LengthAwarePaginator
    {
        $perPage = $filters['per_page'] ?? 15;
        $query = Vehicle::query()->with(['vehicleType', 'vehicleStatus']);
        $user = Auth::user();

        // Appliquer le filtre par organisation pour tous sauf Super Admin
        if ($user && !$user->hasRole('Super Admin')) {
            $query->where('organization_id', $user->organization_id);
        }

        // Si l'utilisateur n'est ni Super Admin, ni Admin, restreindre aux véhicules assignés
        if ($user && !$user->hasAnyRole(['Super Admin', 'Admin'])) {
            $query->whereHas('users', function ($q) use ($user) {
                $q->where('user_id', $user->id);
            });
        }

        if (!empty($filters['view_deleted'])) {
            $query->onlyTrashed();
        }
        if (!empty($filters['status_id'])) {
            $query->where('status_id', $filters['status_id']);
        }
        if (!empty($filters['search'])) {
            $searchTerm = strtolower($filters['search']);
            $query->where(function ($q) use ($searchTerm) {
                $q->whereRaw('LOWER(registration_plate) LIKE ?', ["%{$searchTerm}%"])
                  ->orWhereRaw('LOWER(brand) LIKE ?', ["%{$searchTerm}%"])
                  ->orWhereRaw('LOWER(model) LIKE ?', ["%{$searchTerm}%"]);
            });
        }
        return $query->orderBy('id', 'desc')->paginate($perPage)->withQueryString();
    }

    public function getForPlanning(array $filters, string $startDate, string $endDate): LengthAwarePaginator
    {
        $perPage = $filters['per_page'] ?? 15;
        $query = Vehicle::query()->with(['assignments' => function ($query) use ($startDate, $endDate) {
            $query->where(function ($q) use ($startDate, $endDate) {
                // Affectations qui commencent pendant la période
                $q->whereBetween('start_datetime', [$startDate, $endDate]);
            })->orWhere(function ($q) use ($startDate, $endDate) {
                // Affectations qui se terminent pendant la période
                $q->whereBetween('end_datetime', [$startDate, $endDate]);
            })->orWhere(function ($q) use ($startDate, $endDate) {
                // Affectations qui commencent avant et se terminent après (englobent la période)
                $q->where('start_datetime', '<', $startDate)->where('end_datetime', '>', $endDate);
            })->orWhere(function ($q) use ($startDate, $endDate) {
                // Affectations en cours qui ont commencé avant la période
                $q->where('start_datetime', '<', $startDate)->whereNull('end_datetime');
            })->with('driver'); // Charger le chauffeur pour l'affectation
        }]);

        $user = Auth::user();
        if ($user && !$user->hasRole('Super Admin')) {
            $query->where('organization_id', $user->organization_id);
        }

        if (!empty($filters['search'])) {
            $searchTerm = strtolower($filters['search']);
            $query->where(function ($q) use ($searchTerm) {
                $q->whereRaw('LOWER(registration_plate) LIKE ?', ["%{$searchTerm}%"])
                  ->orWhereRaw('LOWER(brand) LIKE ?', ["%{$searchTerm}%"])
                  ->orWhereRaw('LOWER(model) LIKE ?', ["%{$searchTerm}%"])
                  ->orWhereHas('assignments.driver', function ($subQuery) use ($searchTerm) {
                      $subQuery->whereRaw('LOWER(first_name) LIKE ?', ["%{$searchTerm}%"])
                               ->orWhereRaw('LOWER(last_name) LIKE ?', ["%{$searchTerm}%"]);
                  });
            });
        }

        if (!empty($filters['sort']) && $filters['sort'] === 'alpha_asc') {
            $query->orderBy('brand', 'asc')->orderBy('model', 'asc');
        } else {
            // Default sort
            $query->orderBy('id', 'desc');
        }

        return $query->paginate($perPage)->withQueryString();
    }

    public function find(int $id): ?Vehicle
    {
        return Vehicle::find($id);
    }

    public function findTrashed(int $id): ?Vehicle
    {
        return Vehicle::onlyTrashed()->find($id);
    }

    public function create(array $data): Vehicle
    {
        return Vehicle::create($data);
    }

    public function update(Vehicle $vehicle, array $data): bool
    {
        return $vehicle->update($data);
    }

    public function delete(Vehicle $vehicle): bool
    {
        return $vehicle->delete();
    }

    public function restore(Vehicle $vehicle): bool
    {
        return $vehicle->restore();
    }

    public function forceDelete(Vehicle $vehicle): bool
    {
        return $vehicle->forceDelete();
    }
}
--- FIN DU FICHIER : ./app/Repositories/Eloquent/VehicleRepository.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Repositories/Interfaces/AssignmentRepositoryInterface.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Repositories\Interfaces;

use App\Models\Assignment;
use Illuminate\Pagination\LengthAwarePaginator;

interface AssignmentRepositoryInterface
{
    public function getFiltered(array $filters): LengthAwarePaginator;
    public function find(int $id): ?Assignment;
    public function create(array $data): Assignment;
    public function update(Assignment $assignment, array $data): bool;
}

--- FIN DU FICHIER : ./app/Repositories/Interfaces/AssignmentRepositoryInterface.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Repositories/Interfaces/DriverRepositoryInterface.php
////////////////////////////////////////////////////////////////

<?php
namespace App\Repositories\Interfaces;
use App\Models\Driver;
use Illuminate\Pagination\LengthAwarePaginator;

interface DriverRepositoryInterface
{
    public function getFiltered(array $filters): LengthAwarePaginator;
    public function create(array $data): Driver;
    public function update(Driver $driver, array $data): bool;
    // ... (d'autres méthodes si nécessaire)
}

--- FIN DU FICHIER : ./app/Repositories/Interfaces/DriverRepositoryInterface.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Repositories/Interfaces/SupplierRepositoryInterface.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Repositories\Interfaces;

use App\Models\Supplier;
use Illuminate\Pagination\LengthAwarePaginator;

interface SupplierRepositoryInterface
{
    public function getFiltered(array $filters): LengthAwarePaginator;
    public function create(array $data): Supplier;
    public function update(Supplier $supplier, array $data): bool;
    public function archive(Supplier $supplier): bool;
}
--- FIN DU FICHIER : ./app/Repositories/Interfaces/SupplierRepositoryInterface.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Repositories/Interfaces/VehicleRepositoryInterface.php
////////////////////////////////////////////////////////////////

<?php
namespace App\Repositories\Interfaces;

use App\Models\Vehicle;
use Illuminate\Pagination\LengthAwarePaginator;

interface VehicleRepositoryInterface
{
    public function getFiltered(array $filters): LengthAwarePaginator;
    public function getForPlanning(array $filters, string $startDate, string $endDate): LengthAwarePaginator;
    public function find(int $id): ?Vehicle;
    public function findTrashed(int $id): ?Vehicle;
    public function create(array $data): Vehicle;
    public function update(Vehicle $vehicle, array $data): bool;
    public function delete(Vehicle $vehicle): bool;
    public function restore(Vehicle $vehicle): bool;
    public function forceDelete(Vehicle $vehicle): bool;
}
--- FIN DU FICHIER : ./app/Repositories/Interfaces/VehicleRepositoryInterface.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Services/AssignmentService.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Services;

use App\Models\Assignment;
use App\Models\Driver;
use App\Models\Vehicle;
use App\Repositories\Interfaces\AssignmentRepositoryInterface;
use Carbon\Carbon;
use Illuminate\Pagination\LengthAwarePaginator;
use App\Models\VehicleStatus;
use App\Models\DriverStatus;  

class AssignmentService
{
    protected AssignmentRepositoryInterface $assignmentRepository;

    public function __construct(AssignmentRepositoryInterface $assignmentRepository)
    {
        $this->assignmentRepository = $assignmentRepository;
    }

    public function getFilteredAssignments(array $filters): LengthAwarePaginator
    {
        return $this->assignmentRepository->getFiltered($filters);
    }

    public function getDataForCreateForm(): array
    {
        $availableVehicles = Vehicle::whereHas('vehicleStatus', function ($query) {
            $query->where('name', 'Parking');
        })->orderBy('brand')->get();

        $availableDrivers = Driver::whereHas('driverStatus', function ($query) {
            $query->where('name', 'Disponible');
        })->orderBy('last_name')->get();

        return compact('availableVehicles', 'availableDrivers');
    }

    public function createAssignment(array $data): Assignment
    {
        return $this->assignmentRepository->create($data);
    }

    public function updateAssignment(Assignment $assignment, array $data): bool
    {
        return $this->assignmentRepository->update($assignment, $data);
    }

   
    public function endAssignment(Assignment $assignment, int $endMileage, string $endDateTime): bool
    {
        // On récupère le statut "Parking" pour le véhicule
        $parkingStatusId = VehicleStatus::where('name', 'Parking')->firstOrFail()->id;
        $assignment->vehicle->update([
            'status_id' => $parkingStatusId,
            'current_mileage' => $endMileage,
        ]);

        // On remet le statut du chauffeur à "Disponible"
        $availableStatusId = DriverStatus::where('name', 'Disponible')->firstOrFail()->id;
        $assignment->driver->update(['status_id' => $availableStatusId]);

        // On met à jour l'affectation elle-même
        return $this->assignmentRepository->update($assignment, [
            'end_datetime' => $endDateTime,
            'end_mileage' => $endMileage,
        ]);
    }
}
--- FIN DU FICHIER : ./app/Services/AssignmentService.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Services/DriverService.php
////////////////////////////////////////////////////////////////

<?php
namespace App\Services;

use App\Models\Driver;
use App\Repositories\Interfaces\DriverRepositoryInterface;
use Illuminate\Pagination\LengthAwarePaginator;
use Illuminate\Support\Facades\Storage;

class DriverService
{
    protected DriverRepositoryInterface $driverRepository;
    public function __construct(DriverRepositoryInterface $driverRepository) { $this->driverRepository = $driverRepository; }
    public function getFilteredDrivers(array $filters): LengthAwarePaginator { return $this->driverRepository->getFiltered($filters); }

    public function createDriver(array $data): Driver
    {
        if (isset($data['photo'])) {
            $data['photo_path'] = $data['photo']->store('drivers/photos', 'public');
            unset($data['photo']);
        }
        return $this->driverRepository->create($data);
    }

    public function updateDriver(Driver $driver, array $data): bool
    {
        if (isset($data['photo'])) {
            if ($driver->photo_path) {
                Storage::disk('public')->delete($driver->photo_path);
            }
            $data['photo_path'] = $data['photo']->store('drivers/photos', 'public');
            unset($data['photo']);
        }
        return $this->driverRepository->update($driver, $data);
    }

    public function archiveDriver(Driver $driver): bool
    {
        // RÈGLE MÉTIER : On ne peut pas archiver un chauffeur avec des affectations.
        if ($driver->assignments()->exists()) {
            return false;
        }
        return $this->driverRepository->delete($driver);
    }

    public function restoreDriver(int $driverId): bool
    {
        $driver = $this->driverRepository->findTrashed($driverId);
        return $driver ? $this->driverRepository->restore($driver) : false;
    }

   public function forceDeleteDriver(int $driverId): bool
    {
        $driver = $this->driverRepository->findTrashed($driverId);

        if ($driver) {
            // RÈGLE MÉTIER : On vérifie si le chauffeur a des affectations
            if ($driver->assignments()->exists()) {
                // Si oui, on refuse la suppression
                return false;
            }

            // Si non, on procède à la suppression
            if ($driver->photo_path) {
                Storage::disk('public')->delete($driver->photo_path);
            }
            return $this->driverRepository->forceDelete($driver);
        }
        return false;
    }
}
--- FIN DU FICHIER : ./app/Services/DriverService.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Services/ImportExportService.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Services;

use App\Models\FuelType;
use App\Models\TransmissionType;
use App\Models\Vehicle;
use App\Models\VehicleStatus;
use App\Models\VehicleType;
use Illuminate\Http\UploadedFile;
use Illuminate\Support\Facades\DB;
use Illuminate\Support\Facades\Log;
use Illuminate\Support\Facades\Storage;
use Illuminate\Support\Facades\Validator;
use Illuminate\Support\Str;
use League\Csv\Reader;
use League\Csv\Statement;
use League\Csv\Writer;
use Symfony\Component\HttpFoundation\StreamedResponse;

class ImportExportService
{
    /**
     * Génère un fichier CSV modèle pour l'importation.
     *
     * @param string $filename Nom du fichier à télécharger
     * @param array $headers En-têtes des colonnes
     * @param array $example Ligne d'exemple
     * @return StreamedResponse
     */
    public function generateCsvTemplate(string $filename, array $headers, array $example): StreamedResponse
    {
        return response()->streamDownload(function () use ($headers, $example) {
            $csv = Writer::createFromString();
            $csv->insertOne($headers);
            $csv->insertOne($example);
            echo $csv->toString();
        }, $filename, [
            'Content-Type' => 'text/csv',
            'Content-Disposition' => 'attachment; filename="' . $filename . '"',
        ]);
    }

    /**
     * Importe des véhicules à partir d'un fichier CSV.
     *
     * @param UploadedFile $file Fichier CSV uploadé
     * @param string $encoding Encodage du fichier ('auto', 'utf8', 'iso', 'windows')
     * @return array Résultats de l'importation
     */
    public function importVehiclesFromCsv(UploadedFile $file, string $encoding = 'auto', array $mappings = []): array
    {
        // Générer un identifiant unique pour cette importation
        $importId = Str::uuid()->toString();
        $fileName = $file->getClientOriginalName();
        
        // Stocker temporairement le fichier
        $path = $file->storeAs('imports/temp', $importId . '.csv');
        $fullPath = Storage::path($path);
        
        try {
            // Détecter et convertir l'encodage si nécessaire
            $detectedEncoding = $this->detectEncoding($fullPath, $encoding);
            $content = file_get_contents($fullPath);
            
            if ($detectedEncoding !== 'UTF-8') {
                $content = mb_convert_encoding($content, 'UTF-8', $detectedEncoding);
                file_put_contents($fullPath, $content);
            }
            
            // Charger le CSV avec League\CSV
            $csv = Reader::createFromPath($fullPath, 'r');
            $csv->setHeaderOffset(0);
            
            // Préparer les données de référence pour la validation
            $vehicleTypes = ($mappings["vehicle_types"] ?? VehicleType::pluck("id", "name"))->toArray();
            $fuelTypes = ($mappings["fuel_types"] ?? FuelType::pluck("id", "name"))->toArray();
            $transmissionTypes = ($mappings["transmission_types"] ?? TransmissionType::pluck("id", "name"))->toArray();
            $vehicleStatuses = ($mappings["vehicle_statuses"] ?? VehicleStatus::pluck("id", "name"))->toArray();
            
            // Traiter les enregistrements
            $records = Statement::create()->process($csv);
            $recordsArray = iterator_to_array($records);
            
            $successCount = 0;
            $errorRows = [];
            
            DB::beginTransaction();
            
            try {
                foreach ($recordsArray as $offset => $record) {
                    $lineNumber = $offset + 2; // +1 pour l'en-tête, +1 pour commencer à 1
                    
                    // Nettoyer et préparer les données
                    $data = $this->prepareVehicleData($record, $vehicleTypes, $fuelTypes, $transmissionTypes, $vehicleStatuses);
                    
                    // Valider les données
                    $validator = Validator::make($data, $this->getVehicleValidationRules());
                    
                    if ($validator->fails()) {
                        // Enregistrer les erreurs
                        $errorRows[] = [
                            'line' => $lineNumber,
                            'errors' => $validator->errors()->all(),
                            'data' => $record,
                            'problematic_fields' => implode(',', array_keys($validator->errors()->toArray()))
                        ];
                    } else {
                        // Créer le véhicule
                        Vehicle::create($data);
                        $successCount++;
                    }
                }
                
                // Valider la transaction si tout s'est bien passé
                DB::commit();
                
                // Journaliser le résultat
                Log::info('Importation de véhicules terminée', [
                    'import_id' => $importId,
                    'file_name' => $fileName,
                    'success_count' => $successCount,
                    'error_count' => count($errorRows)
                ]);
                
                return [
                    'success_count' => $successCount,
                    'error_rows' => $errorRows,
                    'import_id' => $importId,
                    'file_name' => $fileName,
                    'encoding' => $detectedEncoding
                ];
            } catch (\Exception $e) {
                DB::rollBack();
                Log::error('Erreur lors de l\'importation des véhicules', [
                    'import_id' => $importId,
                    'exception' => $e->getMessage(),
                    'trace' => $e->getTraceAsString()
                ]);
                throw $e;
            }
        } finally {
            // Nettoyer le fichier temporaire
            Storage::delete($path);
        }
    }

    /**
     * Exporte les lignes en erreur vers un fichier CSV.
     *
     * @param array $errorRows Lignes en erreur
     * @param string $importId Identifiant de l'importation
     * @return StreamedResponse
     */
    public function exportErrorRows(array $errorRows, string $importId): StreamedResponse
    {
        return response()->streamDownload(function () use ($errorRows) {
            $csv = Writer::createFromString();
            
            // Si aucune erreur, retourner un fichier vide avec en-têtes
            if (empty($errorRows)) {
                $csv->insertOne(['Aucune erreur à exporter']);
                echo $csv->toString();
                return;
            }
            
            // Récupérer les en-têtes à partir de la première ligne d'erreur
            $headers = array_keys($errorRows[0]['data']);
            $csv->insertOne($headers);
            
            // Ajouter les lignes en erreur
            foreach ($errorRows as $error) {
                $csv->insertOne(array_values($error['data']));
            }
            
            echo $csv->toString();
        }, 'erreurs_import_vehicules_' . substr($importId, 0, 8) . '.csv', [
            'Content-Type' => 'text/csv',
            'Content-Disposition' => 'attachment; filename="erreurs_import_vehicules_' . substr($importId, 0, 8) . '.csv"',
        ]);
    }

    /**
     * Détecte l'encodage d'un fichier CSV.
     *
     * @param string $filePath Chemin complet du fichier
     * @param string $requestedEncoding Encodage demandé ('auto', 'utf8', 'iso', 'windows')
     * @return string Encodage détecté
     */
    protected function detectEncoding(string $filePath, string $requestedEncoding): string
    {
        // Si un encodage spécifique est demandé (sauf 'auto'), l'utiliser
        if ($requestedEncoding !== 'auto') {
            return match($requestedEncoding) {
                'utf8' => 'UTF-8',
                'iso' => 'ISO-8859-1',
                'windows' => 'Windows-1252',
                default => 'UTF-8'
            };
        }
        
        // Sinon, tenter de détecter automatiquement
        $content = file_get_contents($filePath);
        $encodings = ['UTF-8', 'ISO-8859-1', 'Windows-1252'];
        
        foreach ($encodings as $encoding) {
            $sample = mb_convert_encoding($content, 'UTF-8', $encoding);
            // Si la conversion ne produit pas de caractères invalides, c'est probablement le bon encodage
            if (!preg_match('/\p{Cc}|\p{Cf}|\p{Co}|\p{Cn}/u', $sample)) {
                return $encoding;
            }
        }
        
        // Par défaut, utiliser UTF-8
        return 'UTF-8';
    }

    /**
     * Prépare les données du véhicule à partir d'une ligne CSV.
     *
     * @param array $record Ligne du CSV
     * @param array $vehicleTypes Types de véhicules disponibles
     * @param array $fuelTypes Types de carburants disponibles
     * @param array $transmissionTypes Types de transmissions disponibles
     * @param array $vehicleStatuses Statuts de véhicules disponibles
     * @return array Données préparées
     */
    protected function prepareVehicleData(array $record, array $vehicleTypes, array $fuelTypes, array $transmissionTypes, array $vehicleStatuses): array
    {
        $data = [
            'registration_plate' => $record['immatriculation'] ?? null,
            'vin' => $record['numero_serie_vin'] ?? null,
            'brand' => $record['marque'] ?? null,
            'model' => $record['modele'] ?? null,
            'color' => $record['couleur'] ?? null,
            'vehicle_type_id' => $vehicleTypes[strtolower($record['type_vehicule'] ?? '')] ?? null,
            'fuel_type_id' => $fuelTypes[strtolower($record['type_carburant'] ?? '')] ?? null,
            'transmission_type_id' => $transmissionTypes[strtolower($record['type_transmission'] ?? '')] ?? null,
            'vehicle_status_id' => $vehicleStatuses[strtolower($record['statut'] ?? '')] ?? null,
            'year' => $record['annee_fabrication'] ?? null,
            'acquisition_date' => $this->formatDate($record['date_acquisition'] ?? null),
            'purchase_price' => $this->formatDecimal($record['prix_achat'] ?? null),
            'current_value' => $this->formatDecimal($record['valeur_actuelle'] ?? null),
            'initial_mileage' => $this->formatInteger($record['kilometrage_initial'] ?? null),
            'engine_capacity' => $this->formatInteger($record['cylindree_cc'] ?? null),
            'power' => $this->formatInteger($record['puissance_cv'] ?? null),
            'seats' => $this->formatInteger($record['nombre_places'] ?? null),
            'notes' => $record['notes'] ?? null,
            'organization_id' => auth()->user()->organization_id,
        ];
        
        // Nettoyer les valeurs vides
        return array_map(function ($value) {
            return $value === '' ? null : $value;
        }, $data);
    }

    /**
     * Retourne les règles de validation pour un véhicule.
     *
     * @return array Règles de validation
     */
    protected function getVehicleValidationRules(): array
    {
        return [
            'registration_plate' => 'required|string|max:20',
            'vin' => 'nullable|string|max:50',
            'brand' => 'required|string|max:50',
            'model' => 'required|string|max:50',
            'color' => 'nullable|string|max:30',
            'vehicle_type_id' => 'required|exists:vehicle_types,id',
            'fuel_type_id' => 'required|exists:fuel_types,id',
            'transmission_type_id' => 'required|exists:transmission_types,id',
            'vehicle_status_id' => 'required|exists:vehicle_statuses,id',
            'year' => 'nullable|integer|min:1900|max:' . (date('Y') + 1),
            'acquisition_date' => 'nullable|date',
            'purchase_price' => 'nullable|numeric|min:0',
            'current_value' => 'nullable|numeric|min:0',
            'initial_mileage' => 'nullable|integer|min:0',
            'engine_capacity' => 'nullable|integer|min:0',
            'power' => 'nullable|integer|min:0',
            'seats' => 'nullable|integer|min:0',
            'notes' => 'nullable|string',
            'organization_id' => 'required|exists:organizations,id',
        ];
    }

    /**
     * Formate une date depuis une chaîne.
     *
     * @param string|null $date Date à formater
     * @return string|null Date formatée ou null
     */
    public function formatDate(?string $date): ?string
    {
        if (empty($date)) {
            return null;
        }
        
        // Essayer plusieurs formats de date courants
        $formats = ['Y-m-d', 'd/m/Y', 'm/d/Y', 'd-m-Y', 'Y/m/d'];
        
        foreach ($formats as $format) {
            $dateObj = \DateTime::createFromFormat($format, $date);
            if ($dateObj !== false) {
                return $dateObj->format('Y-m-d');
            }
        }
        
        return null;
    }

    /**
     * Formate un nombre décimal depuis une chaîne.
     *
     * @param string|null $value Valeur à formater
     * @return float|null Nombre décimal ou null
     */
    public function formatDecimal(?string $value): ?float
    {
        if (empty($value)) {
            return null;
        }
        
        // Nettoyer la valeur (supprimer espaces, séparateurs de milliers)
        $value = str_replace([' ', ','], ['', '.'], $value);
        
        return is_numeric($value) ? (float) $value : null;
    }

    /**
     * Formate un nombre entier depuis une chaîne.
     *
     * @param string|null $value Valeur à formater
     * @return int|null Nombre entier ou null
     */
    public function formatInteger(?string $value): ?int
    {
        if (empty($value)) {
            return null;
        }
        
        // Nettoyer la valeur (supprimer espaces, séparateurs de milliers)
        $value = str_replace([' ', ',', '.'], '', $value);
        
        return is_numeric($value) ? (int) $value : null;
    }
}

--- FIN DU FICHIER : ./app/Services/ImportExportService.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Services/PdfGenerationService.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Services;

use Illuminate\Support\Facades\Http;
use Illuminate\Http\Client\RequestException;
use Illuminate\Support\Facades\Log;

class PdfGenerationService
{
    protected string $serviceUrl;
    protected string $healthUrl;
    protected int $timeout;
    protected int $retries;

    public function __construct()
    {
        $this->serviceUrl = config('services.pdf.url', 'http://node:3000/generate-pdf');
        $this->healthUrl = config('services.pdf.health_url', 'http://node:3000/health');
        $this->timeout = (int) config('services.pdf.timeout', 120);
        $this->retries = (int) config('services.pdf.retries', 3);
    }

    public function generateFromHtml(string $html): string
    {
        
        if (!$this->isServiceHealthy()) {
            throw new \Exception("Le service PDF n'est pas disponible après plusieurs tentatives.");
        }

        $response = Http::timeout($this->timeout)
            // --- CORRECTION DÉFINITIVE ---
            // On désactive la vérification SSL pour les appels internes à Docker
            ->withoutVerifying()
            ->post($this->serviceUrl, [
                'html' => $html,
            ]);

        $response->throw();

        return $response->body();
    }

    private function isServiceHealthy(): bool
    {
        for ($i = 0; $i < $this->retries; $i++) {
            try {
                $response = Http::timeout(5)
                    // --- CORRECTION DÉFINITIVE ---
                    // On désactive la vérification SSL pour les appels internes à Docker
                    ->withoutVerifying()
                    ->get($this->healthUrl);

                if ($response->successful() && $response->json('status') === 'OK') {
                    return true;
                }
            } catch (RequestException $e) {
                Log::warning('Tentative de connexion au service PDF échouée.', ['attempt' => $i + 1, 'error' => $e->getMessage()]);
                // Attendre un peu avant la prochaine tentative
                if ($i < $this->retries - 1) {
                    sleep(1);
                }
            }
        }
        return false;
    }
}
--- FIN DU FICHIER : ./app/Services/PdfGenerationService.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Services/SupplierCategoryService.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Services;

use App\Models\SupplierCategory;
use Illuminate\Support\Facades\Auth; // <-- AJOUT

class SupplierCategoryService
{
    public function createCategory(array $data): SupplierCategory
    {
        // CORRECTION : On fusionne les données validées avec l'ID de l'organisation de l'utilisateur.
        $dataWithOrg = array_merge($data, [
            'organization_id' => Auth::user()->organization_id
        ]);

        return SupplierCategory::create($dataWithOrg);
    }
}
--- FIN DU FICHIER : ./app/Services/SupplierCategoryService.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Services/SupplierService.php
////////////////////////////////////////////////////////////////

<?php

namespace App\Services;

use App\Models\Supplier;
use App\Models\SupplierCategory; // <-- AJOUT
use App\Repositories\Interfaces\SupplierRepositoryInterface;
use Illuminate\Pagination\LengthAwarePaginator;

class SupplierService
{
    protected SupplierRepositoryInterface $supplierRepository;

    public function __construct(SupplierRepositoryInterface $supplierRepository)
    {
        $this->supplierRepository = $supplierRepository;
    }

    /**
     * Récupère les fournisseurs pour la page d'index via le repository.
     */
    public function getFilteredSuppliers(array $filters): LengthAwarePaginator
    {
        return $this->supplierRepository->getFiltered($filters);
    }

    /**
     * Récupère les données nécessaires pour les formulaires de création/modification.
     */
    /**
     * Récupère les données nécessaires pour les formulaires de création/modification.
     */
    public function getDataForCreateForm(): array
    {
        // CORRECTION : On retourne un simple tableau avec les données.
        return [
            'categories' => SupplierCategory::orderBy('name')->get(),
        ];
    }

    /**
     * Gère la création d'un fournisseur.
     */
    public function createSupplier(array $data): Supplier
    {
        return $this->supplierRepository->create($data);
    }

    /**
     * Gère la mise à jour d'un fournisseur.
     */
    public function updateSupplier(Supplier $supplier, array $data): bool
    {
        return $this->supplierRepository->update($supplier, $data);
    }

    /**
     * Gère l'archivage d'un fournisseur.
     */
    public function archiveSupplier(Supplier $supplier): bool
    {
        return $this->supplierRepository->archive($supplier);
    }
}
--- FIN DU FICHIER : ./app/Services/SupplierService.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/Services/VehicleService.php
////////////////////////////////////////////////////////////////

<?php
namespace App\Services;

use App\Models\Vehicle;
use App\Repositories\Interfaces\VehicleRepositoryInterface;
use Illuminate\Pagination\LengthAwarePaginator;
use Illuminate\Support\Facades\Storage;

class VehicleService
{
    protected VehicleRepositoryInterface $vehicleRepository;

    public function __construct(VehicleRepositoryInterface $vehicleRepository)
    {
        $this->vehicleRepository = $vehicleRepository;
    }

    public function getFilteredVehicles(array $filters): LengthAwarePaginator
    {
        return $this->vehicleRepository->getFiltered($filters);
    }

    public function createVehicle(array $data, ?UploadedFile $photo, array $userIds = []): Vehicle
    {
        if ($photo) {
            $data['photo_path'] = $photo->store('vehicles/photos', 'public');
        }
        $data['current_mileage'] = $data['initial_mileage'];

        $vehicle = $this->vehicleRepository->create($data);

        if (!empty($userIds)) {
            $vehicle->users()->sync($userIds);
        }

        return $vehicle;
    }

    public function updateVehicle(Vehicle $vehicle, array $data, ?UploadedFile $photo, array $userIds = []): bool
    {
        if ($photo) {
            if ($vehicle->photo_path) {
                Storage::disk('public')->delete($vehicle->photo_path);
            }
            $data['photo_path'] = $photo->store('vehicles/photos', 'public');
        }

        $updated = $this->vehicleRepository->update($vehicle, $data);

        if ($updated) {
            $vehicle->users()->sync($userIds);
        }

        return $updated;
    }

    public function archiveVehicle(Vehicle $vehicle): bool
    {
        return $this->vehicleRepository->delete($vehicle);
    }

    public function restoreVehicle(int $vehicleId): bool
    {
        $vehicle = $this->vehicleRepository->findTrashed($vehicleId);
        if ($vehicle) {
            return $this->vehicleRepository->restore($vehicle);
        }
        return false;
    }

    public function forceDeleteVehicle(int $vehicleId): bool
    {
        $vehicle = $this->vehicleRepository->findTrashed($vehicleId);
        if ($vehicle) {
            if ($vehicle->photo_path) {
                Storage::disk('public')->delete($vehicle->photo_path);
            }
            return $this->vehicleRepository->forceDelete($vehicle);
        }
        return false;
    }
}
--- FIN DU FICHIER : ./app/Services/VehicleService.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/View/Components/AppLayout.php
////////////////////////////////////////////////////////////////

<?php

namespace App\View\Components;

use Illuminate\View\Component;
use Illuminate\View\View;

class AppLayout extends Component
{
    /**
     * Get the view / contents that represents the component.
     */
    public function render(): View
    {
        return view('layouts.app');
    }
}

--- FIN DU FICHIER : ./app/View/Components/AppLayout.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./app/View/Components/GuestLayout.php
////////////////////////////////////////////////////////////////

<?php

namespace App\View\Components;

use Illuminate\View\Component;
use Illuminate\View\View;

class GuestLayout extends Component
{
    /**
     * Get the view / contents that represents the component.
     */
    public function render(): View
    {
        return view('layouts.guest');
    }
}

--- FIN DU FICHIER : ./app/View/Components/GuestLayout.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./bootstrap/app.php
////////////////////////////////////////////////////////////////

<?php

/*
|--------------------------------------------------------------------------
| Create The Application
|--------------------------------------------------------------------------
|
| The first thing we will do is create a new Laravel application instance
| which serves as the "glue" for all the components of Laravel, and is
| the IoC container for the system binding all of the various parts.
|
*/

$app = new Illuminate\Foundation\Application(
    $_ENV['APP_BASE_PATH'] ?? dirname(__DIR__)
);

/*
|--------------------------------------------------------------------------
| Bind Important Interfaces
|--------------------------------------------------------------------------
|
| Next, we need to bind some important interfaces into the container so
| we will be able to resolve them when needed. The kernels serve the
| incoming requests to this application from both the web and CLI.
|
*/

$app->singleton(
    Illuminate\Contracts\Http\Kernel::class,
    App\Http\Kernel::class
);

$app->singleton(
    Illuminate\Contracts\Console\Kernel::class,
    App\Console\Kernel::class
);

$app->singleton(
    Illuminate\Contracts\Debug\ExceptionHandler::class,
    App\Exceptions\Handler::class
);

/*
|--------------------------------------------------------------------------
| Return The Application
|--------------------------------------------------------------------------
|
| This script returns the application instance. The instance is given to
| the calling script so we can separate the building of the instances
| from the actual running of the application and sending responses.
|
*/

return $app;

--- FIN DU FICHIER : ./bootstrap/app.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./bootstrap/cache/.gitignore
////////////////////////////////////////////////////////////////

*
!.gitignore

--- FIN DU FICHIER : ./bootstrap/cache/.gitignore ---


////////////////////////////////////////////////////////////////
CHEMIN : ./bootstrap/cache/packages.php
////////////////////////////////////////////////////////////////

<?php return array (
  'blade-ui-kit/blade-icons' => 
  array (
    'providers' => 
    array (
      0 => 'BladeUI\\Icons\\BladeIconsServiceProvider',
    ),
  ),
  'laravel-lang/config' => 
  array (
    'providers' => 
    array (
      0 => 'LaravelLang\\Config\\ServiceProvider',
    ),
  ),
  'laravel-lang/lang' => 
  array (
    'providers' => 
    array (
      0 => 'LaravelLang\\Lang\\ServiceProvider',
    ),
  ),
  'laravel-lang/locales' => 
  array (
    'providers' => 
    array (
      0 => 'LaravelLang\\Locales\\ServiceProvider',
    ),
  ),
  'laravel-lang/publisher' => 
  array (
    'providers' => 
    array (
      0 => 'LaravelLang\\Publisher\\ServiceProvider',
    ),
  ),
  'laravel/breeze' => 
  array (
    'providers' => 
    array (
      0 => 'Laravel\\Breeze\\BreezeServiceProvider',
    ),
  ),
  'laravel/sail' => 
  array (
    'providers' => 
    array (
      0 => 'Laravel\\Sail\\SailServiceProvider',
    ),
  ),
  'laravel/sanctum' => 
  array (
    'providers' => 
    array (
      0 => 'Laravel\\Sanctum\\SanctumServiceProvider',
    ),
  ),
  'laravel/tinker' => 
  array (
    'providers' => 
    array (
      0 => 'Laravel\\Tinker\\TinkerServiceProvider',
    ),
  ),
  'mallardduck/blade-lucide-icons' => 
  array (
    'providers' => 
    array (
      0 => 'MallardDuck\\LucideIcons\\BladeLucideIconsServiceProvider',
    ),
  ),
  'nesbot/carbon' => 
  array (
    'providers' => 
    array (
      0 => 'Carbon\\Laravel\\ServiceProvider',
    ),
  ),
  'nunomaduro/collision' => 
  array (
    'providers' => 
    array (
      0 => 'NunoMaduro\\Collision\\Adapters\\Laravel\\CollisionServiceProvider',
    ),
  ),
  'nunomaduro/termwind' => 
  array (
    'providers' => 
    array (
      0 => 'Termwind\\Laravel\\TermwindServiceProvider',
    ),
  ),
  'spatie/laravel-ignition' => 
  array (
    'aliases' => 
    array (
      'Flare' => 'Spatie\\LaravelIgnition\\Facades\\Flare',
    ),
    'providers' => 
    array (
      0 => 'Spatie\\LaravelIgnition\\IgnitionServiceProvider',
    ),
  ),
  'spatie/laravel-permission' => 
  array (
    'providers' => 
    array (
      0 => 'Spatie\\Permission\\PermissionServiceProvider',
    ),
  ),
);
--- FIN DU FICHIER : ./bootstrap/cache/packages.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./bootstrap/cache/services.php
////////////////////////////////////////////////////////////////

<?php return array (
  'providers' => 
  array (
    0 => 'Illuminate\\Auth\\AuthServiceProvider',
    1 => 'Illuminate\\Broadcasting\\BroadcastServiceProvider',
    2 => 'Illuminate\\Bus\\BusServiceProvider',
    3 => 'Illuminate\\Cache\\CacheServiceProvider',
    4 => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    5 => 'Illuminate\\Cookie\\CookieServiceProvider',
    6 => 'Illuminate\\Database\\DatabaseServiceProvider',
    7 => 'Illuminate\\Encryption\\EncryptionServiceProvider',
    8 => 'Illuminate\\Filesystem\\FilesystemServiceProvider',
    9 => 'Illuminate\\Foundation\\Providers\\FoundationServiceProvider',
    10 => 'Illuminate\\Hashing\\HashServiceProvider',
    11 => 'Illuminate\\Mail\\MailServiceProvider',
    12 => 'Illuminate\\Notifications\\NotificationServiceProvider',
    13 => 'Illuminate\\Pagination\\PaginationServiceProvider',
    14 => 'Illuminate\\Auth\\Passwords\\PasswordResetServiceProvider',
    15 => 'Illuminate\\Pipeline\\PipelineServiceProvider',
    16 => 'Illuminate\\Queue\\QueueServiceProvider',
    17 => 'Illuminate\\Redis\\RedisServiceProvider',
    18 => 'Illuminate\\Session\\SessionServiceProvider',
    19 => 'Illuminate\\Translation\\TranslationServiceProvider',
    20 => 'Illuminate\\Validation\\ValidationServiceProvider',
    21 => 'Illuminate\\View\\ViewServiceProvider',
    22 => 'BladeUI\\Icons\\BladeIconsServiceProvider',
    23 => 'LaravelLang\\Config\\ServiceProvider',
    24 => 'LaravelLang\\Lang\\ServiceProvider',
    25 => 'LaravelLang\\Locales\\ServiceProvider',
    26 => 'LaravelLang\\Publisher\\ServiceProvider',
    27 => 'Laravel\\Breeze\\BreezeServiceProvider',
    28 => 'Laravel\\Sail\\SailServiceProvider',
    29 => 'Laravel\\Sanctum\\SanctumServiceProvider',
    30 => 'Laravel\\Tinker\\TinkerServiceProvider',
    31 => 'MallardDuck\\LucideIcons\\BladeLucideIconsServiceProvider',
    32 => 'Carbon\\Laravel\\ServiceProvider',
    33 => 'NunoMaduro\\Collision\\Adapters\\Laravel\\CollisionServiceProvider',
    34 => 'Termwind\\Laravel\\TermwindServiceProvider',
    35 => 'Spatie\\LaravelIgnition\\IgnitionServiceProvider',
    36 => 'Spatie\\Permission\\PermissionServiceProvider',
    37 => 'App\\Providers\\AppServiceProvider',
    38 => 'App\\Providers\\AuthServiceProvider',
    39 => 'App\\Providers\\EventServiceProvider',
    40 => 'App\\Providers\\RouteServiceProvider',
    41 => 'Spatie\\Permission\\PermissionServiceProvider',
    42 => 'App\\Providers\\RepositoryServiceProvider',
  ),
  'eager' => 
  array (
    0 => 'Illuminate\\Auth\\AuthServiceProvider',
    1 => 'Illuminate\\Cookie\\CookieServiceProvider',
    2 => 'Illuminate\\Database\\DatabaseServiceProvider',
    3 => 'Illuminate\\Encryption\\EncryptionServiceProvider',
    4 => 'Illuminate\\Filesystem\\FilesystemServiceProvider',
    5 => 'Illuminate\\Foundation\\Providers\\FoundationServiceProvider',
    6 => 'Illuminate\\Notifications\\NotificationServiceProvider',
    7 => 'Illuminate\\Pagination\\PaginationServiceProvider',
    8 => 'Illuminate\\Session\\SessionServiceProvider',
    9 => 'Illuminate\\View\\ViewServiceProvider',
    10 => 'BladeUI\\Icons\\BladeIconsServiceProvider',
    11 => 'LaravelLang\\Config\\ServiceProvider',
    12 => 'LaravelLang\\Lang\\ServiceProvider',
    13 => 'LaravelLang\\Locales\\ServiceProvider',
    14 => 'LaravelLang\\Publisher\\ServiceProvider',
    15 => 'Laravel\\Sanctum\\SanctumServiceProvider',
    16 => 'MallardDuck\\LucideIcons\\BladeLucideIconsServiceProvider',
    17 => 'Carbon\\Laravel\\ServiceProvider',
    18 => 'NunoMaduro\\Collision\\Adapters\\Laravel\\CollisionServiceProvider',
    19 => 'Termwind\\Laravel\\TermwindServiceProvider',
    20 => 'Spatie\\LaravelIgnition\\IgnitionServiceProvider',
    21 => 'Spatie\\Permission\\PermissionServiceProvider',
    22 => 'App\\Providers\\AppServiceProvider',
    23 => 'App\\Providers\\AuthServiceProvider',
    24 => 'App\\Providers\\EventServiceProvider',
    25 => 'App\\Providers\\RouteServiceProvider',
    26 => 'Spatie\\Permission\\PermissionServiceProvider',
    27 => 'App\\Providers\\RepositoryServiceProvider',
  ),
  'deferred' => 
  array (
    'Illuminate\\Broadcasting\\BroadcastManager' => 'Illuminate\\Broadcasting\\BroadcastServiceProvider',
    'Illuminate\\Contracts\\Broadcasting\\Factory' => 'Illuminate\\Broadcasting\\BroadcastServiceProvider',
    'Illuminate\\Contracts\\Broadcasting\\Broadcaster' => 'Illuminate\\Broadcasting\\BroadcastServiceProvider',
    'Illuminate\\Bus\\Dispatcher' => 'Illuminate\\Bus\\BusServiceProvider',
    'Illuminate\\Contracts\\Bus\\Dispatcher' => 'Illuminate\\Bus\\BusServiceProvider',
    'Illuminate\\Contracts\\Bus\\QueueingDispatcher' => 'Illuminate\\Bus\\BusServiceProvider',
    'Illuminate\\Bus\\BatchRepository' => 'Illuminate\\Bus\\BusServiceProvider',
    'Illuminate\\Bus\\DatabaseBatchRepository' => 'Illuminate\\Bus\\BusServiceProvider',
    'cache' => 'Illuminate\\Cache\\CacheServiceProvider',
    'cache.store' => 'Illuminate\\Cache\\CacheServiceProvider',
    'cache.psr6' => 'Illuminate\\Cache\\CacheServiceProvider',
    'memcached.connector' => 'Illuminate\\Cache\\CacheServiceProvider',
    'Illuminate\\Cache\\RateLimiter' => 'Illuminate\\Cache\\CacheServiceProvider',
    'Illuminate\\Foundation\\Console\\AboutCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Cache\\Console\\ClearCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Cache\\Console\\ForgetCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\ClearCompiledCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Auth\\Console\\ClearResetsCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\ConfigCacheCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\ConfigClearCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\ConfigShowCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Database\\Console\\DbCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Database\\Console\\MonitorCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Database\\Console\\PruneCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Database\\Console\\ShowCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Database\\Console\\TableCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Database\\Console\\WipeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\DownCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\EnvironmentCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\EnvironmentDecryptCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\EnvironmentEncryptCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\EventCacheCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\EventClearCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\EventListCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\KeyGenerateCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\OptimizeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\OptimizeClearCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\PackageDiscoverCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Cache\\Console\\PruneStaleTagsCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Queue\\Console\\ClearCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Queue\\Console\\ListFailedCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Queue\\Console\\FlushFailedCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Queue\\Console\\ForgetFailedCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Queue\\Console\\ListenCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Queue\\Console\\MonitorCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Queue\\Console\\PruneBatchesCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Queue\\Console\\PruneFailedJobsCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Queue\\Console\\RestartCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Queue\\Console\\RetryCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Queue\\Console\\RetryBatchCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Queue\\Console\\WorkCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\RouteCacheCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\RouteClearCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\RouteListCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Database\\Console\\DumpCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Database\\Console\\Seeds\\SeedCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Console\\Scheduling\\ScheduleFinishCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Console\\Scheduling\\ScheduleListCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Console\\Scheduling\\ScheduleRunCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Console\\Scheduling\\ScheduleClearCacheCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Console\\Scheduling\\ScheduleTestCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Console\\Scheduling\\ScheduleWorkCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Console\\Scheduling\\ScheduleInterruptCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Database\\Console\\ShowModelCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\StorageLinkCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\StorageUnlinkCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\UpCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\ViewCacheCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\ViewClearCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Cache\\Console\\CacheTableCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\CastMakeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\ChannelListCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\ChannelMakeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\ComponentMakeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\ConsoleMakeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Routing\\Console\\ControllerMakeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\DocsCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\EventGenerateCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\EventMakeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\ExceptionMakeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Database\\Console\\Factories\\FactoryMakeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\JobMakeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\LangPublishCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\ListenerMakeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\MailMakeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Routing\\Console\\MiddlewareMakeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\ModelMakeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\NotificationMakeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Notifications\\Console\\NotificationTableCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\ObserverMakeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\PolicyMakeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\ProviderMakeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Queue\\Console\\FailedTableCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Queue\\Console\\TableCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Queue\\Console\\BatchesTableCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\RequestMakeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\ResourceMakeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\RuleMakeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\ScopeMakeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Database\\Console\\Seeds\\SeederMakeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Session\\Console\\SessionTableCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\ServeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\StubPublishCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\TestMakeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\VendorPublishCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Foundation\\Console\\ViewMakeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'migrator' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'migration.repository' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'migration.creator' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Database\\Console\\Migrations\\MigrateCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Database\\Console\\Migrations\\FreshCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Database\\Console\\Migrations\\InstallCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Database\\Console\\Migrations\\RefreshCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Database\\Console\\Migrations\\ResetCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Database\\Console\\Migrations\\RollbackCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Database\\Console\\Migrations\\StatusCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'Illuminate\\Database\\Console\\Migrations\\MigrateMakeCommand' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'composer' => 'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider',
    'hash' => 'Illuminate\\Hashing\\HashServiceProvider',
    'hash.driver' => 'Illuminate\\Hashing\\HashServiceProvider',
    'mail.manager' => 'Illuminate\\Mail\\MailServiceProvider',
    'mailer' => 'Illuminate\\Mail\\MailServiceProvider',
    'Illuminate\\Mail\\Markdown' => 'Illuminate\\Mail\\MailServiceProvider',
    'auth.password' => 'Illuminate\\Auth\\Passwords\\PasswordResetServiceProvider',
    'auth.password.broker' => 'Illuminate\\Auth\\Passwords\\PasswordResetServiceProvider',
    'Illuminate\\Contracts\\Pipeline\\Hub' => 'Illuminate\\Pipeline\\PipelineServiceProvider',
    'pipeline' => 'Illuminate\\Pipeline\\PipelineServiceProvider',
    'queue' => 'Illuminate\\Queue\\QueueServiceProvider',
    'queue.connection' => 'Illuminate\\Queue\\QueueServiceProvider',
    'queue.failer' => 'Illuminate\\Queue\\QueueServiceProvider',
    'queue.listener' => 'Illuminate\\Queue\\QueueServiceProvider',
    'queue.worker' => 'Illuminate\\Queue\\QueueServiceProvider',
    'redis' => 'Illuminate\\Redis\\RedisServiceProvider',
    'redis.connection' => 'Illuminate\\Redis\\RedisServiceProvider',
    'translator' => 'Illuminate\\Translation\\TranslationServiceProvider',
    'translation.loader' => 'Illuminate\\Translation\\TranslationServiceProvider',
    'validator' => 'Illuminate\\Validation\\ValidationServiceProvider',
    'validation.presence' => 'Illuminate\\Validation\\ValidationServiceProvider',
    'Illuminate\\Contracts\\Validation\\UncompromisedVerifier' => 'Illuminate\\Validation\\ValidationServiceProvider',
    'Laravel\\Breeze\\Console\\InstallCommand' => 'Laravel\\Breeze\\BreezeServiceProvider',
    'Laravel\\Sail\\Console\\InstallCommand' => 'Laravel\\Sail\\SailServiceProvider',
    'Laravel\\Sail\\Console\\PublishCommand' => 'Laravel\\Sail\\SailServiceProvider',
    'command.tinker' => 'Laravel\\Tinker\\TinkerServiceProvider',
  ),
  'when' => 
  array (
    'Illuminate\\Broadcasting\\BroadcastServiceProvider' => 
    array (
    ),
    'Illuminate\\Bus\\BusServiceProvider' => 
    array (
    ),
    'Illuminate\\Cache\\CacheServiceProvider' => 
    array (
    ),
    'Illuminate\\Foundation\\Providers\\ConsoleSupportServiceProvider' => 
    array (
    ),
    'Illuminate\\Hashing\\HashServiceProvider' => 
    array (
    ),
    'Illuminate\\Mail\\MailServiceProvider' => 
    array (
    ),
    'Illuminate\\Auth\\Passwords\\PasswordResetServiceProvider' => 
    array (
    ),
    'Illuminate\\Pipeline\\PipelineServiceProvider' => 
    array (
    ),
    'Illuminate\\Queue\\QueueServiceProvider' => 
    array (
    ),
    'Illuminate\\Redis\\RedisServiceProvider' => 
    array (
    ),
    'Illuminate\\Translation\\TranslationServiceProvider' => 
    array (
    ),
    'Illuminate\\Validation\\ValidationServiceProvider' => 
    array (
    ),
    'Laravel\\Breeze\\BreezeServiceProvider' => 
    array (
    ),
    'Laravel\\Sail\\SailServiceProvider' => 
    array (
    ),
    'Laravel\\Tinker\\TinkerServiceProvider' => 
    array (
    ),
  ),
);
--- FIN DU FICHIER : ./bootstrap/cache/services.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./config/app.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Support\Facades\Facade;
use Illuminate\Support\ServiceProvider;



return [

    /*
    |--------------------------------------------------------------------------
    | Application Name
    |--------------------------------------------------------------------------
    |
    | This value is the name of your application. This value is used when the
    | framework needs to place the application's name in a notification or
    | any other location as required by the application or its packages.
    |
    */

    'name' => env('APP_NAME', 'Laravel'),

    /*
    |--------------------------------------------------------------------------
    | Application Environment
    |--------------------------------------------------------------------------
    |
    | This value determines the "environment" your application is currently
    | running in. This may determine how you prefer to configure various
    | services the application utilizes. Set this in your ".env" file.
    |
    */

    'env' => env('APP_ENV', 'production'),

    /*
    |--------------------------------------------------------------------------
    | Application Debug Mode
    |--------------------------------------------------------------------------
    |
    | When your application is in debug mode, detailed error messages with
    | stack traces will be shown on every error that occurs within your
    | application. If disabled, a simple generic error page is shown.
    |
    */

    'debug' => (bool) env('APP_DEBUG', false),

    /*
    |--------------------------------------------------------------------------
    | Application URL
    |--------------------------------------------------------------------------
    |
    | This URL is used by the console to properly generate URLs when using
    | the Artisan command line tool. You should set this to the root of
    | your application so that it is used when running Artisan tasks.
    |
    */

    'url' => env('APP_URL', 'http://localhost'),

    'asset_url' => env('ASSET_URL'),

    /*
    |--------------------------------------------------------------------------
    | Application Timezone
    |--------------------------------------------------------------------------
    |
    | Here you may specify the default timezone for your application, which
    | will be used by the PHP date and date-time functions. We have gone
    | ahead and set this to a sensible default for you out of the box.
    |
    */

    'timezone' => 'Africa/Algiers',
    
    /*
    |--------------------------------------------------------------------------
    | Application Locale Configuration
    |--------------------------------------------------------------------------
    |
    | The application locale determines the default locale that will be used
    | by the translation service provider. You are free to set this value
    | to any of the locales which will be supported by the application.
    |
    */

    'locale' => 'fr',

    /*
    |--------------------------------------------------------------------------
    | Application Fallback Locale
    |--------------------------------------------------------------------------
    |
    | The fallback locale determines the locale to use when the current one
    | is not available. You may change the value to correspond to any of
    | the language folders that are provided through your application.
    |
    */

    'fallback_locale' => 'en',

    /*
    |--------------------------------------------------------------------------
    | Faker Locale
    |--------------------------------------------------------------------------
    |
    | This locale will be used by the Faker PHP library when generating fake
    | data for your database seeds. For example, this will be used to get
    | localized telephone numbers, street address information and more.
    |
    */

    'faker_locale' => 'en_US',

    /*
    |--------------------------------------------------------------------------
    | Encryption Key
    |--------------------------------------------------------------------------
    |
    | This key is used by the Illuminate encrypter service and should be set
    | to a random, 32 character string, otherwise these encrypted strings
    | will not be safe. Please do this before deploying an application!
    |
    */

    'key' => env('APP_KEY'),

    'cipher' => 'AES-256-CBC',

    /*
    |--------------------------------------------------------------------------
    | Maintenance Mode Driver
    |--------------------------------------------------------------------------
    |
    | These configuration options determine the driver used to determine and
    | manage Laravel's "maintenance mode" status. The "cache" driver will
    | allow maintenance mode to be controlled across multiple machines.
    |
    | Supported drivers: "file", "cache"
    |
    */

    'maintenance' => [
        'driver' => 'file',
        // 'store' => 'redis',
    ],

    /*
    |--------------------------------------------------------------------------
    | Autoloaded Service Providers
    |--------------------------------------------------------------------------
    |
    | The service providers listed here will be automatically loaded on the
    | request to your application. Feel free to add your own services to
    | this array to grant expanded functionality to your applications.
    |
    */

    'providers' => ServiceProvider::defaultProviders()->merge([
        /*
         * Package Service Providers...
         */

        /*
         * Application Service Providers...
         */
        App\Providers\AppServiceProvider::class,
        App\Providers\AuthServiceProvider::class,
        // App\Providers\BroadcastServiceProvider::class,
        App\Providers\EventServiceProvider::class,
	App\Providers\RouteServiceProvider::class,
	Spatie\Permission\PermissionServiceProvider::class,
	App\Providers\RepositoryServiceProvider::class,
    ])->toArray(),

    /*
    |--------------------------------------------------------------------------
    | Class Aliases
    |--------------------------------------------------------------------------
    |
    | This array of class aliases will be registered when this application
    | is started. However, feel free to register as many as you wish as
    | the aliases are "lazy" loaded so they don't hinder performance.
    |
    */

    'aliases' => Facade::defaultAliases()->merge([
        // 'Example' => App\Facades\Example::class,
    ])->toArray(),

];

--- FIN DU FICHIER : ./config/app.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./config/auth.php
////////////////////////////////////////////////////////////////

<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Authentication Defaults
    |--------------------------------------------------------------------------
    |
    | This option controls the default authentication "guard" and password
    | reset options for your application. You may change these defaults
    | as required, but they're a perfect start for most applications.
    |
    */

    'defaults' => [
        'guard' => 'web',
        'passwords' => 'users',
    ],

    /*
    |--------------------------------------------------------------------------
    | Authentication Guards
    |--------------------------------------------------------------------------
    |
    | Next, you may define every authentication guard for your application.
    | Of course, a great default configuration has been defined for you
    | here which uses session storage and the Eloquent user provider.
    |
    | All authentication drivers have a user provider. This defines how the
    | users are actually retrieved out of your database or other storage
    | mechanisms used by this application to persist your user's data.
    |
    | Supported: "session"
    |
    */

    'guards' => [
        'web' => [
            'driver' => 'session',
            'provider' => 'users',
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | User Providers
    |--------------------------------------------------------------------------
    |
    | All authentication drivers have a user provider. This defines how the
    | users are actually retrieved out of your database or other storage
    | mechanisms used by this application to persist your user's data.
    |
    | If you have multiple user tables or models you may configure multiple
    | sources which represent each model / table. These sources may then
    | be assigned to any extra authentication guards you have defined.
    |
    | Supported: "database", "eloquent"
    |
    */

    'providers' => [
        'users' => [
            'driver' => 'eloquent',
            'model' => App\Models\User::class,
        ],

        // 'users' => [
        //     'driver' => 'database',
        //     'table' => 'users',
        // ],
    ],

    /*
    |--------------------------------------------------------------------------
    | Resetting Passwords
    |--------------------------------------------------------------------------
    |
    | You may specify multiple password reset configurations if you have more
    | than one user table or model in the application and you want to have
    | separate password reset settings based on the specific user types.
    |
    | The expiry time is the number of minutes that each reset token will be
    | considered valid. This security feature keeps tokens short-lived so
    | they have less time to be guessed. You may change this as needed.
    |
    | The throttle setting is the number of seconds a user must wait before
    | generating more password reset tokens. This prevents the user from
    | quickly generating a very large amount of password reset tokens.
    |
    */

    'passwords' => [
        'users' => [
            'provider' => 'users',
            'table' => 'password_reset_tokens',
            'expire' => 60,
            'throttle' => 60,
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | Password Confirmation Timeout
    |--------------------------------------------------------------------------
    |
    | Here you may define the amount of seconds before a password confirmation
    | times out and the user is prompted to re-enter their password via the
    | confirmation screen. By default, the timeout lasts for three hours.
    |
    */

    'password_timeout' => 10800,

];

--- FIN DU FICHIER : ./config/auth.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./config/broadcasting.php
////////////////////////////////////////////////////////////////

<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Default Broadcaster
    |--------------------------------------------------------------------------
    |
    | This option controls the default broadcaster that will be used by the
    | framework when an event needs to be broadcast. You may set this to
    | any of the connections defined in the "connections" array below.
    |
    | Supported: "pusher", "ably", "redis", "log", "null"
    |
    */

    'default' => env('BROADCAST_DRIVER', 'null'),

    /*
    |--------------------------------------------------------------------------
    | Broadcast Connections
    |--------------------------------------------------------------------------
    |
    | Here you may define all of the broadcast connections that will be used
    | to broadcast events to other systems or over websockets. Samples of
    | each available type of connection are provided inside this array.
    |
    */

    'connections' => [

        'pusher' => [
            'driver' => 'pusher',
            'key' => env('PUSHER_APP_KEY'),
            'secret' => env('PUSHER_APP_SECRET'),
            'app_id' => env('PUSHER_APP_ID'),
            'options' => [
                'cluster' => env('PUSHER_APP_CLUSTER'),
                'host' => env('PUSHER_HOST') ?: 'api-'.env('PUSHER_APP_CLUSTER', 'mt1').'.pusher.com',
                'port' => env('PUSHER_PORT', 443),
                'scheme' => env('PUSHER_SCHEME', 'https'),
                'encrypted' => true,
                'useTLS' => env('PUSHER_SCHEME', 'https') === 'https',
            ],
            'client_options' => [
                // Guzzle client options: https://docs.guzzlephp.org/en/stable/request-options.html
            ],
        ],

        'ably' => [
            'driver' => 'ably',
            'key' => env('ABLY_KEY'),
        ],

        'redis' => [
            'driver' => 'redis',
            'connection' => 'default',
        ],

        'log' => [
            'driver' => 'log',
        ],

        'null' => [
            'driver' => 'null',
        ],

    ],

];

--- FIN DU FICHIER : ./config/broadcasting.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./config/cache.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Support\Str;

return [

    /*
    |--------------------------------------------------------------------------
    | Default Cache Store
    |--------------------------------------------------------------------------
    |
    | This option controls the default cache connection that gets used while
    | using this caching library. This connection is used when another is
    | not explicitly specified when executing a given caching function.
    |
    */

    'default' => env('CACHE_DRIVER', 'file'),

    /*
    |--------------------------------------------------------------------------
    | Cache Stores
    |--------------------------------------------------------------------------
    |
    | Here you may define all of the cache "stores" for your application as
    | well as their drivers. You may even define multiple stores for the
    | same cache driver to group types of items stored in your caches.
    |
    | Supported drivers: "apc", "array", "database", "file",
    |         "memcached", "redis", "dynamodb", "octane", "null"
    |
    */

    'stores' => [

        'apc' => [
            'driver' => 'apc',
        ],

        'array' => [
            'driver' => 'array',
            'serialize' => false,
        ],

        'database' => [
            'driver' => 'database',
            'table' => 'cache',
            'connection' => null,
            'lock_connection' => null,
        ],

        'file' => [
            'driver' => 'file',
            'path' => storage_path('framework/cache/data'),
            'lock_path' => storage_path('framework/cache/data'),
        ],

        'memcached' => [
            'driver' => 'memcached',
            'persistent_id' => env('MEMCACHED_PERSISTENT_ID'),
            'sasl' => [
                env('MEMCACHED_USERNAME'),
                env('MEMCACHED_PASSWORD'),
            ],
            'options' => [
                // Memcached::OPT_CONNECT_TIMEOUT => 2000,
            ],
            'servers' => [
                [
                    'host' => env('MEMCACHED_HOST', '127.0.0.1'),
                    'port' => env('MEMCACHED_PORT', 11211),
                    'weight' => 100,
                ],
            ],
        ],

        'redis' => [
            'driver' => 'redis',
            'connection' => 'cache',
            'lock_connection' => 'default',
        ],

        'dynamodb' => [
            'driver' => 'dynamodb',
            'key' => env('AWS_ACCESS_KEY_ID'),
            'secret' => env('AWS_SECRET_ACCESS_KEY'),
            'region' => env('AWS_DEFAULT_REGION', 'us-east-1'),
            'table' => env('DYNAMODB_CACHE_TABLE', 'cache'),
            'endpoint' => env('DYNAMODB_ENDPOINT'),
        ],

        'octane' => [
            'driver' => 'octane',
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Cache Key Prefix
    |--------------------------------------------------------------------------
    |
    | When utilizing the APC, database, memcached, Redis, or DynamoDB cache
    | stores there might be other applications using the same cache. For
    | that reason, you may prefix every cache key to avoid collisions.
    |
    */

    'prefix' => env('CACHE_PREFIX', Str::slug(env('APP_NAME', 'laravel'), '_').'_cache_'),

];

--- FIN DU FICHIER : ./config/cache.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./config/cors.php
////////////////////////////////////////////////////////////////

<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Cross-Origin Resource Sharing (CORS) Configuration
    |--------------------------------------------------------------------------
    |
    | Here you may configure your settings for cross-origin resource sharing
    | or "CORS". This determines what cross-origin operations may execute
    | in web browsers. You are free to adjust these settings as needed.
    |
    | To learn more: https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS
    |
    */

    'paths' => ['api/*', 'sanctum/csrf-cookie'],

    'allowed_methods' => ['*'],

    'allowed_origins' => ['*'],

    'allowed_origins_patterns' => [],

    'allowed_headers' => ['*'],

    'exposed_headers' => [],

    'max_age' => 0,

    'supports_credentials' => false,

];

--- FIN DU FICHIER : ./config/cors.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./config/database.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Support\Str;

return [

    /*
    |--------------------------------------------------------------------------
    | Default Database Connection Name
    |--------------------------------------------------------------------------
    |
    | Here you may specify which of the database connections below you wish
    | to use as your default connection for all database work. Of course
    | you may use many connections at once using the Database library.
    |
    */

    'default' => env('DB_CONNECTION', 'mysql'),

    /*
    |--------------------------------------------------------------------------
    | Database Connections
    |--------------------------------------------------------------------------
    |
    | Here are each of the database connections setup for your application.
    | Of course, examples of configuring each database platform that is
    | supported by Laravel is shown below to make development simple.
    |
    |
    | All database work in Laravel is done through the PHP PDO facilities
    | so make sure you have the driver for your particular database of
    | choice installed on your machine before you begin development.
    |
    */

    'connections' => [

        'sqlite' => [
            'driver' => 'sqlite',
            'url' => env('DATABASE_URL'),
            'database' => env('DB_DATABASE', database_path('database.sqlite')),
            'prefix' => '',
            'foreign_key_constraints' => env('DB_FOREIGN_KEYS', true),
        ],

        'mysql' => [
            'driver' => 'mysql',
            'url' => env('DATABASE_URL'),
            'host' => env('DB_HOST', '127.0.0.1'),
            'port' => env('DB_PORT', '3306'),
            'database' => env('DB_DATABASE', 'forge'),
            'username' => env('DB_USERNAME', 'forge'),
            'password' => env('DB_PASSWORD', ''),
            'unix_socket' => env('DB_SOCKET', ''),
            'charset' => 'utf8mb4',
            'collation' => 'utf8mb4_unicode_ci',
            'prefix' => '',
            'prefix_indexes' => true,
            'strict' => true,
            'engine' => null,
            'options' => extension_loaded('pdo_mysql') ? array_filter([
                PDO::MYSQL_ATTR_SSL_CA => env('MYSQL_ATTR_SSL_CA'),
            ]) : [],
        ],

        'pgsql' => [
            'driver' => 'pgsql',
            'url' => env('DATABASE_URL'),
            'host' => env('DB_HOST', '127.0.0.1'),
            'port' => env('DB_PORT', '5432'),
            'database' => env('DB_DATABASE', 'forge'),
            'username' => env('DB_USERNAME', 'forge'),
            'password' => env('DB_PASSWORD', ''),
            'charset' => 'utf8',
            'prefix' => '',
            'prefix_indexes' => true,
            'search_path' => 'public',
            'sslmode' => 'prefer',
        ],

        'sqlsrv' => [
            'driver' => 'sqlsrv',
            'url' => env('DATABASE_URL'),
            'host' => env('DB_HOST', 'localhost'),
            'port' => env('DB_PORT', '1433'),
            'database' => env('DB_DATABASE', 'forge'),
            'username' => env('DB_USERNAME', 'forge'),
            'password' => env('DB_PASSWORD', ''),
            'charset' => 'utf8',
            'prefix' => '',
            'prefix_indexes' => true,
            // 'encrypt' => env('DB_ENCRYPT', 'yes'),
            // 'trust_server_certificate' => env('DB_TRUST_SERVER_CERTIFICATE', 'false'),
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Migration Repository Table
    |--------------------------------------------------------------------------
    |
    | This table keeps track of all the migrations that have already run for
    | your application. Using this information, we can determine which of
    | the migrations on disk haven't actually been run in the database.
    |
    */

    'migrations' => 'migrations',

    /*
    |--------------------------------------------------------------------------
    | Redis Databases
    |--------------------------------------------------------------------------
    |
    | Redis is an open source, fast, and advanced key-value store that also
    | provides a richer body of commands than a typical key-value system
    | such as APC or Memcached. Laravel makes it easy to dig right in.
    |
    */

    'redis' => [

        'client' => env('REDIS_CLIENT', 'phpredis'),

        'options' => [
            'cluster' => env('REDIS_CLUSTER', 'redis'),
            'prefix' => env('REDIS_PREFIX', Str::slug(env('APP_NAME', 'laravel'), '_').'_database_'),
        ],

        'default' => [
            'url' => env('REDIS_URL'),
            'host' => env('REDIS_HOST', '127.0.0.1'),
            'username' => env('REDIS_USERNAME'),
            'password' => env('REDIS_PASSWORD'),
            'port' => env('REDIS_PORT', '6379'),
            'database' => env('REDIS_DB', '0'),
        ],

        'cache' => [
            'url' => env('REDIS_URL'),
            'host' => env('REDIS_HOST', '127.0.0.1'),
            'username' => env('REDIS_USERNAME'),
            'password' => env('REDIS_PASSWORD'),
            'port' => env('REDIS_PORT', '6379'),
            'database' => env('REDIS_CACHE_DB', '1'),
        ],

    ],

];

--- FIN DU FICHIER : ./config/database.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./config/filesystems.php
////////////////////////////////////////////////////////////////

<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Default Filesystem Disk
    |--------------------------------------------------------------------------
    |
    | Here you may specify the default filesystem disk that should be used
    | by the framework. The "local" disk, as well as a variety of cloud
    | based disks are available to your application. Just store away!
    |
    */

    'default' => env('FILESYSTEM_DISK', 'local'),

    /*
    |--------------------------------------------------------------------------
    | Filesystem Disks
    |--------------------------------------------------------------------------
    |
    | Here you may configure as many filesystem "disks" as you wish, and you
    | may even configure multiple disks of the same driver. Defaults have
    | been set up for each driver as an example of the required values.
    |
    | Supported Drivers: "local", "ftp", "sftp", "s3"
    |
    */

    'disks' => [

        'local' => [
            'driver' => 'local',
            'root' => storage_path('app'),
            'throw' => false,
        ],

        'public' => [
            'driver' => 'local',
            'root' => storage_path('app/public'),
            'url' => env('APP_URL').'/storage',
            'visibility' => 'public',
            'throw' => false,
        ],

        's3' => [
            'driver' => 's3',
            'key' => env('AWS_ACCESS_KEY_ID'),
            'secret' => env('AWS_SECRET_ACCESS_KEY'),
            'region' => env('AWS_DEFAULT_REGION'),
            'bucket' => env('AWS_BUCKET'),
            'url' => env('AWS_URL'),
            'endpoint' => env('AWS_ENDPOINT'),
            'use_path_style_endpoint' => env('AWS_USE_PATH_STYLE_ENDPOINT', false),
            'throw' => false,
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Symbolic Links
    |--------------------------------------------------------------------------
    |
    | Here you may configure the symbolic links that will be created when the
    | `storage:link` Artisan command is executed. The array keys should be
    | the locations of the links and the values should be their targets.
    |
    */

    'links' => [
        public_path('storage') => storage_path('app/public'),
    ],

];

--- FIN DU FICHIER : ./config/filesystems.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./config/hashing.php
////////////////////////////////////////////////////////////////

<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Default Hash Driver
    |--------------------------------------------------------------------------
    |
    | This option controls the default hash driver that will be used to hash
    | passwords for your application. By default, the bcrypt algorithm is
    | used; however, you remain free to modify this option if you wish.
    |
    | Supported: "bcrypt", "argon", "argon2id"
    |
    */

    'driver' => 'bcrypt',

    /*
    |--------------------------------------------------------------------------
    | Bcrypt Options
    |--------------------------------------------------------------------------
    |
    | Here you may specify the configuration options that should be used when
    | passwords are hashed using the Bcrypt algorithm. This will allow you
    | to control the amount of time it takes to hash the given password.
    |
    */

    'bcrypt' => [
        'rounds' => env('BCRYPT_ROUNDS', 12),
        'verify' => true,
    ],

    /*
    |--------------------------------------------------------------------------
    | Argon Options
    |--------------------------------------------------------------------------
    |
    | Here you may specify the configuration options that should be used when
    | passwords are hashed using the Argon algorithm. These will allow you
    | to control the amount of time it takes to hash the given password.
    |
    */

    'argon' => [
        'memory' => 65536,
        'threads' => 1,
        'time' => 4,
        'verify' => true,
    ],

];

--- FIN DU FICHIER : ./config/hashing.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./config/logging.php
////////////////////////////////////////////////////////////////

<?php

use Monolog\Handler\NullHandler;
use Monolog\Handler\StreamHandler;
use Monolog\Handler\SyslogUdpHandler;
use Monolog\Processor\PsrLogMessageProcessor;

return [

    /*
    |--------------------------------------------------------------------------
    | Default Log Channel
    |--------------------------------------------------------------------------
    |
    | This option defines the default log channel that gets used when writing
    | messages to the logs. The name specified in this option should match
    | one of the channels defined in the "channels" configuration array.
    |
    */

    'default' => env('LOG_CHANNEL', 'stack'),

    /*
    |--------------------------------------------------------------------------
    | Deprecations Log Channel
    |--------------------------------------------------------------------------
    |
    | This option controls the log channel that should be used to log warnings
    | regarding deprecated PHP and library features. This allows you to get
    | your application ready for upcoming major versions of dependencies.
    |
    */

    'deprecations' => [
        'channel' => env('LOG_DEPRECATIONS_CHANNEL', 'null'),
        'trace' => false,
    ],

    /*
    |--------------------------------------------------------------------------
    | Log Channels
    |--------------------------------------------------------------------------
    |
    | Here you may configure the log channels for your application. Out of
    | the box, Laravel uses the Monolog PHP logging library. This gives
    | you a variety of powerful log handlers / formatters to utilize.
    |
    | Available Drivers: "single", "daily", "slack", "syslog",
    |                    "errorlog", "monolog",
    |                    "custom", "stack"
    |
    */

    'channels' => [
        'stack' => [
            'driver' => 'stack',
            'channels' => ['single'],
            'ignore_exceptions' => false,
        ],

        'single' => [
            'driver' => 'single',
            'path' => storage_path('logs/laravel.log'),
            'level' => env('LOG_LEVEL', 'debug'),
            'replace_placeholders' => true,
        ],

        'daily' => [
            'driver' => 'daily',
            'path' => storage_path('logs/laravel.log'),
            'level' => env('LOG_LEVEL', 'debug'),
            'days' => 14,
            'replace_placeholders' => true,
        ],

        'slack' => [
            'driver' => 'slack',
            'url' => env('LOG_SLACK_WEBHOOK_URL'),
            'username' => 'Laravel Log',
            'emoji' => ':boom:',
            'level' => env('LOG_LEVEL', 'critical'),
            'replace_placeholders' => true,
        ],

        'papertrail' => [
            'driver' => 'monolog',
            'level' => env('LOG_LEVEL', 'debug'),
            'handler' => env('LOG_PAPERTRAIL_HANDLER', SyslogUdpHandler::class),
            'handler_with' => [
                'host' => env('PAPERTRAIL_URL'),
                'port' => env('PAPERTRAIL_PORT'),
                'connectionString' => 'tls://'.env('PAPERTRAIL_URL').':'.env('PAPERTRAIL_PORT'),
            ],
            'processors' => [PsrLogMessageProcessor::class],
        ],

        'stderr' => [
            'driver' => 'monolog',
            'level' => env('LOG_LEVEL', 'debug'),
            'handler' => StreamHandler::class,
            'formatter' => env('LOG_STDERR_FORMATTER'),
            'with' => [
                'stream' => 'php://stderr',
            ],
            'processors' => [PsrLogMessageProcessor::class],
        ],

        'syslog' => [
            'driver' => 'syslog',
            'level' => env('LOG_LEVEL', 'debug'),
            'facility' => LOG_USER,
            'replace_placeholders' => true,
        ],

        'errorlog' => [
            'driver' => 'errorlog',
            'level' => env('LOG_LEVEL', 'debug'),
            'replace_placeholders' => true,
        ],

        'null' => [
            'driver' => 'monolog',
            'handler' => NullHandler::class,
        ],

        'emergency' => [
            'path' => storage_path('logs/laravel.log'),
        ],
    ],

];

--- FIN DU FICHIER : ./config/logging.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./config/mail.php
////////////////////////////////////////////////////////////////

<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Default Mailer
    |--------------------------------------------------------------------------
    |
    | This option controls the default mailer that is used to send any email
    | messages sent by your application. Alternative mailers may be setup
    | and used as needed; however, this mailer will be used by default.
    |
    */

    'default' => env('MAIL_MAILER', 'smtp'),

    /*
    |--------------------------------------------------------------------------
    | Mailer Configurations
    |--------------------------------------------------------------------------
    |
    | Here you may configure all of the mailers used by your application plus
    | their respective settings. Several examples have been configured for
    | you and you are free to add your own as your application requires.
    |
    | Laravel supports a variety of mail "transport" drivers to be used while
    | sending an e-mail. You will specify which one you are using for your
    | mailers below. You are free to add additional mailers as required.
    |
    | Supported: "smtp", "sendmail", "mailgun", "ses", "ses-v2",
    |            "postmark", "log", "array", "failover", "roundrobin"
    |
    */

    'mailers' => [
        'smtp' => [
            'transport' => 'smtp',
            'url' => env('MAIL_URL'),
            'host' => env('MAIL_HOST', 'smtp.mailgun.org'),
            'port' => env('MAIL_PORT', 587),
            'encryption' => env('MAIL_ENCRYPTION', 'tls'),
            'username' => env('MAIL_USERNAME'),
            'password' => env('MAIL_PASSWORD'),
            'timeout' => null,
            'local_domain' => env('MAIL_EHLO_DOMAIN'),
        ],

        'ses' => [
            'transport' => 'ses',
        ],

        'postmark' => [
            'transport' => 'postmark',
            // 'message_stream_id' => null,
            // 'client' => [
            //     'timeout' => 5,
            // ],
        ],

        'mailgun' => [
            'transport' => 'mailgun',
            // 'client' => [
            //     'timeout' => 5,
            // ],
        ],

        'sendmail' => [
            'transport' => 'sendmail',
            'path' => env('MAIL_SENDMAIL_PATH', '/usr/sbin/sendmail -bs -i'),
        ],

        'log' => [
            'transport' => 'log',
            'channel' => env('MAIL_LOG_CHANNEL'),
        ],

        'array' => [
            'transport' => 'array',
        ],

        'failover' => [
            'transport' => 'failover',
            'mailers' => [
                'smtp',
                'log',
            ],
        ],

        'roundrobin' => [
            'transport' => 'roundrobin',
            'mailers' => [
                'ses',
                'postmark',
            ],
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | Global "From" Address
    |--------------------------------------------------------------------------
    |
    | You may wish for all e-mails sent by your application to be sent from
    | the same address. Here, you may specify a name and address that is
    | used globally for all e-mails that are sent by your application.
    |
    */

    'from' => [
        'address' => env('MAIL_FROM_ADDRESS', 'hello@example.com'),
        'name' => env('MAIL_FROM_NAME', 'Example'),
    ],

    /*
    |--------------------------------------------------------------------------
    | Markdown Mail Settings
    |--------------------------------------------------------------------------
    |
    | If you are using Markdown based email rendering, you may configure your
    | theme and component paths here, allowing you to customize the design
    | of the emails. Or, you may simply stick with the Laravel defaults!
    |
    */

    'markdown' => [
        'theme' => 'default',

        'paths' => [
            resource_path('views/vendor/mail'),
        ],
    ],

];

--- FIN DU FICHIER : ./config/mail.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./config/permission.php
////////////////////////////////////////////////////////////////

<?php

return [

    'models' => [

        /*
         * When using the "HasPermissions" trait from this package, we need to know which
         * Eloquent model should be used to retrieve your permissions. Of course, it
         * is often just the "Permission" model but you may use whatever you like.
         *
         * The model you want to use as a Permission model needs to implement the
         * `Spatie\Permission\Contracts\Permission` contract.
         */

        'permission' => Spatie\Permission\Models\Permission::class,

        /*
         * When using the "HasRoles" trait from this package, we need to know which
         * Eloquent model should be used to retrieve your roles. Of course, it
         * is often just the "Role" model but you may use whatever you like.
         *
         * The model you want to use as a Role model needs to implement the
         * `Spatie\Permission\Contracts\Role` contract.
         */

        'role' => Spatie\Permission\Models\Role::class,

    ],

    'table_names' => [

        /*
         * When using the "HasRoles" trait from this package, we need to know which
         * table should be used to retrieve your roles. We have chosen a basic
         * default value but you may easily change it to any table you like.
         */

        'roles' => 'roles',

        /*
         * When using the "HasPermissions" trait from this package, we need to know which
         * table should be used to retrieve your permissions. We have chosen a basic
         * default value but you may easily change it to any table you like.
         */

        'permissions' => 'permissions',

        /*
         * When using the "HasPermissions" trait from this package, we need to know which
         * table should be used to retrieve your models permissions. We have chosen a
         * basic default value but you may easily change it to any table you like.
         */

        'model_has_permissions' => 'model_has_permissions',

        /*
         * When using the "HasRoles" trait from this package, we need to know which
         * table should be used to retrieve your models roles. We have chosen a
         * basic default value but you may easily change it to any table you like.
         */

        'model_has_roles' => 'model_has_roles',

        /*
         * When using the "HasRoles" trait from this package, we need to know which
         * table should be used to retrieve your roles permissions. We have chosen a
         * basic default value but you may easily change it to any table you like.
         */

        'role_has_permissions' => 'role_has_permissions',
    ],

    'column_names' => [
        /*
         * Change this if you want to name the related pivots other than defaults
         */
        'role_pivot_key' => null, // default 'role_id',
        'permission_pivot_key' => null, // default 'permission_id',

        /*
         * Change this if you want to name the related model primary key other than
         * `model_id`.
         *
         * For example, this would be nice if your primary keys are all UUIDs. In
         * that case, name this `model_uuid`.
         */

        'model_morph_key' => 'model_id',

        /*
         * Change this if you want to use the teams feature and your related model's
         * foreign key is other than `team_id`.
         */

        'team_foreign_key' => 'team_id',
    ],

    /*
     * When set to true, the method for checking permissions will be registered on the gate.
     * Set this to false if you want to implement custom logic for checking permissions.
     */

    'register_permission_check_method' => true,

    /*
     * When set to true, Laravel\Octane\Events\OperationTerminated event listener will be registered
     * this will refresh permissions on every TickTerminated, TaskTerminated and RequestTerminated
     * NOTE: This should not be needed in most cases, but an Octane/Vapor combination benefited from it.
     */
    'register_octane_reset_listener' => false,

    /*
     * Events will fire when a role or permission is assigned/unassigned:
     * \Spatie\Permission\Events\RoleAttached
     * \Spatie\Permission\Events\RoleDetached
     * \Spatie\Permission\Events\PermissionAttached
     * \Spatie\Permission\Events\PermissionDetached
     *
     * To enable, set to true, and then create listeners to watch these events.
     */
    'events_enabled' => false,

    /*
     * Teams Feature.
     * When set to true the package implements teams using the 'team_foreign_key'.
     * If you want the migrations to register the 'team_foreign_key', you must
     * set this to true before doing the migration.
     * If you already did the migration then you must make a new migration to also
     * add 'team_foreign_key' to 'roles', 'model_has_roles', and 'model_has_permissions'
     * (view the latest version of this package's migration file)
     */

    'teams' => false,

    /*
     * The class to use to resolve the permissions team id
     */
    'team_resolver' => \Spatie\Permission\DefaultTeamResolver::class,

    /*
     * Passport Client Credentials Grant
     * When set to true the package will use Passports Client to check permissions
     */

    'use_passport_client_credentials' => false,

    /*
     * When set to true, the required permission names are added to exception messages.
     * This could be considered an information leak in some contexts, so the default
     * setting is false here for optimum safety.
     */

    'display_permission_in_exception' => false,

    /*
     * When set to true, the required role names are added to exception messages.
     * This could be considered an information leak in some contexts, so the default
     * setting is false here for optimum safety.
     */

    'display_role_in_exception' => false,

    /*
     * By default wildcard permission lookups are disabled.
     * See documentation to understand supported syntax.
     */

    'enable_wildcard_permission' => false,

    /*
     * The class to use for interpreting wildcard permissions.
     * If you need to modify delimiters, override the class and specify its name here.
     */
    // 'wildcard_permission' => Spatie\Permission\WildcardPermission::class,

    /* Cache-specific settings */

    'cache' => [

        /*
         * By default all permissions are cached for 24 hours to speed up performance.
         * When permissions or roles are updated the cache is flushed automatically.
         */

        'expiration_time' => \DateInterval::createFromDateString('24 hours'),

        /*
         * The cache key used to store all permissions.
         */

        'key' => 'spatie.permission.cache',

        /*
         * You may optionally indicate a specific cache driver to use for permission and
         * role caching using any of the `store` drivers listed in the cache.php config
         * file. Using 'default' here means to use the `default` set in cache.php.
         */

        'store' => 'default',
    ],
];

--- FIN DU FICHIER : ./config/permission.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./config/queue.php
////////////////////////////////////////////////////////////////

<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Default Queue Connection Name
    |--------------------------------------------------------------------------
    |
    | Laravel's queue API supports an assortment of back-ends via a single
    | API, giving you convenient access to each back-end using the same
    | syntax for every one. Here you may define a default connection.
    |
    */

    'default' => env('QUEUE_CONNECTION', 'sync'),

    /*
    |--------------------------------------------------------------------------
    | Queue Connections
    |--------------------------------------------------------------------------
    |
    | Here you may configure the connection information for each server that
    | is used by your application. A default configuration has been added
    | for each back-end shipped with Laravel. You are free to add more.
    |
    | Drivers: "sync", "database", "beanstalkd", "sqs", "redis", "null"
    |
    */

    'connections' => [

        'sync' => [
            'driver' => 'sync',
        ],

        'database' => [
            'driver' => 'database',
            'table' => 'jobs',
            'queue' => 'default',
            'retry_after' => 90,
            'after_commit' => false,
        ],

        'beanstalkd' => [
            'driver' => 'beanstalkd',
            'host' => 'localhost',
            'queue' => 'default',
            'retry_after' => 90,
            'block_for' => 0,
            'after_commit' => false,
        ],

        'sqs' => [
            'driver' => 'sqs',
            'key' => env('AWS_ACCESS_KEY_ID'),
            'secret' => env('AWS_SECRET_ACCESS_KEY'),
            'prefix' => env('SQS_PREFIX', 'https://sqs.us-east-1.amazonaws.com/your-account-id'),
            'queue' => env('SQS_QUEUE', 'default'),
            'suffix' => env('SQS_SUFFIX'),
            'region' => env('AWS_DEFAULT_REGION', 'us-east-1'),
            'after_commit' => false,
        ],

        'redis' => [
            'driver' => 'redis',
            'connection' => 'default',
            'queue' => env('REDIS_QUEUE', 'default'),
            'retry_after' => 90,
            'block_for' => null,
            'after_commit' => false,
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Job Batching
    |--------------------------------------------------------------------------
    |
    | The following options configure the database and table that store job
    | batching information. These options can be updated to any database
    | connection and table which has been defined by your application.
    |
    */

    'batching' => [
        'database' => env('DB_CONNECTION', 'mysql'),
        'table' => 'job_batches',
    ],

    /*
    |--------------------------------------------------------------------------
    | Failed Queue Jobs
    |--------------------------------------------------------------------------
    |
    | These options configure the behavior of failed queue job logging so you
    | can control which database and table are used to store the jobs that
    | have failed. You may change them to any database / table you wish.
    |
    */

    'failed' => [
        'driver' => env('QUEUE_FAILED_DRIVER', 'database-uuids'),
        'database' => env('DB_CONNECTION', 'mysql'),
        'table' => 'failed_jobs',
    ],

];

--- FIN DU FICHIER : ./config/queue.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./config/sanctum.php
////////////////////////////////////////////////////////////////

<?php

use Laravel\Sanctum\Sanctum;

return [

    /*
    |--------------------------------------------------------------------------
    | Stateful Domains
    |--------------------------------------------------------------------------
    |
    | Requests from the following domains / hosts will receive stateful API
    | authentication cookies. Typically, these should include your local
    | and production domains which access your API via a frontend SPA.
    |
    */

    'stateful' => explode(',', env('SANCTUM_STATEFUL_DOMAINS', sprintf(
        '%s%s',
        'localhost,localhost:3000,127.0.0.1,127.0.0.1:8000,::1',
        Sanctum::currentApplicationUrlWithPort()
    ))),

    /*
    |--------------------------------------------------------------------------
    | Sanctum Guards
    |--------------------------------------------------------------------------
    |
    | This array contains the authentication guards that will be checked when
    | Sanctum is trying to authenticate a request. If none of these guards
    | are able to authenticate the request, Sanctum will use the bearer
    | token that's present on an incoming request for authentication.
    |
    */

    'guard' => ['web'],

    /*
    |--------------------------------------------------------------------------
    | Expiration Minutes
    |--------------------------------------------------------------------------
    |
    | This value controls the number of minutes until an issued token will be
    | considered expired. This will override any values set in the token's
    | "expires_at" attribute, but first-party sessions are not affected.
    |
    */

    'expiration' => null,

    /*
    |--------------------------------------------------------------------------
    | Token Prefix
    |--------------------------------------------------------------------------
    |
    | Sanctum can prefix new tokens in order to take advantage of numerous
    | security scanning initiatives maintained by open source platforms
    | that notify developers if they commit tokens into repositories.
    |
    | See: https://docs.github.com/en/code-security/secret-scanning/about-secret-scanning
    |
    */

    'token_prefix' => env('SANCTUM_TOKEN_PREFIX', ''),

    /*
    |--------------------------------------------------------------------------
    | Sanctum Middleware
    |--------------------------------------------------------------------------
    |
    | When authenticating your first-party SPA with Sanctum you may need to
    | customize some of the middleware Sanctum uses while processing the
    | request. You may change the middleware listed below as required.
    |
    */

    'middleware' => [
        'authenticate_session' => Laravel\Sanctum\Http\Middleware\AuthenticateSession::class,
        'encrypt_cookies' => App\Http\Middleware\EncryptCookies::class,
        'verify_csrf_token' => App\Http\Middleware\VerifyCsrfToken::class,
    ],

];

--- FIN DU FICHIER : ./config/sanctum.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./config/services.php
////////////////////////////////////////////////////////////////

<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Third Party Services
    |--------------------------------------------------------------------------
    |
    | This file is for storing the credentials for third party services such
    | as Mailgun, Postmark, AWS and more. This file provides the de facto
    | location for this type of information, allowing packages to have
    | a conventional file to locate the various service credentials.
    |
    */

    'mailgun' => [
        'domain' => env('MAILGUN_DOMAIN'),
        'secret' => env('MAILGUN_SECRET'),
        'endpoint' => env('MAILGUN_ENDPOINT', 'api.mailgun.net'),
        'scheme' => 'https',
    ],

    'postmark' => [
        'token' => env('POSTMARK_TOKEN'),
    ],

    'ses' => [
        'key' => env('AWS_ACCESS_KEY_ID'),
        'secret' => env('AWS_SECRET_ACCESS_KEY'),
        'region' => env('AWS_DEFAULT_REGION', 'us-east-1'),
    ],
    'pdf' => [
        'url' => env('PDF_SERVICE_URL', 'http://pdf-service:3000/generate-pdf'),
        'health_url' => env('PDF_SERVICE_HEALTH_URL', 'http://pdf-service:3000/health'),
        'timeout' => env('PDF_SERVICE_TIMEOUT', 120),
        'retries' => env('PDF_SERVICE_RETRIES', 3),
    ],

];

--- FIN DU FICHIER : ./config/services.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./config/session.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Support\Str;

return [

    /*
    |--------------------------------------------------------------------------
    | Default Session Driver
    |--------------------------------------------------------------------------
    |
    | This option controls the default session "driver" that will be used on
    | requests. By default, we will use the lightweight native driver but
    | you may specify any of the other wonderful drivers provided here.
    |
    | Supported: "file", "cookie", "database", "apc",
    |            "memcached", "redis", "dynamodb", "array"
    |
    */

    'driver' => env('SESSION_DRIVER', 'file'),

    /*
    |--------------------------------------------------------------------------
    | Session Lifetime
    |--------------------------------------------------------------------------
    |
    | Here you may specify the number of minutes that you wish the session
    | to be allowed to remain idle before it expires. If you want them
    | to immediately expire on the browser closing, set that option.
    |
    */

    'lifetime' => env('SESSION_LIFETIME', 120),

    'expire_on_close' => false,

    /*
    |--------------------------------------------------------------------------
    | Session Encryption
    |--------------------------------------------------------------------------
    |
    | This option allows you to easily specify that all of your session data
    | should be encrypted before it is stored. All encryption will be run
    | automatically by Laravel and you can use the Session like normal.
    |
    */

    'encrypt' => false,

    /*
    |--------------------------------------------------------------------------
    | Session File Location
    |--------------------------------------------------------------------------
    |
    | When using the native session driver, we need a location where session
    | files may be stored. A default has been set for you but a different
    | location may be specified. This is only needed for file sessions.
    |
    */

    'files' => storage_path('framework/sessions'),

    /*
    |--------------------------------------------------------------------------
    | Session Database Connection
    |--------------------------------------------------------------------------
    |
    | When using the "database" or "redis" session drivers, you may specify a
    | connection that should be used to manage these sessions. This should
    | correspond to a connection in your database configuration options.
    |
    */

    'connection' => env('SESSION_CONNECTION'),

    /*
    |--------------------------------------------------------------------------
    | Session Database Table
    |--------------------------------------------------------------------------
    |
    | When using the "database" session driver, you may specify the table we
    | should use to manage the sessions. Of course, a sensible default is
    | provided for you; however, you are free to change this as needed.
    |
    */

    'table' => 'sessions',

    /*
    |--------------------------------------------------------------------------
    | Session Cache Store
    |--------------------------------------------------------------------------
    |
    | While using one of the framework's cache driven session backends you may
    | list a cache store that should be used for these sessions. This value
    | must match with one of the application's configured cache "stores".
    |
    | Affects: "apc", "dynamodb", "memcached", "redis"
    |
    */

    'store' => env('SESSION_STORE'),

    /*
    |--------------------------------------------------------------------------
    | Session Sweeping Lottery
    |--------------------------------------------------------------------------
    |
    | Some session drivers must manually sweep their storage location to get
    | rid of old sessions from storage. Here are the chances that it will
    | happen on a given request. By default, the odds are 2 out of 100.
    |
    */

    'lottery' => [2, 100],

    /*
    |--------------------------------------------------------------------------
    | Session Cookie Name
    |--------------------------------------------------------------------------
    |
    | Here you may change the name of the cookie used to identify a session
    | instance by ID. The name specified here will get used every time a
    | new session cookie is created by the framework for every driver.
    |
    */

    'cookie' => env(
        'SESSION_COOKIE',
        Str::slug(env('APP_NAME', 'laravel'), '_').'_session'
    ),

    /*
    |--------------------------------------------------------------------------
    | Session Cookie Path
    |--------------------------------------------------------------------------
    |
    | The session cookie path determines the path for which the cookie will
    | be regarded as available. Typically, this will be the root path of
    | your application but you are free to change this when necessary.
    |
    */

    'path' => '/',

    /*
    |--------------------------------------------------------------------------
    | Session Cookie Domain
    |--------------------------------------------------------------------------
    |
    | Here you may change the domain of the cookie used to identify a session
    | in your application. This will determine which domains the cookie is
    | available to in your application. A sensible default has been set.
    |
    */

    'domain' => env('SESSION_DOMAIN'),

    /*
    |--------------------------------------------------------------------------
    | HTTPS Only Cookies
    |--------------------------------------------------------------------------
    |
    | By setting this option to true, session cookies will only be sent back
    | to the server if the browser has a HTTPS connection. This will keep
    | the cookie from being sent to you when it can't be done securely.
    |
    */

    'secure' => env('SESSION_SECURE_COOKIE'),

    /*
    |--------------------------------------------------------------------------
    | HTTP Access Only
    |--------------------------------------------------------------------------
    |
    | Setting this value to true will prevent JavaScript from accessing the
    | value of the cookie and the cookie will only be accessible through
    | the HTTP protocol. You are free to modify this option if needed.
    |
    */

    'http_only' => true,

    /*
    |--------------------------------------------------------------------------
    | Same-Site Cookies
    |--------------------------------------------------------------------------
    |
    | This option determines how your cookies behave when cross-site requests
    | take place, and can be used to mitigate CSRF attacks. By default, we
    | will set this value to "lax" since this is a secure default value.
    |
    | Supported: "lax", "strict", "none", null
    |
    */

    'same_site' => 'lax',

    /*
    |--------------------------------------------------------------------------
    | Partitioned Cookies
    |--------------------------------------------------------------------------
    |
    | Setting this value to true will tie the cookie to the top-level site for
    | a cross-site context. Partitioned cookies are accepted by the browser
    | when flagged "secure" and the Same-Site attribute is set to "none".
    |
    */

    'partitioned' => false,

];

--- FIN DU FICHIER : ./config/session.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./config/view.php
////////////////////////////////////////////////////////////////

<?php

return [

    /*
    |--------------------------------------------------------------------------
    | View Storage Paths
    |--------------------------------------------------------------------------
    |
    | Most templating systems load templates from disk. Here you may specify
    | an array of paths that should be checked for your views. Of course
    | the usual Laravel view path has already been registered for you.
    |
    */

    'paths' => [
        resource_path('views'),
    ],

    /*
    |--------------------------------------------------------------------------
    | Compiled View Path
    |--------------------------------------------------------------------------
    |
    | This option determines where all the compiled Blade templates will be
    | stored for your application. Typically, this is within the storage
    | directory. However, as usual, you are free to change this value.
    |
    */

    'compiled' => env(
        'VIEW_COMPILED_PATH',
        realpath(storage_path('framework/views'))
    ),

];

--- FIN DU FICHIER : ./config/view.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/.gitignore
////////////////////////////////////////////////////////////////

*.sqlite*

--- FIN DU FICHIER : ./database/.gitignore ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/factories/DriverFactory.php
////////////////////////////////////////////////////////////////

<?php

namespace Database\Factories;

use App\Models\DriverStatus;
use Illuminate\Database\Eloquent\Factories\Factory;

class DriverFactory extends Factory
{
    /**
     * Define the model's default state.
     *
     * @return array<string, mixed>
     */
    public function definition(): array
    {
        // On récupère un statut "Actif" ou "Disponible" au hasard pour le chauffeur
        $activeStatus = DriverStatus::whereIn('name', ['Actif', 'Disponible'])->inRandomOrder()->first();

        return [
            'first_name' => fake()->firstName(),
            'last_name' => fake()->lastName(),
            'employee_number' => fake()->unique()->numerify('EMP-#####'),
            'personal_phone' => fake()->unique()->phoneNumber(),
            'license_number' => fake()->unique()->numerify('LN-########'),
            'status_id' => $activeStatus->id,
            'birth_date' => fake()->dateTimeBetween('-50 years', '-22 years'),
            'recruitment_date' => fake()->dateTimeBetween('-5 years', 'now'),
            // ... vous pouvez ajouter d'autres champs si nécessaire
        ];
    }
}

--- FIN DU FICHIER : ./database/factories/DriverFactory.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/factories/OrganizationFactory.php
////////////////////////////////////////////////////////////////

<?php

namespace Database\Factories;

use Illuminate\Database\Eloquent\Factories\Factory;
use Illuminate\Support\Str;

/**
 * @extends \Illuminate\Database\Eloquent\Factories\Factory<\App\Models\Organization>
 */
class OrganizationFactory extends Factory
{
    /**
     * Define the model's default state.
     *
     * @return array<string, mixed>
     */
    public function definition(): array
    {
        return [
            'uuid' => (string) Str::uuid(),
            'name' => $this->faker->company(),
            'address' => $this->faker->address(),
            'contact_email' => $this->faker->unique()->safeEmail(),
            'status' => 'active',
        ];
    }
}

--- FIN DU FICHIER : ./database/factories/OrganizationFactory.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/factories/UserFactory.php
////////////////////////////////////////////////////////////////

<?php

namespace Database\Factories;

use Illuminate\Database\Eloquent\Factories\Factory;
use Illuminate\Support\Facades\Hash;
use Illuminate\Support\Str;

/**
 * @extends \Illuminate\Database\Eloquent\Factories\Factory<\App\Models\User>
 */
class UserFactory extends Factory
{
    /**
     * The current password being used by the factory.
     */
    protected static ?string $password;

    /**
     * Define the model's default state.
     *
     * @return array<string, mixed>
     */
    public function definition(): array
    {
        return [
            'name' => fake()->name(),
            'email' => fake()->unique()->safeEmail(),
            'email_verified_at' => now(),
            'password' => static::$password ??= Hash::make('password'),
            'remember_token' => Str::random(10),
        ];
    }

    /**
     * Indicate that the model's email address should be unverified.
     */
    public function unverified(): static
    {
        return $this->state(fn (array $attributes) => [
            'email_verified_at' => null,
        ]);
    }
}

--- FIN DU FICHIER : ./database/factories/UserFactory.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/factories/VehicleFactory.php
////////////////////////////////////////////////////////////////

<?php

namespace Database\Factories;

use App\Models\FuelType;
use App\Models\TransmissionType;
use App\Models\VehicleStatus;
use App\Models\VehicleType;
use Illuminate\Database\Eloquent\Factories\Factory;

/**
 * @extends \Illuminate\Database\Eloquent\Factories\Factory<\App\Models\Vehicle>
 */
class VehicleFactory extends Factory
{
    /**
     * Define the model's default state.
     *
     * @return array<string, mixed>
     */
    public function definition(): array
    {
        $initialMileage = $this->faker->numberBetween(5000, 50000);

        return [
            'registration_plate' => $this->faker->unique()->regexify('[A-Z]{2}-[0-9]{3}-[A-Z]{2}'),
            'vin' => $this->faker->unique()->bothify('*****************'),
            'brand' => $this->faker->randomElement(['Renault', 'Peugeot', 'Dacia', 'Volkswagen', 'Toyota']),
            'model' => $this->faker->randomElement(['Clio', '208', 'Sandero', 'Golf', 'Yaris']),
            'color' => $this->faker->safeColorName(),
            'manufacturing_year' => $this->faker->numberBetween(2015, now()->year),
            'initial_mileage' => $initialMileage,
            'current_mileage' => $initialMileage + $this->faker->numberBetween(1000, 50000),
            'purchase_price' => $this->faker->randomFloat(2, 1000000, 5000000),
            'current_value' => $this->faker->randomFloat(2, 800000, 4000000),

            // On récupère des IDs valides depuis les tables de référence
            'vehicle_type_id' => VehicleType::inRandomOrder()->first()->id,
            'fuel_type_id' => FuelType::inRandomOrder()->first()->id,
            'transmission_type_id' => TransmissionType::inRandomOrder()->first()->id,
            'status_id' => VehicleStatus::where('name', 'Parking')->first()->id,
        ];
    }
}
--- FIN DU FICHIER : ./database/factories/VehicleFactory.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2014_10_12_000000_create_users_table.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('users', function (Blueprint $table) {
            $table->id();
            $table->string('name');
            $table->string('email')->unique();
            $table->timestamp('email_verified_at')->nullable();
            $table->string('password');
            $table->rememberToken();
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('users');
    }
};

--- FIN DU FICHIER : ./database/migrations/2014_10_12_000000_create_users_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2014_10_12_100000_create_password_reset_tokens_table.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('password_reset_tokens', function (Blueprint $table) {
            $table->string('email')->primary();
            $table->string('token');
            $table->timestamp('created_at')->nullable();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('password_reset_tokens');
    }
};

--- FIN DU FICHIER : ./database/migrations/2014_10_12_100000_create_password_reset_tokens_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2019_08_19_000000_create_failed_jobs_table.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('failed_jobs', function (Blueprint $table) {
            $table->id();
            $table->string('uuid')->unique();
            $table->text('connection');
            $table->text('queue');
            $table->longText('payload');
            $table->longText('exception');
            $table->timestamp('failed_at')->useCurrent();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('failed_jobs');
    }
};

--- FIN DU FICHIER : ./database/migrations/2019_08_19_000000_create_failed_jobs_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2019_12_14_000001_create_personal_access_tokens_table.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('personal_access_tokens', function (Blueprint $table) {
            $table->id();
            $table->morphs('tokenable');
            $table->string('name');
            $table->string('token', 64)->unique();
            $table->text('abilities')->nullable();
            $table->timestamp('last_used_at')->nullable();
            $table->timestamp('expires_at')->nullable();
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('personal_access_tokens');
    }
};

--- FIN DU FICHIER : ./database/migrations/2019_12_14_000001_create_personal_access_tokens_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_06_05_134749_add_custom_fields_to_users_table.php
////////////////////////////////////////////////////////////////

// database/migrations/YYYY_MM_DD_HHMMSS_add_custom_fields_to_users_table.php
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::table('users', function (Blueprint $table) {
            // Rendre la colonne 'name' nullable si elle ne l'est pas déjà,
            // car nous allons la dériver de first_name et last_name.
            // Ou, si on la garde NOT NULL, s'assurer qu'elle est remplie à la création.
            // Pour l'instant, nous ajoutons les champs. Breeze s'attend à 'name' NOT NULL.
            // Nous allons gérer la population de 'name' dans le modèle ou un observer.

            $table->string('first_name')->after('name')->nullable(); // Ou après 'id' si 'name' n'est plus le premier champ pertinent
            $table->string('last_name')->after('first_name')->nullable();
            $table->string('phone', 50)->unique()->nullable()->after('email');
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::table('users', function (Blueprint $table) {
            $table->dropColumn(['first_name', 'last_name', 'phone']);
        });
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_06_05_134749_add_custom_fields_to_users_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_06_05_144141_create_permission_tables.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        $teams = config('permission.teams');
        $tableNames = config('permission.table_names');
        $columnNames = config('permission.column_names');
        $pivotRole = $columnNames['role_pivot_key'] ?? 'role_id';
        $pivotPermission = $columnNames['permission_pivot_key'] ?? 'permission_id';

        throw_if(empty($tableNames), new Exception('Error: config/permission.php not loaded. Run [php artisan config:clear] and try again.'));
        throw_if($teams && empty($columnNames['team_foreign_key'] ?? null), new Exception('Error: team_foreign_key on config/permission.php not loaded. Run [php artisan config:clear] and try again.'));

        Schema::create($tableNames['permissions'], static function (Blueprint $table) {
            // $table->engine('InnoDB');
            $table->bigIncrements('id'); // permission id
            $table->string('name');       // For MyISAM use string('name', 225); // (or 166 for InnoDB with Redundant/Compact row format)
            $table->string('guard_name'); // For MyISAM use string('guard_name', 25);
            $table->timestamps();

            $table->unique(['name', 'guard_name']);
        });

        Schema::create($tableNames['roles'], static function (Blueprint $table) use ($teams, $columnNames) {
            // $table->engine('InnoDB');
            $table->bigIncrements('id'); // role id
            if ($teams || config('permission.testing')) { // permission.testing is a fix for sqlite testing
                $table->unsignedBigInteger($columnNames['team_foreign_key'])->nullable();
                $table->index($columnNames['team_foreign_key'], 'roles_team_foreign_key_index');
            }
            $table->string('name');       // For MyISAM use string('name', 225); // (or 166 for InnoDB with Redundant/Compact row format)
            $table->string('guard_name'); // For MyISAM use string('guard_name', 25);
            $table->timestamps();
            if ($teams || config('permission.testing')) {
                $table->unique([$columnNames['team_foreign_key'], 'name', 'guard_name']);
            } else {
                $table->unique(['name', 'guard_name']);
            }
        });

        Schema::create($tableNames['model_has_permissions'], static function (Blueprint $table) use ($tableNames, $columnNames, $pivotPermission, $teams) {
            $table->unsignedBigInteger($pivotPermission);

            $table->string('model_type');
            $table->unsignedBigInteger($columnNames['model_morph_key']);
            $table->index([$columnNames['model_morph_key'], 'model_type'], 'model_has_permissions_model_id_model_type_index');

            $table->foreign($pivotPermission)
                ->references('id') // permission id
                ->on($tableNames['permissions'])
                ->onDelete('cascade');
            if ($teams) {
                $table->unsignedBigInteger($columnNames['team_foreign_key']);
                $table->index($columnNames['team_foreign_key'], 'model_has_permissions_team_foreign_key_index');

                $table->primary([$columnNames['team_foreign_key'], $pivotPermission, $columnNames['model_morph_key'], 'model_type'],
                    'model_has_permissions_permission_model_type_primary');
            } else {
                $table->primary([$pivotPermission, $columnNames['model_morph_key'], 'model_type'],
                    'model_has_permissions_permission_model_type_primary');
            }

        });

        Schema::create($tableNames['model_has_roles'], static function (Blueprint $table) use ($tableNames, $columnNames, $pivotRole, $teams) {
            $table->unsignedBigInteger($pivotRole);

            $table->string('model_type');
            $table->unsignedBigInteger($columnNames['model_morph_key']);
            $table->index([$columnNames['model_morph_key'], 'model_type'], 'model_has_roles_model_id_model_type_index');

            $table->foreign($pivotRole)
                ->references('id') // role id
                ->on($tableNames['roles'])
                ->onDelete('cascade');
            if ($teams) {
                $table->unsignedBigInteger($columnNames['team_foreign_key']);
                $table->index($columnNames['team_foreign_key'], 'model_has_roles_team_foreign_key_index');

                $table->primary([$columnNames['team_foreign_key'], $pivotRole, $columnNames['model_morph_key'], 'model_type'],
                    'model_has_roles_role_model_type_primary');
            } else {
                $table->primary([$pivotRole, $columnNames['model_morph_key'], 'model_type'],
                    'model_has_roles_role_model_type_primary');
            }
        });

        Schema::create($tableNames['role_has_permissions'], static function (Blueprint $table) use ($tableNames, $pivotRole, $pivotPermission) {
            $table->unsignedBigInteger($pivotPermission);
            $table->unsignedBigInteger($pivotRole);

            $table->foreign($pivotPermission)
                ->references('id') // permission id
                ->on($tableNames['permissions'])
                ->onDelete('cascade');

            $table->foreign($pivotRole)
                ->references('id') // role id
                ->on($tableNames['roles'])
                ->onDelete('cascade');

            $table->primary([$pivotPermission, $pivotRole], 'role_has_permissions_permission_id_role_id_primary');
        });

        app('cache')
            ->store(config('permission.cache.store') != 'default' ? config('permission.cache.store') : null)
            ->forget(config('permission.cache.key'));
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        $tableNames = config('permission.table_names');

        if (empty($tableNames)) {
            throw new \Exception('Error: config/permission.php not found and defaults could not be merged. Please publish the package configuration before proceeding, or drop the tables manually.');
        }

        Schema::drop($tableNames['role_has_permissions']);
        Schema::drop($tableNames['model_has_roles']);
        Schema::drop($tableNames['model_has_permissions']);
        Schema::drop($tableNames['roles']);
        Schema::drop($tableNames['permissions']);
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_06_05_144141_create_permission_tables.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_06_05_150327_create_validation_levels_table.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
   
	public function up(): void
  {
    Schema::create('validation_levels', function (Blueprint $table) {
        $table->id(); // Ou $table->serial('id')->primary(); pour SERIAL
        $table->smallInteger('level_number')->unique();
        $table->string('name', 100);
        $table->text('description')->nullable();
        $table->timestamps(); 
    });
  }




    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('validation_levels');
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_06_05_150327_create_validation_levels_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_06_05_150533_create_user_validation_levels_table.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    
	public function up(): void
  {
    Schema::create('user_validation_levels', function (Blueprint $table) {
        $table->foreignId('user_id')->constrained('users')->onDelete('cascade');
        $table->foreignId('validation_level_id')->constrained('validation_levels')->onDelete('cascade');
        $table->primary(['user_id', 'validation_level_id']);
        // Pas de timestamps ici généralement.
    });
  }



    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('user_validation_levels');
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_06_05_150533_create_user_validation_levels_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_06_06_204451_create_vehicle_types_table.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('vehicle_types', function (Blueprint $table) {
            $table->id();
            $table->string('name', 100)->unique();
            // Pas de timestamps pour cette table de référence simple
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('vehicle_types');
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_06_06_204451_create_vehicle_types_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_06_06_204514_create_fuel_types_table.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('fuel_types', function (Blueprint $table) {
            $table->id();
            $table->string('name', 100)->unique();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('fuel_types');
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_06_06_204514_create_fuel_types_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_06_06_204531_create_transmission_types_table.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('transmission_types', function (Blueprint $table) {
            $table->id();
            $table->string('name', 100)->unique();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('transmission_types');
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_06_06_204531_create_transmission_types_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_06_06_204549_create_vehicle_statuses_table.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('vehicle_statuses', function (Blueprint $table) {
            $table->id();
            $table->string('name', 100)->unique();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('vehicle_statuses');
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_06_06_204549_create_vehicle_statuses_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_06_06_205007_create_vehicles_table.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
public function up(): void
{
    Schema::create('vehicles', function (Blueprint $table) {
        $table->id();
        $table->string('registration_plate', 50)->unique();
        $table->string('vin', 17)->unique()->nullable(); // VIN est nullable dès le départ
        $table->string('brand', 100)->nullable();
        $table->string('model', 100)->nullable();
        $table->string('color', 50)->nullable();

        $table->foreignId('vehicle_type_id')->nullable()->constrained('vehicle_types')->onDelete('set null');
        $table->foreignId('fuel_type_id')->nullable()->constrained('fuel_types')->onDelete('set null');
        $table->foreignId('transmission_type_id')->nullable()->constrained('transmission_types')->onDelete('set null');
        $table->foreignId('status_id')->nullable()->constrained('vehicle_statuses')->onDelete('set null');

        $table->smallInteger('manufacturing_year')->nullable();
        $table->date('acquisition_date')->nullable(); // CHAMP AJOUTÉ ICI
        $table->decimal('purchase_price', 12, 2)->nullable(); // CHAMP AJOUTÉ ICI
        $table->decimal('current_value', 12, 2)->nullable(); // CHAMP AJOUTÉ ICI

        $table->unsignedBigInteger('initial_mileage')->default(0);
        $table->unsignedBigInteger('current_mileage')->default(0);
        $table->integer('engine_displacement_cc')->nullable();
        $table->integer('power_hp')->nullable();
        $table->smallInteger('seats')->nullable();

        $table->text('status_reason')->nullable();
        $table->text('notes')->nullable();

        $table->timestamps();
    });
}
    public function down(): void
    {
        Schema::dropIfExists('vehicles');
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_06_06_205007_create_vehicles_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_06_07_202347_add_soft_deletes_to_vehicles_table.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::table('vehicles', function (Blueprint $table) {
            $table->softDeletes(); // Ajoute la colonne 'deleted_at' nullable
        });
    }

    public function down(): void
    {
        Schema::table('vehicles', function (Blueprint $table) {
            $table->dropSoftDeletes(); // Supprime la colonne 'deleted_at'
        });
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_06_07_202347_add_soft_deletes_to_vehicles_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_06_07_231226_create_driver_statuses_table.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('driver_statuses', function (Blueprint $table) {
            $table->id();
            $table->string('name', 100)->unique();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('driver_statuses');
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_06_07_231226_create_driver_statuses_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_06_07_231452_create_drivers_table.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
     {
        Schema::create('drivers', function (Blueprint $table) {
        $table->id();
        // Lien optionnel vers un compte utilisateur système.
        $table->foreignId('user_id')->nullable()->unique()->constrained('users')->onDelete('set null');

        $table->string('employee_number', 100)->nullable()->unique();
        $table->string('first_name');
        $table->string('last_name');
        $table->string('photo_path', 512)->nullable();
        $table->date('birth_date')->nullable();
        $table->string('blood_type', 10)->nullable();
        $table->text('address')->nullable();
        $table->string('personal_phone', 50)->nullable();
        $table->string('personal_email', 255)->nullable();
        $table->string('license_number', 100)->nullable();
        $table->string('license_category', 50)->nullable();
        $table->date('license_issue_date')->nullable();
        $table->string('license_authority')->nullable();
        $table->date('recruitment_date')->nullable();
        $table->date('contract_end_date')->nullable();

        $table->foreignId('status_id')->nullable()->constrained('driver_statuses')->onDelete('set null');

        $table->string('emergency_contact_name')->nullable();
        $table->string('emergency_contact_phone', 50)->nullable();

        $table->timestamps();
        $table->softDeletes(); // Pour la suppression douce
    	});
      }
    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('drivers');
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_06_07_231452_create_drivers_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_06_09_144736_create_assignments_table.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('assignments', function (Blueprint $table) {
            $table->id();
            $table->foreignId('vehicle_id')->constrained('vehicles')->onDelete('restrict');
            $table->foreignId('driver_id')->constrained('drivers')->onDelete('restrict');
            $table->timestamp('start_datetime');
            $table->timestamp('end_datetime')->nullable();
            $table->unsignedBigInteger('start_mileage')->nullable();
            $table->unsignedBigInteger('end_mileage')->nullable();
            $table->text('reason')->nullable();
            $table->text('notes')->nullable();
            $table->foreignId('created_by_user_id')->nullable()->constrained('users')->onDelete('set null');
            $table->softDeletes();
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('assignments');
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_06_09_144736_create_assignments_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_06_10_113936_add_license_expiry_date_to_drivers_table.php
////////////////////////////////////////////////////////////////

<?php
use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;
return new class extends Migration {
    public function up(): void {
        Schema::table('drivers', function (Blueprint $table) {
            $table->date('license_expiry_date')->nullable()->after('license_authority');
        });
    }
    public function down(): void {
        Schema::table('drivers', function (Blueprint $table) {
            $table->dropColumn('license_expiry_date');
        });
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_06_10_113936_add_license_expiry_date_to_drivers_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_06_10_160701_create_maintenance_types_table.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
    	Schema::create('maintenance_types', function (Blueprint $table) {
    		$table->id();
    		$table->string('name', 150)->unique();
    		$table->text('description')->nullable();
	});
    
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('maintenance_types');
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_06_10_160701_create_maintenance_types_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_06_10_160701_create_recurrence_units_table.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
    
    Schema::create('recurrence_units', function (Blueprint $table) {
    $table->id();
    $table->string('name', 50)->unique(); // Ex: Jours, Kilomètres, Mois
});
    
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('recurrence_units');
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_06_10_160701_create_recurrence_units_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_06_10_160702_create_maintenance_statuses_table.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
    
    Schema::create('maintenance_statuses', function (Blueprint $table) {
    $table->id();
    $table->string('name', 100)->unique(); // Ex: Planifiée, En cours, Terminée, Annulée
});
    
    
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('maintenance_statuses');
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_06_10_160702_create_maintenance_statuses_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_06_10_160703_create_maintenance_plans_table.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
    
    Schema::create('maintenance_plans', function (Blueprint $table) {
    $table->id();
    $table->foreignId('vehicle_id')->constrained('vehicles')->onDelete('cascade');
    $table->foreignId('maintenance_type_id')->constrained('maintenance_types')->onDelete('cascade');
    $table->integer('recurrence_value');
    $table->foreignId('recurrence_unit_id')->constrained('recurrence_units');
    $table->date('next_due_date')->nullable();
    $table->bigInteger('next_due_mileage')->nullable();
    $table->text('notes')->nullable();
    $table->softDeletes();
    $table->timestamps();
});
    
    
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('maintenance_plans');
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_06_10_160703_create_maintenance_plans_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_06_10_160704_create_maintenance_logs_table.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
    
    Schema::create('maintenance_logs', function (Blueprint $table) {
    $table->id();
    $table->foreignId('vehicle_id')->constrained('vehicles')->onDelete('cascade');
    $table->foreignId('maintenance_plan_id')->nullable()->constrained('maintenance_plans')->onDelete('set null');
    $table->foreignId('maintenance_type_id')->constrained('maintenance_types');
    $table->foreignId('maintenance_status_id')->constrained('maintenance_statuses');
    $table->date('performed_on_date');
    $table->bigInteger('performed_at_mileage');
    $table->decimal('cost', 12, 2)->nullable();
    // La table `suppliers` n'existant pas encore, nous laissons cette clé en commentaire.
    // $table->foreignId('supplier_id')->nullable()->constrained('suppliers');
    $table->text('details')->nullable();
    $table->string('performed_by')->nullable();
    $table->softDeletes();
    $table->timestamps();
});
    
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('maintenance_logs');
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_06_10_160704_create_maintenance_logs_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_06_17_233747_create_vehicle_handover_forms_table.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
    
    Schema::create('vehicle_handover_forms', function (Blueprint $table) {
    $table->id();
    $table->foreignId('assignment_id')->unique()->constrained('assignments')->onDelete('cascade');
    $table->date('issue_date');
    $table->string('assignment_reason')->nullable();
    $table->unsignedBigInteger('current_mileage');
    $table->text('general_observations')->nullable();
    $table->text('additional_observations')->nullable();
    $table->string('signed_form_path', 512)->nullable();
    $table->boolean('is_latest_version')->default(true);
    $table->softDeletes();
    $table->timestamps();
    	
    });
    
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('vehicle_handover_forms');
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_06_17_233747_create_vehicle_handover_forms_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_06_17_233757_create_vehicle_handover_details_table.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('vehicle_handover_details', function (Blueprint $table) {
            $table->id();
            $table->foreignId('handover_form_id')->constrained('vehicle_handover_forms')->onDelete('cascade');
            $table->string('category');
            $table->string('item');
            //$table->enum('status', ['Bon', 'Moyen', 'Mauvais', 'N/A']);
            $table->enum('status', ['Bon', 'Moyen', 'Mauvais', 'N/A', 'Oui', 'Non']);
        
            $table->timestamps();
        }); // <-- LE POINT-VIRGULE MANQUANT EST AJOUTÉ ICI
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('vehicle_handover_details');
    }
};
--- FIN DU FICHIER : ./database/migrations/2025_06_17_233757_create_vehicle_handover_details_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_07_07_000048_create_organizations_table.php
////////////////////////////////////////////////////////////////

<?php
use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;
return new class extends Migration {
    public function up(): void {
        Schema::create('organizations', function (Blueprint $table) {
            $table->id();
            $table->uuid('uuid')->unique();
            $table->string('name');
            $table->text('address')->nullable();
            $table->string('contact_email')->nullable();
            $table->string('status')->default('active'); // active, inactive, suspended
            $table->timestamps();
        });
    }
    public function down(): void {
        Schema::dropIfExists('organizations');
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_07_07_000048_create_organizations_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_07_07_000238_add_organization_id_to_tables.php
////////////////////////////////////////////////////////////////

<?php
use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;
return new class extends Migration {
    public function up(): void {
        $tables = ['users', 'vehicles', 'drivers', 'assignments', 'maintenance_plans', 'maintenance_logs', 'vehicle_handover_forms'];
        foreach ($tables as $tableName) {
            Schema::table($tableName, function (Blueprint $table) {
                $table->foreignId('organization_id')->nullable()->constrained('organizations')->onDelete('cascade');
            });
        }
    }
    public function down(): void {
        // ... (logique pour supprimer les colonnes) ...
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_07_07_000238_add_organization_id_to_tables.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_07_07_160317_add_soft_deletes_to_users_table.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::table('users', function (Blueprint $table) {
            $table->softDeletes(); // Ajoute la colonne 'deleted_at' nullable
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::table('users', function (Blueprint $table) {
            $table->dropSoftDeletes(); // Supprime la colonne 'deleted_at'
        });
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_07_07_160317_add_soft_deletes_to_users_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_07_22_012046_add_strategic_indexes_to_tables.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     *
     * @return void
     */
    public function up(): void
    {
        // --- Index sur les clés étrangères d'organisation ---
        // Essentiel pour la performance du multi-tenant.
        // Chaque requête étant filtrée par organization_id, cet index est capital.
        Schema::table('vehicles', function (Blueprint $table) {
            $table->index('organization_id', 'idx_vehicles_organization');
        });
        Schema::table('drivers', function (Blueprint $table) {
            $table->index('organization_id', 'idx_drivers_organization');
        });
        Schema::table('assignments', function (Blueprint $table) {
            $table->index('organization_id', 'idx_assignments_organization');
        });
        Schema::table('maintenance_logs', function (Blueprint $table) {
            $table->index('organization_id', 'idx_maintenance_logs_organization');
        });
        Schema::table('maintenance_plans', function (Blueprint $table) {
            $table->index('organization_id', 'idx_maintenance_plans_organization');
        });

        // --- Index composites pour les recherches et filtres fréquents ---
        // Un index sur plusieurs colonnes est plus performant qu'un index par colonne
        // lorsque les recherches utilisent ces colonnes conjointement.

        // Pour filtrer les véhicules par statut au sein d'une organisation.
        Schema::table('vehicles', function (Blueprint $table) {
            $table->index(['status_id', 'organization_id'], 'idx_vehicles_status_org');
        });

        // Pour rechercher des affectations dans une plage de dates pour une organisation.
        Schema::table('assignments', function (Blueprint $table) {
            $table->index(['start_datetime', 'end_datetime', 'organization_id'], 'idx_assignments_dates_org');
        });

        // Pour trouver rapidement les prochaines maintenances dues pour une organisation.
        Schema::table('maintenance_plans', function (Blueprint $table) {
            $table->index(['next_due_date', 'organization_id'], 'idx_maintenance_plans_next_due_date');
            $table->index(['next_due_mileage', 'organization_id'], 'idx_maintenance_plans_next_due_mileage');
        });
    }

    /**
     * Reverse the migrations.
     *
     * @return void
     */
    public function down(): void
    {
        // La méthode down() est cruciale pour pouvoir annuler la migration si besoin.
        Schema::table('vehicles', function (Blueprint $table) {
            $table->dropIndex('idx_vehicles_organization');
            $table->dropIndex('idx_vehicles_status_org');
        });
        Schema::table('drivers', function (Blueprint $table) {
            $table->dropIndex('idx_drivers_organization');
        });
        Schema::table('assignments', function (Blueprint $table) {
            $table->dropIndex('idx_assignments_organization');
            $table->dropIndex('idx_assignments_dates_org');
        });
        Schema::table('maintenance_logs', function (Blueprint $table) {
            $table->dropIndex('idx_maintenance_logs_organization');
        });
        Schema::table('maintenance_plans', function (Blueprint $table) {
            $table->dropIndex('idx_maintenance_plans_organization');
            $table->dropIndex('idx_maintenance_plans_next_due_date');
            $table->dropIndex('idx_maintenance_plans_next_due_mileage');
        });
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_07_22_012046_add_strategic_indexes_to_tables.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_07_22_014038_create_fleet_management_extended_tables.php
////////////////////////////////////////////////////////////////

<?php

// CORRECTION : Remplacement des points par des anti-slashs dans les déclarations 'use'
use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     *
     * @return void
     */
    public function up(): void
    {
        // MODULE: GESTION DES COÛTS
        Schema::create('expense_types', function (Blueprint $table) {
            $table->id();
            $table->string('name', 100)->unique();
            $table->text('description')->nullable();
        });

        Schema::create('expenses', function (Blueprint $table) {
            $table->id();
            $table->foreignId('organization_id')->constrained('organizations')->onDelete('cascade');
            $table->foreignId('vehicle_id')->nullable()->constrained('vehicles')->onDelete('set null');
            $table->foreignId('driver_id')->nullable()->constrained('drivers')->onDelete('set null');
            $table->foreignId('expense_type_id')->constrained('expense_types')->onDelete('restrict');
            $table->decimal('amount', 12, 2);
            $table->date('expense_date');
            $table->text('description')->nullable();
            $table->string('receipt_path', 512)->nullable();
            $table->foreignId('created_by_user_id')->nullable()->constrained('users')->onDelete('set null');
            $table->timestamps();
            $table->softDeletes();
        });

        // MODULE: GESTION DU CARBURANT
        Schema::create('fuel_refills', function (Blueprint $table) {
            $table->id();
            $table->foreignId('organization_id')->constrained('organizations')->onDelete('cascade');
            $table->foreignId('vehicle_id')->constrained('vehicles')->onDelete('cascade');
            $table->foreignId('driver_id')->nullable()->constrained('drivers')->onDelete('set null');
            $table->timestamp('refill_date');
            $table->decimal('quantity_liters', 8, 2);
            $table->decimal('price_per_liter', 8, 3); // Supporte 3 décimales pour plus de précision
            $table->decimal('total_cost', 10, 2);
            $table->unsignedBigInteger('mileage_at_refill');
            $table->boolean('full_tank')->default(true);
            $table->string('station_name')->nullable();
            $table->timestamps();
        });

        // MODULE: GESTION DES INCIDENTS
        Schema::create('incident_statuses', function (Blueprint $table) {
            $table->id();
            $table->string('name', 100)->unique();
        });

        Schema::create('incidents', function (Blueprint $table) {
            $table->id();
            $table->foreignId('organization_id')->constrained('organizations')->onDelete('cascade');
            $table->foreignId('vehicle_id')->constrained('vehicles')->onDelete('cascade');
            $table->foreignId('driver_id')->nullable()->constrained('drivers')->onDelete('set null');
            $table->timestamp('incident_date');
            $table->string('type'); // Ex: 'Accident', 'Panne', 'Vol', etc.
            $table->string('severity'); // Ex: 'Faible', 'Moyenne', 'Élevée', 'Critique'
            $table->text('location')->nullable();
            $table->text('description');
            $table->boolean('third_party_involved')->default(false);
            $table->string('police_report_number')->nullable();
            $table->string('insurance_claim_number')->nullable();
            $table->foreignId('incident_status_id')->constrained('incident_statuses');
            $table->decimal('estimated_cost', 12, 2)->nullable();
            $table->decimal('actual_cost', 12, 2)->nullable();
            $table->foreignId('created_by_user_id')->nullable()->constrained('users')->onDelete('set null');
            $table->timestamps();
            $table->softDeletes();
        });

        // MODULE: GESTION DOCUMENTAIRE (Polymorphique)
        Schema::create('document_types', function (Blueprint $table) {
            $table->id();
            $table->string('name', 100)->unique();
        });

        Schema::create('documents', function (Blueprint $table) {
            $table->id();
            $table->foreignId('organization_id')->constrained('organizations')->onDelete('cascade');
            $table->morphs('documentable'); // Crée `documentable_id` (BIGINT) et `documentable_type` (VARCHAR)
            $table->foreignId('document_type_id')->constrained('document_types');
            $table->string('title');
            $table->string('file_path', 512);
            $table->unsignedBigInteger('file_size'); // en octets
            $table->string('mime_type', 100);
            $table->date('issue_date')->nullable();
            $table->date('expiry_date')->nullable();
            $table->foreignId('created_by_user_id')->nullable()->constrained('users')->onDelete('set null');
            $table->timestamps();
            $table->softDeletes();
        });
    }

    /**
     * Reverse the migrations.
     *
     * @return void
     */
    public function down(): void
    {
        // On supprime les tables dans l'ordre inverse de leur création pour respecter les contraintes
        Schema::dropIfExists('documents');
        Schema::dropIfExists('document_types');
        Schema::dropIfExists('incidents');
        Schema::dropIfExists('incident_statuses');
        Schema::dropIfExists('fuel_refills');
        Schema::dropIfExists('expenses');
        Schema::dropIfExists('expense_types');
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_07_22_014038_create_fleet_management_extended_tables.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_08_12_015505_create_user_vehicle_pivot_table.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        // Crée la table pivot pour la relation N-N entre les utilisateurs et les véhicules.
        Schema::create('user_vehicle', function (Blueprint $table) {
            // Clé primaire composite pour garantir l'unicité de la paire user/vehicle.
            $table->primary(['user_id', 'vehicle_id']);

            $table->foreignId('user_id')->constrained()->onDelete('cascade');
            $table->foreignId('vehicle_id')->constrained()->onDelete('cascade');
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('user_vehicle');
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_08_12_015505_create_user_vehicle_pivot_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_08_15_014729_create_supplier_categories_table.php
////////////////////////////////////////////////////////////////

<?php
use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration {
    public function up(): void
    {
        Schema::create('supplier_categories', function (Blueprint $table) {
            $table->id();
            $table->string('name');
            $table->foreignId('organization_id')->constrained()->onDelete('cascade');
            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('supplier_categories');
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_08_15_014729_create_supplier_categories_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/migrations/2025_08_15_014730_create_suppliers_table.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('suppliers', function (Blueprint $table) {
            $table->id();
            $table->string('name');
            $table->string('contact_name')->nullable();
            $table->string('phone')->nullable();
            $table->string('email')->nullable()->unique();
            $table->text('address')->nullable();

            // CORRECTION : On ajoute la clé étrangère pour la catégorie
            $table->foreignId('supplier_category_id')->nullable()->constrained()->onDelete('set null');

            $table->foreignId('organization_id')->constrained()->onDelete('cascade');
            $table->softDeletes();
            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('suppliers');
    }
};

--- FIN DU FICHIER : ./database/migrations/2025_08_15_014730_create_suppliers_table.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/seeders/DatabaseSeeder.php
////////////////////////////////////////////////////////////////

<?php

namespace Database\Seeders;

use App\Models\User;
use App\Models\Organization;
use Illuminate\Database\Seeder;
use Illuminate\Support\Str;

class DatabaseSeeder extends Seeder
{
    public function run(): void
    {
        $this->call([
            PermissionSeeder::class,
            ValidationLevelSeeder::class,
            VehicleDataSeeder::class,
            DriverStatusSeeder::class,
            Maintenance\MaintenanceDataSeeder::class,
        ]);

        $zenfleetOrganization = Organization::firstOrCreate(
            ['name' => 'ZENFLEET Platform'],
            ['uuid' => (string) Str::uuid()]
        );

        // --- Création de l'utilisateur SUPER ADMIN ---
        $superAdminUser = User::firstOrCreate(
            ['email' => 'admin@zenfleet.com'],
            [
                'first_name' => 'Super',
                'last_name' => 'Admin',
                'password' => bcrypt('password'),
                'organization_id' => $zenfleetOrganization->id,
                'email_verified_at' => now(),
            ]
        );

        // CORRECTION : On assigne le bon rôle
        $superAdminUser->syncRoles(['Super Admin']);
        $this->command->info('Super Admin user created and assigned.');

        // --- Création de données de test pour une organisation cliente ---
        if (app()->environment('local', 'development')) {
            $clientOrganization = Organization::factory()->create(['name' => 'Client de Démo Inc.']);
            if ($clientOrganization) {
                $clientAdmin = User::factory()->create([
                    'first_name' => 'Admin',
                    'last_name' => 'Client',
                    'email' => 'client.admin@exemple.com',
                    'organization_id' => $clientOrganization->id,
                ]);
                $clientAdmin->assignRole('Admin');

                \App\Models\Driver::factory()->count(5)->create(['organization_id' => $clientOrganization->id]);
                \App\Models\Vehicle::factory()->count(10)->create(['organization_id' => $clientOrganization->id]);
                $this->command->info('Demo organization with data created.');
            }
        }
    }
}
--- FIN DU FICHIER : ./database/seeders/DatabaseSeeder.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/seeders/DriverSeeder.php
////////////////////////////////////////////////////////////////

<?php

namespace Database\Seeders;

use App\Models\Driver;
use Illuminate\Database\Console\Seeds\WithoutModelEvents;
use Illuminate\Database\Seeder;

class DriverSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        // Crée 5 chauffeurs en utilisant la DriverFactory
        Driver::factory()->count(7)->create();

        $this->command->info('7 sample drivers have been created.');
    }
}

--- FIN DU FICHIER : ./database/seeders/DriverSeeder.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/seeders/DriverStatusSeeder.php
////////////////////////////////////////////////////////////////

<?php
namespace Database\Seeders;
use App\Models\DriverStatus;
use Illuminate\Database\Seeder;

class DriverStatusSeeder extends Seeder
{
    public function run(): void
    {
        $statuses = ['Disponible', 'En congé', 'Suspendu', 'Inactif', 'En mission', 'Ex-employé'];
        foreach ($statuses as $status) {
            DriverStatus::firstOrCreate(['name' => $status]);
        }
    }
}

--- FIN DU FICHIER : ./database/seeders/DriverStatusSeeder.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/seeders/FuelTypeSeeder.php
////////////////////////////////////////////////////////////////

<?php
namespace Database\Seeders;
use Illuminate\Database\Seeder;
use App\Models\FuelType;

class FuelTypeSeeder extends Seeder
{
    public function run(): void
    {
        $types = ['Essence', 'Diesel', 'GPL', 'Électrique', 'Hybride'];
        foreach ($types as $type) {
            FuelType::firstOrCreate(['name' => $type]);
        }
    }
}

--- FIN DU FICHIER : ./database/seeders/FuelTypeSeeder.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/seeders/Maintenance/MaintenanceDataSeeder.php
////////////////////////////////////////////////////////////////

<?php
namespace Database\Seeders\Maintenance;
use Illuminate\Database\Seeder;
class MaintenanceDataSeeder extends Seeder
{
    public function run(): void
    {
        $this->call([
            MaintenanceTypeSeeder::class,
            RecurrenceUnitSeeder::class,
            MaintenanceStatusSeeder::class,
        ]);
    }
}

--- FIN DU FICHIER : ./database/seeders/Maintenance/MaintenanceDataSeeder.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/seeders/Maintenance/MaintenanceStatusSeeder.php
////////////////////////////////////////////////////////////////

<?php
namespace Database\Seeders\Maintenance;
use App\Models\Maintenance\MaintenanceStatus;
use Illuminate\Database\Seeder;
class MaintenanceStatusSeeder extends Seeder
{
    public function run(): void
    {
        $statuses = ['Planifiée', 'En cours', 'Terminée', 'Annulée'];
        foreach ($statuses as $status) {
            MaintenanceStatus::firstOrCreate(['name' => $status]);
        }
    }
}

--- FIN DU FICHIER : ./database/seeders/Maintenance/MaintenanceStatusSeeder.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/seeders/Maintenance/MaintenanceTypeSeeder.php
////////////////////////////////////////////////////////////////

<?php

namespace Database\Seeders\Maintenance;

use App\Models\Maintenance\MaintenanceType;
use Illuminate\Database\Seeder;

class MaintenanceTypeSeeder extends Seeder
{
    /**
     * Exécute les seeds pour la table des types de maintenance.
     */
    public function run(): void
    {
        // La méthode firstOrCreate garantit que nous ne créerons pas de doublons
        // si le seeder est exécuté plusieurs fois.

        // --- Types techniques (maintenance & entretien courant) ---
        $this->createType(
            'Vidange moteur', 
            'Changement de l\'huile moteur uniquement.'
        );
        $this->createType(
            'Vidange moteur complète', 
            'Changement de l\'huile moteur et du filtre à huile.'
        );
        $this->createType(
            'Vidange boîte de vitesse', 
            'Changement de l\'huile de la boîte de vitesse (manuelle ou automatique).'
        );
        $this->createType(
            'Courroie de distribution', 
            'Vérification ou remplacement du kit de distribution.'
        );
        $this->createType(
            'Courroie d\'accessoires', 
            'Vérification ou remplacement de la courroie d\'accessoires (poly-V).'
        );
        $this->createType(
            'Pneumatiques', 
            'Contrôle ou remplacement des pneus (pression, usure, géométrie).'
        );
        $this->createType(
            'Système de freinage', 
            'Contrôle ou remplacement des disques, plaquettes, et purge du liquide de frein.'
        );
        $this->createType(
            'Système électrique', 
            'Contrôle de la batterie, de l\'alternateur et du démarreur.'
        );
        $this->createType(
            'Filtres', 
            'Remplacement des filtres à air, à carburant, et d\'habitacle (pollen).'
        );
        $this->createType(
            'Nettoyage FAP/DPF', 
            'Nettoyage ou régénération du filtre à particules.'
        );
        $this->createType(
            'Système de climatisation', 
            'Recharge de gaz, contrôle d\'étanchéité, et remplacement du filtre déshydrateur.'
        );

        // --- Types administratifs & réglementaires ---
        $this->createType(
            'Contrôle technique', 
            'Inspection réglementaire périodique obligatoire.'
        );
        $this->createType(
            'Vignette automobile', 
            'Paiement annuel de la taxe de circulation.'
        );
        $this->createType(
            'Permis de circuler', 
            'Renouvellement ou mise à jour de la carte grise / permis de circuler.'
        );
        $this->createType(
            'Assurance automobile', 
            'Paiement ou renouvellement de la police d\'assurance (RC, tous risques, etc.).'
        );
        $this->createType(
            'Assurance marchandises', 
            'Paiement ou renouvellement de l\'assurance pour les biens transportés.'
        );
        $this->createType(
            'Autorisation de mise en circulation (AMC)', 
            'Contrôles spécifiques pour les véhicules de transport de marchandises ou de personnes.'
        );
        $this->createType(
            'Révision générale constructeur', 
            'Entretien complet suivant les préconisations du constructeur.'
        );

        $this->command->info('Maintenance types seeded successfully.');
    }

    /**
     * Méthode privée pour simplifier la création.
     */
    private function createType(string $name, string $description): void
    {
        MaintenanceType::firstOrCreate(
            ['name' => $name], 
            ['description' => $description]
        );
    }
}

--- FIN DU FICHIER : ./database/seeders/Maintenance/MaintenanceTypeSeeder.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/seeders/Maintenance/RecurrenceUnitSeeder.php
////////////////////////////////////////////////////////////////

<?php
namespace Database\Seeders\Maintenance;
use App\Models\Maintenance\RecurrenceUnit;
use Illuminate\Database\Seeder;
class RecurrenceUnitSeeder extends Seeder
{
    public function run(): void
    {
        $units = ['Jours', 'Mois', 'Kilomètres'];
        foreach ($units as $unit) {
            RecurrenceUnit::firstOrCreate(['name' => $unit]);
        }
    }
}

--- FIN DU FICHIER : ./database/seeders/Maintenance/RecurrenceUnitSeeder.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/seeders/PermissionSeeder.php
////////////////////////////////////////////////////////////////

<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use Spatie\Permission\Models\Role;
use Spatie\Permission\Models\Permission;
use Spatie\Permission\PermissionRegistrar;

class PermissionSeeder extends Seeder
{
    public function run(): void
    {
        app()[PermissionRegistrar::class]->forgetCachedPermissions();

        // --- Définition de toutes les permissions ---
        $permissions = [
            'view organizations', 'create organizations', 'edit organizations', 'delete organizations',
            'manage roles', 'view users', 'create users', 'edit users', 'delete users',
            'view vehicles', 'create vehicles', 'edit vehicles', 'delete vehicles', 'restore vehicles', 'force delete vehicles',
            'view drivers', 'create drivers', 'edit drivers', 'delete drivers', 'restore drivers', 'force delete drivers',
            'view assignments', 'create assignments', 'edit assignments', 'end assignments',
            'view maintenance', 'manage maintenance plans', 'log maintenance',
            'create handovers', 'view handovers', 'edit handovers', 'delete handovers', 'upload signed handovers',
            'view suppliers', 'create suppliers', 'edit suppliers', 'delete suppliers',
        ];

        foreach ($permissions as $permission) {
            Permission::firstOrCreate(['name' => $permission, 'guard_name' => 'web']);
        }
        $this->command->info('All permissions created or verified successfully.');

        // --- Création des Rôles ---
        $superAdminRole = Role::firstOrCreate(['name' => 'Super Admin']);
        $adminRole = Role::firstOrCreate(['name' => 'Admin']);
        $managerRole = Role::firstOrCreate(['name' => 'Gestionnaire Flotte']);
        $driverRole = Role::firstOrCreate(['name' => 'Chauffeur']);
        $this->command->info('Roles created or verified successfully.');

        // --- Attribution des Permissions ---
        $superAdminRole->givePermissionTo(Permission::all());
        $this->command->info('All permissions granted to Super Admin role.');

        $adminPermissions = Permission::where('name', 'not like', '%organizations%')->get();
        $adminRole->syncPermissions($adminPermissions);
        $this->command->info('Permissions granted to Admin role.');

        $managerRole->syncPermissions([
            'view vehicles', 'create vehicles', 'edit vehicles', 'delete vehicles', 'restore vehicles',
            'view drivers', 'create drivers', 'edit drivers', 'delete drivers', 'restore drivers',
            'view assignments', 'create assignments', 'edit assignments', 'end assignments',
            'view maintenance', 'manage maintenance plans', 'log maintenance',
            'create handovers', 'view handovers', 'edit handovers',
        ]);
        $this->command->info('Permissions granted to "Gestionnaire Flotte" role.');

        // Le rôle Chauffeur peut voir les véhicules et ses affectations.
        $driverRole->syncPermissions([
            'view vehicles',
            'view assignments',
        ]);
        $this->command->info('Permissions for "Chauffeur" role have been set.');
    }
}
--- FIN DU FICHIER : ./database/seeders/PermissionSeeder.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/seeders/RoleSeeder.php
////////////////////////////////////////////////////////////////

<?php

namespace Database\Seeders;

use Illuminate\Database\Console\Seeds\WithoutModelEvents;
use Illuminate\Database\Seeder;
use Spatie\Permission\Models\Role; // Importez le modèle Role

class RoleSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        // Création des rôles définis dans le document
        // La méthode firstOrCreate s'assure que le rôle n'est créé que s'il n'existe pas déjà.
        Role::firstOrCreate(['name' => 'Admin', 'guard_name' => 'web']);
        Role::firstOrCreate(['name' => 'Gestionnaire Flotte', 'guard_name' => 'web']);
        Role::firstOrCreate(['name' => 'Chauffeur', 'guard_name' => 'web']);
        // 'guard_name' => 'web' est le guard par défaut pour les applications web Laravel.
        // Vous pouvez le personnaliser dans config/auth.php si besoin.

        $this->command->info('Roles created successfully.');
    }
}

--- FIN DU FICHIER : ./database/seeders/RoleSeeder.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/seeders/RolesAndPermissionsSeeder.php
////////////////////////////////////////////////////////////////

<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use Spatie\Permission\Models\Role;
use Spatie\Permission\Models\Permission;
use App\Models\User; // Assurez-vous que le namespace est correct pour votre modèle User
use Illuminate\Support\Facades\Hash; // Importer la façade Hash pour le mot de passe

class RolesAndPermissionsSeeder extends Seeder
{
    /**
     * Run the database seeds.
     *
     * @return void
     */
    public function run(): void
    {
        // Réinitialiser les rôles et permissions mis en cache.
        // Ceci est utile pour éviter les problèmes de cache lors du re-seed pendant le développement.
        app()[\Spatie\Permission\PermissionRegistrar::class]->forgetCachedPermissions();

        // === CRÉATION DES PERMISSIONS ===
        // Permissions pour la gestion des utilisateurs
        Permission::firstOrCreate(['name' => 'manage users', 'guard_name' => 'web']); // CRUD complet sur les utilisateurs
        Permission::firstOrCreate(['name' => 'view users', 'guard_name' => 'web']);
        Permission::firstOrCreate(['name' => 'create users', 'guard_name' => 'web']);
        Permission::firstOrCreate(['name' => 'edit users', 'guard_name' => 'web']);
        Permission::firstOrCreate(['name' => 'delete users', 'guard_name' => 'web']);

        // Permissions pour la gestion des rôles et permissions
        Permission::firstOrCreate(['name' => 'manage roles', 'guard_name' => 'web']);
        Permission::firstOrCreate(['name' => 'manage permissions', 'guard_name' => 'web']); // Souvent réservé au Super Admin

        // Permissions pour les futurs modules (exemples)
        Permission::firstOrCreate(['name' => 'manage fleet', 'guard_name' => 'web']); // Gestion complète de la flotte
        Permission::firstOrCreate(['name' => 'view fleet dashboard', 'guard_name' => 'web']); // Voir le tableau de bord de la flotte
        Permission::firstOrCreate(['name' => 'manage vehicles', 'guard_name' => 'web']); // CRUD véhicules
        Permission::firstOrCreate(['name' => 'view vehicles', 'guard_name' => 'web']);
        Permission::firstOrCreate(['name' => 'manage drivers', 'guard_name' => 'web']); // CRUD chauffeurs (en tant qu'entité spécifique)
        Permission::firstOrCreate(['name' => 'view drivers', 'guard_name' => 'web']);
        Permission::firstOrCreate(['name' => 'manage missions', 'guard_name' => 'web']); // CRUD missions
        Permission::firstOrCreate(['name' => 'view missions', 'guard_name' => 'web']);


        // === CRÉATION DES RÔLES ET ASSIGNATION DES PERMISSIONS ===

        // Rôle: Super Administrateur (a accès à tout, souvent géré via un Gate::before)
        $superAdminRole = Role::firstOrCreate(['name' => 'Super Admin', 'guard_name' => 'web']);
        // Pour le Super Admin, on peut soit lui donner toutes les permissions explicitement,
        // soit utiliser un Gate::before (voir étape suivante) pour un accès global.
        // $superAdminRole->givePermissionTo(Permission::all()); // Optionnel si Gate::before est utilisé

        // Rôle: Gestionnaire de Flotte
        $fleetManagerRole = Role::firstOrCreate(['name' => 'Fleet Manager', 'guard_name' => 'web']);
        $fleetManagerRole->givePermissionTo([
            'view users',       // Peut voir les utilisateurs (ex: chauffeurs)
            'create users',     // Peut créer des chauffeurs (si pertinent, sinon gérer via 'manage drivers')
            'edit users',       // Peut modifier les chauffeurs (si pertinent)
            'manage fleet',
            'view fleet dashboard',
            'manage vehicles',
            'view vehicles',
            'manage drivers',
            'view drivers',
            'manage missions',
            'view missions',
        ]);

        // Rôle: Chauffeur
        $driverRole = Role::firstOrCreate(['name' => 'Driver', 'guard_name' => 'web']);
        $driverRole->givePermissionTo([
            'view fleet dashboard', // Peut voir son propre tableau de bord / missions assignées
            'view missions',        // Peut voir ses missions
            // Ajouter d'autres permissions spécifiques aux chauffeurs au fur et à mesure
        ]);

        // === CRÉATION DES UTILISATEURS DE DÉMONSTRATION ===

        // Utilisateur Super Administrateur
        // `firstOrCreate` évite de créer des doublons si le seeder est exécuté plusieurs fois.
        $superAdminUser = User::firstOrCreate(
            ['email' => 'superadmin@zenfleet.com'], // Clé unique pour la recherche
            [                                       // Valeurs à créer si non trouvé
                'name' => 'Super Administrator',
                'password' => Hash::make('password'), // Utilisez un mot de passe sécurisé !
            ]
        );
        $superAdminUser->assignRole($superAdminRole);

        // Utilisateur Gestionnaire de Flotte (pour tests)
        $fleetManagerUser = User::firstOrCreate(
            ['email' => 'manager@zenfleet.com'],
            [
                'name' => 'Fleet Manager User',
                'password' => Hash::make('password123'), // Changez ceci !
            ]
        );
        $fleetManagerUser->assignRole($fleetManagerRole);

         // Utilisateur Chauffeur (pour tests)
         $driverUser = User::firstOrCreate(
            ['email' => 'driver@zenfleet.com'],
            [
                'name' => 'Driver User',
                'password' => Hash::make('password123'), // Changez ceci !
            ]
        );
        $driverUser->assignRole($driverRole);
    }
}

--- FIN DU FICHIER : ./database/seeders/RolesAndPermissionsSeeder.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/seeders/TransmissionTypeSeeder.php
////////////////////////////////////////////////////////////////

<?php
namespace Database\Seeders;
use Illuminate\Database\Seeder;
use App\Models\TransmissionType;

class TransmissionTypeSeeder extends Seeder
{
    public function run(): void
    {
        $types = ['Manuelle', 'Automatique'];
        foreach ($types as $type) {
            TransmissionType::firstOrCreate(['name' => $type]);
        }
    }
}

--- FIN DU FICHIER : ./database/seeders/TransmissionTypeSeeder.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/seeders/ValidationLevelSeeder.php
////////////////////////////////////////////////////////////////

<?php

namespace Database\Seeders;

use Illuminate\Database\Console\Seeds\WithoutModelEvents;
use Illuminate\Database\Seeder;
use App\Models\ValidationLevel; // Assurez-vous que le modèle existe et est importé

class ValidationLevelSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        $levels = [
            ['level_number' => 1, 'name' => 'Demandeur', 'description' => 'Niveau initial de la demande.'],
            ['level_number' => 2, 'name' => 'Validation Intermédiaire', 'description' => 'Premier niveau d\'approbation.'], // Exemple de niveau intermédiaire
            ['level_number' => 3, 'name' => 'Validation Finale', 'description' => 'Approbation finale.'],
            // Ajoutez d'autres niveaux selon votre document ou vos besoins
        ];

        foreach ($levels as $level) {
            ValidationLevel::firstOrCreate(
                ['level_number' => $level['level_number']], // Critère de recherche
                $level // Valeurs à insérer/mettre à jour
            );
        }

        $this->command->info('Validation levels created successfully.');
    }
}

--- FIN DU FICHIER : ./database/seeders/ValidationLevelSeeder.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/seeders/VehicleDataSeeder.php
////////////////////////////////////////////////////////////////

<?php
namespace Database\Seeders;
use Illuminate\Database\Seeder;

class VehicleDataSeeder extends Seeder
{
    public function run(): void
    {
        $this->call([
            VehicleTypeSeeder::class,
            FuelTypeSeeder::class,
            TransmissionTypeSeeder::class,
            VehicleStatusSeeder::class,
            // Nous pourrons ajouter un VehicleSeeder ici plus tard pour des véhicules de test
        ]);
    }
}

--- FIN DU FICHIER : ./database/seeders/VehicleDataSeeder.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/seeders/VehicleStatusSeeder.php
////////////////////////////////////////////////////////////////

<?php
namespace Database\Seeders;
use Illuminate\Database\Seeder;
use App\Models\VehicleStatus;

class VehicleStatusSeeder extends Seeder
{
    public function run(): void
    {
        $types = ['Parking', 'En maintenance', 'Hors service', 'En mission', 'En attente'];
        foreach ($types as $type) {
            VehicleStatus::firstOrCreate(['name' => $type]);
        }
    }
}

--- FIN DU FICHIER : ./database/seeders/VehicleStatusSeeder.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./database/seeders/VehicleTypeSeeder.php
////////////////////////////////////////////////////////////////

<?php
namespace Database\Seeders;
use Illuminate\Database\Seeder;
use App\Models\VehicleType;

class VehicleTypeSeeder extends Seeder
{
    public function run(): void
    {
        $types = ['Berline', 'SUV', 'Utilitaire léger', 'Camion', 'Bus', 'Moto'];
        foreach ($types as $type) {
            VehicleType::firstOrCreate(['name' => $type]);
        }
    }
}

--- FIN DU FICHIER : ./database/seeders/VehicleTypeSeeder.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./docker/nginx/Dockerfile
////////////////////////////////////////////////////////////////

# ~/projects/zenfleet/docker/nginx/Dockerfile

FROM nginx:1.25-alpine

# Définir le répertoire de travail
WORKDIR /var/www/html

# Supprimer la configuration Nginx par défaut
RUN rm /etc/nginx/conf.d/default.conf

# Copier notre configuration Nginx personnalisée
# Le chemin est maintenant relatif à la racine du projet
COPY ./docker/nginx/zenfleet.conf /etc/nginx/conf.d/

# Exposer les ports HTTP et HTTPS
EXPOSE 80
EXPOSE 443
--- FIN DU FICHIER : ./docker/nginx/Dockerfile ---


////////////////////////////////////////////////////////////////
CHEMIN : ./docker/nginx/zenfleet.conf
////////////////////////////////////////////////////////////////

server {
    listen 80;
    server_name localhost;
    root /var/www/html/public;

    add_header X-Frame-Options "SAMEORIGIN";
    add_header X-XSS-Protection "1; mode=block";
    add_header X-Content-Type-Options "nosniff";

    index index.php;
    charset utf-8;

    # Sert les assets compilés s'ils existent (pour la production)
    location /build {
        try_files $uri =404;
    }

    # Route toutes les autres requêtes vers Laravel
    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    # Gère l'exécution des scripts PHP
    location ~ \.php$ {
        fastcgi_pass php:9000;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;
    }

    location ~ /\.ht {
        deny all;
    }
}
--- FIN DU FICHIER : ./docker/nginx/zenfleet.conf ---


////////////////////////////////////////////////////////////////
CHEMIN : ./docker/node/Dockerfile - Copy.ok:Zone.Identifier
////////////////////////////////////////////////////////////////


--- FIN DU FICHIER : ./docker/node/Dockerfile - Copy.ok:Zone.Identifier ---


////////////////////////////////////////////////////////////////
CHEMIN : ./docker/node/Dockerfile - Copy:Zone.Identifier
////////////////////////////////////////////////////////////////


--- FIN DU FICHIER : ./docker/node/Dockerfile - Copy:Zone.Identifier ---


////////////////////////////////////////////////////////////////
CHEMIN : ./docker/node/Dockerfile - OK
////////////////////////////////////////////////////////////////

# ~/projects/zenfleet/docker/node/Dockerfile - Version de Production Finale et Complète

FROM node:20-bullseye
ARG USER_ID
ARG GROUP_ID

# --- MISE À JOUR FINALE ---
# Étape 1 : Installer TOUTES les dépendances système requises par Chrome Headless
# Cette liste exhaustive garantit la compatibilité et prévient les erreurs de librairies partagées.
RUN apt-get update && apt-get install -y --no-install-recommends \
    # Utilitaires de base
    gosu \
    ca-certificates \
    netcat-openbsd \
    sudo \
    # Polices de caractères pour un rendu correct
    fonts-liberation \
    # Dépendances directes de Puppeteer/Chrome listées dans la documentation officielle
    libasound2 \
    libatk-bridge2.0-0 \
    libatspi2.0-0 \
    libcups2 \
    libdbus-1-3 \
    libdrm2 \
    libgbm1 \
    libgtk-3-0 \
    libnss3 \
    libx11-xcb1 \
    libxcomposite1 \
    libxcursor1 \
    libxdamage1 \
    libxext6 \
    libxfixes3 \
    libxi6 \
    libxrandr2 \
    libxrender1 \
    libxss1 \
    libxtst6 \
    && rm -rf /var/lib/apt/lists/*
# --- FIN DE LA MISE À JOUR ---

# Étape 2 : Création/modification robuste de l'utilisateur (inchangé)
RUN export TARGET_USER=zenfleet_user && \
    export TARGET_GROUP=zenfleet_user && \
    export TARGET_UID=${USER_ID:-1000} && \
    export TARGET_GID=${GROUP_ID:-1000} && \
    if getent group $TARGET_GID >/dev/null; then \
        EXISTING_GROUP_NAME=$(getent group $TARGET_GID | cut -d: -f1); \
        if [ "$EXISTING_GROUP_NAME" != "$TARGET_GROUP" ]; then groupmod -n $TARGET_GROUP $EXISTING_GROUP_NAME; fi; \
    else \
        groupadd -g $TARGET_GID $TARGET_GROUP; \
    fi && \
    if getent passwd $TARGET_UID >/dev/null; then \
        EXISTING_USER_NAME=$(getent passwd $TARGET_UID | cut -d: -f1); \
        usermod -l $TARGET_USER -g $TARGET_GROUP -d /home/$TARGET_USER -m $EXISTING_USER_NAME; \
    else \
        useradd -u $TARGET_UID -g $TARGET_GROUP -m -s /bin/bash $TARGET_USER; \
    fi

# Étape 3 : Définir le chemin du cache de Puppeteer comme variable d'environnement (inchangé)
ENV PUPPETEER_CACHE_DIR=/home/zenfleet_user/.cache/puppeteer

# Étape 4 : Créer le répertoire de cache et s'assurer que l'utilisateur en est propriétaire (inchangé)
RUN mkdir -p ${PUPPETEER_CACHE_DIR} && chown -R zenfleet_user:zenfleet_user /home/zenfleet_user

# Étape 5 : Définir le répertoire de travail (inchangé)
WORKDIR /app

# Étape 6 : Copier le manifeste des dépendances (inchangé)
COPY pdf-service/package.json ./package.json

# Étape 7 : Installer les dépendances. (inchangé)
RUN yarn install --production && npx puppeteer browsers install chrome

# Étape 8 : Copier le code source de l'application (inchangé)
COPY pdf-service/ .

# Étape 9 : Donner les permissions sur le code de l'application (inchangé)
RUN chown -R zenfleet_user:zenfleet_user /app

# Étape 10 : Configurer l'entrypoint (inchangé)
COPY ./docker/node/entrypoint.sh /usr/local/bin/entrypoint.sh
RUN chmod +x /usr/local/bin/entrypoint.sh
ENTRYPOINT ["/usr/local/bin/entrypoint.sh"]

# Étape 11 : Commande par défaut (inchangé)
CMD ["node", "server.js"]
--- FIN DU FICHIER : ./docker/node/Dockerfile - OK ---


////////////////////////////////////////////////////////////////
CHEMIN : ./docker/node/Dockerfile.ok
////////////////////////////////////////////////////////////////

# ~/projects/zenfleet/docker/node/Dockerfile
# Version corrigée pour fonctionner avec le contexte à la racine du projet

FROM node:20-bullseye
ARG USER_ID
ARG GROUP_ID

# Étape 1 : Installer les dépendances système nécessaires
RUN apt-get update && apt-get install -y --no-install-recommends \
    gosu \
    ca-certificates \
    fonts-liberation \
    libnss3 \
    libatk-bridge2.0-0 \
    libgtk-3-0 \
    libasound2 \
    libxshmfence1 \
    netcat-openbsd \
    curl \
    # Dépendances supplémentaires pour Puppeteer 24.x
    libxss1 \
    libgconf-2-4 \
    libxtst6 \
    libxrandr2 \
    libasound2 \
    libpangocairo-1.0-0 \
    libatk1.0-0 \
    libcairo-gobject2 \
    libgtk-3-0 \
    libgdk-pixbuf2.0-0 \
    && rm -rf /var/lib/apt/lists/*

# Étape 2 : Création robuste de l'utilisateur et du groupe
RUN export TARGET_USER=zenfleet_user && \
    export TARGET_GROUP=zenfleet_user && \
    export TARGET_UID=${USER_ID:-1000} && \
    export TARGET_GID=${GROUP_ID:-1000} && \
    if getent group $TARGET_GID >/dev/null; then \
        EXISTING_GROUP_NAME=$(getent group $TARGET_GID | cut -d: -f1); \
        if [ "$EXISTING_GROUP_NAME" != "$TARGET_GROUP" ]; then \
            groupmod -n $TARGET_GROUP $EXISTING_GROUP_NAME; \
        fi; \
    else \
        groupadd -g $TARGET_GID $TARGET_GROUP; \
    fi && \
    if getent passwd $TARGET_UID >/dev/null; then \
        EXISTING_USER_NAME=$(getent passwd $TARGET_UID | cut -d: -f1); \
        usermod -l $TARGET_USER -g $TARGET_GROUP $EXISTING_USER_NAME; \
    else \
        useradd -u $TARGET_UID -g $TARGET_GROUP -m -s /bin/bash $TARGET_USER; \
    fi

# Étape 3 : Définir le répertoire de travail
WORKDIR /var/www/html

# Étape 4 : Copier le package.json depuis la racine du projet
# Maintenant que le contexte est à la racine, package.json est accessible
COPY package.json package-lock.json* ./

# Étape 5 : Installer les dépendances Node.js
# Utiliser npm ci pour une installation plus rapide et déterministe si package-lock.json existe
RUN if [ -f package-lock.json ]; then \
        npm ci --only=production; \
    else \
        npm install --only=production; \
    fi

# Étape 6 : Installer Chrome via Puppeteer 24.x
# La nouvelle version de Puppeteer gère mieux l'installation de Chrome
RUN npx puppeteer browsers install chrome --path /home/zenfleet_user/.cache/puppeteer

# Étape 7 : Copier le code de l'application
# Copier tous les fichiers du projet (contexte à la racine)
COPY . .

# Étape 8 : Créer les répertoires nécessaires avec les bonnes permissions
RUN mkdir -p /home/zenfleet_user/.cache/puppeteer && \
    mkdir -p /var/www/html/storage/logs && \
    chown -R zenfleet_user:zenfleet_user /home/zenfleet_user/.cache && \
    chmod 755 /home/zenfleet_user/.cache && \
    chown -R zenfleet_user:zenfleet_user /var/www/html

# Étape 9 : Configurer l'entrypoint
COPY ./docker/node/entrypoint.sh /usr/local/bin/entrypoint.sh
RUN chmod +x /usr/local/bin/entrypoint.sh

# Étape 10 : Variables d'environnement pour Puppeteer 24.x
ENV PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true
ENV PUPPETEER_CACHE_DIR=/home/zenfleet_user/.cache/puppeteer
ENV NODE_ENV=production

# Étape 11 : Exposer le port
EXPOSE 3000

# Étape 12 : Healthcheck adapté pour Express 5.x
HEALTHCHECK --interval=15s --timeout=10s --start-period=45s --retries=5 \
    #CMD curl -f http://localhost:3000/health || exit 1
    CMD curl -f --max-time 5 http://localhost:3000/health || exit 1

# Étape 13 : Définir l'entrypoint et la commande
# IMPORTANT: Ne pas définir USER ici pour permettre à l'entrypoint de fonctionner
ENTRYPOINT ["/usr/local/bin/entrypoint.sh"]
CMD ["node", "server.js"]


--- FIN DU FICHIER : ./docker/node/Dockerfile.ok ---


////////////////////////////////////////////////////////////////
CHEMIN : ./docker/node/Dockerfile___
////////////////////////////////////////////////////////////////

FROM node:20-bullseye

# Installer les dépendances système critiques pour Puppeteer en tant que root
RUN apt-get update && apt-get install -y --no-install-recommends \
    ca-certificates fonts-liberation libnss3 libasound2 libatk-bridge2.0-0 libatk1.0-0 \
    libcups2 libdbus-1-3 libdrm2 libgbm1 libgtk-3-0 libx11-xcb1 libxcomposite1 \
    libxcursor1 libxdamage1 libxext6 libxfixes3 libxi6 libxrandr2 libxrender1 libxss1 libxtst6 \
    && rm -rf /var/lib/apt/lists/*

# Créer un utilisateur non-root pour la sécurité
RUN groupadd -r pptruser && useradd -r -g pptruser -G audio,video pptruser \
    && mkdir -p /home/pptruser/app \
    && chown -R pptruser:pptruser /home/pptruser

# Définir le répertoire de travail
WORKDIR /home/pptruser/app

# Passer à l'utilisateur non-root AVANT d'installer les dépendances
USER pptruser

# Copier uniquement package.json pour tirer parti du cache Docker
COPY --chown=pptruser:pptruser pdf-service/package.json ./

# Installer les dépendances. C'est ici que yarn.lock sera créé si absent.
RUN yarn install --frozen-lockfile || yarn install

# Copier le reste du code de l'application
COPY --chown=pptruser:pptruser pdf-service/ .

# La commande pour démarrer le service
CMD ["node", "server.js"]
--- FIN DU FICHIER : ./docker/node/Dockerfile___ ---


////////////////////////////////////////////////////////////////
CHEMIN : ./docker/node/entrypoint - Copy.sh
////////////////////////////////////////////////////////////////

#!/bin/bash
# Entrypoint optimisé pour Express 5.x et Puppeteer 24.x
set -e
#______AJOUTE SUR RECOMMANDATION DE DEEPSEEK
# Ajouter en début de script
if [ "$1" = "healthcheck" ]; then
    curl -f http://localhost:3000/health || exit 1
    exit 0
fi


# Fonction pour afficher des messages de debug avec timestamp et couleurs
log() {
    local level=${2:-INFO}
    local color=""
    case $level in
        "ERROR") color="\033[31m" ;; # Rouge
        "WARN")  color="\033[33m" ;; # Jaune
        "INFO")  color="\033[32m" ;; # Vert
        "DEBUG") color="\033[36m" ;; # Cyan
        *)       color="\033[0m"  ;; # Default
    esac
    echo -e "${color}[$(date '+%Y-%m-%d %H:%M:%S')] [ZenFleet Node Entrypoint] [$level] $1\033[0m"
}

log "Démarrage de l'entrypoint optimisé pour Express 5.x et Puppeteer 24.x..."



# === Étape 1 : Vérifier l'utilisateur actuel ===
CURRENT_USER=$(whoami)
log "Utilisateur actuel: $CURRENT_USER"

# === Étape 2 : Configuration en tant que root (si nécessaire) ===
if [ "$CURRENT_USER" = "root" ]; then
    log "Exécution en tant que root, configuration et passage à zenfleet_user..."
    log "DEBUG" "Configuration des répertoires..."

    # S'assurer que les répertoires nécessaires existent avec les bons droits
    mkdir -p /home/zenfleet_user/.cache/puppeteer
    mkdir -p /var/www/html # Répertoire de travail par défaut

    # Changer le propriétaire des dossiers nécessaires pour l'utilisateur non-root
    chown -R zenfleet_user:zenfleet_user /home/zenfleet_user/.cache/puppeteer
    # Si /var/www/html est monté comme volume, il peut être utile de le chown aussi
    # chown -R zenfleet_user:zenfleet_user /var/www/html

    log "DEBUG" "Optimisation de l'environnement..."
    # Toute autre optimisation spécifique peut aller ici

    # === Étape 3 : Passer à l'utilisateur non-root ===
    log "Passage à l'utilisateur zenfleet_user (UID: $(id -u zenfleet_user), GID: $(id -g zenfleet_user))..."
    # Utiliser gosu pour exécuter le reste du script en tant que zenfleet_user
    # "$0" est le chemin de ce script, "$@" sont les arguments passés au script
    exec gosu zenfleet_user "$0" "$@"
else
    # === Étape 4 : Exécuté en tant qu'utilisateur non-root (zenfleet_user) ===
    log "Maintenant exécuté en tant que $CURRENT_USER (UID: $(id -u), GID: $(id -g))."

    # === Étape 5 : Logique optionnelle en tant qu'utilisateur non-root ===
    log "DEBUG" "Vérification de la santé du système..."
    log "INFO" "Version Node.js détectée: $(node --version)"

    # Essayer de trouver Chrome (logique basée sur votre log)
    CHROME_PATH=""
    # Utiliser le cache dir défini dans l'environnement ou par défaut
    CACHE_DIR="${PUPPETEER_CACHE_DIR:-/home/zenfleet_user/.cache/puppeteer}"
    # Trouver le binaire Chrome (simplifié, peut nécessiter ajustement)
    if [ -d "$CACHE_DIR" ]; then
        # Trouver le premier exécutable Chrome trouvé (générique)
        #CHROME_PATH=$(find "$CACHE_DIR" -name "chrome" -type f -executable 2>/dev/null | head -n 1)
        CHROME_PATH="${PUPPETEER_CACHE_DIR}/chrome/linux-*/chrome-linux*/chrome"
    fi
    if [ -n "$CHROME_PATH" ]; then
         log "INFO" "Chrome trouvé: $CHROME_PATH"
    else
         log "WARN" "Chrome non trouvé dans $CACHE_DIR. Puppeteer pourrait échouer à le lancer."
    fi

    # Vérifier les dépendances Node.js (optionnel, mais utile pour le debug)
    if [ -f "package.json" ]; then
        EXPRESS_VERSION=$(node -p "require('./package.json').dependencies?.express || 'Not Found'")
        PUPPETEER_VERSION=$(node -p "require('./package.json').dependencies?.puppeteer || 'Not Found'")
        CORS_VERSION=$(node -p "require('./package.json').dependencies?.cors || 'Not Found'")
        log "INFO" "Express Version (from package.json dependencies): $EXPRESS_VERSION"
        log "INFO" "Puppeteer Version (from package.json dependencies): $PUPPETEER_VERSION"
        log "INFO" "Cors Version (from package.json dependencies): $CORS_VERSION"
    else
        log "WARN" "package.json non trouvé dans le répertoire de travail."
    fi

    # Vérifier si server.js existe
    if [ ! -f "server.js" ]; then
        log "ERROR" "server.js non trouvé dans le répertoire de travail (/var/www/html). Impossible de démarrer l'application."
        exit 1
    fi

    # === Étape 6 : Démarrer l'application ===
    # Vérifier s'il y a des commandes passées au conteneur
    if [ $# -gt 0 ]; then
        log "INFO" "Exécution de la commande passée au conteneur: $*"
        exec "$@"
    else
        # Démarrer l'application Node.js par défaut
        log "INFO" "Démarrage de l'application Node.js (server.js)..."
        exec node server.js
    fi
fi

# Si le script arrive ici, quelque chose s'est mal passé.
log "ERROR" "Le script entrypoint a atteint une fin inattendue."
exit 1
--- FIN DU FICHIER : ./docker/node/entrypoint - Copy.sh ---


////////////////////////////////////////////////////////////////
CHEMIN : ./docker/node/entrypoint - Copy.sh:Zone.Identifier
////////////////////////////////////////////////////////////////


--- FIN DU FICHIER : ./docker/node/entrypoint - Copy.sh:Zone.Identifier ---


////////////////////////////////////////////////////////////////
CHEMIN : ./docker/node/entrypoint.sh___supperime__2025-07-31
////////////////////////////////////////////////////////////////

#!/bin/bash
# Entrypoint optimisé pour Express 5.x et Puppeteer 24.x
set -e
#______AJOUTE SUR RECOMMANDATION DE DEEPSEEK
# Ajouter en début de script
if [ "$1" = "healthcheck" ]; then
    curl -f http://localhost:3000/health || exit 1
    exit 0
fi


# Fonction pour afficher des messages de debug avec timestamp et couleurs
log() {
    local level=${2:-INFO}
    local color=""
    case $level in
        "ERROR") color="\033[31m" ;; # Rouge
        "WARN")  color="\033[33m" ;; # Jaune
        "INFO")  color="\033[32m" ;; # Vert
        "DEBUG") color="\033[36m" ;; # Cyan
        *)       color="\033[0m"  ;; # Default
    esac
    echo -e "${color}[$(date '+%Y-%m-%d %H:%M:%S')] [ZenFleet Node Entrypoint] [$level] $1\033[0m"
}

log "Démarrage de l'entrypoint optimisé pour Express 5.x et Puppeteer 24.x..."



# === Étape 1 : Vérifier l'utilisateur actuel ===
CURRENT_USER=$(whoami)
log "Utilisateur actuel: $CURRENT_USER"

# === Étape 2 : Configuration en tant que root (si nécessaire) ===
if [ "$CURRENT_USER" = "root" ]; then
    log "Exécution en tant que root, configuration et passage à zenfleet_user..."
    log "DEBUG" "Configuration des répertoires..."

    # S'assurer que les répertoires nécessaires existent avec les bons droits
    mkdir -p /home/zenfleet_user/.cache/puppeteer
    mkdir -p /var/www/html # Répertoire de travail par défaut

    # Changer le propriétaire des dossiers nécessaires pour l'utilisateur non-root
    chown -R zenfleet_user:zenfleet_user /home/zenfleet_user/.cache/puppeteer
    # Si /var/www/html est monté comme volume, il peut être utile de le chown aussi
    # chown -R zenfleet_user:zenfleet_user /var/www/html

    log "DEBUG" "Optimisation de l'environnement..."
    # Toute autre optimisation spécifique peut aller ici

    # === Étape 3 : Passer à l'utilisateur non-root ===
    log "Passage à l'utilisateur zenfleet_user (UID: $(id -u zenfleet_user), GID: $(id -g zenfleet_user))..."
    # Utiliser gosu pour exécuter le reste du script en tant que zenfleet_user
    # "$0" est le chemin de ce script, "$@" sont les arguments passés au script
    exec gosu zenfleet_user "$0" "$@"
else
    # === Étape 4 : Exécuté en tant qu'utilisateur non-root (zenfleet_user) ===
    log "Maintenant exécuté en tant que $CURRENT_USER (UID: $(id -u), GID: $(id -g))."

    # === Étape 5 : Logique optionnelle en tant qu'utilisateur non-root ===
    log "DEBUG" "Vérification de la santé du système..."
    log "INFO" "Version Node.js détectée: $(node --version)"

    # Essayer de trouver Chrome (logique basée sur votre log)
    CHROME_PATH=""
    # Utiliser le cache dir défini dans l'environnement ou par défaut
    CACHE_DIR="${PUPPETEER_CACHE_DIR:-/home/zenfleet_user/.cache/puppeteer}"
    # Trouver le binaire Chrome (simplifié, peut nécessiter ajustement)
    if [ -d "$CACHE_DIR" ]; then
        # Trouver le premier exécutable Chrome trouvé (générique)
        #CHROME_PATH=$(find "$CACHE_DIR" -name "chrome" -type f -executable 2>/dev/null | head -n 1)
        CHROME_PATH="${PUPPETEER_CACHE_DIR}/chrome/linux-*/chrome-linux*/chrome"
    fi
    if [ -n "$CHROME_PATH" ]; then
         log "INFO" "Chrome trouvé: $CHROME_PATH"
    else
         log "WARN" "Chrome non trouvé dans $CACHE_DIR. Puppeteer pourrait échouer à le lancer."
    fi

    # Vérifier les dépendances Node.js (optionnel, mais utile pour le debug)
    if [ -f "package.json" ]; then
        EXPRESS_VERSION=$(node -p "require('./package.json').dependencies?.express || 'Not Found'")
        PUPPETEER_VERSION=$(node -p "require('./package.json').dependencies?.puppeteer || 'Not Found'")
        CORS_VERSION=$(node -p "require('./package.json').dependencies?.cors || 'Not Found'")
        log "INFO" "Express Version (from package.json dependencies): $EXPRESS_VERSION"
        log "INFO" "Puppeteer Version (from package.json dependencies): $PUPPETEER_VERSION"
        log "INFO" "Cors Version (from package.json dependencies): $CORS_VERSION"
    else
        log "WARN" "package.json non trouvé dans le répertoire de travail."
    fi

    # Vérifier si server.js existe
    if [ ! -f "server.js" ]; then
        log "ERROR" "server.js non trouvé dans le répertoire de travail (/var/www/html). Impossible de démarrer l'application."
        exit 1
    fi

    # === Étape 6 : Démarrer l'application ===
    # Vérifier s'il y a des commandes passées au conteneur
    if [ $# -gt 0 ]; then
        log "INFO" "Exécution de la commande passée au conteneur: $*"
        exec "$@"
    else
        # Démarrer l'application Node.js par défaut
        log "INFO" "Démarrage de l'application Node.js (server.js)..."
        exec node server.js
    fi
fi

# Si le script arrive ici, quelque chose s'est mal passé.
log "ERROR" "Le script entrypoint a atteint une fin inattendue."
exit 1
--- FIN DU FICHIER : ./docker/node/entrypoint.sh___supperime__2025-07-31 ---


////////////////////////////////////////////////////////////////
CHEMIN : ./docker/node_dev/Dockerfile
////////////////////////////////////////////////////////////////

FROM node:20-bullseye

ARG USER_ID
ARG GROUP_ID

# CORRECTION DÉFINITIVE :
# 1. Supprime l'utilisateur 'node' s'il existe pour libérer l'UID 1000.
# 2. Crée notre groupe et notre utilisateur avec les bons IDs.
RUN if getent passwd node > /dev/null 2>&1; then userdel -r node; fi && \
    groupadd --gid ${GROUP_ID:-1000} zenfleet_user && \
    useradd --uid ${USER_ID:-1000} --gid ${GROUP_ID:-1000} --shell /bin/bash --create-home zenfleet_user

# Préparer le répertoire de travail avec les bonnes permissions
RUN mkdir -p /var/www/html && chown -R zenfleet_user:zenfleet_user /var/www/html

WORKDIR /var/www/html
USER zenfleet_user
--- FIN DU FICHIER : ./docker/node_dev/Dockerfile ---


////////////////////////////////////////////////////////////////
CHEMIN : ./docker/php/Dockerfile
////////////////////////////////////////////////////////////////

FROM php:8.2-fpm-alpine

# Installer les dépendances système, y compris les librairies pour Redis
RUN apk update && apk add --no-cache \
    build-base autoconf automake libtool \
    bash ca-certificates curl git libzip-dev libpng-dev libjpeg-turbo-dev \
    freetype-dev supervisor icu-dev postgresql-dev linux-headers \
    redis # <-- AJOUT DE LA DÉPENDANCE REDIS

# Installer les extensions PHP
RUN docker-php-ext-configure gd --with-freetype --with-jpeg \
    && docker-php-ext-install -j$(nproc) gd \
    && docker-php-ext-install pdo pdo_pgsql pgsql zip exif intl bcmath sockets opcache

# Installer et activer l'extension Redis
RUN pecl install redis \
    && docker-php-ext-enable redis

# Installer Composer
RUN curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer

# Créer l'utilisateur
ARG USER_ID
ARG GROUP_ID
RUN addgroup -g ${GROUP_ID:-1000} zenfleet_user && \
    adduser -u ${USER_ID:-1000} -G zenfleet_user -s /bin/sh -D zenfleet_user

# Copier la configuration Supervisor
COPY ./docker/php/supervisord.conf /etc/supervisor/supervisord.conf

# Préparer les répertoires de l'application AVANT de copier le code
USER root
RUN mkdir -p /var/www/html/storage/framework/sessions \
             /var/www/html/storage/framework/views \
             /var/www/html/storage/framework/cache \
             /var/www/html/storage/logs \
    && chown -R zenfleet_user:zenfleet_user /var/www/html

# Passer à l'utilisateur de l'application
USER zenfleet_user
WORKDIR /var/www/html

# Copier le code et installer les dépendances
COPY --chown=zenfleet_user:zenfleet_user . .
RUN composer install --no-dev --optimize-autoloader

CMD ["/usr/bin/supervisord", "-c", "/etc/supervisor/supervisord.conf"]
--- FIN DU FICHIER : ./docker/php/Dockerfile ---


////////////////////////////////////////////////////////////////
CHEMIN : ./docker/php/supervisord.conf
////////////////////////////////////////////////////////////////

[supervisord]
nodaemon=true
user=zenfleet_user  ; <-- Changement critique : tout est géré par l'utilisateur de l'app

[program:php-fpm]
command=php-fpm -F -R  ; -R permet de s'exécuter en tant que non-root
autostart=true
autorestart=true
priority=5
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0

[program:laravel-worker]
process_name=%(program_name)s_%(process_num)02d
command=php /var/www/html/artisan queue:work --sleep=3 --tries=3
autostart=true
autorestart=true
user=zenfleet_user
numprocs=2
redirect_stderr=true
stdout_logfile=/var/www/html/storage/logs/worker.log
--- FIN DU FICHIER : ./docker/php/supervisord.conf ---


////////////////////////////////////////////////////////////////
CHEMIN : ./pdf-service/Dockerfile
////////////////////////////////////////////////////////////////

# Étape 1 : Image de base
FROM node:20-bullseye

# Installer toutes les dépendances système requises par Chromium
RUN apt-get update && apt-get install -y --no-install-recommends \
    ca-certificates fonts-liberation libnss3 libasound2 libatk-bridge2.0-0 libatk1.0-0 \
    libcups2 libdbus-1-3 libdrm2 libgbm1 libgtk-3-0 libx11-xcb1 libxcomposite1 \
    libxcursor1 libxdamage1 libxext6 libxfixes3 libxi6 libxrandr2 libxrender1 libxss1 libxtst6 \
    curl \
    && rm -rf /var/lib/apt/lists/*

# Créer un utilisateur non-root pour la sécurité
RUN groupadd -r pptruser && useradd -r -g pptruser -G audio,video pptruser \
    && mkdir -p /home/pptruser/app \
    && chown -R pptruser:pptruser /home/pptruser

# Définir le répertoire de travail
WORKDIR /home/pptruser/app

# Passer à l'utilisateur non-root
USER pptruser

# Copier uniquement package.json et yarn.lock pour tirer parti du cache Docker
COPY package.json yarn.lock* ./

# Installer les dépendances. La double commande est une sécurité.
RUN yarn install --frozen-lockfile || yarn install

# Copier le reste du code de l'application
COPY . .

# Exposer le port du service
EXPOSE 3000

# La commande pour démarrer le serveur
CMD ["node", "server.js"]
--- FIN DU FICHIER : ./pdf-service/Dockerfile ---


////////////////////////////////////////////////////////////////
CHEMIN : ./pdf-service/package.json
////////////////////////////////////////////////////////////////

{
  "name": "zenfleet-pdf-service",
  "version": "1.0.0",
  "description": "Microservice de génération de PDF pour ZenFleet",
  "main": "server.js",
  "type": "module",
  "private": true,
  "scripts": {
    "start": "node server.js"
  },
  "dependencies": {
    "cors": "^2.8.5",
    "express": "^4.19.2",
    "puppeteer": "^22.12.1"
  }
}
--- FIN DU FICHIER : ./pdf-service/package.json ---


////////////////////////////////////////////////////////////////
CHEMIN : ./pdf-service/server - Copy.js:Zone.Identifier
////////////////////////////////////////////////////////////////


--- FIN DU FICHIER : ./pdf-service/server - Copy.js:Zone.Identifier ---


////////////////////////////////////////////////////////////////
CHEMIN : ./pdf-service/server.js
////////////////////////////////////////////////////////////////

import express from 'express';
import puppeteer from 'puppeteer';

const app = express();
const PORT = process.env.PORT || 3000;

app.use(express.json({ limit: '10mb' }));

app.get('/health', (req, res) => {
    res.status(200).json({ status: 'OK' });
});

app.post('/generate-pdf', async (req, res) => {
    const { html, options = {} } = req.body;

    if (!html) {
        return res.status(400).json({ error: 'Le contenu HTML est manquant.' });
    }

    let browser = null;
    try {
        console.log('Lancement du navigateur pour la génération PDF...');
        browser = await puppeteer.launch({
            headless: true,
            args: [
                '--no-sandbox',
                '--disable-setuid-sandbox',
                '--disable-dev-shm-usage',
                '--disable-gpu',
            ],
            executablePath: puppeteer.executablePath()
        });

        const page = await browser.newPage();
        
        // Émuler le média 'print' pour appliquer les styles @media print
        await page.emulateMediaType('print');

        // Définir le contenu de la page
        await page.setContent(html, { waitUntil: 'networkidle0' });

        // Options PDF par défaut, qui peuvent être surchargées par la requête
        const pdfOptions = {
            format: 'A4',
            printBackground: true,
            margin: {
                top: '15mm',
                right: '15mm',
                bottom: '15mm',
                left: '15mm',
            },
            ...options,
        };

        const pdfBuffer = await page.pdf(pdfOptions);
        console.log(`PDF généré avec succès (${(pdfBuffer.length / 1024).toFixed(2)} KB)`);

        res.setHeader('Content-Type', 'application/pdf');
        res.setHeader('Content-Disposition', 'attachment; filename="document.pdf"');
        res.send(pdfBuffer);

    } catch (error) {
        console.error('Erreur lors de la génération du PDF:', error);
        res.status(500).json({ error: 'Erreur serveur lors de la génération du PDF.', details: error.message });
    } finally {
        if (browser) {
            await browser.close();
            console.log('Navigateur fermé.');
        }
    }
});

app.listen(PORT, '0.0.0.0', () => {
    console.log(`🚀 Service PDF ZenFleet démarré sur le port ${PORT}`);
});
--- FIN DU FICHIER : ./pdf-service/server.js ---


////////////////////////////////////////////////////////////////
CHEMIN : ./pdf-service/server.js.ok
////////////////////////////////////////////////////////////////

import express from 'express';
import puppeteer from 'puppeteer';
import { fileURLToPath } from 'url';
import { dirname } from 'path';
import fs from 'fs';

const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);

const app = express();
const port = process.env.PORT || 3000;

// Configuration du middleware avec des limites appropriées pour Express 5.x
app.use(express.json({ 
    limit: '50mb',
    strict: false // Express 5.x par défaut est plus strict
}));
app.use(express.urlencoded({ 
    extended: true, 
    limit: '50mb',
    parameterLimit: 1000 // Nouvelle option Express 5.x
}));

// Variables globales pour la gestion du navigateur
let browser = null;
let isShuttingDown = false;
let initializationPromise = null;

// Configuration Puppeteer optimisée pour la version 24.x
const puppeteerConfig = {
    headless: 'new', // Nouvelle syntaxe Puppeteer 24.x
    args: [
        '--no-sandbox',
        '--disable-setuid-sandbox',
        '--disable-dev-shm-usage',
        '--disable-gpu',
        '--disable-web-security',
        '--disable-features=VizDisplayCompositor',
        '--run-all-compositor-stages-before-draw',
        '--memory-pressure-off',
        '--max_old_space_size=1536',
        '--disable-background-timer-throttling',
        '--disable-backgrounding-occluded-windows',
        '--disable-renderer-backgrounding',
        '--no-first-run',
        '--no-default-browser-check',
        '--disable-extensions',
        '--disable-plugins',
        '--disable-images',
        '--disable-javascript', // Désactiver JS pour améliorer les performances PDF
        '--virtual-time-budget=30000' // Nouvelle option Puppeteer 24.x
    ],
    timeout: 30000,
    protocolTimeout: 30000,
    // Configuration spécifique à Puppeteer 24.x
    waitForInitialPage: false,
    ignoreDefaultArgs: ['--enable-automation']
};

// Fonction pour logger avec timestamp
function log(message, level = 'INFO') {
    const timestamp = new Date().toISOString();
    console.log(`[${timestamp}] [${level}] [ZenFleet PDF Service] ${message}`);
}

// Fonction pour initialiser le navigateur avec retry (compatible Puppeteer 24.x)
async function initBrowser(retries = 3) {
    for (let attempt = 1; attempt <= retries; attempt++) {
        try {
            log(`Tentative d'initialisation du navigateur (${attempt}/${retries})...`);
            
            // Puppeteer 24.x - Nouvelle méthode de lancement
            browser = await puppeteer.launch(puppeteerConfig);
            
            // Test de fonctionnement avec une page simple
            const testPage = await browser.newPage();
            
            // Configuration de la page pour Puppeteer 24.x
            await testPage.setViewport({ 
                width: 1200, 
                height: 800,
                deviceScaleFactor: 1,
                isMobile: false,
                hasTouch: false
            });
            
            // Test simple de rendu
            await testPage.setContent('<html><body><h1>Test Init</h1></body></html>', {
                waitUntil: 'domcontentloaded',
                timeout: 10000
            });
            
            await testPage.close();
            
            log('Navigateur initialisé avec succès');
            return true;
            
        } catch (error) {
            log(`Erreur lors de l'initialisation du navigateur (tentative ${attempt}): ${error.message}`, 'ERROR');
            
            if (browser) {
                try {
                    await browser.close();
                } catch (closeError) {
                    log(`Erreur lors de la fermeture du navigateur: ${closeError.message}`, 'WARN');
                }
                browser = null;
            }
            
            if (attempt < retries) {
                const waitTime = Math.pow(2, attempt) * 1000; // Backoff exponentiel
                log(`Attente de ${waitTime}ms avant la prochaine tentative...`);
                await new Promise(resolve => setTimeout(resolve, waitTime));
            }
        }
    }
    
    log('Impossible d\'initialiser le navigateur après toutes les tentatives', 'ERROR');
    return false;
}

// Fonction pour fermer proprement le navigateur
async function closeBrowser() {
    if (browser) {
        try {
            await browser.close();
            log('Navigateur fermé proprement');
        } catch (error) {
            log(`Erreur lors de la fermeture du navigateur: ${error.message}`, 'ERROR');
        }
        browser = null;
    }
}

// Middleware de logging des requêtes (compatible Express 5.x)
app.use((req, res, next) => {
    const start = Date.now();
    
    // Express 5.x - Nouvelle méthode pour les événements de réponse
    res.on('finish', () => {
        const duration = Date.now() - start;
        log(`${req.method} ${req.path} - ${res.statusCode} - ${duration}ms`);
    });
    
    next();
});

// Endpoint de santé amélioré pour Puppeteer 24.x
app.get('/health', async (req, res) => {
    const healthStatus = {
        status: 'ok',
        timestamp: new Date().toISOString(),
        uptime: Math.floor(process.uptime()),
        memory: process.memoryUsage(),
        browser: browser ? 'connected' : 'disconnected',
        version: '2.0.0',
        environment: process.env.NODE_ENV || 'development',
        express_version: '5.1.0',
        puppeteer_version: '24.14.0'
    };
    
    // Test rapide du navigateur si disponible
    if (browser) {
        try {
            const pages = await browser.pages();
            const version = await browser.version();
            
            healthStatus.browser_pages = pages.length;
            healthStatus.browser_version = version;
            healthStatus.browser_status = 'healthy';
        } catch (error) {
            healthStatus.browser_status = 'unhealthy';
            healthStatus.browser_error = error.message;
            healthStatus.status = 'degraded';
        }
    }
    
    const statusCode = healthStatus.status === 'ok' ? 200 : 503;
    res.status(statusCode).json(healthStatus);
});

// Endpoint de test simple
app.get('/test', (req, res) => {
    res.json({
        message: 'Service PDF ZenFleet opérationnel',
        timestamp: new Date().toISOString(),
        browser_available: browser !== null,
        express_version: '5.1.0',
        puppeteer_version: '24.14.0'
    });
});

// Endpoint principal de génération PDF (optimisé pour Express 5.x et Puppeteer 24.x)
app.post('/generate-pdf', async (req, res) => {
    if (isShuttingDown) {
        return res.status(503).json({ 
            error: 'Service en cours d\'arrêt',
            retry_after: 30
        });
    }

    const startTime = Date.now();
    let page = null;
    const requestId = Math.random().toString(36).substr(2, 9);

    try {
        const { html, options = {} } = req.body;

        if (!html) {
            return res.status(400).json({ 
                error: 'Le contenu HTML est requis',
                request_id: requestId
            });
        }

        log(`[${requestId}] Début de génération PDF (taille HTML: ${html.length} caractères)`);

        // Vérifier que le navigateur est disponible
        if (!browser) {
            log(`[${requestId}] Navigateur non disponible, tentative de réinitialisation...`);
            const initialized = await initBrowser();
            if (!initialized) {
                throw new Error('Impossible d\'initialiser le navigateur');
            }
        }

        // Créer une nouvelle page avec configuration optimisée pour Puppeteer 24.x
        page = await browser.newPage();
        
        // Configuration de la page pour Puppeteer 24.x
        await page.setViewport({ 
            width: 1200, 
            height: 800,
            deviceScaleFactor: 1,
            isMobile: false,
            hasTouch: false
        });

        // Puppeteer 24.x - Nouvelle méthode d'interception des requêtes
        await page.setRequestInterception(true);
        page.on('request', (request) => {
            const resourceType = request.resourceType();
            // Bloquer les ressources inutiles pour améliorer les performances
            if (['image', 'stylesheet', 'font', 'media'].includes(resourceType)) {
                request.abort();
            } else {
                request.continue();
            }
        });

        // Puppeteer 24.x - Options de navigation améliorées
        await page.setContent(html, { 
            waitUntil: 'domcontentloaded',
            timeout: 30000
        });

        // Attendre que le contenu soit complètement rendu
        await page.evaluateHandle('document.fonts.ready');

        // Options par défaut pour le PDF (compatibles Puppeteer 24.x)
        const pdfOptions = {
            format: 'A4',
            printBackground: true,
            margin: {
                top: '1cm',
                right: '1cm',
                bottom: '1cm',
                left: '1cm'
            },
            preferCSSPageSize: true,
            // Nouvelles options Puppeteer 24.x
            tagged: false, // Désactiver le PDF tagué pour améliorer les performances
            outline: false, // Désactiver les signets
            ...options
        };

        log(`[${requestId}] Génération du PDF avec les options:`, JSON.stringify(pdfOptions));
        
        // Générer le PDF avec Puppeteer 24.x
        const pdfBuffer = await page.pdf(pdfOptions);

        const duration = Date.now() - startTime;
        const sizeKB = Math.round(pdfBuffer.length / 1024 * 100) / 100;
        
        log(`[${requestId}] PDF généré avec succès en ${duration}ms, taille: ${sizeKB}KB`);

        // Headers de réponse optimisés pour Express 5.x
        res.set({
            'Content-Type': 'application/pdf',
            'Content-Length': pdfBuffer.length,
            'X-Generation-Time': `${duration}ms`,
            'X-Request-ID': requestId,
            'X-Express-Version': '5.1.0',
            'X-Puppeteer-Version': '24.14.0',
            'Cache-Control': 'no-cache, no-store, must-revalidate',
            'Pragma': 'no-cache',
            'Expires': '0'
        });

        res.send(pdfBuffer);

    } catch (error) {
        const duration = Date.now() - startTime;
        log(`[${requestId}] Erreur lors de la génération PDF (${duration}ms): ${error.message}`, 'ERROR');

        // Déterminer le code d'erreur approprié
        let statusCode = 500;
        if (error.message.includes('timeout')) {
            statusCode = 408;
        } else if (error.message.includes('navigation')) {
            statusCode = 422;
        } else if (error.message.includes('Protocol error')) {
            statusCode = 503; // Service temporairement indisponible
        }

        res.status(statusCode).json({
            error: 'Erreur lors de la génération du PDF',
            message: error.message,
            request_id: requestId,
            duration: `${duration}ms`,
            timestamp: new Date().toISOString(),
            express_version: '5.1.0',
            puppeteer_version: '24.14.0'
        });
    } finally {
        // Fermer la page si elle a été créée
        if (page) {
            try {
                await page.close();
            } catch (error) {
                log(`[${requestId}] Erreur lors de la fermeture de la page: ${error.message}`, 'WARN');
            }
        }
    }
});

// Gestion des erreurs globales (Express 5.x)
app.use((error, req, res, next) => {
    log(`Erreur non gérée: ${error.message}`, 'ERROR');
    log(`Stack trace: ${error.stack}`, 'ERROR');
    
    if (!res.headersSent) {
        res.status(500).json({
            error: 'Erreur interne du serveur',
            message: error.message,
            timestamp: new Date().toISOString(),
            express_version: '5.1.0'
        });
    }
});

// Gestion des routes non trouvées (Express 5.x)
app.use('*', (req, res) => {
    res.status(404).json({
        error: 'Endpoint non trouvé',
        path: req.originalUrl,
        method: req.method,
        available_endpoints: [
            'GET /health - Vérification de l\'état du service',
            'GET /test - Test simple du service',
            'POST /generate-pdf - Génération de PDF'
        ],
        express_version: '5.1.0'
    });
});

// Gestion de l'arrêt propre
async function gracefulShutdown(signal) {
    log(`Signal ${signal} reçu, arrêt en cours...`);
    isShuttingDown = true;
    
    // Attendre un peu pour permettre aux requêtes en cours de se terminer
    await new Promise(resolve => setTimeout(resolve, 5000));
    
    await closeBrowser();
    log('Arrêt terminé');
    process.exit(0);
}

process.on('SIGTERM', () => gracefulShutdown('SIGTERM'));
process.on('SIGINT', () => gracefulShutdown('SIGINT'));

// Gestion des erreurs non capturées
process.on('uncaughtException', (error) => {
    log(`Exception non capturée: ${error.message}`, 'ERROR');
    log(`Stack trace: ${error.stack}`, 'ERROR');
    gracefulShutdown('uncaughtException');
});

process.on('unhandledRejection', (reason, promise) => {
    log(`Promesse rejetée non gérée: ${reason}`, 'ERROR');
    log(`Promise: ${promise}`, 'ERROR');
});

// Démarrage du serveur
async function startServer() {
    try {
        log('Démarrage du service PDF ZenFleet...');
        log(`Version Node.js: ${process.version}`);
        log(`Version Express: 5.1.0`);
        log(`Version Puppeteer: 24.14.0`);
        log(`Environnement: ${process.env.NODE_ENV || 'development'}`);
        
        // Initialiser le navigateur au démarrage
        initializationPromise = initBrowser();
        const browserInitialized = await initializationPromise;
        
        if (!browserInitialized) {
            log('Impossible de démarrer sans navigateur', 'ERROR');
            process.exit(1);
        }

        // Démarrer le serveur HTTP avec Express 5.x
        const server = app.listen(port, '0.0.0.0', () => {
            log(`Service en écoute sur le port ${port}`);
            log(`Endpoints disponibles:`);
            log(`  - POST http://localhost:${port}/generate-pdf`);
            log(`  - GET  http://localhost:${port}/health`);
            log(`  - GET  http://localhost:${port}/test`);
            log('Service PDF ZenFleet prêt à recevoir des requêtes');
        });

        // Configuration du serveur pour Express 5.x
        server.timeout = 120000; // 2 minutes
        server.keepAliveTimeout = 65000;
        server.headersTimeout = 66000;
        server.requestTimeout = 120000; // Nouvelle option Express 5.x

    } catch (error) {
        log(`Erreur lors du démarrage: ${error.message}`, 'ERROR');
        process.exit(1);
    }
}

// Démarrer le serveur
startServer();


--- FIN DU FICHIER : ./pdf-service/server.js.ok ---


////////////////////////////////////////////////////////////////
CHEMIN : ./pdf-service/server.js:Zone.Identifier
////////////////////////////////////////////////////////////////


--- FIN DU FICHIER : ./pdf-service/server.js:Zone.Identifier ---


////////////////////////////////////////////////////////////////
CHEMIN : ./pdf-service/server.js__
////////////////////////////////////////////////////////////////

import express from 'express';
import puppeteer from 'puppeteer';

const app = express();
const PORT = process.env.PORT || 3000;

app.use(express.json({ limit: '10mb' }));

app.get('/health', (req, res) => {
    res.status(200).json({ status: 'OK' });
});

app.post('/generate-pdf', async (req, res) => {
    const { html, options = {} } = req.body;

    if (!html) {
        return res.status(400).json({ error: 'Le contenu HTML est manquant.' });
    }

    let browser = null;
    try {
        console.log('Lancement du navigateur...');
        // Puppeteer trouvera automatiquement le navigateur installé dans le conteneur
        browser = await puppeteer.launch({
            headless: true,
            args: [
                '--no-sandbox',
                '--disable-setuid-sandbox',
                '--disable-dev-shm-usage',
                '--disable-gpu',
            ],
            executablePath: puppeteer.executablePath()
        });

        const page = await browser.newPage();
        await page.setContent(html, { waitUntil: 'networkidle0' });

        const pdfBuffer = await page.pdf({ format: 'A4', printBackground: true, ...options });
        console.log(`PDF généré avec succès (${(pdfBuffer.length / 1024).toFixed(2)} KB)`);

        res.setHeader('Content-Type', 'application/pdf');
        res.setHeader('Content-Disposition', 'attachment; filename="document.pdf"');
        res.send(pdfBuffer);

    } catch (error) {
        console.error('Erreur lors de la génération du PDF:', error);
        res.status(500).json({ error: 'Erreur serveur lors de la génération du PDF.', details: error.message });
    } finally {
        if (browser) await browser.close();
    }
});

app.listen(PORT, '0.0.0.0', () => {
    console.log(`🚀 Service PDF ZenFleet démarré sur le port ${PORT}`);
});
--- FIN DU FICHIER : ./pdf-service/server.js__ ---


////////////////////////////////////////////////////////////////
CHEMIN : ./public/.htaccess
////////////////////////////////////////////////////////////////

<IfModule mod_rewrite.c>
    <IfModule mod_negotiation.c>
        Options -MultiViews -Indexes
    </IfModule>

    RewriteEngine On

    # Handle Authorization Header
    RewriteCond %{HTTP:Authorization} .
    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

    # Redirect Trailing Slashes If Not A Folder...
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} (.+)/$
    RewriteRule ^ %1 [L,R=301]

    # Send Requests To Front Controller...
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ index.php [L]
</IfModule>

--- FIN DU FICHIER : ./public/.htaccess ---


////////////////////////////////////////////////////////////////
CHEMIN : ./public/build/assets/app-B11aCoLq.css
////////////////////////////////////////////////////////////////

.ts-control{border:1px solid #d0d0d0;padding:8px;width:100%;overflow:hidden;position:relative;z-index:1;box-sizing:border-box;box-shadow:inset 0 1px 1px #0000001a;border-radius:3px;display:flex;flex-wrap:wrap}.ts-wrapper.multi.has-items .ts-control{padding:5px 8px 2px}.full .ts-control{background-color:#fff}.disabled .ts-control,.disabled .ts-control *{cursor:default!important}.focus .ts-control{box-shadow:inset 0 1px 2px #00000026}.ts-control>*{vertical-align:baseline;display:inline-block}.ts-wrapper.multi .ts-control>div{cursor:pointer;margin:0 3px 3px 0;padding:2px 6px;background:#1da7ee;color:#fff;border:1px solid #0073bb}.ts-wrapper.multi .ts-control>div.active{background:#92c836;color:#fff;border:1px solid #00578d}.ts-wrapper.multi.disabled .ts-control>div,.ts-wrapper.multi.disabled .ts-control>div.active{color:#fff;background:#d2d2d2;border:1px solid #aaaaaa}.ts-control>input{flex:1 1 auto;min-width:7rem;display:inline-block!important;padding:0!important;min-height:0!important;max-height:none!important;max-width:100%!important;margin:0!important;text-indent:0!important;border:0 none!important;background:none!important;line-height:inherit!important;-webkit-user-select:auto!important;-moz-user-select:auto!important;user-select:auto!important;box-shadow:none!important}.ts-control>input::-ms-clear{display:none}.ts-control>input:focus{outline:none!important}.has-items .ts-control>input{margin:0 4px!important}.ts-control.rtl{text-align:right}.ts-control.rtl.single .ts-control:after{left:15px;right:auto}.ts-control.rtl .ts-control>input{margin:0 4px 0 -2px!important}.disabled .ts-control{opacity:.5;background-color:#fafafa}.input-hidden .ts-control>input{opacity:0;position:absolute;left:-10000px}.ts-dropdown{position:absolute;top:100%;left:0;width:100%;z-index:10;border:1px solid #d0d0d0;background:#fff;margin:.25rem 0 0;border-top:0 none;box-sizing:border-box;box-shadow:0 1px 3px #0000001a;border-radius:0 0 3px 3px}.ts-dropdown [data-selectable]{cursor:pointer;overflow:hidden}.ts-dropdown [data-selectable] .highlight{background:#7da8d033;border-radius:1px}.ts-dropdown .option,.ts-dropdown .optgroup-header,.ts-dropdown .no-results,.ts-dropdown .create{padding:5px 8px}.ts-dropdown .option,.ts-dropdown [data-disabled],.ts-dropdown [data-disabled] [data-selectable].option{cursor:inherit;opacity:.5}.ts-dropdown [data-selectable].option{opacity:1;cursor:pointer}.ts-dropdown .optgroup:first-child .optgroup-header{border-top:0 none}.ts-dropdown .optgroup-header{color:#303030;background:#fff;cursor:default}.ts-dropdown .active{background-color:#f5fafd;color:#495c68}.ts-dropdown .active.create{color:#495c68}.ts-dropdown .create{color:#30303080}.ts-dropdown .spinner{display:inline-block;width:30px;height:30px;margin:5px 8px}.ts-dropdown .spinner:after{content:" ";display:block;width:24px;height:24px;margin:3px;border-radius:50%;border:5px solid #d0d0d0;border-color:#d0d0d0 transparent #d0d0d0 transparent;animation:lds-dual-ring 1.2s linear infinite}@keyframes lds-dual-ring{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.ts-dropdown-content{overflow:hidden auto;max-height:200px;scroll-behavior:smooth}.ts-wrapper.plugin-drag_drop .ts-dragging{color:transparent!important}.ts-wrapper.plugin-drag_drop .ts-dragging>*{visibility:hidden!important}.plugin-checkbox_options:not(.rtl) .option input{margin-right:.5rem}.plugin-checkbox_options.rtl .option input{margin-left:.5rem}.plugin-clear_button{--ts-pr-clear-button: 1em}.plugin-clear_button .clear-button{opacity:0;position:absolute;top:50%;transform:translateY(-50%);right:2px;margin-right:0!important;background:transparent!important;transition:opacity .5s;cursor:pointer}.plugin-clear_button.form-select .clear-button,.plugin-clear_button.single .clear-button{right:max(var(--ts-pr-caret),8px)}.plugin-clear_button.focus.has-items .clear-button,.plugin-clear_button:not(.disabled):hover.has-items .clear-button{opacity:1}.ts-wrapper .dropdown-header{position:relative;padding:10px 8px;border-bottom:1px solid #d0d0d0;background:color-mix(#fff,#d0d0d0,85%);border-radius:3px 3px 0 0}.ts-wrapper .dropdown-header-close{position:absolute;right:8px;top:50%;color:#303030;opacity:.4;margin-top:-12px;line-height:20px;font-size:20px!important}.ts-wrapper .dropdown-header-close:hover{color:#000}.plugin-dropdown_input.focus.dropdown-active .ts-control{box-shadow:none;border:1px solid #d0d0d0}.plugin-dropdown_input .dropdown-input{border:1px solid #d0d0d0;border-width:0 0 1px;display:block;padding:8px;box-shadow:inset 0 1px 1px #0000001a;width:100%;background:transparent}.plugin-dropdown_input .items-placeholder{border:0 none!important;box-shadow:none!important;width:100%}.plugin-dropdown_input.has-items .items-placeholder,.plugin-dropdown_input.dropdown-active .items-placeholder{display:none!important}.ts-wrapper.plugin-input_autogrow.has-items .ts-control>input{min-width:0}.ts-wrapper.plugin-input_autogrow.has-items.focus .ts-control>input{flex:none;min-width:4px}.ts-wrapper.plugin-input_autogrow.has-items.focus .ts-control>input::-moz-placeholder{color:transparent}.ts-wrapper.plugin-input_autogrow.has-items.focus .ts-control>input::placeholder{color:transparent}.ts-dropdown.plugin-optgroup_columns .ts-dropdown-content{display:flex}.ts-dropdown.plugin-optgroup_columns .optgroup{border-right:1px solid #f2f2f2;border-top:0 none;flex-grow:1;flex-basis:0;min-width:0}.ts-dropdown.plugin-optgroup_columns .optgroup:last-child{border-right:0 none}.ts-dropdown.plugin-optgroup_columns .optgroup:before{display:none}.ts-dropdown.plugin-optgroup_columns .optgroup-header{border-top:0 none}.ts-wrapper.plugin-remove_button .item{display:inline-flex;align-items:center}.ts-wrapper.plugin-remove_button .item .remove{color:inherit;text-decoration:none;vertical-align:middle;display:inline-block;padding:0 6px;border-radius:0 2px 2px 0;box-sizing:border-box}.ts-wrapper.plugin-remove_button .item .remove:hover{background:#0000000d}.ts-wrapper.plugin-remove_button.disabled .item .remove:hover{background:none}.ts-wrapper.plugin-remove_button .remove-single{position:absolute;right:0;top:0;font-size:23px}.ts-wrapper.plugin-remove_button:not(.rtl) .item{padding-right:0!important}.ts-wrapper.plugin-remove_button:not(.rtl) .item .remove{border-left:1px solid #0073bb;margin-left:6px}.ts-wrapper.plugin-remove_button:not(.rtl) .item.active .remove{border-left-color:#00578d}.ts-wrapper.plugin-remove_button:not(.rtl).disabled .item .remove{border-left-color:#aaa}.ts-wrapper.plugin-remove_button.rtl .item{padding-left:0!important}.ts-wrapper.plugin-remove_button.rtl .item .remove{border-right:1px solid #0073bb;margin-right:6px}.ts-wrapper.plugin-remove_button.rtl .item.active .remove{border-right-color:#00578d}.ts-wrapper.plugin-remove_button.rtl.disabled .item .remove{border-right-color:#aaa}:root{--ts-pr-clear-button: 0px;--ts-pr-caret: 0px;--ts-pr-min: .75rem}.ts-wrapper.single .ts-control,.ts-wrapper.single .ts-control input{cursor:pointer}.ts-control:not(.rtl){padding-right:max(var(--ts-pr-min),var(--ts-pr-clear-button) + var(--ts-pr-caret))!important}.ts-control.rtl{padding-left:max(var(--ts-pr-min),var(--ts-pr-clear-button) + var(--ts-pr-caret))!important}.ts-wrapper{position:relative}.ts-dropdown,.ts-control,.ts-control input{color:#303030;font-family:inherit;font-size:13px;line-height:18px}.ts-control,.ts-wrapper.single.input-active .ts-control{background:#fff;cursor:text}.ts-hidden-accessible{border:0!important;clip:rect(0 0 0 0)!important;clip-path:inset(50%)!important;overflow:hidden!important;padding:0!important;position:absolute!important;width:1px!important;white-space:nowrap!important}.ts-wrapper.single .ts-control{--ts-pr-caret: 2rem}.ts-wrapper.single .ts-control:after{content:" ";display:block;position:absolute;top:50%;margin-top:-3px;width:0;height:0;border-style:solid;border-width:5px 5px 0 5px;border-color:#808080 transparent transparent transparent}.ts-wrapper.single .ts-control:not(.rtl):after{right:15px}.ts-wrapper.single .ts-control.rtl:after{left:15px}.ts-wrapper.single.dropdown-active .ts-control:after{margin-top:-4px;border-width:0 5px 5px 5px;border-color:transparent transparent #808080 transparent}.ts-wrapper.single.input-active .ts-control,.ts-wrapper.single.input-active .ts-control input{cursor:text}.ts-wrapper{display:flex;min-height:36px}.ts-wrapper.multi.has-items .ts-control{padding-left:5px;--ts-pr-min: $padding-x}.ts-wrapper.multi .ts-control [data-value]{text-shadow:0 1px 0 rgba(0,51,83,.3);border-radius:3px;background-color:color-mix(#1da7ee,#178ee9,60%);background-image:linear-gradient(to bottom,#1da7ee,#178ee9);background-repeat:repeat-x;box-shadow:0 1px #0003,inset 0 1px #ffffff08}.ts-wrapper.multi .ts-control [data-value].active{background-color:color-mix(#008fd8,#0075cf,60%);background-image:linear-gradient(to bottom,#008fd8,#0075cf);background-repeat:repeat-x}.ts-wrapper.multi.disabled .ts-control [data-value]{color:#999;text-shadow:none;background:none;box-shadow:none}.ts-wrapper.multi.disabled .ts-control [data-value],.ts-wrapper.multi.disabled .ts-control [data-value] .remove{border-color:#e6e6e6}.ts-wrapper.multi.disabled .ts-control [data-value] .remove{background:none}.ts-wrapper.single .ts-control{box-shadow:0 1px #0000000d,inset 0 1px #fffc;background-color:color-mix(#fefefe,#f2f2f2,60%);background-image:linear-gradient(to bottom,#fefefe,#f2f2f2);background-repeat:repeat-x}.ts-wrapper.single .ts-control,.ts-dropdown.single{border-color:#b8b8b8}.dropdown-active .ts-control{border-radius:3px 3px 0 0}.ts-dropdown .optgroup-header{padding-top:7px;font-weight:700;font-size:.85em}.ts-dropdown .optgroup{border-top:1px solid #f0f0f0}.ts-dropdown .optgroup:first-child{border-top:0 none}.flatpickr-calendar{background:transparent;opacity:0;display:none;text-align:center;visibility:hidden;padding:0;animation:none;direction:ltr;border:0;font-size:14px;line-height:24px;border-radius:5px;position:absolute;width:307.875px;box-sizing:border-box;touch-action:manipulation;background:#fff;box-shadow:1px 0 #e6e6e6,-1px 0 #e6e6e6,0 1px #e6e6e6,0 -1px #e6e6e6,0 3px 13px #00000014}.flatpickr-calendar.open,.flatpickr-calendar.inline{opacity:1;max-height:640px;visibility:visible}.flatpickr-calendar.open{display:inline-block;z-index:99999}.flatpickr-calendar.animate.open{animation:fpFadeInDown .3s cubic-bezier(.23,1,.32,1)}.flatpickr-calendar.inline{display:block;position:relative;top:2px}.flatpickr-calendar.static{position:absolute;top:calc(100% + 2px)}.flatpickr-calendar.static.open{z-index:999;display:block}.flatpickr-calendar.multiMonth .flatpickr-days .dayContainer:nth-child(n+1) .flatpickr-day.inRange:nth-child(7n+7){box-shadow:none!important}.flatpickr-calendar.multiMonth .flatpickr-days .dayContainer:nth-child(n+2) .flatpickr-day.inRange:nth-child(7n+1){box-shadow:-2px 0 #e6e6e6,5px 0 #e6e6e6}.flatpickr-calendar .hasWeeks .dayContainer,.flatpickr-calendar .hasTime .dayContainer{border-bottom:0;border-bottom-right-radius:0;border-bottom-left-radius:0}.flatpickr-calendar .hasWeeks .dayContainer{border-left:0}.flatpickr-calendar.hasTime .flatpickr-time{height:40px;border-top:1px solid #e6e6e6}.flatpickr-calendar.noCalendar.hasTime .flatpickr-time{height:auto}.flatpickr-calendar:before,.flatpickr-calendar:after{position:absolute;display:block;pointer-events:none;border:solid transparent;content:"";height:0;width:0;left:22px}.flatpickr-calendar.rightMost:before,.flatpickr-calendar.arrowRight:before,.flatpickr-calendar.rightMost:after,.flatpickr-calendar.arrowRight:after{left:auto;right:22px}.flatpickr-calendar.arrowCenter:before,.flatpickr-calendar.arrowCenter:after{left:50%;right:50%}.flatpickr-calendar:before{border-width:5px;margin:0 -5px}.flatpickr-calendar:after{border-width:4px;margin:0 -4px}.flatpickr-calendar.arrowTop:before,.flatpickr-calendar.arrowTop:after{bottom:100%}.flatpickr-calendar.arrowTop:before{border-bottom-color:#e6e6e6}.flatpickr-calendar.arrowTop:after{border-bottom-color:#fff}.flatpickr-calendar.arrowBottom:before,.flatpickr-calendar.arrowBottom:after{top:100%}.flatpickr-calendar.arrowBottom:before{border-top-color:#e6e6e6}.flatpickr-calendar.arrowBottom:after{border-top-color:#fff}.flatpickr-calendar:focus{outline:0}.flatpickr-wrapper{position:relative;display:inline-block}.flatpickr-months{display:flex}.flatpickr-months .flatpickr-month{background:transparent;color:#000000e6;fill:#000000e6;height:34px;line-height:1;text-align:center;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;overflow:hidden;flex:1}.flatpickr-months .flatpickr-prev-month,.flatpickr-months .flatpickr-next-month{-webkit-user-select:none;-moz-user-select:none;user-select:none;text-decoration:none;cursor:pointer;position:absolute;top:0;height:34px;padding:10px;z-index:3;color:#000000e6;fill:#000000e6}.flatpickr-months .flatpickr-prev-month.flatpickr-disabled,.flatpickr-months .flatpickr-next-month.flatpickr-disabled{display:none}.flatpickr-months .flatpickr-prev-month i,.flatpickr-months .flatpickr-next-month i{position:relative}.flatpickr-months .flatpickr-prev-month.flatpickr-prev-month,.flatpickr-months .flatpickr-next-month.flatpickr-prev-month{left:0}.flatpickr-months .flatpickr-prev-month.flatpickr-next-month,.flatpickr-months .flatpickr-next-month.flatpickr-next-month{right:0}.flatpickr-months .flatpickr-prev-month:hover,.flatpickr-months .flatpickr-next-month:hover{color:#959ea9}.flatpickr-months .flatpickr-prev-month:hover svg,.flatpickr-months .flatpickr-next-month:hover svg{fill:#f64747}.flatpickr-months .flatpickr-prev-month svg,.flatpickr-months .flatpickr-next-month svg{width:14px;height:14px}.flatpickr-months .flatpickr-prev-month svg path,.flatpickr-months .flatpickr-next-month svg path{transition:fill .1s;fill:inherit}.numInputWrapper{position:relative;height:auto}.numInputWrapper input,.numInputWrapper span{display:inline-block}.numInputWrapper input{width:100%}.numInputWrapper input::-ms-clear{display:none}.numInputWrapper input::-webkit-outer-spin-button,.numInputWrapper input::-webkit-inner-spin-button{margin:0;-webkit-appearance:none}.numInputWrapper span{position:absolute;right:0;width:14px;padding:0 4px 0 2px;height:50%;line-height:50%;opacity:0;cursor:pointer;border:1px solid rgba(57,57,57,.15);box-sizing:border-box}.numInputWrapper span:hover{background:#0000001a}.numInputWrapper span:active{background:#0003}.numInputWrapper span:after{display:block;content:"";position:absolute}.numInputWrapper span.arrowUp{top:0;border-bottom:0}.numInputWrapper span.arrowUp:after{border-left:4px solid transparent;border-right:4px solid transparent;border-bottom:4px solid rgba(57,57,57,.6);top:26%}.numInputWrapper span.arrowDown{top:50%}.numInputWrapper span.arrowDown:after{border-left:4px solid transparent;border-right:4px solid transparent;border-top:4px solid rgba(57,57,57,.6);top:40%}.numInputWrapper span svg{width:inherit;height:auto}.numInputWrapper span svg path{fill:#00000080}.numInputWrapper:hover{background:#0000000d}.numInputWrapper:hover span{opacity:1}.flatpickr-current-month{font-size:135%;line-height:inherit;font-weight:300;color:inherit;position:absolute;width:75%;left:12.5%;padding:7.48px 0 0;line-height:1;height:34px;display:inline-block;text-align:center;transform:translateZ(0)}.flatpickr-current-month span.cur-month{font-family:inherit;font-weight:700;color:inherit;display:inline-block;margin-left:.5ch;padding:0}.flatpickr-current-month span.cur-month:hover{background:#0000000d}.flatpickr-current-month .numInputWrapper{width:6ch;width:7ch�;display:inline-block}.flatpickr-current-month .numInputWrapper span.arrowUp:after{border-bottom-color:#000000e6}.flatpickr-current-month .numInputWrapper span.arrowDown:after{border-top-color:#000000e6}.flatpickr-current-month input.cur-year{background:transparent;box-sizing:border-box;color:inherit;cursor:text;padding:0 0 0 .5ch;margin:0;display:inline-block;font-size:inherit;font-family:inherit;font-weight:300;line-height:inherit;height:auto;border:0;border-radius:0;vertical-align:initial;-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield}.flatpickr-current-month input.cur-year:focus{outline:0}.flatpickr-current-month input.cur-year[disabled],.flatpickr-current-month input.cur-year[disabled]:hover{font-size:100%;color:#00000080;background:transparent;pointer-events:none}.flatpickr-current-month .flatpickr-monthDropdown-months{appearance:menulist;background:transparent;border:none;border-radius:0;box-sizing:border-box;color:inherit;cursor:pointer;font-size:inherit;font-family:inherit;font-weight:300;height:auto;line-height:inherit;margin:-1px 0 0;outline:none;padding:0 0 0 .5ch;position:relative;vertical-align:initial;-webkit-box-sizing:border-box;-webkit-appearance:menulist;-moz-appearance:menulist;width:auto}.flatpickr-current-month .flatpickr-monthDropdown-months:focus,.flatpickr-current-month .flatpickr-monthDropdown-months:active{outline:none}.flatpickr-current-month .flatpickr-monthDropdown-months:hover{background:#0000000d}.flatpickr-current-month .flatpickr-monthDropdown-months .flatpickr-monthDropdown-month{background-color:transparent;outline:none;padding:0}.flatpickr-weekdays{background:transparent;text-align:center;overflow:hidden;width:100%;display:flex;align-items:center;height:28px}.flatpickr-weekdays .flatpickr-weekdaycontainer{display:flex;flex:1}span.flatpickr-weekday{cursor:default;font-size:90%;background:transparent;color:#0000008a;line-height:1;margin:0;text-align:center;display:block;flex:1;font-weight:bolder}.dayContainer,.flatpickr-weeks{padding:1px 0 0}.flatpickr-days{position:relative;overflow:hidden;display:flex;align-items:flex-start;width:307.875px}.flatpickr-days:focus{outline:0}.dayContainer{padding:0;outline:0;text-align:left;width:307.875px;min-width:307.875px;max-width:307.875px;box-sizing:border-box;display:inline-block;display:flex;flex-wrap:wrap;-ms-flex-wrap:wrap;justify-content:space-around;transform:translateZ(0);opacity:1}.dayContainer+.dayContainer{box-shadow:-1px 0 #e6e6e6}.flatpickr-day{background:none;border:1px solid transparent;border-radius:150px;box-sizing:border-box;color:#393939;cursor:pointer;font-weight:400;width:14.2857143%;flex-basis:14.2857143%;max-width:39px;height:39px;line-height:39px;margin:0;display:inline-block;position:relative;justify-content:center;text-align:center}.flatpickr-day.inRange,.flatpickr-day.prevMonthDay.inRange,.flatpickr-day.nextMonthDay.inRange,.flatpickr-day.today.inRange,.flatpickr-day.prevMonthDay.today.inRange,.flatpickr-day.nextMonthDay.today.inRange,.flatpickr-day:hover,.flatpickr-day.prevMonthDay:hover,.flatpickr-day.nextMonthDay:hover,.flatpickr-day:focus,.flatpickr-day.prevMonthDay:focus,.flatpickr-day.nextMonthDay:focus{cursor:pointer;outline:0;background:#e6e6e6;border-color:#e6e6e6}.flatpickr-day.today{border-color:#959ea9}.flatpickr-day.today:hover,.flatpickr-day.today:focus{border-color:#959ea9;background:#959ea9;color:#fff}.flatpickr-day.selected,.flatpickr-day.startRange,.flatpickr-day.endRange,.flatpickr-day.selected.inRange,.flatpickr-day.startRange.inRange,.flatpickr-day.endRange.inRange,.flatpickr-day.selected:focus,.flatpickr-day.startRange:focus,.flatpickr-day.endRange:focus,.flatpickr-day.selected:hover,.flatpickr-day.startRange:hover,.flatpickr-day.endRange:hover,.flatpickr-day.selected.prevMonthDay,.flatpickr-day.startRange.prevMonthDay,.flatpickr-day.endRange.prevMonthDay,.flatpickr-day.selected.nextMonthDay,.flatpickr-day.startRange.nextMonthDay,.flatpickr-day.endRange.nextMonthDay{background:#569ff7;box-shadow:none;color:#fff;border-color:#569ff7}.flatpickr-day.selected.startRange,.flatpickr-day.startRange.startRange,.flatpickr-day.endRange.startRange{border-radius:50px 0 0 50px}.flatpickr-day.selected.endRange,.flatpickr-day.startRange.endRange,.flatpickr-day.endRange.endRange{border-radius:0 50px 50px 0}.flatpickr-day.selected.startRange+.endRange:not(:nth-child(7n+1)),.flatpickr-day.startRange.startRange+.endRange:not(:nth-child(7n+1)),.flatpickr-day.endRange.startRange+.endRange:not(:nth-child(7n+1)){box-shadow:-10px 0 #569ff7}.flatpickr-day.selected.startRange.endRange,.flatpickr-day.startRange.startRange.endRange,.flatpickr-day.endRange.startRange.endRange{border-radius:50px}.flatpickr-day.inRange{border-radius:0;box-shadow:-5px 0 #e6e6e6,5px 0 #e6e6e6}.flatpickr-day.flatpickr-disabled,.flatpickr-day.flatpickr-disabled:hover,.flatpickr-day.prevMonthDay,.flatpickr-day.nextMonthDay,.flatpickr-day.notAllowed,.flatpickr-day.notAllowed.prevMonthDay,.flatpickr-day.notAllowed.nextMonthDay{color:#3939394d;background:transparent;border-color:transparent;cursor:default}.flatpickr-day.flatpickr-disabled,.flatpickr-day.flatpickr-disabled:hover{cursor:not-allowed;color:#3939391a}.flatpickr-day.week.selected{border-radius:0;box-shadow:-5px 0 #569ff7,5px 0 #569ff7}.flatpickr-day.hidden{visibility:hidden}.rangeMode .flatpickr-day{margin-top:1px}.flatpickr-weekwrapper{float:left}.flatpickr-weekwrapper .flatpickr-weeks{padding:0 12px;box-shadow:1px 0 #e6e6e6}.flatpickr-weekwrapper .flatpickr-weekday{float:none;width:100%;line-height:28px}.flatpickr-weekwrapper span.flatpickr-day,.flatpickr-weekwrapper span.flatpickr-day:hover{display:block;width:100%;max-width:none;color:#3939394d;background:transparent;cursor:default;border:none}.flatpickr-innerContainer{display:block;display:flex;box-sizing:border-box;overflow:hidden}.flatpickr-rContainer{display:inline-block;padding:0;box-sizing:border-box}.flatpickr-time{text-align:center;outline:0;display:block;height:0;line-height:40px;max-height:40px;box-sizing:border-box;overflow:hidden;display:flex}.flatpickr-time:after{content:"";display:table;clear:both}.flatpickr-time .numInputWrapper{flex:1;width:40%;height:40px;float:left}.flatpickr-time .numInputWrapper span.arrowUp:after{border-bottom-color:#393939}.flatpickr-time .numInputWrapper span.arrowDown:after{border-top-color:#393939}.flatpickr-time.hasSeconds .numInputWrapper{width:26%}.flatpickr-time.time24hr .numInputWrapper{width:49%}.flatpickr-time input{background:transparent;box-shadow:none;border:0;border-radius:0;text-align:center;margin:0;padding:0;height:inherit;line-height:inherit;color:#393939;font-size:14px;position:relative;box-sizing:border-box;-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield}.flatpickr-time input.flatpickr-hour{font-weight:700}.flatpickr-time input.flatpickr-minute,.flatpickr-time input.flatpickr-second{font-weight:400}.flatpickr-time input:focus{outline:0;border:0}.flatpickr-time .flatpickr-time-separator,.flatpickr-time .flatpickr-am-pm{height:inherit;float:left;line-height:inherit;color:#393939;font-weight:700;width:2%;-webkit-user-select:none;-moz-user-select:none;user-select:none;align-self:center}.flatpickr-time .flatpickr-am-pm{outline:0;width:18%;cursor:pointer;text-align:center;font-weight:400}.flatpickr-time input:hover,.flatpickr-time .flatpickr-am-pm:hover,.flatpickr-time input:focus,.flatpickr-time .flatpickr-am-pm:focus{background:#eee}.flatpickr-input[readonly]{cursor:pointer}@keyframes fpFadeInDown{0%{opacity:0;transform:translate3d(0,-20px,0)}to{opacity:1;transform:translateZ(0)}}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/*! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com
 */*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:Inter,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}[type=text],input:where(:not([type])),[type=email],[type=url],[type=password],[type=number],[type=date],[type=datetime-local],[type=month],[type=search],[type=tel],[type=time],[type=week],[multiple],textarea,select{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border-color:#6b7280;border-width:1px;border-radius:0;padding:.5rem .75rem;font-size:1rem;line-height:1.5rem;--tw-shadow: 0 0 #0000}[type=text]:focus,input:where(:not([type])):focus,[type=email]:focus,[type=url]:focus,[type=password]:focus,[type=number]:focus,[type=date]:focus,[type=datetime-local]:focus,[type=month]:focus,[type=search]:focus,[type=tel]:focus,[type=time]:focus,[type=week]:focus,[multiple]:focus,textarea:focus,select:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-inset: var(--tw-empty, );--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: #2563eb;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow);border-color:#2563eb}input::-moz-placeholder,textarea::-moz-placeholder{color:#6b7280;opacity:1}input::placeholder,textarea::placeholder{color:#6b7280;opacity:1}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-date-and-time-value{min-height:1.5em;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit,::-webkit-datetime-edit-year-field,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute-field,::-webkit-datetime-edit-second-field,::-webkit-datetime-edit-millisecond-field,::-webkit-datetime-edit-meridiem-field{padding-top:0;padding-bottom:0}select{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right .5rem center;background-repeat:no-repeat;background-size:1.5em 1.5em;padding-right:2.5rem;-webkit-print-color-adjust:exact;print-color-adjust:exact}[multiple],[size]:where(select:not([size="1"])){background-image:initial;background-position:initial;background-repeat:unset;background-size:initial;padding-right:.75rem;-webkit-print-color-adjust:unset;print-color-adjust:unset}[type=checkbox],[type=radio]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;-webkit-print-color-adjust:exact;print-color-adjust:exact;display:inline-block;vertical-align:middle;background-origin:border-box;-webkit-user-select:none;-moz-user-select:none;user-select:none;flex-shrink:0;height:1rem;width:1rem;color:#2563eb;background-color:#fff;border-color:#6b7280;border-width:1px;--tw-shadow: 0 0 #0000}[type=checkbox]{border-radius:0}[type=radio]{border-radius:100%}[type=checkbox]:focus,[type=radio]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-inset: var(--tw-empty, );--tw-ring-offset-width: 2px;--tw-ring-offset-color: #fff;--tw-ring-color: #2563eb;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}[type=checkbox]:checked,[type=radio]:checked{border-color:transparent;background-color:currentColor;background-size:100% 100%;background-position:center;background-repeat:no-repeat}[type=checkbox]:checked{background-image:url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e")}@media (forced-colors: active){[type=checkbox]:checked{-webkit-appearance:auto;-moz-appearance:auto;appearance:auto}}[type=radio]:checked{background-image:url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3ccircle cx='8' cy='8' r='3'/%3e%3c/svg%3e")}@media (forced-colors: active){[type=radio]:checked{-webkit-appearance:auto;-moz-appearance:auto;appearance:auto}}[type=checkbox]:checked:hover,[type=checkbox]:checked:focus,[type=radio]:checked:hover,[type=radio]:checked:focus{border-color:transparent;background-color:currentColor}[type=checkbox]:indeterminate{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 16 16'%3e%3cpath stroke='white' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M4 8h8'/%3e%3c/svg%3e");border-color:transparent;background-color:currentColor;background-size:100% 100%;background-position:center;background-repeat:no-repeat}@media (forced-colors: active){[type=checkbox]:indeterminate{-webkit-appearance:auto;-moz-appearance:auto;appearance:auto}}[type=checkbox]:indeterminate:hover,[type=checkbox]:indeterminate:focus{border-color:transparent;background-color:currentColor}[type=file]{background:unset;border-color:inherit;border-width:0;border-radius:0;padding:0;font-size:unset;line-height:inherit}[type=file]:focus{outline:1px solid ButtonText;outline:1px auto -webkit-focus-ring-color}.form-input,.form-textarea,.form-select,.form-multiselect{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border-color:#6b7280;border-width:1px;border-radius:0;padding:.5rem .75rem;font-size:1rem;line-height:1.5rem;--tw-shadow: 0 0 #0000}.form-input:focus,.form-textarea:focus,.form-select:focus,.form-multiselect:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-inset: var(--tw-empty, );--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: #2563eb;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow);border-color:#2563eb}.form-input::-moz-placeholder,.form-textarea::-moz-placeholder{color:#6b7280;opacity:1}.form-input::placeholder,.form-textarea::placeholder{color:#6b7280;opacity:1}.form-input::-webkit-datetime-edit-fields-wrapper{padding:0}.form-input::-webkit-date-and-time-value{min-height:1.5em;text-align:inherit}.form-input::-webkit-datetime-edit{display:inline-flex}.form-input::-webkit-datetime-edit,.form-input::-webkit-datetime-edit-year-field,.form-input::-webkit-datetime-edit-month-field,.form-input::-webkit-datetime-edit-day-field,.form-input::-webkit-datetime-edit-hour-field,.form-input::-webkit-datetime-edit-minute-field,.form-input::-webkit-datetime-edit-second-field,.form-input::-webkit-datetime-edit-millisecond-field,.form-input::-webkit-datetime-edit-meridiem-field{padding-top:0;padding-bottom:0}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.pointer-events-none{pointer-events:none}.visible{visibility:visible}.invisible{visibility:hidden}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-0{top:0;right:0;bottom:0;left:0}.inset-y-0{top:0;bottom:0}.bottom-full{bottom:100%}.end-0{inset-inline-end:0px}.left-0{left:0}.right-0{right:0}.right-5{right:1.25rem}.start-0{inset-inline-start:0px}.top-0{top:0}.top-5{top:1.25rem}.z-0{z-index:0}.z-10{z-index:10}.z-20{z-index:20}.z-30{z-index:30}.z-40{z-index:40}.z-50{z-index:50}.z-\[100\]{z-index:100}.col-span-1{grid-column:span 1 / span 1}.mx-4{margin-left:1rem;margin-right:1rem}.mx-6{margin-left:1.5rem;margin-right:1.5rem}.mx-auto{margin-left:auto;margin-right:auto}.-ml-1{margin-left:-.25rem}.-ml-px{margin-left:-1px}.-mr-12{margin-right:-3rem}.-mt-px{margin-top:-1px}.mb-1{margin-bottom:.25rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.ml-1{margin-left:.25rem}.ml-2{margin-left:.5rem}.ml-3{margin-left:.75rem}.ml-4{margin-left:1rem}.mr-1{margin-right:.25rem}.mr-1\.5{margin-right:.375rem}.mr-2{margin-right:.5rem}.mr-3{margin-right:.75rem}.ms-2{margin-inline-start:.5rem}.ms-3{margin-inline-start:.75rem}.ms-4{margin-inline-start:1rem}.mt-0\.5{margin-top:.125rem}.mt-1{margin-top:.25rem}.mt-16{margin-top:4rem}.mt-2{margin-top:.5rem}.mt-3{margin-top:.75rem}.mt-4{margin-top:1rem}.mt-5{margin-top:1.25rem}.mt-6{margin-top:1.5rem}.mt-8{margin-top:2rem}.mt-auto{margin-top:auto}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.grid{display:grid}.hidden{display:none}.h-10{height:2.5rem}.h-12{height:3rem}.h-16{height:4rem}.h-2\.5{height:.625rem}.h-20{height:5rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-7{height:1.75rem}.h-8{height:2rem}.h-full{height:100%}.h-screen{height:100vh}.max-h-\[90vh\]{max-height:90vh}.min-h-\[120px\]{min-height:120px}.min-h-\[297mm\]{min-height:297mm}.min-h-screen{min-height:100vh}.w-0{width:0px}.w-1\/3{width:33.333333%}.w-10{width:2.5rem}.w-12{width:3rem}.w-16{width:4rem}.w-2\.5{width:.625rem}.w-2\/3{width:66.666667%}.w-20{width:5rem}.w-3\/4{width:75%}.w-32{width:8rem}.w-4{width:1rem}.w-48{width:12rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-64{width:16rem}.w-7{width:1.75rem}.w-72{width:18rem}.w-8{width:2rem}.w-auto{width:auto}.w-full{width:100%}.min-w-0{min-width:0px}.min-w-full{min-width:100%}.max-w-2xl{max-width:42rem}.max-w-4xl{max-width:56rem}.max-w-5xl{max-width:64rem}.max-w-7xl{max-width:80rem}.max-w-\[210mm\]{max-width:210mm}.max-w-full{max-width:100%}.max-w-lg{max-width:32rem}.max-w-md{max-width:28rem}.max-w-sm{max-width:24rem}.max-w-xl{max-width:36rem}.max-w-xs{max-width:20rem}.flex-1{flex:1 1 0%}.flex-shrink-0,.shrink-0{flex-shrink:0}.flex-grow{flex-grow:1}.origin-bottom{transform-origin:bottom}.origin-top{transform-origin:top}.translate-y-0{--tw-translate-y: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-2{--tw-translate-y: .5rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-4{--tw-translate-y: 1rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-180{--tw-rotate: 180deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-100{--tw-scale-x: 1;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-90{--tw-scale-x: .9;--tw-scale-y: .9;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-95{--tw-scale-x: .95;--tw-scale-y: .95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-default{cursor:default}.cursor-pointer{cursor:pointer}.resize{resize:both}.list-inside{list-style-position:inside}.list-decimal{list-style-type:decimal}.list-disc{list-style-type:disc}.break-inside-avoid{-moz-column-break-inside:avoid;break-inside:avoid}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.flex-col{flex-direction:column}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.justify-items-center{justify-items:center}.gap-1{gap:.25rem}.gap-12{gap:3rem}.gap-2{gap:.5rem}.gap-4{gap:1rem}.gap-6{gap:1.5rem}.gap-x-8{-moz-column-gap:2rem;column-gap:2rem}.gap-y-6{row-gap:1.5rem}.space-x-1>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.25rem * var(--tw-space-x-reverse));margin-left:calc(.25rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-3>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.75rem * var(--tw-space-x-reverse));margin-left:calc(.75rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.space-y-8>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(2rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(2rem * var(--tw-space-y-reverse))}.divide-y>:not([hidden])~:not([hidden]){--tw-divide-y-reverse: 0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse))}.divide-gray-200>:not([hidden])~:not([hidden]){--tw-divide-opacity: 1;border-color:rgb(229 231 235 / var(--tw-divide-opacity, 1))}.self-center{align-self:center}.justify-self-end{justify-self:end}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.overflow-y-hidden{overflow-y:hidden}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.whitespace-nowrap{white-space:nowrap}.whitespace-pre-wrap{white-space:pre-wrap}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-l-md{border-top-left-radius:.375rem;border-bottom-left-radius:.375rem}.rounded-r-md{border-top-right-radius:.375rem;border-bottom-right-radius:.375rem}.border{border-width:1px}.border-b{border-bottom-width:1px}.border-b-2{border-bottom-width:2px}.border-l-2{border-left-width:2px}.border-l-4{border-left-width:4px}.border-r{border-right-width:1px}.border-t{border-top-width:1px}.border-t-2{border-top-width:2px}.border-dotted{border-style:dotted}.border-amber-200{--tw-border-opacity: 1;border-color:rgb(253 230 138 / var(--tw-border-opacity, 1))}.border-black{--tw-border-opacity: 1;border-color:rgb(0 0 0 / var(--tw-border-opacity, 1))}.border-blue-200{--tw-border-opacity: 1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1))}.border-blue-400{--tw-border-opacity: 1;border-color:rgb(96 165 250 / var(--tw-border-opacity, 1))}.border-blue-500{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.border-gray-200{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.border-gray-300{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.border-gray-600{--tw-border-opacity: 1;border-color:rgb(75 85 99 / var(--tw-border-opacity, 1))}.border-green-200{--tw-border-opacity: 1;border-color:rgb(187 247 208 / var(--tw-border-opacity, 1))}.border-green-400{--tw-border-opacity: 1;border-color:rgb(74 222 128 / var(--tw-border-opacity, 1))}.border-green-500{--tw-border-opacity: 1;border-color:rgb(34 197 94 / var(--tw-border-opacity, 1))}.border-indigo-400{--tw-border-opacity: 1;border-color:rgb(129 140 248 / var(--tw-border-opacity, 1))}.border-primary-200{--tw-border-opacity: 1;border-color:rgb(186 230 253 / var(--tw-border-opacity, 1))}.border-red-200{--tw-border-opacity: 1;border-color:rgb(254 202 202 / var(--tw-border-opacity, 1))}.border-red-400{--tw-border-opacity: 1;border-color:rgb(248 113 113 / var(--tw-border-opacity, 1))}.border-red-500{--tw-border-opacity: 1;border-color:rgb(239 68 68 / var(--tw-border-opacity, 1))}.border-transparent{border-color:transparent}.border-violet-600{--tw-border-opacity: 1;border-color:rgb(124 58 237 / var(--tw-border-opacity, 1))}.border-yellow-400{--tw-border-opacity: 1;border-color:rgb(250 204 21 / var(--tw-border-opacity, 1))}.border-yellow-500{--tw-border-opacity: 1;border-color:rgb(234 179 8 / var(--tw-border-opacity, 1))}.bg-amber-50{--tw-bg-opacity: 1;background-color:rgb(255 251 235 / var(--tw-bg-opacity, 1))}.bg-black{--tw-bg-opacity: 1;background-color:rgb(0 0 0 / var(--tw-bg-opacity, 1))}.bg-blue-100{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.bg-blue-50{--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.bg-gray-100{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.bg-gray-200{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.bg-gray-300{--tw-bg-opacity: 1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1))}.bg-gray-400{--tw-bg-opacity: 1;background-color:rgb(156 163 175 / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-gray-500{--tw-bg-opacity: 1;background-color:rgb(107 114 128 / var(--tw-bg-opacity, 1))}.bg-gray-600{--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1))}.bg-gray-800{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}.bg-gray-900{--tw-bg-opacity: 1;background-color:rgb(17 24 39 / var(--tw-bg-opacity, 1))}.bg-green-100{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.bg-green-50{--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.bg-green-500{--tw-bg-opacity: 1;background-color:rgb(34 197 94 / var(--tw-bg-opacity, 1))}.bg-green-600{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.bg-indigo-100{--tw-bg-opacity: 1;background-color:rgb(224 231 255 / var(--tw-bg-opacity, 1))}.bg-indigo-50{--tw-bg-opacity: 1;background-color:rgb(238 242 255 / var(--tw-bg-opacity, 1))}.bg-indigo-600{--tw-bg-opacity: 1;background-color:rgb(79 70 229 / var(--tw-bg-opacity, 1))}.bg-primary-100{--tw-bg-opacity: 1;background-color:rgb(224 242 254 / var(--tw-bg-opacity, 1))}.bg-primary-50{--tw-bg-opacity: 1;background-color:rgb(240 249 255 / var(--tw-bg-opacity, 1))}.bg-primary-50\/50{background-color:#f0f9ff80}.bg-primary-600{--tw-bg-opacity: 1;background-color:rgb(2 132 199 / var(--tw-bg-opacity, 1))}.bg-red-100{--tw-bg-opacity: 1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.bg-red-50{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.bg-red-500{--tw-bg-opacity: 1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.bg-red-600{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1))}.bg-red-800{--tw-bg-opacity: 1;background-color:rgb(153 27 27 / var(--tw-bg-opacity, 1))}.bg-transparent{background-color:transparent}.bg-violet-50{--tw-bg-opacity: 1;background-color:rgb(245 243 255 / var(--tw-bg-opacity, 1))}.bg-violet-600{--tw-bg-opacity: 1;background-color:rgb(124 58 237 / var(--tw-bg-opacity, 1))}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-yellow-100{--tw-bg-opacity: 1;background-color:rgb(254 249 195 / var(--tw-bg-opacity, 1))}.bg-yellow-50{--tw-bg-opacity: 1;background-color:rgb(254 252 232 / var(--tw-bg-opacity, 1))}.bg-yellow-500{--tw-bg-opacity: 1;background-color:rgb(234 179 8 / var(--tw-bg-opacity, 1))}.bg-yellow-600{--tw-bg-opacity: 1;background-color:rgb(202 138 4 / var(--tw-bg-opacity, 1))}.bg-opacity-50{--tw-bg-opacity: .5}.bg-opacity-60{--tw-bg-opacity: .6}.bg-opacity-75{--tw-bg-opacity: .75}.bg-gradient-to-br{background-image:linear-gradient(to bottom right,var(--tw-gradient-stops))}.from-blue-50{--tw-gradient-from: #eff6ff var(--tw-gradient-from-position);--tw-gradient-to: rgb(239 246 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-gray-700{--tw-gradient-from: #374151 var(--tw-gradient-from-position);--tw-gradient-to: rgb(55 65 81 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-gray-700\/50{--tw-gradient-from: rgb(55 65 81 / .5) var(--tw-gradient-from-position);--tw-gradient-to: rgb(55 65 81 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-green-50{--tw-gradient-from: #f0fdf4 var(--tw-gradient-from-position);--tw-gradient-to: rgb(240 253 244 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-red-50{--tw-gradient-from: #fef2f2 var(--tw-gradient-from-position);--tw-gradient-to: rgb(254 242 242 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.via-transparent{--tw-gradient-to: rgb(0 0 0 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), transparent var(--tw-gradient-via-position), var(--tw-gradient-to)}.to-blue-100{--tw-gradient-to: #dbeafe var(--tw-gradient-to-position)}.to-green-100{--tw-gradient-to: #dcfce7 var(--tw-gradient-to-position)}.to-red-100{--tw-gradient-to: #fee2e2 var(--tw-gradient-to-position)}.bg-center{background-position:center}.fill-current{fill:currentColor}.stroke-gray-400{stroke:#9ca3af}.stroke-gray-600{stroke:#4b5563}.stroke-red-500{stroke:#ef4444}.object-cover{-o-object-fit:cover;object-fit:cover}.p-0\.5{padding:.125rem}.p-1{padding:.25rem}.p-10{padding:2.5rem}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-5{padding:1.25rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.px-0{padding-left:0;padding-right:0}.px-1{padding-left:.25rem;padding-right:.25rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-2\.5{padding-left:.625rem;padding-right:.625rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-0\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\.5{padding-top:.375rem;padding-bottom:.375rem}.py-12{padding-top:3rem;padding-bottom:3rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-1{padding-bottom:.25rem}.pb-4{padding-bottom:1rem}.pb-6{padding-bottom:1.5rem}.pl-10{padding-left:2.5rem}.pl-3{padding-left:.75rem}.pl-4{padding-left:1rem}.pr-4{padding-right:1rem}.pt-0\.5{padding-top:.125rem}.pt-1{padding-top:.25rem}.pt-12{padding-top:3rem}.pt-2{padding-top:.5rem}.pt-4{padding-top:1rem}.pt-6{padding-top:1.5rem}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-start{text-align:start}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.font-sans{font-family:Inter,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.italic{font-style:italic}.leading-5{line-height:1.25rem}.leading-6{line-height:1.5rem}.leading-relaxed{line-height:1.625}.leading-tight{line-height:1.25}.tracking-wider{letter-spacing:.05em}.tracking-widest{letter-spacing:.1em}.text-amber-500{--tw-text-opacity: 1;color:rgb(245 158 11 / var(--tw-text-opacity, 1))}.text-amber-700{--tw-text-opacity: 1;color:rgb(180 83 9 / var(--tw-text-opacity, 1))}.text-amber-800{--tw-text-opacity: 1;color:rgb(146 64 14 / var(--tw-text-opacity, 1))}.text-black{--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity, 1))}.text-blue-500{--tw-text-opacity: 1;color:rgb(59 130 246 / var(--tw-text-opacity, 1))}.text-blue-600{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-blue-700{--tw-text-opacity: 1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.text-blue-800{--tw-text-opacity: 1;color:rgb(30 64 175 / var(--tw-text-opacity, 1))}.text-blue-900{--tw-text-opacity: 1;color:rgb(30 58 138 / var(--tw-text-opacity, 1))}.text-gray-300{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-gray-800{--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.text-gray-900{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.text-green-500{--tw-text-opacity: 1;color:rgb(34 197 94 / var(--tw-text-opacity, 1))}.text-green-600{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.text-green-700{--tw-text-opacity: 1;color:rgb(21 128 61 / var(--tw-text-opacity, 1))}.text-green-800{--tw-text-opacity: 1;color:rgb(22 101 52 / var(--tw-text-opacity, 1))}.text-green-900{--tw-text-opacity: 1;color:rgb(20 83 45 / var(--tw-text-opacity, 1))}.text-indigo-600{--tw-text-opacity: 1;color:rgb(79 70 229 / var(--tw-text-opacity, 1))}.text-indigo-800{--tw-text-opacity: 1;color:rgb(55 48 163 / var(--tw-text-opacity, 1))}.text-orange-600{--tw-text-opacity: 1;color:rgb(234 88 12 / var(--tw-text-opacity, 1))}.text-primary-500{--tw-text-opacity: 1;color:rgb(14 165 233 / var(--tw-text-opacity, 1))}.text-primary-600{--tw-text-opacity: 1;color:rgb(2 132 199 / var(--tw-text-opacity, 1))}.text-primary-700{--tw-text-opacity: 1;color:rgb(3 105 161 / var(--tw-text-opacity, 1))}.text-primary-800{--tw-text-opacity: 1;color:rgb(7 89 133 / var(--tw-text-opacity, 1))}.text-red-500{--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-red-700{--tw-text-opacity: 1;color:rgb(185 28 28 / var(--tw-text-opacity, 1))}.text-red-800{--tw-text-opacity: 1;color:rgb(153 27 27 / var(--tw-text-opacity, 1))}.text-violet-600{--tw-text-opacity: 1;color:rgb(124 58 237 / var(--tw-text-opacity, 1))}.text-violet-700{--tw-text-opacity: 1;color:rgb(109 40 217 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-yellow-500{--tw-text-opacity: 1;color:rgb(234 179 8 / var(--tw-text-opacity, 1))}.text-yellow-600{--tw-text-opacity: 1;color:rgb(202 138 4 / var(--tw-text-opacity, 1))}.text-yellow-700{--tw-text-opacity: 1;color:rgb(161 98 7 / var(--tw-text-opacity, 1))}.text-yellow-800{--tw-text-opacity: 1;color:rgb(133 77 14 / var(--tw-text-opacity, 1))}.underline{text-decoration-line:underline}.antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.opacity-0{opacity:0}.opacity-100{opacity:1}.opacity-25{opacity:.25}.opacity-75{opacity:.75}.shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-2xl{--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-inner{--tw-shadow: inset 0 2px 4px 0 rgb(0 0 0 / .05);--tw-shadow-colored: inset 0 2px 4px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-md{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-gray-500{--tw-shadow-color: #6b7280;--tw-shadow: var(--tw-shadow-colored)}.shadow-gray-500\/20{--tw-shadow-color: rgb(107 114 128 / .2);--tw-shadow: var(--tw-shadow-colored)}.ring-1{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-inset{--tw-ring-inset: inset}.ring-black{--tw-ring-opacity: 1;--tw-ring-color: rgb(0 0 0 / var(--tw-ring-opacity, 1))}.ring-gray-300{--tw-ring-opacity: 1;--tw-ring-color: rgb(209 213 219 / var(--tw-ring-opacity, 1))}.ring-gray-400{--tw-ring-opacity: 1;--tw-ring-color: rgb(156 163 175 / var(--tw-ring-opacity, 1))}.ring-white{--tw-ring-opacity: 1;--tw-ring-color: rgb(255 255 255 / var(--tw-ring-opacity, 1))}.ring-opacity-5{--tw-ring-opacity: .05}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-sm{--tw-backdrop-blur: blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-100{transition-duration:.1s}.duration-150{transition-duration:.15s}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}.duration-75{transition-duration:75ms}.ease-in{transition-timing-function:cubic-bezier(.4,0,1,1)}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.ease-linear{transition-timing-function:linear}.ease-out{transition-timing-function:cubic-bezier(0,0,.2,1)}nav[x-data]{font-size:.925rem}nav[x-data] a svg,nav[x-data] button svg{height:1.25rem;width:1.25rem}nav[x-data] .group .mr-3 svg{color:#6b7280}nav[x-data] .group:hover .mr-3 svg{color:#374151}nav[x-data] .sub-link-icon svg{color:inherit}.sub-link-icon-wrapper{display:inline-flex;align-items:center;justify-content:center;height:1.5rem;width:1.5rem;border-radius:9999px;border:1px solid #d1d5db;transition:all .2s ease-in-out}.sub-link-icon-wrapper svg{height:inherit!important;width:inherit!important;color:#6b7280;transition:color .2s ease-in-out}a.active .sub-link-icon-wrapper{background-color:#0284c7;border-color:#0284c7}a.active .sub-link-icon-wrapper svg{color:#fff}@media print{body *{visibility:hidden}#print-area,#print-area *{visibility:visible}#print-area{position:absolute;left:0;top:0;width:100%;box-shadow:none!important;border:none!important}.print\:hidden{display:none!important}body,#print-area{font-size:10pt;background-color:#fff!important;-webkit-print-color-adjust:exact;print-color-adjust:exact}}.selection\:bg-red-500 *::-moz-selection{--tw-bg-opacity: 1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.selection\:bg-red-500 *::selection{--tw-bg-opacity: 1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.selection\:text-white *::-moz-selection{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.selection\:text-white *::selection{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.selection\:bg-red-500::-moz-selection{--tw-bg-opacity: 1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.selection\:bg-red-500::selection{--tw-bg-opacity: 1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.selection\:text-white::-moz-selection{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.selection\:text-white::selection{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.file\:mr-4::file-selector-button{margin-right:1rem}.file\:rounded-full::file-selector-button{border-radius:9999px}.file\:border-0::file-selector-button{border-width:0px}.file\:bg-primary-50::file-selector-button{--tw-bg-opacity: 1;background-color:rgb(240 249 255 / var(--tw-bg-opacity, 1))}.file\:bg-violet-50::file-selector-button{--tw-bg-opacity: 1;background-color:rgb(245 243 255 / var(--tw-bg-opacity, 1))}.file\:px-4::file-selector-button{padding-left:1rem;padding-right:1rem}.file\:py-2::file-selector-button{padding-top:.5rem;padding-bottom:.5rem}.file\:text-sm::file-selector-button{font-size:.875rem;line-height:1.25rem}.file\:font-semibold::file-selector-button{font-weight:600}.file\:text-primary-700::file-selector-button{--tw-text-opacity: 1;color:rgb(3 105 161 / var(--tw-text-opacity, 1))}.file\:text-violet-700::file-selector-button{--tw-text-opacity: 1;color:rgb(109 40 217 / var(--tw-text-opacity, 1))}.after\:inline-block:after{content:var(--tw-content);display:inline-block}.after\:h-1:after{content:var(--tw-content);height:.25rem}.after\:w-full:after{content:var(--tw-content);width:100%}.after\:border-4:after{content:var(--tw-content);border-width:4px}.after\:border-b:after{content:var(--tw-content);border-bottom-width:1px}.after\:border-gray-200:after{content:var(--tw-content);--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.after\:border-primary-600:after{content:var(--tw-content);--tw-border-opacity: 1;border-color:rgb(2 132 199 / var(--tw-border-opacity, 1))}.after\:content-\[\'\'\]:after{--tw-content: "";content:var(--tw-content)}.first\:ml-0:first-child{margin-left:0}.hover\:border-gray-300:hover{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.hover\:bg-blue-100:hover{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-100:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-200:hover{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-300:hover{--tw-bg-opacity: 1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-50:hover{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-500:hover{--tw-bg-opacity: 1;background-color:rgb(107 114 128 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-700:hover{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.hover\:bg-green-100:hover{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.hover\:bg-green-600:hover{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.hover\:bg-green-700:hover{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity, 1))}.hover\:bg-primary-100:hover{--tw-bg-opacity: 1;background-color:rgb(224 242 254 / var(--tw-bg-opacity, 1))}.hover\:bg-primary-200:hover{--tw-bg-opacity: 1;background-color:rgb(186 230 253 / var(--tw-bg-opacity, 1))}.hover\:bg-primary-700:hover{--tw-bg-opacity: 1;background-color:rgb(3 105 161 / var(--tw-bg-opacity, 1))}.hover\:bg-red-100:hover{--tw-bg-opacity: 1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.hover\:bg-red-50:hover{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.hover\:bg-red-500:hover{--tw-bg-opacity: 1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.hover\:bg-red-700:hover{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity, 1))}.hover\:bg-violet-100:hover{--tw-bg-opacity: 1;background-color:rgb(237 233 254 / var(--tw-bg-opacity, 1))}.hover\:bg-violet-700:hover{--tw-bg-opacity: 1;background-color:rgb(109 40 217 / var(--tw-bg-opacity, 1))}.hover\:bg-white:hover{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.hover\:bg-yellow-100:hover{--tw-bg-opacity: 1;background-color:rgb(254 249 195 / var(--tw-bg-opacity, 1))}.hover\:bg-yellow-700:hover{--tw-bg-opacity: 1;background-color:rgb(161 98 7 / var(--tw-bg-opacity, 1))}.hover\:text-blue-600:hover{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.hover\:text-gray-400:hover{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.hover\:text-gray-500:hover{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.hover\:text-gray-600:hover{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.hover\:text-gray-700:hover{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.hover\:text-gray-900:hover{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.hover\:text-green-600:hover{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.hover\:text-primary-600:hover{--tw-text-opacity: 1;color:rgb(2 132 199 / var(--tw-text-opacity, 1))}.hover\:text-primary-800:hover{--tw-text-opacity: 1;color:rgb(7 89 133 / var(--tw-text-opacity, 1))}.hover\:text-red-600:hover{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.hover\:text-violet-600:hover{--tw-text-opacity: 1;color:rgb(124 58 237 / var(--tw-text-opacity, 1))}.hover\:text-violet-900:hover{--tw-text-opacity: 1;color:rgb(76 29 149 / var(--tw-text-opacity, 1))}.hover\:text-yellow-600:hover{--tw-text-opacity: 1;color:rgb(202 138 4 / var(--tw-text-opacity, 1))}.hover\:file\:bg-primary-100::file-selector-button:hover{--tw-bg-opacity: 1;background-color:rgb(224 242 254 / var(--tw-bg-opacity, 1))}.hover\:file\:bg-violet-100::file-selector-button:hover{--tw-bg-opacity: 1;background-color:rgb(237 233 254 / var(--tw-bg-opacity, 1))}.focus\:z-10:focus{z-index:10}.focus\:rounded-sm:focus{border-radius:.125rem}.focus\:border-blue-300:focus{--tw-border-opacity: 1;border-color:rgb(147 197 253 / var(--tw-border-opacity, 1))}.focus\:border-gray-300:focus{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.focus\:border-indigo-500:focus{--tw-border-opacity: 1;border-color:rgb(99 102 241 / var(--tw-border-opacity, 1))}.focus\:border-indigo-700:focus{--tw-border-opacity: 1;border-color:rgb(67 56 202 / var(--tw-border-opacity, 1))}.focus\:border-primary-500:focus{--tw-border-opacity: 1;border-color:rgb(14 165 233 / var(--tw-border-opacity, 1))}.focus\:border-violet-500:focus{--tw-border-opacity: 1;border-color:rgb(139 92 246 / var(--tw-border-opacity, 1))}.focus\:bg-gray-100:focus{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.focus\:bg-gray-700:focus{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.focus\:text-gray-700:focus{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\:outline:focus{outline-style:solid}.focus\:outline-2:focus{outline-width:2px}.focus\:outline-red-500:focus{outline-color:#ef4444}.focus\:ring:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(3px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\:ring-1:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\:ring-inset:focus{--tw-ring-inset: inset}.focus\:ring-indigo-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(99 102 241 / var(--tw-ring-opacity, 1))}.focus\:ring-primary-200:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(186 230 253 / var(--tw-ring-opacity, 1))}.focus\:ring-primary-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(14 165 233 / var(--tw-ring-opacity, 1))}.focus\:ring-red-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(239 68 68 / var(--tw-ring-opacity, 1))}.focus\:ring-violet-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(139 92 246 / var(--tw-ring-opacity, 1))}.focus\:ring-white:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(255 255 255 / var(--tw-ring-opacity, 1))}.focus\:ring-opacity-50:focus{--tw-ring-opacity: .5}.focus\:ring-offset-2:focus{--tw-ring-offset-width: 2px}.active\:bg-gray-100:active{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.active\:bg-gray-900:active{--tw-bg-opacity: 1;background-color:rgb(17 24 39 / var(--tw-bg-opacity, 1))}.active\:bg-red-700:active{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity, 1))}.active\:text-gray-500:active{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.active\:text-gray-700:active{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.disabled\:opacity-25:disabled{opacity:.25}.disabled\:opacity-50:disabled{opacity:.5}.group:hover .group-hover\:text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.group:hover .group-hover\:text-gray-900{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.group:hover .group-hover\:ring-gray-500{--tw-ring-opacity: 1;--tw-ring-color: rgb(107 114 128 / var(--tw-ring-opacity, 1))}@media (prefers-reduced-motion: no-preference){.motion-safe\:hover\:scale-\[1\.01\]:hover{--tw-scale-x: 1.01;--tw-scale-y: 1.01;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}}@media (min-width: 640px){.sm\:fixed{position:fixed}.sm\:right-0{right:0}.sm\:top-0{top:0}.sm\:mx-0{margin-left:0;margin-right:0}.sm\:mx-auto{margin-left:auto;margin-right:auto}.sm\:ml-0{margin-left:0}.sm\:ml-3{margin-left:.75rem}.sm\:ml-4{margin-left:1rem}.sm\:mt-0{margin-top:0}.sm\:mt-4{margin-top:1rem}.sm\:flex{display:flex}.sm\:hidden{display:none}.sm\:h-10{height:2.5rem}.sm\:w-10{width:2.5rem}.sm\:w-auto{width:auto}.sm\:w-full{width:100%}.sm\:max-w-2xl{max-width:42rem}.sm\:max-w-lg{max-width:32rem}.sm\:max-w-md{max-width:28rem}.sm\:max-w-sm{max-width:24rem}.sm\:max-w-xl{max-width:36rem}.sm\:flex-1{flex:1 1 0%}.sm\:translate-x-0{--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.sm\:translate-x-2{--tw-translate-x: .5rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.sm\:translate-y-0{--tw-translate-y: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.sm\:scale-100{--tw-scale-x: 1;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.sm\:scale-95{--tw-scale-x: .95;--tw-scale-y: .95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.sm\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.sm\:flex-row{flex-direction:row}.sm\:flex-row-reverse{flex-direction:row-reverse}.sm\:items-start{align-items:flex-start}.sm\:items-center{align-items:center}.sm\:justify-center{justify-content:center}.sm\:justify-between{justify-content:space-between}.sm\:rounded-lg{border-radius:.5rem}.sm\:p-8{padding:2rem}.sm\:px-0{padding-left:0;padding-right:0}.sm\:px-6{padding-left:1.5rem;padding-right:1.5rem}.sm\:pt-0{padding-top:0}.sm\:text-left{text-align:left}.sm\:text-right{text-align:right}}@media (min-width: 768px){.md\:col-span-2{grid-column:span 2 / span 2}.md\:mt-0{margin-top:0}.md\:block{display:block}.md\:hidden{display:none}.md\:w-1\/3{width:33.333333%}.md\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.md\:flex-row{flex-direction:row}.md\:items-end{align-items:flex-end}.md\:space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.md\:space-y-0>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(0px * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0px * var(--tw-space-y-reverse))}.md\:p-8{padding:2rem}.md\:px-8{padding-left:2rem;padding-right:2rem}}@media (min-width: 1024px){.lg\:col-span-3{grid-column:span 3 / span 3}.lg\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.lg\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.lg\:gap-8{gap:2rem}.lg\:p-8{padding:2rem}.lg\:px-8{padding-left:2rem;padding-right:2rem}}.ltr\:origin-top-left:where([dir=ltr],[dir=ltr] *){transform-origin:top left}.ltr\:origin-top-right:where([dir=ltr],[dir=ltr] *){transform-origin:top right}.rtl\:origin-top-left:where([dir=rtl],[dir=rtl] *){transform-origin:top left}.rtl\:origin-top-right:where([dir=rtl],[dir=rtl] *){transform-origin:top right}.rtl\:flex-row-reverse:where([dir=rtl],[dir=rtl] *){flex-direction:row-reverse}@media (prefers-color-scheme: dark){.dark\:border-gray-600{--tw-border-opacity: 1;border-color:rgb(75 85 99 / var(--tw-border-opacity, 1))}.dark\:bg-gray-800{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}.dark\:bg-gray-800\/50{background-color:#1f293780}.dark\:bg-gray-900{--tw-bg-opacity: 1;background-color:rgb(17 24 39 / var(--tw-bg-opacity, 1))}.dark\:bg-red-800\/20{background-color:#991b1b33}.dark\:bg-gradient-to-bl{background-image:linear-gradient(to bottom left,var(--tw-gradient-stops))}.dark\:text-gray-100{--tw-text-opacity: 1;color:rgb(243 244 246 / var(--tw-text-opacity, 1))}.dark\:text-gray-200{--tw-text-opacity: 1;color:rgb(229 231 235 / var(--tw-text-opacity, 1))}.dark\:text-gray-300{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.dark\:text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.dark\:text-gray-600{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.dark\:text-green-400{--tw-text-opacity: 1;color:rgb(74 222 128 / var(--tw-text-opacity, 1))}.dark\:text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.dark\:shadow-none{--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.dark\:ring-1{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.dark\:ring-inset{--tw-ring-inset: inset}.dark\:ring-white\/5{--tw-ring-color: rgb(255 255 255 / .05)}.dark\:hover\:text-gray-100:hover{--tw-text-opacity: 1;color:rgb(243 244 246 / var(--tw-text-opacity, 1))}.dark\:hover\:text-gray-300:hover{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.dark\:hover\:text-white:hover{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.dark\:focus\:border-blue-700:focus{--tw-border-opacity: 1;border-color:rgb(29 78 216 / var(--tw-border-opacity, 1))}.dark\:focus\:border-blue-800:focus{--tw-border-opacity: 1;border-color:rgb(30 64 175 / var(--tw-border-opacity, 1))}.dark\:focus\:ring-offset-gray-800:focus{--tw-ring-offset-color: #1f2937}.dark\:active\:bg-gray-700:active{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.dark\:active\:text-gray-300:active{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}}@media print{.print\:bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.print\:p-0{padding:0}.print\:shadow-none{--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}}

--- FIN DU FICHIER : ./public/build/assets/app-B11aCoLq.css ---


////////////////////////////////////////////////////////////////
CHEMIN : ./public/build/assets/app-CPhjo8g8.js
////////////////////////////////////////////////////////////////

var vl=Object.defineProperty;var yl=(s,l,a)=>l in s?vl(s,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[l]=a;var Gt=(s,l,a)=>yl(s,typeof l!="symbol"?l+"":l,a);function Cr(s,l){return function(){return s.apply(l,arguments)}}const{toString:wl}=Object.prototype,{getPrototypeOf:rs}=Object,{iterator:Xa,toStringTag:Sr}=Symbol,Ba=(s=>l=>{const a=wl.call(l);return s[a]||(s[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),yt=s=>(s=s.toLowerCase(),l=>Ba(l)===s),Wa=s=>l=>typeof l===s,{isArray:vi}=Array,Gi=Wa("undefined");function $i(s){return s!==null&&!Gi(s)&&s.constructor!==null&&!Gi(s.constructor)&&st(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const Mr=yt("ArrayBuffer");function Al(s){let l;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?l=ArrayBuffer.isView(s):l=s&&s.buffer&&Mr(s.buffer),l}const kl=Wa("string"),st=Wa("function"),Er=Wa("number"),qi=s=>s!==null&&typeof s=="object",Cl=s=>s===!0||s===!1,Sa=s=>{if(Ba(s)!=="object")return!1;const l=rs(s);return(l===null||l===Object.prototype||Object.getPrototypeOf(l)===null)&&!(Sr in s)&&!(Xa in s)},Sl=s=>{if(!qi(s)||$i(s))return!1;try{return Object.keys(s).length===0&&Object.getPrototypeOf(s)===Object.prototype}catch{return!1}},Ml=yt("Date"),El=yt("File"),Ll=yt("Blob"),Pl=yt("FileList"),Tl=s=>qi(s)&&st(s.pipe),Il=s=>{let l;return s&&(typeof FormData=="function"&&s instanceof FormData||st(s.append)&&((l=Ba(s))==="formdata"||l==="object"&&st(s.toString)&&s.toString()==="[object FormData]"))},_l=yt("URLSearchParams"),[Ol,Dl,Fl,Rl]=["ReadableStream","Request","Response","Headers"].map(yt),zl=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Zi(s,l,{allOwnKeys:a=!1}={}){if(s===null||typeof s>"u")return;let f,m;if(typeof s!="object"&&(s=[s]),vi(s))for(f=0,m=s.length;f<m;f++)l.call(null,s[f],f,s);else{if($i(s))return;const w=a?Object.getOwnPropertyNames(s):Object.keys(s),y=w.length;let T;for(f=0;f<y;f++)T=w[f],l.call(null,s[T],T,s)}}function Lr(s,l){if($i(s))return null;l=l.toLowerCase();const a=Object.keys(s);let f=a.length,m;for(;f-- >0;)if(m=a[f],l===m.toLowerCase())return m;return null}const qt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Pr=s=>!Gi(s)&&s!==qt;function Dn(){const{caseless:s}=Pr(this)&&this||{},l={},a=(f,m)=>{const w=s&&Lr(l,m)||m;Sa(l[w])&&Sa(f)?l[w]=Dn(l[w],f):Sa(f)?l[w]=Dn({},f):vi(f)?l[w]=f.slice():l[w]=f};for(let f=0,m=arguments.length;f<m;f++)arguments[f]&&Zi(arguments[f],a);return l}const Nl=(s,l,a,{allOwnKeys:f}={})=>(Zi(l,(m,w)=>{a&&st(m)?s[w]=Cr(m,a):s[w]=m},{allOwnKeys:f}),s),Yl=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),Hl=(s,l,a,f)=>{s.prototype=Object.create(l.prototype,f),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:l.prototype}),a&&Object.assign(s.prototype,a)},Xl=(s,l,a,f)=>{let m,w,y;const T={};if(l=l||{},s==null)return l;do{for(m=Object.getOwnPropertyNames(s),w=m.length;w-- >0;)y=m[w],(!f||f(y,s,l))&&!T[y]&&(l[y]=s[y],T[y]=!0);s=a!==!1&&rs(s)}while(s&&(!a||a(s,l))&&s!==Object.prototype);return l},Bl=(s,l,a)=>{s=String(s),(a===void 0||a>s.length)&&(a=s.length),a-=l.length;const f=s.indexOf(l,a);return f!==-1&&f===a},Wl=s=>{if(!s)return null;if(vi(s))return s;let l=s.length;if(!Er(l))return null;const a=new Array(l);for(;l-- >0;)a[l]=s[l];return a},Gl=(s=>l=>s&&l instanceof s)(typeof Uint8Array<"u"&&rs(Uint8Array)),Vl=(s,l)=>{const f=(s&&s[Xa]).call(s);let m;for(;(m=f.next())&&!m.done;){const w=m.value;l.call(s,w[0],w[1])}},jl=(s,l)=>{let a;const f=[];for(;(a=s.exec(l))!==null;)f.push(a);return f},Ul=yt("HTMLFormElement"),$l=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,f,m){return f.toUpperCase()+m}),Is=(({hasOwnProperty:s})=>(l,a)=>s.call(l,a))(Object.prototype),ql=yt("RegExp"),Tr=(s,l)=>{const a=Object.getOwnPropertyDescriptors(s),f={};Zi(a,(m,w)=>{let y;(y=l(m,w,s))!==!1&&(f[w]=y||m)}),Object.defineProperties(s,f)},Zl=s=>{Tr(s,(l,a)=>{if(st(s)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const f=s[a];if(st(f)){if(l.enumerable=!1,"writable"in l){l.writable=!1;return}l.set||(l.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},Kl=(s,l)=>{const a={},f=m=>{m.forEach(w=>{a[w]=!0})};return vi(s)?f(s):f(String(s).split(l)),a},Jl=()=>{},Ql=(s,l)=>s!=null&&Number.isFinite(s=+s)?s:l;function ec(s){return!!(s&&st(s.append)&&s[Sr]==="FormData"&&s[Xa])}const tc=s=>{const l=new Array(10),a=(f,m)=>{if(qi(f)){if(l.indexOf(f)>=0)return;if($i(f))return f;if(!("toJSON"in f)){l[m]=f;const w=vi(f)?[]:{};return Zi(f,(y,T)=>{const O=a(y,m+1);!Gi(O)&&(w[T]=O)}),l[m]=void 0,w}}return f};return a(s,0)},ic=yt("AsyncFunction"),ac=s=>s&&(qi(s)||st(s))&&st(s.then)&&st(s.catch),Ir=((s,l)=>s?setImmediate:l?((a,f)=>(qt.addEventListener("message",({source:m,data:w})=>{m===qt&&w===a&&f.length&&f.shift()()},!1),m=>{f.push(m),qt.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",st(qt.postMessage)),nc=typeof queueMicrotask<"u"?queueMicrotask.bind(qt):typeof process<"u"&&process.nextTick||Ir,sc=s=>s!=null&&st(s[Xa]),$={isArray:vi,isArrayBuffer:Mr,isBuffer:$i,isFormData:Il,isArrayBufferView:Al,isString:kl,isNumber:Er,isBoolean:Cl,isObject:qi,isPlainObject:Sa,isEmptyObject:Sl,isReadableStream:Ol,isRequest:Dl,isResponse:Fl,isHeaders:Rl,isUndefined:Gi,isDate:Ml,isFile:El,isBlob:Ll,isRegExp:ql,isFunction:st,isStream:Tl,isURLSearchParams:_l,isTypedArray:Gl,isFileList:Pl,forEach:Zi,merge:Dn,extend:Nl,trim:zl,stripBOM:Yl,inherits:Hl,toFlatObject:Xl,kindOf:Ba,kindOfTest:yt,endsWith:Bl,toArray:Wl,forEachEntry:Vl,matchAll:jl,isHTMLForm:Ul,hasOwnProperty:Is,hasOwnProp:Is,reduceDescriptors:Tr,freezeMethods:Zl,toObjectSet:Kl,toCamelCase:$l,noop:Jl,toFiniteNumber:Ql,findKey:Lr,global:qt,isContextDefined:Pr,isSpecCompliantForm:ec,toJSONObject:tc,isAsyncFn:ic,isThenable:ac,setImmediate:Ir,asap:nc,isIterable:sc};function ye(s,l,a,f,m){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",l&&(this.code=l),a&&(this.config=a),f&&(this.request=f),m&&(this.response=m,this.status=m.status?m.status:null)}$.inherits(ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$.toJSONObject(this.config),code:this.code,status:this.status}}});const _r=ye.prototype,Or={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{Or[s]={value:s}});Object.defineProperties(ye,Or);Object.defineProperty(_r,"isAxiosError",{value:!0});ye.from=(s,l,a,f,m,w)=>{const y=Object.create(_r);return $.toFlatObject(s,y,function(O){return O!==Error.prototype},T=>T!=="isAxiosError"),ye.call(y,s.message,l,a,f,m),y.cause=s,y.name=s.name,w&&Object.assign(y,w),y};const rc=null;function Fn(s){return $.isPlainObject(s)||$.isArray(s)}function Dr(s){return $.endsWith(s,"[]")?s.slice(0,-2):s}function _s(s,l,a){return s?s.concat(l).map(function(m,w){return m=Dr(m),!a&&w?"["+m+"]":m}).join(a?".":""):l}function oc(s){return $.isArray(s)&&!s.some(Fn)}const lc=$.toFlatObject($,{},null,function(l){return/^is[A-Z]/.test(l)});function Ga(s,l,a){if(!$.isObject(s))throw new TypeError("target must be an object");l=l||new FormData,a=$.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(ee,q){return!$.isUndefined(q[ee])});const f=a.metaTokens,m=a.visitor||z,w=a.dots,y=a.indexes,O=(a.Blob||typeof Blob<"u"&&Blob)&&$.isSpecCompliantForm(l);if(!$.isFunction(m))throw new TypeError("visitor must be a function");function R(X){if(X===null)return"";if($.isDate(X))return X.toISOString();if($.isBoolean(X))return X.toString();if(!O&&$.isBlob(X))throw new ye("Blob is not supported. Use a Buffer instead.");return $.isArrayBuffer(X)||$.isTypedArray(X)?O&&typeof Blob=="function"?new Blob([X]):Buffer.from(X):X}function z(X,ee,q){let ie=X;if(X&&!q&&typeof X=="object"){if($.endsWith(ee,"{}"))ee=f?ee:ee.slice(0,-2),X=JSON.stringify(X);else if($.isArray(X)&&oc(X)||($.isFileList(X)||$.endsWith(ee,"[]"))&&(ie=$.toArray(X)))return ee=Dr(ee),ie.forEach(function(ae,be){!($.isUndefined(ae)||ae===null)&&l.append(y===!0?_s([ee],be,w):y===null?ee:ee+"[]",R(ae))}),!1}return Fn(X)?!0:(l.append(_s(q,ee,w),R(X)),!1)}const B=[],U=Object.assign(lc,{defaultVisitor:z,convertValue:R,isVisitable:Fn});function re(X,ee){if(!$.isUndefined(X)){if(B.indexOf(X)!==-1)throw Error("Circular reference detected in "+ee.join("."));B.push(X),$.forEach(X,function(ie,te){(!($.isUndefined(ie)||ie===null)&&m.call(l,ie,$.isString(te)?te.trim():te,ee,U))===!0&&re(ie,ee?ee.concat(te):[te])}),B.pop()}}if(!$.isObject(s))throw new TypeError("data must be an object");return re(s),l}function Os(s){const l={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(f){return l[f]})}function os(s,l){this._pairs=[],s&&Ga(s,this,l)}const Fr=os.prototype;Fr.append=function(l,a){this._pairs.push([l,a])};Fr.toString=function(l){const a=l?function(f){return l.call(this,f,Os)}:Os;return this._pairs.map(function(m){return a(m[0])+"="+a(m[1])},"").join("&")};function cc(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Rr(s,l,a){if(!l)return s;const f=a&&a.encode||cc;$.isFunction(a)&&(a={serialize:a});const m=a&&a.serialize;let w;if(m?w=m(l,a):w=$.isURLSearchParams(l)?l.toString():new os(l,a).toString(f),w){const y=s.indexOf("#");y!==-1&&(s=s.slice(0,y)),s+=(s.indexOf("?")===-1?"?":"&")+w}return s}class Ds{constructor(){this.handlers=[]}use(l,a,f){return this.handlers.push({fulfilled:l,rejected:a,synchronous:f?f.synchronous:!1,runWhen:f?f.runWhen:null}),this.handlers.length-1}eject(l){this.handlers[l]&&(this.handlers[l]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(l){$.forEach(this.handlers,function(f){f!==null&&l(f)})}}const zr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},hc=typeof URLSearchParams<"u"?URLSearchParams:os,dc=typeof FormData<"u"?FormData:null,uc=typeof Blob<"u"?Blob:null,fc={isBrowser:!0,classes:{URLSearchParams:hc,FormData:dc,Blob:uc},protocols:["http","https","file","blob","url","data"]},ls=typeof window<"u"&&typeof document<"u",Rn=typeof navigator=="object"&&navigator||void 0,gc=ls&&(!Rn||["ReactNative","NativeScript","NS"].indexOf(Rn.product)<0),pc=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",mc=ls&&window.location.href||"http://localhost",xc=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ls,hasStandardBrowserEnv:gc,hasStandardBrowserWebWorkerEnv:pc,navigator:Rn,origin:mc},Symbol.toStringTag,{value:"Module"})),qe={...xc,...fc};function bc(s,l){return Ga(s,new qe.classes.URLSearchParams,{visitor:function(a,f,m,w){return qe.isNode&&$.isBuffer(a)?(this.append(f,a.toString("base64")),!1):w.defaultVisitor.apply(this,arguments)},...l})}function vc(s){return $.matchAll(/\w+|\[(\w*)]/g,s).map(l=>l[0]==="[]"?"":l[1]||l[0])}function yc(s){const l={},a=Object.keys(s);let f;const m=a.length;let w;for(f=0;f<m;f++)w=a[f],l[w]=s[w];return l}function Nr(s){function l(a,f,m,w){let y=a[w++];if(y==="__proto__")return!0;const T=Number.isFinite(+y),O=w>=a.length;return y=!y&&$.isArray(m)?m.length:y,O?($.hasOwnProp(m,y)?m[y]=[m[y],f]:m[y]=f,!T):((!m[y]||!$.isObject(m[y]))&&(m[y]=[]),l(a,f,m[y],w)&&$.isArray(m[y])&&(m[y]=yc(m[y])),!T)}if($.isFormData(s)&&$.isFunction(s.entries)){const a={};return $.forEachEntry(s,(f,m)=>{l(vc(f),m,a,0)}),a}return null}function wc(s,l,a){if($.isString(s))try{return(l||JSON.parse)(s),$.trim(s)}catch(f){if(f.name!=="SyntaxError")throw f}return(a||JSON.stringify)(s)}const Ki={transitional:zr,adapter:["xhr","http","fetch"],transformRequest:[function(l,a){const f=a.getContentType()||"",m=f.indexOf("application/json")>-1,w=$.isObject(l);if(w&&$.isHTMLForm(l)&&(l=new FormData(l)),$.isFormData(l))return m?JSON.stringify(Nr(l)):l;if($.isArrayBuffer(l)||$.isBuffer(l)||$.isStream(l)||$.isFile(l)||$.isBlob(l)||$.isReadableStream(l))return l;if($.isArrayBufferView(l))return l.buffer;if($.isURLSearchParams(l))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),l.toString();let T;if(w){if(f.indexOf("application/x-www-form-urlencoded")>-1)return bc(l,this.formSerializer).toString();if((T=$.isFileList(l))||f.indexOf("multipart/form-data")>-1){const O=this.env&&this.env.FormData;return Ga(T?{"files[]":l}:l,O&&new O,this.formSerializer)}}return w||m?(a.setContentType("application/json",!1),wc(l)):l}],transformResponse:[function(l){const a=this.transitional||Ki.transitional,f=a&&a.forcedJSONParsing,m=this.responseType==="json";if($.isResponse(l)||$.isReadableStream(l))return l;if(l&&$.isString(l)&&(f&&!this.responseType||m)){const y=!(a&&a.silentJSONParsing)&&m;try{return JSON.parse(l)}catch(T){if(y)throw T.name==="SyntaxError"?ye.from(T,ye.ERR_BAD_RESPONSE,this,null,this.response):T}}return l}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qe.classes.FormData,Blob:qe.classes.Blob},validateStatus:function(l){return l>=200&&l<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$.forEach(["delete","get","head","post","put","patch"],s=>{Ki.headers[s]={}});const Ac=$.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),kc=s=>{const l={};let a,f,m;return s&&s.split(`
`).forEach(function(y){m=y.indexOf(":"),a=y.substring(0,m).trim().toLowerCase(),f=y.substring(m+1).trim(),!(!a||l[a]&&Ac[a])&&(a==="set-cookie"?l[a]?l[a].push(f):l[a]=[f]:l[a]=l[a]?l[a]+", "+f:f)}),l},Fs=Symbol("internals");function Ri(s){return s&&String(s).trim().toLowerCase()}function Ma(s){return s===!1||s==null?s:$.isArray(s)?s.map(Ma):String(s)}function Cc(s){const l=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let f;for(;f=a.exec(s);)l[f[1]]=f[2];return l}const Sc=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function gn(s,l,a,f,m){if($.isFunction(f))return f.call(this,l,a);if(m&&(l=a),!!$.isString(l)){if($.isString(f))return l.indexOf(f)!==-1;if($.isRegExp(f))return f.test(l)}}function Mc(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(l,a,f)=>a.toUpperCase()+f)}function Ec(s,l){const a=$.toCamelCase(" "+l);["get","set","has"].forEach(f=>{Object.defineProperty(s,f+a,{value:function(m,w,y){return this[f].call(this,l,m,w,y)},configurable:!0})})}let rt=class{constructor(l){l&&this.set(l)}set(l,a,f){const m=this;function w(T,O,R){const z=Ri(O);if(!z)throw new Error("header name must be a non-empty string");const B=$.findKey(m,z);(!B||m[B]===void 0||R===!0||R===void 0&&m[B]!==!1)&&(m[B||O]=Ma(T))}const y=(T,O)=>$.forEach(T,(R,z)=>w(R,z,O));if($.isPlainObject(l)||l instanceof this.constructor)y(l,a);else if($.isString(l)&&(l=l.trim())&&!Sc(l))y(kc(l),a);else if($.isObject(l)&&$.isIterable(l)){let T={},O,R;for(const z of l){if(!$.isArray(z))throw TypeError("Object iterator must return a key-value pair");T[R=z[0]]=(O=T[R])?$.isArray(O)?[...O,z[1]]:[O,z[1]]:z[1]}y(T,a)}else l!=null&&w(a,l,f);return this}get(l,a){if(l=Ri(l),l){const f=$.findKey(this,l);if(f){const m=this[f];if(!a)return m;if(a===!0)return Cc(m);if($.isFunction(a))return a.call(this,m,f);if($.isRegExp(a))return a.exec(m);throw new TypeError("parser must be boolean|regexp|function")}}}has(l,a){if(l=Ri(l),l){const f=$.findKey(this,l);return!!(f&&this[f]!==void 0&&(!a||gn(this,this[f],f,a)))}return!1}delete(l,a){const f=this;let m=!1;function w(y){if(y=Ri(y),y){const T=$.findKey(f,y);T&&(!a||gn(f,f[T],T,a))&&(delete f[T],m=!0)}}return $.isArray(l)?l.forEach(w):w(l),m}clear(l){const a=Object.keys(this);let f=a.length,m=!1;for(;f--;){const w=a[f];(!l||gn(this,this[w],w,l,!0))&&(delete this[w],m=!0)}return m}normalize(l){const a=this,f={};return $.forEach(this,(m,w)=>{const y=$.findKey(f,w);if(y){a[y]=Ma(m),delete a[w];return}const T=l?Mc(w):String(w).trim();T!==w&&delete a[w],a[T]=Ma(m),f[T]=!0}),this}concat(...l){return this.constructor.concat(this,...l)}toJSON(l){const a=Object.create(null);return $.forEach(this,(f,m)=>{f!=null&&f!==!1&&(a[m]=l&&$.isArray(f)?f.join(", "):f)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([l,a])=>l+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(l){return l instanceof this?l:new this(l)}static concat(l,...a){const f=new this(l);return a.forEach(m=>f.set(m)),f}static accessor(l){const f=(this[Fs]=this[Fs]={accessors:{}}).accessors,m=this.prototype;function w(y){const T=Ri(y);f[T]||(Ec(m,y),f[T]=!0)}return $.isArray(l)?l.forEach(w):w(l),this}};rt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$.reduceDescriptors(rt.prototype,({value:s},l)=>{let a=l[0].toUpperCase()+l.slice(1);return{get:()=>s,set(f){this[a]=f}}});$.freezeMethods(rt);function pn(s,l){const a=this||Ki,f=l||a,m=rt.from(f.headers);let w=f.data;return $.forEach(s,function(T){w=T.call(a,w,m.normalize(),l?l.status:void 0)}),m.normalize(),w}function Yr(s){return!!(s&&s.__CANCEL__)}function yi(s,l,a){ye.call(this,s??"canceled",ye.ERR_CANCELED,l,a),this.name="CanceledError"}$.inherits(yi,ye,{__CANCEL__:!0});function Hr(s,l,a){const f=a.config.validateStatus;!a.status||!f||f(a.status)?s(a):l(new ye("Request failed with status code "+a.status,[ye.ERR_BAD_REQUEST,ye.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function Lc(s){const l=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return l&&l[1]||""}function Pc(s,l){s=s||10;const a=new Array(s),f=new Array(s);let m=0,w=0,y;return l=l!==void 0?l:1e3,function(O){const R=Date.now(),z=f[w];y||(y=R),a[m]=O,f[m]=R;let B=w,U=0;for(;B!==m;)U+=a[B++],B=B%s;if(m=(m+1)%s,m===w&&(w=(w+1)%s),R-y<l)return;const re=z&&R-z;return re?Math.round(U*1e3/re):void 0}}function Tc(s,l){let a=0,f=1e3/l,m,w;const y=(R,z=Date.now())=>{a=z,m=null,w&&(clearTimeout(w),w=null),s(...R)};return[(...R)=>{const z=Date.now(),B=z-a;B>=f?y(R,z):(m=R,w||(w=setTimeout(()=>{w=null,y(m)},f-B)))},()=>m&&y(m)]}const Ia=(s,l,a=3)=>{let f=0;const m=Pc(50,250);return Tc(w=>{const y=w.loaded,T=w.lengthComputable?w.total:void 0,O=y-f,R=m(O),z=y<=T;f=y;const B={loaded:y,total:T,progress:T?y/T:void 0,bytes:O,rate:R||void 0,estimated:R&&T&&z?(T-y)/R:void 0,event:w,lengthComputable:T!=null,[l?"download":"upload"]:!0};s(B)},a)},Rs=(s,l)=>{const a=s!=null;return[f=>l[0]({lengthComputable:a,total:s,loaded:f}),l[1]]},zs=s=>(...l)=>$.asap(()=>s(...l)),Ic=qe.hasStandardBrowserEnv?((s,l)=>a=>(a=new URL(a,qe.origin),s.protocol===a.protocol&&s.host===a.host&&(l||s.port===a.port)))(new URL(qe.origin),qe.navigator&&/(msie|trident)/i.test(qe.navigator.userAgent)):()=>!0,_c=qe.hasStandardBrowserEnv?{write(s,l,a,f,m,w){const y=[s+"="+encodeURIComponent(l)];$.isNumber(a)&&y.push("expires="+new Date(a).toGMTString()),$.isString(f)&&y.push("path="+f),$.isString(m)&&y.push("domain="+m),w===!0&&y.push("secure"),document.cookie=y.join("; ")},read(s){const l=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return l?decodeURIComponent(l[3]):null},remove(s){this.write(s,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Oc(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function Dc(s,l){return l?s.replace(/\/?\/$/,"")+"/"+l.replace(/^\/+/,""):s}function Xr(s,l,a){let f=!Oc(l);return s&&(f||a==!1)?Dc(s,l):l}const Ns=s=>s instanceof rt?{...s}:s;function ii(s,l){l=l||{};const a={};function f(R,z,B,U){return $.isPlainObject(R)&&$.isPlainObject(z)?$.merge.call({caseless:U},R,z):$.isPlainObject(z)?$.merge({},z):$.isArray(z)?z.slice():z}function m(R,z,B,U){if($.isUndefined(z)){if(!$.isUndefined(R))return f(void 0,R,B,U)}else return f(R,z,B,U)}function w(R,z){if(!$.isUndefined(z))return f(void 0,z)}function y(R,z){if($.isUndefined(z)){if(!$.isUndefined(R))return f(void 0,R)}else return f(void 0,z)}function T(R,z,B){if(B in l)return f(R,z);if(B in s)return f(void 0,R)}const O={url:w,method:w,data:w,baseURL:y,transformRequest:y,transformResponse:y,paramsSerializer:y,timeout:y,timeoutMessage:y,withCredentials:y,withXSRFToken:y,adapter:y,responseType:y,xsrfCookieName:y,xsrfHeaderName:y,onUploadProgress:y,onDownloadProgress:y,decompress:y,maxContentLength:y,maxBodyLength:y,beforeRedirect:y,transport:y,httpAgent:y,httpsAgent:y,cancelToken:y,socketPath:y,responseEncoding:y,validateStatus:T,headers:(R,z,B)=>m(Ns(R),Ns(z),B,!0)};return $.forEach(Object.keys({...s,...l}),function(z){const B=O[z]||m,U=B(s[z],l[z],z);$.isUndefined(U)&&B!==T||(a[z]=U)}),a}const Br=s=>{const l=ii({},s);let{data:a,withXSRFToken:f,xsrfHeaderName:m,xsrfCookieName:w,headers:y,auth:T}=l;l.headers=y=rt.from(y),l.url=Rr(Xr(l.baseURL,l.url,l.allowAbsoluteUrls),s.params,s.paramsSerializer),T&&y.set("Authorization","Basic "+btoa((T.username||"")+":"+(T.password?unescape(encodeURIComponent(T.password)):"")));let O;if($.isFormData(a)){if(qe.hasStandardBrowserEnv||qe.hasStandardBrowserWebWorkerEnv)y.setContentType(void 0);else if((O=y.getContentType())!==!1){const[R,...z]=O?O.split(";").map(B=>B.trim()).filter(Boolean):[];y.setContentType([R||"multipart/form-data",...z].join("; "))}}if(qe.hasStandardBrowserEnv&&(f&&$.isFunction(f)&&(f=f(l)),f||f!==!1&&Ic(l.url))){const R=m&&w&&_c.read(w);R&&y.set(m,R)}return l},Fc=typeof XMLHttpRequest<"u",Rc=Fc&&function(s){return new Promise(function(a,f){const m=Br(s);let w=m.data;const y=rt.from(m.headers).normalize();let{responseType:T,onUploadProgress:O,onDownloadProgress:R}=m,z,B,U,re,X;function ee(){re&&re(),X&&X(),m.cancelToken&&m.cancelToken.unsubscribe(z),m.signal&&m.signal.removeEventListener("abort",z)}let q=new XMLHttpRequest;q.open(m.method.toUpperCase(),m.url,!0),q.timeout=m.timeout;function ie(){if(!q)return;const ae=rt.from("getAllResponseHeaders"in q&&q.getAllResponseHeaders()),H={data:!T||T==="text"||T==="json"?q.responseText:q.response,status:q.status,statusText:q.statusText,headers:ae,config:s,request:q};Hr(function(le){a(le),ee()},function(le){f(le),ee()},H),q=null}"onloadend"in q?q.onloadend=ie:q.onreadystatechange=function(){!q||q.readyState!==4||q.status===0&&!(q.responseURL&&q.responseURL.indexOf("file:")===0)||setTimeout(ie)},q.onabort=function(){q&&(f(new ye("Request aborted",ye.ECONNABORTED,s,q)),q=null)},q.onerror=function(){f(new ye("Network Error",ye.ERR_NETWORK,s,q)),q=null},q.ontimeout=function(){let be=m.timeout?"timeout of "+m.timeout+"ms exceeded":"timeout exceeded";const H=m.transitional||zr;m.timeoutErrorMessage&&(be=m.timeoutErrorMessage),f(new ye(be,H.clarifyTimeoutError?ye.ETIMEDOUT:ye.ECONNABORTED,s,q)),q=null},w===void 0&&y.setContentType(null),"setRequestHeader"in q&&$.forEach(y.toJSON(),function(be,H){q.setRequestHeader(H,be)}),$.isUndefined(m.withCredentials)||(q.withCredentials=!!m.withCredentials),T&&T!=="json"&&(q.responseType=m.responseType),R&&([U,X]=Ia(R,!0),q.addEventListener("progress",U)),O&&q.upload&&([B,re]=Ia(O),q.upload.addEventListener("progress",B),q.upload.addEventListener("loadend",re)),(m.cancelToken||m.signal)&&(z=ae=>{q&&(f(!ae||ae.type?new yi(null,s,q):ae),q.abort(),q=null)},m.cancelToken&&m.cancelToken.subscribe(z),m.signal&&(m.signal.aborted?z():m.signal.addEventListener("abort",z)));const te=Lc(m.url);if(te&&qe.protocols.indexOf(te)===-1){f(new ye("Unsupported protocol "+te+":",ye.ERR_BAD_REQUEST,s));return}q.send(w||null)})},zc=(s,l)=>{const{length:a}=s=s?s.filter(Boolean):[];if(l||a){let f=new AbortController,m;const w=function(R){if(!m){m=!0,T();const z=R instanceof Error?R:this.reason;f.abort(z instanceof ye?z:new yi(z instanceof Error?z.message:z))}};let y=l&&setTimeout(()=>{y=null,w(new ye(`timeout ${l} of ms exceeded`,ye.ETIMEDOUT))},l);const T=()=>{s&&(y&&clearTimeout(y),y=null,s.forEach(R=>{R.unsubscribe?R.unsubscribe(w):R.removeEventListener("abort",w)}),s=null)};s.forEach(R=>R.addEventListener("abort",w));const{signal:O}=f;return O.unsubscribe=()=>$.asap(T),O}},Nc=function*(s,l){let a=s.byteLength;if(a<l){yield s;return}let f=0,m;for(;f<a;)m=f+l,yield s.slice(f,m),f=m},Yc=async function*(s,l){for await(const a of Hc(s))yield*Nc(a,l)},Hc=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const l=s.getReader();try{for(;;){const{done:a,value:f}=await l.read();if(a)break;yield f}}finally{await l.cancel()}},Ys=(s,l,a,f)=>{const m=Yc(s,l);let w=0,y,T=O=>{y||(y=!0,f&&f(O))};return new ReadableStream({async pull(O){try{const{done:R,value:z}=await m.next();if(R){T(),O.close();return}let B=z.byteLength;if(a){let U=w+=B;a(U)}O.enqueue(new Uint8Array(z))}catch(R){throw T(R),R}},cancel(O){return T(O),m.return()}},{highWaterMark:2})},Va=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Wr=Va&&typeof ReadableStream=="function",Xc=Va&&(typeof TextEncoder=="function"?(s=>l=>s.encode(l))(new TextEncoder):async s=>new Uint8Array(await new Response(s).arrayBuffer())),Gr=(s,...l)=>{try{return!!s(...l)}catch{return!1}},Bc=Wr&&Gr(()=>{let s=!1;const l=new Request(qe.origin,{body:new ReadableStream,method:"POST",get duplex(){return s=!0,"half"}}).headers.has("Content-Type");return s&&!l}),Hs=64*1024,zn=Wr&&Gr(()=>$.isReadableStream(new Response("").body)),_a={stream:zn&&(s=>s.body)};Va&&(s=>{["text","arrayBuffer","blob","formData","stream"].forEach(l=>{!_a[l]&&(_a[l]=$.isFunction(s[l])?a=>a[l]():(a,f)=>{throw new ye(`Response type '${l}' is not supported`,ye.ERR_NOT_SUPPORT,f)})})})(new Response);const Wc=async s=>{if(s==null)return 0;if($.isBlob(s))return s.size;if($.isSpecCompliantForm(s))return(await new Request(qe.origin,{method:"POST",body:s}).arrayBuffer()).byteLength;if($.isArrayBufferView(s)||$.isArrayBuffer(s))return s.byteLength;if($.isURLSearchParams(s)&&(s=s+""),$.isString(s))return(await Xc(s)).byteLength},Gc=async(s,l)=>{const a=$.toFiniteNumber(s.getContentLength());return a??Wc(l)},Vc=Va&&(async s=>{let{url:l,method:a,data:f,signal:m,cancelToken:w,timeout:y,onDownloadProgress:T,onUploadProgress:O,responseType:R,headers:z,withCredentials:B="same-origin",fetchOptions:U}=Br(s);R=R?(R+"").toLowerCase():"text";let re=zc([m,w&&w.toAbortSignal()],y),X;const ee=re&&re.unsubscribe&&(()=>{re.unsubscribe()});let q;try{if(O&&Bc&&a!=="get"&&a!=="head"&&(q=await Gc(z,f))!==0){let H=new Request(l,{method:"POST",body:f,duplex:"half"}),ke;if($.isFormData(f)&&(ke=H.headers.get("content-type"))&&z.setContentType(ke),H.body){const[le,V]=Rs(q,Ia(zs(O)));f=Ys(H.body,Hs,le,V)}}$.isString(B)||(B=B?"include":"omit");const ie="credentials"in Request.prototype;X=new Request(l,{...U,signal:re,method:a.toUpperCase(),headers:z.normalize().toJSON(),body:f,duplex:"half",credentials:ie?B:void 0});let te=await fetch(X,U);const ae=zn&&(R==="stream"||R==="response");if(zn&&(T||ae&&ee)){const H={};["status","statusText","headers"].forEach(he=>{H[he]=te[he]});const ke=$.toFiniteNumber(te.headers.get("content-length")),[le,V]=T&&Rs(ke,Ia(zs(T),!0))||[];te=new Response(Ys(te.body,Hs,le,()=>{V&&V(),ee&&ee()}),H)}R=R||"text";let be=await _a[$.findKey(_a,R)||"text"](te,s);return!ae&&ee&&ee(),await new Promise((H,ke)=>{Hr(H,ke,{data:be,headers:rt.from(te.headers),status:te.status,statusText:te.statusText,config:s,request:X})})}catch(ie){throw ee&&ee(),ie&&ie.name==="TypeError"&&/Load failed|fetch/i.test(ie.message)?Object.assign(new ye("Network Error",ye.ERR_NETWORK,s,X),{cause:ie.cause||ie}):ye.from(ie,ie&&ie.code,s,X)}}),Nn={http:rc,xhr:Rc,fetch:Vc};$.forEach(Nn,(s,l)=>{if(s){try{Object.defineProperty(s,"name",{value:l})}catch{}Object.defineProperty(s,"adapterName",{value:l})}});const Xs=s=>`- ${s}`,jc=s=>$.isFunction(s)||s===null||s===!1,Vr={getAdapter:s=>{s=$.isArray(s)?s:[s];const{length:l}=s;let a,f;const m={};for(let w=0;w<l;w++){a=s[w];let y;if(f=a,!jc(a)&&(f=Nn[(y=String(a)).toLowerCase()],f===void 0))throw new ye(`Unknown adapter '${y}'`);if(f)break;m[y||"#"+w]=f}if(!f){const w=Object.entries(m).map(([T,O])=>`adapter ${T} `+(O===!1?"is not supported by the environment":"is not available in the build"));let y=l?w.length>1?`since :
`+w.map(Xs).join(`
`):" "+Xs(w[0]):"as no adapter specified";throw new ye("There is no suitable adapter to dispatch the request "+y,"ERR_NOT_SUPPORT")}return f},adapters:Nn};function mn(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new yi(null,s)}function Bs(s){return mn(s),s.headers=rt.from(s.headers),s.data=pn.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),Vr.getAdapter(s.adapter||Ki.adapter)(s).then(function(f){return mn(s),f.data=pn.call(s,s.transformResponse,f),f.headers=rt.from(f.headers),f},function(f){return Yr(f)||(mn(s),f&&f.response&&(f.response.data=pn.call(s,s.transformResponse,f.response),f.response.headers=rt.from(f.response.headers))),Promise.reject(f)})}const jr="1.11.0",ja={};["object","boolean","number","function","string","symbol"].forEach((s,l)=>{ja[s]=function(f){return typeof f===s||"a"+(l<1?"n ":" ")+s}});const Ws={};ja.transitional=function(l,a,f){function m(w,y){return"[Axios v"+jr+"] Transitional option '"+w+"'"+y+(f?". "+f:"")}return(w,y,T)=>{if(l===!1)throw new ye(m(y," has been removed"+(a?" in "+a:"")),ye.ERR_DEPRECATED);return a&&!Ws[y]&&(Ws[y]=!0,console.warn(m(y," has been deprecated since v"+a+" and will be removed in the near future"))),l?l(w,y,T):!0}};ja.spelling=function(l){return(a,f)=>(console.warn(`${f} is likely a misspelling of ${l}`),!0)};function Uc(s,l,a){if(typeof s!="object")throw new ye("options must be an object",ye.ERR_BAD_OPTION_VALUE);const f=Object.keys(s);let m=f.length;for(;m-- >0;){const w=f[m],y=l[w];if(y){const T=s[w],O=T===void 0||y(T,w,s);if(O!==!0)throw new ye("option "+w+" must be "+O,ye.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new ye("Unknown option "+w,ye.ERR_BAD_OPTION)}}const Ea={assertOptions:Uc,validators:ja},St=Ea.validators;let Kt=class{constructor(l){this.defaults=l||{},this.interceptors={request:new Ds,response:new Ds}}async request(l,a){try{return await this._request(l,a)}catch(f){if(f instanceof Error){let m={};Error.captureStackTrace?Error.captureStackTrace(m):m=new Error;const w=m.stack?m.stack.replace(/^.+\n/,""):"";try{f.stack?w&&!String(f.stack).endsWith(w.replace(/^.+\n.+\n/,""))&&(f.stack+=`
`+w):f.stack=w}catch{}}throw f}}_request(l,a){typeof l=="string"?(a=a||{},a.url=l):a=l||{},a=ii(this.defaults,a);const{transitional:f,paramsSerializer:m,headers:w}=a;f!==void 0&&Ea.assertOptions(f,{silentJSONParsing:St.transitional(St.boolean),forcedJSONParsing:St.transitional(St.boolean),clarifyTimeoutError:St.transitional(St.boolean)},!1),m!=null&&($.isFunction(m)?a.paramsSerializer={serialize:m}:Ea.assertOptions(m,{encode:St.function,serialize:St.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Ea.assertOptions(a,{baseUrl:St.spelling("baseURL"),withXsrfToken:St.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let y=w&&$.merge(w.common,w[a.method]);w&&$.forEach(["delete","get","head","post","put","patch","common"],X=>{delete w[X]}),a.headers=rt.concat(y,w);const T=[];let O=!0;this.interceptors.request.forEach(function(ee){typeof ee.runWhen=="function"&&ee.runWhen(a)===!1||(O=O&&ee.synchronous,T.unshift(ee.fulfilled,ee.rejected))});const R=[];this.interceptors.response.forEach(function(ee){R.push(ee.fulfilled,ee.rejected)});let z,B=0,U;if(!O){const X=[Bs.bind(this),void 0];for(X.unshift(...T),X.push(...R),U=X.length,z=Promise.resolve(a);B<U;)z=z.then(X[B++],X[B++]);return z}U=T.length;let re=a;for(B=0;B<U;){const X=T[B++],ee=T[B++];try{re=X(re)}catch(q){ee.call(this,q);break}}try{z=Bs.call(this,re)}catch(X){return Promise.reject(X)}for(B=0,U=R.length;B<U;)z=z.then(R[B++],R[B++]);return z}getUri(l){l=ii(this.defaults,l);const a=Xr(l.baseURL,l.url,l.allowAbsoluteUrls);return Rr(a,l.params,l.paramsSerializer)}};$.forEach(["delete","get","head","options"],function(l){Kt.prototype[l]=function(a,f){return this.request(ii(f||{},{method:l,url:a,data:(f||{}).data}))}});$.forEach(["post","put","patch"],function(l){function a(f){return function(w,y,T){return this.request(ii(T||{},{method:l,headers:f?{"Content-Type":"multipart/form-data"}:{},url:w,data:y}))}}Kt.prototype[l]=a(),Kt.prototype[l+"Form"]=a(!0)});let $c=class Ur{constructor(l){if(typeof l!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(w){a=w});const f=this;this.promise.then(m=>{if(!f._listeners)return;let w=f._listeners.length;for(;w-- >0;)f._listeners[w](m);f._listeners=null}),this.promise.then=m=>{let w;const y=new Promise(T=>{f.subscribe(T),w=T}).then(m);return y.cancel=function(){f.unsubscribe(w)},y},l(function(w,y,T){f.reason||(f.reason=new yi(w,y,T),a(f.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(l){if(this.reason){l(this.reason);return}this._listeners?this._listeners.push(l):this._listeners=[l]}unsubscribe(l){if(!this._listeners)return;const a=this._listeners.indexOf(l);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const l=new AbortController,a=f=>{l.abort(f)};return this.subscribe(a),l.signal.unsubscribe=()=>this.unsubscribe(a),l.signal}static source(){let l;return{token:new Ur(function(m){l=m}),cancel:l}}};function qc(s){return function(a){return s.apply(null,a)}}function Zc(s){return $.isObject(s)&&s.isAxiosError===!0}const Yn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Yn).forEach(([s,l])=>{Yn[l]=s});function $r(s){const l=new Kt(s),a=Cr(Kt.prototype.request,l);return $.extend(a,Kt.prototype,l,{allOwnKeys:!0}),$.extend(a,l,null,{allOwnKeys:!0}),a.create=function(m){return $r(ii(s,m))},a}const He=$r(Ki);He.Axios=Kt;He.CanceledError=yi;He.CancelToken=$c;He.isCancel=Yr;He.VERSION=jr;He.toFormData=Ga;He.AxiosError=ye;He.Cancel=He.CanceledError;He.all=function(l){return Promise.all(l)};He.spread=qc;He.isAxiosError=Zc;He.mergeConfig=ii;He.AxiosHeaders=rt;He.formToJSON=s=>Nr($.isHTMLForm(s)?new FormData(s):s);He.getAdapter=Vr.getAdapter;He.HttpStatusCode=Yn;He.default=He;const{Axios:ng,AxiosError:sg,CanceledError:rg,isCancel:og,CancelToken:lg,VERSION:cg,all:hg,Cancel:dg,isAxiosError:ug,spread:fg,toFormData:gg,AxiosHeaders:pg,HttpStatusCode:mg,formToJSON:xg,getAdapter:bg,mergeConfig:vg}=He;window.axios=He;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var Hn=!1,Xn=!1,Jt=[],Bn=-1;function Kc(s){Jc(s)}function Jc(s){Jt.includes(s)||Jt.push(s),eh()}function Qc(s){let l=Jt.indexOf(s);l!==-1&&l>Bn&&Jt.splice(l,1)}function eh(){!Xn&&!Hn&&(Hn=!0,queueMicrotask(th))}function th(){Hn=!1,Xn=!0;for(let s=0;s<Jt.length;s++)Jt[s](),Bn=s;Jt.length=0,Bn=-1,Xn=!1}var wi,ni,Ai,qr,Wn=!0;function ih(s){Wn=!1,s(),Wn=!0}function ah(s){wi=s.reactive,Ai=s.release,ni=l=>s.effect(l,{scheduler:a=>{Wn?Kc(a):a()}}),qr=s.raw}function Gs(s){ni=s}function nh(s){let l=()=>{};return[f=>{let m=ni(f);return s._x_effects||(s._x_effects=new Set,s._x_runEffects=()=>{s._x_effects.forEach(w=>w())}),s._x_effects.add(m),l=()=>{m!==void 0&&(s._x_effects.delete(m),Ai(m))},m},()=>{l()}]}function Zr(s,l){let a=!0,f,m=ni(()=>{let w=s();JSON.stringify(w),a?f=w:queueMicrotask(()=>{l(w,f),f=w}),a=!1});return()=>Ai(m)}var Kr=[],Jr=[],Qr=[];function sh(s){Qr.push(s)}function cs(s,l){typeof l=="function"?(s._x_cleanups||(s._x_cleanups=[]),s._x_cleanups.push(l)):(l=s,Jr.push(l))}function eo(s){Kr.push(s)}function to(s,l,a){s._x_attributeCleanups||(s._x_attributeCleanups={}),s._x_attributeCleanups[l]||(s._x_attributeCleanups[l]=[]),s._x_attributeCleanups[l].push(a)}function io(s,l){s._x_attributeCleanups&&Object.entries(s._x_attributeCleanups).forEach(([a,f])=>{(l===void 0||l.includes(a))&&(f.forEach(m=>m()),delete s._x_attributeCleanups[a])})}function rh(s){var l,a;for((l=s._x_effects)==null||l.forEach(Qc);(a=s._x_cleanups)!=null&&a.length;)s._x_cleanups.pop()()}var hs=new MutationObserver(gs),ds=!1;function us(){hs.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),ds=!0}function ao(){oh(),hs.disconnect(),ds=!1}var zi=[];function oh(){let s=hs.takeRecords();zi.push(()=>s.length>0&&gs(s));let l=zi.length;queueMicrotask(()=>{if(zi.length===l)for(;zi.length>0;)zi.shift()()})}function Ne(s){if(!ds)return s();ao();let l=s();return us(),l}var fs=!1,Oa=[];function lh(){fs=!0}function ch(){fs=!1,gs(Oa),Oa=[]}function gs(s){if(fs){Oa=Oa.concat(s);return}let l=[],a=new Set,f=new Map,m=new Map;for(let w=0;w<s.length;w++)if(!s[w].target._x_ignoreMutationObserver&&(s[w].type==="childList"&&(s[w].removedNodes.forEach(y=>{y.nodeType===1&&y._x_marker&&a.add(y)}),s[w].addedNodes.forEach(y=>{if(y.nodeType===1){if(a.has(y)){a.delete(y);return}y._x_marker||l.push(y)}})),s[w].type==="attributes")){let y=s[w].target,T=s[w].attributeName,O=s[w].oldValue,R=()=>{f.has(y)||f.set(y,[]),f.get(y).push({name:T,value:y.getAttribute(T)})},z=()=>{m.has(y)||m.set(y,[]),m.get(y).push(T)};y.hasAttribute(T)&&O===null?R():y.hasAttribute(T)?(z(),R()):z()}m.forEach((w,y)=>{io(y,w)}),f.forEach((w,y)=>{Kr.forEach(T=>T(y,w))});for(let w of a)l.some(y=>y.contains(w))||Jr.forEach(y=>y(w));for(let w of l)w.isConnected&&Qr.forEach(y=>y(w));l=null,a=null,f=null,m=null}function no(s){return Qi(xi(s))}function Ji(s,l,a){return s._x_dataStack=[l,...xi(a||s)],()=>{s._x_dataStack=s._x_dataStack.filter(f=>f!==l)}}function xi(s){return s._x_dataStack?s._x_dataStack:typeof ShadowRoot=="function"&&s instanceof ShadowRoot?xi(s.host):s.parentNode?xi(s.parentNode):[]}function Qi(s){return new Proxy({objects:s},hh)}var hh={ownKeys({objects:s}){return Array.from(new Set(s.flatMap(l=>Object.keys(l))))},has({objects:s},l){return l==Symbol.unscopables?!1:s.some(a=>Object.prototype.hasOwnProperty.call(a,l)||Reflect.has(a,l))},get({objects:s},l,a){return l=="toJSON"?dh:Reflect.get(s.find(f=>Reflect.has(f,l))||{},l,a)},set({objects:s},l,a,f){const m=s.find(y=>Object.prototype.hasOwnProperty.call(y,l))||s[s.length-1],w=Object.getOwnPropertyDescriptor(m,l);return w!=null&&w.set&&(w!=null&&w.get)?w.set.call(f,a)||!0:Reflect.set(m,l,a)}};function dh(){return Reflect.ownKeys(this).reduce((l,a)=>(l[a]=Reflect.get(this,a),l),{})}function so(s){let l=f=>typeof f=="object"&&!Array.isArray(f)&&f!==null,a=(f,m="")=>{Object.entries(Object.getOwnPropertyDescriptors(f)).forEach(([w,{value:y,enumerable:T}])=>{if(T===!1||y===void 0||typeof y=="object"&&y!==null&&y.__v_skip)return;let O=m===""?w:`${m}.${w}`;typeof y=="object"&&y!==null&&y._x_interceptor?f[w]=y.initialize(s,O,w):l(y)&&y!==f&&!(y instanceof Element)&&a(y,O)})};return a(s)}function ro(s,l=()=>{}){let a={initialValue:void 0,_x_interceptor:!0,initialize(f,m,w){return s(this.initialValue,()=>uh(f,m),y=>Gn(f,m,y),m,w)}};return l(a),f=>{if(typeof f=="object"&&f!==null&&f._x_interceptor){let m=a.initialize.bind(a);a.initialize=(w,y,T)=>{let O=f.initialize(w,y,T);return a.initialValue=O,m(w,y,T)}}else a.initialValue=f;return a}}function uh(s,l){return l.split(".").reduce((a,f)=>a[f],s)}function Gn(s,l,a){if(typeof l=="string"&&(l=l.split(".")),l.length===1)s[l[0]]=a;else{if(l.length===0)throw error;return s[l[0]]||(s[l[0]]={}),Gn(s[l[0]],l.slice(1),a)}}var oo={};function wt(s,l){oo[s]=l}function Vn(s,l){let a=fh(l);return Object.entries(oo).forEach(([f,m])=>{Object.defineProperty(s,`$${f}`,{get(){return m(l,a)},enumerable:!1})}),s}function fh(s){let[l,a]=go(s),f={interceptor:ro,...l};return cs(s,a),f}function gh(s,l,a,...f){try{return a(...f)}catch(m){Vi(m,s,l)}}function Vi(s,l,a=void 0){s=Object.assign(s??{message:"No error message given."},{el:l,expression:a}),console.warn(`Alpine Expression Error: ${s.message}

${a?'Expression: "'+a+`"

`:""}`,l),setTimeout(()=>{throw s},0)}var La=!0;function lo(s){let l=La;La=!1;let a=s();return La=l,a}function Qt(s,l,a={}){let f;return et(s,l)(m=>f=m,a),f}function et(...s){return co(...s)}var co=ho;function ph(s){co=s}function ho(s,l){let a={};Vn(a,s);let f=[a,...xi(s)],m=typeof l=="function"?mh(f,l):bh(f,l,s);return gh.bind(null,s,l,m)}function mh(s,l){return(a=()=>{},{scope:f={},params:m=[]}={})=>{let w=l.apply(Qi([f,...s]),m);Da(a,w)}}var xn={};function xh(s,l){if(xn[s])return xn[s];let a=Object.getPrototypeOf(async function(){}).constructor,f=/^[\n\s]*if.*\(.*\)/.test(s.trim())||/^(let|const)\s/.test(s.trim())?`(async()=>{ ${s} })()`:s,w=(()=>{try{let y=new a(["__self","scope"],`with (scope) { __self.result = ${f} }; __self.finished = true; return __self.result;`);return Object.defineProperty(y,"name",{value:`[Alpine] ${s}`}),y}catch(y){return Vi(y,l,s),Promise.resolve()}})();return xn[s]=w,w}function bh(s,l,a){let f=xh(l,a);return(m=()=>{},{scope:w={},params:y=[]}={})=>{f.result=void 0,f.finished=!1;let T=Qi([w,...s]);if(typeof f=="function"){let O=f(f,T).catch(R=>Vi(R,a,l));f.finished?(Da(m,f.result,T,y,a),f.result=void 0):O.then(R=>{Da(m,R,T,y,a)}).catch(R=>Vi(R,a,l)).finally(()=>f.result=void 0)}}}function Da(s,l,a,f,m){if(La&&typeof l=="function"){let w=l.apply(a,f);w instanceof Promise?w.then(y=>Da(s,y,a,f)).catch(y=>Vi(y,m,l)):s(w)}else typeof l=="object"&&l instanceof Promise?l.then(w=>s(w)):s(l)}var ps="x-";function ki(s=""){return ps+s}function vh(s){ps=s}var Fa={};function Be(s,l){return Fa[s]=l,{before(a){if(!Fa[a]){console.warn(String.raw`Cannot find directive \`${a}\`. \`${s}\` will use the default order of execution`);return}const f=Zt.indexOf(a);Zt.splice(f>=0?f:Zt.indexOf("DEFAULT"),0,s)}}}function yh(s){return Object.keys(Fa).includes(s)}function ms(s,l,a){if(l=Array.from(l),s._x_virtualDirectives){let w=Object.entries(s._x_virtualDirectives).map(([T,O])=>({name:T,value:O})),y=uo(w);w=w.map(T=>y.find(O=>O.name===T.name)?{name:`x-bind:${T.name}`,value:`"${T.value}"`}:T),l=l.concat(w)}let f={};return l.map(xo((w,y)=>f[w]=y)).filter(vo).map(kh(f,a)).sort(Ch).map(w=>Ah(s,w))}function uo(s){return Array.from(s).map(xo()).filter(l=>!vo(l))}var jn=!1,Hi=new Map,fo=Symbol();function wh(s){jn=!0;let l=Symbol();fo=l,Hi.set(l,[]);let a=()=>{for(;Hi.get(l).length;)Hi.get(l).shift()();Hi.delete(l)},f=()=>{jn=!1,a()};s(a),f()}function go(s){let l=[],a=T=>l.push(T),[f,m]=nh(s);return l.push(m),[{Alpine:ea,effect:f,cleanup:a,evaluateLater:et.bind(et,s),evaluate:Qt.bind(Qt,s)},()=>l.forEach(T=>T())]}function Ah(s,l){let a=()=>{},f=Fa[l.type]||a,[m,w]=go(s);to(s,l.original,w);let y=()=>{s._x_ignore||s._x_ignoreSelf||(f.inline&&f.inline(s,l,m),f=f.bind(f,s,l,m),jn?Hi.get(fo).push(f):f())};return y.runCleanups=w,y}var po=(s,l)=>({name:a,value:f})=>(a.startsWith(s)&&(a=a.replace(s,l)),{name:a,value:f}),mo=s=>s;function xo(s=()=>{}){return({name:l,value:a})=>{let{name:f,value:m}=bo.reduce((w,y)=>y(w),{name:l,value:a});return f!==l&&s(f,l),{name:f,value:m}}}var bo=[];function xs(s){bo.push(s)}function vo({name:s}){return yo().test(s)}var yo=()=>new RegExp(`^${ps}([^:^.]+)\\b`);function kh(s,l){return({name:a,value:f})=>{let m=a.match(yo()),w=a.match(/:([a-zA-Z0-9\-_:]+)/),y=a.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],T=l||s[a]||a;return{type:m?m[1]:null,value:w?w[1]:null,modifiers:y.map(O=>O.replace(".","")),expression:f,original:T}}}var Un="DEFAULT",Zt=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",Un,"teleport"];function Ch(s,l){let a=Zt.indexOf(s.type)===-1?Un:s.type,f=Zt.indexOf(l.type)===-1?Un:l.type;return Zt.indexOf(a)-Zt.indexOf(f)}function Xi(s,l,a={}){s.dispatchEvent(new CustomEvent(l,{detail:a,bubbles:!0,composed:!0,cancelable:!0}))}function ai(s,l){if(typeof ShadowRoot=="function"&&s instanceof ShadowRoot){Array.from(s.children).forEach(m=>ai(m,l));return}let a=!1;if(l(s,()=>a=!0),a)return;let f=s.firstElementChild;for(;f;)ai(f,l),f=f.nextElementSibling}function gt(s,...l){console.warn(`Alpine Warning: ${s}`,...l)}var Vs=!1;function Sh(){Vs&&gt("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),Vs=!0,document.body||gt("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),Xi(document,"alpine:init"),Xi(document,"alpine:initializing"),us(),sh(l=>It(l,ai)),cs(l=>Si(l)),eo((l,a)=>{ms(l,a).forEach(f=>f())});let s=l=>!Ua(l.parentElement,!0);Array.from(document.querySelectorAll(ko().join(","))).filter(s).forEach(l=>{It(l)}),Xi(document,"alpine:initialized"),setTimeout(()=>{Ph()})}var bs=[],wo=[];function Ao(){return bs.map(s=>s())}function ko(){return bs.concat(wo).map(s=>s())}function Co(s){bs.push(s)}function So(s){wo.push(s)}function Ua(s,l=!1){return Ci(s,a=>{if((l?ko():Ao()).some(m=>a.matches(m)))return!0})}function Ci(s,l){if(s){if(l(s))return s;if(s._x_teleportBack&&(s=s._x_teleportBack),!!s.parentElement)return Ci(s.parentElement,l)}}function Mh(s){return Ao().some(l=>s.matches(l))}var Mo=[];function Eh(s){Mo.push(s)}var Lh=1;function It(s,l=ai,a=()=>{}){Ci(s,f=>f._x_ignore)||wh(()=>{l(s,(f,m)=>{f._x_marker||(a(f,m),Mo.forEach(w=>w(f,m)),ms(f,f.attributes).forEach(w=>w()),f._x_ignore||(f._x_marker=Lh++),f._x_ignore&&m())})})}function Si(s,l=ai){l(s,a=>{rh(a),io(a),delete a._x_marker})}function Ph(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([l,a,f])=>{yh(a)||f.some(m=>{if(document.querySelector(m))return gt(`found "${m}", but missing ${l} plugin`),!0})})}var $n=[],vs=!1;function ys(s=()=>{}){return queueMicrotask(()=>{vs||setTimeout(()=>{qn()})}),new Promise(l=>{$n.push(()=>{s(),l()})})}function qn(){for(vs=!1;$n.length;)$n.shift()()}function Th(){vs=!0}function ws(s,l){return Array.isArray(l)?js(s,l.join(" ")):typeof l=="object"&&l!==null?Ih(s,l):typeof l=="function"?ws(s,l()):js(s,l)}function js(s,l){let a=m=>m.split(" ").filter(w=>!s.classList.contains(w)).filter(Boolean),f=m=>(s.classList.add(...m),()=>{s.classList.remove(...m)});return l=l===!0?l="":l||"",f(a(l))}function Ih(s,l){let a=T=>T.split(" ").filter(Boolean),f=Object.entries(l).flatMap(([T,O])=>O?a(T):!1).filter(Boolean),m=Object.entries(l).flatMap(([T,O])=>O?!1:a(T)).filter(Boolean),w=[],y=[];return m.forEach(T=>{s.classList.contains(T)&&(s.classList.remove(T),y.push(T))}),f.forEach(T=>{s.classList.contains(T)||(s.classList.add(T),w.push(T))}),()=>{y.forEach(T=>s.classList.add(T)),w.forEach(T=>s.classList.remove(T))}}function $a(s,l){return typeof l=="object"&&l!==null?_h(s,l):Oh(s,l)}function _h(s,l){let a={};return Object.entries(l).forEach(([f,m])=>{a[f]=s.style[f],f.startsWith("--")||(f=Dh(f)),s.style.setProperty(f,m)}),setTimeout(()=>{s.style.length===0&&s.removeAttribute("style")}),()=>{$a(s,a)}}function Oh(s,l){let a=s.getAttribute("style",l);return s.setAttribute("style",l),()=>{s.setAttribute("style",a||"")}}function Dh(s){return s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Zn(s,l=()=>{}){let a=!1;return function(){a?l.apply(this,arguments):(a=!0,s.apply(this,arguments))}}Be("transition",(s,{value:l,modifiers:a,expression:f},{evaluate:m})=>{typeof f=="function"&&(f=m(f)),f!==!1&&(!f||typeof f=="boolean"?Rh(s,a,l):Fh(s,f,l))});function Fh(s,l,a){Eo(s,ws,""),{enter:m=>{s._x_transition.enter.during=m},"enter-start":m=>{s._x_transition.enter.start=m},"enter-end":m=>{s._x_transition.enter.end=m},leave:m=>{s._x_transition.leave.during=m},"leave-start":m=>{s._x_transition.leave.start=m},"leave-end":m=>{s._x_transition.leave.end=m}}[a](l)}function Rh(s,l,a){Eo(s,$a);let f=!l.includes("in")&&!l.includes("out")&&!a,m=f||l.includes("in")||["enter"].includes(a),w=f||l.includes("out")||["leave"].includes(a);l.includes("in")&&!f&&(l=l.filter((ie,te)=>te<l.indexOf("out"))),l.includes("out")&&!f&&(l=l.filter((ie,te)=>te>l.indexOf("out")));let y=!l.includes("opacity")&&!l.includes("scale"),T=y||l.includes("opacity"),O=y||l.includes("scale"),R=T?0:1,z=O?Ni(l,"scale",95)/100:1,B=Ni(l,"delay",0)/1e3,U=Ni(l,"origin","center"),re="opacity, transform",X=Ni(l,"duration",150)/1e3,ee=Ni(l,"duration",75)/1e3,q="cubic-bezier(0.4, 0.0, 0.2, 1)";m&&(s._x_transition.enter.during={transformOrigin:U,transitionDelay:`${B}s`,transitionProperty:re,transitionDuration:`${X}s`,transitionTimingFunction:q},s._x_transition.enter.start={opacity:R,transform:`scale(${z})`},s._x_transition.enter.end={opacity:1,transform:"scale(1)"}),w&&(s._x_transition.leave.during={transformOrigin:U,transitionDelay:`${B}s`,transitionProperty:re,transitionDuration:`${ee}s`,transitionTimingFunction:q},s._x_transition.leave.start={opacity:1,transform:"scale(1)"},s._x_transition.leave.end={opacity:R,transform:`scale(${z})`})}function Eo(s,l,a={}){s._x_transition||(s._x_transition={enter:{during:a,start:a,end:a},leave:{during:a,start:a,end:a},in(f=()=>{},m=()=>{}){Kn(s,l,{during:this.enter.during,start:this.enter.start,end:this.enter.end},f,m)},out(f=()=>{},m=()=>{}){Kn(s,l,{during:this.leave.during,start:this.leave.start,end:this.leave.end},f,m)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(s,l,a,f){const m=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let w=()=>m(a);if(l){s._x_transition&&(s._x_transition.enter||s._x_transition.leave)?s._x_transition.enter&&(Object.entries(s._x_transition.enter.during).length||Object.entries(s._x_transition.enter.start).length||Object.entries(s._x_transition.enter.end).length)?s._x_transition.in(a):w():s._x_transition?s._x_transition.in(a):w();return}s._x_hidePromise=s._x_transition?new Promise((y,T)=>{s._x_transition.out(()=>{},()=>y(f)),s._x_transitioning&&s._x_transitioning.beforeCancel(()=>T({isFromCancelledTransition:!0}))}):Promise.resolve(f),queueMicrotask(()=>{let y=Lo(s);y?(y._x_hideChildren||(y._x_hideChildren=[]),y._x_hideChildren.push(s)):m(()=>{let T=O=>{let R=Promise.all([O._x_hidePromise,...(O._x_hideChildren||[]).map(T)]).then(([z])=>z==null?void 0:z());return delete O._x_hidePromise,delete O._x_hideChildren,R};T(s).catch(O=>{if(!O.isFromCancelledTransition)throw O})})})};function Lo(s){let l=s.parentNode;if(l)return l._x_hidePromise?l:Lo(l)}function Kn(s,l,{during:a,start:f,end:m}={},w=()=>{},y=()=>{}){if(s._x_transitioning&&s._x_transitioning.cancel(),Object.keys(a).length===0&&Object.keys(f).length===0&&Object.keys(m).length===0){w(),y();return}let T,O,R;zh(s,{start(){T=l(s,f)},during(){O=l(s,a)},before:w,end(){T(),R=l(s,m)},after:y,cleanup(){O(),R()}})}function zh(s,l){let a,f,m,w=Zn(()=>{Ne(()=>{a=!0,f||l.before(),m||(l.end(),qn()),l.after(),s.isConnected&&l.cleanup(),delete s._x_transitioning})});s._x_transitioning={beforeCancels:[],beforeCancel(y){this.beforeCancels.push(y)},cancel:Zn(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();w()}),finish:w},Ne(()=>{l.start(),l.during()}),Th(),requestAnimationFrame(()=>{if(a)return;let y=Number(getComputedStyle(s).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,T=Number(getComputedStyle(s).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;y===0&&(y=Number(getComputedStyle(s).animationDuration.replace("s",""))*1e3),Ne(()=>{l.before()}),f=!0,requestAnimationFrame(()=>{a||(Ne(()=>{l.end()}),qn(),setTimeout(s._x_transitioning.finish,y+T),m=!0)})})}function Ni(s,l,a){if(s.indexOf(l)===-1)return a;const f=s[s.indexOf(l)+1];if(!f||l==="scale"&&isNaN(f))return a;if(l==="duration"||l==="delay"){let m=f.match(/([0-9]+)ms/);if(m)return m[1]}return l==="origin"&&["top","right","left","center","bottom"].includes(s[s.indexOf(l)+2])?[f,s[s.indexOf(l)+2]].join(" "):f}var Ft=!1;function zt(s,l=()=>{}){return(...a)=>Ft?l(...a):s(...a)}function Nh(s){return(...l)=>Ft&&s(...l)}var Po=[];function qa(s){Po.push(s)}function Yh(s,l){Po.forEach(a=>a(s,l)),Ft=!0,To(()=>{It(l,(a,f)=>{f(a,()=>{})})}),Ft=!1}var Jn=!1;function Hh(s,l){l._x_dataStack||(l._x_dataStack=s._x_dataStack),Ft=!0,Jn=!0,To(()=>{Xh(l)}),Ft=!1,Jn=!1}function Xh(s){let l=!1;It(s,(f,m)=>{ai(f,(w,y)=>{if(l&&Mh(w))return y();l=!0,m(w,y)})})}function To(s){let l=ni;Gs((a,f)=>{let m=l(a);return Ai(m),()=>{}}),s(),Gs(l)}function Io(s,l,a,f=[]){switch(s._x_bindings||(s._x_bindings=wi({})),s._x_bindings[l]=a,l=f.includes("camel")?qh(l):l,l){case"value":Bh(s,a);break;case"style":Gh(s,a);break;case"class":Wh(s,a);break;case"selected":case"checked":Vh(s,l,a);break;default:_o(s,l,a);break}}function Bh(s,l){if(Fo(s))s.attributes.value===void 0&&(s.value=l),window.fromModel&&(typeof l=="boolean"?s.checked=Pa(s.value)===l:s.checked=Us(s.value,l));else if(As(s))Number.isInteger(l)?s.value=l:!Array.isArray(l)&&typeof l!="boolean"&&![null,void 0].includes(l)?s.value=String(l):Array.isArray(l)?s.checked=l.some(a=>Us(a,s.value)):s.checked=!!l;else if(s.tagName==="SELECT")$h(s,l);else{if(s.value===l)return;s.value=l===void 0?"":l}}function Wh(s,l){s._x_undoAddedClasses&&s._x_undoAddedClasses(),s._x_undoAddedClasses=ws(s,l)}function Gh(s,l){s._x_undoAddedStyles&&s._x_undoAddedStyles(),s._x_undoAddedStyles=$a(s,l)}function Vh(s,l,a){_o(s,l,a),Uh(s,l,a)}function _o(s,l,a){[null,void 0,!1].includes(a)&&Kh(l)?s.removeAttribute(l):(Oo(l)&&(a=l),jh(s,l,a))}function jh(s,l,a){s.getAttribute(l)!=a&&s.setAttribute(l,a)}function Uh(s,l,a){s[l]!==a&&(s[l]=a)}function $h(s,l){const a=[].concat(l).map(f=>f+"");Array.from(s.options).forEach(f=>{f.selected=a.includes(f.value)})}function qh(s){return s.toLowerCase().replace(/-(\w)/g,(l,a)=>a.toUpperCase())}function Us(s,l){return s==l}function Pa(s){return[1,"1","true","on","yes",!0].includes(s)?!0:[0,"0","false","off","no",!1].includes(s)?!1:s?!!s:null}var Zh=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function Oo(s){return Zh.has(s)}function Kh(s){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(s)}function Jh(s,l,a){return s._x_bindings&&s._x_bindings[l]!==void 0?s._x_bindings[l]:Do(s,l,a)}function Qh(s,l,a,f=!0){if(s._x_bindings&&s._x_bindings[l]!==void 0)return s._x_bindings[l];if(s._x_inlineBindings&&s._x_inlineBindings[l]!==void 0){let m=s._x_inlineBindings[l];return m.extract=f,lo(()=>Qt(s,m.expression))}return Do(s,l,a)}function Do(s,l,a){let f=s.getAttribute(l);return f===null?typeof a=="function"?a():a:f===""?!0:Oo(l)?!![l,"true"].includes(f):f}function As(s){return s.type==="checkbox"||s.localName==="ui-checkbox"||s.localName==="ui-switch"}function Fo(s){return s.type==="radio"||s.localName==="ui-radio"}function Ro(s,l){var a;return function(){var f=this,m=arguments,w=function(){a=null,s.apply(f,m)};clearTimeout(a),a=setTimeout(w,l)}}function zo(s,l){let a;return function(){let f=this,m=arguments;a||(s.apply(f,m),a=!0,setTimeout(()=>a=!1,l))}}function No({get:s,set:l},{get:a,set:f}){let m=!0,w,y=ni(()=>{let T=s(),O=a();if(m)f(bn(T)),m=!1;else{let R=JSON.stringify(T),z=JSON.stringify(O);R!==w?f(bn(T)):R!==z&&l(bn(O))}w=JSON.stringify(s()),JSON.stringify(a())});return()=>{Ai(y)}}function bn(s){return typeof s=="object"?JSON.parse(JSON.stringify(s)):s}function ed(s){(Array.isArray(s)?s:[s]).forEach(a=>a(ea))}var Ut={},$s=!1;function td(s,l){if($s||(Ut=wi(Ut),$s=!0),l===void 0)return Ut[s];Ut[s]=l,so(Ut[s]),typeof l=="object"&&l!==null&&l.hasOwnProperty("init")&&typeof l.init=="function"&&Ut[s].init()}function id(){return Ut}var Yo={};function ad(s,l){let a=typeof l!="function"?()=>l:l;return s instanceof Element?Ho(s,a()):(Yo[s]=a,()=>{})}function nd(s){return Object.entries(Yo).forEach(([l,a])=>{Object.defineProperty(s,l,{get(){return(...f)=>a(...f)}})}),s}function Ho(s,l,a){let f=[];for(;f.length;)f.pop()();let m=Object.entries(l).map(([y,T])=>({name:y,value:T})),w=uo(m);return m=m.map(y=>w.find(T=>T.name===y.name)?{name:`x-bind:${y.name}`,value:`"${y.value}"`}:y),ms(s,m,a).map(y=>{f.push(y.runCleanups),y()}),()=>{for(;f.length;)f.pop()()}}var Xo={};function sd(s,l){Xo[s]=l}function rd(s,l){return Object.entries(Xo).forEach(([a,f])=>{Object.defineProperty(s,a,{get(){return(...m)=>f.bind(l)(...m)},enumerable:!1})}),s}var od={get reactive(){return wi},get release(){return Ai},get effect(){return ni},get raw(){return qr},version:"3.14.9",flushAndStopDeferringMutations:ch,dontAutoEvaluateFunctions:lo,disableEffectScheduling:ih,startObservingMutations:us,stopObservingMutations:ao,setReactivityEngine:ah,onAttributeRemoved:to,onAttributesAdded:eo,closestDataStack:xi,skipDuringClone:zt,onlyDuringClone:Nh,addRootSelector:Co,addInitSelector:So,interceptClone:qa,addScopeToNode:Ji,deferMutations:lh,mapAttributes:xs,evaluateLater:et,interceptInit:Eh,setEvaluator:ph,mergeProxies:Qi,extractProp:Qh,findClosest:Ci,onElRemoved:cs,closestRoot:Ua,destroyTree:Si,interceptor:ro,transition:Kn,setStyles:$a,mutateDom:Ne,directive:Be,entangle:No,throttle:zo,debounce:Ro,evaluate:Qt,initTree:It,nextTick:ys,prefixed:ki,prefix:vh,plugin:ed,magic:wt,store:td,start:Sh,clone:Hh,cloneNode:Yh,bound:Jh,$data:no,watch:Zr,walk:ai,data:sd,bind:ad},ea=od;function ld(s,l){const a=Object.create(null),f=s.split(",");for(let m=0;m<f.length;m++)a[f[m]]=!0;return m=>!!a[m]}var cd=Object.freeze({}),hd=Object.prototype.hasOwnProperty,Za=(s,l)=>hd.call(s,l),ei=Array.isArray,Bi=s=>Bo(s)==="[object Map]",dd=s=>typeof s=="string",ks=s=>typeof s=="symbol",Ka=s=>s!==null&&typeof s=="object",ud=Object.prototype.toString,Bo=s=>ud.call(s),Wo=s=>Bo(s).slice(8,-1),Cs=s=>dd(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,fd=s=>{const l=Object.create(null);return a=>l[a]||(l[a]=s(a))},gd=fd(s=>s.charAt(0).toUpperCase()+s.slice(1)),Go=(s,l)=>s!==l&&(s===s||l===l),Qn=new WeakMap,Yi=[],Et,ti=Symbol("iterate"),es=Symbol("Map key iterate");function pd(s){return s&&s._isEffect===!0}function md(s,l=cd){pd(s)&&(s=s.raw);const a=vd(s,l);return l.lazy||a(),a}function xd(s){s.active&&(Vo(s),s.options.onStop&&s.options.onStop(),s.active=!1)}var bd=0;function vd(s,l){const a=function(){if(!a.active)return s();if(!Yi.includes(a)){Vo(a);try{return wd(),Yi.push(a),Et=a,s()}finally{Yi.pop(),jo(),Et=Yi[Yi.length-1]}}};return a.id=bd++,a.allowRecurse=!!l.allowRecurse,a._isEffect=!0,a.active=!0,a.raw=s,a.deps=[],a.options=l,a}function Vo(s){const{deps:l}=s;if(l.length){for(let a=0;a<l.length;a++)l[a].delete(s);l.length=0}}var bi=!0,Ss=[];function yd(){Ss.push(bi),bi=!1}function wd(){Ss.push(bi),bi=!0}function jo(){const s=Ss.pop();bi=s===void 0?!0:s}function vt(s,l,a){if(!bi||Et===void 0)return;let f=Qn.get(s);f||Qn.set(s,f=new Map);let m=f.get(a);m||f.set(a,m=new Set),m.has(Et)||(m.add(Et),Et.deps.push(m),Et.options.onTrack&&Et.options.onTrack({effect:Et,target:s,type:l,key:a}))}function Rt(s,l,a,f,m,w){const y=Qn.get(s);if(!y)return;const T=new Set,O=z=>{z&&z.forEach(B=>{(B!==Et||B.allowRecurse)&&T.add(B)})};if(l==="clear")y.forEach(O);else if(a==="length"&&ei(s))y.forEach((z,B)=>{(B==="length"||B>=f)&&O(z)});else switch(a!==void 0&&O(y.get(a)),l){case"add":ei(s)?Cs(a)&&O(y.get("length")):(O(y.get(ti)),Bi(s)&&O(y.get(es)));break;case"delete":ei(s)||(O(y.get(ti)),Bi(s)&&O(y.get(es)));break;case"set":Bi(s)&&O(y.get(ti));break}const R=z=>{z.options.onTrigger&&z.options.onTrigger({effect:z,target:s,key:a,type:l,newValue:f,oldValue:m,oldTarget:w}),z.options.scheduler?z.options.scheduler(z):z()};T.forEach(R)}var Ad=ld("__proto__,__v_isRef,__isVue"),Uo=new Set(Object.getOwnPropertyNames(Symbol).map(s=>Symbol[s]).filter(ks)),kd=$o(),Cd=$o(!0),qs=Sd();function Sd(){const s={};return["includes","indexOf","lastIndexOf"].forEach(l=>{s[l]=function(...a){const f=De(this);for(let w=0,y=this.length;w<y;w++)vt(f,"get",w+"");const m=f[l](...a);return m===-1||m===!1?f[l](...a.map(De)):m}}),["push","pop","shift","unshift","splice"].forEach(l=>{s[l]=function(...a){yd();const f=De(this)[l].apply(this,a);return jo(),f}}),s}function $o(s=!1,l=!1){return function(f,m,w){if(m==="__v_isReactive")return!s;if(m==="__v_isReadonly")return s;if(m==="__v_raw"&&w===(s?l?Yd:Jo:l?Nd:Ko).get(f))return f;const y=ei(f);if(!s&&y&&Za(qs,m))return Reflect.get(qs,m,w);const T=Reflect.get(f,m,w);return(ks(m)?Uo.has(m):Ad(m))||(s||vt(f,"get",m),l)?T:ts(T)?!y||!Cs(m)?T.value:T:Ka(T)?s?Qo(T):Ps(T):T}}var Md=Ed();function Ed(s=!1){return function(a,f,m,w){let y=a[f];if(!s&&(m=De(m),y=De(y),!ei(a)&&ts(y)&&!ts(m)))return y.value=m,!0;const T=ei(a)&&Cs(f)?Number(f)<a.length:Za(a,f),O=Reflect.set(a,f,m,w);return a===De(w)&&(T?Go(m,y)&&Rt(a,"set",f,m,y):Rt(a,"add",f,m)),O}}function Ld(s,l){const a=Za(s,l),f=s[l],m=Reflect.deleteProperty(s,l);return m&&a&&Rt(s,"delete",l,void 0,f),m}function Pd(s,l){const a=Reflect.has(s,l);return(!ks(l)||!Uo.has(l))&&vt(s,"has",l),a}function Td(s){return vt(s,"iterate",ei(s)?"length":ti),Reflect.ownKeys(s)}var Id={get:kd,set:Md,deleteProperty:Ld,has:Pd,ownKeys:Td},_d={get:Cd,set(s,l){return console.warn(`Set operation on key "${String(l)}" failed: target is readonly.`,s),!0},deleteProperty(s,l){return console.warn(`Delete operation on key "${String(l)}" failed: target is readonly.`,s),!0}},Ms=s=>Ka(s)?Ps(s):s,Es=s=>Ka(s)?Qo(s):s,Ls=s=>s,Ja=s=>Reflect.getPrototypeOf(s);function ga(s,l,a=!1,f=!1){s=s.__v_raw;const m=De(s),w=De(l);l!==w&&!a&&vt(m,"get",l),!a&&vt(m,"get",w);const{has:y}=Ja(m),T=f?Ls:a?Es:Ms;if(y.call(m,l))return T(s.get(l));if(y.call(m,w))return T(s.get(w));s!==m&&s.get(l)}function pa(s,l=!1){const a=this.__v_raw,f=De(a),m=De(s);return s!==m&&!l&&vt(f,"has",s),!l&&vt(f,"has",m),s===m?a.has(s):a.has(s)||a.has(m)}function ma(s,l=!1){return s=s.__v_raw,!l&&vt(De(s),"iterate",ti),Reflect.get(s,"size",s)}function Zs(s){s=De(s);const l=De(this);return Ja(l).has.call(l,s)||(l.add(s),Rt(l,"add",s,s)),this}function Ks(s,l){l=De(l);const a=De(this),{has:f,get:m}=Ja(a);let w=f.call(a,s);w?Zo(a,f,s):(s=De(s),w=f.call(a,s));const y=m.call(a,s);return a.set(s,l),w?Go(l,y)&&Rt(a,"set",s,l,y):Rt(a,"add",s,l),this}function Js(s){const l=De(this),{has:a,get:f}=Ja(l);let m=a.call(l,s);m?Zo(l,a,s):(s=De(s),m=a.call(l,s));const w=f?f.call(l,s):void 0,y=l.delete(s);return m&&Rt(l,"delete",s,void 0,w),y}function Qs(){const s=De(this),l=s.size!==0,a=Bi(s)?new Map(s):new Set(s),f=s.clear();return l&&Rt(s,"clear",void 0,void 0,a),f}function xa(s,l){return function(f,m){const w=this,y=w.__v_raw,T=De(y),O=l?Ls:s?Es:Ms;return!s&&vt(T,"iterate",ti),y.forEach((R,z)=>f.call(m,O(R),O(z),w))}}function ba(s,l,a){return function(...f){const m=this.__v_raw,w=De(m),y=Bi(w),T=s==="entries"||s===Symbol.iterator&&y,O=s==="keys"&&y,R=m[s](...f),z=a?Ls:l?Es:Ms;return!l&&vt(w,"iterate",O?es:ti),{next(){const{value:B,done:U}=R.next();return U?{value:B,done:U}:{value:T?[z(B[0]),z(B[1])]:z(B),done:U}},[Symbol.iterator](){return this}}}}function Ot(s){return function(...l){{const a=l[0]?`on key "${l[0]}" `:"";console.warn(`${gd(s)} operation ${a}failed: target is readonly.`,De(this))}return s==="delete"?!1:this}}function Od(){const s={get(w){return ga(this,w)},get size(){return ma(this)},has:pa,add:Zs,set:Ks,delete:Js,clear:Qs,forEach:xa(!1,!1)},l={get(w){return ga(this,w,!1,!0)},get size(){return ma(this)},has:pa,add:Zs,set:Ks,delete:Js,clear:Qs,forEach:xa(!1,!0)},a={get(w){return ga(this,w,!0)},get size(){return ma(this,!0)},has(w){return pa.call(this,w,!0)},add:Ot("add"),set:Ot("set"),delete:Ot("delete"),clear:Ot("clear"),forEach:xa(!0,!1)},f={get(w){return ga(this,w,!0,!0)},get size(){return ma(this,!0)},has(w){return pa.call(this,w,!0)},add:Ot("add"),set:Ot("set"),delete:Ot("delete"),clear:Ot("clear"),forEach:xa(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(w=>{s[w]=ba(w,!1,!1),a[w]=ba(w,!0,!1),l[w]=ba(w,!1,!0),f[w]=ba(w,!0,!0)}),[s,a,l,f]}var[Dd,Fd,yg,wg]=Od();function qo(s,l){const a=s?Fd:Dd;return(f,m,w)=>m==="__v_isReactive"?!s:m==="__v_isReadonly"?s:m==="__v_raw"?f:Reflect.get(Za(a,m)&&m in f?a:f,m,w)}var Rd={get:qo(!1)},zd={get:qo(!0)};function Zo(s,l,a){const f=De(a);if(f!==a&&l.call(s,f)){const m=Wo(s);console.warn(`Reactive ${m} contains both the raw and reactive versions of the same object${m==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var Ko=new WeakMap,Nd=new WeakMap,Jo=new WeakMap,Yd=new WeakMap;function Hd(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Xd(s){return s.__v_skip||!Object.isExtensible(s)?0:Hd(Wo(s))}function Ps(s){return s&&s.__v_isReadonly?s:el(s,!1,Id,Rd,Ko)}function Qo(s){return el(s,!0,_d,zd,Jo)}function el(s,l,a,f,m){if(!Ka(s))return console.warn(`value cannot be made reactive: ${String(s)}`),s;if(s.__v_raw&&!(l&&s.__v_isReactive))return s;const w=m.get(s);if(w)return w;const y=Xd(s);if(y===0)return s;const T=new Proxy(s,y===2?f:a);return m.set(s,T),T}function De(s){return s&&De(s.__v_raw)||s}function ts(s){return!!(s&&s.__v_isRef===!0)}wt("nextTick",()=>ys);wt("dispatch",s=>Xi.bind(Xi,s));wt("watch",(s,{evaluateLater:l,cleanup:a})=>(f,m)=>{let w=l(f),T=Zr(()=>{let O;return w(R=>O=R),O},m);a(T)});wt("store",id);wt("data",s=>no(s));wt("root",s=>Ua(s));wt("refs",s=>(s._x_refs_proxy||(s._x_refs_proxy=Qi(Bd(s))),s._x_refs_proxy));function Bd(s){let l=[];return Ci(s,a=>{a._x_refs&&l.push(a._x_refs)}),l}var vn={};function tl(s){return vn[s]||(vn[s]=0),++vn[s]}function Wd(s,l){return Ci(s,a=>{if(a._x_ids&&a._x_ids[l])return!0})}function Gd(s,l){s._x_ids||(s._x_ids={}),s._x_ids[l]||(s._x_ids[l]=tl(l))}wt("id",(s,{cleanup:l})=>(a,f=null)=>{let m=`${a}${f?`-${f}`:""}`;return Vd(s,m,l,()=>{let w=Wd(s,a),y=w?w._x_ids[a]:tl(a);return f?`${a}-${y}-${f}`:`${a}-${y}`})});qa((s,l)=>{s._x_id&&(l._x_id=s._x_id)});function Vd(s,l,a,f){if(s._x_id||(s._x_id={}),s._x_id[l])return s._x_id[l];let m=f();return s._x_id[l]=m,a(()=>{delete s._x_id[l]}),m}wt("el",s=>s);il("Focus","focus","focus");il("Persist","persist","persist");function il(s,l,a){wt(l,f=>gt(`You can't use [$${l}] without first installing the "${s}" plugin here: https://alpinejs.dev/plugins/${a}`,f))}Be("modelable",(s,{expression:l},{effect:a,evaluateLater:f,cleanup:m})=>{let w=f(l),y=()=>{let z;return w(B=>z=B),z},T=f(`${l} = __placeholder`),O=z=>T(()=>{},{scope:{__placeholder:z}}),R=y();O(R),queueMicrotask(()=>{if(!s._x_model)return;s._x_removeModelListeners.default();let z=s._x_model.get,B=s._x_model.set,U=No({get(){return z()},set(re){B(re)}},{get(){return y()},set(re){O(re)}});m(U)})});Be("teleport",(s,{modifiers:l,expression:a},{cleanup:f})=>{s.tagName.toLowerCase()!=="template"&&gt("x-teleport can only be used on a <template> tag",s);let m=er(a),w=s.content.cloneNode(!0).firstElementChild;s._x_teleport=w,w._x_teleportBack=s,s.setAttribute("data-teleport-template",!0),w.setAttribute("data-teleport-target",!0),s._x_forwardEvents&&s._x_forwardEvents.forEach(T=>{w.addEventListener(T,O=>{O.stopPropagation(),s.dispatchEvent(new O.constructor(O.type,O))})}),Ji(w,{},s);let y=(T,O,R)=>{R.includes("prepend")?O.parentNode.insertBefore(T,O):R.includes("append")?O.parentNode.insertBefore(T,O.nextSibling):O.appendChild(T)};Ne(()=>{y(w,m,l),zt(()=>{It(w)})()}),s._x_teleportPutBack=()=>{let T=er(a);Ne(()=>{y(s._x_teleport,T,l)})},f(()=>Ne(()=>{w.remove(),Si(w)}))});var jd=document.createElement("div");function er(s){let l=zt(()=>document.querySelector(s),()=>jd)();return l||gt(`Cannot find x-teleport element for selector: "${s}"`),l}var al=()=>{};al.inline=(s,{modifiers:l},{cleanup:a})=>{l.includes("self")?s._x_ignoreSelf=!0:s._x_ignore=!0,a(()=>{l.includes("self")?delete s._x_ignoreSelf:delete s._x_ignore})};Be("ignore",al);Be("effect",zt((s,{expression:l},{effect:a})=>{a(et(s,l))}));function is(s,l,a,f){let m=s,w=O=>f(O),y={},T=(O,R)=>z=>R(O,z);if(a.includes("dot")&&(l=Ud(l)),a.includes("camel")&&(l=$d(l)),a.includes("passive")&&(y.passive=!0),a.includes("capture")&&(y.capture=!0),a.includes("window")&&(m=window),a.includes("document")&&(m=document),a.includes("debounce")){let O=a[a.indexOf("debounce")+1]||"invalid-wait",R=Ra(O.split("ms")[0])?Number(O.split("ms")[0]):250;w=Ro(w,R)}if(a.includes("throttle")){let O=a[a.indexOf("throttle")+1]||"invalid-wait",R=Ra(O.split("ms")[0])?Number(O.split("ms")[0]):250;w=zo(w,R)}return a.includes("prevent")&&(w=T(w,(O,R)=>{R.preventDefault(),O(R)})),a.includes("stop")&&(w=T(w,(O,R)=>{R.stopPropagation(),O(R)})),a.includes("once")&&(w=T(w,(O,R)=>{O(R),m.removeEventListener(l,w,y)})),(a.includes("away")||a.includes("outside"))&&(m=document,w=T(w,(O,R)=>{s.contains(R.target)||R.target.isConnected!==!1&&(s.offsetWidth<1&&s.offsetHeight<1||s._x_isShown!==!1&&O(R))})),a.includes("self")&&(w=T(w,(O,R)=>{R.target===s&&O(R)})),(Zd(l)||nl(l))&&(w=T(w,(O,R)=>{Kd(R,a)||O(R)})),m.addEventListener(l,w,y),()=>{m.removeEventListener(l,w,y)}}function Ud(s){return s.replace(/-/g,".")}function $d(s){return s.toLowerCase().replace(/-(\w)/g,(l,a)=>a.toUpperCase())}function Ra(s){return!Array.isArray(s)&&!isNaN(s)}function qd(s){return[" ","_"].includes(s)?s:s.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function Zd(s){return["keydown","keyup"].includes(s)}function nl(s){return["contextmenu","click","mouse"].some(l=>s.includes(l))}function Kd(s,l){let a=l.filter(w=>!["window","document","prevent","stop","once","capture","self","away","outside","passive"].includes(w));if(a.includes("debounce")){let w=a.indexOf("debounce");a.splice(w,Ra((a[w+1]||"invalid-wait").split("ms")[0])?2:1)}if(a.includes("throttle")){let w=a.indexOf("throttle");a.splice(w,Ra((a[w+1]||"invalid-wait").split("ms")[0])?2:1)}if(a.length===0||a.length===1&&tr(s.key).includes(a[0]))return!1;const m=["ctrl","shift","alt","meta","cmd","super"].filter(w=>a.includes(w));return a=a.filter(w=>!m.includes(w)),!(m.length>0&&m.filter(y=>((y==="cmd"||y==="super")&&(y="meta"),s[`${y}Key`])).length===m.length&&(nl(s.type)||tr(s.key).includes(a[0])))}function tr(s){if(!s)return[];s=qd(s);let l={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return l[s]=s,Object.keys(l).map(a=>{if(l[a]===s)return a}).filter(a=>a)}Be("model",(s,{modifiers:l,expression:a},{effect:f,cleanup:m})=>{let w=s;l.includes("parent")&&(w=s.parentNode);let y=et(w,a),T;typeof a=="string"?T=et(w,`${a} = __placeholder`):typeof a=="function"&&typeof a()=="string"?T=et(w,`${a()} = __placeholder`):T=()=>{};let O=()=>{let U;return y(re=>U=re),ir(U)?U.get():U},R=U=>{let re;y(X=>re=X),ir(re)?re.set(U):T(()=>{},{scope:{__placeholder:U}})};typeof a=="string"&&s.type==="radio"&&Ne(()=>{s.hasAttribute("name")||s.setAttribute("name",a)});var z=s.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(s.type)||l.includes("lazy")?"change":"input";let B=Ft?()=>{}:is(s,z,l,U=>{R(yn(s,l,U,O()))});if(l.includes("fill")&&([void 0,null,""].includes(O())||As(s)&&Array.isArray(O())||s.tagName.toLowerCase()==="select"&&s.multiple)&&R(yn(s,l,{target:s},O())),s._x_removeModelListeners||(s._x_removeModelListeners={}),s._x_removeModelListeners.default=B,m(()=>s._x_removeModelListeners.default()),s.form){let U=is(s.form,"reset",[],re=>{ys(()=>s._x_model&&s._x_model.set(yn(s,l,{target:s},O())))});m(()=>U())}s._x_model={get(){return O()},set(U){R(U)}},s._x_forceModelUpdate=U=>{U===void 0&&typeof a=="string"&&a.match(/\./)&&(U=""),window.fromModel=!0,Ne(()=>Io(s,"value",U)),delete window.fromModel},f(()=>{let U=O();l.includes("unintrusive")&&document.activeElement.isSameNode(s)||s._x_forceModelUpdate(U)})});function yn(s,l,a,f){return Ne(()=>{if(a instanceof CustomEvent&&a.detail!==void 0)return a.detail!==null&&a.detail!==void 0?a.detail:a.target.value;if(As(s))if(Array.isArray(f)){let m=null;return l.includes("number")?m=wn(a.target.value):l.includes("boolean")?m=Pa(a.target.value):m=a.target.value,a.target.checked?f.includes(m)?f:f.concat([m]):f.filter(w=>!Jd(w,m))}else return a.target.checked;else{if(s.tagName.toLowerCase()==="select"&&s.multiple)return l.includes("number")?Array.from(a.target.selectedOptions).map(m=>{let w=m.value||m.text;return wn(w)}):l.includes("boolean")?Array.from(a.target.selectedOptions).map(m=>{let w=m.value||m.text;return Pa(w)}):Array.from(a.target.selectedOptions).map(m=>m.value||m.text);{let m;return Fo(s)?a.target.checked?m=a.target.value:m=f:m=a.target.value,l.includes("number")?wn(m):l.includes("boolean")?Pa(m):l.includes("trim")?m.trim():m}}})}function wn(s){let l=s?parseFloat(s):null;return Qd(l)?l:s}function Jd(s,l){return s==l}function Qd(s){return!Array.isArray(s)&&!isNaN(s)}function ir(s){return s!==null&&typeof s=="object"&&typeof s.get=="function"&&typeof s.set=="function"}Be("cloak",s=>queueMicrotask(()=>Ne(()=>s.removeAttribute(ki("cloak")))));So(()=>`[${ki("init")}]`);Be("init",zt((s,{expression:l},{evaluate:a})=>typeof l=="string"?!!l.trim()&&a(l,{},!1):a(l,{},!1)));Be("text",(s,{expression:l},{effect:a,evaluateLater:f})=>{let m=f(l);a(()=>{m(w=>{Ne(()=>{s.textContent=w})})})});Be("html",(s,{expression:l},{effect:a,evaluateLater:f})=>{let m=f(l);a(()=>{m(w=>{Ne(()=>{s.innerHTML=w,s._x_ignoreSelf=!0,It(s),delete s._x_ignoreSelf})})})});xs(po(":",mo(ki("bind:"))));var sl=(s,{value:l,modifiers:a,expression:f,original:m},{effect:w,cleanup:y})=>{if(!l){let O={};nd(O),et(s,f)(z=>{Ho(s,z,m)},{scope:O});return}if(l==="key")return eu(s,f);if(s._x_inlineBindings&&s._x_inlineBindings[l]&&s._x_inlineBindings[l].extract)return;let T=et(s,f);w(()=>T(O=>{O===void 0&&typeof f=="string"&&f.match(/\./)&&(O=""),Ne(()=>Io(s,l,O,a))})),y(()=>{s._x_undoAddedClasses&&s._x_undoAddedClasses(),s._x_undoAddedStyles&&s._x_undoAddedStyles()})};sl.inline=(s,{value:l,modifiers:a,expression:f})=>{l&&(s._x_inlineBindings||(s._x_inlineBindings={}),s._x_inlineBindings[l]={expression:f,extract:!1})};Be("bind",sl);function eu(s,l){s._x_keyExpression=l}Co(()=>`[${ki("data")}]`);Be("data",(s,{expression:l},{cleanup:a})=>{if(tu(s))return;l=l===""?"{}":l;let f={};Vn(f,s);let m={};rd(m,f);let w=Qt(s,l,{scope:m});(w===void 0||w===!0)&&(w={}),Vn(w,s);let y=wi(w);so(y);let T=Ji(s,y);y.init&&Qt(s,y.init),a(()=>{y.destroy&&Qt(s,y.destroy),T()})});qa((s,l)=>{s._x_dataStack&&(l._x_dataStack=s._x_dataStack,l.setAttribute("data-has-alpine-state",!0))});function tu(s){return Ft?Jn?!0:s.hasAttribute("data-has-alpine-state"):!1}Be("show",(s,{modifiers:l,expression:a},{effect:f})=>{let m=et(s,a);s._x_doHide||(s._x_doHide=()=>{Ne(()=>{s.style.setProperty("display","none",l.includes("important")?"important":void 0)})}),s._x_doShow||(s._x_doShow=()=>{Ne(()=>{s.style.length===1&&s.style.display==="none"?s.removeAttribute("style"):s.style.removeProperty("display")})});let w=()=>{s._x_doHide(),s._x_isShown=!1},y=()=>{s._x_doShow(),s._x_isShown=!0},T=()=>setTimeout(y),O=Zn(B=>B?y():w(),B=>{typeof s._x_toggleAndCascadeWithTransitions=="function"?s._x_toggleAndCascadeWithTransitions(s,B,y,w):B?T():w()}),R,z=!0;f(()=>m(B=>{!z&&B===R||(l.includes("immediate")&&(B?T():w()),O(B),R=B,z=!1)}))});Be("for",(s,{expression:l},{effect:a,cleanup:f})=>{let m=au(l),w=et(s,m.items),y=et(s,s._x_keyExpression||"index");s._x_prevKeys=[],s._x_lookup={},a(()=>iu(s,m,w,y)),f(()=>{Object.values(s._x_lookup).forEach(T=>Ne(()=>{Si(T),T.remove()})),delete s._x_prevKeys,delete s._x_lookup})});function iu(s,l,a,f){let m=y=>typeof y=="object"&&!Array.isArray(y),w=s;a(y=>{nu(y)&&y>=0&&(y=Array.from(Array(y).keys(),q=>q+1)),y===void 0&&(y=[]);let T=s._x_lookup,O=s._x_prevKeys,R=[],z=[];if(m(y))y=Object.entries(y).map(([q,ie])=>{let te=ar(l,ie,q,y);f(ae=>{z.includes(ae)&&gt("Duplicate key on x-for",s),z.push(ae)},{scope:{index:q,...te}}),R.push(te)});else for(let q=0;q<y.length;q++){let ie=ar(l,y[q],q,y);f(te=>{z.includes(te)&&gt("Duplicate key on x-for",s),z.push(te)},{scope:{index:q,...ie}}),R.push(ie)}let B=[],U=[],re=[],X=[];for(let q=0;q<O.length;q++){let ie=O[q];z.indexOf(ie)===-1&&re.push(ie)}O=O.filter(q=>!re.includes(q));let ee="template";for(let q=0;q<z.length;q++){let ie=z[q],te=O.indexOf(ie);if(te===-1)O.splice(q,0,ie),B.push([ee,q]);else if(te!==q){let ae=O.splice(q,1)[0],be=O.splice(te-1,1)[0];O.splice(q,0,be),O.splice(te,0,ae),U.push([ae,be])}else X.push(ie);ee=ie}for(let q=0;q<re.length;q++){let ie=re[q];ie in T&&(Ne(()=>{Si(T[ie]),T[ie].remove()}),delete T[ie])}for(let q=0;q<U.length;q++){let[ie,te]=U[q],ae=T[ie],be=T[te],H=document.createElement("div");Ne(()=>{be||gt('x-for ":key" is undefined or invalid',w,te,T),be.after(H),ae.after(be),be._x_currentIfEl&&be.after(be._x_currentIfEl),H.before(ae),ae._x_currentIfEl&&ae.after(ae._x_currentIfEl),H.remove()}),be._x_refreshXForScope(R[z.indexOf(te)])}for(let q=0;q<B.length;q++){let[ie,te]=B[q],ae=ie==="template"?w:T[ie];ae._x_currentIfEl&&(ae=ae._x_currentIfEl);let be=R[te],H=z[te],ke=document.importNode(w.content,!0).firstElementChild,le=wi(be);Ji(ke,le,w),ke._x_refreshXForScope=V=>{Object.entries(V).forEach(([he,Le])=>{le[he]=Le})},Ne(()=>{ae.after(ke),zt(()=>It(ke))()}),typeof H=="object"&&gt("x-for key cannot be an object, it must be a string or an integer",w),T[H]=ke}for(let q=0;q<X.length;q++)T[X[q]]._x_refreshXForScope(R[z.indexOf(X[q])]);w._x_prevKeys=z})}function au(s){let l=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,a=/^\s*\(|\)\s*$/g,f=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,m=s.match(f);if(!m)return;let w={};w.items=m[2].trim();let y=m[1].replace(a,"").trim(),T=y.match(l);return T?(w.item=y.replace(l,"").trim(),w.index=T[1].trim(),T[2]&&(w.collection=T[2].trim())):w.item=y,w}function ar(s,l,a,f){let m={};return/^\[.*\]$/.test(s.item)&&Array.isArray(l)?s.item.replace("[","").replace("]","").split(",").map(y=>y.trim()).forEach((y,T)=>{m[y]=l[T]}):/^\{.*\}$/.test(s.item)&&!Array.isArray(l)&&typeof l=="object"?s.item.replace("{","").replace("}","").split(",").map(y=>y.trim()).forEach(y=>{m[y]=l[y]}):m[s.item]=l,s.index&&(m[s.index]=a),s.collection&&(m[s.collection]=f),m}function nu(s){return!Array.isArray(s)&&!isNaN(s)}function rl(){}rl.inline=(s,{expression:l},{cleanup:a})=>{let f=Ua(s);f._x_refs||(f._x_refs={}),f._x_refs[l]=s,a(()=>delete f._x_refs[l])};Be("ref",rl);Be("if",(s,{expression:l},{effect:a,cleanup:f})=>{s.tagName.toLowerCase()!=="template"&&gt("x-if can only be used on a <template> tag",s);let m=et(s,l),w=()=>{if(s._x_currentIfEl)return s._x_currentIfEl;let T=s.content.cloneNode(!0).firstElementChild;return Ji(T,{},s),Ne(()=>{s.after(T),zt(()=>It(T))()}),s._x_currentIfEl=T,s._x_undoIf=()=>{Ne(()=>{Si(T),T.remove()}),delete s._x_currentIfEl},T},y=()=>{s._x_undoIf&&(s._x_undoIf(),delete s._x_undoIf)};a(()=>m(T=>{T?w():y()})),f(()=>s._x_undoIf&&s._x_undoIf())});Be("id",(s,{expression:l},{evaluate:a})=>{a(l).forEach(m=>Gd(s,m))});qa((s,l)=>{s._x_ids&&(l._x_ids=s._x_ids)});xs(po("@",mo(ki("on:"))));Be("on",zt((s,{value:l,modifiers:a,expression:f},{cleanup:m})=>{let w=f?et(s,f):()=>{};s.tagName.toLowerCase()==="template"&&(s._x_forwardEvents||(s._x_forwardEvents=[]),s._x_forwardEvents.includes(l)||s._x_forwardEvents.push(l));let y=is(s,l,a,T=>{w(()=>{},{scope:{$event:T},params:[T]})});m(()=>y())}));Qa("Collapse","collapse","collapse");Qa("Intersect","intersect","intersect");Qa("Focus","trap","focus");Qa("Mask","mask","mask");function Qa(s,l,a){Be(l,f=>gt(`You can't use [x-${l}] without first installing the "${s}" plugin here: https://alpinejs.dev/plugins/${a}`,f))}ea.setEvaluator(ho);ea.setReactivityEngine({reactive:Ps,effect:md,release:xd,raw:De});var su=ea,ol=su;function An(s,l){s.split(/\s+/).forEach(a=>{l(a)})}class ru{constructor(){this._events={}}on(l,a){An(l,f=>{const m=this._events[f]||[];m.push(a),this._events[f]=m})}off(l,a){var f=arguments.length;if(f===0){this._events={};return}An(l,m=>{if(f===1){delete this._events[m];return}const w=this._events[m];w!==void 0&&(w.splice(w.indexOf(a),1),this._events[m]=w)})}trigger(l,...a){var f=this;An(l,m=>{const w=f._events[m];w!==void 0&&w.forEach(y=>{y.apply(f,a)})})}}function ou(s){return s.plugins={},class extends s{constructor(){super(...arguments),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(l,a){s.plugins[l]={name:l,fn:a}}initializePlugins(l){var a,f;const m=this,w=[];if(Array.isArray(l))l.forEach(y=>{typeof y=="string"?w.push(y):(m.plugins.settings[y.name]=y.options,w.push(y.name))});else if(l)for(a in l)l.hasOwnProperty(a)&&(m.plugins.settings[a]=l[a],w.push(a));for(;f=w.shift();)m.require(f)}loadPlugin(l){var a=this,f=a.plugins,m=s.plugins[l];if(!s.plugins.hasOwnProperty(l))throw new Error('Unable to find "'+l+'" plugin');f.requested[l]=!0,f.loaded[l]=m.fn.apply(a,[a.plugins.settings[l]||{}]),f.names.push(l)}require(l){var a=this,f=a.plugins;if(!a.plugins.loaded.hasOwnProperty(l)){if(f.requested[l])throw new Error('Plugin has circular dependency ("'+l+'")');a.loadPlugin(l)}return f.loaded[l]}}}const en=s=>(s=s.filter(Boolean),s.length<2?s[0]||"":cu(s)==1?"["+s.join("")+"]":"(?:"+s.join("|")+")"),ll=s=>{if(!lu(s))return s.join("");let l="",a=0;const f=()=>{a>1&&(l+="{"+a+"}")};return s.forEach((m,w)=>{if(m===s[w-1]){a++;return}f(),l+=m,a=1}),f(),l},cl=s=>{let l=Array.from(s);return en(l)},lu=s=>new Set(s).size!==s.length,ji=s=>(s+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),cu=s=>s.reduce((l,a)=>Math.max(l,hu(a)),0),hu=s=>Array.from(s).length,hl=s=>{if(s.length===1)return[[s]];let l=[];const a=s.substring(1);return hl(a).forEach(function(m){let w=m.slice(0);w[0]=s.charAt(0)+w[0],l.push(w),w=m.slice(0),w.unshift(s.charAt(0)),l.push(w)}),l},du=[[0,65535]],uu="[̀-ͯ·ʾʼ]";let za,dl;const fu=3,Ts={},nr={"/":"⁄∕",0:"߀",a:"ⱥɐɑ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"ƀɓƃ",c:"ꜿƈȼↄ",d:"đɗɖᴅƌꮷԁɦ",e:"ɛǝᴇɇ",f:"ꝼƒ",g:"ǥɠꞡᵹꝿɢ",h:"ħⱨⱶɥ",i:"ɨı",j:"ɉȷ",k:"ƙⱪꝁꝃꝅꞣ",l:"łƚɫⱡꝉꝇꞁɭ",m:"ɱɯϻ",n:"ꞥƞɲꞑᴎлԉ",o:"øǿɔɵꝋꝍᴑ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ƥᵽꝑꝓꝕρ",q:"ꝗꝙɋ",r:"ɍɽꝛꞧꞃ",s:"ßȿꞩꞅʂ",t:"ŧƭʈⱦꞇ",th:"þ",tz:"ꜩ",u:"ʉ",v:"ʋꝟʌ",vy:"ꝡ",w:"ⱳ",y:"ƴɏỿ",z:"ƶȥɀⱬꝣ",hv:"ƕ"};for(let s in nr){let l=nr[s]||"";for(let a=0;a<l.length;a++){let f=l.substring(a,a+1);Ts[f]=s}}const gu=new RegExp(Object.keys(Ts).join("|")+"|"+uu,"gu"),pu=s=>{za===void 0&&(za=vu(du))},sr=(s,l="NFKD")=>s.normalize(l),Na=s=>Array.from(s).reduce((l,a)=>l+mu(a),""),mu=s=>(s=sr(s).toLowerCase().replace(gu,l=>Ts[l]||""),sr(s,"NFC"));function*xu(s){for(const[l,a]of s)for(let f=l;f<=a;f++){let m=String.fromCharCode(f),w=Na(m);w!=m.toLowerCase()&&(w.length>fu||w.length!=0&&(yield{folded:w,composed:m,code_point:f}))}}const bu=s=>{const l={},a=(f,m)=>{const w=l[f]||new Set,y=new RegExp("^"+cl(w)+"$","iu");m.match(y)||(w.add(ji(m)),l[f]=w)};for(let f of xu(s))a(f.folded,f.folded),a(f.folded,f.composed);return l},vu=s=>{const l=bu(s),a={};let f=[];for(let w in l){let y=l[w];y&&(a[w]=cl(y)),w.length>1&&f.push(ji(w))}f.sort((w,y)=>y.length-w.length);const m=en(f);return dl=new RegExp("^"+m,"u"),a},yu=(s,l=1)=>{let a=0;return s=s.map(f=>(za[f]&&(a+=f.length),za[f]||f)),a>=l?ll(s):""},wu=(s,l=1)=>(l=Math.max(l,s.length-1),en(hl(s).map(a=>yu(a,l)))),rr=(s,l=!0)=>{let a=s.length>1?1:0;return en(s.map(f=>{let m=[];const w=l?f.length():f.length()-1;for(let y=0;y<w;y++)m.push(wu(f.substrs[y]||"",a));return ll(m)}))},Au=(s,l)=>{for(const a of l){if(a.start!=s.start||a.end!=s.end||a.substrs.join("")!==s.substrs.join(""))continue;let f=s.parts;const m=y=>{for(const T of f){if(T.start===y.start&&T.substr===y.substr)return!1;if(!(y.length==1||T.length==1)&&(y.start<T.start&&y.end>T.start||T.start<y.start&&T.end>y.start))return!0}return!1};if(!(a.parts.filter(m).length>0))return!0}return!1};class Ya{constructor(){Gt(this,"parts");Gt(this,"substrs");Gt(this,"start");Gt(this,"end");this.parts=[],this.substrs=[],this.start=0,this.end=0}add(l){l&&(this.parts.push(l),this.substrs.push(l.substr),this.start=Math.min(l.start,this.start),this.end=Math.max(l.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(l,a){let f=new Ya,m=JSON.parse(JSON.stringify(this.parts)),w=m.pop();for(const O of m)f.add(O);let y=a.substr.substring(0,l-w.start),T=y.length;return f.add({start:w.start,end:w.start+T,length:T,substr:y}),f}}const ku=s=>{pu(),s=Na(s);let l="",a=[new Ya];for(let f=0;f<s.length;f++){let w=s.substring(f).match(dl);const y=s.substring(f,f+1),T=w?w[0]:null;let O=[],R=new Set;for(const z of a){const B=z.last();if(!B||B.length==1||B.end<=f)if(T){const U=T.length;z.add({start:f,end:f+U,length:U,substr:T}),R.add("1")}else z.add({start:f,end:f+1,length:1,substr:y}),R.add("2");else if(T){let U=z.clone(f,B);const re=T.length;U.add({start:f,end:f+re,length:re,substr:T}),O.push(U)}else R.add("3")}if(O.length>0){O=O.sort((z,B)=>z.length()-B.length());for(let z of O)Au(z,a)||a.push(z);continue}if(f>0&&R.size==1&&!R.has("3")){l+=rr(a,!1);let z=new Ya;const B=a[0];B&&z.add(B.last()),a=[z]}}return l+=rr(a,!0),l},Cu=(s,l)=>{if(s)return s[l]},Su=(s,l)=>{if(s){for(var a,f=l.split(".");(a=f.shift())&&(s=s[a]););return s}},kn=(s,l,a)=>{var f,m;return!s||(s=s+"",l.regex==null)||(m=s.search(l.regex),m===-1)?0:(f=l.string.length/s.length,m===0&&(f+=.5),f*a)},Cn=(s,l)=>{var a=s[l];if(typeof a=="function")return a;a&&!Array.isArray(a)&&(s[l]=[a])},va=(s,l)=>{if(Array.isArray(s))s.forEach(l);else for(var a in s)s.hasOwnProperty(a)&&l(s[a],a)},Mu=(s,l)=>typeof s=="number"&&typeof l=="number"?s>l?1:s<l?-1:0:(s=Na(s+"").toLowerCase(),l=Na(l+"").toLowerCase(),s>l?1:l>s?-1:0);class Eu{constructor(l,a){Gt(this,"items");Gt(this,"settings");this.items=l,this.settings=a||{diacritics:!0}}tokenize(l,a,f){if(!l||!l.length)return[];const m=[],w=l.split(/\s+/);var y;return f&&(y=new RegExp("^("+Object.keys(f).map(ji).join("|")+"):(.*)$")),w.forEach(T=>{let O,R=null,z=null;y&&(O=T.match(y))&&(R=O[1],T=O[2]),T.length>0&&(this.settings.diacritics?z=ku(T)||null:z=ji(T),z&&a&&(z="\\b"+z)),m.push({string:T,regex:z?new RegExp(z,"iu"):null,field:R})}),m}getScoreFunction(l,a){var f=this.prepareSearch(l,a);return this._getScoreFunction(f)}_getScoreFunction(l){const a=l.tokens,f=a.length;if(!f)return function(){return 0};const m=l.options.fields,w=l.weights,y=m.length,T=l.getAttrFn;if(!y)return function(){return 1};const O=function(){return y===1?function(R,z){const B=m[0].field;return kn(T(z,B),R,w[B]||1)}:function(R,z){var B=0;if(R.field){const U=T(z,R.field);!R.regex&&U?B+=1/y:B+=kn(U,R,1)}else va(w,(U,re)=>{B+=kn(T(z,re),R,U)});return B/y}}();return f===1?function(R){return O(a[0],R)}:l.options.conjunction==="and"?function(R){var z,B=0;for(let U of a){if(z=O(U,R),z<=0)return 0;B+=z}return B/f}:function(R){var z=0;return va(a,B=>{z+=O(B,R)}),z/f}}getSortFunction(l,a){var f=this.prepareSearch(l,a);return this._getSortFunction(f)}_getSortFunction(l){var a,f=[];const m=this,w=l.options,y=!l.query&&w.sort_empty?w.sort_empty:w.sort;if(typeof y=="function")return y.bind(this);const T=function(R,z){return R==="$score"?z.score:l.getAttrFn(m.items[z.id],R)};if(y)for(let R of y)(l.query||R.field!=="$score")&&f.push(R);if(l.query){a=!0;for(let R of f)if(R.field==="$score"){a=!1;break}a&&f.unshift({field:"$score",direction:"desc"})}else f=f.filter(R=>R.field!=="$score");return f.length?function(R,z){var B,U;for(let re of f)if(U=re.field,B=(re.direction==="desc"?-1:1)*Mu(T(U,R),T(U,z)),B)return B;return 0}:null}prepareSearch(l,a){const f={};var m=Object.assign({},a);if(Cn(m,"sort"),Cn(m,"sort_empty"),m.fields){Cn(m,"fields");const w=[];m.fields.forEach(y=>{typeof y=="string"&&(y={field:y,weight:1}),w.push(y),f[y.field]="weight"in y?y.weight:1}),m.fields=w}return{options:m,query:l.toLowerCase().trim(),tokens:this.tokenize(l,m.respect_word_boundaries,f),total:0,items:[],weights:f,getAttrFn:m.nesting?Su:Cu}}search(l,a){var f=this,m,w;w=this.prepareSearch(l,a),a=w.options,l=w.query;const y=a.score||f._getScoreFunction(w);l.length?va(f.items,(O,R)=>{m=y(O),(a.filter===!1||m>0)&&w.items.push({score:m,id:R})}):va(f.items,(O,R)=>{w.items.push({score:1,id:R})});const T=f._getSortFunction(w);return T&&w.items.sort(T),w.total=w.items.length,typeof a.limit=="number"&&(w.items=w.items.slice(0,a.limit)),w}}const bt=s=>typeof s>"u"||s===null?null:Ta(s),Ta=s=>typeof s=="boolean"?s?"1":"0":s+"",Sn=s=>(s+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),Lu=(s,l)=>l>0?window.setTimeout(s,l):(s.call(null),null),Pu=(s,l)=>{var a;return function(f,m){var w=this;a&&(w.loading=Math.max(w.loading-1,0),clearTimeout(a)),a=setTimeout(function(){a=null,w.loadedSearches[f]=!0,s.call(w,f,m)},l)}},or=(s,l,a)=>{var f,m=s.trigger,w={};s.trigger=function(){var y=arguments[0];if(l.indexOf(y)!==-1)w[y]=arguments;else return m.apply(s,arguments)},a.apply(s,[]),s.trigger=m;for(f of l)f in w&&m.apply(s,w[f])},Tu=s=>({start:s.selectionStart||0,length:(s.selectionEnd||0)-(s.selectionStart||0)}),Ye=(s,l=!1)=>{s&&(s.preventDefault(),l&&s.stopPropagation())},Je=(s,l,a,f)=>{s.addEventListener(l,a,f)},Vt=(s,l)=>{if(!l||!l[s])return!1;var a=(l.altKey?1:0)+(l.ctrlKey?1:0)+(l.shiftKey?1:0)+(l.metaKey?1:0);return a===1},Mn=(s,l)=>{const a=s.getAttribute("id");return a||(s.setAttribute("id",l),l)},lr=s=>s.replace(/[\\"']/g,"\\$&"),jt=(s,l)=>{l&&s.append(l)},Ve=(s,l)=>{if(Array.isArray(s))s.forEach(l);else for(var a in s)s.hasOwnProperty(a)&&l(s[a],a)},Mt=s=>{if(s.jquery)return s[0];if(s instanceof HTMLElement)return s;if(ul(s)){var l=document.createElement("template");return l.innerHTML=s.trim(),l.content.firstChild}return document.querySelector(s)},ul=s=>typeof s=="string"&&s.indexOf("<")>-1,Iu=s=>s.replace(/['"\\]/g,"\\$&"),En=(s,l)=>{var a=document.createEvent("HTMLEvents");a.initEvent(l,!0,!1),s.dispatchEvent(a)},ya=(s,l)=>{Object.assign(s.style,l)},lt=(s,...l)=>{var a=fl(l);s=gl(s),s.map(f=>{a.map(m=>{f.classList.add(m)})})},Dt=(s,...l)=>{var a=fl(l);s=gl(s),s.map(f=>{a.map(m=>{f.classList.remove(m)})})},fl=s=>{var l=[];return Ve(s,a=>{typeof a=="string"&&(a=a.trim().split(/[\t\n\f\r\s]/)),Array.isArray(a)&&(l=l.concat(a))}),l.filter(Boolean)},gl=s=>(Array.isArray(s)||(s=[s]),s),Ln=(s,l,a)=>{if(!(a&&!a.contains(s)))for(;s&&s.matches;){if(s.matches(l))return s;s=s.parentNode}},cr=(s,l=0)=>l>0?s[s.length-1]:s[0],_u=s=>Object.keys(s).length===0,hr=(s,l)=>{if(!s)return-1;l=l||s.nodeName;for(var a=0;s=s.previousElementSibling;)s.matches(l)&&a++;return a},ze=(s,l)=>{Ve(l,(a,f)=>{a==null?s.removeAttribute(f):s.setAttribute(f,""+a)})},as=(s,l)=>{s.parentNode&&s.parentNode.replaceChild(l,s)},Ou=(s,l)=>{if(l===null)return;if(typeof l=="string"){if(!l.length)return;l=new RegExp(l,"i")}const a=w=>{var y=w.data.match(l);if(y&&w.data.length>0){var T=document.createElement("span");T.className="highlight";var O=w.splitText(y.index);O.splitText(y[0].length);var R=O.cloneNode(!0);return T.appendChild(R),as(O,T),1}return 0},f=w=>{w.nodeType===1&&w.childNodes&&!/(script|style)/i.test(w.tagName)&&(w.className!=="highlight"||w.tagName!=="SPAN")&&Array.from(w.childNodes).forEach(y=>{m(y)})},m=w=>w.nodeType===3?a(w):(f(w),0);m(s)},Du=s=>{var l=s.querySelectorAll("span.highlight");Array.prototype.forEach.call(l,function(a){var f=a.parentNode;f.replaceChild(a.firstChild,a),f.normalize()})},Fu=65,Ru=13,zu=27,Nu=37,Yu=38,Hu=39,Xu=40,dr=8,Bu=46,ur=9,Wu=typeof navigator>"u"?!1:/Mac/.test(navigator.userAgent),wa=Wu?"metaKey":"ctrlKey",fr={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,refreshThrottle:300,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(s){return s.length>0},render:{}};function gr(s,l){var a=Object.assign({},fr,l),f=a.dataAttr,m=a.labelField,w=a.valueField,y=a.disabledField,T=a.optgroupField,O=a.optgroupLabelField,R=a.optgroupValueField,z=s.tagName.toLowerCase(),B=s.getAttribute("placeholder")||s.getAttribute("data-placeholder");if(!B&&!a.allowEmptyOption){let ee=s.querySelector('option[value=""]');ee&&(B=ee.textContent)}var U={placeholder:B,options:[],optgroups:[],items:[],maxItems:null},re=()=>{var ee,q=U.options,ie={},te=1;let ae=0;var be=le=>{var V=Object.assign({},le.dataset),he=f&&V[f];return typeof he=="string"&&he.length&&(V=Object.assign(V,JSON.parse(he))),V},H=(le,V)=>{var he=bt(le.value);if(he!=null&&!(!he&&!a.allowEmptyOption)){if(ie.hasOwnProperty(he)){if(V){var Le=ie[he][T];Le?Array.isArray(Le)?Le.push(V):ie[he][T]=[Le,V]:ie[he][T]=V}}else{var Ce=be(le);Ce[m]=Ce[m]||le.textContent,Ce[w]=Ce[w]||he,Ce[y]=Ce[y]||le.disabled,Ce[T]=Ce[T]||V,Ce.$option=le,Ce.$order=Ce.$order||++ae,ie[he]=Ce,q.push(Ce)}le.selected&&U.items.push(he)}},ke=le=>{var V,he;he=be(le),he[O]=he[O]||le.getAttribute("label")||"",he[R]=he[R]||te++,he[y]=he[y]||le.disabled,he.$order=he.$order||++ae,U.optgroups.push(he),V=he[R],Ve(le.children,Le=>{H(Le,V)})};U.maxItems=s.hasAttribute("multiple")?null:1,Ve(s.children,le=>{ee=le.tagName.toLowerCase(),ee==="optgroup"?ke(le):ee==="option"&&H(le)})},X=()=>{const ee=s.getAttribute(f);if(ee)U.options=JSON.parse(ee),Ve(U.options,ie=>{U.items.push(ie[w])});else{var q=s.value.trim()||"";if(!a.allowEmptyOption&&!q.length)return;const ie=q.split(a.delimiter);Ve(ie,te=>{const ae={};ae[m]=te,ae[w]=te,U.options.push(ae)}),U.items=ie}};return z==="select"?re():X(),Object.assign({},fr,U,l)}var pr=0;class tt extends ou(ru){constructor(l,a){super(),this.order=0,this.isOpen=!1,this.isDisabled=!1,this.isReadOnly=!1,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],this.refreshTimeout=null,pr++;var f,m=Mt(l);if(m.tomselect)throw new Error("Tom Select already initialized on this element");m.tomselect=this;var w=window.getComputedStyle&&window.getComputedStyle(m,null);f=w.getPropertyValue("direction");const y=gr(m,a);this.settings=y,this.input=m,this.tabIndex=m.tabIndex||0,this.is_select_tag=m.tagName.toLowerCase()==="select",this.rtl=/rtl/i.test(f),this.inputId=Mn(m,"tomselect-"+pr),this.isRequired=m.required,this.sifter=new Eu(this.options,{diacritics:y.diacritics}),y.mode=y.mode||(y.maxItems===1?"single":"multi"),typeof y.hideSelected!="boolean"&&(y.hideSelected=y.mode==="multi"),typeof y.hidePlaceholder!="boolean"&&(y.hidePlaceholder=y.mode!=="multi");var T=y.createFilter;typeof T!="function"&&(typeof T=="string"&&(T=new RegExp(T)),T instanceof RegExp?y.createFilter=q=>T.test(q):y.createFilter=q=>this.settings.duplicates||!this.options[q]),this.initializePlugins(y.plugins),this.setupCallbacks(),this.setupTemplates();const O=Mt("<div>"),R=Mt("<div>"),z=this._render("dropdown"),B=Mt('<div role="listbox" tabindex="-1">'),U=this.input.getAttribute("class")||"",re=y.mode;var X;if(lt(O,y.wrapperClass,U,re),lt(R,y.controlClass),jt(O,R),lt(z,y.dropdownClass,re),y.copyClassesToDropdown&&lt(z,U),lt(B,y.dropdownContentClass),jt(z,B),Mt(y.dropdownParent||O).appendChild(z),ul(y.controlInput)){X=Mt(y.controlInput);var ee=["autocorrect","autocapitalize","autocomplete","spellcheck"];Ve(ee,q=>{m.getAttribute(q)&&ze(X,{[q]:m.getAttribute(q)})}),X.tabIndex=-1,R.appendChild(X),this.focus_node=X}else y.controlInput?(X=Mt(y.controlInput),this.focus_node=X):(X=Mt("<input/>"),this.focus_node=R);this.wrapper=O,this.dropdown=z,this.dropdown_content=B,this.control=R,this.control_input=X,this.setup()}setup(){const l=this,a=l.settings,f=l.control_input,m=l.dropdown,w=l.dropdown_content,y=l.wrapper,T=l.control,O=l.input,R=l.focus_node,z={passive:!0},B=l.inputId+"-ts-dropdown";ze(w,{id:B}),ze(R,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":B});const U=Mn(R,l.inputId+"-ts-control"),re="label[for='"+Iu(l.inputId)+"']",X=document.querySelector(re),ee=l.focus.bind(l);if(X){Je(X,"click",ee),ze(X,{for:U});const te=Mn(X,l.inputId+"-ts-label");ze(R,{"aria-labelledby":te}),ze(w,{"aria-labelledby":te})}if(y.style.width=O.style.width,l.plugins.names.length){const te="plugin-"+l.plugins.names.join(" plugin-");lt([y,m],te)}(a.maxItems===null||a.maxItems>1)&&l.is_select_tag&&ze(O,{multiple:"multiple"}),a.placeholder&&ze(f,{placeholder:a.placeholder}),!a.splitOn&&a.delimiter&&(a.splitOn=new RegExp("\\s*"+ji(a.delimiter)+"+\\s*")),a.load&&a.loadThrottle&&(a.load=Pu(a.load,a.loadThrottle)),Je(m,"mousemove",()=>{l.ignoreHover=!1}),Je(m,"mouseenter",te=>{var ae=Ln(te.target,"[data-selectable]",m);ae&&l.onOptionHover(te,ae)},{capture:!0}),Je(m,"click",te=>{const ae=Ln(te.target,"[data-selectable]");ae&&(l.onOptionSelect(te,ae),Ye(te,!0))}),Je(T,"click",te=>{var ae=Ln(te.target,"[data-ts-item]",T);if(ae&&l.onItemSelect(te,ae)){Ye(te,!0);return}f.value==""&&(l.onClick(),Ye(te,!0))}),Je(R,"keydown",te=>l.onKeyDown(te)),Je(f,"keypress",te=>l.onKeyPress(te)),Je(f,"input",te=>l.onInput(te)),Je(R,"blur",te=>l.onBlur(te)),Je(R,"focus",te=>l.onFocus(te)),Je(f,"paste",te=>l.onPaste(te));const q=te=>{const ae=te.composedPath()[0];if(!y.contains(ae)&&!m.contains(ae)){l.isFocused&&l.blur(),l.inputState();return}ae==f&&l.isOpen?te.stopPropagation():Ye(te,!0)},ie=()=>{l.isOpen&&l.positionDropdown()};Je(document,"mousedown",q),Je(window,"scroll",ie,z),Je(window,"resize",ie,z),this._destroy=()=>{document.removeEventListener("mousedown",q),window.removeEventListener("scroll",ie),window.removeEventListener("resize",ie),X&&X.removeEventListener("click",ee)},this.revertSettings={innerHTML:O.innerHTML,tabIndex:O.tabIndex},O.tabIndex=-1,O.insertAdjacentElement("afterend",l.wrapper),l.sync(!1),a.items=[],delete a.optgroups,delete a.options,Je(O,"invalid",()=>{l.isValid&&(l.isValid=!1,l.isInvalid=!0,l.refreshState())}),l.updateOriginalInput(),l.refreshItems(),l.close(!1),l.inputState(),l.isSetup=!0,O.disabled?l.disable():O.readOnly?l.setReadOnly(!0):l.enable(),l.on("change",this.onChange),lt(O,"tomselected","ts-hidden-accessible"),l.trigger("initialize"),a.preload===!0&&l.preload()}setupOptions(l=[],a=[]){this.addOptions(l),Ve(a,f=>{this.registerOptionGroup(f)})}setupTemplates(){var l=this,a=l.settings.labelField,f=l.settings.optgroupLabelField,m={optgroup:w=>{let y=document.createElement("div");return y.className="optgroup",y.appendChild(w.options),y},optgroup_header:(w,y)=>'<div class="optgroup-header">'+y(w[f])+"</div>",option:(w,y)=>"<div>"+y(w[a])+"</div>",item:(w,y)=>"<div>"+y(w[a])+"</div>",option_create:(w,y)=>'<div class="create">Add <strong>'+y(w.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};l.settings.render=Object.assign({},m,l.settings.render)}setupCallbacks(){var l,a,f={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(l in f)a=this.settings[f[l]],a&&this.on(l,a)}sync(l=!0){const a=this,f=l?gr(a.input,{delimiter:a.settings.delimiter}):a.settings;a.setupOptions(f.options,f.optgroups),a.setValue(f.items||[],!0),a.lastQuery=null}onClick(){var l=this;if(l.activeItems.length>0){l.clearActiveItems(),l.focus();return}l.isFocused&&l.isOpen?l.blur():l.focus()}onMouseDown(){}onChange(){En(this.input,"input"),En(this.input,"change")}onPaste(l){var a=this;if(a.isInputHidden||a.isLocked){Ye(l);return}a.settings.splitOn&&setTimeout(()=>{var f=a.inputValue();if(f.match(a.settings.splitOn)){var m=f.trim().split(a.settings.splitOn);Ve(m,w=>{bt(w)&&(this.options[w]?a.addItem(w):a.createItem(w))})}},0)}onKeyPress(l){var a=this;if(a.isLocked){Ye(l);return}var f=String.fromCharCode(l.keyCode||l.which);if(a.settings.create&&a.settings.mode==="multi"&&f===a.settings.delimiter){a.createItem(),Ye(l);return}}onKeyDown(l){var a=this;if(a.ignoreHover=!0,a.isLocked){l.keyCode!==ur&&Ye(l);return}switch(l.keyCode){case Fu:if(Vt(wa,l)&&a.control_input.value==""){Ye(l),a.selectAll();return}break;case zu:a.isOpen&&(Ye(l,!0),a.close()),a.clearActiveItems();return;case Xu:if(!a.isOpen&&a.hasOptions)a.open();else if(a.activeOption){let f=a.getAdjacent(a.activeOption,1);f&&a.setActiveOption(f)}Ye(l);return;case Yu:if(a.activeOption){let f=a.getAdjacent(a.activeOption,-1);f&&a.setActiveOption(f)}Ye(l);return;case Ru:a.canSelect(a.activeOption)?(a.onOptionSelect(l,a.activeOption),Ye(l)):(a.settings.create&&a.createItem()||document.activeElement==a.control_input&&a.isOpen)&&Ye(l);return;case Nu:a.advanceSelection(-1,l);return;case Hu:a.advanceSelection(1,l);return;case ur:a.settings.selectOnTab&&(a.canSelect(a.activeOption)&&(a.onOptionSelect(l,a.activeOption),Ye(l)),a.settings.create&&a.createItem()&&Ye(l));return;case dr:case Bu:a.deleteSelection(l);return}a.isInputHidden&&!Vt(wa,l)&&Ye(l)}onInput(l){if(this.isLocked)return;const a=this.inputValue();if(this.lastValue!==a){if(this.lastValue=a,a==""){this._onInput();return}this.refreshTimeout&&window.clearTimeout(this.refreshTimeout),this.refreshTimeout=Lu(()=>{this.refreshTimeout=null,this._onInput()},this.settings.refreshThrottle)}}_onInput(){const l=this.lastValue;this.settings.shouldLoad.call(this,l)&&this.load(l),this.refreshOptions(),this.trigger("type",l)}onOptionHover(l,a){this.ignoreHover||this.setActiveOption(a,!1)}onFocus(l){var a=this,f=a.isFocused;if(a.isDisabled||a.isReadOnly){a.blur(),Ye(l);return}a.ignoreFocus||(a.isFocused=!0,a.settings.preload==="focus"&&a.preload(),f||a.trigger("focus"),a.activeItems.length||(a.inputState(),a.refreshOptions(!!a.settings.openOnFocus)),a.refreshState())}onBlur(l){if(document.hasFocus()!==!1){var a=this;if(a.isFocused){a.isFocused=!1,a.ignoreFocus=!1;var f=()=>{a.close(),a.setActiveItem(),a.setCaret(a.items.length),a.trigger("blur")};a.settings.create&&a.settings.createOnBlur?a.createItem(null,f):f()}}}onOptionSelect(l,a){var f,m=this;a.parentElement&&a.parentElement.matches("[data-disabled]")||(a.classList.contains("create")?m.createItem(null,()=>{m.settings.closeAfterSelect&&m.close()}):(f=a.dataset.value,typeof f<"u"&&(m.lastQuery=null,m.addItem(f),m.settings.closeAfterSelect&&m.close(),!m.settings.hideSelected&&l.type&&/click/.test(l.type)&&m.setActiveOption(a))))}canSelect(l){return!!(this.isOpen&&l&&this.dropdown_content.contains(l))}onItemSelect(l,a){var f=this;return!f.isLocked&&f.settings.mode==="multi"?(Ye(l),f.setActiveItem(a,l),!0):!1}canLoad(l){return!(!this.settings.load||this.loadedSearches.hasOwnProperty(l))}load(l){const a=this;if(!a.canLoad(l))return;lt(a.wrapper,a.settings.loadingClass),a.loading++;const f=a.loadCallback.bind(a);a.settings.load.call(a,l,f)}loadCallback(l,a){const f=this;f.loading=Math.max(f.loading-1,0),f.lastQuery=null,f.clearActiveOption(),f.setupOptions(l,a),f.refreshOptions(f.isFocused&&!f.isInputHidden),f.loading||Dt(f.wrapper,f.settings.loadingClass),f.trigger("load",l,a)}preload(){var l=this.wrapper.classList;l.contains("preloaded")||(l.add("preloaded"),this.load(""))}setTextboxValue(l=""){var a=this.control_input,f=a.value!==l;f&&(a.value=l,En(a,"update"),this.lastValue=l)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(l,a){var f=a?[]:["change"];or(this,f,()=>{this.clear(a),this.addItems(l,a)})}setMaxItems(l){l===0&&(l=null),this.settings.maxItems=l,this.refreshState()}setActiveItem(l,a){var f=this,m,w,y,T,O,R;if(f.settings.mode!=="single"){if(!l){f.clearActiveItems(),f.isFocused&&f.inputState();return}if(m=a&&a.type.toLowerCase(),m==="click"&&Vt("shiftKey",a)&&f.activeItems.length){for(R=f.getLastActive(),y=Array.prototype.indexOf.call(f.control.children,R),T=Array.prototype.indexOf.call(f.control.children,l),y>T&&(O=y,y=T,T=O),w=y;w<=T;w++)l=f.control.children[w],f.activeItems.indexOf(l)===-1&&f.setActiveItemClass(l);Ye(a)}else m==="click"&&Vt(wa,a)||m==="keydown"&&Vt("shiftKey",a)?l.classList.contains("active")?f.removeActiveItem(l):f.setActiveItemClass(l):(f.clearActiveItems(),f.setActiveItemClass(l));f.inputState(),f.isFocused||f.focus()}}setActiveItemClass(l){const a=this,f=a.control.querySelector(".last-active");f&&Dt(f,"last-active"),lt(l,"active last-active"),a.trigger("item_select",l),a.activeItems.indexOf(l)==-1&&a.activeItems.push(l)}removeActiveItem(l){var a=this.activeItems.indexOf(l);this.activeItems.splice(a,1),Dt(l,"active")}clearActiveItems(){Dt(this.activeItems,"active"),this.activeItems=[]}setActiveOption(l,a=!0){l!==this.activeOption&&(this.clearActiveOption(),l&&(this.activeOption=l,ze(this.focus_node,{"aria-activedescendant":l.getAttribute("id")}),ze(l,{"aria-selected":"true"}),lt(l,"active"),a&&this.scrollToOption(l)))}scrollToOption(l,a){if(!l)return;const f=this.dropdown_content,m=f.clientHeight,w=f.scrollTop||0,y=l.offsetHeight,T=l.getBoundingClientRect().top-f.getBoundingClientRect().top+w;T+y>m+w?this.scroll(T-m+y,a):T<w&&this.scroll(T,a)}scroll(l,a){const f=this.dropdown_content;a&&(f.style.scrollBehavior=a),f.scrollTop=l,f.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(Dt(this.activeOption,"active"),ze(this.activeOption,{"aria-selected":null})),this.activeOption=null,ze(this.focus_node,{"aria-activedescendant":null})}selectAll(){const l=this;if(l.settings.mode==="single")return;const a=l.controlChildren();a.length&&(l.inputState(),l.close(),l.activeItems=a,Ve(a,f=>{l.setActiveItemClass(f)}))}inputState(){var l=this;l.control.contains(l.control_input)&&(ze(l.control_input,{placeholder:l.settings.placeholder}),l.activeItems.length>0||!l.isFocused&&l.settings.hidePlaceholder&&l.items.length>0?(l.setTextboxValue(),l.isInputHidden=!0):(l.settings.hidePlaceholder&&l.items.length>0&&ze(l.control_input,{placeholder:""}),l.isInputHidden=!1),l.wrapper.classList.toggle("input-hidden",l.isInputHidden))}inputValue(){return this.control_input.value.trim()}focus(){var l=this;l.isDisabled||l.isReadOnly||(l.ignoreFocus=!0,l.control_input.offsetWidth?l.control_input.focus():l.focus_node.focus(),setTimeout(()=>{l.ignoreFocus=!1,l.onFocus()},0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(l){return this.sifter.getScoreFunction(l,this.getSearchOptions())}getSearchOptions(){var l=this.settings,a=l.sortField;return typeof l.sortField=="string"&&(a=[{field:l.sortField}]),{fields:l.searchField,conjunction:l.searchConjunction,sort:a,nesting:l.nesting}}search(l){var a,f,m=this,w=this.getSearchOptions();if(m.settings.score&&(f=m.settings.score.call(m,l),typeof f!="function"))throw new Error('Tom Select "score" setting must be a function that returns a function');return l!==m.lastQuery?(m.lastQuery=l,a=m.sifter.search(l,Object.assign(w,{score:f})),m.currentResults=a):a=Object.assign({},m.currentResults),m.settings.hideSelected&&(a.items=a.items.filter(y=>{let T=bt(y.id);return!(T&&m.items.indexOf(T)!==-1)})),a}refreshOptions(l=!0){var a,f,m,w,y,T,O,R,z,B;const U={},re=[];var X=this,ee=X.inputValue();const q=ee===X.lastQuery||ee==""&&X.lastQuery==null;var ie=X.search(ee),te=null,ae=X.settings.shouldOpen||!1,be=X.dropdown_content;q&&(te=X.activeOption,te&&(z=te.closest("[data-group]"))),w=ie.items.length,typeof X.settings.maxOptions=="number"&&(w=Math.min(w,X.settings.maxOptions)),w>0&&(ae=!0);const H=(le,V)=>{let he=U[le];if(he!==void 0){let Ce=re[he];if(Ce!==void 0)return[he,Ce.fragment]}let Le=document.createDocumentFragment();return he=re.length,re.push({fragment:Le,order:V,optgroup:le}),[he,Le]};for(a=0;a<w;a++){let le=ie.items[a];if(!le)continue;let V=le.id,he=X.options[V];if(he===void 0)continue;let Le=Ta(V),Ce=X.getOption(Le,!0);for(X.settings.hideSelected||Ce.classList.toggle("selected",X.items.includes(Le)),y=he[X.settings.optgroupField]||"",T=Array.isArray(y)?y:[y],f=0,m=T&&T.length;f<m;f++){y=T[f];let _e=he.$order,We=X.optgroups[y];We===void 0?y="":_e=We.$order;const[dt,si]=H(y,_e);f>0&&(Ce=Ce.cloneNode(!0),ze(Ce,{id:he.$id+"-clone-"+f,"aria-selected":null}),Ce.classList.add("ts-cloned"),Dt(Ce,"active"),X.activeOption&&X.activeOption.dataset.value==V&&z&&z.dataset.group===y.toString()&&(te=Ce)),si.appendChild(Ce),y!=""&&(U[y]=dt)}}X.settings.lockOptgroupOrder&&re.sort((le,V)=>le.order-V.order),O=document.createDocumentFragment(),Ve(re,le=>{let V=le.fragment,he=le.optgroup;if(!V||!V.children.length)return;let Le=X.optgroups[he];if(Le!==void 0){let Ce=document.createDocumentFragment(),_e=X.render("optgroup_header",Le);jt(Ce,_e),jt(Ce,V);let We=X.render("optgroup",{group:Le,options:Ce});jt(O,We)}else jt(O,V)}),be.innerHTML="",jt(be,O),X.settings.highlight&&(Du(be),ie.query.length&&ie.tokens.length&&Ve(ie.tokens,le=>{Ou(be,le.regex)}));var ke=le=>{let V=X.render(le,{input:ee});return V&&(ae=!0,be.insertBefore(V,be.firstChild)),V};if(X.loading?ke("loading"):X.settings.shouldLoad.call(X,ee)?ie.items.length===0&&ke("no_results"):ke("not_loading"),R=X.canCreate(ee),R&&(B=ke("option_create")),X.hasOptions=ie.items.length>0||R,ae){if(ie.items.length>0){if(!te&&X.settings.mode==="single"&&X.items[0]!=null&&(te=X.getOption(X.items[0])),!be.contains(te)){let le=0;B&&!X.settings.addPrecedence&&(le=1),te=X.selectable()[le]}}else B&&(te=B);l&&!X.isOpen&&(X.open(),X.scrollToOption(te,"auto")),X.setActiveOption(te)}else X.clearActiveOption(),l&&X.isOpen&&X.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(l,a=!1){const f=this;if(Array.isArray(l))return f.addOptions(l,a),!1;const m=bt(l[f.settings.valueField]);return m===null||f.options.hasOwnProperty(m)?!1:(l.$order=l.$order||++f.order,l.$id=f.inputId+"-opt-"+l.$order,f.options[m]=l,f.lastQuery=null,a&&(f.userOptions[m]=a,f.trigger("option_add",m,l)),m)}addOptions(l,a=!1){Ve(l,f=>{this.addOption(f,a)})}registerOption(l){return this.addOption(l)}registerOptionGroup(l){var a=bt(l[this.settings.optgroupValueField]);return a===null?!1:(l.$order=l.$order||++this.order,this.optgroups[a]=l,a)}addOptionGroup(l,a){var f;a[this.settings.optgroupValueField]=l,(f=this.registerOptionGroup(a))&&this.trigger("optgroup_add",f,a)}removeOptionGroup(l){this.optgroups.hasOwnProperty(l)&&(delete this.optgroups[l],this.clearCache(),this.trigger("optgroup_remove",l))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(l,a){const f=this;var m,w;const y=bt(l),T=bt(a[f.settings.valueField]);if(y===null)return;const O=f.options[y];if(O==null)return;if(typeof T!="string")throw new Error("Value must be set in option data");const R=f.getOption(y),z=f.getItem(y);if(a.$order=a.$order||O.$order,delete f.options[y],f.uncacheValue(T),f.options[T]=a,R){if(f.dropdown_content.contains(R)){const B=f._render("option",a);as(R,B),f.activeOption===R&&f.setActiveOption(B)}R.remove()}z&&(w=f.items.indexOf(y),w!==-1&&f.items.splice(w,1,T),m=f._render("item",a),z.classList.contains("active")&&lt(m,"active"),as(z,m)),f.lastQuery=null}removeOption(l,a){const f=this;l=Ta(l),f.uncacheValue(l),delete f.userOptions[l],delete f.options[l],f.lastQuery=null,f.trigger("option_remove",l),f.removeItem(l,a)}clearOptions(l){const a=(l||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();const f={};Ve(this.options,(m,w)=>{a(m,w)&&(f[w]=m)}),this.options=this.sifter.items=f,this.lastQuery=null,this.trigger("option_clear")}clearFilter(l,a){return this.items.indexOf(a)>=0}getOption(l,a=!1){const f=bt(l);if(f===null)return null;const m=this.options[f];if(m!=null){if(m.$div)return m.$div;if(a)return this._render("option",m)}return null}getAdjacent(l,a,f="option"){var m=this,w;if(!l)return null;f=="item"?w=m.controlChildren():w=m.dropdown_content.querySelectorAll("[data-selectable]");for(let y=0;y<w.length;y++)if(w[y]==l)return a>0?w[y+1]:w[y-1];return null}getItem(l){if(typeof l=="object")return l;var a=bt(l);return a!==null?this.control.querySelector(`[data-value="${lr(a)}"]`):null}addItems(l,a){var f=this,m=Array.isArray(l)?l:[l];m=m.filter(y=>f.items.indexOf(y)===-1);const w=m[m.length-1];m.forEach(y=>{f.isPending=y!==w,f.addItem(y,a)})}addItem(l,a){var f=a?[]:["change","dropdown_close"];or(this,f,()=>{var m,w;const y=this,T=y.settings.mode,O=bt(l);if(!(O&&y.items.indexOf(O)!==-1&&(T==="single"&&y.close(),T==="single"||!y.settings.duplicates))&&!(O===null||!y.options.hasOwnProperty(O))&&(T==="single"&&y.clear(a),!(T==="multi"&&y.isFull()))){if(m=y._render("item",y.options[O]),y.control.contains(m)&&(m=m.cloneNode(!0)),w=y.isFull(),y.items.splice(y.caretPos,0,O),y.insertAtCaret(m),y.isSetup){if(!y.isPending&&y.settings.hideSelected){let R=y.getOption(O),z=y.getAdjacent(R,1);z&&y.setActiveOption(z)}!y.isPending&&!y.settings.closeAfterSelect&&y.refreshOptions(y.isFocused&&T!=="single"),y.settings.closeAfterSelect!=!1&&y.isFull()?y.close():y.isPending||y.positionDropdown(),y.trigger("item_add",O,m),y.isPending||y.updateOriginalInput({silent:a})}(!y.isPending||!w&&y.isFull())&&(y.inputState(),y.refreshState())}})}removeItem(l=null,a){const f=this;if(l=f.getItem(l),!l)return;var m,w;const y=l.dataset.value;m=hr(l),l.remove(),l.classList.contains("active")&&(w=f.activeItems.indexOf(l),f.activeItems.splice(w,1),Dt(l,"active")),f.items.splice(m,1),f.lastQuery=null,!f.settings.persist&&f.userOptions.hasOwnProperty(y)&&f.removeOption(y,a),m<f.caretPos&&f.setCaret(f.caretPos-1),f.updateOriginalInput({silent:a}),f.refreshState(),f.positionDropdown(),f.trigger("item_remove",y,l)}createItem(l=null,a=()=>{}){arguments.length===3&&(a=arguments[2]),typeof a!="function"&&(a=()=>{});var f=this,m=f.caretPos,w;if(l=l||f.inputValue(),!f.canCreate(l))return a(),!1;f.lock();var y=!1,T=O=>{if(f.unlock(),!O||typeof O!="object")return a();var R=bt(O[f.settings.valueField]);if(typeof R!="string")return a();f.setTextboxValue(),f.addOption(O,!0),f.setCaret(m),f.addItem(R),a(O),y=!0};return typeof f.settings.create=="function"?w=f.settings.create.call(this,l,T):w={[f.settings.labelField]:l,[f.settings.valueField]:l},y||T(w),!0}refreshItems(){var l=this;l.lastQuery=null,l.isSetup&&l.addItems(l.items),l.updateOriginalInput(),l.refreshState()}refreshState(){const l=this;l.refreshValidityState();const a=l.isFull(),f=l.isLocked;l.wrapper.classList.toggle("rtl",l.rtl);const m=l.wrapper.classList;m.toggle("focus",l.isFocused),m.toggle("disabled",l.isDisabled),m.toggle("readonly",l.isReadOnly),m.toggle("required",l.isRequired),m.toggle("invalid",!l.isValid),m.toggle("locked",f),m.toggle("full",a),m.toggle("input-active",l.isFocused&&!l.isInputHidden),m.toggle("dropdown-active",l.isOpen),m.toggle("has-options",_u(l.options)),m.toggle("has-items",l.items.length>0)}refreshValidityState(){var l=this;l.input.validity&&(l.isValid=l.input.validity.valid,l.isInvalid=!l.isValid)}isFull(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems}updateOriginalInput(l={}){const a=this;var f,m;const w=a.input.querySelector('option[value=""]');if(a.is_select_tag){let R=function(z,B,U){return z||(z=Mt('<option value="'+Sn(B)+'">'+Sn(U)+"</option>")),z!=w&&a.input.append(z),T.push(z),(z!=w||O>0)&&(z.selected=!0),z};var y=R;const T=[],O=a.input.querySelectorAll("option:checked").length;a.input.querySelectorAll("option:checked").forEach(z=>{z.selected=!1}),a.items.length==0&&a.settings.mode=="single"?R(w,"",""):a.items.forEach(z=>{if(f=a.options[z],m=f[a.settings.labelField]||"",T.includes(f.$option)){const B=a.input.querySelector(`option[value="${lr(z)}"]:not(:checked)`);R(B,z,m)}else f.$option=R(f.$option,z,m)})}else a.input.value=a.getValue();a.isSetup&&(l.silent||a.trigger("change",a.getValue()))}open(){var l=this;l.isLocked||l.isOpen||l.settings.mode==="multi"&&l.isFull()||(l.isOpen=!0,ze(l.focus_node,{"aria-expanded":"true"}),l.refreshState(),ya(l.dropdown,{visibility:"hidden",display:"block"}),l.positionDropdown(),ya(l.dropdown,{visibility:"visible",display:"block"}),l.focus(),l.trigger("dropdown_open",l.dropdown))}close(l=!0){var a=this,f=a.isOpen;l&&(a.setTextboxValue(),a.settings.mode==="single"&&a.items.length&&a.inputState()),a.isOpen=!1,ze(a.focus_node,{"aria-expanded":"false"}),ya(a.dropdown,{display:"none"}),a.settings.hideSelected&&a.clearActiveOption(),a.refreshState(),f&&a.trigger("dropdown_close",a.dropdown)}positionDropdown(){if(this.settings.dropdownParent==="body"){var l=this.control,a=l.getBoundingClientRect(),f=l.offsetHeight+a.top+window.scrollY,m=a.left+window.scrollX;ya(this.dropdown,{width:a.width+"px",top:f+"px",left:m+"px"})}}clear(l){var a=this;if(a.items.length){var f=a.controlChildren();Ve(f,m=>{a.removeItem(m,!0)}),a.inputState(),l||a.updateOriginalInput(),a.trigger("clear")}}insertAtCaret(l){const a=this,f=a.caretPos,m=a.control;m.insertBefore(l,m.children[f]||null),a.setCaret(f+1)}deleteSelection(l){var a,f,m,w,y=this;a=l&&l.keyCode===dr?-1:1,f=Tu(y.control_input);const T=[];if(y.activeItems.length)w=cr(y.activeItems,a),m=hr(w),a>0&&m++,Ve(y.activeItems,O=>T.push(O));else if((y.isFocused||y.settings.mode==="single")&&y.items.length){const O=y.controlChildren();let R;a<0&&f.start===0&&f.length===0?R=O[y.caretPos-1]:a>0&&f.start===y.inputValue().length&&(R=O[y.caretPos]),R!==void 0&&T.push(R)}if(!y.shouldDelete(T,l))return!1;for(Ye(l,!0),typeof m<"u"&&y.setCaret(m);T.length;)y.removeItem(T.pop());return y.inputState(),y.positionDropdown(),y.refreshOptions(!1),!0}shouldDelete(l,a){const f=l.map(m=>m.dataset.value);return!(!f.length||typeof this.settings.onDelete=="function"&&this.settings.onDelete(f,a)===!1)}advanceSelection(l,a){var f,m,w=this;w.rtl&&(l*=-1),!w.inputValue().length&&(Vt(wa,a)||Vt("shiftKey",a)?(f=w.getLastActive(l),f?f.classList.contains("active")?m=w.getAdjacent(f,l,"item"):m=f:l>0?m=w.control_input.nextElementSibling:m=w.control_input.previousElementSibling,m&&(m.classList.contains("active")&&w.removeActiveItem(f),w.setActiveItemClass(m))):w.moveCaret(l))}moveCaret(l){}getLastActive(l){let a=this.control.querySelector(".last-active");if(a)return a;var f=this.control.querySelectorAll(".active");if(f)return cr(f,l)}setCaret(l){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.setLocked(!0)}unlock(){this.setLocked(!1)}setLocked(l=this.isReadOnly||this.isDisabled){this.isLocked=l,this.refreshState()}disable(){this.setDisabled(!0),this.close()}enable(){this.setDisabled(!1)}setDisabled(l){this.focus_node.tabIndex=l?-1:this.tabIndex,this.isDisabled=l,this.input.disabled=l,this.control_input.disabled=l,this.setLocked()}setReadOnly(l){this.isReadOnly=l,this.input.readOnly=l,this.control_input.readOnly=l,this.setLocked()}destroy(){var l=this,a=l.revertSettings;l.trigger("destroy"),l.off(),l.wrapper.remove(),l.dropdown.remove(),l.input.innerHTML=a.innerHTML,l.input.tabIndex=a.tabIndex,Dt(l.input,"tomselected","ts-hidden-accessible"),l._destroy(),delete l.input.tomselect}render(l,a){var f,m;const w=this;if(typeof this.settings.render[l]!="function"||(m=w.settings.render[l].call(this,a,Sn),!m))return null;if(m=Mt(m),l==="option"||l==="option_create"?a[w.settings.disabledField]?ze(m,{"aria-disabled":"true"}):ze(m,{"data-selectable":""}):l==="optgroup"&&(f=a.group[w.settings.optgroupValueField],ze(m,{"data-group":f}),a.group[w.settings.disabledField]&&ze(m,{"data-disabled":""})),l==="option"||l==="item"){const y=Ta(a[w.settings.valueField]);ze(m,{"data-value":y}),l==="item"?(lt(m,w.settings.itemClass),ze(m,{"data-ts-item":""})):(lt(m,w.settings.optionClass),ze(m,{role:"option",id:a.$id}),a.$div=m,w.options[y]=a)}return m}_render(l,a){const f=this.render(l,a);if(f==null)throw"HTMLElement expected";return f}clearCache(){Ve(this.options,l=>{l.$div&&(l.$div.remove(),delete l.$div)})}uncacheValue(l){const a=this.getOption(l);a&&a.remove()}canCreate(l){return this.settings.create&&l.length>0&&this.settings.createFilter.call(this,l)}hook(l,a,f){var m=this,w=m[a];m[a]=function(){var y,T;return l==="after"&&(y=w.apply(m,arguments)),T=f.apply(m,arguments),l==="instead"?T:(l==="before"&&(y=w.apply(m,arguments)),y)}}}const Gu=(s,l,a,f)=>{s.addEventListener(l,a,f)};function Vu(){Gu(this.input,"change",()=>{this.sync()})}const ju=s=>typeof s>"u"||s===null?null:Uu(s),Uu=s=>typeof s=="boolean"?s?"1":"0":s+"",mr=(s,l=!1)=>{s&&(s.preventDefault(),l&&s.stopPropagation())},$u=s=>{if(s.jquery)return s[0];if(s instanceof HTMLElement)return s;if(qu(s)){var l=document.createElement("template");return l.innerHTML=s.trim(),l.content.firstChild}return document.querySelector(s)},qu=s=>typeof s=="string"&&s.indexOf("<")>-1;function Zu(s){var l=this,a=l.onOptionSelect;l.settings.hideSelected=!1;const f=Object.assign({className:"tomselect-checkbox",checkedClassNames:void 0,uncheckedClassNames:void 0},s);var m=function(T,O){O?(T.checked=!0,f.uncheckedClassNames&&T.classList.remove(...f.uncheckedClassNames),f.checkedClassNames&&T.classList.add(...f.checkedClassNames)):(T.checked=!1,f.checkedClassNames&&T.classList.remove(...f.checkedClassNames),f.uncheckedClassNames&&T.classList.add(...f.uncheckedClassNames))},w=function(T){setTimeout(()=>{var O=T.querySelector("input."+f.className);O instanceof HTMLInputElement&&m(O,T.classList.contains("selected"))},1)};l.hook("after","setupTemplates",()=>{var y=l.settings.render.option;l.settings.render.option=(T,O)=>{var R=$u(y.call(l,T,O)),z=document.createElement("input");f.className&&z.classList.add(f.className),z.addEventListener("click",function(U){mr(U)}),z.type="checkbox";const B=ju(T[l.settings.valueField]);return m(z,!!(B&&l.items.indexOf(B)>-1)),R.prepend(z),R}}),l.on("item_remove",y=>{var T=l.getOption(y);T&&(T.classList.remove("selected"),w(T))}),l.on("item_add",y=>{var T=l.getOption(y);T&&w(T)}),l.hook("instead","onOptionSelect",(y,T)=>{if(T.classList.contains("selected")){T.classList.remove("selected"),l.removeItem(T.dataset.value),l.refreshOptions(),mr(y,!0);return}a.call(l,y,T),w(T)})}const Ku=s=>{if(s.jquery)return s[0];if(s instanceof HTMLElement)return s;if(Ju(s)){var l=document.createElement("template");return l.innerHTML=s.trim(),l.content.firstChild}return document.querySelector(s)},Ju=s=>typeof s=="string"&&s.indexOf("<")>-1;function Qu(s){const l=this,a=Object.assign({className:"clear-button",title:"Clear All",html:f=>`<div class="${f.className}" title="${f.title}">&#10799;</div>`},s);l.on("initialize",()=>{var f=Ku(a.html(a));f.addEventListener("click",m=>{l.isLocked||(l.clear(),l.settings.mode==="single"&&l.settings.allowEmptyOption&&l.addItem(""),m.preventDefault(),m.stopPropagation())}),l.control.appendChild(f)})}const ef=(s,l=!1)=>{s&&(s.preventDefault(),l&&s.stopPropagation())},gi=(s,l,a,f)=>{s.addEventListener(l,a,f)},tf=(s,l)=>{if(Array.isArray(s))s.forEach(l);else for(var a in s)s.hasOwnProperty(a)&&l(s[a],a)},af=s=>{if(s.jquery)return s[0];if(s instanceof HTMLElement)return s;if(nf(s)){var l=document.createElement("template");return l.innerHTML=s.trim(),l.content.firstChild}return document.querySelector(s)},nf=s=>typeof s=="string"&&s.indexOf("<")>-1,sf=(s,l)=>{tf(l,(a,f)=>{a==null?s.removeAttribute(f):s.setAttribute(f,""+a)})},rf=(s,l)=>{var a;(a=s.parentNode)==null||a.insertBefore(l,s.nextSibling)},of=(s,l)=>{var a;(a=s.parentNode)==null||a.insertBefore(l,s)},lf=(s,l)=>{do{var a;if(l=(a=l)==null?void 0:a.previousElementSibling,s==l)return!0}while(l&&l.previousElementSibling);return!1};function cf(){var s=this;if(s.settings.mode!=="multi")return;var l=s.lock,a=s.unlock;let f=!0,m;s.hook("after","setupTemplates",()=>{var w=s.settings.render.item;s.settings.render.item=(y,T)=>{const O=af(w.call(s,y,T));sf(O,{draggable:"true"});const R=ee=>{f||ef(ee),ee.stopPropagation()},z=ee=>{m=O,setTimeout(()=>{O.classList.add("ts-dragging")},0)},B=ee=>{ee.preventDefault(),O.classList.add("ts-drag-over"),re(O,m)},U=()=>{O.classList.remove("ts-drag-over")},re=(ee,q)=>{q!==void 0&&(lf(q,O)?rf(ee,q):of(ee,q))},X=()=>{var ee;document.querySelectorAll(".ts-drag-over").forEach(ie=>ie.classList.remove("ts-drag-over")),(ee=m)==null||ee.classList.remove("ts-dragging"),m=void 0;var q=[];s.control.querySelectorAll("[data-value]").forEach(ie=>{if(ie.dataset.value){let te=ie.dataset.value;te&&q.push(te)}}),s.setValue(q)};return gi(O,"mousedown",R),gi(O,"dragstart",z),gi(O,"dragenter",B),gi(O,"dragover",B),gi(O,"dragleave",U),gi(O,"dragend",X),O}}),s.hook("instead","lock",()=>(f=!1,l.call(s))),s.hook("instead","unlock",()=>(f=!0,a.call(s)))}const hf=(s,l=!1)=>{s&&(s.preventDefault(),l&&s.stopPropagation())},df=s=>{if(s.jquery)return s[0];if(s instanceof HTMLElement)return s;if(uf(s)){var l=document.createElement("template");return l.innerHTML=s.trim(),l.content.firstChild}return document.querySelector(s)},uf=s=>typeof s=="string"&&s.indexOf("<")>-1;function ff(s){const l=this,a=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:f=>'<div class="'+f.headerClass+'"><div class="'+f.titleRowClass+'"><span class="'+f.labelClass+'">'+f.title+'</span><a class="'+f.closeClass+'">&times;</a></div></div>'},s);l.on("initialize",()=>{var f=df(a.html(a)),m=f.querySelector("."+a.closeClass);m&&m.addEventListener("click",w=>{hf(w,!0),l.close()}),l.dropdown.insertBefore(f,l.dropdown.firstChild)})}const gf=(s,l)=>{if(Array.isArray(s))s.forEach(l);else for(var a in s)s.hasOwnProperty(a)&&l(s[a],a)},pf=(s,...l)=>{var a=mf(l);s=xf(s),s.map(f=>{a.map(m=>{f.classList.remove(m)})})},mf=s=>{var l=[];return gf(s,a=>{typeof a=="string"&&(a=a.trim().split(/[\t\n\f\r\s]/)),Array.isArray(a)&&(l=l.concat(a))}),l.filter(Boolean)},xf=s=>(Array.isArray(s)||(s=[s]),s),bf=(s,l)=>{if(!s)return-1;l=l||s.nodeName;for(var a=0;s=s.previousElementSibling;)s.matches(l)&&a++;return a};function vf(){var s=this;s.hook("instead","setCaret",l=>{s.settings.mode==="single"||!s.control.contains(s.control_input)?l=s.items.length:(l=Math.max(0,Math.min(s.items.length,l)),l!=s.caretPos&&!s.isPending&&s.controlChildren().forEach((a,f)=>{f<l?s.control_input.insertAdjacentElement("beforebegin",a):s.control.appendChild(a)})),s.caretPos=l}),s.hook("instead","moveCaret",l=>{if(!s.isFocused)return;const a=s.getLastActive(l);if(a){const f=bf(a);s.setCaret(l>0?f+1:f),s.setActiveItem(),pf(a,"last-active")}else s.setCaret(s.caretPos+l)})}const yf=27,wf=9,Af=(s,l=!1)=>{s&&(s.preventDefault(),l&&s.stopPropagation())},kf=(s,l,a,f)=>{s.addEventListener(l,a,f)},Cf=(s,l)=>{if(Array.isArray(s))s.forEach(l);else for(var a in s)s.hasOwnProperty(a)&&l(s[a],a)},xr=s=>{if(s.jquery)return s[0];if(s instanceof HTMLElement)return s;if(Sf(s)){var l=document.createElement("template");return l.innerHTML=s.trim(),l.content.firstChild}return document.querySelector(s)},Sf=s=>typeof s=="string"&&s.indexOf("<")>-1,Mf=(s,...l)=>{var a=Ef(l);s=Lf(s),s.map(f=>{a.map(m=>{f.classList.add(m)})})},Ef=s=>{var l=[];return Cf(s,a=>{typeof a=="string"&&(a=a.trim().split(/[\t\n\f\r\s]/)),Array.isArray(a)&&(l=l.concat(a))}),l.filter(Boolean)},Lf=s=>(Array.isArray(s)||(s=[s]),s);function Pf(){const s=this;s.settings.shouldOpen=!0,s.hook("before","setup",()=>{s.focus_node=s.control,Mf(s.control_input,"dropdown-input");const l=xr('<div class="dropdown-input-wrap">');l.append(s.control_input),s.dropdown.insertBefore(l,s.dropdown.firstChild);const a=xr('<input class="items-placeholder" tabindex="-1" />');a.placeholder=s.settings.placeholder||"",s.control.append(a)}),s.on("initialize",()=>{s.control_input.addEventListener("keydown",a=>{switch(a.keyCode){case yf:s.isOpen&&(Af(a,!0),s.close()),s.clearActiveItems();return;case wf:s.focus_node.tabIndex=-1;break}return s.onKeyDown.call(s,a)}),s.on("blur",()=>{s.focus_node.tabIndex=s.isDisabled?-1:s.tabIndex}),s.on("dropdown_open",()=>{s.control_input.focus()});const l=s.onBlur;s.hook("instead","onBlur",a=>{if(!(a&&a.relatedTarget==s.control_input))return l.call(s)}),kf(s.control_input,"blur",()=>s.onBlur()),s.hook("before","close",()=>{s.isOpen&&s.focus_node.focus({preventScroll:!0})})})}const Aa=(s,l,a,f)=>{s.addEventListener(l,a,f)};function Tf(){var s=this;s.on("initialize",()=>{var l=document.createElement("span"),a=s.control_input;l.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",s.wrapper.appendChild(l);var f=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"];for(const w of f)l.style[w]=a.style[w];var m=()=>{l.textContent=a.value,a.style.width=l.clientWidth+"px"};m(),s.on("update item_add item_remove",m),Aa(a,"input",m),Aa(a,"keyup",m),Aa(a,"blur",m),Aa(a,"update",m)})}function If(){var s=this,l=s.deleteSelection;this.hook("instead","deleteSelection",a=>s.activeItems.length?l.call(s,a):!1)}function _f(){this.hook("instead","setActiveItem",()=>{}),this.hook("instead","selectAll",()=>{})}const br=37,Of=39,Df=(s,l,a)=>{for(;s&&s.matches;){if(s.matches(l))return s;s=s.parentNode}},Ff=(s,l)=>{if(!s)return-1;l=l||s.nodeName;for(var a=0;s=s.previousElementSibling;)s.matches(l)&&a++;return a};function Rf(){var s=this,l=s.onKeyDown;s.hook("instead","onKeyDown",a=>{var f,m,w,y;if(!s.isOpen||!(a.keyCode===br||a.keyCode===Of))return l.call(s,a);s.ignoreHover=!0,y=Df(s.activeOption,"[data-group]"),f=Ff(s.activeOption,"[data-selectable]"),y&&(a.keyCode===br?y=y.previousSibling:y=y.nextSibling,y&&(w=y.querySelectorAll("[data-selectable]"),m=w[Math.min(w.length-1,f)],m&&s.setActiveOption(m)))})}const zf=s=>(s+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),vr=(s,l=!1)=>{s&&(s.preventDefault(),l&&s.stopPropagation())},yr=(s,l,a,f)=>{s.addEventListener(l,a,f)},wr=s=>{if(s.jquery)return s[0];if(s instanceof HTMLElement)return s;if(Nf(s)){var l=document.createElement("template");return l.innerHTML=s.trim(),l.content.firstChild}return document.querySelector(s)},Nf=s=>typeof s=="string"&&s.indexOf("<")>-1;function Yf(s){const l=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},s);var a=this;if(l.append){var f='<a href="javascript:void(0)" class="'+l.className+'" tabindex="-1" title="'+zf(l.title)+'">'+l.label+"</a>";a.hook("after","setupTemplates",()=>{var m=a.settings.render.item;a.settings.render.item=(w,y)=>{var T=wr(m.call(a,w,y)),O=wr(f);return T.appendChild(O),yr(O,"mousedown",R=>{vr(R,!0)}),yr(O,"click",R=>{a.isLocked||(vr(R,!0),!a.isLocked&&a.shouldDelete([T],R)&&(a.removeItem(T),a.refreshOptions(!1),a.inputState()))}),T}})}}function Hf(s){const l=this,a=Object.assign({text:f=>f[l.settings.labelField]},s);l.on("item_remove",function(f){if(l.isFocused&&l.control_input.value.trim()===""){var m=l.options[f];m&&l.setTextboxValue(a.text.call(l,m))}})}const Xf=(s,l)=>{if(Array.isArray(s))s.forEach(l);else for(var a in s)s.hasOwnProperty(a)&&l(s[a],a)},Bf=(s,...l)=>{var a=Wf(l);s=Gf(s),s.map(f=>{a.map(m=>{f.classList.add(m)})})},Wf=s=>{var l=[];return Xf(s,a=>{typeof a=="string"&&(a=a.trim().split(/[\t\n\f\r\s]/)),Array.isArray(a)&&(l=l.concat(a))}),l.filter(Boolean)},Gf=s=>(Array.isArray(s)||(s=[s]),s);function Vf(){const s=this,l=s.canLoad,a=s.clearActiveOption,f=s.loadCallback;var m={},w,y=!1,T,O=[];if(s.settings.shouldLoadMore||(s.settings.shouldLoadMore=()=>{if(w.clientHeight/(w.scrollHeight-w.scrollTop)>.9)return!0;if(s.activeOption){var U=s.selectable(),re=Array.from(U).indexOf(s.activeOption);if(re>=U.length-2)return!0}return!1}),!s.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";s.settings.sortField=[{field:"$order"},{field:"$score"}];const R=B=>typeof s.settings.maxOptions=="number"&&w.children.length>=s.settings.maxOptions?!1:!!(B in m&&m[B]),z=(B,U)=>s.items.indexOf(U)>=0||O.indexOf(U)>=0;s.setNextUrl=(B,U)=>{m[B]=U},s.getUrl=B=>{if(B in m){const U=m[B];return m[B]=!1,U}return s.clearPagination(),s.settings.firstUrl.call(s,B)},s.clearPagination=()=>{m={}},s.hook("instead","clearActiveOption",()=>{if(!y)return a.call(s)}),s.hook("instead","canLoad",B=>B in m?R(B):l.call(s,B)),s.hook("instead","loadCallback",(B,U)=>{if(!y)s.clearOptions(z);else if(T){const re=B[0];re!==void 0&&(T.dataset.value=re[s.settings.valueField])}f.call(s,B,U),y=!1}),s.hook("after","refreshOptions",()=>{const B=s.lastValue;var U;R(B)?(U=s.render("loading_more",{query:B}),U&&(U.setAttribute("data-selectable",""),T=U)):B in m&&!w.querySelector(".no-results")&&(U=s.render("no_more_results",{query:B})),U&&(Bf(U,s.settings.optionClass),w.append(U))}),s.on("initialize",()=>{O=Object.keys(s.options),w=s.dropdown_content,s.settings.render=Object.assign({},{loading_more:()=>'<div class="loading-more-results">Loading more results ... </div>',no_more_results:()=>'<div class="no-more-results">No more results</div>'},s.settings.render),w.addEventListener("scroll",()=>{s.settings.shouldLoadMore.call(s)&&R(s.lastValue)&&(y||(y=!0,s.load.call(s,s.lastValue)))})})}tt.define("change_listener",Vu);tt.define("checkbox_options",Zu);tt.define("clear_button",Qu);tt.define("drag_drop",cf);tt.define("dropdown_header",ff);tt.define("caret_position",vf);tt.define("dropdown_input",Pf);tt.define("input_autogrow",Tf);tt.define("no_backspace_delete",If);tt.define("no_active_items",_f);tt.define("optgroup_columns",Rf);tt.define("remove_button",Yf);tt.define("restore_on_backspace",Hf);tt.define("virtual_scroll",Vf);function jf(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var ns={exports:{}};/*!
 * ApexCharts v3.54.1
 * (c) 2018-2024 ApexCharts
 * Released under the MIT License.
 */(function(s,l){function a(E,e){(e==null||e>E.length)&&(e=E.length);for(var t=0,i=Array(e);t<e;t++)i[t]=E[t];return i}function f(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}function m(E,e){if(!(E instanceof e))throw new TypeError("Cannot call a class as a function")}function w(E,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(E,te(i.key),i)}}function y(E,e,t){return e&&w(E.prototype,e),t&&w(E,t),Object.defineProperty(E,"prototype",{writable:!1}),E}function T(E,e){var t=typeof Symbol<"u"&&E[Symbol.iterator]||E["@@iterator"];if(!t){if(Array.isArray(E)||(t=be(E))||e){t&&(E=t);var i=0,n=function(){};return{s:n,n:function(){return i>=E.length?{done:!0}:{done:!1,value:E[i++]}},e:function(h){throw h},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,r=!0,c=!1;return{s:function(){t=t.call(E)},n:function(){var h=t.next();return r=h.done,h},e:function(h){c=!0,o=h},f:function(){try{r||t.return==null||t.return()}finally{if(c)throw o}}}}function O(E){var e=U();return function(){var t,i=z(E);if(e){var n=z(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return function(o,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f(o)}(this,t)}}function R(E,e,t){return(e=te(e))in E?Object.defineProperty(E,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):E[e]=t,E}function z(E){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},z(E)}function B(E,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(e&&e.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),Object.defineProperty(E,"prototype",{writable:!1}),e&&ee(E,e)}function U(){try{var E=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U=function(){return!!E})()}function re(E,e){var t=Object.keys(E);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(E);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(E,n).enumerable})),t.push.apply(t,i)}return t}function X(E){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?re(Object(t),!0).forEach(function(i){R(E,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(t)):re(Object(t)).forEach(function(i){Object.defineProperty(E,i,Object.getOwnPropertyDescriptor(t,i))})}return E}function ee(E,e){return ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},ee(E,e)}function q(E,e){return function(t){if(Array.isArray(t))return t}(E)||function(t,i){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var o,r,c,h,u=[],p=!0,g=!1;try{if(c=(n=n.call(t)).next,i===0){if(Object(n)!==n)return;p=!1}else for(;!(p=(o=c.call(n)).done)&&(u.push(o.value),u.length!==i);p=!0);}catch(x){g=!0,r=x}finally{try{if(!p&&n.return!=null&&(h=n.return(),Object(h)!==h))return}finally{if(g)throw r}}return u}}(E,e)||be(E,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ie(E){return function(e){if(Array.isArray(e))return a(e)}(E)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(E)||be(E)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function te(E){var e=function(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}(E,"string");return typeof e=="symbol"?e:e+""}function ae(E){return ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(E)}function be(E,e){if(E){if(typeof E=="string")return a(E,e);var t={}.toString.call(E).slice(8,-1);return t==="Object"&&E.constructor&&(t=E.constructor.name),t==="Map"||t==="Set"?Array.from(E):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(E,e):void 0}}var H=function(){function E(){m(this,E)}return y(E,[{key:"shadeRGBColor",value:function(e,t){var i=t.split(","),n=e<0?0:255,o=e<0?-1*e:e,r=parseInt(i[0].slice(4),10),c=parseInt(i[1],10),h=parseInt(i[2],10);return"rgb("+(Math.round((n-r)*o)+r)+","+(Math.round((n-c)*o)+c)+","+(Math.round((n-h)*o)+h)+")"}},{key:"shadeHexColor",value:function(e,t){var i=parseInt(t.slice(1),16),n=e<0?0:255,o=e<0?-1*e:e,r=i>>16,c=i>>8&255,h=255&i;return"#"+(16777216+65536*(Math.round((n-r)*o)+r)+256*(Math.round((n-c)*o)+c)+(Math.round((n-h)*o)+h)).toString(16).slice(1)}},{key:"shadeColor",value:function(e,t){return E.isColorHex(t)?this.shadeHexColor(e,t):this.shadeRGBColor(e,t)}}],[{key:"bind",value:function(e,t){return function(){return e.apply(t,arguments)}}},{key:"isObject",value:function(e){return e&&ae(e)==="object"&&!Array.isArray(e)&&e!=null}},{key:"is",value:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"}},{key:"listToArray",value:function(e){var t,i=[];for(t=0;t<e.length;t++)i[t]=e[t];return i}},{key:"extend",value:function(e,t){var i=this;typeof Object.assign!="function"&&(Object.assign=function(o){if(o==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(o),c=1;c<arguments.length;c++){var h=arguments[c];if(h!=null)for(var u in h)h.hasOwnProperty(u)&&(r[u]=h[u])}return r});var n=Object.assign({},e);return this.isObject(e)&&this.isObject(t)&&Object.keys(t).forEach(function(o){i.isObject(t[o])&&o in e?n[o]=i.extend(e[o],t[o]):Object.assign(n,R({},o,t[o]))}),n}},{key:"extendArray",value:function(e,t){var i=[];return e.map(function(n){i.push(E.extend(t,n))}),e=i}},{key:"monthMod",value:function(e){return e%12}},{key:"clone",value:function(e){if(E.is("Array",e)){for(var t=[],i=0;i<e.length;i++)t[i]=this.clone(e[i]);return t}if(E.is("Null",e))return null;if(E.is("Date",e))return e;if(ae(e)==="object"){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=this.clone(e[o]));return n}return e}},{key:"log10",value:function(e){return Math.log(e)/Math.LN10}},{key:"roundToBase10",value:function(e){return Math.pow(10,Math.floor(Math.log10(e)))}},{key:"roundToBase",value:function(e,t){return Math.pow(t,Math.floor(Math.log(e)/Math.log(t)))}},{key:"parseNumber",value:function(e){return e===null?e:parseFloat(e)}},{key:"stripNumber",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Number.isInteger(e)?e:parseFloat(e.toPrecision(t))}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(e){var t=String(e).split(/[eE]/);if(t.length===1)return t[0];var i="",n=e<0?"-":"",o=t[0].replace(".",""),r=Number(t[1])+1;if(r<0){for(i=n+"0.";r++;)i+="0";return i+o.replace(/^-/,"")}for(r-=o.length;r--;)i+="0";return o+i}},{key:"getDimensions",value:function(e){var t=getComputedStyle(e,null),i=e.clientHeight,n=e.clientWidth;return i-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),[n-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),i]}},{key:"getBoundingClientRect",value:function(e){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:e.clientWidth,height:e.clientHeight,x:t.left,y:t.top}}},{key:"getLargestStringFromArr",value:function(e){return e.reduce(function(t,i){return Array.isArray(i)&&(i=i.reduce(function(n,o){return n.length>o.length?n:o})),t.length>i.length?t:i},0)}},{key:"hexToRgba",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"#999999",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.6;e.substring(0,1)!=="#"&&(e="#999999");var i=e.replace("#","");i=i.match(new RegExp("(.{"+i.length/3+"})","g"));for(var n=0;n<i.length;n++)i[n]=parseInt(i[n].length===1?i[n]+i[n]:i[n],16);return t!==void 0&&i.push(t),"rgba("+i.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(e){return parseFloat(e.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&e.length===4?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(e)}},{key:"getPolygonPos",value:function(e,t){for(var i=[],n=2*Math.PI/t,o=0;o<t;o++){var r={};r.x=e*Math.sin(o*n),r.y=-e*Math.cos(o*n),i.push(r)}return i}},{key:"polarToCartesian",value:function(e,t,i,n){var o=(n-90)*Math.PI/180;return{x:e+i*Math.cos(o),y:t+i*Math.sin(o)}}},{key:"escapeString",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x",i=e.toString().slice();return i=i.replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,t)}},{key:"negToZero",value:function(e){return e<0?0:e}},{key:"moveIndexInArray",value:function(e,t,i){if(i>=e.length)for(var n=i-e.length+1;n--;)e.push(void 0);return e.splice(i,0,e.splice(t,1)[0]),e}},{key:"extractNumber",value:function(e){return parseFloat(e.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}},{key:"setELstyles",value:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e.style.key=t[i])}},{key:"preciseAddition",value:function(e,t){var i=(String(e).split(".")[1]||"").length,n=(String(t).split(".")[1]||"").length,o=Math.pow(10,Math.max(i,n));return(Math.round(e*o)+Math.round(t*o))/o}},{key:"isNumber",value:function(e){return!isNaN(e)&&parseFloat(Number(e))===e&&!isNaN(parseInt(e,10))}},{key:"isFloat",value:function(e){return Number(e)===e&&e%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isMsEdge",value:function(){var e=window.navigator.userAgent,t=e.indexOf("Edge/");return t>0&&parseInt(e.substring(t+5,e.indexOf(".",t)),10)}},{key:"getGCD",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:7,n=Math.pow(10,i-Math.floor(Math.log10(Math.max(e,t))));for(e=Math.round(Math.abs(e)*n),t=Math.round(Math.abs(t)*n);t;){var o=t;t=e%t,e=o}return e/n}},{key:"getPrimeFactors",value:function(e){for(var t=[],i=2;e>=2;)e%i==0?(t.push(i),e/=i):i++;return t}},{key:"mod",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:7,n=Math.pow(10,i-Math.floor(Math.log10(Math.max(e,t))));return(e=Math.round(Math.abs(e)*n))%(t=Math.round(Math.abs(t)*n))/n}}]),E}(),ke=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w,this.setEasingFunctions()}return y(E,[{key:"setEasingFunctions",value:function(){var e;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":e="-";break;case"easein":e="<";break;case"easeout":e=">";break;case"easeinout":default:e="<>";break;case"swing":e=function(t){var i=1.70158;return(t-=1)*t*((i+1)*t+i)+1};break;case"bounce":e=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375};break;case"elastic":e=function(t){return t===!!t?t:Math.pow(2,-10*t)*Math.sin((t-.075)*(2*Math.PI)/.3)+1}}this.w.globals.easing=e}}},{key:"animateLine",value:function(e,t,i,n){e.attr(t).animate(n).attr(i)}},{key:"animateMarker",value:function(e,t,i,n){e.attr({opacity:0}).animate(t,i).attr({opacity:1}).afterAll(function(){n()})}},{key:"animateRect",value:function(e,t,i,n,o){e.attr(t).animate(n).attr(i).afterAll(function(){return o()})}},{key:"animatePathsGradually",value:function(e){var t=e.el,i=e.realIndex,n=e.j,o=e.fill,r=e.pathFrom,c=e.pathTo,h=e.speed,u=e.delay,p=this.w,g=0;p.config.chart.animations.animateGradually.enabled&&(g=p.config.chart.animations.animateGradually.delay),p.config.chart.animations.dynamicAnimation.enabled&&p.globals.dataChanged&&p.config.chart.type!=="bar"&&(g=0),this.morphSVG(t,i,n,p.config.chart.type!=="line"||p.globals.comboCharts?o:"stroke",r,c,h,u*g)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(e){var t=e.el;t.classList.remove("apexcharts-element-hidden"),t.classList.add("apexcharts-hidden-element-shown")})}},{key:"animationCompleted",value:function(e){var t=this.w;t.globals.animationEnded||(t.globals.animationEnded=!0,this.showDelayedElements(),typeof t.config.chart.events.animationEnd=="function"&&t.config.chart.events.animationEnd(this.ctx,{el:e,w:t}))}},{key:"morphSVG",value:function(e,t,i,n,o,r,c,h){var u=this,p=this.w;o||(o=e.attr("pathFrom")),r||(r=e.attr("pathTo"));var g=function(x){return p.config.chart.type==="radar"&&(c=1),"M 0 ".concat(p.globals.gridHeight)};(!o||o.indexOf("undefined")>-1||o.indexOf("NaN")>-1)&&(o=g()),(!r||r.indexOf("undefined")>-1||r.indexOf("NaN")>-1)&&(r=g()),p.globals.shouldAnimate||(c=1),e.plot(o).animate(1,p.globals.easing,h).plot(o).animate(c,p.globals.easing,h).plot(r).afterAll(function(){H.isNumber(i)?i===p.globals.series[p.globals.maxValsInArrayIndex].length-2&&p.globals.shouldAnimate&&u.animationCompleted(e):n!=="none"&&p.globals.shouldAnimate&&(!p.globals.comboCharts&&t===p.globals.series.length-1||p.globals.comboCharts)&&u.animationCompleted(e),u.showDelayedElements()})}}]),E}(),le=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w}return y(E,[{key:"getDefaultFilter",value:function(e,t){var i=this.w;e.unfilter(!0),new window.SVG.Filter().size("120%","180%","-5%","-40%"),i.config.states.normal.filter!=="none"?this.applyFilter(e,t,i.config.states.normal.filter.type,i.config.states.normal.filter.value):i.config.chart.dropShadow.enabled&&this.dropShadow(e,i.config.chart.dropShadow,t)}},{key:"addNormalFilter",value:function(e,t){var i=this.w;i.config.chart.dropShadow.enabled&&!e.node.classList.contains("apexcharts-marker")&&this.dropShadow(e,i.config.chart.dropShadow,t)}},{key:"addLightenFilter",value:function(e,t,i){var n=this,o=this.w,r=i.intensity;e.unfilter(!0),new window.SVG.Filter,e.filter(function(c){var h=o.config.chart.dropShadow;(h.enabled?n.addShadow(c,t,h):c).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:r}})}),e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)}},{key:"addDarkenFilter",value:function(e,t,i){var n=this,o=this.w,r=i.intensity;e.unfilter(!0),new window.SVG.Filter,e.filter(function(c){var h=o.config.chart.dropShadow;(h.enabled?n.addShadow(c,t,h):c).componentTransfer({rgb:{type:"linear",slope:r}})}),e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)}},{key:"applyFilter",value:function(e,t,i){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.5;switch(i){case"none":this.addNormalFilter(e,t);break;case"lighten":this.addLightenFilter(e,t,{intensity:n});break;case"darken":this.addDarkenFilter(e,t,{intensity:n})}}},{key:"addShadow",value:function(e,t,i){var n,o=this.w,r=i.blur,c=i.top,h=i.left,u=i.color,p=i.opacity;if(((n=o.config.chart.dropShadow.enabledOnSeries)===null||n===void 0?void 0:n.length)>0&&o.config.chart.dropShadow.enabledOnSeries.indexOf(t)===-1)return e;var g=e.flood(Array.isArray(u)?u[t]:u,p).composite(e.sourceAlpha,"in").offset(h,c).gaussianBlur(r).merge(e.source);return e.blend(e.source,g)}},{key:"dropShadow",value:function(e,t){var i,n,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=t.top,c=t.left,h=t.blur,u=t.color,p=t.opacity,g=t.noUserSpaceOnUse,x=this.w;return e.unfilter(!0),H.isMsEdge()&&x.config.chart.type==="radialBar"||((i=x.config.chart.dropShadow.enabledOnSeries)===null||i===void 0?void 0:i.length)>0&&((n=x.config.chart.dropShadow.enabledOnSeries)===null||n===void 0?void 0:n.indexOf(o))===-1||(u=Array.isArray(u)?u[o]:u,e.filter(function(v){var k=null;k=H.isSafari()||H.isFirefox()||H.isMsEdge()?v.flood(u,p).composite(v.sourceAlpha,"in").offset(c,r).gaussianBlur(h):v.flood(u,p).composite(v.sourceAlpha,"in").offset(c,r).gaussianBlur(h).merge(v.source),v.blend(v.source,k)}),g||e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)),e}},{key:"setSelectionFilter",value:function(e,t,i){var n=this.w;if(n.globals.selectedDataPoints[t]!==void 0&&n.globals.selectedDataPoints[t].indexOf(i)>-1){e.node.setAttribute("selected",!0);var o=n.config.states.active.filter;o!=="none"&&this.applyFilter(e,t,o.type,o.value)}}},{key:"_scaleFilterSize",value:function(e){(function(t){for(var i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i])})({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),E}(),V=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w}return y(E,[{key:"roundPathCorners",value:function(e,t){function i(_,N,Y){var G=N.x-_.x,J=N.y-_.y,Z=Math.sqrt(G*G+J*J);return n(_,N,Math.min(1,Y/Z))}function n(_,N,Y){return{x:_.x+(N.x-_.x)*Y,y:_.y+(N.y-_.y)*Y}}function o(_,N){_.length>2&&(_[_.length-2]=N.x,_[_.length-1]=N.y)}function r(_){return{x:parseFloat(_[_.length-2]),y:parseFloat(_[_.length-1])}}e.indexOf("NaN")>-1&&(e="");var c=e.split(/[,\s]/).reduce(function(_,N){var Y=N.match("([a-zA-Z])(.+)");return Y?(_.push(Y[1]),_.push(Y[2])):_.push(N),_},[]).reduce(function(_,N){return parseFloat(N)==N&&_.length?_[_.length-1].push(N):_.push([N]),_},[]),h=[];if(c.length>1){var u=r(c[0]),p=null;c[c.length-1][0]=="Z"&&c[0].length>2&&(p=["L",u.x,u.y],c[c.length-1]=p),h.push(c[0]);for(var g=1;g<c.length;g++){var x=h[h.length-1],v=c[g],k=v==p?c[1]:c[g+1];if(k&&x&&x.length>2&&v[0]=="L"&&k.length>2&&k[0]=="L"){var A,S,M=r(x),L=r(v),d=r(k);A=i(L,M,t),S=i(L,d,t),o(v,A),v.origPoint=L,h.push(v);var b=n(A,L,.5),C=n(L,S,.5),I=["C",b.x,b.y,C.x,C.y,S.x,S.y];I.origPoint=L,h.push(I)}else h.push(v)}if(p){var P=r(h[h.length-1]);h.push(["Z"]),o(h[0],P)}}else h=c;return h.reduce(function(_,N){return _+N.join(" ")+" "},"")}},{key:"drawLine",value:function(e,t,i,n){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"#a8a8a8",r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,h=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"butt";return this.w.globals.dom.Paper.line().attr({x1:e,y1:t,x2:i,y2:n,stroke:o,"stroke-dasharray":r,"stroke-width":c,"stroke-linecap":h})}},{key:"drawRect",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"#fefefe",c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1,h=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,u=arguments.length>8&&arguments[8]!==void 0?arguments[8]:null,p=arguments.length>9&&arguments[9]!==void 0?arguments[9]:0,g=this.w.globals.dom.Paper.rect();return g.attr({x:e,y:t,width:i>0?i:0,height:n>0?n:0,rx:o,ry:o,opacity:c,"stroke-width":h!==null?h:0,stroke:u!==null?u:"none","stroke-dasharray":p}),g.node.setAttribute("fill",r),g}},{key:"drawPolygon",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#e1e1e1",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(e).attr({fill:n,stroke:t,"stroke-width":i})}},{key:"drawCircle",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;e<0&&(e=0);var i=this.w.globals.dom.Paper.circle(2*e);return t!==null&&i.attr(t),i}},{key:"drawPath",value:function(e){var t=e.d,i=t===void 0?"":t,n=e.stroke,o=n===void 0?"#a8a8a8":n,r=e.strokeWidth,c=r===void 0?1:r,h=e.fill,u=e.fillOpacity,p=u===void 0?1:u,g=e.strokeOpacity,x=g===void 0?1:g,v=e.classes,k=e.strokeLinecap,A=k===void 0?null:k,S=e.strokeDashArray,M=S===void 0?0:S,L=this.w;return A===null&&(A=L.config.stroke.lineCap),(i.indexOf("undefined")>-1||i.indexOf("NaN")>-1)&&(i="M 0 ".concat(L.globals.gridHeight)),L.globals.dom.Paper.path(i).attr({fill:h,"fill-opacity":p,stroke:o,"stroke-opacity":x,"stroke-linecap":A,"stroke-width":c,"stroke-dasharray":M,class:v})}},{key:"group",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=this.w.globals.dom.Paper.group();return e!==null&&t.attr(e),t}},{key:"move",value:function(e,t){var i=["M",e,t].join(" ");return i}},{key:"line",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=null;return i===null?n=[" L",e,t].join(" "):i==="H"?n=[" H",e].join(" "):i==="V"&&(n=[" V",t].join(" ")),n}},{key:"curve",value:function(e,t,i,n,o,r){var c=["C",e,t,i,n,o,r].join(" ");return c}},{key:"quadraticCurve",value:function(e,t,i,n){return["Q",e,t,i,n].join(" ")}},{key:"arc",value:function(e,t,i,n,o,r,c){var h="A";arguments.length>7&&arguments[7]!==void 0&&arguments[7]&&(h="a");var u=[h,e,t,i,n,o,r,c].join(" ");return u}},{key:"renderPaths",value:function(e){var t,i=e.j,n=e.realIndex,o=e.pathFrom,r=e.pathTo,c=e.stroke,h=e.strokeWidth,u=e.strokeLinecap,p=e.fill,g=e.animationDelay,x=e.initialSpeed,v=e.dataChangeSpeed,k=e.className,A=e.chartType,S=e.shouldClipToGrid,M=S===void 0||S,L=e.bindEventsOnPaths,d=L===void 0||L,b=e.drawShadow,C=b===void 0||b,I=this.w,P=new le(this.ctx),_=new ke(this.ctx),N=this.w.config.chart.animations.enabled,Y=N&&this.w.config.chart.animations.dynamicAnimation.enabled,G=!!(N&&!I.globals.resized||Y&&I.globals.dataChanged&&I.globals.shouldAnimate);G?t=o:(t=r,I.globals.animationEnded=!0);var J=I.config.stroke.dashArray,Z=0;Z=Array.isArray(J)?J[n]:I.config.stroke.dashArray;var Q=this.drawPath({d:t,stroke:c,strokeWidth:h,fill:p,fillOpacity:1,classes:k,strokeLinecap:u,strokeDashArray:Z});if(Q.attr("index",n),M&&(A==="bar"&&!I.globals.isHorizontal||I.globals.comboCharts?Q.attr({"clip-path":"url(#gridRectBarMask".concat(I.globals.cuid,")")}):Q.attr({"clip-path":"url(#gridRectMask".concat(I.globals.cuid,")")})),I.config.states.normal.filter.type!=="none")P.getDefaultFilter(Q,n);else if(I.config.chart.dropShadow.enabled&&C){var se=I.config.chart.dropShadow;P.dropShadow(Q,se,n)}d&&(Q.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,Q)),Q.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,Q)),Q.node.addEventListener("mousedown",this.pathMouseDown.bind(this,Q))),Q.attr({pathTo:r,pathFrom:o});var ce={el:Q,j:i,realIndex:n,pathFrom:o,pathTo:r,fill:p,strokeWidth:h,delay:g};return!N||I.globals.resized||I.globals.dataChanged?!I.globals.resized&&I.globals.dataChanged||_.showDelayedElements():_.animatePathsGradually(X(X({},ce),{},{speed:x})),I.globals.dataChanged&&Y&&G&&_.animatePathsGradually(X(X({},ce),{},{speed:v})),Q}},{key:"drawPattern",value:function(e,t,i){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"#a8a8a8",o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;return this.w.globals.dom.Paper.pattern(t,i,function(r){e==="horizontalLines"?r.line(0,0,i,0).stroke({color:n,width:o+1}):e==="verticalLines"?r.line(0,0,0,t).stroke({color:n,width:o+1}):e==="slantedLines"?r.line(0,0,t,i).stroke({color:n,width:o}):e==="squares"?r.rect(t,i).fill("none").stroke({color:n,width:o}):e==="circles"&&r.circle(t).fill("none").stroke({color:n,width:o})})}},{key:"drawGradient",value:function(e,t,i,n,o){var r,c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,h=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,p=arguments.length>8&&arguments[8]!==void 0?arguments[8]:0,g=this.w;t.length<9&&t.indexOf("#")===0&&(t=H.hexToRgba(t,n)),i.length<9&&i.indexOf("#")===0&&(i=H.hexToRgba(i,o));var x=0,v=1,k=1,A=null;h!==null&&(x=h[0]!==void 0?h[0]/100:0,v=h[1]!==void 0?h[1]/100:1,k=h[2]!==void 0?h[2]/100:1,A=h[3]!==void 0?h[3]/100:null);var S=!(g.config.chart.type!=="donut"&&g.config.chart.type!=="pie"&&g.config.chart.type!=="polarArea"&&g.config.chart.type!=="bubble");if(r=u===null||u.length===0?g.globals.dom.Paper.gradient(S?"radial":"linear",function(d){d.at(x,t,n),d.at(v,i,o),d.at(k,i,o),A!==null&&d.at(A,t,n)}):g.globals.dom.Paper.gradient(S?"radial":"linear",function(d){(Array.isArray(u[p])?u[p]:u).forEach(function(b){d.at(b.offset/100,b.color,b.opacity)})}),S){var M=g.globals.gridWidth/2,L=g.globals.gridHeight/2;g.config.chart.type!=="bubble"?r.attr({gradientUnits:"userSpaceOnUse",cx:M,cy:L,r:c}):r.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else e==="vertical"?r.from(0,0).to(0,1):e==="diagonal"?r.from(0,0).to(1,1):e==="horizontal"?r.from(0,1).to(1,1):e==="diagonal2"&&r.from(1,0).to(0,1);return r}},{key:"getTextBasedOnMaxWidth",value:function(e){var t=e.text,i=e.maxWidth,n=e.fontSize,o=e.fontFamily,r=this.getTextRects(t,n,o),c=r.width/t.length,h=Math.floor(i/c);return i<r.width?t.slice(0,h-3)+"...":t}},{key:"drawText",value:function(e){var t=this,i=e.x,n=e.y,o=e.text,r=e.textAnchor,c=e.fontSize,h=e.fontFamily,u=e.fontWeight,p=e.foreColor,g=e.opacity,x=e.maxWidth,v=e.cssClass,k=v===void 0?"":v,A=e.isPlainText,S=A===void 0||A,M=e.dominantBaseline,L=M===void 0?"auto":M,d=this.w;o===void 0&&(o="");var b=o;r||(r="start"),p&&p.length||(p=d.config.chart.foreColor),h=h||d.config.chart.fontFamily,u=u||"regular";var C,I={maxWidth:x,fontSize:c=c||"11px",fontFamily:h};return Array.isArray(o)?C=d.globals.dom.Paper.text(function(P){for(var _=0;_<o.length;_++)b=o[_],x&&(b=t.getTextBasedOnMaxWidth(X({text:o[_]},I))),_===0?P.tspan(b):P.tspan(b).newLine()}):(x&&(b=this.getTextBasedOnMaxWidth(X({text:o},I))),C=S?d.globals.dom.Paper.plain(o):d.globals.dom.Paper.text(function(P){return P.tspan(b)})),C.attr({x:i,y:n,"text-anchor":r,"dominant-baseline":L,"font-size":c,"font-family":h,"font-weight":u,fill:p,class:"apexcharts-text "+k}),C.node.style.fontFamily=h,C.node.style.opacity=g,C}},{key:"getMarkerPath",value:function(e,t,i,n){var o="";switch(i){case"cross":o="M ".concat(e-(n/=1.4)," ").concat(t-n," L ").concat(e+n," ").concat(t+n,"  M ").concat(e-n," ").concat(t+n," L ").concat(e+n," ").concat(t-n);break;case"plus":o="M ".concat(e-(n/=1.12)," ").concat(t," L ").concat(e+n," ").concat(t,"  M ").concat(e," ").concat(t-n," L ").concat(e," ").concat(t+n);break;case"star":case"sparkle":var r=5;n*=1.15,i==="sparkle"&&(n/=1.1,r=4);for(var c=Math.PI/r,h=0;h<=2*r;h++){var u=h*c,p=h%2==0?n:n/2;o+=(h===0?"M":"L")+(e+p*Math.sin(u))+","+(t-p*Math.cos(u))}o+="Z";break;case"triangle":o="M ".concat(e," ").concat(t-n,` 
             L `).concat(e+n," ").concat(t+n,` 
             L `).concat(e-n," ").concat(t+n,` 
             Z`);break;case"square":case"rect":o="M ".concat(e-(n/=1.125)," ").concat(t-n,` 
           L `).concat(e+n," ").concat(t-n,` 
           L `).concat(e+n," ").concat(t+n,` 
           L `).concat(e-n," ").concat(t+n,` 
           Z`);break;case"diamond":n*=1.05,o="M ".concat(e," ").concat(t-n,` 
             L `).concat(e+n," ").concat(t,` 
             L `).concat(e," ").concat(t+n,` 
             L `).concat(e-n," ").concat(t,` 
            Z`);break;case"line":o="M ".concat(e-(n/=1.1)," ").concat(t,` 
           L `).concat(e+n," ").concat(t);break;default:n*=2,o="M ".concat(e,", ").concat(t,` 
           m -`).concat(n/2,`, 0 
           a `).concat(n/2,",").concat(n/2," 0 1,0 ").concat(n,`,0 
           a `).concat(n/2,",").concat(n/2," 0 1,0 -").concat(n,",0")}return o}},{key:"drawMarkerShape",value:function(e,t,i,n,o){var r=this.drawPath({d:this.getMarkerPath(e,t,i,n,o),stroke:o.pointStrokeColor,strokeDashArray:o.pointStrokeDashArray,strokeWidth:o.pointStrokeWidth,fill:o.pointFillColor,fillOpacity:o.pointFillOpacity,strokeOpacity:o.pointStrokeOpacity});return r.attr({cx:e,cy:t,shape:o.shape,class:o.class?o.class:""}),r}},{key:"drawMarker",value:function(e,t,i){e=e||0;var n=i.pSize||0;return H.isNumber(t)||(n=0,t=0),this.drawMarkerShape(e,t,i==null?void 0:i.shape,n,X(X({},i),i.shape==="line"||i.shape==="plus"||i.shape==="cross"?{pointStrokeColor:i.pointFillColor,pointStrokeOpacity:i.pointFillOpacity}:{}))}},{key:"pathMouseEnter",value:function(e,t){var i=this.w,n=new le(this.ctx),o=parseInt(e.node.getAttribute("index"),10),r=parseInt(e.node.getAttribute("j"),10);if(typeof i.config.chart.events.dataPointMouseEnter=="function"&&i.config.chart.events.dataPointMouseEnter(t,this.ctx,{seriesIndex:o,dataPointIndex:r,w:i}),this.ctx.events.fireEvent("dataPointMouseEnter",[t,this.ctx,{seriesIndex:o,dataPointIndex:r,w:i}]),(i.config.states.active.filter.type==="none"||e.node.getAttribute("selected")!=="true")&&i.config.states.hover.filter.type!=="none"&&!i.globals.isTouchDevice){var c=i.config.states.hover.filter;n.applyFilter(e,o,c.type,c.value)}}},{key:"pathMouseLeave",value:function(e,t){var i=this.w,n=new le(this.ctx),o=parseInt(e.node.getAttribute("index"),10),r=parseInt(e.node.getAttribute("j"),10);typeof i.config.chart.events.dataPointMouseLeave=="function"&&i.config.chart.events.dataPointMouseLeave(t,this.ctx,{seriesIndex:o,dataPointIndex:r,w:i}),this.ctx.events.fireEvent("dataPointMouseLeave",[t,this.ctx,{seriesIndex:o,dataPointIndex:r,w:i}]),i.config.states.active.filter.type!=="none"&&e.node.getAttribute("selected")==="true"||i.config.states.hover.filter.type!=="none"&&n.getDefaultFilter(e,o)}},{key:"pathMouseDown",value:function(e,t){var i=this.w,n=new le(this.ctx),o=parseInt(e.node.getAttribute("index"),10),r=parseInt(e.node.getAttribute("j"),10),c="false";if(e.node.getAttribute("selected")==="true"){if(e.node.setAttribute("selected","false"),i.globals.selectedDataPoints[o].indexOf(r)>-1){var h=i.globals.selectedDataPoints[o].indexOf(r);i.globals.selectedDataPoints[o].splice(h,1)}}else{if(!i.config.states.active.allowMultipleDataPointsSelection&&i.globals.selectedDataPoints.length>0){i.globals.selectedDataPoints=[];var u=i.globals.dom.Paper.select(".apexcharts-series path").members,p=i.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,g=function(k){Array.prototype.forEach.call(k,function(A){A.node.setAttribute("selected","false"),n.getDefaultFilter(A,o)})};g(u),g(p)}e.node.setAttribute("selected","true"),c="true",i.globals.selectedDataPoints[o]===void 0&&(i.globals.selectedDataPoints[o]=[]),i.globals.selectedDataPoints[o].push(r)}if(c==="true"){var x=i.config.states.active.filter;if(x!=="none")n.applyFilter(e,o,x.type,x.value);else if(i.config.states.hover.filter!=="none"&&!i.globals.isTouchDevice){var v=i.config.states.hover.filter;n.applyFilter(e,o,v.type,v.value)}}else i.config.states.active.filter.type!=="none"&&(i.config.states.hover.filter.type==="none"||i.globals.isTouchDevice?n.getDefaultFilter(e,o):(v=i.config.states.hover.filter,n.applyFilter(e,o,v.type,v.value)));typeof i.config.chart.events.dataPointSelection=="function"&&i.config.chart.events.dataPointSelection(t,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:o,dataPointIndex:r,w:i}),t&&this.ctx.events.fireEvent("dataPointSelection",[t,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:o,dataPointIndex:r,w:i}])}},{key:"rotateAroundCenter",value:function(e){var t={};return e&&typeof e.getBBox=="function"&&(t=e.getBBox()),{x:t.x+t.width/2,y:t.y+t.height/2}}},{key:"getTextRects",value:function(e,t,i,n){var o=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],r=this.w,c=this.drawText({x:-200,y:-200,text:e,textAnchor:"start",fontSize:t,fontFamily:i,foreColor:"#fff",opacity:0});n&&c.attr("transform",n),r.globals.dom.Paper.add(c);var h=c.bbox();return o||(h=c.node.getBoundingClientRect()),c.remove(),{width:h.width,height:h.height}}},{key:"placeTextWithEllipsis",value:function(e,t,i){if(typeof e.getComputedTextLength=="function"&&(e.textContent=t,t.length>0&&e.getComputedTextLength()>=i/1.1)){for(var n=t.length-3;n>0;n-=3)if(e.getSubStringLength(0,n)<=i/1.1)return void(e.textContent=t.substring(0,n)+"...");e.textContent="."}}}],[{key:"setAttrs",value:function(e,t){for(var i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i])}}]),E}(),he=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w}return y(E,[{key:"getStackedSeriesTotals",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=this.w,i=[];if(t.globals.series.length===0)return i;for(var n=0;n<t.globals.series[t.globals.maxValsInArrayIndex].length;n++){for(var o=0,r=0;r<t.globals.series.length;r++)t.globals.series[r][n]!==void 0&&e.indexOf(r)===-1&&(o+=t.globals.series[r][n]);i.push(o)}return i}},{key:"getSeriesTotalByIndex",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return e===null?this.w.config.series.reduce(function(t,i){return t+i},0):this.w.globals.series[e].reduce(function(t,i){return t+i},0)}},{key:"getStackedSeriesTotalsByGroups",value:function(){var e=this,t=this.w,i=[];return t.globals.seriesGroups.forEach(function(n){var o=[];t.config.series.forEach(function(c,h){n.indexOf(t.globals.seriesNames[h])>-1&&o.push(h)});var r=t.globals.series.map(function(c,h){return o.indexOf(h)===-1?h:-1}).filter(function(c){return c!==-1});i.push(e.getStackedSeriesTotals(r))}),i}},{key:"setSeriesYAxisMappings",value:function(){var e=this.w.globals,t=this.w.config,i=[],n=[],o=[],r=e.series.length>t.yaxis.length||t.yaxis.some(function(g){return Array.isArray(g.seriesName)});t.series.forEach(function(g,x){o.push(x),n.push(null)}),t.yaxis.forEach(function(g,x){i[x]=[]});var c=[];t.yaxis.forEach(function(g,x){var v=!1;if(g.seriesName){var k=[];Array.isArray(g.seriesName)?k=g.seriesName:k.push(g.seriesName),k.forEach(function(A){t.series.forEach(function(S,M){if(S.name===A){var L=M;x===M||r?!r||o.indexOf(M)>-1?i[x].push([x,M]):console.warn("Series '"+S.name+"' referenced more than once in what looks like the new style. That is, when using either seriesName: [], or when there are more series than yaxes."):(i[M].push([M,x]),L=x),v=!0,(L=o.indexOf(L))!==-1&&o.splice(L,1)}})})}v||c.push(x)}),i=i.map(function(g,x){var v=[];return g.forEach(function(k){n[k[1]]=k[0],v.push(k[1])}),v});for(var h=t.yaxis.length-1,u=0;u<c.length&&(h=c[u],i[h]=[],o);u++){var p=o[0];o.shift(),i[h].push(p),n[p]=h}o.forEach(function(g){i[h].push(g),n[g]=h}),e.seriesYAxisMap=i.map(function(g){return g}),e.seriesYAxisReverseMap=n.map(function(g){return g}),e.seriesYAxisMap.forEach(function(g,x){g.forEach(function(v){t.series[v]&&t.series[v].group===void 0&&(t.series[v].group="apexcharts-axis-".concat(x.toString()))})})}},{key:"isSeriesNull",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return(e===null?this.w.config.series.filter(function(t){return t!==null}):this.w.config.series[e].data.filter(function(t){return t!==null})).length===0}},{key:"seriesHaveSameValues",value:function(e){return this.w.globals.series[e].every(function(t,i,n){return t===n[0]})}},{key:"getCategoryLabels",value:function(e){var t=this.w,i=e.slice();return t.config.xaxis.convertedCatToNumeric&&(i=e.map(function(n,o){return t.config.xaxis.labels.formatter(n-t.globals.minX+1)})),i}},{key:"getLargestSeries",value:function(){var e=this.w;e.globals.maxValsInArrayIndex=e.globals.series.map(function(t){return t.length}).indexOf(Math.max.apply(Math,e.globals.series.map(function(t){return t.length})))}},{key:"getLargestMarkerSize",value:function(){var e=this.w,t=0;return e.globals.markers.size.forEach(function(i){t=Math.max(t,i)}),e.config.markers.discrete&&e.config.markers.discrete.length&&e.config.markers.discrete.forEach(function(i){t=Math.max(t,i.size)}),t>0&&(e.config.markers.hover.size>0?t=e.config.markers.hover.size:t+=e.config.markers.hover.sizeOffset),e.globals.markers.largestSize=t,t}},{key:"getSeriesTotals",value:function(){var e=this.w;e.globals.seriesTotals=e.globals.series.map(function(t,i){var n=0;if(Array.isArray(t))for(var o=0;o<t.length;o++)n+=t[o];else n+=t;return n})}},{key:"getSeriesTotalsXRange",value:function(e,t){var i=this.w;return i.globals.series.map(function(n,o){for(var r=0,c=0;c<n.length;c++)i.globals.seriesX[o][c]>e&&i.globals.seriesX[o][c]<t&&(r+=n[c]);return r})}},{key:"getPercentSeries",value:function(){var e=this.w;e.globals.seriesPercent=e.globals.series.map(function(t,i){var n=[];if(Array.isArray(t))for(var o=0;o<t.length;o++){var r=e.globals.stackedSeriesTotals[o],c=0;r&&(c=100*t[o]/r),n.push(c)}else{var h=100*t/e.globals.seriesTotals.reduce(function(u,p){return u+p},0);n.push(h)}return n})}},{key:"getCalculatedRatios",value:function(){var e,t,i,n=this,o=this.w,r=o.globals,c=[],h=0,u=[],p=.1,g=0;if(r.yRange=[],r.isMultipleYAxis)for(var x=0;x<r.minYArr.length;x++)r.yRange.push(Math.abs(r.minYArr[x]-r.maxYArr[x])),u.push(0);else r.yRange.push(Math.abs(r.minY-r.maxY));r.xRange=Math.abs(r.maxX-r.minX),r.zRange=Math.abs(r.maxZ-r.minZ);for(var v=0;v<r.yRange.length;v++)c.push(r.yRange[v]/r.gridHeight);if(t=r.xRange/r.gridWidth,e=r.yRange/r.gridWidth,i=r.xRange/r.gridHeight,(h=r.zRange/r.gridHeight*16)||(h=1),r.minY!==Number.MIN_VALUE&&Math.abs(r.minY)!==0&&(r.hasNegs=!0),o.globals.seriesYAxisReverseMap.length>0){var k=function(S,M){var L=o.config.yaxis[o.globals.seriesYAxisReverseMap[M]],d=S<0?-1:1;return S=Math.abs(S),L.logarithmic&&(S=n.getBaseLog(L.logBase,S)),-d*S/c[M]};if(r.isMultipleYAxis){u=[];for(var A=0;A<c.length;A++)u.push(k(r.minYArr[A],A))}else(u=[]).push(k(r.minY,0)),r.minY!==Number.MIN_VALUE&&Math.abs(r.minY)!==0&&(p=-r.minY/e,g=r.minX/t)}else(u=[]).push(0),p=0,g=0;return{yRatio:c,invertedYRatio:e,zRatio:h,xRatio:t,invertedXRatio:i,baseLineInvertedY:p,baseLineY:u,baseLineX:g}}},{key:"getLogSeries",value:function(e){var t=this,i=this.w;return i.globals.seriesLog=e.map(function(n,o){var r=i.globals.seriesYAxisReverseMap[o];return i.config.yaxis[r]&&i.config.yaxis[r].logarithmic?n.map(function(c){return c===null?null:t.getLogVal(i.config.yaxis[r].logBase,c,o)}):n}),i.globals.invalidLogScale?e:i.globals.seriesLog}},{key:"getBaseLog",value:function(e,t){return Math.log(t)/Math.log(e)}},{key:"getLogVal",value:function(e,t,i){if(t<=0)return 0;var n=this.w,o=n.globals.minYArr[i]===0?-1:this.getBaseLog(e,n.globals.minYArr[i]),r=(n.globals.maxYArr[i]===0?0:this.getBaseLog(e,n.globals.maxYArr[i]))-o;return t<1?t/r:(this.getBaseLog(e,t)-o)/r}},{key:"getLogYRatios",value:function(e){var t=this,i=this.w,n=this.w.globals;return n.yLogRatio=e.slice(),n.logYRange=n.yRange.map(function(o,r){var c=i.globals.seriesYAxisReverseMap[r];if(i.config.yaxis[c]&&t.w.config.yaxis[c].logarithmic){var h,u=-Number.MAX_VALUE,p=Number.MIN_VALUE;return n.seriesLog.forEach(function(g,x){g.forEach(function(v){i.config.yaxis[x]&&i.config.yaxis[x].logarithmic&&(u=Math.max(v,u),p=Math.min(v,p))})}),h=Math.pow(n.yRange[r],Math.abs(p-u)/n.yRange[r]),n.yLogRatio[r]=h/n.gridHeight,h}}),n.invalidLogScale?e.slice():n.yLogRatio}},{key:"drawSeriesByGroup",value:function(e,t,i,n){var o=this.w,r=[];return e.series.length>0&&t.forEach(function(c){var h=[],u=[];e.i.forEach(function(p,g){o.config.series[p].group===c&&(h.push(e.series[g]),u.push(p))}),h.length>0&&r.push(n.draw(h,i,u))}),r}}],[{key:"checkComboSeries",value:function(e,t){var i=!1,n=0,o=0;return t===void 0&&(t="line"),e.length&&e[0].type!==void 0&&e.forEach(function(r){r.type!=="bar"&&r.type!=="column"&&r.type!=="candlestick"&&r.type!=="boxPlot"||n++,r.type!==void 0&&r.type!==t&&o++}),o>0&&(i=!0),{comboBarCount:n,comboCharts:i}}},{key:"extendArrayProps",value:function(e,t,i){var n,o,r,c,h,u;return(n=t)!==null&&n!==void 0&&n.yaxis&&(t=e.extendYAxis(t,i)),(o=t)!==null&&o!==void 0&&o.annotations&&(t.annotations.yaxis&&(t=e.extendYAxisAnnotations(t)),(r=t)!==null&&r!==void 0&&(c=r.annotations)!==null&&c!==void 0&&c.xaxis&&(t=e.extendXAxisAnnotations(t)),(h=t)!==null&&h!==void 0&&(u=h.annotations)!==null&&u!==void 0&&u.points&&(t=e.extendPointAnnotations(t))),t}}]),E}(),Le=function(){function E(e){m(this,E),this.w=e.w,this.annoCtx=e}return y(E,[{key:"setOrientations",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=this.w;if(e.label.orientation==="vertical"){var n=t!==null?t:0,o=i.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(n,"']"));if(o!==null){var r=o.getBoundingClientRect();o.setAttribute("x",parseFloat(o.getAttribute("x"))-r.height+4);var c=e.label.position==="top"?r.width:-r.width;o.setAttribute("y",parseFloat(o.getAttribute("y"))+c);var h=this.annoCtx.graphics.rotateAroundCenter(o),u=h.x,p=h.y;o.setAttribute("transform","rotate(-90 ".concat(u," ").concat(p,")"))}}}},{key:"addBackgroundToAnno",value:function(e,t){var i=this.w;if(!e||!t.label.text||!String(t.label.text).trim())return null;var n=i.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),o=e.getBoundingClientRect(),r=t.label.style.padding,c=r.left,h=r.right,u=r.top,p=r.bottom;if(t.label.orientation==="vertical"){var g=[c,h,u,p];u=g[0],p=g[1],c=g[2],h=g[3]}var x=o.left-n.left-c,v=o.top-n.top-u,k=this.annoCtx.graphics.drawRect(x-i.globals.barPadForNumericAxis,v,o.width+c+h,o.height+u+p,t.label.borderRadius,t.label.style.background,1,t.label.borderWidth,t.label.borderColor,0);return t.id&&k.node.classList.add(t.id),k}},{key:"annotationsBackground",value:function(){var e=this,t=this.w,i=function(n,o,r){var c=t.globals.dom.baseEl.querySelector(".apexcharts-".concat(r,"-annotations .apexcharts-").concat(r,"-annotation-label[rel='").concat(o,"']"));if(c){var h=c.parentNode,u=e.addBackgroundToAnno(c,n);u&&(h.insertBefore(u.node,c),n.label.mouseEnter&&u.node.addEventListener("mouseenter",n.label.mouseEnter.bind(e,n)),n.label.mouseLeave&&u.node.addEventListener("mouseleave",n.label.mouseLeave.bind(e,n)),n.label.click&&u.node.addEventListener("click",n.label.click.bind(e,n)))}};t.config.annotations.xaxis.forEach(function(n,o){return i(n,o,"xaxis")}),t.config.annotations.yaxis.forEach(function(n,o){return i(n,o,"yaxis")}),t.config.annotations.points.forEach(function(n,o){return i(n,o,"point")})}},{key:"getY1Y2",value:function(e,t){var i,n=this.w,o=e==="y1"?t.y:t.y2,r=!1;if(this.annoCtx.invertAxis){var c=n.config.xaxis.convertedCatToNumeric?n.globals.categoryLabels:n.globals.labels,h=c.indexOf(o),u=n.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child(".concat(h+1,")"));i=u?parseFloat(u.getAttribute("y")):(n.globals.gridHeight/c.length-1)*(h+1)-n.globals.barHeight,t.seriesIndex!==void 0&&n.globals.barHeight&&(i-=n.globals.barHeight/2*(n.globals.series.length-1)-n.globals.barHeight*t.seriesIndex)}else{var p,g=n.globals.seriesYAxisMap[t.yAxisIndex][0],x=n.config.yaxis[t.yAxisIndex].logarithmic?new he(this.annoCtx.ctx).getLogVal(n.config.yaxis[t.yAxisIndex].logBase,o,g)/n.globals.yLogRatio[g]:(o-n.globals.minYArr[g])/(n.globals.yRange[g]/n.globals.gridHeight);i=n.globals.gridHeight-Math.min(Math.max(x,0),n.globals.gridHeight),r=x>n.globals.gridHeight||x<0,!t.marker||t.y!==void 0&&t.y!==null||(i=0),(p=n.config.yaxis[t.yAxisIndex])!==null&&p!==void 0&&p.reversed&&(i=x)}return typeof o=="string"&&o.includes("px")&&(i=parseFloat(o)),{yP:i,clipped:r}}},{key:"getX1X2",value:function(e,t){var i=this.w,n=e==="x1"?t.x:t.x2,o=this.annoCtx.invertAxis?i.globals.minY:i.globals.minX,r=this.annoCtx.invertAxis?i.globals.maxY:i.globals.maxX,c=this.annoCtx.invertAxis?i.globals.yRange[0]:i.globals.xRange,h=!1,u=this.annoCtx.inversedReversedAxis?(r-n)/(c/i.globals.gridWidth):(n-o)/(c/i.globals.gridWidth);return i.config.xaxis.type!=="category"&&!i.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||i.globals.dataFormatXNumeric||i.config.chart.sparkline.enabled||(u=this.getStringX(n)),typeof n=="string"&&n.includes("px")&&(u=parseFloat(n)),n==null&&t.marker&&(u=i.globals.gridWidth),t.seriesIndex!==void 0&&i.globals.barWidth&&!this.annoCtx.invertAxis&&(u-=i.globals.barWidth/2*(i.globals.series.length-1)-i.globals.barWidth*t.seriesIndex),u>i.globals.gridWidth?(u=i.globals.gridWidth,h=!0):u<0&&(u=0,h=!0),{x:u,clipped:h}}},{key:"getStringX",value:function(e){var t=this.w,i=e;t.config.xaxis.convertedCatToNumeric&&t.globals.categoryLabels.length&&(e=t.globals.categoryLabels.indexOf(e)+1);var n=t.globals.labels.map(function(r){return Array.isArray(r)?r.join(" "):r}).indexOf(e),o=t.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child(".concat(n+1,")"));return o&&(i=parseFloat(o.getAttribute("x"))),i}}]),E}(),Ce=function(){function E(e){m(this,E),this.w=e.w,this.annoCtx=e,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new Le(this.annoCtx)}return y(E,[{key:"addXaxisAnnotation",value:function(e,t,i){var n,o=this.w,r=this.helpers.getX1X2("x1",e),c=r.x,h=r.clipped,u=!0,p=e.label.text,g=e.strokeDashArray;if(H.isNumber(c)){if(e.x2===null||e.x2===void 0){if(!h){var x=this.annoCtx.graphics.drawLine(c+e.offsetX,0+e.offsetY,c+e.offsetX,o.globals.gridHeight+e.offsetY,e.borderColor,g,e.borderWidth);t.appendChild(x.node),e.id&&x.node.classList.add(e.id)}}else{var v=this.helpers.getX1X2("x2",e);if(n=v.x,u=v.clipped,!h||!u){if(n<c){var k=c;c=n,n=k}var A=this.annoCtx.graphics.drawRect(c+e.offsetX,0+e.offsetY,n-c,o.globals.gridHeight+e.offsetY,0,e.fillColor,e.opacity,1,e.borderColor,g);A.node.classList.add("apexcharts-annotation-rect"),A.attr("clip-path","url(#gridRectMask".concat(o.globals.cuid,")")),t.appendChild(A.node),e.id&&A.node.classList.add(e.id)}}if(!h||!u){var S=this.annoCtx.graphics.getTextRects(p,parseFloat(e.label.style.fontSize)),M=e.label.position==="top"?4:e.label.position==="center"?o.globals.gridHeight/2+(e.label.orientation==="vertical"?S.width/2:0):o.globals.gridHeight,L=this.annoCtx.graphics.drawText({x:c+e.label.offsetX,y:M+e.label.offsetY-(e.label.orientation==="vertical"?e.label.position==="top"?S.width/2-12:-S.width/2:0),text:p,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});L.attr({rel:i}),t.appendChild(L.node),this.annoCtx.helpers.setOrientations(e,i)}}}},{key:"drawXAxisAnnotations",value:function(){var e=this,t=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return t.config.annotations.xaxis.map(function(n,o){e.addXaxisAnnotation(n,i.node,o)}),i}}]),E}(),_e=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return y(E,[{key:"isValidDate",value:function(e){return typeof e!="number"&&!isNaN(this.parseDate(e))}},{key:"getTimeStamp",value:function(e){return Date.parse(e)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toISOString().substr(0,25)).getTime():new Date(e).getTime():e}},{key:"getDate",value:function(e){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toUTCString()):new Date(e)}},{key:"parseDate",value:function(e){var t=Date.parse(e);if(!isNaN(t))return this.getTimeStamp(e);var i=Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "));return i=this.getTimeStamp(i)}},{key:"parseDateWithTimezone",value:function(e){return Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(e,t){var i=this.w.globals.locale,n=this.w.config.xaxis.labels.datetimeUTC,o=["\0"].concat(ie(i.months)),r=[""].concat(ie(i.shortMonths)),c=[""].concat(ie(i.days)),h=[""].concat(ie(i.shortDays));function u(_,N){var Y=_+"";for(N=N||2;Y.length<N;)Y="0"+Y;return Y}var p=n?e.getUTCFullYear():e.getFullYear();t=(t=(t=t.replace(/(^|[^\\])yyyy+/g,"$1"+p)).replace(/(^|[^\\])yy/g,"$1"+p.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+p);var g=(n?e.getUTCMonth():e.getMonth())+1;t=(t=(t=(t=t.replace(/(^|[^\\])MMMM+/g,"$1"+o[0])).replace(/(^|[^\\])MMM/g,"$1"+r[0])).replace(/(^|[^\\])MM/g,"$1"+u(g))).replace(/(^|[^\\])M/g,"$1"+g);var x=n?e.getUTCDate():e.getDate();t=(t=(t=(t=t.replace(/(^|[^\\])dddd+/g,"$1"+c[0])).replace(/(^|[^\\])ddd/g,"$1"+h[0])).replace(/(^|[^\\])dd/g,"$1"+u(x))).replace(/(^|[^\\])d/g,"$1"+x);var v=n?e.getUTCHours():e.getHours(),k=v>12?v-12:v===0?12:v;t=(t=(t=(t=t.replace(/(^|[^\\])HH+/g,"$1"+u(v))).replace(/(^|[^\\])H/g,"$1"+v)).replace(/(^|[^\\])hh+/g,"$1"+u(k))).replace(/(^|[^\\])h/g,"$1"+k);var A=n?e.getUTCMinutes():e.getMinutes();t=(t=t.replace(/(^|[^\\])mm+/g,"$1"+u(A))).replace(/(^|[^\\])m/g,"$1"+A);var S=n?e.getUTCSeconds():e.getSeconds();t=(t=t.replace(/(^|[^\\])ss+/g,"$1"+u(S))).replace(/(^|[^\\])s/g,"$1"+S);var M=n?e.getUTCMilliseconds():e.getMilliseconds();t=t.replace(/(^|[^\\])fff+/g,"$1"+u(M,3)),M=Math.round(M/10),t=t.replace(/(^|[^\\])ff/g,"$1"+u(M)),M=Math.round(M/10);var L=v<12?"AM":"PM";t=(t=(t=t.replace(/(^|[^\\])f/g,"$1"+M)).replace(/(^|[^\\])TT+/g,"$1"+L)).replace(/(^|[^\\])T/g,"$1"+L.charAt(0));var d=L.toLowerCase();t=(t=t.replace(/(^|[^\\])tt+/g,"$1"+d)).replace(/(^|[^\\])t/g,"$1"+d.charAt(0));var b=-e.getTimezoneOffset(),C=n||!b?"Z":b>0?"+":"-";if(!n){var I=(b=Math.abs(b))%60;C+=u(Math.floor(b/60))+":"+u(I)}t=t.replace(/(^|[^\\])K/g,"$1"+C);var P=(n?e.getUTCDay():e.getDay())+1;return t=(t=(t=(t=(t=t.replace(new RegExp(c[0],"g"),c[P])).replace(new RegExp(h[0],"g"),h[P])).replace(new RegExp(o[0],"g"),o[g])).replace(new RegExp(r[0],"g"),r[g])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(e,t,i){var n=this.w;n.config.xaxis.min!==void 0&&(e=n.config.xaxis.min),n.config.xaxis.max!==void 0&&(t=n.config.xaxis.max);var o=this.getDate(e),r=this.getDate(t),c=this.formatDate(o,"yyyy MM dd HH mm ss fff").split(" "),h=this.formatDate(r,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(c[6],10),maxMillisecond:parseInt(h[6],10),minSecond:parseInt(c[5],10),maxSecond:parseInt(h[5],10),minMinute:parseInt(c[4],10),maxMinute:parseInt(h[4],10),minHour:parseInt(c[3],10),maxHour:parseInt(h[3],10),minDate:parseInt(c[2],10),maxDate:parseInt(h[2],10),minMonth:parseInt(c[1],10)-1,maxMonth:parseInt(h[1],10)-1,minYear:parseInt(c[0],10),maxYear:parseInt(h[0],10)}}},{key:"isLeapYear",value:function(e){return e%4==0&&e%100!=0||e%400==0}},{key:"calculcateLastDaysOfMonth",value:function(e,t,i){return this.determineDaysOfMonths(e,t)-i}},{key:"determineDaysOfYear",value:function(e){var t=365;return this.isLeapYear(e)&&(t=366),t}},{key:"determineRemainingDaysOfYear",value:function(e,t,i){var n=this.daysCntOfYear[t]+i;return t>1&&this.isLeapYear()&&n++,n}},{key:"determineDaysOfMonths",value:function(e,t){var i=30;switch(e=H.monthMod(e),!0){case this.months30.indexOf(e)>-1:e===2&&(i=this.isLeapYear(t)?29:28);break;case this.months31.indexOf(e)>-1:default:i=31}return i}}]),E}(),We=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w,this.tooltipKeyFormat="dd MMM"}return y(E,[{key:"xLabelFormat",value:function(e,t,i,n){var o=this.w;if(o.config.xaxis.type==="datetime"&&o.config.xaxis.labels.formatter===void 0&&o.config.tooltip.x.formatter===void 0){var r=new _e(this.ctx);return r.formatDate(r.getDate(t),o.config.tooltip.x.format)}return e(t,i,n)}},{key:"defaultGeneralFormatter",value:function(e){return Array.isArray(e)?e.map(function(t){return t}):e}},{key:"defaultYFormatter",value:function(e,t,i){var n=this.w;if(H.isNumber(e))if(n.globals.yValueDecimal!==0)e=e.toFixed(t.decimalsInFloat!==void 0?t.decimalsInFloat:n.globals.yValueDecimal);else{var o=e.toFixed(0);e=e==o?o:e.toFixed(1)}return e}},{key:"setLabelFormatters",value:function(){var e=this,t=this.w;return t.globals.xaxisTooltipFormatter=function(i){return e.defaultGeneralFormatter(i)},t.globals.ttKeyFormatter=function(i){return e.defaultGeneralFormatter(i)},t.globals.ttZFormatter=function(i){return i},t.globals.legendFormatter=function(i){return e.defaultGeneralFormatter(i)},t.config.xaxis.labels.formatter!==void 0?t.globals.xLabelFormatter=t.config.xaxis.labels.formatter:t.globals.xLabelFormatter=function(i){if(H.isNumber(i)){if(!t.config.xaxis.convertedCatToNumeric&&t.config.xaxis.type==="numeric"){if(H.isNumber(t.config.xaxis.decimalsInFloat))return i.toFixed(t.config.xaxis.decimalsInFloat);var n=t.globals.maxX-t.globals.minX;return n>0&&n<100?i.toFixed(1):i.toFixed(0)}return t.globals.isBarHorizontal&&t.globals.maxY-t.globals.minYArr<4?i.toFixed(1):i.toFixed(0)}return i},typeof t.config.tooltip.x.formatter=="function"?t.globals.ttKeyFormatter=t.config.tooltip.x.formatter:t.globals.ttKeyFormatter=t.globals.xLabelFormatter,typeof t.config.xaxis.tooltip.formatter=="function"&&(t.globals.xaxisTooltipFormatter=t.config.xaxis.tooltip.formatter),(Array.isArray(t.config.tooltip.y)||t.config.tooltip.y.formatter!==void 0)&&(t.globals.ttVal=t.config.tooltip.y),t.config.tooltip.z.formatter!==void 0&&(t.globals.ttZFormatter=t.config.tooltip.z.formatter),t.config.legend.formatter!==void 0&&(t.globals.legendFormatter=t.config.legend.formatter),t.config.yaxis.forEach(function(i,n){i.labels.formatter!==void 0?t.globals.yLabelFormatters[n]=i.labels.formatter:t.globals.yLabelFormatters[n]=function(o){return t.globals.xyCharts?Array.isArray(o)?o.map(function(r){return e.defaultYFormatter(r,i,n)}):e.defaultYFormatter(o,i,n):o}}),t.globals}},{key:"heatmapLabelFormatters",value:function(){var e=this.w;if(e.config.chart.type==="heatmap"){e.globals.yAxisScale[0].result=e.globals.seriesNames.slice();var t=e.globals.seriesNames.reduce(function(i,n){return i.length>n.length?i:n},0);e.globals.yAxisScale[0].niceMax=t,e.globals.yAxisScale[0].niceMin=t}}}]),E}(),dt=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w}return y(E,[{key:"getLabel",value:function(e,t,i,n){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"12px",c=!(arguments.length>6&&arguments[6]!==void 0)||arguments[6],h=this.w,u=e[n]===void 0?"":e[n],p=u,g=h.globals.xLabelFormatter,x=h.config.xaxis.labels.formatter,v=!1,k=new We(this.ctx),A=u;c&&(p=k.xLabelFormat(g,u,A,{i:n,dateFormatter:new _e(this.ctx).formatDate,w:h}),x!==void 0&&(p=x(u,e[n],{i:n,dateFormatter:new _e(this.ctx).formatDate,w:h})));var S,M;t.length>0?(S=t[n].unit,M=null,t.forEach(function(C){C.unit==="month"?M="year":C.unit==="day"?M="month":C.unit==="hour"?M="day":C.unit==="minute"&&(M="hour")}),v=M===S,i=t[n].position,p=t[n].value):h.config.xaxis.type==="datetime"&&x===void 0&&(p=""),p===void 0&&(p=""),p=Array.isArray(p)?p:p.toString();var L=new V(this.ctx),d={};d=h.globals.rotateXLabels&&c?L.getTextRects(p,parseInt(r,10),null,"rotate(".concat(h.config.xaxis.labels.rotate," 0 0)"),!1):L.getTextRects(p,parseInt(r,10));var b=!h.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(p)&&(String(p)==="NaN"||o.indexOf(p)>=0&&b)&&(p=""),{x:i,text:p,textRect:d,isBold:v}}},{key:"checkLabelBasedOnTickamount",value:function(e,t,i){var n=this.w,o=n.config.xaxis.tickAmount;return o==="dataPoints"&&(o=Math.round(n.globals.gridWidth/120)),o>i||e%Math.round(i/(o+1))==0||(t.text=""),t}},{key:"checkForOverflowingLabels",value:function(e,t,i,n,o){var r=this.w;if(e===0&&r.globals.skipFirstTimelinelabel&&(t.text=""),e===i-1&&r.globals.skipLastTimelinelabel&&(t.text=""),r.config.xaxis.labels.hideOverlappingLabels&&n.length>0){var c=o[o.length-1];t.x<c.textRect.width/(r.globals.rotateXLabels?Math.abs(r.config.xaxis.labels.rotate)/12:1.01)+c.x&&(t.text="")}return t}},{key:"checkForReversedLabels",value:function(e,t){var i=this.w;return i.config.yaxis[e]&&i.config.yaxis[e].reversed&&t.reverse(),t}},{key:"yAxisAllSeriesCollapsed",value:function(e){var t=this.w.globals;return!t.seriesYAxisMap[e].some(function(i){return t.collapsedSeriesIndices.indexOf(i)===-1})}},{key:"translateYAxisIndex",value:function(e){var t=this.w,i=t.globals,n=t.config.yaxis;return i.series.length>n.length||n.some(function(o){return Array.isArray(o.seriesName)})?e:i.seriesYAxisReverseMap[e]}},{key:"isYAxisHidden",value:function(e){var t=this.w,i=t.config.yaxis[e];if(!i.show||this.yAxisAllSeriesCollapsed(e))return!0;if(!i.showForNullSeries){var n=t.globals.seriesYAxisMap[e],o=new he(this.ctx);return n.every(function(r){return o.isSeriesNull(r)})}return!1}},{key:"getYAxisForeColor",value:function(e,t){var i=this.w;return Array.isArray(e)&&i.globals.yAxisScale[t]&&this.ctx.theme.pushExtraColors(e,i.globals.yAxisScale[t].result.length,!1),e}},{key:"drawYAxisTicks",value:function(e,t,i,n,o,r,c){var h=this.w,u=new V(this.ctx),p=h.globals.translateY+h.config.yaxis[o].labels.offsetY;if(h.globals.isBarHorizontal?p=0:h.config.chart.type==="heatmap"&&(p+=r/2),n.show&&t>0){h.config.yaxis[o].opposite===!0&&(e+=n.width);for(var g=t;g>=0;g--){var x=u.drawLine(e+i.offsetX-n.width+n.offsetX,p+n.offsetY,e+i.offsetX+n.offsetX,p+n.offsetY,n.color);c.add(x),p+=r}}}}]),E}(),si=function(){function E(e){m(this,E),this.w=e.w,this.annoCtx=e,this.helpers=new Le(this.annoCtx),this.axesUtils=new dt(this.annoCtx)}return y(E,[{key:"addYaxisAnnotation",value:function(e,t,i){var n,o=this.w,r=e.strokeDashArray,c=this.helpers.getY1Y2("y1",e),h=c.yP,u=c.clipped,p=!0,g=!1,x=e.label.text;if(e.y2===null||e.y2===void 0){if(!u){g=!0;var v=this.annoCtx.graphics.drawLine(0+e.offsetX,h+e.offsetY,this._getYAxisAnnotationWidth(e),h+e.offsetY,e.borderColor,r,e.borderWidth);t.appendChild(v.node),e.id&&v.node.classList.add(e.id)}}else{if(n=(c=this.helpers.getY1Y2("y2",e)).yP,p=c.clipped,n>h){var k=h;h=n,n=k}if(!u||!p){g=!0;var A=this.annoCtx.graphics.drawRect(0+e.offsetX,n+e.offsetY,this._getYAxisAnnotationWidth(e),h-n,0,e.fillColor,e.opacity,1,e.borderColor,r);A.node.classList.add("apexcharts-annotation-rect"),A.attr("clip-path","url(#gridRectMask".concat(o.globals.cuid,")")),t.appendChild(A.node),e.id&&A.node.classList.add(e.id)}}if(g){var S=e.label.position==="right"?o.globals.gridWidth:e.label.position==="center"?o.globals.gridWidth/2:0,M=this.annoCtx.graphics.drawText({x:S+e.label.offsetX,y:(n??h)+e.label.offsetY-3,text:x,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});M.attr({rel:i}),t.appendChild(M.node)}}},{key:"_getYAxisAnnotationWidth",value:function(e){var t=this.w;return t.globals.gridWidth,(e.width.indexOf("%")>-1?t.globals.gridWidth*parseInt(e.width,10)/100:parseInt(e.width,10))+e.offsetX}},{key:"drawYAxisAnnotations",value:function(){var e=this,t=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return t.config.annotations.yaxis.forEach(function(n,o){n.yAxisIndex=e.axesUtils.translateYAxisIndex(n.yAxisIndex),e.axesUtils.isYAxisHidden(n.yAxisIndex)&&e.axesUtils.yAxisAllSeriesCollapsed(n.yAxisIndex)||e.addYaxisAnnotation(n,i.node,o)}),i}}]),E}(),tn=function(){function E(e){m(this,E),this.w=e.w,this.annoCtx=e,this.helpers=new Le(this.annoCtx)}return y(E,[{key:"addPointAnnotation",value:function(e,t,i){if(!(this.w.globals.collapsedSeriesIndices.indexOf(e.seriesIndex)>-1)){var n=this.helpers.getX1X2("x1",e),o=n.x,r=n.clipped,c=(n=this.helpers.getY1Y2("y1",e)).yP,h=n.clipped;if(H.isNumber(o)&&!h&&!r){var u={pSize:e.marker.size,pointStrokeWidth:e.marker.strokeWidth,pointFillColor:e.marker.fillColor,pointStrokeColor:e.marker.strokeColor,shape:e.marker.shape,pRadius:e.marker.radius,class:"apexcharts-point-annotation-marker ".concat(e.marker.cssClass," ").concat(e.id?e.id:"")},p=this.annoCtx.graphics.drawMarker(o+e.marker.offsetX,c+e.marker.offsetY,u);t.appendChild(p.node);var g=e.label.text?e.label.text:"",x=this.annoCtx.graphics.drawText({x:o+e.label.offsetX,y:c+e.label.offsetY-e.marker.size-parseFloat(e.label.style.fontSize)/1.6,text:g,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});if(x.attr({rel:i}),t.appendChild(x.node),e.customSVG.SVG){var v=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+e.customSVG.cssClass});v.attr({transform:"translate(".concat(o+e.customSVG.offsetX,", ").concat(c+e.customSVG.offsetY,")")}),v.node.innerHTML=e.customSVG.SVG,t.appendChild(v.node)}if(e.image.path){var k=e.image.width?e.image.width:20,A=e.image.height?e.image.height:20;p=this.annoCtx.addImage({x:o+e.image.offsetX-k/2,y:c+e.image.offsetY-A/2,width:k,height:A,path:e.image.path,appendTo:".apexcharts-point-annotations"})}e.mouseEnter&&p.node.addEventListener("mouseenter",e.mouseEnter.bind(this,e)),e.mouseLeave&&p.node.addEventListener("mouseleave",e.mouseLeave.bind(this,e)),e.click&&p.node.addEventListener("click",e.click.bind(this,e))}}}},{key:"drawPointAnnotations",value:function(){var e=this,t=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return t.config.annotations.points.map(function(n,o){e.addPointAnnotation(n,i.node,o)}),i}}]),E}(),ta={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},At=function(){function E(){m(this,E),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,stepSize:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,showDuplicates:!1,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:void 0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return y(E,[{key:"init",value:function(){return{annotations:{yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"",locales:[ta],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,nonce:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0,targets:void 0},stacked:!1,stackOnlyBar:!0,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",categoryFormatter:void 0,valueFormatter:void 0},png:{filename:void 0},svg:{filename:void 0},scale:void 0,width:void 0},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,allowMouseWheelZoom:!0,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{line:{isSlopeChart:!1},area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,hideZeroBarsWhenGrouped:!1,isDumbbell:!1,dumbbellColors:void 0,isFunnel:!1,isFunnel3d:!0,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,borderRadius:4,dataLabels:{format:"scale"},colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(e){return e}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(e){return e+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce(function(t,i){return t+i},0)/e.globals.series.length+"%"}}},barLabels:{enabled:!1,offsetX:0,offsetY:0,useSeriesColors:!0,fontFamily:void 0,fontWeight:600,fontSize:"16px",formatter:function(e){return e},onClick:void 0}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(e){return e}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(e){return e}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce(function(t,i){return t+i},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(e){return e!==null?e:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{size:7,fillColors:void 0,strokeWidth:1,shape:void 0,offsetX:0,offsetY:0,customHTML:void 0,onClick:void 0},itemMargin:{horizontal:5,vertical:4},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",offsetX:0,offsetY:0,showNullDataPoints:!0,onClick:void 0,onDblClick:void 0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,hideEmptySeries:!1,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(e){return e?e+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},stepSize:void 0,tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),E}(),ia=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w,this.graphics=new V(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new Le(this),this.xAxisAnnotations=new Ce(this),this.yAxisAnnotations=new si(this),this.pointsAnnotations=new tn(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return y(E,[{key:"drawAxesAnnotations",value:function(){var e=this.w;if(e.globals.axisCharts&&e.globals.dataPoints){for(var t=this.yAxisAnnotations.drawYAxisAnnotations(),i=this.xAxisAnnotations.drawXAxisAnnotations(),n=this.pointsAnnotations.drawPointAnnotations(),o=e.config.chart.animations.enabled,r=[t,i,n],c=[i.node,t.node,n.node],h=0;h<3;h++)e.globals.dom.elGraphical.add(r[h]),!o||e.globals.resized||e.globals.dataChanged||e.config.chart.type!=="scatter"&&e.config.chart.type!=="bubble"&&e.globals.dataPoints>1&&c[h].classList.add("apexcharts-element-hidden"),e.globals.delayedElements.push({el:c[h],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var e=this;this.w.config.annotations.images.map(function(t,i){e.addImage(t,i)})}},{key:"drawTextAnnos",value:function(){var e=this;this.w.config.annotations.texts.map(function(t,i){e.addText(t,i)})}},{key:"addXaxisAnnotation",value:function(e,t,i){this.xAxisAnnotations.addXaxisAnnotation(e,t,i)}},{key:"addYaxisAnnotation",value:function(e,t,i){this.yAxisAnnotations.addYaxisAnnotation(e,t,i)}},{key:"addPointAnnotation",value:function(e,t,i){this.pointsAnnotations.addPointAnnotation(e,t,i)}},{key:"addText",value:function(e,t){var i=e.x,n=e.y,o=e.text,r=e.textAnchor,c=e.foreColor,h=e.fontSize,u=e.fontFamily,p=e.fontWeight,g=e.cssClass,x=e.backgroundColor,v=e.borderWidth,k=e.strokeDashArray,A=e.borderRadius,S=e.borderColor,M=e.appendTo,L=M===void 0?".apexcharts-svg":M,d=e.paddingLeft,b=d===void 0?4:d,C=e.paddingRight,I=C===void 0?4:C,P=e.paddingBottom,_=P===void 0?2:P,N=e.paddingTop,Y=N===void 0?2:N,G=this.w,J=this.graphics.drawText({x:i,y:n,text:o,textAnchor:r||"start",fontSize:h||"12px",fontWeight:p||"regular",fontFamily:u||G.config.chart.fontFamily,foreColor:c||G.config.chart.foreColor,cssClass:g}),Z=G.globals.dom.baseEl.querySelector(L);Z&&Z.appendChild(J.node);var Q=J.bbox();if(o){var se=this.graphics.drawRect(Q.x-b,Q.y-Y,Q.width+b+I,Q.height+_+Y,A,x||"transparent",1,v,S,k);Z.insertBefore(se.node,J.node)}}},{key:"addImage",value:function(e,t){var i=this.w,n=e.path,o=e.x,r=o===void 0?0:o,c=e.y,h=c===void 0?0:c,u=e.width,p=u===void 0?20:u,g=e.height,x=g===void 0?20:g,v=e.appendTo,k=v===void 0?".apexcharts-svg":v,A=i.globals.dom.Paper.image(n);A.size(p,x).move(r,h);var S=i.globals.dom.baseEl.querySelector(k);return S&&S.appendChild(A.node),A}},{key:"addXaxisAnnotationExternal",value:function(e,t,i){return this.addAnnotationExternal({params:e,pushToMemory:t,context:i,type:"xaxis",contextMethod:i.addXaxisAnnotation}),i}},{key:"addYaxisAnnotationExternal",value:function(e,t,i){return this.addAnnotationExternal({params:e,pushToMemory:t,context:i,type:"yaxis",contextMethod:i.addYaxisAnnotation}),i}},{key:"addPointAnnotationExternal",value:function(e,t,i){return this.invertAxis===void 0&&(this.invertAxis=i.w.globals.isBarHorizontal),this.addAnnotationExternal({params:e,pushToMemory:t,context:i,type:"point",contextMethod:i.addPointAnnotation}),i}},{key:"addAnnotationExternal",value:function(e){var t=e.params,i=e.pushToMemory,n=e.context,o=e.type,r=e.contextMethod,c=n,h=c.w,u=h.globals.dom.baseEl.querySelector(".apexcharts-".concat(o,"-annotations")),p=u.childNodes.length+1,g=new At,x=Object.assign({},o==="xaxis"?g.xAxisAnnotation:o==="yaxis"?g.yAxisAnnotation:g.pointAnnotation),v=H.extend(x,t);switch(o){case"xaxis":this.addXaxisAnnotation(v,u,p);break;case"yaxis":this.addYaxisAnnotation(v,u,p);break;case"point":this.addPointAnnotation(v,u,p)}var k=h.globals.dom.baseEl.querySelector(".apexcharts-".concat(o,"-annotations .apexcharts-").concat(o,"-annotation-label[rel='").concat(p,"']")),A=this.helpers.addBackgroundToAnno(k,v);return A&&u.insertBefore(A.node,k),i&&h.globals.memory.methodsToExec.push({context:c,id:v.id?v.id:H.randomId(),method:r,label:"addAnnotation",params:t}),n}},{key:"clearAnnotations",value:function(e){for(var t=e.w,i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations"),n=t.globals.memory.methodsToExec.length-1;n>=0;n--)t.globals.memory.methodsToExec[n].label!=="addText"&&t.globals.memory.methodsToExec[n].label!=="addAnnotation"||t.globals.memory.methodsToExec.splice(n,1);i=H.listToArray(i),Array.prototype.forEach.call(i,function(o){for(;o.firstChild;)o.removeChild(o.firstChild)})}},{key:"removeAnnotation",value:function(e,t){var i=e.w,n=i.globals.dom.baseEl.querySelectorAll(".".concat(t));n&&(i.globals.memory.methodsToExec.map(function(o,r){o.id===t&&i.globals.memory.methodsToExec.splice(r,1)}),Array.prototype.forEach.call(n,function(o){o.parentElement.removeChild(o)}))}}]),E}(),Mi=function(E){var e,t=E.isTimeline,i=E.ctx,n=E.seriesIndex,o=E.dataPointIndex,r=E.y1,c=E.y2,h=E.w,u=h.globals.seriesRangeStart[n][o],p=h.globals.seriesRangeEnd[n][o],g=h.globals.labels[o],x=h.config.series[n].name?h.config.series[n].name:"",v=h.globals.ttKeyFormatter,k=h.config.tooltip.y.title.formatter,A={w:h,seriesIndex:n,dataPointIndex:o,start:u,end:p};typeof k=="function"&&(x=k(x,A)),(e=h.config.series[n].data[o])!==null&&e!==void 0&&e.x&&(g=h.config.series[n].data[o].x),t||h.config.xaxis.type==="datetime"&&(g=new We(i).xLabelFormat(h.globals.ttKeyFormatter,g,g,{i:void 0,dateFormatter:new _e(i).formatDate,w:h})),typeof v=="function"&&(g=v(g,A)),Number.isFinite(r)&&Number.isFinite(c)&&(u=r,p=c);var S="",M="",L=h.globals.colors[n];if(h.config.tooltip.x.formatter===void 0)if(h.config.xaxis.type==="datetime"){var d=new _e(i);S=d.formatDate(d.getDate(u),h.config.tooltip.x.format),M=d.formatDate(d.getDate(p),h.config.tooltip.x.format)}else S=u,M=p;else S=h.config.tooltip.x.formatter(u),M=h.config.tooltip.x.formatter(p);return{start:u,end:p,startVal:S,endVal:M,ylabel:g,color:L,seriesName:x}},Nt=function(E){var e=E.color,t=E.seriesName,i=E.ylabel,n=E.start,o=E.end,r=E.seriesIndex,c=E.dataPointIndex,h=E.ctx.tooltip.tooltipLabels.getFormatters(r);n=h.yLbFormatter(n),o=h.yLbFormatter(o);var u=h.yLbFormatter(E.w.globals.series[r][c]),p=`<span class="value start-value">
  `.concat(n,`
  </span> <span class="separator">-</span> <span class="value end-value">
  `).concat(o,`
  </span>`);return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+e+'">'+(t||"")+'</span></div><div> <span class="category">'+i+": </span> "+(E.w.globals.comboCharts?E.w.config.series[r].type==="rangeArea"||E.w.config.series[r].type==="rangeBar"?p:"<span>".concat(u,"</span>"):p)+" </div></div>"},Yt=function(){function E(e){m(this,E),this.opts=e}return y(E,[{key:"hideYAxis",value:function(){this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0}},{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(e){return this.hideYAxis(),H.extend(e,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"slope",value:function(){return this.hideYAxis(),{chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!0,formatter:function(e,t){var i=t.w.config.series[t.seriesIndex].name;return e!==null?i+": "+e:""},background:{enabled:!1},offsetX:-5},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}},xaxis:{position:"top",labels:{style:{fontSize:14,fontWeight:900}},tooltip:{enabled:!1},crosshairs:{show:!1}},markers:{size:8,hover:{sizeOffset:1}},legend:{show:!1},tooltip:{shared:!1,intersect:!0,followCursor:!0},stroke:{width:5,curve:"straight"}}}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square"}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"funnel",value:function(){return this.hideYAxis(),X(X({},this.bar()),{},{chart:{animations:{easing:"linear",speed:800,animateGradually:{enabled:!1}}},plotOptions:{bar:{horizontal:!0,borderRadiusApplication:"around",borderRadius:0,dataLabels:{position:"center"}}},grid:{show:!1,padding:{left:0,right:0}},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}}})}},{key:"candlestick",value:function(){var e=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var i=t.seriesIndex,n=t.dataPointIndex,o=t.w;return e._getBoxTooltip(o,i,n,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var e=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var i=t.seriesIndex,n=t.dataPointIndex,o=t.w;return e._getBoxTooltip(o,i,n,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:7,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{chart:{animations:{animateGradually:!1}},stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(e,t){t.ctx;var i=t.seriesIndex,n=t.dataPointIndex,o=t.w,r=function(){var c=o.globals.seriesRangeStart[i][n];return o.globals.seriesRangeEnd[i][n]-c};return o.globals.comboCharts?o.config.series[i].type==="rangeBar"||o.config.series[i].type==="rangeArea"?r():e:r()},background:{enabled:!1},style:{colors:["#fff"]}},markers:{size:10},tooltip:{shared:!1,followCursor:!0,custom:function(e){return e.w.config.plotOptions&&e.w.config.plotOptions.bar&&e.w.config.plotOptions.bar.horizontal?function(t){var i=Mi(X(X({},t),{},{isTimeline:!0})),n=i.color,o=i.seriesName,r=i.ylabel,c=i.startVal,h=i.endVal;return Nt(X(X({},t),{},{color:n,seriesName:o,ylabel:r,start:c,end:h}))}(e):function(t){var i=Mi(t),n=i.color,o=i.seriesName,r=i.ylabel,c=i.start,h=i.end;return Nt(X(X({},t),{},{color:n,seriesName:o,ylabel:r,start:c,end:h}))}(e)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"dumbbell",value:function(e){var t,i;return(t=e.plotOptions.bar)!==null&&t!==void 0&&t.barHeight||(e.plotOptions.bar.barHeight=2),(i=e.plotOptions.bar)!==null&&i!==void 0&&i.columnWidth||(e.plotOptions.bar.columnWidth=2),e}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(e){return function(t){var i=Mi(t),n=i.color,o=i.seriesName,r=i.ylabel,c=i.start,h=i.end;return Nt(X(X({},t),{},{color:n,seriesName:o,ylabel:r,start:c,end:h}))}(e)}}}}},{key:"brush",value:function(e){return H.extend(e,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(e){e.dataLabels=e.dataLabels||{},e.dataLabels.formatter=e.dataLabels.formatter||void 0;var t=e.dataLabels.formatter;return e.yaxis.forEach(function(i,n){e.yaxis[n].min=0,e.yaxis[n].max=100}),e.chart.type==="bar"&&(e.dataLabels.formatter=t||function(i){return typeof i=="number"&&i?i.toFixed(0)+"%":i}),e}},{key:"stackedBars",value:function(){var e=this.bar();return X(X({},e),{},{plotOptions:X(X({},e.plotOptions),{},{bar:X(X({},e.plotOptions.bar),{},{borderRadiusApplication:"end",borderRadiusWhenStacked:"last"})})})}},{key:"convertCatToNumeric",value:function(e){return e.xaxis.convertedCatToNumeric=!0,e}},{key:"convertCatToNumericXaxis",value:function(e,t,i){e.xaxis.type="numeric",e.xaxis.labels=e.xaxis.labels||{},e.xaxis.labels.formatter=e.xaxis.labels.formatter||function(r){return H.isNumber(r)?Math.floor(r):r};var n=e.xaxis.labels.formatter,o=e.xaxis.categories&&e.xaxis.categories.length?e.xaxis.categories:e.labels;return i&&i.length&&(o=i.map(function(r){return Array.isArray(r)?r:String(r)})),o&&o.length&&(e.xaxis.labels.formatter=function(r){return H.isNumber(r)?n(o[Math.floor(r)-1]):n(r)}),e.xaxis.categories=[],e.labels=[],e.xaxis.tickAmount=e.xaxis.tickAmount||"dataPoints",e}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square"}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{opacity:1,gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"polarArea",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:5,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},xaxis:{labels:{formatter:function(e){return e},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"_getBoxTooltip",value:function(e,t,i,n,o){var r=e.globals.seriesCandleO[t][i],c=e.globals.seriesCandleH[t][i],h=e.globals.seriesCandleM[t][i],u=e.globals.seriesCandleL[t][i],p=e.globals.seriesCandleC[t][i];return e.config.series[t].type&&e.config.series[t].type!==o?`<div class="apexcharts-custom-tooltip">
          `.concat(e.config.series[t].name?e.config.series[t].name:"series-"+(t+1),": <strong>").concat(e.globals.series[t][i],`</strong>
        </div>`):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(e.config.chart.type,'">')+"<div>".concat(n[0],': <span class="value">')+r+"</span></div>"+"<div>".concat(n[1],': <span class="value">')+c+"</span></div>"+(h?"<div>".concat(n[2],': <span class="value">')+h+"</span></div>":"")+"<div>".concat(n[3],': <span class="value">')+u+"</span></div>"+"<div>".concat(n[4],': <span class="value">')+p+"</span></div></div>"}}]),E}(),Ht=function(){function E(e){m(this,E),this.opts=e}return y(E,[{key:"init",value:function(e){var t=e.responsiveOverride,i=this.opts,n=new At,o=new Yt(i);this.chartType=i.chart.type,i=this.extendYAxis(i),i=this.extendAnnotations(i);var r=n.init(),c={};if(i&&ae(i)==="object"){var h,u,p,g,x,v,k,A,S,M,L={};L=["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(i.chart.type)!==-1?o[i.chart.type]():o.line(),(h=i.plotOptions)!==null&&h!==void 0&&(u=h.bar)!==null&&u!==void 0&&u.isFunnel&&(L=o.funnel()),i.chart.stacked&&i.chart.type==="bar"&&(L=o.stackedBars()),(p=i.chart.brush)!==null&&p!==void 0&&p.enabled&&(L=o.brush(L)),(g=i.plotOptions)!==null&&g!==void 0&&(x=g.line)!==null&&x!==void 0&&x.isSlopeChart&&(L=o.slope()),i.chart.stacked&&i.chart.stackType==="100%"&&(i=o.stacked100(i)),(v=i.plotOptions)!==null&&v!==void 0&&(k=v.bar)!==null&&k!==void 0&&k.isDumbbell&&(i=o.dumbbell(i)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(i),i.xaxis=i.xaxis||window.Apex.xaxis||{},t||(i.xaxis.convertedCatToNumeric=!1),((A=(i=this.checkForCatToNumericXAxis(this.chartType,L,i)).chart.sparkline)!==null&&A!==void 0&&A.enabled||(S=window.Apex.chart)!==null&&S!==void 0&&(M=S.sparkline)!==null&&M!==void 0&&M.enabled)&&(L=o.sparkline(L)),c=H.extend(r,L)}var d=H.extend(c,window.Apex);return r=H.extend(d,i),r=this.handleUserInputErrors(r)}},{key:"checkForCatToNumericXAxis",value:function(e,t,i){var n,o,r=new Yt(i),c=(e==="bar"||e==="boxPlot")&&((n=i.plotOptions)===null||n===void 0||(o=n.bar)===null||o===void 0?void 0:o.horizontal),h=e==="pie"||e==="polarArea"||e==="donut"||e==="radar"||e==="radialBar"||e==="heatmap",u=i.xaxis.type!=="datetime"&&i.xaxis.type!=="numeric",p=i.xaxis.tickPlacement?i.xaxis.tickPlacement:t.xaxis&&t.xaxis.tickPlacement;return c||h||!u||p==="between"||(i=r.convertCatToNumeric(i)),i}},{key:"extendYAxis",value:function(e,t){var i=new At;(e.yaxis===void 0||!e.yaxis||Array.isArray(e.yaxis)&&e.yaxis.length===0)&&(e.yaxis={}),e.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(e.yaxis=H.extend(e.yaxis,window.Apex.yaxis)),e.yaxis.constructor!==Array?e.yaxis=[H.extend(i.yAxis,e.yaxis)]:e.yaxis=H.extendArray(e.yaxis,i.yAxis);var n=!1;e.yaxis.forEach(function(r){r.logarithmic&&(n=!0)});var o=e.series;return t&&!o&&(o=t.config.series),n&&o.length!==e.yaxis.length&&o.length&&(e.yaxis=o.map(function(r,c){if(r.name||(o[c].name="series-".concat(c+1)),e.yaxis[c])return e.yaxis[c].seriesName=o[c].name,e.yaxis[c];var h=H.extend(i.yAxis,e.yaxis[0]);return h.show=!1,h})),n&&o.length>1&&o.length!==e.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes"),e}},{key:"extendAnnotations",value:function(e){return e.annotations===void 0&&(e.annotations={},e.annotations.yaxis=[],e.annotations.xaxis=[],e.annotations.points=[]),e=this.extendYAxisAnnotations(e),e=this.extendXAxisAnnotations(e),e=this.extendPointAnnotations(e)}},{key:"extendYAxisAnnotations",value:function(e){var t=new At;return e.annotations.yaxis=H.extendArray(e.annotations.yaxis!==void 0?e.annotations.yaxis:[],t.yAxisAnnotation),e}},{key:"extendXAxisAnnotations",value:function(e){var t=new At;return e.annotations.xaxis=H.extendArray(e.annotations.xaxis!==void 0?e.annotations.xaxis:[],t.xAxisAnnotation),e}},{key:"extendPointAnnotations",value:function(e){var t=new At;return e.annotations.points=H.extendArray(e.annotations.points!==void 0?e.annotations.points:[],t.pointAnnotation),e}},{key:"checkForDarkTheme",value:function(e){e.theme&&e.theme.mode==="dark"&&(e.tooltip||(e.tooltip={}),e.tooltip.theme!=="light"&&(e.tooltip.theme="dark"),e.chart.foreColor||(e.chart.foreColor="#f6f7f8"),e.theme.palette||(e.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(e){var t=e;if(t.tooltip.shared&&t.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if(t.chart.type==="bar"&&t.plotOptions.bar.horizontal){if(t.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");t.yaxis[0].reversed&&(t.yaxis[0].opposite=!0),t.xaxis.tooltip.enabled=!1,t.yaxis[0].tooltip.enabled=!1,t.chart.zoom.enabled=!1}return t.chart.type!=="bar"&&t.chart.type!=="rangeBar"||t.tooltip.shared&&t.xaxis.crosshairs.width==="barWidth"&&t.series.length>1&&(t.xaxis.crosshairs.width="tickWidth"),t.chart.type!=="candlestick"&&t.chart.type!=="boxPlot"||t.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(t.chart.type," chart is not supported.")),t.yaxis[0].reversed=!1),t}}]),E}(),aa=function(){function E(){m(this,E)}return y(E,[{key:"initGlobalVars",value:function(e){e.series=[],e.seriesCandleO=[],e.seriesCandleH=[],e.seriesCandleM=[],e.seriesCandleL=[],e.seriesCandleC=[],e.seriesRangeStart=[],e.seriesRangeEnd=[],e.seriesRange=[],e.seriesPercent=[],e.seriesGoals=[],e.seriesX=[],e.seriesZ=[],e.seriesNames=[],e.seriesTotals=[],e.seriesLog=[],e.seriesColors=[],e.stackedSeriesTotals=[],e.seriesXvalues=[],e.seriesYvalues=[],e.labels=[],e.hasXaxisGroups=!1,e.groups=[],e.barGroups=[],e.lineGroups=[],e.areaGroups=[],e.hasSeriesGroups=!1,e.seriesGroups=[],e.categoryLabels=[],e.timescaleLabels=[],e.noLabelsProvided=!1,e.resizeTimer=null,e.selectionResizeTimer=null,e.lastWheelExecution=0,e.delayedElements=[],e.pointsArray=[],e.dataLabelsRects=[],e.isXNumeric=!1,e.skipLastTimelinelabel=!1,e.skipFirstTimelinelabel=!1,e.isDataXYZ=!1,e.isMultiLineX=!1,e.isMultipleYAxis=!1,e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE,e.minYArr=[],e.maxYArr=[],e.maxX=-Number.MAX_VALUE,e.minX=Number.MAX_VALUE,e.initialMaxX=-Number.MAX_VALUE,e.initialMinX=Number.MAX_VALUE,e.maxDate=0,e.minDate=Number.MAX_VALUE,e.minZ=Number.MAX_VALUE,e.maxZ=-Number.MAX_VALUE,e.minXDiff=Number.MAX_VALUE,e.yAxisScale=[],e.xAxisScale=null,e.xAxisTicksPositions=[],e.yLabelsCoords=[],e.yTitleCoords=[],e.barPadForNumericAxis=0,e.padHorizontal=0,e.xRange=0,e.yRange=[],e.zRange=0,e.dataPoints=0,e.xTickAmount=0,e.multiAxisTickAmount=0}},{key:"globalVars",value:function(e){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:e.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],invalidLogScale:!1,ignoreYAxisIndexes:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:e.chart.toolbar.autoSelected==="zoom"&&e.chart.toolbar.tools.zoom&&e.chart.zoom.enabled,panEnabled:e.chart.toolbar.autoSelected==="pan"&&e.chart.toolbar.tools.pan,selectionEnabled:e.chart.toolbar.autoSelected==="selection"&&e.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,isSlopeChart:e.plotOptions.line.isSlopeChart,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null,niceScaleAllowedMagMsd:[[1,1,2,5,5,5,10,10,10,10,10],[1,1,2,5,5,5,10,10,10,10,10]],niceScaleDefaultTicks:[1,2,4,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,12,12,12,12,12,12,12,12,12,24],seriesYAxisMap:[],seriesYAxisReverseMap:[]}}},{key:"init",value:function(e){var t=this.globalVars(e);return this.initGlobalVars(t),t.initialConfig=H.extend({},e),t.initialSeries=H.clone(e.series),t.lastXAxis=H.clone(t.initialConfig.xaxis),t.lastYAxis=H.clone(t.initialConfig.yaxis),t}}]),E}(),Xt=function(){function E(e){m(this,E),this.opts=e}return y(E,[{key:"init",value:function(){var e=new Ht(this.opts).init({responsiveOverride:!1});return{config:e,globals:new aa().init(e)}}}]),E}(),Ze=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w,this.opts=null,this.seriesIndex=0,this.patternIDs=[]}return y(E,[{key:"clippedImgArea",value:function(e){var t=this.w,i=t.config,n=parseInt(t.globals.gridWidth,10),o=parseInt(t.globals.gridHeight,10),r=n>o?n:o,c=e.image,h=0,u=0;e.width===void 0&&e.height===void 0?i.fill.image.width!==void 0&&i.fill.image.height!==void 0?(h=i.fill.image.width+1,u=i.fill.image.height):(h=r+1,u=r):(h=e.width,u=e.height);var p=document.createElementNS(t.globals.SVGNS,"pattern");V.setAttrs(p,{id:e.patternID,patternUnits:e.patternUnits?e.patternUnits:"userSpaceOnUse",width:h+"px",height:u+"px"});var g=document.createElementNS(t.globals.SVGNS,"image");p.appendChild(g),g.setAttributeNS(window.SVG.xlink,"href",c),V.setAttrs(g,{x:0,y:0,preserveAspectRatio:"none",width:h+"px",height:u+"px"}),g.style.opacity=e.opacity,t.globals.dom.elDefs.node.appendChild(p)}},{key:"getSeriesIndex",value:function(e){var t=this.w,i=t.config.chart.type;return(i==="bar"||i==="rangeBar")&&t.config.plotOptions.bar.distributed||i==="heatmap"||i==="treemap"?this.seriesIndex=e.seriesNumber:this.seriesIndex=e.seriesNumber%t.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(e){var t=this.w;this.opts=e;var i,n,o,r=this.w.config;this.seriesIndex=this.getSeriesIndex(e);var c=this.getFillColors()[this.seriesIndex];t.globals.seriesColors[this.seriesIndex]!==void 0&&(c=t.globals.seriesColors[this.seriesIndex]),typeof c=="function"&&(c=c({seriesIndex:this.seriesIndex,dataPointIndex:e.dataPointIndex,value:e.value,w:t}));var h=e.fillType?e.fillType:this.getFillType(this.seriesIndex),u=Array.isArray(r.fill.opacity)?r.fill.opacity[this.seriesIndex]:r.fill.opacity;e.color&&(c=e.color),c||(c="#fff",console.warn("undefined color - ApexCharts"));var p=c;if(c.indexOf("rgb")===-1?c.length<9&&(p=H.hexToRgba(c,u)):c.indexOf("rgba")>-1&&(u=H.getOpacityFromRGBA(c)),e.opacity&&(u=e.opacity),h==="pattern"&&(n=this.handlePatternFill({fillConfig:e.fillConfig,patternFill:n,fillColor:c,fillOpacity:u,defaultColor:p})),h==="gradient"&&(o=this.handleGradientFill({fillConfig:e.fillConfig,fillColor:c,fillOpacity:u,i:this.seriesIndex})),h==="image"){var g=r.fill.image.src,x=e.patternID?e.patternID:"",v="pattern".concat(t.globals.cuid).concat(e.seriesNumber+1).concat(x);this.patternIDs.indexOf(v)===-1&&(this.clippedImgArea({opacity:u,image:Array.isArray(g)?e.seriesNumber<g.length?g[e.seriesNumber]:g[0]:g,width:e.width?e.width:void 0,height:e.height?e.height:void 0,patternUnits:e.patternUnits,patternID:v}),this.patternIDs.push(v)),i="url(#".concat(v,")")}else i=h==="gradient"?o:h==="pattern"?n:p;return e.solid&&(i=p),i}},{key:"getFillType",value:function(e){var t=this.w;return Array.isArray(t.config.fill.type)?t.config.fill.type[e]:t.config.fill.type}},{key:"getFillColors",value:function(){var e=this.w,t=e.config,i=this.opts,n=[];return e.globals.comboCharts?e.config.series[this.seriesIndex].type==="line"?Array.isArray(e.globals.stroke.colors)?n=e.globals.stroke.colors:n.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?n=e.globals.fill.colors:n.push(e.globals.fill.colors):t.chart.type==="line"?Array.isArray(e.globals.stroke.colors)?n=e.globals.stroke.colors:n.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?n=e.globals.fill.colors:n.push(e.globals.fill.colors),i.fillColors!==void 0&&(n=[],Array.isArray(i.fillColors)?n=i.fillColors.slice():n.push(i.fillColors)),n}},{key:"handlePatternFill",value:function(e){var t=e.fillConfig,i=e.patternFill,n=e.fillColor,o=e.fillOpacity,r=e.defaultColor,c=this.w.config.fill;t&&(c=t);var h=this.opts,u=new V(this.ctx),p=Array.isArray(c.pattern.strokeWidth)?c.pattern.strokeWidth[this.seriesIndex]:c.pattern.strokeWidth,g=n;return Array.isArray(c.pattern.style)?i=c.pattern.style[h.seriesNumber]!==void 0?u.drawPattern(c.pattern.style[h.seriesNumber],c.pattern.width,c.pattern.height,g,p,o):r:i=u.drawPattern(c.pattern.style,c.pattern.width,c.pattern.height,g,p,o),i}},{key:"handleGradientFill",value:function(e){var t=e.fillColor,i=e.fillOpacity,n=e.fillConfig,o=e.i,r=this.w.config.fill;n&&(r=X(X({},r),n));var c,h=this.opts,u=new V(this.ctx),p=new H,g=r.gradient.type,x=t,v=r.gradient.opacityFrom===void 0?i:Array.isArray(r.gradient.opacityFrom)?r.gradient.opacityFrom[o]:r.gradient.opacityFrom;x.indexOf("rgba")>-1&&(v=H.getOpacityFromRGBA(x));var k=r.gradient.opacityTo===void 0?i:Array.isArray(r.gradient.opacityTo)?r.gradient.opacityTo[o]:r.gradient.opacityTo;if(r.gradient.gradientToColors===void 0||r.gradient.gradientToColors.length===0)c=r.gradient.shade==="dark"?p.shadeColor(-1*parseFloat(r.gradient.shadeIntensity),t.indexOf("rgb")>-1?H.rgb2hex(t):t):p.shadeColor(parseFloat(r.gradient.shadeIntensity),t.indexOf("rgb")>-1?H.rgb2hex(t):t);else if(r.gradient.gradientToColors[h.seriesNumber]){var A=r.gradient.gradientToColors[h.seriesNumber];c=A,A.indexOf("rgba")>-1&&(k=H.getOpacityFromRGBA(A))}else c=t;if(r.gradient.gradientFrom&&(x=r.gradient.gradientFrom),r.gradient.gradientTo&&(c=r.gradient.gradientTo),r.gradient.inverseColors){var S=x;x=c,c=S}return x.indexOf("rgb")>-1&&(x=H.rgb2hex(x)),c.indexOf("rgb")>-1&&(c=H.rgb2hex(c)),u.drawGradient(g,x,c,v,k,h.size,r.gradient.stops,r.gradient.colorStops,o)}}]),E}(),pt=function(){function E(e,t){m(this,E),this.ctx=e,this.w=e.w}return y(E,[{key:"setGlobalMarkerSize",value:function(){var e=this.w;if(e.globals.markers.size=Array.isArray(e.config.markers.size)?e.config.markers.size:[e.config.markers.size],e.globals.markers.size.length>0){if(e.globals.markers.size.length<e.globals.series.length+1)for(var t=0;t<=e.globals.series.length;t++)e.globals.markers.size[t]===void 0&&e.globals.markers.size.push(e.globals.markers.size[0])}else e.globals.markers.size=e.config.series.map(function(i){return e.config.markers.size})}},{key:"plotChartMarkers",value:function(e,t,i,n){var o,r=arguments.length>4&&arguments[4]!==void 0&&arguments[4],c=this.w,h=t,u=e,p=null,g=new V(this.ctx),x=c.config.markers.discrete&&c.config.markers.discrete.length;if((c.globals.markers.size[t]>0||r||x)&&(p=g.group({class:r||x?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(c.globals.cuid,")")),Array.isArray(u.x))for(var v=0;v<u.x.length;v++){var k=i;i===1&&v===0&&(k=0),i===1&&v===1&&(k=1);var A="apexcharts-marker";if(c.config.chart.type!=="line"&&c.config.chart.type!=="area"||c.globals.comboCharts||c.config.tooltip.intersect||(A+=" no-pointer-events"),(Array.isArray(c.config.markers.size)?c.globals.markers.size[t]>0:c.config.markers.size>0)||r||x){H.isNumber(u.y[v])?A+=" w".concat(H.randomId()):A="apexcharts-nullpoint";var S=this.getMarkerConfig({cssClass:A,seriesIndex:t,dataPointIndex:k});c.config.series[h].data[k]&&(c.config.series[h].data[k].fillColor&&(S.pointFillColor=c.config.series[h].data[k].fillColor),c.config.series[h].data[k].strokeColor&&(S.pointStrokeColor=c.config.series[h].data[k].strokeColor)),n!==void 0&&(S.pSize=n),(u.x[v]<-c.globals.markers.largestSize||u.x[v]>c.globals.gridWidth+c.globals.markers.largestSize||u.y[v]<-c.globals.markers.largestSize||u.y[v]>c.globals.gridHeight+c.globals.markers.largestSize)&&(S.pSize=0),(o=g.drawMarker(u.x[v],u.y[v],S)).attr("rel",k),o.attr("j",k),o.attr("index",t),o.node.setAttribute("default-marker-size",S.pSize),new le(this.ctx).setSelectionFilter(o,t,k),this.addEvents(o),p&&p.add(o)}else c.globals.pointsArray[t]===void 0&&(c.globals.pointsArray[t]=[]),c.globals.pointsArray[t].push([u.x[v],u.y[v]])}return p}},{key:"getMarkerConfig",value:function(e){var t=e.cssClass,i=e.seriesIndex,n=e.dataPointIndex,o=n===void 0?null:n,r=e.radius,c=r===void 0?null:r,h=e.size,u=h===void 0?null:h,p=e.strokeWidth,g=p===void 0?null:p,x=this.w,v=this.getMarkerStyle(i),k=u===null?x.globals.markers.size[i]:u,A=x.config.markers;return o!==null&&A.discrete.length&&A.discrete.map(function(S){S.seriesIndex===i&&S.dataPointIndex===o&&(v.pointStrokeColor=S.strokeColor,v.pointFillColor=S.fillColor,k=S.size,v.pointShape=S.shape)}),{pSize:c===null?k:c,pRadius:c!==null?c:A.radius,pointStrokeWidth:g!==null?g:Array.isArray(A.strokeWidth)?A.strokeWidth[i]:A.strokeWidth,pointStrokeColor:v.pointStrokeColor,pointFillColor:v.pointFillColor,shape:v.pointShape||(Array.isArray(A.shape)?A.shape[i]:A.shape),class:t,pointStrokeOpacity:Array.isArray(A.strokeOpacity)?A.strokeOpacity[i]:A.strokeOpacity,pointStrokeDashArray:Array.isArray(A.strokeDashArray)?A.strokeDashArray[i]:A.strokeDashArray,pointFillOpacity:Array.isArray(A.fillOpacity)?A.fillOpacity[i]:A.fillOpacity,seriesIndex:i}}},{key:"addEvents",value:function(e){var t=this.w,i=new V(this.ctx);e.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this.ctx,e)),e.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this.ctx,e)),e.node.addEventListener("mousedown",i.pathMouseDown.bind(this.ctx,e)),e.node.addEventListener("click",t.config.markers.onClick),e.node.addEventListener("dblclick",t.config.markers.onDblClick),e.node.addEventListener("touchstart",i.pathMouseDown.bind(this.ctx,e),{passive:!0})}},{key:"getMarkerStyle",value:function(e){var t=this.w,i=t.globals.markers.colors,n=t.config.markers.strokeColor||t.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(n)?n[e]:n,pointFillColor:Array.isArray(i)?i[e]:i}}}]),E}(),kt=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w,this.initialAnim=this.w.config.chart.animations.enabled}return y(E,[{key:"draw",value:function(e,t,i){var n=this.w,o=new V(this.ctx),r=i.realIndex,c=i.pointsPos,h=i.zRatio,u=i.elParent,p=o.group({class:"apexcharts-series-markers apexcharts-series-".concat(n.config.chart.type)});if(p.attr("clip-path","url(#gridRectMarkerMask".concat(n.globals.cuid,")")),Array.isArray(c.x))for(var g=0;g<c.x.length;g++){var x=t+1,v=!0;t===0&&g===0&&(x=0),t===0&&g===1&&(x=1);var k=n.globals.markers.size[r];if(h!==1/0){var A=n.config.plotOptions.bubble;k=n.globals.seriesZ[r][x],A.zScaling&&(k/=h),A.minBubbleRadius&&k<A.minBubbleRadius&&(k=A.minBubbleRadius),A.maxBubbleRadius&&k>A.maxBubbleRadius&&(k=A.maxBubbleRadius)}var S=c.x[g],M=c.y[g];if(k=k||0,M!==null&&n.globals.series[r][x]!==void 0||(v=!1),v){var L=this.drawPoint(S,M,k,r,x,t);p.add(L)}u.add(p)}}},{key:"drawPoint",value:function(e,t,i,n,o,r){var c=this.w,h=n,u=new ke(this.ctx),p=new le(this.ctx),g=new Ze(this.ctx),x=new pt(this.ctx),v=new V(this.ctx),k=x.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:h,dataPointIndex:o,radius:c.config.chart.type==="bubble"||c.globals.comboCharts&&c.config.series[n]&&c.config.series[n].type==="bubble"?i:null}),A=g.fillPath({seriesNumber:n,dataPointIndex:o,color:k.pointFillColor,patternUnits:"objectBoundingBox",value:c.globals.series[n][r]}),S=v.drawMarker(e,t,k);if(c.config.series[h].data[o]&&c.config.series[h].data[o].fillColor&&(A=c.config.series[h].data[o].fillColor),S.attr({fill:A}),c.config.chart.dropShadow.enabled){var M=c.config.chart.dropShadow;p.dropShadow(S,M,n)}if(!this.initialAnim||c.globals.dataChanged||c.globals.resized)c.globals.animationEnded=!0;else{var L=c.config.chart.animations.speed;u.animateMarker(S,L,c.globals.easing,function(){window.setTimeout(function(){u.animationCompleted(S)},100)})}return S.attr({rel:o,j:o,index:n,"default-marker-size":k.pSize}),p.setSelectionFilter(S,n,o),x.addEvents(S),S.node.classList.add("apexcharts-marker"),S}},{key:"centerTextInBubble",value:function(e){var t=this.w;return{y:e+=parseInt(t.config.dataLabels.style.fontSize,10)/4}}}]),E}(),mt=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w}return y(E,[{key:"dataLabelsCorrection",value:function(e,t,i,n,o,r,c){var h=this.w,u=!1,p=new V(this.ctx).getTextRects(i,c),g=p.width,x=p.height;t<0&&(t=0),t>h.globals.gridHeight+x&&(t=h.globals.gridHeight+x/2),h.globals.dataLabelsRects[n]===void 0&&(h.globals.dataLabelsRects[n]=[]),h.globals.dataLabelsRects[n].push({x:e,y:t,width:g,height:x});var v=h.globals.dataLabelsRects[n].length-2,k=h.globals.lastDrawnDataLabelsIndexes[n]!==void 0?h.globals.lastDrawnDataLabelsIndexes[n][h.globals.lastDrawnDataLabelsIndexes[n].length-1]:0;if(h.globals.dataLabelsRects[n][v]!==void 0){var A=h.globals.dataLabelsRects[n][k];(e>A.x+A.width||t>A.y+A.height||t+x<A.y||e+g<A.x)&&(u=!0)}return(o===0||r)&&(u=!0),{x:e,y:t,textRects:p,drawnextLabel:u}}},{key:"drawDataLabel",value:function(e){var t=this,i=e.type,n=e.pos,o=e.i,r=e.j,c=e.isRangeStart,h=e.strokeWidth,u=h===void 0?2:h,p=this.w,g=new V(this.ctx),x=p.config.dataLabels,v=0,k=0,A=r,S=null;if(p.globals.collapsedSeriesIndices.indexOf(o)!==-1||!x.enabled||!Array.isArray(n.x))return S;S=g.group({class:"apexcharts-data-labels"});for(var M=0;M<n.x.length;M++)if(v=n.x[M]+x.offsetX,k=n.y[M]+x.offsetY+u,!isNaN(v)){r===1&&M===0&&(A=0),r===1&&M===1&&(A=1);var L=p.globals.series[o][A];i==="rangeArea"&&(L=c?p.globals.seriesRangeStart[o][A]:p.globals.seriesRangeEnd[o][A]);var d="",b=function(I){return p.config.dataLabels.formatter(I,{ctx:t.ctx,seriesIndex:o,dataPointIndex:A,w:p})};p.config.chart.type==="bubble"?(d=b(L=p.globals.seriesZ[o][A]),k=n.y[M],k=new kt(this.ctx).centerTextInBubble(k,o,A).y):L!==void 0&&(d=b(L));var C=p.config.dataLabels.textAnchor;p.globals.isSlopeChart&&(C=A===0?"end":A===p.config.series[o].data.length-1?"start":"middle"),this.plotDataLabelsText({x:v,y:k,text:d,i:o,j:A,parent:S,offsetCorrection:!0,dataLabelsConfig:p.config.dataLabels,textAnchor:C})}return S}},{key:"plotDataLabelsText",value:function(e){var t=this.w,i=new V(this.ctx),n=e.x,o=e.y,r=e.i,c=e.j,h=e.text,u=e.textAnchor,p=e.fontSize,g=e.parent,x=e.dataLabelsConfig,v=e.color,k=e.alwaysDrawDataLabel,A=e.offsetCorrection,S=e.className,M=null;if(Array.isArray(t.config.dataLabels.enabledOnSeries)&&t.config.dataLabels.enabledOnSeries.indexOf(r)<0)return M;var L={x:n,y:o,drawnextLabel:!0,textRects:null};A&&(L=this.dataLabelsCorrection(n,o,h,r,c,k,parseInt(x.style.fontSize,10))),t.globals.zoomed||(n=L.x,o=L.y),L.textRects&&(n<-20-L.textRects.width||n>t.globals.gridWidth+L.textRects.width+30)&&(h="");var d=t.globals.dataLabels.style.colors[r];((t.config.chart.type==="bar"||t.config.chart.type==="rangeBar")&&t.config.plotOptions.bar.distributed||t.config.dataLabels.distributed)&&(d=t.globals.dataLabels.style.colors[c]),typeof d=="function"&&(d=d({series:t.globals.series,seriesIndex:r,dataPointIndex:c,w:t})),v&&(d=v);var b=x.offsetX,C=x.offsetY;if(t.config.chart.type!=="bar"&&t.config.chart.type!=="rangeBar"||(b=0,C=0),t.globals.isSlopeChart&&(c!==0&&(b=-2*x.offsetX+5),c!==0&&c!==t.config.series[r].data.length-1&&(b=0)),L.drawnextLabel){if((M=i.drawText({width:100,height:parseInt(x.style.fontSize,10),x:n+b,y:o+C,foreColor:d,textAnchor:u||x.textAnchor,text:h,fontSize:p||x.style.fontSize,fontFamily:x.style.fontFamily,fontWeight:x.style.fontWeight||"normal"})).attr({class:S||"apexcharts-datalabel",cx:n,cy:o}),x.dropShadow.enabled){var I=x.dropShadow;new le(this.ctx).dropShadow(M,I)}g.add(M),t.globals.lastDrawnDataLabelsIndexes[r]===void 0&&(t.globals.lastDrawnDataLabelsIndexes[r]=[]),t.globals.lastDrawnDataLabelsIndexes[r].push(c)}return M}},{key:"addBackgroundToDataLabel",value:function(e,t){var i=this.w,n=i.config.dataLabels.background,o=n.padding,r=n.padding/2,c=t.width,h=t.height,u=new V(this.ctx).drawRect(t.x-o,t.y-r/2,c+2*o,h+r,n.borderRadius,i.config.chart.background!=="transparent"&&i.config.chart.background?i.config.chart.background:"#fff",n.opacity,n.borderWidth,n.borderColor);return n.dropShadow.enabled&&new le(this.ctx).dropShadow(u,n.dropShadow),u}},{key:"dataLabelsBackground",value:function(){var e=this.w;if(e.config.chart.type!=="bubble")for(var t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),i=0;i<t.length;i++){var n=t[i],o=n.getBBox(),r=null;if(o.width&&o.height&&(r=this.addBackgroundToDataLabel(n,o)),r){n.parentNode.insertBefore(r.node,n);var c=n.getAttribute("fill");e.config.chart.animations.enabled&&!e.globals.resized&&!e.globals.dataChanged?r.animate().attr({fill:c}):r.attr({fill:c}),n.setAttribute("fill",e.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var e=this.w,t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),i=e.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),n=0;n<t.length;n++)i&&i.insertBefore(t[n],i.nextSibling)}}]),E}(),it=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w,this.legendInactiveClass="legend-mouseover-inactive"}return y(E,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(e){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(H.escapeString(e),"']"))}},{key:"isSeriesHidden",value:function(e){var t=this.getSeriesByName(e),i=parseInt(t.getAttribute("data:realIndex"),10);return{isHidden:t.classList.contains("apexcharts-series-collapsed"),realIndex:i}}},{key:"addCollapsedClassToSeries",value:function(e,t){var i=this.w;function n(o){for(var r=0;r<o.length;r++)o[r].index===t&&e.node.classList.add("apexcharts-series-collapsed")}n(i.globals.collapsedSeries),n(i.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(e){var t=this.isSeriesHidden(e);return this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,t.isHidden),t.isHidden}},{key:"showSeries",value:function(e){var t=this.isSeriesHidden(e);t.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!0)}},{key:"hideSeries",value:function(e){var t=this.isSeriesHidden(e);t.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!1)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],n=this.w,o=H.clone(n.globals.initialSeries);n.globals.previousPaths=[],i?(n.globals.collapsedSeries=[],n.globals.ancillaryCollapsedSeries=[],n.globals.collapsedSeriesIndices=[],n.globals.ancillaryCollapsedSeriesIndices=[]):o=this.emptyCollapsedSeries(o),n.config.series=o,e&&(t&&(n.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(o,n.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(e){for(var t=this.w,i=0;i<e.length;i++)t.globals.collapsedSeriesIndices.indexOf(i)>-1&&(e[i].data=[]);return e}},{key:"highlightSeries",value:function(e){var t=this.w,i=this.getSeriesByName(e),n=parseInt(i==null?void 0:i.getAttribute("data:realIndex"),10),o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels, .apexcharts-yaxis"),r=null,c=null,h=null;if(t.globals.axisCharts||t.config.chart.type==="radialBar")if(t.globals.axisCharts){r=t.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(n,"']")),c=t.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(n,"']"));var u=t.globals.seriesYAxisReverseMap[n];h=t.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(u,"']"))}else r=t.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(n+1,"']"));else r=t.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(n+1,"'] path"));for(var p=0;p<o.length;p++)o[p].classList.add(this.legendInactiveClass);if(r)t.globals.axisCharts||r.parentNode.classList.remove(this.legendInactiveClass),r.classList.remove(this.legendInactiveClass),c!==null&&c.classList.remove(this.legendInactiveClass),h!==null&&h.classList.remove(this.legendInactiveClass);else for(var g=0;g<o.length;g++)o[g].classList.remove(this.legendInactiveClass)}},{key:"toggleSeriesOnHover",value:function(e,t){var i=this.w;t||(t=e.target);var n=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels, .apexcharts-yaxis");if(e.type==="mousemove"){var o=parseInt(t.getAttribute("rel"),10)-1;this.highlightSeries(i.globals.seriesNames[o])}else if(e.type==="mouseout")for(var r=0;r<n.length;r++)n[r].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(e,t){var i=this,n=this.w,o=n.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),r=function(u){for(var p=0;p<o.length;p++)o[p].classList[u](i.legendInactiveClass)};if(e.type==="mousemove"){var c=parseInt(t.getAttribute("rel"),10)-1;r("add");var h=n.config.plotOptions.heatmap.colorScale.ranges;(function(u,p){for(var g=0;g<o.length;g++){var x=Number(o[g].getAttribute("val"));x>=u.from&&(x<u.to||u.to===p&&x===p)&&o[g].classList.remove(i.legendInactiveClass)}})(h[c],h.reduce(function(u,p){return Math.max(u,p.to)},0))}else e.type==="mouseout"&&r("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"asc",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=this.w,n=0;if(i.config.series.length>1){for(var o=i.config.series.map(function(c,h){return c.data&&c.data.length>0&&i.globals.collapsedSeriesIndices.indexOf(h)===-1&&(!i.globals.comboCharts||t.length===0||t.length&&t.indexOf(i.config.series[h].type)>-1)?h:-1}),r=e==="asc"?0:o.length-1;e==="asc"?r<o.length:r>=0;e==="asc"?r++:r--)if(o[r]!==-1){n=o[r];break}}return n}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map(function(e,t){return e.type==="bar"||e.type==="column"?t:-1}).filter(function(e){return e!==-1}):this.w.config.series.map(function(e,t){return t})}},{key:"getPreviousPaths",value:function(){var e=this.w;function t(r,c,h){for(var u=r[c].childNodes,p={type:h,paths:[],realIndex:r[c].getAttribute("data:realIndex")},g=0;g<u.length;g++)if(u[g].hasAttribute("pathTo")){var x=u[g].getAttribute("pathTo");p.paths.push({d:x})}e.globals.previousPaths.push(p)}e.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach(function(r){for(var c,h=(c=r,e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(c,"-series .apexcharts-series"))),u=0;u<h.length;u++)t(h,u,r)}),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series"));if(i.length>0)for(var n=function(r){for(var c=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(r,"'] rect")),h=[],u=function(g){var x=function(k){return c[g].getAttribute(k)},v={x:parseFloat(x("x")),y:parseFloat(x("y")),width:parseFloat(x("width")),height:parseFloat(x("height"))};h.push({rect:v,color:c[g].getAttribute("color")})},p=0;p<c.length;p++)u(p);e.globals.previousPaths.push(h)},o=0;o<i.length;o++)n(o);e.globals.axisCharts||(e.globals.previousPaths=e.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(e){var t=this.w,i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e,"-series .apexcharts-series"));if(i.length>0)for(var n=0;n<i.length;n++){for(var o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e,"-series .apexcharts-series[data\\:realIndex='").concat(n,"'] circle")),r=[],c=0;c<o.length;c++)r.push({x:o[c].getAttribute("cx"),y:o[c].getAttribute("cy"),r:o[c].getAttribute("r")});t.globals.previousPaths.push(r)}}},{key:"clearPreviousPaths",value:function(){var e=this.w;e.globals.previousPaths=[],e.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var e=this.w,t=e.config.noData,i=new V(this.ctx),n=e.globals.svgWidth/2,o=e.globals.svgHeight/2,r="middle";if(e.globals.noData=!0,e.globals.animationEnded=!0,t.align==="left"?(n=10,r="start"):t.align==="right"&&(n=e.globals.svgWidth-10,r="end"),t.verticalAlign==="top"?o=50:t.verticalAlign==="bottom"&&(o=e.globals.svgHeight-50),n+=t.offsetX,o=o+parseInt(t.style.fontSize,10)+2+t.offsetY,t.text!==void 0&&t.text!==""){var c=i.drawText({x:n,y:o,text:t.text,textAnchor:r,fontSize:t.style.fontSize,fontFamily:t.style.fontFamily,foreColor:t.style.color,opacity:1,class:"apexcharts-text-nodata"});e.globals.dom.Paper.add(c)}}},{key:"setNullSeriesToZeroValues",value:function(e){for(var t=this.w,i=0;i<e.length;i++)if(e[i].length===0)for(var n=0;n<e[t.globals.maxValsInArrayIndex].length;n++)e[i].push(0);return e}},{key:"hasAllSeriesEqualX",value:function(){for(var e=!0,t=this.w,i=this.filteredSeriesX(),n=0;n<i.length-1;n++)if(i[n][0]!==i[n+1][0]){e=!1;break}return t.globals.allSeriesHasEqualX=e,e}},{key:"filteredSeriesX",value:function(){var e=this.w.globals.seriesX.map(function(t){return t.length>0?t:[]});return e}}]),E}(),ri=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new he(this.ctx)}return y(E,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var e=this.w.config.series.slice(),t=new it(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),e[this.activeSeriesIndex].data!==void 0&&e[this.activeSeriesIndex].data.length>0&&e[this.activeSeriesIndex].data[0]!==null&&e[this.activeSeriesIndex].data[0].x!==void 0&&e[this.activeSeriesIndex].data[0]!==null)return!0}},{key:"isFormat2DArray",value:function(){var e=this.w.config.series.slice(),t=new it(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),e[this.activeSeriesIndex].data!==void 0&&e[this.activeSeriesIndex].data.length>0&&e[this.activeSeriesIndex].data[0]!==void 0&&e[this.activeSeriesIndex].data[0]!==null&&e[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(e,t){for(var i=this.w.config,n=this.w.globals,o=i.chart.type==="boxPlot"||i.series[t].type==="boxPlot",r=0;r<e[t].data.length;r++)if(e[t].data[r][1]!==void 0&&(Array.isArray(e[t].data[r][1])&&e[t].data[r][1].length===4&&!o?this.twoDSeries.push(H.parseNumber(e[t].data[r][1][3])):e[t].data[r].length>=5?this.twoDSeries.push(H.parseNumber(e[t].data[r][4])):this.twoDSeries.push(H.parseNumber(e[t].data[r][1])),n.dataFormatXNumeric=!0),i.xaxis.type==="datetime"){var c=new Date(e[t].data[r][0]);c=new Date(c).getTime(),this.twoDSeriesX.push(c)}else this.twoDSeriesX.push(e[t].data[r][0]);for(var h=0;h<e[t].data.length;h++)e[t].data[h][2]!==void 0&&(this.threeDSeries.push(e[t].data[h][2]),n.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(e,t){var i=this.w.config,n=this.w.globals,o=new _e(this.ctx),r=t;n.collapsedSeriesIndices.indexOf(t)>-1&&(r=this.activeSeriesIndex);for(var c=0;c<e[t].data.length;c++)e[t].data[c].y!==void 0&&(Array.isArray(e[t].data[c].y)?this.twoDSeries.push(H.parseNumber(e[t].data[c].y[e[t].data[c].y.length-1])):this.twoDSeries.push(H.parseNumber(e[t].data[c].y))),e[t].data[c].goals!==void 0&&Array.isArray(e[t].data[c].goals)?(this.seriesGoals[t]===void 0&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(e[t].data[c].goals)):(this.seriesGoals[t]===void 0&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(null));for(var h=0;h<e[r].data.length;h++){var u=typeof e[r].data[h].x=="string",p=Array.isArray(e[r].data[h].x),g=!p&&!!o.isValidDate(e[r].data[h].x);if(u||g)if(u||i.xaxis.convertedCatToNumeric){var x=n.isBarHorizontal&&n.isRangeData;i.xaxis.type!=="datetime"||x?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[r].data[h].x),isNaN(e[r].data[h].x)||this.w.config.xaxis.type==="category"||typeof e[r].data[h].x=="string"||(n.isXNumeric=!0)):this.twoDSeriesX.push(o.parseDate(e[r].data[h].x))}else i.xaxis.type==="datetime"?this.twoDSeriesX.push(o.parseDate(e[r].data[h].x.toString())):(n.dataFormatXNumeric=!0,n.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(e[r].data[h].x)));else p?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[r].data[h].x)):(n.isXNumeric=!0,n.dataFormatXNumeric=!0,this.twoDSeriesX.push(e[r].data[h].x))}if(e[t].data[0]&&e[t].data[0].z!==void 0){for(var v=0;v<e[t].data.length;v++)this.threeDSeries.push(e[t].data[v].z);n.isDataXYZ=!0}}},{key:"handleRangeData",value:function(e,t){var i=this.w.globals,n={};return this.isFormat2DArray()?n=this.handleRangeDataFormat("array",e,t):this.isFormatXY()&&(n=this.handleRangeDataFormat("xy",e,t)),i.seriesRangeStart.push(n.start===void 0?[]:n.start),i.seriesRangeEnd.push(n.end===void 0?[]:n.end),i.seriesRange.push(n.rangeUniques),i.seriesRange.forEach(function(o,r){o&&o.forEach(function(c,h){c.y.forEach(function(u,p){for(var g=0;g<c.y.length;g++)if(p!==g){var x=u.y1,v=u.y2,k=c.y[g].y1;x<=c.y[g].y2&&k<=v&&(c.overlaps.indexOf(u.rangeName)<0&&c.overlaps.push(u.rangeName),c.overlaps.indexOf(c.y[g].rangeName)<0&&c.overlaps.push(c.y[g].rangeName))}})})}),n}},{key:"handleCandleStickBoxData",value:function(e,t){var i=this.w.globals,n={};return this.isFormat2DArray()?n=this.handleCandleStickBoxDataFormat("array",e,t):this.isFormatXY()&&(n=this.handleCandleStickBoxDataFormat("xy",e,t)),i.seriesCandleO[t]=n.o,i.seriesCandleH[t]=n.h,i.seriesCandleM[t]=n.m,i.seriesCandleL[t]=n.l,i.seriesCandleC[t]=n.c,n}},{key:"handleRangeDataFormat",value:function(e,t,i){var n=[],o=[],r=t[i].data.filter(function(p,g,x){return g===x.findIndex(function(v){return v.x===p.x})}).map(function(p,g){return{x:p.x,overlaps:[],y:[]}});if(e==="array")for(var c=0;c<t[i].data.length;c++)Array.isArray(t[i].data[c])?(n.push(t[i].data[c][1][0]),o.push(t[i].data[c][1][1])):(n.push(t[i].data[c]),o.push(t[i].data[c]));else if(e==="xy")for(var h=function(p){var g=Array.isArray(t[i].data[p].y),x=H.randomId(),v=t[i].data[p].x,k={y1:g?t[i].data[p].y[0]:t[i].data[p].y,y2:g?t[i].data[p].y[1]:t[i].data[p].y,rangeName:x};t[i].data[p].rangeName=x;var A=r.findIndex(function(S){return S.x===v});r[A].y.push(k),n.push(k.y1),o.push(k.y2)},u=0;u<t[i].data.length;u++)h(u);return{start:n,end:o,rangeUniques:r}}},{key:"handleCandleStickBoxDataFormat",value:function(e,t,i){var n=this.w,o=n.config.chart.type==="boxPlot"||n.config.series[i].type==="boxPlot",r=[],c=[],h=[],u=[],p=[];if(e==="array")if(o&&t[i].data[0].length===6||!o&&t[i].data[0].length===5)for(var g=0;g<t[i].data.length;g++)r.push(t[i].data[g][1]),c.push(t[i].data[g][2]),o?(h.push(t[i].data[g][3]),u.push(t[i].data[g][4]),p.push(t[i].data[g][5])):(u.push(t[i].data[g][3]),p.push(t[i].data[g][4]));else for(var x=0;x<t[i].data.length;x++)Array.isArray(t[i].data[x][1])&&(r.push(t[i].data[x][1][0]),c.push(t[i].data[x][1][1]),o?(h.push(t[i].data[x][1][2]),u.push(t[i].data[x][1][3]),p.push(t[i].data[x][1][4])):(u.push(t[i].data[x][1][2]),p.push(t[i].data[x][1][3])));else if(e==="xy")for(var v=0;v<t[i].data.length;v++)Array.isArray(t[i].data[v].y)&&(r.push(t[i].data[v].y[0]),c.push(t[i].data[v].y[1]),o?(h.push(t[i].data[v].y[2]),u.push(t[i].data[v].y[3]),p.push(t[i].data[v].y[4])):(u.push(t[i].data[v].y[2]),p.push(t[i].data[v].y[3])));return{o:r,h:c,m:h,l:u,c:p}}},{key:"parseDataAxisCharts",value:function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.ctx,n=this.w.config,o=this.w.globals,r=new _e(i),c=n.labels.length>0?n.labels.slice():n.xaxis.categories.slice();o.isRangeBar=n.chart.type==="rangeBar"&&o.isBarHorizontal,o.hasXaxisGroups=n.xaxis.type==="category"&&n.xaxis.group.groups.length>0,o.hasXaxisGroups&&(o.groups=n.xaxis.group.groups),e.forEach(function(v,k){v.name!==void 0?o.seriesNames.push(v.name):o.seriesNames.push("series-"+parseInt(k+1,10))}),this.coreUtils.setSeriesYAxisMappings();var h=[],u=ie(new Set(n.series.map(function(v){return v.group})));n.series.forEach(function(v,k){var A=u.indexOf(v.group);h[A]||(h[A]=[]),h[A].push(o.seriesNames[k])}),o.seriesGroups=h;for(var p=function(){for(var v=0;v<c.length;v++)if(typeof c[v]=="string"){if(!r.isValidDate(c[v]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");t.twoDSeriesX.push(r.parseDate(c[v]))}else t.twoDSeriesX.push(c[v])},g=0;g<e.length;g++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],e[g].data===void 0)return void console.error("It is a possibility that you may have not included 'data' property in series.");if(n.chart.type!=="rangeBar"&&n.chart.type!=="rangeArea"&&e[g].type!=="rangeBar"&&e[g].type!=="rangeArea"||(o.isRangeData=!0,n.chart.type!=="rangeBar"&&n.chart.type!=="rangeArea"||this.handleRangeData(e,g)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(e,g):this.isFormatXY()&&this.handleFormatXY(e,g),n.chart.type!=="candlestick"&&e[g].type!=="candlestick"&&n.chart.type!=="boxPlot"&&e[g].type!=="boxPlot"||this.handleCandleStickBoxData(e,g),o.series.push(this.twoDSeries),o.labels.push(this.twoDSeriesX),o.seriesX.push(this.twoDSeriesX),o.seriesGoals=this.seriesGoals,g!==this.activeSeriesIndex||this.fallbackToCategory||(o.isXNumeric=!0);else{n.xaxis.type==="datetime"?(o.isXNumeric=!0,p(),o.seriesX.push(this.twoDSeriesX)):n.xaxis.type==="numeric"&&(o.isXNumeric=!0,c.length>0&&(this.twoDSeriesX=c,o.seriesX.push(this.twoDSeriesX))),o.labels.push(this.twoDSeriesX);var x=e[g].data.map(function(v){return H.parseNumber(v)});o.series.push(x)}o.seriesZ.push(this.threeDSeries),e[g].color!==void 0?o.seriesColors.push(e[g].color):o.seriesColors.push(void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(e){var t=this.w.globals,i=this.w.config;t.series=e.slice(),t.seriesNames=i.labels.slice();for(var n=0;n<t.series.length;n++)t.seriesNames[n]===void 0&&t.seriesNames.push("series-"+(n+1));return this.w}},{key:"handleExternalLabelsData",value:function(e){var t=this.w.config,i=this.w.globals;t.xaxis.categories.length>0?i.labels=t.xaxis.categories:t.labels.length>0?i.labels=t.labels.slice():this.fallbackToCategory?(i.labels=i.labels[0],i.seriesRange.length&&(i.seriesRange.map(function(n){n.forEach(function(o){i.labels.indexOf(o.x)<0&&o.x&&i.labels.push(o.x)})}),i.labels=Array.from(new Set(i.labels.map(JSON.stringify)),JSON.parse)),t.xaxis.convertedCatToNumeric&&(new Yt(t).convertCatToNumericXaxis(t,this.ctx,i.seriesX[0]),this._generateExternalLabels(e))):this._generateExternalLabels(e)}},{key:"_generateExternalLabels",value:function(e){var t=this.w.globals,i=this.w.config,n=[];if(t.axisCharts){if(t.series.length>0)if(this.isFormatXY())for(var o=i.series.map(function(g,x){return g.data.filter(function(v,k,A){return A.findIndex(function(S){return S.x===v.x})===k})}),r=o.reduce(function(g,x,v,k){return k[g].length>x.length?g:v},0),c=0;c<o[r].length;c++)n.push(c+1);else for(var h=0;h<t.series[t.maxValsInArrayIndex].length;h++)n.push(h+1);t.seriesX=[];for(var u=0;u<e.length;u++)t.seriesX.push(n);this.w.globals.isBarHorizontal||(t.isXNumeric=!0)}if(n.length===0){n=t.axisCharts?[]:t.series.map(function(g,x){return x+1});for(var p=0;p<e.length;p++)t.seriesX.push(n)}t.labels=n,i.xaxis.convertedCatToNumeric&&(t.categoryLabels=n.map(function(g){return i.xaxis.labels.formatter(g)})),t.noLabelsProvided=!0}},{key:"parseData",value:function(e){var t=this.w,i=t.config,n=t.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),n.axisCharts?(this.parseDataAxisCharts(e),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(e),i.chart.stacked){var o=new it(this.ctx);n.series=o.setNullSeriesToZeroValues(n.series)}this.coreUtils.getSeriesTotals(),n.axisCharts&&(n.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals(),n.stackedSeriesTotalsByGroups=this.coreUtils.getStackedSeriesTotalsByGroups()),this.coreUtils.getPercentSeries(),n.dataFormatXNumeric||n.isXNumeric&&(i.xaxis.type!=="numeric"||i.labels.length!==0||i.xaxis.categories.length!==0)||this.handleExternalLabelsData(e);for(var r=this.coreUtils.getCategoryLabels(n.labels),c=0;c<r.length;c++)if(Array.isArray(r[c])){n.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var e=this.w,t=[];e.globals.seriesYAxisMap.forEach(function(i,n){var o=0;i.forEach(function(r){e.globals.collapsedSeriesIndices.indexOf(r)!==-1&&o++}),o>0&&o==i.length&&t.push(n)}),e.globals.ignoreYAxisIndexes=t.map(function(i){return i})}}]),E}(),Lt=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w}return y(E,[{key:"scaleSvgNode",value:function(e,t){var i=parseFloat(e.getAttributeNS(null,"width")),n=parseFloat(e.getAttributeNS(null,"height"));e.setAttributeNS(null,"width",i*t),e.setAttributeNS(null,"height",n*t),e.setAttributeNS(null,"viewBox","0 0 "+i+" "+n)}},{key:"getSvgString",value:function(){var e=this;return new Promise(function(t){var i=e.w,n=i.config.chart.toolbar.export.width,o=i.config.chart.toolbar.export.scale||n/i.globals.svgWidth;o||(o=1);var r=e.w.globals.dom.Paper.svg(),c=e.w.globals.dom.Paper.node.cloneNode(!0);o!==1&&e.scaleSvgNode(c,o),e.convertImagesToBase64(c).then(function(){r=new XMLSerializer().serializeToString(c),t(r.replace(/&nbsp;/g,"&#160;"))})})}},{key:"convertImagesToBase64",value:function(e){var t=this,i=e.getElementsByTagName("image"),n=Array.from(i).map(function(o){var r=o.getAttributeNS("http://www.w3.org/1999/xlink","href");return r&&!r.startsWith("data:")?t.getBase64FromUrl(r).then(function(c){o.setAttributeNS("http://www.w3.org/1999/xlink","href",c)}).catch(function(c){console.error("Error converting image to base64:",c)}):Promise.resolve()});return Promise.all(n)}},{key:"getBase64FromUrl",value:function(e){return new Promise(function(t,i){var n=new Image;n.crossOrigin="Anonymous",n.onload=function(){var o=document.createElement("canvas");o.width=n.width,o.height=n.height,o.getContext("2d").drawImage(n,0,0),t(o.toDataURL())},n.onerror=i,n.src=e})}},{key:"cleanup",value:function(){var e=this.w,t=e.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),i=e.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(n,function(o){o.setAttribute("width",0)}),t&&t[0]&&(t[0].setAttribute("x",-500),t[0].setAttribute("x1",-500),t[0].setAttribute("x2",-500)),i&&i[0]&&(i[0].setAttribute("y",-100),i[0].setAttribute("y1",-100),i[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){var e=this;return new Promise(function(t){e.cleanup(),e.getSvgString().then(function(i){var n=new Blob([i],{type:"image/svg+xml;charset=utf-8"});t(URL.createObjectURL(n))})})}},{key:"dataURI",value:function(e){var t=this;return new Promise(function(i){var n=t.w,o=e?e.scale||e.width/n.globals.svgWidth:1;t.cleanup();var r=document.createElement("canvas");r.width=n.globals.svgWidth*o,r.height=parseInt(n.globals.dom.elWrap.style.height,10)*o;var c=n.config.chart.background!=="transparent"&&n.config.chart.background?n.config.chart.background:"#fff",h=r.getContext("2d");h.fillStyle=c,h.fillRect(0,0,r.width*o,r.height*o),t.getSvgString().then(function(u){var p="data:image/svg+xml,"+encodeURIComponent(u),g=new Image;g.crossOrigin="anonymous",g.onload=function(){if(h.drawImage(g,0,0),r.msToBlob){var x=r.msToBlob();i({blob:x})}else{var v=r.toDataURL("image/png");i({imgURI:v})}},g.src=p})})}},{key:"exportToSVG",value:function(){var e=this;this.svgUrl().then(function(t){e.triggerDownload(t,e.w.config.chart.toolbar.export.svg.filename,".svg")})}},{key:"exportToPng",value:function(){var e=this,t=this.w.config.chart.toolbar.export.scale,i=this.w.config.chart.toolbar.export.width,n=t?{scale:t}:i?{width:i}:void 0;this.dataURI(n).then(function(o){var r=o.imgURI,c=o.blob;c?navigator.msSaveOrOpenBlob(c,e.w.globals.chartID+".png"):e.triggerDownload(r,e.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(e){var t=this,i=e.series,n=e.fileName,o=e.columnDelimiter,r=o===void 0?",":o,c=e.lineDelimiter,h=c===void 0?`
`:c,u=this.w;i||(i=u.config.series);var p,g,x=[],v=[],k="",A=u.globals.series.map(function(P,_){return u.globals.collapsedSeriesIndices.indexOf(_)===-1?P:[]}),S=function(P){return typeof u.config.chart.toolbar.export.csv.categoryFormatter=="function"?u.config.chart.toolbar.export.csv.categoryFormatter(P):u.config.xaxis.type==="datetime"&&String(P).length>=10?new Date(P).toDateString():H.isNumber(P)?P:P.split(r).join("")},M=function(P){return typeof u.config.chart.toolbar.export.csv.valueFormatter=="function"?u.config.chart.toolbar.export.csv.valueFormatter(P):P},L=Math.max.apply(Math,ie(i.map(function(P){return P.data?P.data.length:0}))),d=new ri(this.ctx),b=new dt(this.ctx),C=function(P){var _="";if(u.globals.axisCharts){if(u.config.xaxis.type==="category"||u.config.xaxis.convertedCatToNumeric)if(u.globals.isBarHorizontal){var N=u.globals.yLabelFormatters[0],Y=new it(t.ctx).getActiveConfigSeriesIndex();_=N(u.globals.labels[P],{seriesIndex:Y,dataPointIndex:P,w:u})}else _=b.getLabel(u.globals.labels,u.globals.timescaleLabels,0,P).text;u.config.xaxis.type==="datetime"&&(u.config.xaxis.categories.length?_=u.config.xaxis.categories[P]:u.config.labels.length&&(_=u.config.labels[P]))}else _=u.config.labels[P];return _===null?"nullvalue":(Array.isArray(_)&&(_=_.join(" ")),H.isNumber(_)?_:_.split(r).join(""))},I=function(P,_){if(x.length&&_===0&&v.push(x.join(r)),P.data){P.data=P.data.length&&P.data||ie(Array(L)).map(function(){return""});for(var N=0;N<P.data.length;N++){x=[];var Y=C(N);if(Y!=="nullvalue"){if(Y||(d.isFormatXY()?Y=i[_].data[N].x:d.isFormat2DArray()&&(Y=i[_].data[N]?i[_].data[N][0]:"")),_===0){x.push(S(Y));for(var G=0;G<u.globals.series.length;G++){var J,Z=d.isFormatXY()?(J=i[G].data[N])===null||J===void 0?void 0:J.y:A[G][N];x.push(M(Z))}}(u.config.chart.type==="candlestick"||P.type&&P.type==="candlestick")&&(x.pop(),x.push(u.globals.seriesCandleO[_][N]),x.push(u.globals.seriesCandleH[_][N]),x.push(u.globals.seriesCandleL[_][N]),x.push(u.globals.seriesCandleC[_][N])),(u.config.chart.type==="boxPlot"||P.type&&P.type==="boxPlot")&&(x.pop(),x.push(u.globals.seriesCandleO[_][N]),x.push(u.globals.seriesCandleH[_][N]),x.push(u.globals.seriesCandleM[_][N]),x.push(u.globals.seriesCandleL[_][N]),x.push(u.globals.seriesCandleC[_][N])),u.config.chart.type==="rangeBar"&&(x.pop(),x.push(u.globals.seriesRangeStart[_][N]),x.push(u.globals.seriesRangeEnd[_][N])),x.length&&v.push(x.join(r))}}}};x.push(u.config.chart.toolbar.export.csv.headerCategory),u.config.chart.type==="boxPlot"?(x.push("minimum"),x.push("q1"),x.push("median"),x.push("q3"),x.push("maximum")):u.config.chart.type==="candlestick"?(x.push("open"),x.push("high"),x.push("low"),x.push("close")):u.config.chart.type==="rangeBar"?(x.push("minimum"),x.push("maximum")):i.map(function(P,_){var N=(P.name?P.name:"series-".concat(_))+"";u.globals.axisCharts&&x.push(N.split(r).join("")?N.split(r).join(""):"series-".concat(_))}),u.globals.axisCharts||(x.push(u.config.chart.toolbar.export.csv.headerValue),v.push(x.join(r))),u.globals.allSeriesHasEqualX||!u.globals.axisCharts||u.config.xaxis.categories.length||u.config.labels.length?i.map(function(P,_){u.globals.axisCharts?I(P,_):((x=[]).push(S(u.globals.labels[_])),x.push(M(A[_])),v.push(x.join(r)))}):(p=new Set,g={},i.forEach(function(P,_){P==null||P.data.forEach(function(N){var Y,G;if(d.isFormatXY())Y=N.x,G=N.y;else{if(!d.isFormat2DArray())return;Y=N[0],G=N[1]}g[Y]||(g[Y]=Array(i.length).fill("")),g[Y][_]=M(G),p.add(Y)})}),x.length&&v.push(x.join(r)),Array.from(p).sort().forEach(function(P){v.push([S(P),g[P].join(r)])})),k+=v.join(h),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\uFEFF"+k),n||u.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(e,t,i){var n=document.createElement("a");n.href=e,n.download=(t||this.w.globals.chartID)+i,document.body.appendChild(n),n.click(),document.body.removeChild(n)}}]),E}(),Bt=function(){function E(e,t){m(this,E),this.ctx=e,this.elgrid=t,this.w=e.w;var i=this.w;this.axesUtils=new dt(e),this.xaxisLabels=i.globals.labels.slice(),i.globals.timescaleLabels.length>0&&!i.globals.isBarHorizontal&&(this.xaxisLabels=i.globals.timescaleLabels.slice()),i.config.xaxis.overwriteCategories&&(this.xaxisLabels=i.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],i.config.xaxis.position==="top"?this.offY=0:this.offY=i.globals.gridHeight,this.offY=this.offY+i.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal=i.config.chart.type==="bar"&&i.config.plotOptions.bar.horizontal,this.xaxisFontSize=i.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=i.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=i.config.xaxis.labels.style.colors,this.xaxisBorderWidth=i.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=i.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth.indexOf("%")>-1?this.xaxisBorderWidth=i.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:this.xaxisBorderWidth=parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=i.config.xaxis.axisBorder.height,this.yaxis=i.config.yaxis[0]}return y(E,[{key:"drawXaxis",value:function(){var e=this.w,t=new V(this.ctx),i=t.group({class:"apexcharts-xaxis",transform:"translate(".concat(e.config.xaxis.offsetX,", ").concat(e.config.xaxis.offsetY,")")}),n=t.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(e.globals.translateXAxisX,", ").concat(e.globals.translateXAxisY,")")});i.add(n);for(var o=[],r=0;r<this.xaxisLabels.length;r++)o.push(this.xaxisLabels[r]);if(this.drawXAxisLabelAndGroup(!0,t,n,o,e.globals.isXNumeric,function(k,A){return A}),e.globals.hasXaxisGroups){var c=e.globals.groups;o=[];for(var h=0;h<c.length;h++)o.push(c[h].title);var u={};e.config.xaxis.group.style&&(u.xaxisFontSize=e.config.xaxis.group.style.fontSize,u.xaxisFontFamily=e.config.xaxis.group.style.fontFamily,u.xaxisForeColors=e.config.xaxis.group.style.colors,u.fontWeight=e.config.xaxis.group.style.fontWeight,u.cssClass=e.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,t,n,o,!1,function(k,A){return c[k].cols*A},u)}if(e.config.xaxis.title.text!==void 0){var p=t.group({class:"apexcharts-xaxis-title"}),g=t.drawText({x:e.globals.gridWidth/2+e.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+(e.config.xaxis.position==="bottom"?e.globals.xAxisLabelsHeight:-e.globals.xAxisLabelsHeight-10)+e.config.xaxis.title.offsetY,text:e.config.xaxis.title.text,textAnchor:"middle",fontSize:e.config.xaxis.title.style.fontSize,fontFamily:e.config.xaxis.title.style.fontFamily,fontWeight:e.config.xaxis.title.style.fontWeight,foreColor:e.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+e.config.xaxis.title.style.cssClass});p.add(g),i.add(p)}if(e.config.xaxis.axisBorder.show){var x=e.globals.barPadForNumericAxis,v=t.drawLine(e.globals.padHorizontal+e.config.xaxis.axisBorder.offsetX-x,this.offY,this.xaxisBorderWidth+x,this.offY,e.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders&&e.config.grid.show?this.elgrid.elGridBorders.add(v):i.add(v)}return i}},{key:"drawXAxisLabelAndGroup",value:function(e,t,i,n,o,r){var c,h=this,u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:{},p=[],g=[],x=this.w,v=u.xaxisFontSize||this.xaxisFontSize,k=u.xaxisFontFamily||this.xaxisFontFamily,A=u.xaxisForeColors||this.xaxisForeColors,S=u.fontWeight||x.config.xaxis.labels.style.fontWeight,M=u.cssClass||x.config.xaxis.labels.style.cssClass,L=x.globals.padHorizontal,d=n.length,b=x.config.xaxis.type==="category"?x.globals.dataPoints:d;if(b===0&&d>b&&(b=d),o){var C=b>1?b-1:b;c=x.globals.gridWidth/Math.min(C,d-1),L=L+r(0,c)/2+x.config.xaxis.labels.offsetX}else c=x.globals.gridWidth/b,L=L+r(0,c)+x.config.xaxis.labels.offsetX;for(var I=function(_){var N=L-r(_,c)/2+x.config.xaxis.labels.offsetX;_===0&&d===1&&c/2===L&&b===1&&(N=x.globals.gridWidth/2);var Y=h.axesUtils.getLabel(n,x.globals.timescaleLabels,N,_,p,v,e),G=28;if(x.globals.rotateXLabels&&e&&(G=22),x.config.xaxis.title.text&&x.config.xaxis.position==="top"&&(G+=parseFloat(x.config.xaxis.title.style.fontSize)+2),e||(G=G+parseFloat(v)+(x.globals.xAxisLabelsHeight-x.globals.xAxisGroupLabelsHeight)+(x.globals.rotateXLabels?10:0)),Y=x.config.xaxis.tickAmount!==void 0&&x.config.xaxis.tickAmount!=="dataPoints"&&x.config.xaxis.type!=="datetime"?h.axesUtils.checkLabelBasedOnTickamount(_,Y,d):h.axesUtils.checkForOverflowingLabels(_,Y,d,p,g),x.config.xaxis.labels.show){var J=t.drawText({x:Y.x,y:h.offY+x.config.xaxis.labels.offsetY+G-(x.config.xaxis.position==="top"?x.globals.xAxisHeight+x.config.xaxis.axisTicks.height-2:0),text:Y.text,textAnchor:"middle",fontWeight:Y.isBold?600:S,fontSize:v,fontFamily:k,foreColor:Array.isArray(A)?e&&x.config.xaxis.convertedCatToNumeric?A[x.globals.minX+_-1]:A[_]:A,isPlainText:!1,cssClass:(e?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+M});if(i.add(J),J.on("click",function(Q){if(typeof x.config.chart.events.xAxisLabelClick=="function"){var se=Object.assign({},x,{labelIndex:_});x.config.chart.events.xAxisLabelClick(Q,h.ctx,se)}}),e){var Z=document.createElementNS(x.globals.SVGNS,"title");Z.textContent=Array.isArray(Y.text)?Y.text.join(" "):Y.text,J.node.appendChild(Z),Y.text!==""&&(p.push(Y.text),g.push(Y))}}_<d-1&&(L+=r(_+1,c))},P=0;P<=d-1;P++)I(P)}},{key:"drawXaxisInversed",value:function(e){var t,i,n=this,o=this.w,r=new V(this.ctx),c=o.config.yaxis[0].opposite?o.globals.translateYAxisX[e]:0,h=r.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:e}),u=r.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+c+", 0)"});h.add(u);var p=[];if(o.config.yaxis[e].show)for(var g=0;g<this.xaxisLabels.length;g++)p.push(this.xaxisLabels[g]);t=o.globals.gridHeight/p.length,i=-t/2.2;var x=o.globals.yLabelFormatters[0],v=o.config.yaxis[0].labels;if(v.show)for(var k=function(C){var I=p[C]===void 0?"":p[C];I=x(I,{seriesIndex:e,dataPointIndex:C,w:o});var P=n.axesUtils.getYAxisForeColor(v.style.colors,e),_=0;Array.isArray(I)&&(_=I.length/2*parseInt(v.style.fontSize,10));var N=v.offsetX-15,Y="end";n.yaxis.opposite&&(Y="start"),o.config.yaxis[0].labels.align==="left"?(N=v.offsetX,Y="start"):o.config.yaxis[0].labels.align==="center"?(N=v.offsetX,Y="middle"):o.config.yaxis[0].labels.align==="right"&&(Y="end");var G=r.drawText({x:N,y:i+t+v.offsetY-_,text:I,textAnchor:Y,foreColor:Array.isArray(P)?P[C]:P,fontSize:v.style.fontSize,fontFamily:v.style.fontFamily,fontWeight:v.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+v.style.cssClass,maxWidth:v.maxWidth});u.add(G),G.on("click",function(Q){if(typeof o.config.chart.events.xAxisLabelClick=="function"){var se=Object.assign({},o,{labelIndex:C});o.config.chart.events.xAxisLabelClick(Q,n.ctx,se)}});var J=document.createElementNS(o.globals.SVGNS,"title");if(J.textContent=Array.isArray(I)?I.join(" "):I,G.node.appendChild(J),o.config.yaxis[e].labels.rotate!==0){var Z=r.rotateAroundCenter(G.node);G.node.setAttribute("transform","rotate(".concat(o.config.yaxis[e].labels.rotate," 0 ").concat(Z.y,")"))}i+=t},A=0;A<=p.length-1;A++)k(A);if(o.config.yaxis[0].title.text!==void 0){var S=r.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+c+", 0)"}),M=r.drawText({x:o.config.yaxis[0].title.offsetX,y:o.globals.gridHeight/2+o.config.yaxis[0].title.offsetY,text:o.config.yaxis[0].title.text,textAnchor:"middle",foreColor:o.config.yaxis[0].title.style.color,fontSize:o.config.yaxis[0].title.style.fontSize,fontWeight:o.config.yaxis[0].title.style.fontWeight,fontFamily:o.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+o.config.yaxis[0].title.style.cssClass});S.add(M),h.add(S)}var L=0;this.isCategoryBarHorizontal&&o.config.yaxis[0].opposite&&(L=o.globals.gridWidth);var d=o.config.xaxis.axisBorder;if(d.show){var b=r.drawLine(o.globals.padHorizontal+d.offsetX+L,1+d.offsetY,o.globals.padHorizontal+d.offsetX+L,o.globals.gridHeight+d.offsetY,d.color,0);this.elgrid&&this.elgrid.elGridBorders&&o.config.grid.show?this.elgrid.elGridBorders.add(b):h.add(b)}return o.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(L,p.length,o.config.yaxis[0].axisBorder,o.config.yaxis[0].axisTicks,0,t,h),h}},{key:"drawXaxisTicks",value:function(e,t,i){var n=this.w,o=e;if(!(e<0||e-2>n.globals.gridWidth)){var r=this.offY+n.config.xaxis.axisTicks.offsetY;if(t=t+r+n.config.xaxis.axisTicks.height,n.config.xaxis.position==="top"&&(t=r-n.config.xaxis.axisTicks.height),n.config.xaxis.axisTicks.show){var c=new V(this.ctx).drawLine(e+n.config.xaxis.axisTicks.offsetX,r+n.config.xaxis.offsetY,o+n.config.xaxis.axisTicks.offsetX,t+n.config.xaxis.offsetY,n.config.xaxis.axisTicks.color);i.add(c),c.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var e=this.w,t=[],i=this.xaxisLabels.length,n=e.globals.padHorizontal;if(e.globals.timescaleLabels.length>0)for(var o=0;o<i;o++)n=this.xaxisLabels[o].position,t.push(n);else for(var r=i,c=0;c<r;c++){var h=r;e.globals.isXNumeric&&e.config.chart.type!=="bar"&&(h-=1),n+=e.globals.gridWidth/h,t.push(n)}return t}},{key:"xAxisLabelCorrections",value:function(){var e=this.w,t=new V(this.ctx),i=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),o=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(e.globals.rotateXLabels||e.config.xaxis.labels.rotateAlways)for(var c=0;c<n.length;c++){var h=t.rotateAroundCenter(n[c]);h.y=h.y-1,h.x=h.x+1,n[c].setAttribute("transform","rotate(".concat(e.config.xaxis.labels.rotate," ").concat(h.x," ").concat(h.y,")")),n[c].setAttribute("text-anchor","end"),i.setAttribute("transform","translate(0, ".concat(-10,")"));var u=n[c].childNodes;e.config.xaxis.labels.trim&&Array.prototype.forEach.call(u,function(v){t.placeTextWithEllipsis(v,v.textContent,e.globals.xAxisLabelsHeight-(e.config.legend.position==="bottom"?20:10))})}else(function(){for(var v=e.globals.gridWidth/(e.globals.labels.length+1),k=0;k<n.length;k++){var A=n[k].childNodes;e.config.xaxis.labels.trim&&e.config.xaxis.type!=="datetime"&&Array.prototype.forEach.call(A,function(S){t.placeTextWithEllipsis(S,S.textContent,v)})}})();if(o.length>0){var p=o[o.length-1].getBBox(),g=o[0].getBBox();p.x<-20&&o[o.length-1].parentNode.removeChild(o[o.length-1]),g.x+g.width>e.globals.gridWidth&&!e.globals.isBarHorizontal&&o[0].parentNode.removeChild(o[0]);for(var x=0;x<r.length;x++)t.placeTextWithEllipsis(r[x],r[x].textContent,e.config.yaxis[0].labels.maxWidth-(e.config.yaxis[0].title.text?2*parseFloat(e.config.yaxis[0].title.style.fontSize):0)-15)}}}]),E}(),na=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w;var t=this.w;this.xaxisLabels=t.globals.labels.slice(),this.axesUtils=new dt(e),this.isRangeBar=t.globals.seriesRange.length&&t.globals.isBarHorizontal,t.globals.timescaleLabels.length>0&&(this.xaxisLabels=t.globals.timescaleLabels.slice())}return y(E,[{key:"drawGridArea",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=this.w,i=new V(this.ctx);e||(e=i.group({class:"apexcharts-grid"}));var n=i.drawLine(t.globals.padHorizontal,1,t.globals.padHorizontal,t.globals.gridHeight,"transparent"),o=i.drawLine(t.globals.padHorizontal,t.globals.gridHeight,t.globals.gridWidth,t.globals.gridHeight,"transparent");return e.add(o),e.add(n),e}},{key:"drawGrid",value:function(){if(this.w.globals.axisCharts){var e=this.renderGrid();return this.drawGridArea(e.el),e}return null}},{key:"createGridMask",value:function(){var e=this.w,t=e.globals,i=new V(this.ctx),n=Array.isArray(e.config.stroke.width)?Math.max.apply(Math,ie(e.config.stroke.width)):e.config.stroke.width,o=function(p){var g=document.createElementNS(t.SVGNS,"clipPath");return g.setAttribute("id",p),g};t.dom.elGridRectMask=o("gridRectMask".concat(t.cuid)),t.dom.elGridRectBarMask=o("gridRectBarMask".concat(t.cuid)),t.dom.elGridRectMarkerMask=o("gridRectMarkerMask".concat(t.cuid)),t.dom.elForecastMask=o("forecastMask".concat(t.cuid)),t.dom.elNonForecastMask=o("nonForecastMask".concat(t.cuid));var r=0,c=0;(["bar","rangeBar","candlestick","boxPlot"].includes(e.config.chart.type)||e.globals.comboBarCount>0)&&e.globals.isXNumeric&&!e.globals.isBarHorizontal&&(r=Math.max(e.config.grid.padding.left,t.barPadForNumericAxis),c=Math.max(e.config.grid.padding.right,t.barPadForNumericAxis)),t.dom.elGridRect=i.drawRect(0,0,t.gridWidth,t.gridHeight,0,"#fff"),t.dom.elGridRectBar=i.drawRect(-n/2-r-2,-n/2-2,t.gridWidth+n+c+r+4,t.gridHeight+n+4,0,"#fff");var h=e.globals.markers.largestSize;t.dom.elGridRectMarker=i.drawRect(-h,-h,t.gridWidth+2*h,t.gridHeight+2*h,0,"#fff"),t.dom.elGridRectMask.appendChild(t.dom.elGridRect.node),t.dom.elGridRectBarMask.appendChild(t.dom.elGridRectBar.node),t.dom.elGridRectMarkerMask.appendChild(t.dom.elGridRectMarker.node);var u=t.dom.baseEl.querySelector("defs");u.appendChild(t.dom.elGridRectMask),u.appendChild(t.dom.elGridRectBarMask),u.appendChild(t.dom.elGridRectMarkerMask),u.appendChild(t.dom.elForecastMask),u.appendChild(t.dom.elNonForecastMask)}},{key:"_drawGridLines",value:function(e){var t=e.i,i=e.x1,n=e.y1,o=e.x2,r=e.y2,c=e.xCount,h=e.parent,u=this.w;if(!(t===0&&u.globals.skipFirstTimelinelabel||t===c-1&&u.globals.skipLastTimelinelabel&&!u.config.xaxis.labels.formatter||u.config.chart.type==="radar")){u.config.grid.xaxis.lines.show&&this._drawGridLine({i:t,x1:i,y1:n,x2:o,y2:r,xCount:c,parent:h});var p=0;if(u.globals.hasXaxisGroups&&u.config.xaxis.tickPlacement==="between"){var g=u.globals.groups;if(g){for(var x=0,v=0;x<t&&v<g.length;v++)x+=g[v].cols;x===t&&(p=.6*u.globals.xAxisLabelsHeight)}}new Bt(this.ctx).drawXaxisTicks(i,p,u.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(e){var t=e.i,i=e.x1,n=e.y1,o=e.x2,r=e.y2,c=e.xCount,h=e.parent,u=this.w,p=h.node.classList.contains("apexcharts-gridlines-horizontal"),g=u.globals.barPadForNumericAxis,x=n===0&&r===0||i===0&&o===0||n===u.globals.gridHeight&&r===u.globals.gridHeight||u.globals.isBarHorizontal&&(t===0||t===c-1),v=new V(this).drawLine(i-(p?g:0),n,o+(p?g:0),r,u.config.grid.borderColor,u.config.grid.strokeDashArray);v.node.classList.add("apexcharts-gridline"),x&&u.config.grid.show?this.elGridBorders.add(v):h.add(v)}},{key:"_drawGridBandRect",value:function(e){var t=e.c,i=e.x1,n=e.y1,o=e.x2,r=e.y2,c=e.type,h=this.w,u=new V(this.ctx),p=h.globals.barPadForNumericAxis,g=h.config.grid[c].colors[t],x=u.drawRect(i-(c==="row"?p:0),n,o+(c==="row"?2*p:0),r,0,g,h.config.grid[c].opacity);this.elg.add(x),x.attr("clip-path","url(#gridRectMask".concat(h.globals.cuid,")")),x.node.classList.add("apexcharts-grid-".concat(c))}},{key:"_drawXYLines",value:function(e){var t=this,i=e.xCount,n=e.tickAmount,o=this.w;if(o.config.grid.xaxis.lines.show||o.config.xaxis.axisTicks.show){var r,c=o.globals.padHorizontal,h=o.globals.gridHeight;o.globals.timescaleLabels.length?function(k){for(var A=k.xC,S=k.x1,M=k.y1,L=k.x2,d=k.y2,b=0;b<A;b++)S=t.xaxisLabels[b].position,L=t.xaxisLabels[b].position,t._drawGridLines({i:b,x1:S,y1:M,x2:L,y2:d,xCount:i,parent:t.elgridLinesV})}({xC:i,x1:c,y1:0,x2:r,y2:h}):(o.globals.isXNumeric&&(i=o.globals.xAxisScale.result.length),function(k){for(var A=k.xC,S=k.x1,M=k.y1,L=k.x2,d=k.y2,b=0;b<A+(o.globals.isXNumeric?0:1);b++)b===0&&A===1&&o.globals.dataPoints===1&&(L=S=o.globals.gridWidth/2),t._drawGridLines({i:b,x1:S,y1:M,x2:L,y2:d,xCount:i,parent:t.elgridLinesV}),L=S+=o.globals.gridWidth/(o.globals.isXNumeric?A-1:A)}({xC:i,x1:c,y1:0,x2:r,y2:h}))}if(o.config.grid.yaxis.lines.show){var u=0,p=0,g=o.globals.gridWidth,x=n+1;this.isRangeBar&&(x=o.globals.labels.length);for(var v=0;v<x+(this.isRangeBar?1:0);v++)this._drawGridLine({i:v,xCount:x+(this.isRangeBar?1:0),x1:0,y1:u,x2:g,y2:p,parent:this.elgridLinesH}),p=u+=o.globals.gridHeight/(this.isRangeBar?x:n)}}},{key:"_drawInvertedXYLines",value:function(e){var t=e.xCount,i=this.w;if(i.config.grid.xaxis.lines.show||i.config.xaxis.axisTicks.show)for(var n,o=i.globals.padHorizontal,r=i.globals.gridHeight,c=0;c<t+1;c++)i.config.grid.xaxis.lines.show&&this._drawGridLine({i:c,xCount:t+1,x1:o,y1:0,x2:n,y2:r,parent:this.elgridLinesV}),new Bt(this.ctx).drawXaxisTicks(o,0,i.globals.dom.elGraphical),n=o+=i.globals.gridWidth/t;if(i.config.grid.yaxis.lines.show)for(var h=0,u=0,p=i.globals.gridWidth,g=0;g<i.globals.dataPoints+1;g++)this._drawGridLine({i:g,xCount:i.globals.dataPoints+1,x1:0,y1:h,x2:p,y2:u,parent:this.elgridLinesH}),u=h+=i.globals.gridHeight/i.globals.dataPoints}},{key:"renderGrid",value:function(){var e=this.w,t=e.globals,i=new V(this.ctx);this.elg=i.group({class:"apexcharts-grid"}),this.elgridLinesH=i.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=i.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=i.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),e.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var n=0;n<t.seriesYAxisMap.length&&t.ignoreYAxisIndexes.includes(n);)n++;n===t.seriesYAxisMap.length&&(n=0);var o,r=t.yAxisScale[n].result.length-1;if(!t.isBarHorizontal||this.isRangeBar){var c,h,u;o=this.xaxisLabels.length,this.isRangeBar&&(r=t.labels.length,e.config.xaxis.tickAmount&&e.config.xaxis.labels.formatter&&(o=e.config.xaxis.tickAmount),((c=t.yAxisScale)===null||c===void 0||(h=c[n])===null||h===void 0||(u=h.result)===null||u===void 0?void 0:u.length)>0&&e.config.xaxis.type!=="datetime"&&(o=t.yAxisScale[n].result.length-1)),this._drawXYLines({xCount:o,tickAmount:r})}else o=r,r=t.xTickAmount,this._drawInvertedXYLines({xCount:o,tickAmount:r});return this.drawGridBands(o,r),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:t.gridWidth/o}}},{key:"drawGridBands",value:function(e,t){var i,n,o=this,r=this.w;if(((i=r.config.grid.row.colors)===null||i===void 0?void 0:i.length)>0&&function(k,A,S,M,L,d){for(var b=0,C=0;b<A;b++,C++)C>=r.config.grid[k].colors.length&&(C=0),o._drawGridBandRect({c:C,x1:S,y1:M,x2:L,y2:d,type:k}),M+=r.globals.gridHeight/t}("row",t,0,0,r.globals.gridWidth,r.globals.gridHeight/t),((n=r.config.grid.column.colors)===null||n===void 0?void 0:n.length)>0){var c=r.globals.isBarHorizontal||r.config.xaxis.tickPlacement!=="on"||r.config.xaxis.type!=="category"&&!r.config.xaxis.convertedCatToNumeric?e:e-1;r.globals.isXNumeric&&(c=r.globals.xAxisScale.result.length-1);for(var h=r.globals.padHorizontal,u=r.globals.padHorizontal+r.globals.gridWidth/c,p=r.globals.gridHeight,g=0,x=0;g<e;g++,x++){var v;x>=r.config.grid.column.colors.length&&(x=0),r.config.xaxis.type==="datetime"&&(h=this.xaxisLabels[g].position,u=(((v=this.xaxisLabels[g+1])===null||v===void 0?void 0:v.position)||r.globals.gridWidth)-this.xaxisLabels[g].position),this._drawGridBandRect({c:x,x1:h,y1:0,x2:u,y2:p,type:"column"}),h+=r.globals.gridWidth/c}}}}]),E}(),Ei=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w,this.coreUtils=new he(this.ctx)}return y(E,[{key:"niceScale",value:function(e,t){var i,n,o,r,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,h=1e-11,u=this.w,p=u.globals;p.isBarHorizontal?(i=u.config.xaxis,n=Math.max((p.svgWidth-100)/25,2)):(i=u.config.yaxis[c],n=Math.max((p.svgHeight-100)/15,2)),H.isNumber(n)||(n=10),o=i.min!==void 0&&i.min!==null,r=i.max!==void 0&&i.min!==null;var g=i.stepSize!==void 0&&i.stepSize!==null,x=i.tickAmount!==void 0&&i.tickAmount!==null,v=x?i.tickAmount:p.niceScaleDefaultTicks[Math.min(Math.round(n/2),p.niceScaleDefaultTicks.length-1)];if(p.isMultipleYAxis&&!x&&p.multiAxisTickAmount>0&&(v=p.multiAxisTickAmount,x=!0),v=v==="dataPoints"?p.dataPoints-1:Math.abs(Math.round(v)),(e===Number.MIN_VALUE&&t===0||!H.isNumber(e)&&!H.isNumber(t)||e===Number.MIN_VALUE&&t===-Number.MAX_VALUE)&&(e=H.isNumber(i.min)?i.min:0,t=H.isNumber(i.max)?i.max:e+v,p.allSeriesCollapsed=!1),e>t){console.warn("axis.min cannot be greater than axis.max: swapping min and max");var k=t;t=e,e=k}else e===t&&(e=e===0?0:e-1,t=t===0?2:t+1);var A=[];v<1&&(v=1);var S=v,M=Math.abs(t-e);!o&&e>0&&e/M<.15&&(e=0,o=!0),!r&&t<0&&-t/M<.15&&(t=0,r=!0);var L=(M=Math.abs(t-e))/S,d=L,b=Math.floor(Math.log10(d)),C=Math.pow(10,b),I=Math.ceil(d/C);if(L=d=(I=p.niceScaleAllowedMagMsd[p.yValueDecimal===0?0:1][I])*C,p.isBarHorizontal&&i.stepSize&&i.type!=="datetime"?(L=i.stepSize,g=!0):g&&(L=i.stepSize),g&&i.forceNiceScale){var P=Math.floor(Math.log10(L));L*=Math.pow(10,b-P)}if(o&&r){var _=M/S;if(x)if(g)if(H.mod(M,L)!=0){var N=H.getGCD(L,_);L=_/N<10?N:_}else H.mod(L,_)==0?L=_:(_=L,x=!1);else L=_;else if(g)H.mod(M,L)==0?_=L:L=_;else if(H.mod(M,L)==0)_=L;else{_=M/(S=Math.ceil(M/L));var Y=H.getGCD(M,L);M/Y<n&&(_=Y),L=_}S=Math.round(M/L)}else{if(o||r){if(r)if(x)e=t-L*S;else{var G=e;e=L*Math.floor(e/L),Math.abs(t-e)/H.getGCD(M,L)>n&&(e=t-L*v,e+=L*Math.floor((G-e)/L))}else if(o)if(x)t=e+L*S;else{var J=t;t=L*Math.ceil(t/L),Math.abs(t-e)/H.getGCD(M,L)>n&&(t=e+L*v,t+=L*Math.ceil((J-t)/L))}}else if(p.isMultipleYAxis&&x){var Z=L*Math.floor(e/L),Q=Z+L*S;Q<t&&(L*=2),Q=t,t=(e=Z)+L*S,M=Math.abs(t-e),e>0&&e<Math.abs(Q-t)&&(e=0,t=L*S),t<0&&-t<Math.abs(Z-e)&&(t=0,e=-L*S)}else e=L*Math.floor(e/L),t=L*Math.ceil(t/L);M=Math.abs(t-e),L=H.getGCD(M,L),S=Math.round(M/L)}if(x||o||r||(S=Math.ceil((M-h)/(L+h)))>16&&H.getPrimeFactors(S).length<2&&S++,!x&&i.forceNiceScale&&p.yValueDecimal===0&&S>M&&(S=M,L=Math.round(M/S)),S>n&&(!x&&!g||i.forceNiceScale)){var se=H.getPrimeFactors(S),ce=se.length-1,ue=S;e:for(var ge=0;ge<ce;ge++)for(var xe=0;xe<=ce-ge;xe++){for(var pe=Math.min(xe+ge,ce),Ae=ue,Fe=1,Re=xe;Re<=pe;Re++)Fe*=se[Re];if((Ae/=Fe)<n){ue=Ae;break e}}L=ue===S?M:M/ue,S=Math.round(M/L)}p.isMultipleYAxis&&p.multiAxisTickAmount==0&&p.ignoreYAxisIndexes.indexOf(c)<0&&(p.multiAxisTickAmount=S);var Ie=e-L,ot=L*h;do Ie+=L,A.push(H.stripNumber(Ie,7));while(t-Ie>ot);return{result:A,niceMin:A[0],niceMax:A[A.length-1]}}},{key:"linearScale",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0,r=Math.abs(t-e),c=[];if(e===t)return{result:c=[e],niceMin:c[0],niceMax:c[c.length-1]};(i=this._adjustTicksForSmallRange(i,n,r))==="dataPoints"&&(i=this.w.globals.dataPoints-1),o||(o=r/i),o=Math.round(10*(o+Number.EPSILON))/10,i===Number.MAX_VALUE&&(i=5,o=1);for(var h=e;i>=0;)c.push(h),h=H.preciseAddition(h,o),i-=1;return{result:c,niceMin:c[0],niceMax:c[c.length-1]}}},{key:"logarithmicScaleNice",value:function(e,t,i){t<=0&&(t=Math.max(e,i)),e<=0&&(e=Math.min(t,i));for(var n=[],o=Math.ceil(Math.log(t)/Math.log(i)+1),r=Math.floor(Math.log(e)/Math.log(i));r<o;r++)n.push(Math.pow(i,r));return{result:n,niceMin:n[0],niceMax:n[n.length-1]}}},{key:"logarithmicScale",value:function(e,t,i){t<=0&&(t=Math.max(e,i)),e<=0&&(e=Math.min(t,i));for(var n=[],o=Math.log(t)/Math.log(i),r=Math.log(e)/Math.log(i),c=o-r,h=Math.round(c),u=c/h,p=0,g=r;p<h;p++,g+=u)n.push(Math.pow(i,g));return n.push(Math.pow(i,o)),{result:n,niceMin:e,niceMax:t}}},{key:"_adjustTicksForSmallRange",value:function(e,t,i){var n=e;if(t!==void 0&&this.w.config.yaxis[t].labels.formatter&&this.w.config.yaxis[t].tickAmount===void 0){var o=Number(this.w.config.yaxis[t].labels.formatter(1));H.isNumber(o)&&this.w.globals.yValueDecimal===0&&(n=Math.ceil(i))}return n<e?n:e}},{key:"setYScaleForIndex",value:function(e,t,i){var n=this.w.globals,o=this.w.config,r=n.isBarHorizontal?o.xaxis:o.yaxis[e];n.yAxisScale[e]===void 0&&(n.yAxisScale[e]=[]);var c=Math.abs(i-t);r.logarithmic&&c<=5&&(n.invalidLogScale=!0),r.logarithmic&&c>5?(n.allSeriesCollapsed=!1,n.yAxisScale[e]=r.forceNiceScale?this.logarithmicScaleNice(t,i,r.logBase):this.logarithmicScale(t,i,r.logBase)):i!==-Number.MAX_VALUE&&H.isNumber(i)&&t!==Number.MAX_VALUE&&H.isNumber(t)?(n.allSeriesCollapsed=!1,n.yAxisScale[e]=this.niceScale(t,i,e)):n.yAxisScale[e]=this.niceScale(Number.MIN_VALUE,0,e)}},{key:"setXScale",value:function(e,t){var i=this.w,n=i.globals,o=Math.abs(t-e);if(t!==-Number.MAX_VALUE&&H.isNumber(t)){var r=n.xTickAmount+1;o<10&&o>1&&(r=o),n.xAxisScale=this.linearScale(e,t,r,0,i.config.xaxis.stepSize)}else n.xAxisScale=this.linearScale(0,10,10);return n.xAxisScale}},{key:"scaleMultipleYAxes",value:function(){var e=this,t=this.w.config,i=this.w.globals;this.coreUtils.setSeriesYAxisMappings();var n=i.seriesYAxisMap,o=i.minYArr,r=i.maxYArr;i.allSeriesCollapsed=!0,i.barGroups=[],n.forEach(function(c,h){var u=[];c.forEach(function(p){var g=t.series[p].group;u.indexOf(g)<0&&u.push(g)}),c.length>0?function(){var p,g,x=Number.MAX_VALUE,v=-Number.MAX_VALUE,k=x,A=v;if(t.chart.stacked)(function(){var L=new Array(i.dataPoints).fill(0),d=[],b=[],C=[];u.forEach(function(){d.push(L.map(function(){return Number.MIN_VALUE})),b.push(L.map(function(){return Number.MIN_VALUE})),C.push(L.map(function(){return Number.MIN_VALUE}))});for(var I=function(_){!p&&t.series[c[_]].type&&(p=t.series[c[_]].type);var N=c[_];g=t.series[N].group?t.series[N].group:"axis-".concat(h),!(i.collapsedSeriesIndices.indexOf(N)<0&&i.ancillaryCollapsedSeriesIndices.indexOf(N)<0)||(i.allSeriesCollapsed=!1,u.forEach(function(Y,G){if(t.series[N].group===Y)for(var J=0;J<i.series[N].length;J++){var Z=i.series[N][J];Z>=0?b[G][J]+=Z:C[G][J]+=Z,d[G][J]+=Z,k=Math.min(k,Z),A=Math.max(A,Z)}})),p!=="bar"&&p!=="column"||i.barGroups.push(g)},P=0;P<c.length;P++)I(P);p||(p=t.chart.type),p==="bar"||p==="column"?u.forEach(function(_,N){x=Math.min(x,Math.min.apply(null,C[N])),v=Math.max(v,Math.max.apply(null,b[N]))}):(u.forEach(function(_,N){k=Math.min(k,Math.min.apply(null,d[N])),A=Math.max(A,Math.max.apply(null,d[N]))}),x=k,v=A),x===Number.MIN_VALUE&&v===Number.MIN_VALUE&&(v=-Number.MAX_VALUE)})();else for(var S=0;S<c.length;S++){var M=c[S];x=Math.min(x,o[M]),v=Math.max(v,r[M]),!(i.collapsedSeriesIndices.indexOf(M)<0&&i.ancillaryCollapsedSeriesIndices.indexOf(M)<0)||(i.allSeriesCollapsed=!1)}t.yaxis[h].min!==void 0&&(x=typeof t.yaxis[h].min=="function"?t.yaxis[h].min(x):t.yaxis[h].min),t.yaxis[h].max!==void 0&&(v=typeof t.yaxis[h].max=="function"?t.yaxis[h].max(v):t.yaxis[h].max),i.barGroups=i.barGroups.filter(function(L,d,b){return b.indexOf(L)===d}),e.setYScaleForIndex(h,x,v),c.forEach(function(L){o[L]=i.yAxisScale[h].niceMin,r[L]=i.yAxisScale[h].niceMax})}():e.setYScaleForIndex(h,0,-Number.MAX_VALUE)})}}]),E}(),Li=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w,this.scales=new Ei(e)}return y(E,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-Number.MAX_VALUE,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=this.w.config,r=this.w.globals,c=-Number.MAX_VALUE,h=Number.MIN_VALUE;n===null&&(n=e+1);var u=r.series,p=u,g=u;o.chart.type==="candlestick"?(p=r.seriesCandleL,g=r.seriesCandleH):o.chart.type==="boxPlot"?(p=r.seriesCandleO,g=r.seriesCandleC):r.isRangeData&&(p=r.seriesRangeStart,g=r.seriesRangeEnd);var x=!1;if(r.seriesX.length>=n){var v,k=(v=r.brushSource)===null||v===void 0?void 0:v.w.config.chart.brush;(o.chart.zoom.enabled&&o.chart.zoom.autoScaleYaxis||k!=null&&k.enabled&&k!=null&&k.autoScaleYaxis)&&(x=!0)}for(var A=e;A<n;A++){r.dataPoints=Math.max(r.dataPoints,u[A].length);var S=o.series[A].type;r.categoryLabels.length&&(r.dataPoints=r.categoryLabels.filter(function(C){return C!==void 0}).length),r.labels.length&&o.xaxis.type!=="datetime"&&r.series.reduce(function(C,I){return C+I.length},0)!==0&&(r.dataPoints=Math.max(r.dataPoints,r.labels.length));var M=0,L=u[A].length-1;if(x){if(o.xaxis.min)for(;M<L&&r.seriesX[A][M]<o.xaxis.min;M++);if(o.xaxis.max)for(;L>M&&r.seriesX[A][L]>o.xaxis.max;L--);}for(var d=M;d<=L&&d<r.series[A].length;d++){var b=u[A][d];if(b!==null&&H.isNumber(b)){switch(g[A][d]!==void 0&&(c=Math.max(c,g[A][d]),t=Math.min(t,g[A][d])),p[A][d]!==void 0&&(t=Math.min(t,p[A][d]),i=Math.max(i,p[A][d])),S){case"candlestick":r.seriesCandleC[A][d]!==void 0&&(c=Math.max(c,r.seriesCandleH[A][d]),t=Math.min(t,r.seriesCandleL[A][d]));break;case"boxPlot":r.seriesCandleC[A][d]!==void 0&&(c=Math.max(c,r.seriesCandleC[A][d]),t=Math.min(t,r.seriesCandleO[A][d]))}S&&S!=="candlestick"&&S!=="boxPlot"&&S!=="rangeArea"&&S!=="rangeBar"&&(c=Math.max(c,r.series[A][d]),t=Math.min(t,r.series[A][d])),i=c,r.seriesGoals[A]&&r.seriesGoals[A][d]&&Array.isArray(r.seriesGoals[A][d])&&r.seriesGoals[A][d].forEach(function(C){h!==Number.MIN_VALUE&&(h=Math.min(h,C.value),t=h),c=Math.max(c,C.value),i=c}),H.isFloat(b)&&(b=H.noExponents(b),r.yValueDecimal=Math.max(r.yValueDecimal,b.toString().split(".")[1].length)),h>p[A][d]&&p[A][d]<0&&(h=p[A][d])}else r.hasNullValues=!0}S!=="bar"&&S!=="column"||(h<0&&c<0&&(c=0,i=Math.max(i,0)),h===Number.MIN_VALUE&&(h=0,t=Math.min(t,0)))}return o.chart.type==="rangeBar"&&r.seriesRangeStart.length&&r.isBarHorizontal&&(h=t),o.chart.type==="bar"&&(h<0&&c<0&&(c=0),h===Number.MIN_VALUE&&(h=0)),{minY:h,maxY:c,lowestY:t,highestY:i}}},{key:"setYRange",value:function(){var e=this.w.globals,t=this.w.config;e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE;var i,n=Number.MAX_VALUE;if(e.isMultipleYAxis){n=Number.MAX_VALUE;for(var o=0;o<e.series.length;o++)i=this.getMinYMaxY(o),e.minYArr[o]=i.lowestY,e.maxYArr[o]=i.highestY,n=Math.min(n,i.lowestY)}return i=this.getMinYMaxY(0,n,null,e.series.length),t.chart.type==="bar"?(e.minY=i.minY,e.maxY=i.maxY):(e.minY=i.lowestY,e.maxY=i.highestY),n=i.lowestY,t.chart.stacked&&this._setStackedMinMax(),t.chart.type==="line"||t.chart.type==="area"||t.chart.type==="scatter"||t.chart.type==="candlestick"||t.chart.type==="boxPlot"||t.chart.type==="rangeBar"&&!e.isBarHorizontal?e.minY===Number.MIN_VALUE&&n!==-Number.MAX_VALUE&&n!==e.maxY&&(e.minY=n):e.minY=e.minY!==Number.MIN_VALUE?Math.min(i.minY,e.minY):i.minY,t.yaxis.forEach(function(r,c){r.max!==void 0&&(typeof r.max=="number"?e.maxYArr[c]=r.max:typeof r.max=="function"&&(e.maxYArr[c]=r.max(e.isMultipleYAxis?e.maxYArr[c]:e.maxY)),e.maxY=e.maxYArr[c]),r.min!==void 0&&(typeof r.min=="number"?e.minYArr[c]=r.min:typeof r.min=="function"&&(e.minYArr[c]=r.min(e.isMultipleYAxis?e.minYArr[c]===Number.MIN_VALUE?0:e.minYArr[c]:e.minY)),e.minY=e.minYArr[c])}),e.isBarHorizontal&&["min","max"].forEach(function(r){t.xaxis[r]!==void 0&&typeof t.xaxis[r]=="number"&&(r==="min"?e.minY=t.xaxis[r]:e.maxY=t.xaxis[r])}),e.isMultipleYAxis?(this.scales.scaleMultipleYAxes(),e.minY=n):(this.scales.setYScaleForIndex(0,e.minY,e.maxY),e.minY=e.yAxisScale[0].niceMin,e.maxY=e.yAxisScale[0].niceMax,e.minYArr[0]=e.minY,e.maxYArr[0]=e.maxY),e.barGroups=[],e.lineGroups=[],e.areaGroups=[],t.series.forEach(function(r){switch(r.type||t.chart.type){case"bar":case"column":e.barGroups.push(r.group);break;case"line":e.lineGroups.push(r.group);break;case"area":e.areaGroups.push(r.group)}}),e.barGroups=e.barGroups.filter(function(r,c,h){return h.indexOf(r)===c}),e.lineGroups=e.lineGroups.filter(function(r,c,h){return h.indexOf(r)===c}),e.areaGroups=e.areaGroups.filter(function(r,c,h){return h.indexOf(r)===c}),{minY:e.minY,maxY:e.maxY,minYArr:e.minYArr,maxYArr:e.maxYArr,yAxisScale:e.yAxisScale}}},{key:"setXRange",value:function(){var e=this.w.globals,t=this.w.config,i=t.xaxis.type==="numeric"||t.xaxis.type==="datetime"||t.xaxis.type==="category"&&!e.noLabelsProvided||e.noLabelsProvided||e.isXNumeric;if(e.isXNumeric&&function(){for(var h=0;h<e.series.length;h++)if(e.labels[h])for(var u=0;u<e.labels[h].length;u++)e.labels[h][u]!==null&&H.isNumber(e.labels[h][u])&&(e.maxX=Math.max(e.maxX,e.labels[h][u]),e.initialMaxX=Math.max(e.maxX,e.labels[h][u]),e.minX=Math.min(e.minX,e.labels[h][u]),e.initialMinX=Math.min(e.minX,e.labels[h][u]))}(),e.noLabelsProvided&&t.xaxis.categories.length===0&&(e.maxX=e.labels[e.labels.length-1],e.initialMaxX=e.labels[e.labels.length-1],e.minX=1,e.initialMinX=1),e.isXNumeric||e.noLabelsProvided||e.dataFormatXNumeric){var n=10;if(t.xaxis.tickAmount===void 0)n=Math.round(e.svgWidth/150),t.xaxis.type==="numeric"&&e.dataPoints<30&&(n=e.dataPoints-1),n>e.dataPoints&&e.dataPoints!==0&&(n=e.dataPoints-1);else if(t.xaxis.tickAmount==="dataPoints"){if(e.series.length>1&&(n=e.series[e.maxValsInArrayIndex].length-1),e.isXNumeric){var o=e.maxX-e.minX;o<30&&(n=o-1)}}else n=t.xaxis.tickAmount;if(e.xTickAmount=n,t.xaxis.max!==void 0&&typeof t.xaxis.max=="number"&&(e.maxX=t.xaxis.max),t.xaxis.min!==void 0&&typeof t.xaxis.min=="number"&&(e.minX=t.xaxis.min),t.xaxis.range!==void 0&&(e.minX=e.maxX-t.xaxis.range),e.minX!==Number.MAX_VALUE&&e.maxX!==-Number.MAX_VALUE)if(t.xaxis.convertedCatToNumeric&&!e.dataFormatXNumeric){for(var r=[],c=e.minX-1;c<e.maxX;c++)r.push(c+1);e.xAxisScale={result:r,niceMin:r[0],niceMax:r[r.length-1]}}else e.xAxisScale=this.scales.setXScale(e.minX,e.maxX);else e.xAxisScale=this.scales.linearScale(0,n,n,0,t.xaxis.stepSize),e.noLabelsProvided&&e.labels.length>0&&(e.xAxisScale=this.scales.linearScale(1,e.labels.length,n-1,0,t.xaxis.stepSize),e.seriesX=e.labels.slice());i&&(e.labels=e.xAxisScale.result.slice())}return e.isBarHorizontal&&e.labels.length&&(e.xTickAmount=e.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:e.minX,maxX:e.maxX}}},{key:"setZRange",value:function(){var e=this.w.globals;if(e.isDataXYZ){for(var t=0;t<e.series.length;t++)if(e.seriesZ[t]!==void 0)for(var i=0;i<e.seriesZ[t].length;i++)e.seriesZ[t][i]!==null&&H.isNumber(e.seriesZ[t][i])&&(e.maxZ=Math.max(e.maxZ,e.seriesZ[t][i]),e.minZ=Math.min(e.minZ,e.seriesZ[t][i]))}}},{key:"_handleSingleDataPoint",value:function(){var e=this.w.globals,t=this.w.config;if(e.minX===e.maxX){var i=new _e(this.ctx);if(t.xaxis.type==="datetime"){var n=i.getDate(e.minX);t.xaxis.labels.datetimeUTC?n.setUTCDate(n.getUTCDate()-2):n.setDate(n.getDate()-2),e.minX=new Date(n).getTime();var o=i.getDate(e.maxX);t.xaxis.labels.datetimeUTC?o.setUTCDate(o.getUTCDate()+2):o.setDate(o.getDate()+2),e.maxX=new Date(o).getTime()}else(t.xaxis.type==="numeric"||t.xaxis.type==="category"&&!e.noLabelsProvided)&&(e.minX=e.minX-2,e.initialMinX=e.minX,e.maxX=e.maxX+2,e.initialMaxX=e.maxX)}}},{key:"_getMinXDiff",value:function(){var e=this.w.globals;e.isXNumeric&&e.seriesX.forEach(function(t,i){t.length===1&&t.push(e.seriesX[e.maxValsInArrayIndex][e.seriesX[e.maxValsInArrayIndex].length-1]);var n=t.slice();n.sort(function(o,r){return o-r}),n.forEach(function(o,r){if(r>0){var c=o-n[r-1];c>0&&(e.minXDiff=Math.min(c,e.minXDiff))}}),e.dataPoints!==1&&e.minXDiff!==Number.MAX_VALUE||(e.minXDiff=.5)})}},{key:"_setStackedMinMax",value:function(){var e=this,t=this.w.globals;if(t.series.length){var i=t.seriesGroups;i.length||(i=[this.w.globals.seriesNames.map(function(r){return r})]);var n={},o={};i.forEach(function(r){n[r]=[],o[r]=[],e.w.config.series.map(function(c,h){return r.indexOf(t.seriesNames[h])>-1?h:null}).filter(function(c){return c!==null}).forEach(function(c){for(var h=0;h<t.series[t.maxValsInArrayIndex].length;h++){var u,p,g,x;n[r][h]===void 0&&(n[r][h]=0,o[r][h]=0),(e.w.config.chart.stacked&&!t.comboCharts||e.w.config.chart.stacked&&t.comboCharts&&(!e.w.config.chart.stackOnlyBar||((u=e.w.config.series)===null||u===void 0||(p=u[c])===null||p===void 0?void 0:p.type)==="bar"||((g=e.w.config.series)===null||g===void 0||(x=g[c])===null||x===void 0?void 0:x.type)==="column"))&&t.series[c][h]!==null&&H.isNumber(t.series[c][h])&&(t.series[c][h]>0?n[r][h]+=parseFloat(t.series[c][h])+1e-4:o[r][h]+=parseFloat(t.series[c][h]))}})}),Object.entries(n).forEach(function(r){var c=q(r,1)[0];n[c].forEach(function(h,u){t.maxY=Math.max(t.maxY,n[c][u]),t.minY=Math.min(t.minY,o[c][u])})})}}}]),E}(),oi=function(){function E(e,t){m(this,E),this.ctx=e,this.elgrid=t,this.w=e.w;var i=this.w;this.xaxisFontSize=i.config.xaxis.labels.style.fontSize,this.axisFontFamily=i.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=i.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal=i.config.chart.type==="bar"&&i.config.plotOptions.bar.horizontal,this.xAxisoffX=i.config.xaxis.position==="bottom"?i.globals.gridHeight:0,this.drawnLabels=[],this.axesUtils=new dt(e)}return y(E,[{key:"drawYaxis",value:function(e){var t=this.w,i=new V(this.ctx),n=t.config.yaxis[e].labels.style,o=n.fontSize,r=n.fontFamily,c=n.fontWeight,h=i.group({class:"apexcharts-yaxis",rel:e,transform:"translate(".concat(t.globals.translateYAxisX[e],", 0)")});if(this.axesUtils.isYAxisHidden(e))return h;var u=i.group({class:"apexcharts-yaxis-texts-g"});h.add(u);var p=t.globals.yAxisScale[e].result.length-1,g=t.globals.gridHeight/p,x=t.globals.yLabelFormatters[e],v=this.axesUtils.checkForReversedLabels(e,t.globals.yAxisScale[e].result.slice());if(t.config.yaxis[e].labels.show){var k=t.globals.translateY+t.config.yaxis[e].labels.offsetY;t.globals.isBarHorizontal?k=0:t.config.chart.type==="heatmap"&&(k-=g/2),k+=parseInt(o,10)/3;for(var A=p;A>=0;A--){var S=x(v[A],A,t),M=t.config.yaxis[e].labels.padding;t.config.yaxis[e].opposite&&t.config.yaxis.length!==0&&(M*=-1);var L=this.getTextAnchor(t.config.yaxis[e].labels.align,t.config.yaxis[e].opposite),d=this.axesUtils.getYAxisForeColor(n.colors,e),b=Array.isArray(d)?d[A]:d,C=H.listToArray(t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-label tspan"))).map(function(P){return P.textContent}),I=i.drawText({x:M,y:k,text:C.includes(S)&&!t.config.yaxis[e].labels.showDuplicates?"":S,textAnchor:L,fontSize:o,fontFamily:r,fontWeight:c,maxWidth:t.config.yaxis[e].labels.maxWidth,foreColor:b,isPlainText:!1,cssClass:"apexcharts-yaxis-label ".concat(n.cssClass)});u.add(I),this.addTooltip(I,S),t.config.yaxis[e].labels.rotate!==0&&this.rotateLabel(i,I,firstLabel,t.config.yaxis[e].labels.rotate),k+=g}}return this.addYAxisTitle(i,h,e),this.addAxisBorder(i,h,e,p,g),h}},{key:"getTextAnchor",value:function(e,t){return e==="left"?"start":e==="center"?"middle":e==="right"?"end":t?"start":"end"}},{key:"addTooltip",value:function(e,t){var i=document.createElementNS(this.w.globals.SVGNS,"title");i.textContent=Array.isArray(t)?t.join(" "):t,e.node.appendChild(i)}},{key:"rotateLabel",value:function(e,t,i,n){var o=e.rotateAroundCenter(i.node),r=e.rotateAroundCenter(t.node);t.node.setAttribute("transform","rotate(".concat(n," ").concat(o.x," ").concat(r.y,")"))}},{key:"addYAxisTitle",value:function(e,t,i){var n=this.w;if(n.config.yaxis[i].title.text!==void 0){var o=e.group({class:"apexcharts-yaxis-title"}),r=n.config.yaxis[i].opposite?n.globals.translateYAxisX[i]:0,c=e.drawText({x:r,y:n.globals.gridHeight/2+n.globals.translateY+n.config.yaxis[i].title.offsetY,text:n.config.yaxis[i].title.text,textAnchor:"end",foreColor:n.config.yaxis[i].title.style.color,fontSize:n.config.yaxis[i].title.style.fontSize,fontWeight:n.config.yaxis[i].title.style.fontWeight,fontFamily:n.config.yaxis[i].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text ".concat(n.config.yaxis[i].title.style.cssClass)});o.add(c),t.add(o)}}},{key:"addAxisBorder",value:function(e,t,i,n,o){var r=this.w,c=r.config.yaxis[i].axisBorder,h=31+c.offsetX;if(r.config.yaxis[i].opposite&&(h=-31-c.offsetX),c.show){var u=e.drawLine(h,r.globals.translateY+c.offsetY-2,h,r.globals.gridHeight+r.globals.translateY+c.offsetY+2,c.color,0,c.width);t.add(u)}r.config.yaxis[i].axisTicks.show&&this.axesUtils.drawYAxisTicks(h,n,c,r.config.yaxis[i].axisTicks,i,o,t)}},{key:"drawYaxisInversed",value:function(e){var t=this.w,i=new V(this.ctx),n=i.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),o=i.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(t.globals.translateXAxisX,", ").concat(t.globals.translateXAxisY,")")});n.add(o);var r=t.globals.yAxisScale[e].result.length-1,c=t.globals.gridWidth/r+.1,h=c+t.config.xaxis.labels.offsetX,u=t.globals.xLabelFormatter,p=this.axesUtils.checkForReversedLabels(e,t.globals.yAxisScale[e].result.slice()),g=t.globals.timescaleLabels;if(g.length>0&&(this.xaxisLabels=g.slice(),r=(p=g.slice()).length),t.config.xaxis.labels.show)for(var x=g.length?0:r;g.length?x<g.length:x>=0;g.length?x++:x--){var v=u(p[x],x,t),k=t.globals.gridWidth+t.globals.padHorizontal-(h-c+t.config.xaxis.labels.offsetX);if(g.length){var A=this.axesUtils.getLabel(p,g,k,x,this.drawnLabels,this.xaxisFontSize);k=A.x,v=A.text,this.drawnLabels.push(A.text),x===0&&t.globals.skipFirstTimelinelabel&&(v=""),x===p.length-1&&t.globals.skipLastTimelinelabel&&(v="")}var S=i.drawText({x:k,y:this.xAxisoffX+t.config.xaxis.labels.offsetY+30-(t.config.xaxis.position==="top"?t.globals.xAxisHeight+t.config.xaxis.axisTicks.height-2:0),text:v,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[e]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:t.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label ".concat(t.config.xaxis.labels.style.cssClass)});o.add(S),S.tspan(v),this.addTooltip(S,v),h+=c}return this.inversedYAxisTitleText(n),this.inversedYAxisBorder(n),n}},{key:"inversedYAxisBorder",value:function(e){var t=this.w,i=new V(this.ctx),n=t.config.xaxis.axisBorder;if(n.show){var o=0;t.config.chart.type==="bar"&&t.globals.isXNumeric&&(o-=15);var r=i.drawLine(t.globals.padHorizontal+o+n.offsetX,this.xAxisoffX,t.globals.gridWidth,this.xAxisoffX,n.color,0,n.height);this.elgrid&&this.elgrid.elGridBorders&&t.config.grid.show?this.elgrid.elGridBorders.add(r):e.add(r)}}},{key:"inversedYAxisTitleText",value:function(e){var t=this.w,i=new V(this.ctx);if(t.config.xaxis.title.text!==void 0){var n=i.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),o=i.drawText({x:t.globals.gridWidth/2+t.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(t.config.xaxis.title.style.fontSize)+t.config.xaxis.title.offsetY+20,text:t.config.xaxis.title.text,textAnchor:"middle",fontSize:t.config.xaxis.title.style.fontSize,fontFamily:t.config.xaxis.title.style.fontFamily,fontWeight:t.config.xaxis.title.style.fontWeight,foreColor:t.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text ".concat(t.config.xaxis.title.style.cssClass)});n.add(o),e.add(n)}}},{key:"yAxisTitleRotate",value:function(e,t){var i=this.w,n=new V(this.ctx),o=i.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-texts-g")),r=o?o.getBoundingClientRect():{width:0,height:0},c=i.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-title text")),h=c?c.getBoundingClientRect():{width:0,height:0};if(c){var u=this.xPaddingForYAxisTitle(e,r,h,t);c.setAttribute("x",u.xPos-(t?10:0));var p=n.rotateAroundCenter(c);c.setAttribute("transform","rotate(".concat(t?-1*i.config.yaxis[e].title.rotate:i.config.yaxis[e].title.rotate," ").concat(p.x," ").concat(p.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(e,t,i,n){var o=this.w,r=0,c=10;return o.config.yaxis[e].title.text===void 0||e<0?{xPos:r,padd:0}:(n?r=t.width+o.config.yaxis[e].title.offsetX+i.width/2+c/2:(r=-1*t.width+o.config.yaxis[e].title.offsetX+c/2+i.width/2,o.globals.isBarHorizontal&&(c=25,r=-1*t.width-o.config.yaxis[e].title.offsetX-c)),{xPos:r,padd:c})}},{key:"setYAxisXPosition",value:function(e,t){var i=this.w,n=0,o=0,r=18,c=1;i.config.yaxis.length>1&&(this.multipleYs=!0),i.config.yaxis.forEach(function(h,u){var p=i.globals.ignoreYAxisIndexes.includes(u)||!h.show||h.floating||e[u].width===0,g=e[u].width+t[u].width;h.opposite?i.globals.isBarHorizontal?(o=i.globals.gridWidth+i.globals.translateX-1,i.globals.translateYAxisX[u]=o-h.labels.offsetX):(o=i.globals.gridWidth+i.globals.translateX+c,p||(c+=g+20),i.globals.translateYAxisX[u]=o-h.labels.offsetX+20):(n=i.globals.translateX-r,p||(r+=g+20),i.globals.translateYAxisX[u]=n+h.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var e=this.w;H.listToArray(e.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis")).forEach(function(t,i){var n=e.config.yaxis[i];if(n&&!n.floating&&n.labels.align!==void 0){var o=e.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-texts-g")),r=H.listToArray(e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-label"))),c=o.getBoundingClientRect();r.forEach(function(h){h.setAttribute("text-anchor",n.labels.align)}),n.labels.align!=="left"||n.opposite?n.labels.align==="center"?o.setAttribute("transform","translate(".concat(c.width/2*(n.opposite?1:-1),", 0)")):n.labels.align==="right"&&n.opposite&&o.setAttribute("transform","translate(".concat(c.width,", 0)")):o.setAttribute("transform","translate(-".concat(c.width,", 0)"))}})}}]),E}(),sa=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w,this.documentEvent=H.bind(this.documentEvent,this)}return y(E,[{key:"addEventListener",value:function(e,t){var i=this.w;i.globals.events.hasOwnProperty(e)?i.globals.events[e].push(t):i.globals.events[e]=[t]}},{key:"removeEventListener",value:function(e,t){var i=this.w;if(i.globals.events.hasOwnProperty(e)){var n=i.globals.events[e].indexOf(t);n!==-1&&i.globals.events[e].splice(n,1)}}},{key:"fireEvent",value:function(e,t){var i=this.w;if(i.globals.events.hasOwnProperty(e)){t&&t.length||(t=[]);for(var n=i.globals.events[e],o=n.length,r=0;r<o;r++)n[r].apply(null,t)}}},{key:"setupEventHandlers",value:function(){var e=this,t=this.w,i=this.ctx,n=t.globals.dom.baseEl.querySelector(t.globals.chartClass);this.ctx.eventList.forEach(function(o){n.addEventListener(o,function(r){var c=Object.assign({},t,{seriesIndex:t.globals.axisCharts?t.globals.capturedSeriesIndex:0,dataPointIndex:t.globals.capturedDataPointIndex});r.type==="mousemove"||r.type==="touchmove"?typeof t.config.chart.events.mouseMove=="function"&&t.config.chart.events.mouseMove(r,i,c):r.type==="mouseleave"||r.type==="touchleave"?typeof t.config.chart.events.mouseLeave=="function"&&t.config.chart.events.mouseLeave(r,i,c):(r.type==="mouseup"&&r.which===1||r.type==="touchend")&&(typeof t.config.chart.events.click=="function"&&t.config.chart.events.click(r,i,c),i.ctx.events.fireEvent("click",[r,i,c]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(o){t.globals.dom.baseEl.addEventListener(o,e.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(e){var t=this.w,i=e.target.className;if(e.type==="click"){var n=t.globals.dom.baseEl.querySelector(".apexcharts-menu");n&&n.classList.contains("apexcharts-menu-open")&&i!=="apexcharts-menu-icon"&&n.classList.remove("apexcharts-menu-open")}t.globals.clientX=e.type==="touchmove"?e.touches[0].clientX:e.clientX,t.globals.clientY=e.type==="touchmove"?e.touches[0].clientY:e.clientY}}]),E}(),li=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w}return y(E,[{key:"setCurrentLocaleValues",value:function(e){var t=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(t=this.w.config.chart.locales.concat(window.Apex.chart.locales));var i=t.filter(function(o){return o.name===e})[0];if(!i)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var n=H.extend(ta,i);this.w.globals.locale=n.options}}]),E}(),an=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w}return y(E,[{key:"drawAxis",value:function(e,t){var i,n,o=this,r=this.w.globals,c=this.w.config,h=new Bt(this.ctx,t),u=new oi(this.ctx,t);r.axisCharts&&e!=="radar"&&(r.isBarHorizontal?(n=u.drawYaxisInversed(0),i=h.drawXaxisInversed(0),r.dom.elGraphical.add(i),r.dom.elGraphical.add(n)):(i=h.drawXaxis(),r.dom.elGraphical.add(i),c.yaxis.map(function(p,g){if(r.ignoreYAxisIndexes.indexOf(g)===-1&&(n=u.drawYaxis(g),r.dom.Paper.add(n),o.w.config.grid.position==="back")){var x=r.dom.Paper.children()[1];x.remove(),r.dom.Paper.add(x)}})))}}]),E}(),Pi=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w}return y(E,[{key:"drawXCrosshairs",value:function(){var e=this.w,t=new V(this.ctx),i=new le(this.ctx),n=e.config.xaxis.crosshairs.fill.gradient,o=e.config.xaxis.crosshairs.dropShadow,r=e.config.xaxis.crosshairs.fill.type,c=n.colorFrom,h=n.colorTo,u=n.opacityFrom,p=n.opacityTo,g=n.stops,x=o.enabled,v=o.left,k=o.top,A=o.blur,S=o.color,M=o.opacity,L=e.config.xaxis.crosshairs.fill.color;if(e.config.xaxis.crosshairs.show){r==="gradient"&&(L=t.drawGradient("vertical",c,h,u,p,null,g,null));var d=t.drawRect();e.config.xaxis.crosshairs.width===1&&(d=t.drawLine());var b=e.globals.gridHeight;(!H.isNumber(b)||b<0)&&(b=0);var C=e.config.xaxis.crosshairs.width;(!H.isNumber(C)||C<0)&&(C=0),d.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:b,width:C,height:b,fill:L,filter:"none","fill-opacity":e.config.xaxis.crosshairs.opacity,stroke:e.config.xaxis.crosshairs.stroke.color,"stroke-width":e.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":e.config.xaxis.crosshairs.stroke.dashArray}),x&&(d=i.dropShadow(d,{left:v,top:k,blur:A,color:S,opacity:M})),e.globals.dom.elGraphical.add(d)}}},{key:"drawYCrosshairs",value:function(){var e=this.w,t=new V(this.ctx),i=e.config.yaxis[0].crosshairs,n=e.globals.barPadForNumericAxis;if(e.config.yaxis[0].crosshairs.show){var o=t.drawLine(-n,0,e.globals.gridWidth+n,0,i.stroke.color,i.stroke.dashArray,i.stroke.width);o.attr({class:"apexcharts-ycrosshairs"}),e.globals.dom.elGraphical.add(o)}var r=t.drawLine(-n,0,e.globals.gridWidth+n,0,i.stroke.color,0,0);r.attr({class:"apexcharts-ycrosshairs-hidden"}),e.globals.dom.elGraphical.add(r)}}]),E}(),ra=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w}return y(E,[{key:"checkResponsiveConfig",value:function(e){var t=this,i=this.w,n=i.config;if(n.responsive.length!==0){var o=n.responsive.slice();o.sort(function(u,p){return u.breakpoint>p.breakpoint?1:p.breakpoint>u.breakpoint?-1:0}).reverse();var r=new Ht({}),c=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=o[0].breakpoint,g=window.innerWidth>0?window.innerWidth:screen.width;if(g>p){var x=H.clone(i.globals.initialConfig);x.series=H.clone(i.config.series);var v=he.extendArrayProps(r,x,i);u=H.extend(v,u),u=H.extend(i.config,u),t.overrideResponsiveOptions(u)}else for(var k=0;k<o.length;k++)g<o[k].breakpoint&&(u=he.extendArrayProps(r,o[k].options,i),u=H.extend(i.config,u),t.overrideResponsiveOptions(u))};if(e){var h=he.extendArrayProps(r,e,i);h=H.extend(i.config,h),c(h=H.extend(h,e))}else c({})}}},{key:"overrideResponsiveOptions",value:function(e){var t=new Ht(e).init({responsiveOverride:!0});this.w.config=t}}]),E}(),Ti=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w,this.colors=[],this.isColorFn=!1,this.isHeatmapDistributed=this.checkHeatmapDistributed(),this.isBarDistributed=this.checkBarDistributed()}return y(E,[{key:"checkHeatmapDistributed",value:function(){var e=this.w.config,t=e.chart,i=e.plotOptions;return t.type==="treemap"&&i.treemap&&i.treemap.distributed||t.type==="heatmap"&&i.heatmap&&i.heatmap.distributed}},{key:"checkBarDistributed",value:function(){var e=this.w.config,t=e.chart,i=e.plotOptions;return i.bar&&i.bar.distributed&&(t.type==="bar"||t.type==="rangeBar")}},{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var e=this.w,t=new H;e.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(e.config.theme.mode));var i=ie(e.config.colors||e.config.fill.colors||[]);e.globals.colors=this.getColors(i),this.applySeriesColors(e.globals.seriesColors,e.globals.colors),e.config.theme.monochrome.enabled&&(e.globals.colors=this.getMonochromeColors(e.config.theme.monochrome,e.globals.series,t));var n=e.globals.colors.slice();this.pushExtraColors(e.globals.colors),this.applyColorTypes(["fill","stroke"],n),this.applyDataLabelsColors(n),this.applyRadarPolygonsColors(),this.applyMarkersColors(n)}},{key:"getColors",value:function(e){var t=this,i=this.w;return e&&e.length!==0?Array.isArray(e)&&e.length>0&&typeof e[0]=="function"?(this.isColorFn=!0,i.config.series.map(function(n,o){var r=e[o]||e[0];return typeof r=="function"?r({value:i.globals.axisCharts?i.globals.series[o][0]||0:i.globals.series[o],seriesIndex:o,dataPointIndex:o,w:t.w}):r})):e:this.predefined()}},{key:"applySeriesColors",value:function(e,t){e.forEach(function(i,n){i&&(t[n]=i)})}},{key:"getMonochromeColors",value:function(e,t,i){var n=e.color,o=e.shadeIntensity,r=e.shadeTo,c=this.isBarDistributed||this.isHeatmapDistributed?t[0].length*t.length:t.length,h=1/(c/o),u=0;return Array.from({length:c},function(){var p=r==="dark"?i.shadeColor(-1*u,n):i.shadeColor(u,n);return u+=h,p})}},{key:"applyColorTypes",value:function(e,t){var i=this,n=this.w;e.forEach(function(o){n.globals[o].colors=n.config[o].colors===void 0?i.isColorFn?n.config.colors:t:n.config[o].colors.slice(),i.pushExtraColors(n.globals[o].colors)})}},{key:"applyDataLabelsColors",value:function(e){var t=this.w;t.globals.dataLabels.style.colors=t.config.dataLabels.style.colors===void 0?e:t.config.dataLabels.style.colors.slice(),this.pushExtraColors(t.globals.dataLabels.style.colors,50)}},{key:"applyRadarPolygonsColors",value:function(){var e=this.w;e.globals.radarPolygons.fill.colors=e.config.plotOptions.radar.polygons.fill.colors===void 0?[e.config.theme.mode==="dark"?"#424242":"none"]:e.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(e.globals.radarPolygons.fill.colors,20)}},{key:"applyMarkersColors",value:function(e){var t=this.w;t.globals.markers.colors=t.config.markers.colors===void 0?e:t.config.markers.colors.slice(),this.pushExtraColors(t.globals.markers.colors)}},{key:"pushExtraColors",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=this.w,o=t||n.globals.series.length;if(i===null&&(i=this.isBarDistributed||this.isHeatmapDistributed||n.config.chart.type==="heatmap"&&n.config.plotOptions.heatmap&&n.config.plotOptions.heatmap.colorScale.inverse),i&&n.globals.series.length&&(o=n.globals.series[n.globals.maxValsInArrayIndex].length*n.globals.series.length),e.length<o)for(var r=o-e.length,c=0;c<r;c++)e.push(e[c])}},{key:"updateThemeOptions",value:function(e){e.chart=e.chart||{},e.tooltip=e.tooltip||{};var t=e.theme.mode,i=t==="dark"?"palette4":t==="light"?"palette1":e.theme.palette||"palette1",n=t==="dark"?"#f6f7f8":t==="light"?"#373d3f":e.chart.foreColor||"#373d3f";return e.tooltip.theme=t||"light",e.chart.foreColor=n,e.theme.palette=i,e}},{key:"predefined",value:function(){var e={palette1:["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"],palette2:["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"],palette3:["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"],palette4:["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"],palette5:["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"],palette6:["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"],palette7:["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"],palette8:["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"],palette9:["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"],palette10:["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"],default:["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"]};return e[this.w.config.theme.palette]||e.default}}]),E}(),oa=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w}return y(E,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(e){var t=this.w,i=e==="title"?t.config.title:t.config.subtitle,n=t.globals.svgWidth/2,o=i.offsetY,r="middle";if(i.align==="left"?(n=10,r="start"):i.align==="right"&&(n=t.globals.svgWidth-10,r="end"),n+=i.offsetX,o=o+parseInt(i.style.fontSize,10)+i.margin/2,i.text!==void 0){var c=new V(this.ctx).drawText({x:n,y:o,text:i.text,textAnchor:r,fontSize:i.style.fontSize,fontFamily:i.style.fontFamily,fontWeight:i.style.fontWeight,foreColor:i.style.color,opacity:1});c.node.setAttribute("class","apexcharts-".concat(e,"-text")),t.globals.dom.Paper.add(c)}}}]),E}(),ci=function(){function E(e){m(this,E),this.w=e.w,this.dCtx=e}return y(E,[{key:"getTitleSubtitleCoords",value:function(e){var t=this.w,i=0,n=0,o=e==="title"?t.config.title.floating:t.config.subtitle.floating,r=t.globals.dom.baseEl.querySelector(".apexcharts-".concat(e,"-text"));if(r!==null&&!o){var c=r.getBoundingClientRect();i=c.width,n=t.globals.axisCharts?c.height+5:c.height}return{width:i,height:n}}},{key:"getLegendsRect",value:function(){var e=this.w,t=e.globals.dom.elLegendWrap;e.config.legend.height||e.config.legend.position!=="top"&&e.config.legend.position!=="bottom"||(t.style.maxHeight=e.globals.svgHeight/2+"px");var i=Object.assign({},H.getBoundingClientRect(t));return t!==null&&!e.config.legend.floating&&e.config.legend.show?this.dCtx.lgRect={x:i.x,y:i.y,height:i.height,width:i.height===0?0:i.width}:this.dCtx.lgRect={x:0,y:0,height:0,width:0},e.config.legend.position!=="left"&&e.config.legend.position!=="right"||1.5*this.dCtx.lgRect.width>e.globals.svgWidth&&(this.dCtx.lgRect.width=e.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getDatalabelsRect",value:function(){var e=this,t=this.w,i=[];t.config.series.forEach(function(h,u){h.data.forEach(function(p,g){var x;x=t.globals.series[u][g],n=t.config.dataLabels.formatter(x,{ctx:e.dCtx.ctx,seriesIndex:u,dataPointIndex:g,w:t}),i.push(n)})});var n=H.getLargestStringFromArr(i),o=new V(this.dCtx.ctx),r=t.config.dataLabels.style,c=o.getTextRects(n,parseInt(r.fontSize),r.fontFamily);return{width:1.05*c.width,height:c.height}}},{key:"getLargestStringFromMultiArr",value:function(e,t){var i=e;if(this.w.globals.isMultiLineX){var n=t.map(function(r,c){return Array.isArray(r)?r.length:1}),o=Math.max.apply(Math,ie(n));i=t[n.indexOf(o)]}return i}}]),E}(),nn=function(){function E(e){m(this,E),this.w=e.w,this.dCtx=e}return y(E,[{key:"getxAxisLabelsCoords",value:function(){var e,t=this.w,i=t.globals.labels.slice();if(t.config.xaxis.convertedCatToNumeric&&i.length===0&&(i=t.globals.categoryLabels),t.globals.timescaleLabels.length>0){var n=this.getxAxisTimeScaleLabelsCoords();e={width:n.width,height:n.height},t.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends=t.config.legend.position!=="left"&&t.config.legend.position!=="right"||t.config.legend.floating?0:this.dCtx.lgRect.width;var o=t.globals.xLabelFormatter,r=H.getLargestStringFromArr(i),c=this.dCtx.dimHelpers.getLargestStringFromMultiArr(r,i);t.globals.isBarHorizontal&&(c=r=t.globals.yAxisScale[0].result.reduce(function(k,A){return k.length>A.length?k:A},0));var h=new We(this.dCtx.ctx),u=r;r=h.xLabelFormat(o,r,u,{i:void 0,dateFormatter:new _e(this.dCtx.ctx).formatDate,w:t}),c=h.xLabelFormat(o,c,u,{i:void 0,dateFormatter:new _e(this.dCtx.ctx).formatDate,w:t}),(t.config.xaxis.convertedCatToNumeric&&r===void 0||String(r).trim()==="")&&(c=r="1");var p=new V(this.dCtx.ctx),g=p.getTextRects(r,t.config.xaxis.labels.style.fontSize),x=g;if(r!==c&&(x=p.getTextRects(c,t.config.xaxis.labels.style.fontSize)),(e={width:g.width>=x.width?g.width:x.width,height:g.height>=x.height?g.height:x.height}).width*i.length>t.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&t.config.xaxis.labels.rotate!==0||t.config.xaxis.labels.rotateAlways){if(!t.globals.isBarHorizontal){t.globals.rotateXLabels=!0;var v=function(k){return p.getTextRects(k,t.config.xaxis.labels.style.fontSize,t.config.xaxis.labels.style.fontFamily,"rotate(".concat(t.config.xaxis.labels.rotate," 0 0)"),!1)};g=v(r),r!==c&&(x=v(c)),e.height=(g.height>x.height?g.height:x.height)/1.5,e.width=g.width>x.width?g.width:x.width}}else t.globals.rotateXLabels=!1}return t.config.xaxis.labels.show||(e={width:0,height:0}),{width:e.width,height:e.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var e,t=this.w;if(!t.globals.hasXaxisGroups)return{width:0,height:0};var i,n=((e=t.config.xaxis.group.style)===null||e===void 0?void 0:e.fontSize)||t.config.xaxis.labels.style.fontSize,o=t.globals.groups.map(function(g){return g.title}),r=H.getLargestStringFromArr(o),c=this.dCtx.dimHelpers.getLargestStringFromMultiArr(r,o),h=new V(this.dCtx.ctx),u=h.getTextRects(r,n),p=u;return r!==c&&(p=h.getTextRects(c,n)),i={width:u.width>=p.width?u.width:p.width,height:u.height>=p.height?u.height:p.height},t.config.xaxis.labels.show||(i={width:0,height:0}),{width:i.width,height:i.height}}},{key:"getxAxisTitleCoords",value:function(){var e=this.w,t=0,i=0;if(e.config.xaxis.title.text!==void 0){var n=new V(this.dCtx.ctx).getTextRects(e.config.xaxis.title.text,e.config.xaxis.title.style.fontSize);t=n.width,i=n.height}return{width:t,height:i}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var e,t=this.w;this.dCtx.timescaleLabels=t.globals.timescaleLabels.slice();var i=this.dCtx.timescaleLabels.map(function(o){return o.value}),n=i.reduce(function(o,r){return o===void 0?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):o.length>r.length?o:r},0);return 1.05*(e=new V(this.dCtx.ctx).getTextRects(n,t.config.xaxis.labels.style.fontSize)).width*i.length>t.globals.gridWidth&&t.config.xaxis.labels.rotate!==0&&(t.globals.overlappingXLabels=!0),e}},{key:"additionalPaddingXLabels",value:function(e){var t=this,i=this.w,n=i.globals,o=i.config,r=o.xaxis.type,c=e.width;n.skipLastTimelinelabel=!1,n.skipFirstTimelinelabel=!1;var h=i.config.yaxis[0].opposite&&i.globals.isBarHorizontal,u=function(p,g){o.yaxis.length>1&&function(x){return n.collapsedSeriesIndices.indexOf(x)!==-1}(g)||function(x){if(t.dCtx.timescaleLabels&&t.dCtx.timescaleLabels.length){var v=t.dCtx.timescaleLabels[0],k=t.dCtx.timescaleLabels[t.dCtx.timescaleLabels.length-1].position+c/1.75-t.dCtx.yAxisWidthRight,A=v.position-c/1.75+t.dCtx.yAxisWidthLeft,S=i.config.legend.position==="right"&&t.dCtx.lgRect.width>0?t.dCtx.lgRect.width:0;k>n.svgWidth-n.translateX-S&&(n.skipLastTimelinelabel=!0),A<-(x.show&&!x.floating||o.chart.type!=="bar"&&o.chart.type!=="candlestick"&&o.chart.type!=="rangeBar"&&o.chart.type!=="boxPlot"?10:c/1.75)&&(n.skipFirstTimelinelabel=!0)}else r==="datetime"?t.dCtx.gridPad.right<c&&!n.rotateXLabels&&(n.skipLastTimelinelabel=!0):r!=="datetime"&&t.dCtx.gridPad.right<c/2-t.dCtx.yAxisWidthRight&&!n.rotateXLabels&&!i.config.xaxis.labels.trim&&(t.dCtx.xPadRight=c/2+1)}(p)};o.yaxis.forEach(function(p,g){h?(t.dCtx.gridPad.left<c&&(t.dCtx.xPadLeft=c/2+1),t.dCtx.xPadRight=c/2+1):u(p,g)})}}]),E}(),la=function(){function E(e){m(this,E),this.w=e.w,this.dCtx=e}return y(E,[{key:"getyAxisLabelsCoords",value:function(){var e=this,t=this.w,i=[],n=10,o=new dt(this.dCtx.ctx);return t.config.yaxis.map(function(r,c){var h={seriesIndex:c,dataPointIndex:-1,w:t},u=t.globals.yAxisScale[c],p=0;if(!o.isYAxisHidden(c)&&r.labels.show&&r.labels.minWidth!==void 0&&(p=r.labels.minWidth),!o.isYAxisHidden(c)&&r.labels.show&&u.result.length){var g=t.globals.yLabelFormatters[c],x=u.niceMin===Number.MIN_VALUE?0:u.niceMin,v=u.result.reduce(function(b,C){var I,P;return((I=String(g(b,h)))===null||I===void 0?void 0:I.length)>((P=String(g(C,h)))===null||P===void 0?void 0:P.length)?b:C},x),k=v=g(v,h);if(v!==void 0&&v.length!==0||(v=u.niceMax),t.globals.isBarHorizontal){n=0;var A=t.globals.labels.slice();v=H.getLargestStringFromArr(A),v=g(v,{seriesIndex:c,dataPointIndex:-1,w:t}),k=e.dCtx.dimHelpers.getLargestStringFromMultiArr(v,A)}var S=new V(e.dCtx.ctx),M="rotate(".concat(r.labels.rotate," 0 0)"),L=S.getTextRects(v,r.labels.style.fontSize,r.labels.style.fontFamily,M,!1),d=L;v!==k&&(d=S.getTextRects(k,r.labels.style.fontSize,r.labels.style.fontFamily,M,!1)),i.push({width:(p>d.width||p>L.width?p:d.width>L.width?d.width:L.width)+n,height:d.height>L.height?d.height:L.height})}else i.push({width:0,height:0})}),i}},{key:"getyAxisTitleCoords",value:function(){var e=this,t=this.w,i=[];return t.config.yaxis.map(function(n,o){if(n.show&&n.title.text!==void 0){var r=new V(e.dCtx.ctx),c="rotate(".concat(n.title.rotate," 0 0)"),h=r.getTextRects(n.title.text,n.title.style.fontSize,n.title.style.fontFamily,c,!1);i.push({width:h.width,height:h.height})}else i.push({width:0,height:0})}),i}},{key:"getTotalYAxisWidth",value:function(){var e=this.w,t=0,i=0,n=0,o=e.globals.yAxisScale.length>1?10:0,r=new dt(this.dCtx.ctx),c=function(h,u){var p=e.config.yaxis[u].floating,g=0;h.width>0&&!p?(g=h.width+o,function(x){return e.globals.ignoreYAxisIndexes.indexOf(x)>-1}(u)&&(g=g-h.width-o)):g=p||r.isYAxisHidden(u)?0:5,e.config.yaxis[u].opposite?n+=g:i+=g,t+=g};return e.globals.yLabelsCoords.map(function(h,u){c(h,u)}),e.globals.yTitleCoords.map(function(h,u){c(h,u)}),e.globals.isBarHorizontal&&!e.config.yaxis[0].floating&&(t=e.globals.yLabelsCoords[0].width+e.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=i,this.dCtx.yAxisWidthRight=n,t}}]),E}(),sn=function(){function E(e){m(this,E),this.w=e.w,this.dCtx=e}return y(E,[{key:"gridPadForColumnsInNumericAxis",value:function(e){var t=this.w,i=t.config,n=t.globals;if(n.noData||n.collapsedSeries.length+n.ancillaryCollapsedSeries.length===i.series.length)return 0;var o=function(v){return["bar","rangeBar","candlestick","boxPlot"].includes(v)},r=i.chart.type,c=0,h=o(r)?i.series.length:1;n.comboBarCount>0&&(h=n.comboBarCount),n.collapsedSeries.forEach(function(v){o(v.type)&&(h-=1)}),i.chart.stacked&&(h=1);var u=o(r)||n.comboBarCount>0,p=Math.abs(n.initialMaxX-n.initialMinX);if(u&&n.isXNumeric&&!n.isBarHorizontal&&h>0&&p!==0){p<=3&&(p=n.dataPoints);var g=p/e,x=n.minXDiff&&n.minXDiff/g>0?n.minXDiff/g:0;x>e/2&&(x/=2),(c=x*parseInt(i.plotOptions.bar.columnWidth,10)/100)<1&&(c=1),n.barPadForNumericAxis=c}return c}},{key:"gridPadFortitleSubtitle",value:function(){var e=this,t=this.w,i=t.globals,n=this.dCtx.isSparkline||!i.axisCharts?0:10;["title","subtitle"].forEach(function(c){t.config[c].text!==void 0?n+=t.config[c].margin:n+=e.dCtx.isSparkline||!i.axisCharts?0:5}),!t.config.legend.show||t.config.legend.position!=="bottom"||t.config.legend.floating||i.axisCharts||(n+=10);var o=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),r=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");i.gridHeight-=o.height+r.height+n,i.translateY+=o.height+r.height+n}},{key:"setGridXPosForDualYAxis",value:function(e,t){var i=this.w,n=new dt(this.dCtx.ctx);i.config.yaxis.forEach(function(o,r){i.globals.ignoreYAxisIndexes.indexOf(r)!==-1||o.floating||n.isYAxisHidden(r)||(o.opposite&&(i.globals.translateX-=t[r].width+e[r].width+parseInt(o.labels.style.fontSize,10)/1.2+12),i.globals.translateX<2&&(i.globals.translateX=2))})}}]),E}(),Wt=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new ci(this),this.dimYAxis=new la(this),this.dimXAxis=new nn(this),this.dimGrid=new sn(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return y(E,[{key:"plotCoords",value:function(){var e=this,t=this.w,i=t.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.datalabelsCoords={width:0,height:0};var n=Array.isArray(t.config.stroke.width)?Math.max.apply(Math,ie(t.config.stroke.width)):t.config.stroke.width;this.isSparkline&&((t.config.markers.discrete.length>0||t.config.markers.size>0)&&Object.entries(this.gridPad).forEach(function(r){var c=q(r,2),h=c[0],u=c[1];e.gridPad[h]=Math.max(u,e.w.globals.markers.largestSize/1.5)}),this.gridPad.top=Math.max(n/2,this.gridPad.top),this.gridPad.bottom=Math.max(n/2,this.gridPad.bottom)),i.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),i.gridHeight=i.gridHeight-this.gridPad.top-this.gridPad.bottom,i.gridWidth=i.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var o=this.dimGrid.gridPadForColumnsInNumericAxis(i.gridWidth);i.gridWidth=i.gridWidth-2*o,i.translateX=i.translateX+this.gridPad.left+this.xPadLeft+(o>0?o:0),i.translateY=i.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var e=this,t=this.w,i=t.globals,n=this.dimYAxis.getyAxisLabelsCoords(),o=this.dimYAxis.getyAxisTitleCoords();i.isSlopeChart&&(this.datalabelsCoords=this.dimHelpers.getDatalabelsRect()),t.globals.yLabelsCoords=[],t.globals.yTitleCoords=[],t.config.yaxis.map(function(v,k){t.globals.yLabelsCoords.push({width:n[k].width,index:k}),t.globals.yTitleCoords.push({width:o[k].width,index:k})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var r=this.dimXAxis.getxAxisLabelsCoords(),c=this.dimXAxis.getxAxisGroupLabelsCoords(),h=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(r,h,c),i.translateXAxisY=t.globals.rotateXLabels?this.xAxisHeight/8:-4,i.translateXAxisX=t.globals.rotateXLabels&&t.globals.isXNumeric&&t.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,t.globals.isBarHorizontal&&(i.rotateXLabels=!1,i.translateXAxisY=parseInt(t.config.xaxis.labels.style.fontSize,10)/1.5*-1),i.translateXAxisY=i.translateXAxisY+t.config.xaxis.labels.offsetY,i.translateXAxisX=i.translateXAxisX+t.config.xaxis.labels.offsetX;var u=this.yAxisWidth,p=this.xAxisHeight;i.xAxisLabelsHeight=this.xAxisHeight-h.height,i.xAxisGroupLabelsHeight=i.xAxisLabelsHeight-r.height,i.xAxisLabelsWidth=this.xAxisWidth,i.xAxisHeight=this.xAxisHeight;var g=10;(t.config.chart.type==="radar"||this.isSparkline)&&(u=0,p=0),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||t.config.chart.type==="treemap")&&(u=0,p=0,g=0),this.isSparkline||t.config.chart.type==="treemap"||this.dimXAxis.additionalPaddingXLabels(r);var x=function(){i.translateX=u+e.datalabelsCoords.width,i.gridHeight=i.svgHeight-e.lgRect.height-p-(e.isSparkline||t.config.chart.type==="treemap"?0:t.globals.rotateXLabels?10:15),i.gridWidth=i.svgWidth-u-2*e.datalabelsCoords.width};switch(t.config.xaxis.position==="top"&&(g=i.xAxisHeight-t.config.xaxis.axisTicks.height-5),t.config.legend.position){case"bottom":i.translateY=g,x();break;case"top":i.translateY=this.lgRect.height+g,x();break;case"left":i.translateY=g,i.translateX=this.lgRect.width+u+this.datalabelsCoords.width,i.gridHeight=i.svgHeight-p-12,i.gridWidth=i.svgWidth-this.lgRect.width-u-2*this.datalabelsCoords.width;break;case"right":i.translateY=g,i.translateX=u+this.datalabelsCoords.width,i.gridHeight=i.svgHeight-p-12,i.gridWidth=i.svgWidth-this.lgRect.width-u-2*this.datalabelsCoords.width-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(o,n),new oi(this.ctx).setYAxisXPosition(n,o)}},{key:"setDimensionsForNonAxisCharts",value:function(){var e=this.w,t=e.globals,i=e.config,n=0;e.config.legend.show&&!e.config.legend.floating&&(n=20);var o=i.chart.type==="pie"||i.chart.type==="polarArea"||i.chart.type==="donut"?"pie":"radialBar",r=i.plotOptions[o].offsetY,c=i.plotOptions[o].offsetX;if(!i.legend.show||i.legend.floating){t.gridHeight=t.svgHeight;var h=t.dom.elWrap.getBoundingClientRect().width;return t.gridWidth=Math.min(h,t.gridHeight),t.translateY=r,void(t.translateX=c+(t.svgWidth-t.gridWidth)/2)}switch(i.legend.position){case"bottom":t.gridHeight=t.svgHeight-this.lgRect.height,t.gridWidth=t.svgWidth,t.translateY=r-10,t.translateX=c+(t.svgWidth-t.gridWidth)/2;break;case"top":t.gridHeight=t.svgHeight-this.lgRect.height,t.gridWidth=t.svgWidth,t.translateY=this.lgRect.height+r+10,t.translateX=c+(t.svgWidth-t.gridWidth)/2;break;case"left":t.gridWidth=t.svgWidth-this.lgRect.width-n,t.gridHeight=i.chart.height!=="auto"?t.svgHeight:t.gridWidth,t.translateY=r,t.translateX=c+this.lgRect.width+n;break;case"right":t.gridWidth=t.svgWidth-this.lgRect.width-n-5,t.gridHeight=i.chart.height!=="auto"?t.svgHeight:t.gridWidth,t.translateY=r,t.translateX=c+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(e,t,i){var n=this.w,o=n.globals.hasXaxisGroups?2:1,r=i.height+e.height+t.height,c=n.globals.isMultiLineX?1.2:n.globals.LINE_HEIGHT_RATIO,h=n.globals.rotateXLabels?22:10,u=n.globals.rotateXLabels&&n.config.legend.position==="bottom"?10:0;this.xAxisHeight=r*c+o*h+u,this.xAxisWidth=e.width,this.xAxisHeight-t.height>n.config.xaxis.labels.maxHeight&&(this.xAxisHeight=n.config.xaxis.labels.maxHeight),n.config.xaxis.labels.minHeight&&this.xAxisHeight<n.config.xaxis.labels.minHeight&&(this.xAxisHeight=n.config.xaxis.labels.minHeight),n.config.xaxis.floating&&(this.xAxisHeight=0);var p=0,g=0;n.config.yaxis.forEach(function(x){p+=x.labels.minWidth,g+=x.labels.maxWidth}),this.yAxisWidth<p&&(this.yAxisWidth=p),this.yAxisWidth>g&&(this.yAxisWidth=g)}}]),E}(),rn=function(){function E(e){m(this,E),this.w=e.w,this.lgCtx=e}return y(E,[{key:"getLegendStyles",value:function(){var e,t,i,n=document.createElement("style");n.setAttribute("type","text/css");var o=((e=this.lgCtx.ctx)===null||e===void 0||(t=e.opts)===null||t===void 0||(i=t.chart)===null||i===void 0?void 0:i.nonce)||this.w.config.chart.nonce;o&&n.setAttribute("nonce",o);var r=document.createTextNode(`
      .apexcharts-flip-y {
        transform: scaleY(-1) translateY(-100%);
        transform-origin: top;
        transform-box: fill-box;
      }
      .apexcharts-flip-x {
        transform: scaleX(-1);
        transform-origin: center;
        transform-box: fill-box;
      }
      .apexcharts-legend {
        display: flex;
        overflow: auto;
        padding: 0 10px;
      }
      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {
        flex-wrap: wrap
      }
      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {
        flex-direction: column;
        bottom: 0;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {
        justify-content: flex-start;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {
        justify-content: center;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {
        justify-content: flex-end;
      }
      .apexcharts-legend-series {
        cursor: pointer;
        line-height: normal;
        display: flex;
        align-items: center;
      }
      .apexcharts-legend-text {
        position: relative;
        font-size: 14px;
      }
      .apexcharts-legend-text *, .apexcharts-legend-marker * {
        pointer-events: none;
      }
      .apexcharts-legend-marker {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-right: 1px;
      }

      .apexcharts-legend-series.apexcharts-no-click {
        cursor: auto;
      }
      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {
        display: none !important;
      }
      .apexcharts-inactive-legend {
        opacity: 0.45;
      }`);return n.appendChild(r),n}},{key:"getLegendDimensions",value:function(){var e=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect(),t=e.width;return{clwh:e.height,clww:t}}},{key:"appendToForeignObject",value:function(){this.w.globals.dom.elLegendForeign.appendChild(this.getLegendStyles())}},{key:"toggleDataSeries",value:function(e,t){var i=this,n=this.w;if(n.globals.axisCharts||n.config.chart.type==="radialBar"){n.globals.resized=!0;var o=null,r=null;n.globals.risingSeries=[],n.globals.axisCharts?(o=n.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(e,"']")),r=parseInt(o.getAttribute("data:realIndex"),10)):(o=n.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(e+1,"']")),r=parseInt(o.getAttribute("rel"),10)-1),t?[{cs:n.globals.collapsedSeries,csi:n.globals.collapsedSeriesIndices},{cs:n.globals.ancillaryCollapsedSeries,csi:n.globals.ancillaryCollapsedSeriesIndices}].forEach(function(p){i.riseCollapsedSeries(p.cs,p.csi,r)}):this.hideSeries({seriesEl:o,realIndex:r})}else{var c=n.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(e+1,"'] path")),h=n.config.chart.type;if(h==="pie"||h==="polarArea"||h==="donut"){var u=n.config.plotOptions.pie.donut.labels;new V(this.lgCtx.ctx).pathMouseDown(c.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(c.members[0].node,u)}c.fire("click")}}},{key:"getSeriesAfterCollapsing",value:function(e){var t=e.realIndex,i=this.w,n=i.globals,o=H.clone(i.config.series);if(n.axisCharts){var r=i.config.yaxis[n.seriesYAxisReverseMap[t]],c={index:t,data:o[t].data.slice(),type:o[t].type||i.config.chart.type};if(r&&r.show&&r.showAlways)n.ancillaryCollapsedSeriesIndices.indexOf(t)<0&&(n.ancillaryCollapsedSeries.push(c),n.ancillaryCollapsedSeriesIndices.push(t));else if(n.collapsedSeriesIndices.indexOf(t)<0){n.collapsedSeries.push(c),n.collapsedSeriesIndices.push(t);var h=n.risingSeries.indexOf(t);n.risingSeries.splice(h,1)}}else n.collapsedSeries.push({index:t,data:o[t]}),n.collapsedSeriesIndices.push(t);return n.allSeriesCollapsed=n.collapsedSeries.length+n.ancillaryCollapsedSeries.length===i.config.series.length,this._getSeriesBasedOnCollapsedState(o)}},{key:"hideSeries",value:function(e){for(var t=e.seriesEl,i=e.realIndex,n=this.w,o=this.getSeriesAfterCollapsing({realIndex:i}),r=t.childNodes,c=0;c<r.length;c++)r[c].classList.contains("apexcharts-series-markers-wrap")&&(r[c].classList.contains("apexcharts-hide")?r[c].classList.remove("apexcharts-hide"):r[c].classList.add("apexcharts-hide"));this.lgCtx.ctx.updateHelpers._updateSeries(o,n.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(e,t,i){var n=this.w,o=H.clone(n.config.series);if(e.length>0){for(var r=0;r<e.length;r++)e[r].index===i&&(n.globals.axisCharts?o[i].data=e[r].data.slice():o[i]=e[r].data,o[i].hidden=!1,e.splice(r,1),t.splice(r,1),n.globals.risingSeries.push(i));o=this._getSeriesBasedOnCollapsedState(o),this.lgCtx.ctx.updateHelpers._updateSeries(o,n.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(e){var t=this.w,i=0;return t.globals.axisCharts?e.forEach(function(n,o){t.globals.collapsedSeriesIndices.indexOf(o)<0&&t.globals.ancillaryCollapsedSeriesIndices.indexOf(o)<0||(e[o].data=[],i++)}):e.forEach(function(n,o){!t.globals.collapsedSeriesIndices.indexOf(o)<0&&(e[o]=0,i++)}),t.globals.allSeriesCollapsed=i===e.length,e}}]),E}(),ca=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed=this.w.config.chart.type==="bar"&&this.w.config.plotOptions.bar.distributed&&this.w.config.series.length===1,this.legendHelpers=new rn(this)}return y(E,[{key:"init",value:function(){var e=this.w,t=e.globals,i=e.config,n=i.legend.showForSingleSeries&&t.series.length===1||this.isBarsDistributed||t.series.length>1;if(this.legendHelpers.appendToForeignObject(),(n||!t.axisCharts)&&i.legend.show){for(;t.dom.elLegendWrap.firstChild;)t.dom.elLegendWrap.removeChild(t.dom.elLegendWrap.firstChild);this.drawLegends(),i.legend.position==="bottom"||i.legend.position==="top"?this.legendAlignHorizontal():i.legend.position!=="right"&&i.legend.position!=="left"||this.legendAlignVertical()}}},{key:"createLegendMarker",value:function(e){var t=e.i,i=e.fillcolor,n=this.w,o=document.createElement("span");o.classList.add("apexcharts-legend-marker");var r=n.config.legend.markers.shape||n.config.markers.shape,c=r;Array.isArray(r)&&(c=r[t]);var h=Array.isArray(n.config.legend.markers.size)?parseFloat(n.config.legend.markers.size[t]):parseFloat(n.config.legend.markers.size),u=Array.isArray(n.config.legend.markers.offsetX)?parseFloat(n.config.legend.markers.offsetX[t]):parseFloat(n.config.legend.markers.offsetX),p=Array.isArray(n.config.legend.markers.offsetY)?parseFloat(n.config.legend.markers.offsetY[t]):parseFloat(n.config.legend.markers.offsetY),g=Array.isArray(n.config.legend.markers.strokeWidth)?parseFloat(n.config.legend.markers.strokeWidth[t]):parseFloat(n.config.legend.markers.strokeWidth),x=o.style;if(x.height=2*(h+g)+"px",x.width=2*(h+g)+"px",x.left=u+"px",x.top=p+"px",n.config.legend.markers.customHTML)x.background="transparent",x.color=i[t],Array.isArray(n.config.legend.markers.customHTML)?n.config.legend.markers.customHTML[t]&&(o.innerHTML=n.config.legend.markers.customHTML[t]()):o.innerHTML=n.config.legend.markers.customHTML();else{var v=new pt(this.ctx).getMarkerConfig({cssClass:"apexcharts-legend-marker apexcharts-marker apexcharts-marker-".concat(c),seriesIndex:t,strokeWidth:g,size:h}),k=SVG(o).size("100%","100%"),A=new V(this.ctx).drawMarker(0,0,X(X({},v),{},{pointFillColor:Array.isArray(i)?i[t]:v.pointFillColor,shape:c}));SVG.select(".apexcharts-legend-marker.apexcharts-marker").members.forEach(function(S){S.node.classList.contains("apexcharts-marker-triangle")?S.node.style.transform="translate(50%, 45%)":S.node.style.transform="translate(50%, 50%)"}),k.add(A)}return o}},{key:"drawLegends",value:function(){var e=this,t=this.w,i=t.config.legend.fontFamily,n=t.globals.seriesNames,o=t.config.legend.markers.fillColors?t.config.legend.markers.fillColors.slice():t.globals.colors.slice();if(t.config.chart.type==="heatmap"){var r=t.config.plotOptions.heatmap.colorScale.ranges;n=r.map(function(C){return C.name?C.name:C.from+" - "+C.to}),o=r.map(function(C){return C.color})}else this.isBarsDistributed&&(n=t.globals.labels.slice());t.config.legend.customLegendItems.length&&(n=t.config.legend.customLegendItems);for(var c=t.globals.legendFormatter,h=t.config.legend.inverseOrder,u=h?n.length-1:0;h?u>=0:u<=n.length-1;h?u--:u++){var p,g=c(n[u],{seriesIndex:u,w:t}),x=!1,v=!1;if(t.globals.collapsedSeries.length>0)for(var k=0;k<t.globals.collapsedSeries.length;k++)t.globals.collapsedSeries[k].index===u&&(x=!0);if(t.globals.ancillaryCollapsedSeriesIndices.length>0)for(var A=0;A<t.globals.ancillaryCollapsedSeriesIndices.length;A++)t.globals.ancillaryCollapsedSeriesIndices[A]===u&&(v=!0);var S=this.createLegendMarker({i:u,fillcolor:o});V.setAttrs(S,{rel:u+1,"data:collapsed":x||v}),(x||v)&&S.classList.add("apexcharts-inactive-legend");var M=document.createElement("div"),L=document.createElement("span");L.classList.add("apexcharts-legend-text"),L.innerHTML=Array.isArray(g)?g.join(" "):g;var d=t.config.legend.labels.useSeriesColors?t.globals.colors[u]:Array.isArray(t.config.legend.labels.colors)?(p=t.config.legend.labels.colors)===null||p===void 0?void 0:p[u]:t.config.legend.labels.colors;d||(d=t.config.chart.foreColor),L.style.color=d,L.style.fontSize=parseFloat(t.config.legend.fontSize)+"px",L.style.fontWeight=t.config.legend.fontWeight,L.style.fontFamily=i||t.config.chart.fontFamily,V.setAttrs(L,{rel:u+1,i:u,"data:default-text":encodeURIComponent(g),"data:collapsed":x||v}),M.appendChild(S),M.appendChild(L);var b=new he(this.ctx);t.config.legend.showForZeroSeries||b.getSeriesTotalByIndex(u)===0&&b.seriesHaveSameValues(u)&&!b.isSeriesNull(u)&&t.globals.collapsedSeriesIndices.indexOf(u)===-1&&t.globals.ancillaryCollapsedSeriesIndices.indexOf(u)===-1&&M.classList.add("apexcharts-hidden-zero-series"),t.config.legend.showForNullSeries||b.isSeriesNull(u)&&t.globals.collapsedSeriesIndices.indexOf(u)===-1&&t.globals.ancillaryCollapsedSeriesIndices.indexOf(u)===-1&&M.classList.add("apexcharts-hidden-null-series"),t.globals.dom.elLegendWrap.appendChild(M),t.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(t.config.legend.horizontalAlign)),t.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+t.config.legend.position),M.classList.add("apexcharts-legend-series"),M.style.margin="".concat(t.config.legend.itemMargin.vertical,"px ").concat(t.config.legend.itemMargin.horizontal,"px"),t.globals.dom.elLegendWrap.style.width=t.config.legend.width?t.config.legend.width+"px":"",t.globals.dom.elLegendWrap.style.height=t.config.legend.height?t.config.legend.height+"px":"",V.setAttrs(M,{rel:u+1,seriesName:H.escapeString(n[u]),"data:collapsed":x||v}),(x||v)&&M.classList.add("apexcharts-inactive-legend"),t.config.legend.onItemClick.toggleDataSeries||M.classList.add("apexcharts-no-click")}t.globals.dom.elWrap.addEventListener("click",e.onLegendClick,!0),t.config.legend.onItemHover.highlightDataSeries&&t.config.legend.customLegendItems.length===0&&(t.globals.dom.elWrap.addEventListener("mousemove",e.onLegendHovered,!0),t.globals.dom.elWrap.addEventListener("mouseout",e.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(e,t){var i=this.w,n=i.globals.dom.elLegendWrap,o=n.clientHeight,r=0,c=0;if(i.config.legend.position==="bottom")c=i.globals.svgHeight-Math.min(o,i.globals.svgHeight/2)-5;else if(i.config.legend.position==="top"){var h=new Wt(this.ctx),u=h.dimHelpers.getTitleSubtitleCoords("title").height,p=h.dimHelpers.getTitleSubtitleCoords("subtitle").height;c=(u>0?u-10:0)+(p>0?p-10:0)}n.style.position="absolute",r=r+e+i.config.legend.offsetX,c=c+t+i.config.legend.offsetY,n.style.left=r+"px",n.style.top=c+"px",i.config.legend.position==="right"&&(n.style.left="auto",n.style.right=25+i.config.legend.offsetX+"px"),["width","height"].forEach(function(g){n.style[g]&&(n.style[g]=parseInt(i.config.legend[g],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var e=this.w;e.globals.dom.elLegendWrap.style.right=0;var t=new Wt(this.ctx),i=t.dimHelpers.getTitleSubtitleCoords("title"),n=t.dimHelpers.getTitleSubtitleCoords("subtitle"),o=0;e.config.legend.position==="top"&&(o=i.height+n.height+e.config.title.margin+e.config.subtitle.margin-10),this.setLegendWrapXY(20,o)}},{key:"legendAlignVertical",value:function(){var e=this.w,t=this.legendHelpers.getLegendDimensions(),i=0;e.config.legend.position==="left"&&(i=20),e.config.legend.position==="right"&&(i=e.globals.svgWidth-t.clww-10),this.setLegendWrapXY(i,20)}},{key:"onLegendHovered",value:function(e){var t=this.w,i=e.target.classList.contains("apexcharts-legend-series")||e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker");if(t.config.chart.type==="heatmap"||this.isBarsDistributed){if(i){var n=parseInt(e.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,n,this.w]),new it(this.ctx).highlightRangeInSeries(e,e.target)}}else!e.target.classList.contains("apexcharts-inactive-legend")&&i&&new it(this.ctx).toggleSeriesOnHover(e,e.target)}},{key:"onLegendClick",value:function(e){var t=this.w;if(!t.config.legend.customLegendItems.length&&(e.target.classList.contains("apexcharts-legend-series")||e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker"))){var i=parseInt(e.target.getAttribute("rel"),10)-1,n=e.target.getAttribute("data:collapsed")==="true",o=this.w.config.chart.events.legendClick;typeof o=="function"&&o(this.ctx,i,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,i,this.w]);var r=this.w.config.legend.markers.onClick;typeof r=="function"&&e.target.classList.contains("apexcharts-legend-marker")&&(r(this.ctx,i,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,i,this.w])),t.config.chart.type!=="treemap"&&t.config.chart.type!=="heatmap"&&!this.isBarsDistributed&&t.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(i,n)}}}]),E}(),Ii=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w;var t=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=t.globals.minX,this.maxX=t.globals.maxX}return y(E,[{key:"createToolbar",value:function(){var e=this,t=this.w,i=function(){return document.createElement("div")},n=i();if(n.setAttribute("class","apexcharts-toolbar"),n.style.top=t.config.chart.toolbar.offsetY+"px",n.style.right=3-t.config.chart.toolbar.offsetX+"px",t.globals.dom.elWrap.appendChild(n),this.elZoom=i(),this.elZoomIn=i(),this.elZoomOut=i(),this.elPan=i(),this.elSelection=i(),this.elZoomReset=i(),this.elMenuIcon=i(),this.elMenu=i(),this.elCustomIcons=[],this.t=t.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var o=0;o<this.t.customIcons.length;o++)this.elCustomIcons.push(i());var r=[],c=function(g,x,v){var k=g.toLowerCase();e.t[k]&&t.config.chart.zoom.enabled&&r.push({el:x,icon:typeof e.t[k]=="string"?e.t[k]:v,title:e.localeValues[g],class:"apexcharts-".concat(k,"-icon")})};c("zoomIn",this.elZoomIn,`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
</svg>
`),c("zoomOut",this.elZoomOut,`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
</svg>
`);var h=function(g){e.t[g]&&t.config.chart[g].enabled&&r.push({el:g==="zoom"?e.elZoom:e.elSelection,icon:typeof e.t[g]=="string"?e.t[g]:g==="zoom"?`<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
    <path d="M0 0h24v24H0V0z" fill="none"/>
    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>
</svg>`:`<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>
</svg>`,title:e.localeValues[g==="zoom"?"selectionZoom":"selection"],class:t.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(g,"-icon")})};h("zoom"),h("selection"),this.t.pan&&t.config.chart.zoom.enabled&&r.push({el:this.elPan,icon:typeof this.t.pan=="string"?this.t.pan:`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
    <defs>
        <path d="M0 0h24v24H0z" id="a"/>
    </defs>
    <clipPath id="b">
        <use overflow="visible" xlink:href="#a"/>
    </clipPath>
    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>
</svg>`,title:this.localeValues.pan,class:t.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),c("reset",this.elZoomReset,`<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`),this.t.download&&r.push({el:this.elMenuIcon,icon:typeof this.t.download=="string"?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var u=0;u<this.elCustomIcons.length;u++)r.push({el:this.elCustomIcons[u],icon:this.t.customIcons[u].icon,title:this.t.customIcons[u].title,index:this.t.customIcons[u].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[u].class});r.forEach(function(g,x){g.index&&H.moveIndexInArray(r,x,g.index)});for(var p=0;p<r.length;p++)V.setAttrs(r[p].el,{class:r[p].class,title:r[p].title}),r[p].el.innerHTML=r[p].icon,n.appendChild(r[p].el);this._createHamburgerMenu(n),t.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):t.globals.panEnabled?this.elPan.classList.add(this.selectedClass):t.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(e){this.elMenuItems=[],e.appendChild(this.elMenu),V.setAttrs(this.elMenu,{class:"apexcharts-menu"});for(var t=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}],i=0;i<t.length;i++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[i].innerHTML=t[i].title,V.setAttrs(this.elMenuItems[i],{class:"apexcharts-menu-item ".concat(t[i].name),title:t[i].title}),this.elMenu.appendChild(this.elMenuItems[i])}},{key:"addToolbarEventListeners",value:function(){var e=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(i){i.classList.contains("exportSVG")?i.addEventListener("click",e.handleDownload.bind(e,"svg")):i.classList.contains("exportPNG")?i.addEventListener("click",e.handleDownload.bind(e,"png")):i.classList.contains("exportCSV")&&i.addEventListener("click",e.handleDownload.bind(e,"csv"))});for(var t=0;t<this.t.customIcons.length;t++)this.elCustomIcons[t].addEventListener("click",this.t.customIcons[t].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(e){this.ctx.getSyncedCharts().forEach(function(t){t.ctx.toolbar.toggleOtherControls();var i=e==="selection"?t.ctx.toolbar.elSelection:t.ctx.toolbar.elZoom,n=e==="selection"?"selectionEnabled":"zoomEnabled";t.w.globals[n]=!t.w.globals[n],i.classList.contains(t.ctx.toolbar.selectedClass)?i.classList.remove(t.ctx.toolbar.selectedClass):i.classList.add(t.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var e=this.w;this.elZoom||(this.elZoom=e.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=e.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=e.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(e){this.toggleOtherControls(),e==="pan"?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var t=e==="pan"?this.elPan:this.elZoom,i=e==="pan"?this.elZoom:this.elPan;t&&t.classList.add(this.selectedClass),i&&i.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(e){e.ctx.toolbar.toggleOtherControls(),e.w.globals.panEnabled=!e.w.globals.panEnabled,e.ctx.toolbar.elPan.classList.contains(e.ctx.toolbar.selectedClass)?e.ctx.toolbar.elPan.classList.remove(e.ctx.toolbar.selectedClass):e.ctx.toolbar.elPan.classList.add(e.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var e=this,t=this.w;t.globals.panEnabled=!1,t.globals.zoomEnabled=!1,t.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(i){i&&i.classList.remove(e.selectedClass)})}},{key:"handleZoomIn",value:function(){var e=this.w;e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY);var t=(this.minX+this.maxX)/2,i=(this.minX+t)/2,n=(this.maxX+t)/2,o=this._getNewMinXMaxX(i,n);e.globals.disableZoomIn||this.zoomUpdateOptions(o.minX,o.maxX)}},{key:"handleZoomOut",value:function(){var e=this.w;if(e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY),!(e.config.xaxis.type==="datetime"&&new Date(this.minX).getUTCFullYear()<1e3)){var t=(this.minX+this.maxX)/2,i=this.minX-(t-this.minX),n=this.maxX-(t-this.maxX),o=this._getNewMinXMaxX(i,n);e.globals.disableZoomOut||this.zoomUpdateOptions(o.minX,o.maxX)}}},{key:"_getNewMinXMaxX",value:function(e,t){var i=this.w.config.xaxis.convertedCatToNumeric;return{minX:i?Math.floor(e):e,maxX:i?Math.floor(t):t}}},{key:"zoomUpdateOptions",value:function(e,t){var i=this.w;if(e!==void 0||t!==void 0){if(!(i.config.xaxis.convertedCatToNumeric&&(e<1&&(e=1,t=i.globals.dataPoints),t-e<2))){var n={min:e,max:t},o=this.getBeforeZoomRange(n);o&&(n=o.xaxis);var r={xaxis:n},c=H.clone(i.globals.initialConfig.yaxis);i.config.chart.group||(r.yaxis=c),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(r,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(n,c)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(e,t){typeof this.ev.zoomed=="function"&&this.ev.zoomed(this.ctx,{xaxis:e,yaxis:t})}},{key:"getBeforeZoomRange",value:function(e,t){var i=null;return typeof this.ev.beforeZoom=="function"&&(i=this.ev.beforeZoom(this,{xaxis:e,yaxis:t})),i}},{key:"toggleMenu",value:function(){var e=this;window.setTimeout(function(){e.elMenu.classList.contains("apexcharts-menu-open")?e.elMenu.classList.remove("apexcharts-menu-open"):e.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(e){var t=this.w,i=new Lt(this.ctx);switch(e){case"svg":i.exportToSVG(this.ctx);break;case"png":i.exportToPng(this.ctx);break;case"csv":i.exportToCSV({series:t.config.series,columnDelimiter:t.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(e){this.ctx.getSyncedCharts().forEach(function(t){var i=t.w;if(i.globals.lastXAxis.min=i.globals.initialConfig.xaxis.min,i.globals.lastXAxis.max=i.globals.initialConfig.xaxis.max,t.updateHelpers.revertDefaultAxisMinMax(),typeof i.config.chart.events.beforeResetZoom=="function"){var n=i.config.chart.events.beforeResetZoom(t,i);n&&t.updateHelpers.revertDefaultAxisMinMax(n)}typeof i.config.chart.events.zoomed=="function"&&t.ctx.toolbar.zoomCallback({min:i.config.xaxis.min,max:i.config.xaxis.max}),i.globals.zoomed=!1;var o=t.ctx.series.emptyCollapsedSeries(H.clone(i.globals.initialSeries));t.updateHelpers._updateSeries(o,i.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),E}(),on=function(E){B(t,Ii);var e=O(t);function t(i){var n;return m(this,t),(n=e.call(this,i)).ctx=i,n.w=i.w,n.dragged=!1,n.graphics=new V(n.ctx),n.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend","wheel"],n.clientX=0,n.clientY=0,n.startX=0,n.endX=0,n.dragX=0,n.startY=0,n.endY=0,n.dragY=0,n.moveDirection="none",n.debounceTimer=null,n.debounceDelay=100,n.wheelDelay=400,n}return y(t,[{key:"init",value:function(i){var n=this,o=i.xyRatios,r=this.w,c=this;this.xyRatios=o,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=r.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),r.globals.dom.elGraphical.add(this.zoomRect),r.globals.dom.elGraphical.add(this.selectionRect),r.config.chart.selection.type==="x"?this.slDraggableRect=this.selectionRect.draggable({minX:0,minY:0,maxX:r.globals.gridWidth,maxY:r.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):r.config.chart.selection.type==="y"?this.slDraggableRect=this.selectionRect.draggable({minX:0,maxX:r.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.slDraggableRect=this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=r.globals.dom.baseEl.querySelector("".concat(r.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(h){n.hoverArea.addEventListener(h,c.svgMouseEvents.bind(c,o),{capture:!1,passive:!0})}),r.config.chart.zoom.allowMouseWheelZoom&&this.hoverArea.addEventListener("wheel",c.mouseWheelEvent.bind(c),{capture:!1,passive:!1})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(i,n){var o=this.w,r=this,c=this.ctx.toolbar,h=o.globals.zoomEnabled?o.config.chart.zoom.type:o.config.chart.selection.type,u=o.config.chart.toolbar.autoSelected;if(n.shiftKey?(this.shiftWasPressed=!0,c.enableZoomPanFromToolbar(u==="pan"?"zoom":"pan")):this.shiftWasPressed&&(c.enableZoomPanFromToolbar(u),this.shiftWasPressed=!1),n.target){var p,g=n.target.classList;if(n.target.parentNode&&n.target.parentNode!==null&&(p=n.target.parentNode.classList),!(g.contains("apexcharts-selection-rect")||g.contains("apexcharts-legend-marker")||g.contains("apexcharts-legend-text")||p&&p.contains("apexcharts-toolbar"))){if(r.clientX=n.type==="touchmove"||n.type==="touchstart"?n.touches[0].clientX:n.type==="touchend"?n.changedTouches[0].clientX:n.clientX,r.clientY=n.type==="touchmove"||n.type==="touchstart"?n.touches[0].clientY:n.type==="touchend"?n.changedTouches[0].clientY:n.clientY,n.type==="mousedown"&&n.which===1){var x=r.gridRect.getBoundingClientRect();r.startX=r.clientX-x.left,r.startY=r.clientY-x.top,r.dragged=!1,r.w.globals.mousedown=!0}if((n.type==="mousemove"&&n.which===1||n.type==="touchmove")&&(r.dragged=!0,o.globals.panEnabled?(o.globals.selection=null,r.w.globals.mousedown&&r.panDragging({context:r,zoomtype:h,xyRatios:i})):(r.w.globals.mousedown&&o.globals.zoomEnabled||r.w.globals.mousedown&&o.globals.selectionEnabled)&&(r.selection=r.selectionDrawing({context:r,zoomtype:h}))),n.type==="mouseup"||n.type==="touchend"||n.type==="mouseleave"){var v,k=(v=r.gridRect)===null||v===void 0?void 0:v.getBoundingClientRect();k&&r.w.globals.mousedown&&(r.endX=r.clientX-k.left,r.endY=r.clientY-k.top,r.dragX=Math.abs(r.endX-r.startX),r.dragY=Math.abs(r.endY-r.startY),(o.globals.zoomEnabled||o.globals.selectionEnabled)&&r.selectionDrawn({context:r,zoomtype:h}),o.globals.panEnabled&&o.config.xaxis.convertedCatToNumeric&&r.delayedPanScrolled()),o.globals.zoomEnabled&&r.hideSelectionRect(this.selectionRect),r.dragged=!1,r.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}}},{key:"mouseWheelEvent",value:function(i){var n=this,o=this.w;i.preventDefault();var r=Date.now();r-o.globals.lastWheelExecution>this.wheelDelay&&(this.executeMouseWheelZoom(i),o.globals.lastWheelExecution=r),this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(function(){r-o.globals.lastWheelExecution>n.wheelDelay&&(n.executeMouseWheelZoom(i),o.globals.lastWheelExecution=r)},this.debounceDelay)}},{key:"executeMouseWheelZoom",value:function(i){var n,o=this.w;this.minX=o.globals.isRangeBar?o.globals.minY:o.globals.minX,this.maxX=o.globals.isRangeBar?o.globals.maxY:o.globals.maxX;var r=(n=this.gridRect)===null||n===void 0?void 0:n.getBoundingClientRect();if(r){var c,h,u,p=(i.clientX-r.left)/r.width,g=this.minX,x=this.maxX,v=x-g;if(i.deltaY<0){var k=g+p*v;h=k-(c=.5*v)/2,u=k+c/2}else h=g-(c=1.5*v)/2,u=x+c/2;if(!o.globals.isRangeBar){h=Math.max(h,o.globals.initialMinX),u=Math.min(u,o.globals.initialMaxX);var A=.01*(o.globals.initialMaxX-o.globals.initialMinX);if(u-h<A){var S=(h+u)/2;h=S-A/2,u=S+A/2}}var M=this._getNewMinXMaxX(h,u);isNaN(M.minX)||isNaN(M.maxX)||this.zoomUpdateOptions(M.minX,M.maxX)}}},{key:"makeSelectionRectDraggable",value:function(){var i=this.w;if(this.selectionRect){var n=this.selectionRect.node.getBoundingClientRect();n.width>0&&n.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:i.globals.gridWidth,maxY:i.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var i=this.w,n=this.xyRatios;if(!i.globals.zoomEnabled){if(i.globals.selection!==void 0&&i.globals.selection!==null)this.drawSelectionRect(i.globals.selection);else if(i.config.chart.selection.xaxis.min!==void 0&&i.config.chart.selection.xaxis.max!==void 0){var o=(i.config.chart.selection.xaxis.min-i.globals.minX)/n.xRatio,r=i.globals.gridWidth-(i.globals.maxX-i.config.chart.selection.xaxis.max)/n.xRatio-o;i.globals.isRangeBar&&(o=(i.config.chart.selection.xaxis.min-i.globals.yAxisScale[0].niceMin)/n.invertedYRatio,r=(i.config.chart.selection.xaxis.max-i.config.chart.selection.xaxis.min)/n.invertedYRatio);var c={x:o,y:0,width:r,height:i.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0};this.drawSelectionRect(c),this.makeSelectionRectDraggable(),typeof i.config.chart.events.selection=="function"&&i.config.chart.events.selection(this.ctx,{xaxis:{min:i.config.chart.selection.xaxis.min,max:i.config.chart.selection.xaxis.max},yaxis:{}})}}}},{key:"drawSelectionRect",value:function(i){var n=i.x,o=i.y,r=i.width,c=i.height,h=i.translateX,u=h===void 0?0:h,p=i.translateY,g=p===void 0?0:p,x=this.w,v=this.zoomRect,k=this.selectionRect;if(this.dragged||x.globals.selection!==null){var A={transform:"translate("+u+", "+g+")"};x.globals.zoomEnabled&&this.dragged&&(r<0&&(r=1),v.attr({x:n,y:o,width:r,height:c,fill:x.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":x.config.chart.zoom.zoomedArea.fill.opacity,stroke:x.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":x.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":x.config.chart.zoom.zoomedArea.stroke.opacity}),V.setAttrs(v.node,A)),x.globals.selectionEnabled&&(k.attr({x:n,y:o,width:r>0?r:0,height:c>0?c:0,fill:x.config.chart.selection.fill.color,"fill-opacity":x.config.chart.selection.fill.opacity,stroke:x.config.chart.selection.stroke.color,"stroke-width":x.config.chart.selection.stroke.width,"stroke-dasharray":x.config.chart.selection.stroke.dashArray,"stroke-opacity":x.config.chart.selection.stroke.opacity}),V.setAttrs(k.node,A))}}},{key:"hideSelectionRect",value:function(i){i&&i.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(i){var n=i.context,o=i.zoomtype,r=this.w,c=n,h=this.gridRect.getBoundingClientRect(),u=c.startX-1,p=c.startY,g=!1,x=!1,v=c.clientX-h.left-u,k=c.clientY-h.top-p,A={};return Math.abs(v+u)>r.globals.gridWidth?v=r.globals.gridWidth-u:c.clientX-h.left<0&&(v=u),u>c.clientX-h.left&&(g=!0,v=Math.abs(v)),p>c.clientY-h.top&&(x=!0,k=Math.abs(k)),A=o==="x"?{x:g?u-v:u,y:0,width:v,height:r.globals.gridHeight}:o==="y"?{x:0,y:x?p-k:p,width:r.globals.gridWidth,height:k}:{x:g?u-v:u,y:x?p-k:p,width:v,height:k},c.drawSelectionRect(A),c.selectionDragging("resizing"),A}},{key:"selectionDragging",value:function(i,n){var o=this,r=this.w,c=this.xyRatios,h=this.selectionRect,u=0;i==="resizing"&&(u=30);var p=function(x){return parseFloat(h.node.getAttribute(x))},g={x:p("x"),y:p("y"),width:p("width"),height:p("height")};r.globals.selection=g,typeof r.config.chart.events.selection=="function"&&r.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var x,v,k,A,S=o.gridRect.getBoundingClientRect(),M=h.node.getBoundingClientRect();r.globals.isRangeBar?(x=r.globals.yAxisScale[0].niceMin+(M.left-S.left)*c.invertedYRatio,v=r.globals.yAxisScale[0].niceMin+(M.right-S.left)*c.invertedYRatio,k=0,A=1):(x=r.globals.xAxisScale.niceMin+(M.left-S.left)*c.xRatio,v=r.globals.xAxisScale.niceMin+(M.right-S.left)*c.xRatio,k=r.globals.yAxisScale[0].niceMin+(S.bottom-M.bottom)*c.yRatio[0],A=r.globals.yAxisScale[0].niceMax-(M.top-S.top)*c.yRatio[0]);var L={xaxis:{min:x,max:v},yaxis:{min:k,max:A}};r.config.chart.events.selection(o.ctx,L),r.config.chart.brush.enabled&&r.config.chart.events.brushScrolled!==void 0&&r.config.chart.events.brushScrolled(o.ctx,L)},u))}},{key:"selectionDrawn",value:function(i){var n=i.context,o=i.zoomtype,r=this.w,c=n,h=this.xyRatios,u=this.ctx.toolbar;if(c.startX>c.endX){var p=c.startX;c.startX=c.endX,c.endX=p}if(c.startY>c.endY){var g=c.startY;c.startY=c.endY,c.endY=g}var x=void 0,v=void 0;r.globals.isRangeBar?(x=r.globals.yAxisScale[0].niceMin+c.startX*h.invertedYRatio,v=r.globals.yAxisScale[0].niceMin+c.endX*h.invertedYRatio):(x=r.globals.xAxisScale.niceMin+c.startX*h.xRatio,v=r.globals.xAxisScale.niceMin+c.endX*h.xRatio);var k=[],A=[];if(r.config.yaxis.forEach(function(I,P){var _=r.globals.seriesYAxisMap[P][0];k.push(r.globals.yAxisScale[P].niceMax-h.yRatio[_]*c.startY),A.push(r.globals.yAxisScale[P].niceMax-h.yRatio[_]*c.endY)}),c.dragged&&(c.dragX>10||c.dragY>10)&&x!==v){if(r.globals.zoomEnabled){var S=H.clone(r.globals.initialConfig.yaxis),M=H.clone(r.globals.initialConfig.xaxis);if(r.globals.zoomed=!0,r.config.xaxis.convertedCatToNumeric&&(x=Math.floor(x),v=Math.floor(v),x<1&&(x=1,v=r.globals.dataPoints),v-x<2&&(v=x+1)),o!=="xy"&&o!=="x"||(M={min:x,max:v}),o!=="xy"&&o!=="y"||S.forEach(function(I,P){S[P].min=A[P],S[P].max=k[P]}),u){var L=u.getBeforeZoomRange(M,S);L&&(M=L.xaxis?L.xaxis:M,S=L.yaxis?L.yaxis:S)}var d={xaxis:M};r.config.chart.group||(d.yaxis=S),c.ctx.updateHelpers._updateOptions(d,!1,c.w.config.chart.animations.dynamicAnimation.enabled),typeof r.config.chart.events.zoomed=="function"&&u.zoomCallback(M,S)}else if(r.globals.selectionEnabled){var b,C=null;b={min:x,max:v},o!=="xy"&&o!=="y"||(C=H.clone(r.config.yaxis)).forEach(function(I,P){C[P].min=A[P],C[P].max=k[P]}),r.globals.selection=c.selection,typeof r.config.chart.events.selection=="function"&&r.config.chart.events.selection(c.ctx,{xaxis:b,yaxis:C})}}}},{key:"panDragging",value:function(i){var n=i.context,o=this.w,r=n;if(o.globals.lastClientPosition.x!==void 0){var c=o.globals.lastClientPosition.x-r.clientX,h=o.globals.lastClientPosition.y-r.clientY;Math.abs(c)>Math.abs(h)&&c>0?this.moveDirection="left":Math.abs(c)>Math.abs(h)&&c<0?this.moveDirection="right":Math.abs(h)>Math.abs(c)&&h>0?this.moveDirection="up":Math.abs(h)>Math.abs(c)&&h<0&&(this.moveDirection="down")}o.globals.lastClientPosition={x:r.clientX,y:r.clientY};var u=o.globals.isRangeBar?o.globals.minY:o.globals.minX,p=o.globals.isRangeBar?o.globals.maxY:o.globals.maxX;o.config.xaxis.convertedCatToNumeric||r.panScrolled(u,p)}},{key:"delayedPanScrolled",value:function(){var i=this.w,n=i.globals.minX,o=i.globals.maxX,r=(i.globals.maxX-i.globals.minX)/2;this.moveDirection==="left"?(n=i.globals.minX+r,o=i.globals.maxX+r):this.moveDirection==="right"&&(n=i.globals.minX-r,o=i.globals.maxX-r),n=Math.floor(n),o=Math.floor(o),this.updateScrolledChart({xaxis:{min:n,max:o}},n,o)}},{key:"panScrolled",value:function(i,n){var o=this.w,r=this.xyRatios,c=H.clone(o.globals.initialConfig.yaxis),h=r.xRatio,u=o.globals.minX,p=o.globals.maxX;o.globals.isRangeBar&&(h=r.invertedYRatio,u=o.globals.minY,p=o.globals.maxY),this.moveDirection==="left"?(i=u+o.globals.gridWidth/15*h,n=p+o.globals.gridWidth/15*h):this.moveDirection==="right"&&(i=u-o.globals.gridWidth/15*h,n=p-o.globals.gridWidth/15*h),o.globals.isRangeBar||(i<o.globals.initialMinX||n>o.globals.initialMaxX)&&(i=u,n=p);var g={xaxis:{min:i,max:n}};o.config.chart.group||(g.yaxis=c),this.updateScrolledChart(g,i,n)}},{key:"updateScrolledChart",value:function(i,n,o){var r=this.w;this.ctx.updateHelpers._updateOptions(i,!1,!1),typeof r.config.chart.events.scrolled=="function"&&r.config.chart.events.scrolled(this.ctx,{xaxis:{min:n,max:o}})}}]),t}(),ha=function(){function E(e){m(this,E),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx}return y(E,[{key:"getNearestValues",value:function(e){var t=e.hoverArea,i=e.elGrid,n=e.clientX,o=e.clientY,r=this.w,c=i.getBoundingClientRect(),h=c.width,u=c.height,p=h/(r.globals.dataPoints-1),g=u/r.globals.dataPoints,x=this.hasBars();!r.globals.comboCharts&&!x||r.config.xaxis.convertedCatToNumeric||(p=h/r.globals.dataPoints);var v=n-c.left-r.globals.barPadForNumericAxis,k=o-c.top;v<0||k<0||v>h||k>u?(t.classList.remove("hovering-zoom"),t.classList.remove("hovering-pan")):r.globals.zoomEnabled?(t.classList.remove("hovering-pan"),t.classList.add("hovering-zoom")):r.globals.panEnabled&&(t.classList.remove("hovering-zoom"),t.classList.add("hovering-pan"));var A=Math.round(v/p),S=Math.floor(k/g);x&&!r.config.xaxis.convertedCatToNumeric&&(A=Math.ceil(v/p),A-=1);var M=null,L=null,d=r.globals.seriesXvalues.map(function(_){return _.filter(function(N){return H.isNumber(N)})}),b=r.globals.seriesYvalues.map(function(_){return _.filter(function(N){return H.isNumber(N)})});if(r.globals.isXNumeric){var C=this.ttCtx.getElGrid().getBoundingClientRect(),I=v*(C.width/h),P=k*(C.height/u);M=(L=this.closestInMultiArray(I,P,d,b)).index,A=L.j,M!==null&&(d=r.globals.seriesXvalues[M],A=(L=this.closestInArray(I,d)).index)}return r.globals.capturedSeriesIndex=M===null?-1:M,(!A||A<1)&&(A=0),r.globals.isBarHorizontal?r.globals.capturedDataPointIndex=S:r.globals.capturedDataPointIndex=A,{capturedSeries:M,j:r.globals.isBarHorizontal?S:A,hoverX:v,hoverY:k}}},{key:"closestInMultiArray",value:function(e,t,i,n){var o=this.w,r=0,c=null,h=-1;o.globals.series.length>1?r=this.getFirstActiveXArray(i):c=0;var u=i[r][0],p=Math.abs(e-u);if(i.forEach(function(v){v.forEach(function(k,A){var S=Math.abs(e-k);S<=p&&(p=S,h=A)})}),h!==-1){var g=n[r][h],x=Math.abs(t-g);c=r,n.forEach(function(v,k){var A=Math.abs(t-v[h]);A<=x&&(x=A,c=k)})}return{index:c,j:h}}},{key:"getFirstActiveXArray",value:function(e){for(var t=this.w,i=0,n=e.map(function(r,c){return r.length>0?c:-1}),o=0;o<n.length;o++)if(n[o]!==-1&&t.globals.collapsedSeriesIndices.indexOf(o)===-1&&t.globals.ancillaryCollapsedSeriesIndices.indexOf(o)===-1){i=n[o];break}return i}},{key:"closestInArray",value:function(e,t){for(var i=t[0],n=null,o=Math.abs(e-i),r=0;r<t.length;r++){var c=Math.abs(e-t[r]);c<o&&(o=c,n=r)}return{index:n}}},{key:"isXoverlap",value:function(e){var t=[],i=this.w.globals.seriesX.filter(function(o){return o[0]!==void 0});if(i.length>0)for(var n=0;n<i.length-1;n++)i[n][e]!==void 0&&i[n+1][e]!==void 0&&i[n][e]!==i[n+1][e]&&t.push("unEqual");return t.length===0}},{key:"isInitialSeriesSameLen",value:function(){for(var e=!0,t=this.w.globals.initialSeries,i=0;i<t.length-1;i++)if(t[i].data.length!==t[i+1].data.length){e=!1;break}return e}},{key:"getBarsHeight",value:function(e){return ie(e).reduce(function(t,i){return t+i.getBBox().height},0)}},{key:"getElMarkers",value:function(e){return typeof e=="number"?this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-series-markers-wrap > *")):this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap > *")}},{key:"getAllMarkers",value:function(){var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(e=ie(e)).sort(function(i,n){var o=Number(i.getAttribute("data:realIndex")),r=Number(n.getAttribute("data:realIndex"));return r<o?1:r>o?-1:0});var t=[];return e.forEach(function(i){t.push(i.querySelector(".apexcharts-marker"))}),t}},{key:"hasMarkers",value:function(e){return this.getElMarkers(e).length>0}},{key:"getPathFromPoint",value:function(e,t){var i=Number(e.getAttribute("cx")),n=Number(e.getAttribute("cy")),o=e.getAttribute("shape");return new V(this.ctx).getMarkerPath(i,n,o,t)}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(e){var t=this.w,i=t.config.markers.hover.size;return i===void 0&&(i=t.globals.markers.size[e]+t.config.markers.hover.sizeOffset),i}},{key:"toggleAllTooltipSeriesGroups",value:function(e){var t=this.w,i=this.ttCtx;i.allTooltipSeriesGroups.length===0&&(i.allTooltipSeriesGroups=t.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var n=i.allTooltipSeriesGroups,o=0;o<n.length;o++)e==="enable"?(n[o].classList.add("apexcharts-active"),n[o].style.display=t.config.tooltip.items.display):(n[o].classList.remove("apexcharts-active"),n[o].style.display="none")}}]),E}(),Oe=function(){function E(e){m(this,E),this.w=e.w,this.ctx=e.ctx,this.ttCtx=e,this.tooltipUtil=new ha(e)}return y(E,[{key:"drawSeriesTexts",value:function(e){var t=e.shared,i=t===void 0||t,n=e.ttItems,o=e.i,r=o===void 0?0:o,c=e.j,h=c===void 0?null:c,u=e.y1,p=e.y2,g=e.e,x=this.w;x.config.tooltip.custom!==void 0?this.handleCustomTooltip({i:r,j:h,y1:u,y2:p,w:x}):this.toggleActiveInactiveSeries(i,r);var v=this.getValuesToPrint({i:r,j:h});this.printLabels({i:r,j:h,values:v,ttItems:n,shared:i,e:g});var k=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=k.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=k.getBoundingClientRect().height}},{key:"printLabels",value:function(e){var t,i=this,n=e.i,o=e.j,r=e.values,c=e.ttItems,h=e.shared,u=e.e,p=this.w,g=[],x=function(C){return p.globals.seriesGoals[C]&&p.globals.seriesGoals[C][o]&&Array.isArray(p.globals.seriesGoals[C][o])},v=r.xVal,k=r.zVal,A=r.xAxisTTVal,S="",M=p.globals.colors[n];o!==null&&p.config.plotOptions.bar.distributed&&(M=p.globals.colors[o]);for(var L=function(C,I){var P=i.getFormatters(n);S=i.getSeriesName({fn:P.yLbTitleFormatter,index:n,seriesIndex:n,j:o}),p.config.chart.type==="treemap"&&(S=P.yLbTitleFormatter(String(p.config.series[n].data[o].x),{series:p.globals.series,seriesIndex:n,dataPointIndex:o,w:p}));var _=p.config.tooltip.inverseOrder?I:C;if(p.globals.axisCharts){var N=function(J){var Z,Q,se,ce;return p.globals.isRangeData?P.yLbFormatter((Z=p.globals.seriesRangeStart)===null||Z===void 0||(Q=Z[J])===null||Q===void 0?void 0:Q[o],{series:p.globals.seriesRangeStart,seriesIndex:J,dataPointIndex:o,w:p})+" - "+P.yLbFormatter((se=p.globals.seriesRangeEnd)===null||se===void 0||(ce=se[J])===null||ce===void 0?void 0:ce[o],{series:p.globals.seriesRangeEnd,seriesIndex:J,dataPointIndex:o,w:p}):P.yLbFormatter(p.globals.series[J][o],{series:p.globals.series,seriesIndex:J,dataPointIndex:o,w:p})};if(h)P=i.getFormatters(_),S=i.getSeriesName({fn:P.yLbTitleFormatter,index:_,seriesIndex:n,j:o}),M=p.globals.colors[_],t=N(_),x(_)&&(g=p.globals.seriesGoals[_][o].map(function(J){return{attrs:J,val:P.yLbFormatter(J.value,{seriesIndex:_,dataPointIndex:o,w:p})}}));else{var Y,G=u==null||(Y=u.target)===null||Y===void 0?void 0:Y.getAttribute("fill");G&&(G.indexOf("url")!==-1?G.indexOf("Pattern")!==-1&&(M=p.globals.dom.baseEl.querySelector(G.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke")):M=G),t=N(n),x(n)&&Array.isArray(p.globals.seriesGoals[n][o])&&(g=p.globals.seriesGoals[n][o].map(function(J){return{attrs:J,val:P.yLbFormatter(J.value,{seriesIndex:n,dataPointIndex:o,w:p})}}))}}o===null&&(t=P.yLbFormatter(p.globals.series[n],X(X({},p),{},{seriesIndex:n,dataPointIndex:n}))),i.DOMHandling({i:n,t:_,j:o,ttItems:c,values:{val:t,goalVals:g,xVal:v,xAxisTTVal:A,zVal:k},seriesName:S,shared:h,pColor:M})},d=0,b=p.globals.series.length-1;d<p.globals.series.length;d++,b--)L(d,b)}},{key:"getFormatters",value:function(e){var t,i=this.w,n=i.globals.yLabelFormatters[e];return i.globals.ttVal!==void 0?Array.isArray(i.globals.ttVal)?(n=i.globals.ttVal[e]&&i.globals.ttVal[e].formatter,t=i.globals.ttVal[e]&&i.globals.ttVal[e].title&&i.globals.ttVal[e].title.formatter):(n=i.globals.ttVal.formatter,typeof i.globals.ttVal.title.formatter=="function"&&(t=i.globals.ttVal.title.formatter)):t=i.config.tooltip.y.title.formatter,typeof n!="function"&&(n=i.globals.yLabelFormatters[0]?i.globals.yLabelFormatters[0]:function(o){return o}),typeof t!="function"&&(t=function(o){return o}),{yLbFormatter:n,yLbTitleFormatter:t}}},{key:"getSeriesName",value:function(e){var t=e.fn,i=e.index,n=e.seriesIndex,o=e.j,r=this.w;return t(String(r.globals.seriesNames[i]),{series:r.globals.series,seriesIndex:n,dataPointIndex:o,w:r})}},{key:"DOMHandling",value:function(e){e.i;var t=e.t,i=e.j,n=e.ttItems,o=e.values,r=e.seriesName,c=e.shared,h=e.pColor,u=this.w,p=this.ttCtx,g=o.val,x=o.goalVals,v=o.xVal,k=o.xAxisTTVal,A=o.zVal,S=null;S=n[t].children,u.config.tooltip.fillSeriesColor&&(n[t].style.backgroundColor=h,S[0].style.display="none"),p.showTooltipTitle&&(p.tooltipTitle===null&&(p.tooltipTitle=u.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),p.tooltipTitle.innerHTML=v),p.isXAxisTooltipEnabled&&(p.xaxisTooltipText.innerHTML=k!==""?k:v);var M=n[t].querySelector(".apexcharts-tooltip-text-y-label");M&&(M.innerHTML=r||"");var L=n[t].querySelector(".apexcharts-tooltip-text-y-value");L&&(L.innerHTML=g!==void 0?g:""),S[0]&&S[0].classList.contains("apexcharts-tooltip-marker")&&(u.config.tooltip.marker.fillColors&&Array.isArray(u.config.tooltip.marker.fillColors)&&(h=u.config.tooltip.marker.fillColors[t]),S[0].style.backgroundColor=h),u.config.tooltip.marker.show||(S[0].style.display="none");var d=n[t].querySelector(".apexcharts-tooltip-text-goals-label"),b=n[t].querySelector(".apexcharts-tooltip-text-goals-value");if(x.length&&u.globals.seriesGoals[t]){var C=function(){var _="<div >",N="<div>";x.forEach(function(Y,G){_+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(Y.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(Y.attrs.name,"</div>"),N+="<div>".concat(Y.val,"</div>")}),d.innerHTML=_+"</div>",b.innerHTML=N+"</div>"};c?u.globals.seriesGoals[t][i]&&Array.isArray(u.globals.seriesGoals[t][i])?C():(d.innerHTML="",b.innerHTML=""):C()}else d.innerHTML="",b.innerHTML="";if(A!==null&&(n[t].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=u.config.tooltip.z.title,n[t].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=A!==void 0?A:""),c&&S[0]){if(u.config.tooltip.hideEmptySeries){var I=n[t].querySelector(".apexcharts-tooltip-marker"),P=n[t].querySelector(".apexcharts-tooltip-text");parseFloat(g)==0?(I.style.display="none",P.style.display="none"):(I.style.display="block",P.style.display="block")}g==null||u.globals.ancillaryCollapsedSeriesIndices.indexOf(t)>-1||u.globals.collapsedSeriesIndices.indexOf(t)>-1||Array.isArray(p.tConfig.enabledOnSeries)&&p.tConfig.enabledOnSeries.indexOf(t)===-1?S[0].parentNode.style.display="none":S[0].parentNode.style.display=u.config.tooltip.items.display}else Array.isArray(p.tConfig.enabledOnSeries)&&p.tConfig.enabledOnSeries.indexOf(t)===-1&&(S[0].parentNode.style.display="none")}},{key:"toggleActiveInactiveSeries",value:function(e,t){var i=this.w;if(e)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var n=i.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group-".concat(t));n&&(n.classList.add("apexcharts-active"),n.style.display=i.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(e){var t=e.i,i=e.j,n=this.w,o=this.ctx.series.filteredSeriesX(),r="",c="",h=null,u=null,p={series:n.globals.series,seriesIndex:t,dataPointIndex:i,w:n},g=n.globals.ttZFormatter;i===null?u=n.globals.series[t]:n.globals.isXNumeric&&n.config.chart.type!=="treemap"?(r=o[t][i],o[t].length===0&&(r=o[this.tooltipUtil.getFirstActiveXArray(o)][i])):r=new ri(this.ctx).isFormatXY()?n.config.series[t].data[i]!==void 0?n.config.series[t].data[i].x:"":n.globals.labels[i]!==void 0?n.globals.labels[i]:"";var x=r;return n.globals.isXNumeric&&n.config.xaxis.type==="datetime"?r=new We(this.ctx).xLabelFormat(n.globals.ttKeyFormatter,x,x,{i:void 0,dateFormatter:new _e(this.ctx).formatDate,w:this.w}):r=n.globals.isBarHorizontal?n.globals.yLabelFormatters[0](x,p):n.globals.xLabelFormatter(x,p),n.config.tooltip.x.formatter!==void 0&&(r=n.globals.ttKeyFormatter(x,p)),n.globals.seriesZ.length>0&&n.globals.seriesZ[t].length>0&&(h=g(n.globals.seriesZ[t][i],n)),c=typeof n.config.xaxis.tooltip.formatter=="function"?n.globals.xaxisTooltipFormatter(x,p):r,{val:Array.isArray(u)?u.join(" "):u,xVal:Array.isArray(r)?r.join(" "):r,xAxisTTVal:Array.isArray(c)?c.join(" "):c,zVal:h}}},{key:"handleCustomTooltip",value:function(e){var t=e.i,i=e.j,n=e.y1,o=e.y2,r=e.w,c=this.ttCtx.getElTooltip(),h=r.config.tooltip.custom;Array.isArray(h)&&h[t]&&(h=h[t]),c.innerHTML=h({ctx:this.ctx,series:r.globals.series,seriesIndex:t,dataPointIndex:i,y1:n,y2:o,w:r})}}]),E}(),hi=function(){function E(e){m(this,E),this.ttCtx=e,this.ctx=e.ctx,this.w=e.w}return y(E,[{key:"moveXCrosshairs",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=this.ttCtx,n=this.w,o=i.getElXCrosshairs(),r=e-i.xcrosshairsWidth/2,c=n.globals.labels.slice().length;if(t!==null&&(r=n.globals.gridWidth/c*t),o===null||n.globals.isBarHorizontal||(o.setAttribute("x",r),o.setAttribute("x1",r),o.setAttribute("x2",r),o.setAttribute("y2",n.globals.gridHeight),o.classList.add("apexcharts-active")),r<0&&(r=0),r>n.globals.gridWidth&&(r=n.globals.gridWidth),i.isXAxisTooltipEnabled){var h=r;n.config.xaxis.crosshairs.width!=="tickWidth"&&n.config.xaxis.crosshairs.width!=="barWidth"||(h=r+i.xcrosshairsWidth/2),this.moveXAxisTooltip(h)}}},{key:"moveYCrosshairs",value:function(e){var t=this.ttCtx;t.ycrosshairs!==null&&V.setAttrs(t.ycrosshairs,{y1:e,y2:e}),t.ycrosshairsHidden!==null&&V.setAttrs(t.ycrosshairsHidden,{y1:e,y2:e})}},{key:"moveXAxisTooltip",value:function(e){var t=this.w,i=this.ttCtx;if(i.xaxisTooltip!==null&&i.xcrosshairsWidth!==0){i.xaxisTooltip.classList.add("apexcharts-active");var n=i.xaxisOffY+t.config.xaxis.tooltip.offsetY+t.globals.translateY+1+t.config.xaxis.offsetY;if(e-=i.xaxisTooltip.getBoundingClientRect().width/2,!isNaN(e)){e+=t.globals.translateX;var o;o=new V(this.ctx).getTextRects(i.xaxisTooltipText.innerHTML),i.xaxisTooltipText.style.minWidth=o.width+"px",i.xaxisTooltip.style.left=e+"px",i.xaxisTooltip.style.top=n+"px"}}}},{key:"moveYAxisTooltip",value:function(e){var t=this.w,i=this.ttCtx;i.yaxisTTEls===null&&(i.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var n=parseInt(i.ycrosshairsHidden.getAttribute("y1"),10),o=t.globals.translateY+n,r=i.yaxisTTEls[e].getBoundingClientRect().height,c=t.globals.translateYAxisX[e]-2;t.config.yaxis[e].opposite&&(c-=26),o-=r/2,t.globals.ignoreYAxisIndexes.indexOf(e)===-1?(i.yaxisTTEls[e].classList.add("apexcharts-active"),i.yaxisTTEls[e].style.top=o+"px",i.yaxisTTEls[e].style.left=c+t.config.yaxis[e].tooltip.offsetX+"px"):i.yaxisTTEls[e].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=this.w,o=this.ttCtx,r=o.getElTooltip(),c=o.tooltipRect,h=i!==null?parseFloat(i):1,u=parseFloat(e)+h+5,p=parseFloat(t)+h/2;if(u>n.globals.gridWidth/2&&(u=u-c.ttWidth-h-10),u>n.globals.gridWidth-c.ttWidth-10&&(u=n.globals.gridWidth-c.ttWidth),u<-20&&(u=-20),n.config.tooltip.followCursor){var g=o.getElGrid().getBoundingClientRect();(u=o.e.clientX-g.left)>n.globals.gridWidth/2&&(u-=o.tooltipRect.ttWidth),(p=o.e.clientY+n.globals.translateY-g.top)>n.globals.gridHeight/2&&(p-=o.tooltipRect.ttHeight)}else n.globals.isBarHorizontal||c.ttHeight/2+p>n.globals.gridHeight&&(p=n.globals.gridHeight-c.ttHeight+n.globals.translateY);isNaN(u)||(u+=n.globals.translateX,r.style.left=u+"px",r.style.top=p+"px")}},{key:"moveMarkers",value:function(e,t){var i=this.w,n=this.ttCtx;if(i.globals.markers.size[e]>0)for(var o=i.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-marker")),r=0;r<o.length;r++)parseInt(o[r].getAttribute("rel"),10)===t&&(n.marker.resetPointsSize(),n.marker.enlargeCurrentPoint(t,o[r]));else n.marker.resetPointsSize(),this.moveDynamicPointOnHover(t,e)}},{key:"moveDynamicPointOnHover",value:function(e,t){var i,n,o,r,c=this.w,h=this.ttCtx,u=new V(this.ctx),p=c.globals.pointsArray,g=h.tooltipUtil.getHoverMarkerSize(t),x=c.config.series[t].type;if(!x||x!=="column"&&x!=="candlestick"&&x!=="boxPlot"){o=(i=p[t][e])===null||i===void 0?void 0:i[0],r=((n=p[t][e])===null||n===void 0?void 0:n[1])||0;var v=c.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-series-markers path"));if(v&&r<c.globals.gridHeight&&r>0){var k=v.getAttribute("shape"),A=u.getMarkerPath(o,r,k,1.5*g);v.setAttribute("d",A)}this.moveXCrosshairs(o),h.fixedTooltip||this.moveTooltip(o,r,g)}}},{key:"moveDynamicPointsOnHover",value:function(e){var t,i=this.ttCtx,n=i.w,o=0,r=0,c=n.globals.pointsArray,h=new it(this.ctx),u=new V(this.ctx);t=h.getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var p=i.tooltipUtil.getHoverMarkerSize(t);c[t]&&(o=c[t][e][0],r=c[t][e][1]);var g=i.tooltipUtil.getAllMarkers();if(g!==null)for(var x=0;x<n.globals.series.length;x++){var v=c[x];if(n.globals.comboCharts&&v===void 0&&g.splice(x,0,null),v&&v.length){var k=c[x][e][1],A=void 0;g[x].setAttribute("cx",o);var S=g[x].getAttribute("shape");if(n.config.chart.type==="rangeArea"&&!n.globals.comboCharts){var M=e+n.globals.series[x].length;A=c[x][M][1],k-=Math.abs(k-A)/2}if(k!==null&&!isNaN(k)&&k<n.globals.gridHeight+p&&k+p>0){var L=u.getMarkerPath(o,k,S,p);g[x].setAttribute("d",L)}else g[x].setAttribute("d","")}}this.moveXCrosshairs(o),i.fixedTooltip||this.moveTooltip(o,r||n.globals.gridHeight,p)}},{key:"moveStickyTooltipOverBars",value:function(e,t){var i=this.w,n=this.ttCtx,o=i.globals.columnSeries?i.globals.columnSeries.length:i.globals.series.length,r=o>=2&&o%2==0?Math.floor(o/2):Math.floor(o/2)+1;i.globals.isBarHorizontal&&(r=new it(this.ctx).getActiveConfigSeriesIndex("desc")+1);var c=i.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(r,"'] path[j='").concat(e,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(r,"'] path[j='").concat(e,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(r,"'] path[j='").concat(e,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(r,"'] path[j='").concat(e,"']"));c||typeof t!="number"||(c=i.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[data\\:realIndex='".concat(t,"'] path[j='").concat(e,`'],
        .apexcharts-candlestick-series .apexcharts-series[data\\:realIndex='`).concat(t,"'] path[j='").concat(e,`'],
        .apexcharts-boxPlot-series .apexcharts-series[data\\:realIndex='`).concat(t,"'] path[j='").concat(e,`'],
        .apexcharts-rangebar-series .apexcharts-series[data\\:realIndex='`).concat(t,"'] path[j='").concat(e,"']")));var h=c?parseFloat(c.getAttribute("cx")):0,u=c?parseFloat(c.getAttribute("cy")):0,p=c?parseFloat(c.getAttribute("barWidth")):0,g=n.getElGrid().getBoundingClientRect(),x=c&&(c.classList.contains("apexcharts-candlestick-area")||c.classList.contains("apexcharts-boxPlot-area"));i.globals.isXNumeric?(c&&!x&&(h-=o%2!=0?p/2:0),c&&x&&i.globals.comboCharts&&(h-=p/2)):i.globals.isBarHorizontal||(h=n.xAxisTicksPositions[e-1]+n.dataPointsDividedWidth/2,isNaN(h)&&(h=n.xAxisTicksPositions[e]-n.dataPointsDividedWidth/2)),i.globals.isBarHorizontal?u-=n.tooltipRect.ttHeight:i.config.tooltip.followCursor?u=n.e.clientY-g.top-n.tooltipRect.ttHeight/2:u+n.tooltipRect.ttHeight+15>i.globals.gridHeight&&(u=i.globals.gridHeight),i.globals.isBarHorizontal||this.moveXCrosshairs(h),n.fixedTooltip||this.moveTooltip(h,u||i.globals.gridHeight)}}]),E}(),_i=function(){function E(e){m(this,E),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx,this.tooltipPosition=new hi(e)}return y(E,[{key:"drawDynamicPoints",value:function(){var e=this.w,t=new V(this.ctx),i=new pt(this.ctx),n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");n=ie(n),e.config.chart.stacked&&n.sort(function(g,x){return parseFloat(g.getAttribute("data:realIndex"))-parseFloat(x.getAttribute("data:realIndex"))});for(var o=0;o<n.length;o++){var r=n[o].querySelector(".apexcharts-series-markers-wrap");if(r!==null){var c=void 0,h="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));e.config.chart.type!=="line"&&e.config.chart.type!=="area"||e.globals.comboCharts||e.config.tooltip.intersect||(h+=" no-pointer-events");var u=i.getMarkerConfig({cssClass:h,seriesIndex:Number(r.getAttribute("data:realIndex"))});(c=t.drawMarker(0,0,u)).node.setAttribute("default-marker-size",0);var p=document.createElementNS(e.globals.SVGNS,"g");p.classList.add("apexcharts-series-markers"),p.appendChild(c.node),r.appendChild(p)}}}},{key:"enlargeCurrentPoint",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=this.w;o.config.chart.type!=="bubble"&&this.newPointSize(e,t);var r=t.getAttribute("cx"),c=t.getAttribute("cy");if(i!==null&&n!==null&&(r=i,c=n),this.tooltipPosition.moveXCrosshairs(r),!this.fixedTooltip){if(o.config.chart.type==="radar"){var h=this.ttCtx.getElGrid().getBoundingClientRect();r=this.ttCtx.e.clientX-h.left}this.tooltipPosition.moveTooltip(r,c,o.config.markers.hover.size)}}},{key:"enlargePoints",value:function(e){for(var t=this.w,i=this,n=this.ttCtx,o=e,r=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),c=t.config.markers.hover.size,h=0;h<r.length;h++){var u=r[h].getAttribute("rel"),p=r[h].getAttribute("index");if(c===void 0&&(c=t.globals.markers.size[p]+t.config.markers.hover.sizeOffset),o===parseInt(u,10)){i.newPointSize(o,r[h]);var g=r[h].getAttribute("cx"),x=r[h].getAttribute("cy");i.tooltipPosition.moveXCrosshairs(g),n.fixedTooltip||i.tooltipPosition.moveTooltip(g,x,c)}else i.oldPointSize(r[h])}}},{key:"newPointSize",value:function(e,t){var i=this.w,n=i.config.markers.hover.size,o=e===0?t.parentNode.firstChild:t.parentNode.lastChild;if(o.getAttribute("default-marker-size")!=="0"){var r=parseInt(o.getAttribute("index"),10);n===void 0&&(n=i.globals.markers.size[r]+i.config.markers.hover.sizeOffset),n<0&&(n=0);var c=this.ttCtx.tooltipUtil.getPathFromPoint(t,n);t.setAttribute("d",c)}}},{key:"oldPointSize",value:function(e){var t=parseFloat(e.getAttribute("default-marker-size")),i=this.ttCtx.tooltipUtil.getPathFromPoint(e,t);e.setAttribute("d",i)}},{key:"resetPointsSize",value:function(){for(var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),t=0;t<e.length;t++){var i=parseFloat(e[t].getAttribute("default-marker-size"));if(H.isNumber(i)&&i>=0){var n=this.ttCtx.tooltipUtil.getPathFromPoint(e[t],i);e[t].setAttribute("d",n)}else e[t].setAttribute("d","M0,0")}}}]),E}(),ln=function(){function E(e){m(this,E),this.w=e.w;var t=this.w;this.ttCtx=e,this.isVerticalGroupedRangeBar=!t.globals.isBarHorizontal&&t.config.chart.type==="rangeBar"&&t.config.plotOptions.bar.rangeBarGroupRows}return y(E,[{key:"getAttr",value:function(e,t){return parseFloat(e.target.getAttribute(t))}},{key:"handleHeatTreeTooltip",value:function(e){var t=e.e,i=e.opt,n=e.x,o=e.y,r=e.type,c=this.ttCtx,h=this.w;if(t.target.classList.contains("apexcharts-".concat(r,"-rect"))){var u=this.getAttr(t,"i"),p=this.getAttr(t,"j"),g=this.getAttr(t,"cx"),x=this.getAttr(t,"cy"),v=this.getAttr(t,"width"),k=this.getAttr(t,"height");if(c.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:u,j:p,shared:!1,e:t}),h.globals.capturedSeriesIndex=u,h.globals.capturedDataPointIndex=p,n=g+c.tooltipRect.ttWidth/2+v,o=x+c.tooltipRect.ttHeight/2-k/2,c.tooltipPosition.moveXCrosshairs(g+v/2),n>h.globals.gridWidth/2&&(n=g-c.tooltipRect.ttWidth/2+v),c.w.config.tooltip.followCursor){var A=h.globals.dom.elWrap.getBoundingClientRect();n=h.globals.clientX-A.left-(n>h.globals.gridWidth/2?c.tooltipRect.ttWidth:0),o=h.globals.clientY-A.top-(o>h.globals.gridHeight/2?c.tooltipRect.ttHeight:0)}}return{x:n,y:o}}},{key:"handleMarkerTooltip",value:function(e){var t,i,n=e.e,o=e.opt,r=e.x,c=e.y,h=this.w,u=this.ttCtx;if(n.target.classList.contains("apexcharts-marker")){var p=parseInt(o.paths.getAttribute("cx"),10),g=parseInt(o.paths.getAttribute("cy"),10),x=parseFloat(o.paths.getAttribute("val"));if(i=parseInt(o.paths.getAttribute("rel"),10),t=parseInt(o.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,u.intersect){var v=H.findAncestor(o.paths,"apexcharts-series");v&&(t=parseInt(v.getAttribute("data:realIndex"),10))}if(u.tooltipLabels.drawSeriesTexts({ttItems:o.ttItems,i:t,j:i,shared:!u.showOnIntersect&&h.config.tooltip.shared,e:n}),n.type==="mouseup"&&u.markerClick(n,t,i),h.globals.capturedSeriesIndex=t,h.globals.capturedDataPointIndex=i,r=p,c=g+h.globals.translateY-1.4*u.tooltipRect.ttHeight,u.w.config.tooltip.followCursor){var k=u.getElGrid().getBoundingClientRect();c=u.e.clientY+h.globals.translateY-k.top}x<0&&(c=g),u.marker.enlargeCurrentPoint(i,o.paths,r,c)}return{x:r,y:c}}},{key:"handleBarTooltip",value:function(e){var t,i,n=e.e,o=e.opt,r=this.w,c=this.ttCtx,h=c.getElTooltip(),u=0,p=0,g=0,x=this.getBarTooltipXY({e:n,opt:o});t=x.i;var v=x.j;r.globals.capturedSeriesIndex=t,r.globals.capturedDataPointIndex=v,r.globals.isBarHorizontal&&c.tooltipUtil.hasBars()||!r.config.tooltip.shared?(p=x.x,g=x.y,i=Array.isArray(r.config.stroke.width)?r.config.stroke.width[t]:r.config.stroke.width,u=p):r.globals.comboCharts||r.config.tooltip.shared||(u/=2),isNaN(g)&&(g=r.globals.svgHeight-c.tooltipRect.ttHeight);var k=parseInt(o.paths.parentNode.getAttribute("data:realIndex"),10);if(r.globals.isMultipleYAxis?r.config.yaxis[k]&&r.config.yaxis[k].reversed:r.config.yaxis[0].reversed,p+c.tooltipRect.ttWidth>r.globals.gridWidth?p-=c.tooltipRect.ttWidth:p<0&&(p=0),c.w.config.tooltip.followCursor){var A=c.getElGrid().getBoundingClientRect();g=c.e.clientY-A.top}c.tooltip===null&&(c.tooltip=r.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),r.config.tooltip.shared||(r.globals.comboBarCount>0?c.tooltipPosition.moveXCrosshairs(u+i/2):c.tooltipPosition.moveXCrosshairs(u)),!c.fixedTooltip&&(!r.config.tooltip.shared||r.globals.isBarHorizontal&&c.tooltipUtil.hasBars())&&(g=g+r.globals.translateY-c.tooltipRect.ttHeight/2,h.style.left=p+r.globals.translateX+"px",h.style.top=g+"px")}},{key:"getBarTooltipXY",value:function(e){var t=this,i=e.e,n=e.opt,o=this.w,r=null,c=this.ttCtx,h=0,u=0,p=0,g=0,x=0,v=i.target.classList;if(v.contains("apexcharts-bar-area")||v.contains("apexcharts-candlestick-area")||v.contains("apexcharts-boxPlot-area")||v.contains("apexcharts-rangebar-area")){var k=i.target,A=k.getBoundingClientRect(),S=n.elGrid.getBoundingClientRect(),M=A.height;x=A.height;var L=A.width,d=parseInt(k.getAttribute("cx"),10),b=parseInt(k.getAttribute("cy"),10);g=parseFloat(k.getAttribute("barWidth"));var C=i.type==="touchmove"?i.touches[0].clientX:i.clientX;r=parseInt(k.getAttribute("j"),10),h=parseInt(k.parentNode.getAttribute("rel"),10)-1;var I=k.getAttribute("data-range-y1"),P=k.getAttribute("data-range-y2");o.globals.comboCharts&&(h=parseInt(k.parentNode.getAttribute("data:realIndex"),10));var _=function(Y){return o.globals.isXNumeric?d-L/2:t.isVerticalGroupedRangeBar?d+L/2:d-c.dataPointsDividedWidth+L/2},N=function(){return b-c.dataPointsDividedHeight+M/2-c.tooltipRect.ttHeight/2};c.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:h,j:r,y1:I?parseInt(I,10):null,y2:P?parseInt(P,10):null,shared:!c.showOnIntersect&&o.config.tooltip.shared,e:i}),o.config.tooltip.followCursor?o.globals.isBarHorizontal?(u=C-S.left+15,p=N()):(u=_(),p=i.clientY-S.top-c.tooltipRect.ttHeight/2-15):o.globals.isBarHorizontal?((u=d)<c.xyRatios.baseLineInvertedY&&(u=d-c.tooltipRect.ttWidth),p=N()):(u=_(),p=b)}return{x:u,y:p,barHeight:x,barWidth:g,i:h,j:r}}}]),E}(),di=function(){function E(e){m(this,E),this.w=e.w,this.ttCtx=e}return y(E,[{key:"drawXaxisTooltip",value:function(){var e=this.w,t=this.ttCtx,i=e.config.xaxis.position==="bottom";t.xaxisOffY=i?e.globals.gridHeight+1:-e.globals.xAxisHeight-e.config.xaxis.axisTicks.height+3;var n=i?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",o=e.globals.dom.elWrap;t.isXAxisTooltipEnabled&&e.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")===null&&(t.xaxisTooltip=document.createElement("div"),t.xaxisTooltip.setAttribute("class",n+" apexcharts-theme-"+e.config.tooltip.theme),o.appendChild(t.xaxisTooltip),t.xaxisTooltipText=document.createElement("div"),t.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),t.xaxisTooltipText.style.fontFamily=e.config.xaxis.tooltip.style.fontFamily||e.config.chart.fontFamily,t.xaxisTooltipText.style.fontSize=e.config.xaxis.tooltip.style.fontSize,t.xaxisTooltip.appendChild(t.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var e=this.w,t=this.ttCtx,i=0;i<e.config.yaxis.length;i++){var n=e.config.yaxis[i].opposite||e.config.yaxis[i].crosshairs.opposite;t.yaxisOffX=n?e.globals.gridWidth+1:1;var o="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i,n?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left"),r=e.globals.dom.elWrap;e.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i))===null&&(t.yaxisTooltip=document.createElement("div"),t.yaxisTooltip.setAttribute("class",o+" apexcharts-theme-"+e.config.tooltip.theme),r.appendChild(t.yaxisTooltip),i===0&&(t.yaxisTooltipText=[]),t.yaxisTooltipText[i]=document.createElement("div"),t.yaxisTooltipText[i].classList.add("apexcharts-yaxistooltip-text"),t.yaxisTooltip.appendChild(t.yaxisTooltipText[i]))}}},{key:"setXCrosshairWidth",value:function(){var e=this.w,t=this.ttCtx,i=t.getElXCrosshairs();if(t.xcrosshairsWidth=parseInt(e.config.xaxis.crosshairs.width,10),e.globals.comboCharts){var n=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(n!==null&&e.config.xaxis.crosshairs.width==="barWidth"){var o=parseFloat(n.getAttribute("barWidth"));t.xcrosshairsWidth=o}else if(e.config.xaxis.crosshairs.width==="tickWidth"){var r=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/r}}else if(e.config.xaxis.crosshairs.width==="tickWidth"){var c=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/c}else if(e.config.xaxis.crosshairs.width==="barWidth"){var h=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(h!==null){var u=parseFloat(h.getAttribute("barWidth"));t.xcrosshairsWidth=u}else t.xcrosshairsWidth=1}e.globals.isBarHorizontal&&(t.xcrosshairsWidth=0),i!==null&&t.xcrosshairsWidth>0&&i.setAttribute("width",t.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var e=this.w,t=this.ttCtx;t.ycrosshairs=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),t.ycrosshairsHidden=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(e,t,i){var n=this.ttCtx,o=this.w,r=o.globals,c=r.seriesYAxisMap[e];if(n.yaxisTooltips[e]&&c.length>0){var h=r.yLabelFormatters[e],u=n.getElGrid().getBoundingClientRect(),p=c[0],g=0;i.yRatio.length>1&&(g=p);var x=(t-u.top)*i.yRatio[g],v=r.maxYArr[p]-r.minYArr[p],k=r.minYArr[p]+(v-x);o.config.yaxis[e].reversed&&(k=r.maxYArr[p]-(v-x)),n.tooltipPosition.moveYCrosshairs(t-u.top),n.yaxisTooltipText[e].innerHTML=h(k),n.tooltipPosition.moveYAxisTooltip(e)}}}]),E}(),ui=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w;var t=this.w;this.tConfig=t.config.tooltip,this.tooltipUtil=new ha(this),this.tooltipLabels=new Oe(this),this.tooltipPosition=new hi(this),this.marker=new _i(this),this.intersect=new ln(this),this.axesTooltip=new di(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!t.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return y(E,[{key:"getElTooltip",value:function(e){return e||(e=this),e.w.globals.dom.baseEl?e.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(e){var t=this.w;this.xyRatios=e,this.isXAxisTooltipEnabled=t.config.xaxis.tooltip.enabled&&t.globals.axisCharts,this.yaxisTooltips=t.config.yaxis.map(function(r,c){return!!(r.show&&r.tooltip.enabled&&t.globals.axisCharts)}),this.allTooltipSeriesGroups=[],t.globals.axisCharts||(this.showTooltipTitle=!1);var i=document.createElement("div");if(i.classList.add("apexcharts-tooltip"),t.config.tooltip.cssClass&&i.classList.add(t.config.tooltip.cssClass),i.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),t.globals.dom.elWrap.appendChild(i),t.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var n=new Bt(this.ctx);this.xAxisTicksPositions=n.getXAxisTicksPositions()}if(!t.globals.comboCharts&&!this.tConfig.intersect&&t.config.chart.type!=="rangeBar"||this.tConfig.shared||(this.showOnIntersect=!0),t.config.markers.size!==0&&t.globals.markers.largestSize!==0||this.marker.drawDynamicPoints(this),t.globals.collapsedSeries.length!==t.globals.series.length){this.dataPointsDividedHeight=t.globals.gridHeight/t.globals.dataPoints,this.dataPointsDividedWidth=t.globals.gridWidth/t.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||t.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,i.appendChild(this.tooltipTitle));var o=t.globals.series.length;(t.globals.xyCharts||t.globals.comboCharts)&&this.tConfig.shared&&(o=this.showOnIntersect?1:t.globals.series.length),this.legendLabels=t.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(o),this.addSVGEvents()}}},{key:"createTTElements",value:function(e){for(var t=this,i=this.w,n=[],o=this.getElTooltip(),r=function(h){var u=document.createElement("div");u.classList.add("apexcharts-tooltip-series-group","apexcharts-tooltip-series-group-".concat(h)),u.style.order=i.config.tooltip.inverseOrder?e-h:h+1;var p=document.createElement("span");p.classList.add("apexcharts-tooltip-marker"),p.style.backgroundColor=i.globals.colors[h],u.appendChild(p);var g=document.createElement("div");g.classList.add("apexcharts-tooltip-text"),g.style.fontFamily=t.tConfig.style.fontFamily||i.config.chart.fontFamily,g.style.fontSize=t.tConfig.style.fontSize,["y","goals","z"].forEach(function(x){var v=document.createElement("div");v.classList.add("apexcharts-tooltip-".concat(x,"-group"));var k=document.createElement("span");k.classList.add("apexcharts-tooltip-text-".concat(x,"-label")),v.appendChild(k);var A=document.createElement("span");A.classList.add("apexcharts-tooltip-text-".concat(x,"-value")),v.appendChild(A),g.appendChild(v)}),u.appendChild(g),o.appendChild(u),n.push(u)},c=0;c<e;c++)r(c);return n}},{key:"addSVGEvents",value:function(){var e=this.w,t=e.config.chart.type,i=this.getElTooltip(),n=!(t!=="bar"&&t!=="candlestick"&&t!=="boxPlot"&&t!=="rangeBar"),o=t==="area"||t==="line"||t==="scatter"||t==="bubble"||t==="radar",r=e.globals.dom.Paper.node,c=this.getElGrid();c&&(this.seriesBound=c.getBoundingClientRect());var h,u=[],p=[],g={hoverArea:r,elGrid:c,tooltipEl:i,tooltipY:u,tooltipX:p,ttItems:this.ttItems};if(e.globals.axisCharts&&(o?h=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):n?h=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):t!=="heatmap"&&t!=="treemap"||(h=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),h&&h.length))for(var x=0;x<h.length;x++)u.push(h[x].getAttribute("cy")),p.push(h[x].getAttribute("cx"));if(e.globals.xyCharts&&!this.showOnIntersect||e.globals.comboCharts&&!this.showOnIntersect||n&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([r],g);else if(n&&!e.globals.comboCharts||o&&this.showOnIntersect)this.addDatapointEventsListeners(g);else if(!e.globals.axisCharts||t==="heatmap"||t==="treemap"){var v=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(v,g)}if(this.showOnIntersect){var k=e.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");k.length>0&&this.addPathsEventListeners(k,g),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(g)}}},{key:"drawFixedTooltipRect",value:function(){var e=this.w,t=this.getElTooltip(),i=t.getBoundingClientRect(),n=i.width+10,o=i.height+10,r=this.tConfig.fixed.offsetX,c=this.tConfig.fixed.offsetY,h=this.tConfig.fixed.position.toLowerCase();return h.indexOf("right")>-1&&(r=r+e.globals.svgWidth-n+10),h.indexOf("bottom")>-1&&(c=c+e.globals.svgHeight-o-10),t.style.left=r+"px",t.style.top=c+"px",{x:r,y:c,ttWidth:n,ttHeight:o}}},{key:"addDatapointEventsListeners",value:function(e){var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(t,e)}},{key:"addPathsEventListeners",value:function(e,t){for(var i=this,n=function(r){var c={paths:e[r],tooltipEl:t.tooltipEl,tooltipY:t.tooltipY,tooltipX:t.tooltipX,elGrid:t.elGrid,hoverArea:t.hoverArea,ttItems:t.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(h){return e[r].addEventListener(h,i.onSeriesHover.bind(i,c),{capture:!1,passive:!0})})},o=0;o<e.length;o++)n(o)}},{key:"onSeriesHover",value:function(e,t){var i=this,n=Date.now()-this.lastHoverTime;n>=100?this.seriesHover(e,t):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout(function(){i.seriesHover(e,t)},100-n))}},{key:"seriesHover",value:function(e,t){var i=this;this.lastHoverTime=Date.now();var n=[],o=this.w;o.config.chart.group&&(n=this.ctx.getGroupedCharts()),o.globals.axisCharts&&(o.globals.minX===-1/0&&o.globals.maxX===1/0||o.globals.dataPoints===0)||(n.length?n.forEach(function(r){var c=i.getElTooltip(r),h={paths:e.paths,tooltipEl:c,tooltipY:e.tooltipY,tooltipX:e.tooltipX,elGrid:e.elGrid,hoverArea:e.hoverArea,ttItems:r.w.globals.tooltip.ttItems};r.w.globals.minX===i.w.globals.minX&&r.w.globals.maxX===i.w.globals.maxX&&r.w.globals.tooltip.seriesHoverByContext({chartCtx:r,ttCtx:r.w.globals.tooltip,opt:h,e:t})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:e,e:t}))}},{key:"seriesHoverByContext",value:function(e){var t=e.chartCtx,i=e.ttCtx,n=e.opt,o=e.e,r=t.w,c=this.getElTooltip(t);c&&(i.tooltipRect={x:0,y:0,ttWidth:c.getBoundingClientRect().width,ttHeight:c.getBoundingClientRect().height},i.e=o,i.tooltipUtil.hasBars()&&!r.globals.comboCharts&&!i.isBarShared&&this.tConfig.onDatasetHover.highlightDataSeries&&new it(t).toggleSeriesOnHover(o,o.target.parentNode),i.fixedTooltip&&i.drawFixedTooltipRect(),r.globals.axisCharts?i.axisChartsTooltips({e:o,opt:n,tooltipRect:i.tooltipRect}):i.nonAxisChartsTooltips({e:o,opt:n,tooltipRect:i.tooltipRect}))}},{key:"axisChartsTooltips",value:function(e){var t,i,n=e.e,o=e.opt,r=this.w,c=o.elGrid.getBoundingClientRect(),h=n.type==="touchmove"?n.touches[0].clientX:n.clientX,u=n.type==="touchmove"?n.touches[0].clientY:n.clientY;if(this.clientY=u,this.clientX=h,r.globals.capturedSeriesIndex=-1,r.globals.capturedDataPointIndex=-1,u<c.top||u>c.top+c.height)this.handleMouseOut(o);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!r.config.tooltip.shared){var p=parseInt(o.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(p)<0)return void this.handleMouseOut(o)}var g=this.getElTooltip(),x=this.getElXCrosshairs(),v=[];r.config.chart.group&&(v=this.ctx.getSyncedCharts());var k=r.globals.xyCharts||r.config.chart.type==="bar"&&!r.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||r.globals.comboCharts&&this.tooltipUtil.hasBars();if(n.type==="mousemove"||n.type==="touchmove"||n.type==="mouseup"){if(r.globals.collapsedSeries.length+r.globals.ancillaryCollapsedSeries.length===r.globals.series.length)return;x!==null&&x.classList.add("apexcharts-active");var A=this.yaxisTooltips.filter(function(L){return L===!0});if(this.ycrosshairs!==null&&A.length&&this.ycrosshairs.classList.add("apexcharts-active"),k&&!this.showOnIntersect||v.length>1)this.handleStickyTooltip(n,h,u,o);else if(r.config.chart.type==="heatmap"||r.config.chart.type==="treemap"){var S=this.intersect.handleHeatTreeTooltip({e:n,opt:o,x:t,y:i,type:r.config.chart.type});t=S.x,i=S.y,g.style.left=t+"px",g.style.top=i+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:n,opt:o}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:n,opt:o,x:t,y:i});if(this.yaxisTooltips.length)for(var M=0;M<r.config.yaxis.length;M++)this.axesTooltip.drawYaxisTooltipText(M,u,this.xyRatios);r.globals.dom.baseEl.classList.add("apexcharts-tooltip-active"),o.tooltipEl.classList.add("apexcharts-active")}else n.type!=="mouseout"&&n.type!=="touchend"||this.handleMouseOut(o)}}},{key:"nonAxisChartsTooltips",value:function(e){var t=e.e,i=e.opt,n=e.tooltipRect,o=this.w,r=i.paths.getAttribute("rel"),c=this.getElTooltip(),h=o.globals.dom.elWrap.getBoundingClientRect();if(t.type==="mousemove"||t.type==="touchmove"){o.globals.dom.baseEl.classList.add("apexcharts-tooltip-active"),c.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:parseInt(r,10)-1,shared:!1});var u=o.globals.clientX-h.left-n.ttWidth/2,p=o.globals.clientY-h.top-n.ttHeight-10;if(c.style.left=u+"px",c.style.top=p+"px",o.config.legend.tooltipHoverFormatter){var g=r-1,x=(0,o.config.legend.tooltipHoverFormatter)(this.legendLabels[g].getAttribute("data:default-text"),{seriesIndex:g,dataPointIndex:g,w:o});this.legendLabels[g].innerHTML=x}}else t.type!=="mouseout"&&t.type!=="touchend"||(c.classList.remove("apexcharts-active"),o.globals.dom.baseEl.classList.remove("apexcharts-tooltip-active"),o.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(v){var k=v.getAttribute("data:default-text");v.innerHTML=decodeURIComponent(k)}))}},{key:"handleStickyTooltip",value:function(e,t,i,n){var o=this.w,r=this.tooltipUtil.getNearestValues({context:this,hoverArea:n.hoverArea,elGrid:n.elGrid,clientX:t,clientY:i}),c=r.j,h=r.capturedSeries;o.globals.collapsedSeriesIndices.includes(h)&&(h=null);var u=n.elGrid.getBoundingClientRect();if(r.hoverX<0||r.hoverX>u.width)this.handleMouseOut(n);else if(h!==null)this.handleStickyCapturedSeries(e,h,n,c);else if(this.tooltipUtil.isXoverlap(c)||o.globals.isBarHorizontal){var p=o.globals.series.findIndex(function(g,x){return!o.globals.collapsedSeriesIndices.includes(x)});this.create(e,this,p,c,n.ttItems)}}},{key:"handleStickyCapturedSeries",value:function(e,t,i,n){var o=this.w;if(!this.tConfig.shared&&o.globals.series[t][n]===null)return void this.handleMouseOut(i);if(o.globals.series[t][n]!==void 0)this.tConfig.shared&&this.tooltipUtil.isXoverlap(n)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(e,this,t,n,i.ttItems):this.create(e,this,t,n,i.ttItems,!1);else if(this.tooltipUtil.isXoverlap(n)){var r=o.globals.series.findIndex(function(c,h){return!o.globals.collapsedSeriesIndices.includes(h)});this.create(e,this,r,n,i.ttItems)}}},{key:"deactivateHoverFilter",value:function(){for(var e=this.w,t=new V(this.ctx),i=e.globals.dom.Paper.select(".apexcharts-bar-area"),n=0;n<i.length;n++)t.pathMouseLeave(i[n])}},{key:"handleMouseOut",value:function(e){var t=this.w,i=this.getElXCrosshairs();if(t.globals.dom.baseEl.classList.remove("apexcharts-tooltip-active"),e.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),t.config.chart.type!=="bubble"&&this.marker.resetPointsSize(),i!==null&&i.classList.remove("apexcharts-active"),this.ycrosshairs!==null&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){this.yaxisTTEls===null&&(this.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var n=0;n<this.yaxisTTEls.length;n++)this.yaxisTTEls[n].classList.remove("apexcharts-active")}t.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(o){var r=o.getAttribute("data:default-text");o.innerHTML=decodeURIComponent(r)})}},{key:"markerClick",value:function(e,t,i){var n=this.w;typeof n.config.chart.events.markerClick=="function"&&n.config.chart.events.markerClick(e,this.ctx,{seriesIndex:t,dataPointIndex:i,w:n}),this.ctx.events.fireEvent("markerClick",[e,this.ctx,{seriesIndex:t,dataPointIndex:i,w:n}])}},{key:"create",value:function(e,t,i,n,o){var r,c,h,u,p,g,x,v,k,A,S,M,L,d,b,C,I=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,P=this.w,_=t;e.type==="mouseup"&&this.markerClick(e,i,n),I===null&&(I=this.tConfig.shared);var N=this.tooltipUtil.hasMarkers(i),Y=this.tooltipUtil.getElBars();if(P.config.legend.tooltipHoverFormatter){var G=P.config.legend.tooltipHoverFormatter,J=Array.from(this.legendLabels);J.forEach(function(Fe){var Re=Fe.getAttribute("data:default-text");Fe.innerHTML=decodeURIComponent(Re)});for(var Z=0;Z<J.length;Z++){var Q=J[Z],se=parseInt(Q.getAttribute("i"),10),ce=decodeURIComponent(Q.getAttribute("data:default-text")),ue=G(ce,{seriesIndex:I?se:i,dataPointIndex:n,w:P});if(I)Q.innerHTML=P.globals.collapsedSeriesIndices.indexOf(se)<0?ue:ce;else if(Q.innerHTML=se===i?ue:ce,i===se)break}}var ge=X(X({ttItems:o,i,j:n},((r=P.globals.seriesRange)===null||r===void 0||(c=r[i])===null||c===void 0||(h=c[n])===null||h===void 0||(u=h.y[0])===null||u===void 0?void 0:u.y1)!==void 0&&{y1:(p=P.globals.seriesRange)===null||p===void 0||(g=p[i])===null||g===void 0||(x=g[n])===null||x===void 0||(v=x.y[0])===null||v===void 0?void 0:v.y1}),((k=P.globals.seriesRange)===null||k===void 0||(A=k[i])===null||A===void 0||(S=A[n])===null||S===void 0||(M=S.y[0])===null||M===void 0?void 0:M.y2)!==void 0&&{y2:(L=P.globals.seriesRange)===null||L===void 0||(d=L[i])===null||d===void 0||(b=d[n])===null||b===void 0||(C=b.y[0])===null||C===void 0?void 0:C.y2});if(I){if(_.tooltipLabels.drawSeriesTexts(X(X({},ge),{},{shared:!this.showOnIntersect&&this.tConfig.shared})),N)P.globals.markers.largestSize>0?_.marker.enlargePoints(n):_.tooltipPosition.moveDynamicPointsOnHover(n);else if(this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(Y),this.barSeriesHeight>0)){var xe=new V(this.ctx),pe=P.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(n,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(n,i);for(var Ae=0;Ae<pe.length;Ae++)xe.pathMouseEnter(pe[Ae])}}else _.tooltipLabels.drawSeriesTexts(X({shared:!1},ge)),this.tooltipUtil.hasBars()&&_.tooltipPosition.moveStickyTooltipOverBars(n,i),N&&_.tooltipPosition.moveMarkers(i,n)}}]),E}(),xt=function(){function E(e){m(this,E),this.w=e.w,this.barCtx=e,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return y(E,[{key:"handleBarDataLabels",value:function(e){var t,i,n=e.x,o=e.y,r=e.y1,c=e.y2,h=e.i,u=e.j,p=e.realIndex,g=e.columnGroupIndex,x=e.series,v=e.barHeight,k=e.barWidth,A=e.barXPosition,S=e.barYPosition,M=e.visibleSeries,L=e.renderedPath,d=this.w,b=new V(this.barCtx.ctx),C=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[p]:this.barCtx.strokeWidth;d.globals.isXNumeric&&!d.globals.isBarHorizontal?(t=n+parseFloat(k*(M+1)),i=o+parseFloat(v*(M+1))-C):(t=n+parseFloat(k*M),i=o+parseFloat(v*M));var I,P=null,_=n,N=o,Y={},G=d.config.dataLabels,J=this.barCtx.barOptions.dataLabels,Z=this.barCtx.barOptions.dataLabels.total;S!==void 0&&this.barCtx.isRangeBar&&(i=S,N=S),A!==void 0&&this.barCtx.isVerticalGroupedRangeBar&&(t=A,_=A);var Q=G.offsetX,se=G.offsetY,ce={width:0,height:0};if(d.config.dataLabels.enabled){var ue=d.globals.series[h][u];ce=b.getTextRects(d.config.dataLabels.formatter?d.config.dataLabels.formatter(ue,X(X({},d),{},{seriesIndex:h,dataPointIndex:u,w:d})):d.globals.yLabelFormatters[0](ue),parseFloat(G.style.fontSize))}var ge={x:n,y:o,i:h,j:u,realIndex:p,columnGroupIndex:g,renderedPath:L,bcx:t,bcy:i,barHeight:v,barWidth:k,textRects:ce,strokeWidth:C,dataLabelsX:_,dataLabelsY:N,dataLabelsConfig:G,barDataLabelsConfig:J,barTotalDataLabelsConfig:Z,offX:Q,offY:se};return Y=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(ge):this.calculateColumnsDataLabelsPosition(ge),L.attr({cy:Y.bcy,cx:Y.bcx,j:u,val:d.globals.series[h][u],barHeight:v,barWidth:k}),I=this.drawCalculatedDataLabels({x:Y.dataLabelsX,y:Y.dataLabelsY,val:this.barCtx.isRangeBar?[r,c]:d.config.chart.stackType==="100%"?x[p][u]:d.globals.series[p][u],i:p,j:u,barWidth:k,barHeight:v,textRects:ce,dataLabelsConfig:G}),d.config.chart.stacked&&Z.enabled&&(P=this.drawTotalDataLabels({x:Y.totalDataLabelsX,y:Y.totalDataLabelsY,barWidth:k,barHeight:v,realIndex:p,textAnchor:Y.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:p,j:u}),dataLabelsConfig:G,barTotalDataLabelsConfig:Z})),{dataLabels:I,totalDataLabels:P}}},{key:"getStackedTotalDataLabel",value:function(e){var t=e.realIndex,i=e.j,n=this.w,o=this.barCtx.stackedSeriesTotals[i];return this.totalFormatter&&(o=this.totalFormatter(o,X(X({},n),{},{seriesIndex:t,dataPointIndex:i,w:n}))),o}},{key:"calculateColumnsDataLabelsPosition",value:function(e){var t=this.w,i=e.i,n=e.j,o=e.realIndex;e.columnGroupIndex;var r,c,h=e.y,u=e.bcx,p=e.barWidth,g=e.barHeight,x=e.textRects,v=e.dataLabelsX,k=e.dataLabelsY,A=e.dataLabelsConfig,S=e.barDataLabelsConfig,M=e.barTotalDataLabelsConfig,L=e.strokeWidth,d=e.offX,b=e.offY,C=u;g=Math.abs(g);var I=t.config.plotOptions.bar.dataLabels.orientation==="vertical",P=this.barCtx.barHelpers.getZeroValueEncounters({i,j:n}).zeroEncounters;u-=L/2;var _=t.globals.gridWidth/t.globals.dataPoints;this.barCtx.isVerticalGroupedRangeBar?v+=p/2:(v=t.globals.isXNumeric?u-p/2+d:u-_+p/2+d,P>0&&t.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(v-=p*P)),I&&(v=v+x.height/2-L/2-2);var N=t.globals.series[i][n]<0,Y=h;switch(this.barCtx.isReversed&&(Y=h+(N?g:-g)),S.position){case"center":k=I?N?Y-g/2+b:Y+g/2-b:N?Y-g/2+x.height/2+b:Y+g/2+x.height/2-b;break;case"bottom":k=I?N?Y-g+b:Y+g-b:N?Y-g+x.height+L+b:Y+g-x.height/2+L-b;break;case"top":k=I?N?Y+b:Y-b:N?Y-x.height/2-b:Y+x.height+b}if(this.barCtx.lastActiveBarSerieIndex===o&&M.enabled){var G=new V(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:o,j:n}),A.fontSize);r=N?Y-G.height/2-b-M.offsetY+18:Y+G.height+b+M.offsetY-18;var J=_;c=C+(t.globals.isXNumeric?-p*t.globals.barGroups.length/2:t.globals.barGroups.length*p/2-(t.globals.barGroups.length-1)*p-J)+M.offsetX}return t.config.chart.stacked||(k<0?k=0+L:k+x.height/3>t.globals.gridHeight&&(k=t.globals.gridHeight-L)),{bcx:u,bcy:h,dataLabelsX:v,dataLabelsY:k,totalDataLabelsX:c,totalDataLabelsY:r,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(e){var t=this.w,i=e.x,n=e.i,o=e.j,r=e.realIndex,c=e.bcy,h=e.barHeight,u=e.barWidth,p=e.textRects,g=e.dataLabelsX,x=e.strokeWidth,v=e.dataLabelsConfig,k=e.barDataLabelsConfig,A=e.barTotalDataLabelsConfig,S=e.offX,M=e.offY,L=t.globals.gridHeight/t.globals.dataPoints;u=Math.abs(u);var d,b,C=c-(this.barCtx.isRangeBar?0:L)+h/2+p.height/2+M-3,I="start",P=t.globals.series[n][o]<0,_=i;switch(this.barCtx.isReversed&&(_=i+(P?-u:u),I=P?"start":"end"),k.position){case"center":g=P?_+u/2-S:Math.max(p.width/2,_-u/2)+S;break;case"bottom":g=P?_+u-x-S:_-u+x+S;break;case"top":g=P?_-x-S:_-x+S}if(this.barCtx.lastActiveBarSerieIndex===r&&A.enabled){var N=new V(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:r,j:o}),v.fontSize);P?(d=_-x-S-A.offsetX,I="end"):d=_+S+A.offsetX+(this.barCtx.isReversed?-(u+x):x),b=C-p.height/2+N.height/2+A.offsetY+x}return t.config.chart.stacked||(v.textAnchor==="start"?g-p.width<0?g=P?p.width+x:x:g+p.width>t.globals.gridWidth&&(g=P?t.globals.gridWidth-x:t.globals.gridWidth-p.width-x):v.textAnchor==="middle"?g-p.width/2<0?g=p.width/2+x:g+p.width/2>t.globals.gridWidth&&(g=t.globals.gridWidth-p.width/2-x):v.textAnchor==="end"&&(g<1?g=p.width+x:g+1>t.globals.gridWidth&&(g=t.globals.gridWidth-p.width-x))),{bcx:i,bcy:c,dataLabelsX:g,dataLabelsY:C,totalDataLabelsX:d,totalDataLabelsY:b,totalDataLabelsAnchor:I}}},{key:"drawCalculatedDataLabels",value:function(e){var t=e.x,i=e.y,n=e.val,o=e.i,r=e.j,c=e.textRects,h=e.barHeight,u=e.barWidth,p=e.dataLabelsConfig,g=this.w,x="rotate(0)";g.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(x="rotate(-90, ".concat(t,", ").concat(i,")"));var v=new mt(this.barCtx.ctx),k=new V(this.barCtx.ctx),A=p.formatter,S=null,M=g.globals.collapsedSeriesIndices.indexOf(o)>-1;if(p.enabled&&!M){S=k.group({class:"apexcharts-data-labels",transform:x});var L="";n!==void 0&&(L=A(n,X(X({},g),{},{seriesIndex:o,dataPointIndex:r,w:g}))),!n&&g.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(L="");var d=g.globals.series[o][r]<0,b=g.config.plotOptions.bar.dataLabels.position;g.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(b==="top"&&(p.textAnchor=d?"end":"start"),b==="center"&&(p.textAnchor="middle"),b==="bottom"&&(p.textAnchor=d?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&u<k.getTextRects(L,parseFloat(p.style.fontSize)).width&&(L=""),g.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?c.width/1.6>Math.abs(u)&&(L=""):c.height/1.6>Math.abs(h)&&(L=""));var C=X({},p);this.barCtx.isHorizontal&&n<0&&(p.textAnchor==="start"?C.textAnchor="end":p.textAnchor==="end"&&(C.textAnchor="start")),v.plotDataLabelsText({x:t,y:i,text:L,i:o,j:r,parent:S,dataLabelsConfig:C,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return S}},{key:"drawTotalDataLabels",value:function(e){var t=e.x,i=e.y,n=e.val,o=e.realIndex,r=e.textAnchor,c=e.barTotalDataLabelsConfig;this.w;var h,u=new V(this.barCtx.ctx);return c.enabled&&t!==void 0&&i!==void 0&&this.barCtx.lastActiveBarSerieIndex===o&&(h=u.drawText({x:t,y:i,foreColor:c.style.color,text:n,textAnchor:r,fontFamily:c.style.fontFamily,fontSize:c.style.fontSize,fontWeight:c.style.fontWeight})),h}}]),E}(),cn=function(){function E(e){m(this,E),this.w=e.w,this.barCtx=e}return y(E,[{key:"initVariables",value:function(e){var t=this.w;this.barCtx.series=e,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var i=0;i<e.length;i++)if(e[i].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=e[i].length),t.globals.isXNumeric)for(var n=0;n<e[i].length;n++)t.globals.seriesX[i][n]>t.globals.minX&&t.globals.seriesX[i][n]<t.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=t.globals.dataPoints;this.arrBorderRadius=this.createBorderRadiusArr(t.globals.series),this.barCtx.seriesLen===0&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],t.globals.comboCharts||this.checkZeroSeries({series:e})}},{key:"initialPositions",value:function(){var e,t,i,n,o,r,c,h,u=this.w,p=u.globals.dataPoints;this.barCtx.isRangeBar&&(p=u.globals.labels.length);var g=this.barCtx.seriesLen;if(u.config.plotOptions.bar.rangeBarGroupRows&&(g=1),this.barCtx.isHorizontal)o=(i=u.globals.gridHeight/p)/g,u.globals.isXNumeric&&(o=(i=u.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),o=o*parseInt(this.barCtx.barOptions.barHeight,10)/100,String(this.barCtx.barOptions.barHeight).indexOf("%")===-1&&(o=parseInt(this.barCtx.barOptions.barHeight,10)),h=this.barCtx.baseLineInvertedY+u.globals.padHorizontal+(this.barCtx.isReversed?u.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),this.barCtx.isFunnel&&(h=u.globals.gridWidth/2),t=(i-o*this.barCtx.seriesLen)/2;else{if(n=u.globals.gridWidth/this.barCtx.visibleItems,u.config.xaxis.convertedCatToNumeric&&(n=u.globals.gridWidth/u.globals.dataPoints),r=n/g*parseInt(this.barCtx.barOptions.columnWidth,10)/100,u.globals.isXNumeric){var x=this.barCtx.xRatio;u.globals.minXDiff&&u.globals.minXDiff!==.5&&u.globals.minXDiff/x>0&&(n=u.globals.minXDiff/x),(r=n/g*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(r=1)}String(this.barCtx.barOptions.columnWidth).indexOf("%")===-1&&(r=parseInt(this.barCtx.barOptions.columnWidth,10)),c=u.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.translationsIndex]-(this.barCtx.isReversed?u.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.translationsIndex]:0),e=u.globals.padHorizontal+(n-r*this.barCtx.seriesLen)/2}return u.globals.barHeight=o,u.globals.barWidth=r,{x:e,y:t,yDivision:i,xDivision:n,barHeight:o,barWidth:r,zeroH:c,zeroW:h}}},{key:"initializeStackedPrevVars",value:function(e){e.w.globals.seriesGroups.forEach(function(t){e[t]||(e[t]={}),e[t].prevY=[],e[t].prevX=[],e[t].prevYF=[],e[t].prevXF=[],e[t].prevYVal=[],e[t].prevXVal=[]})}},{key:"initializeStackedXYVars",value:function(e){e.w.globals.seriesGroups.forEach(function(t){e[t]||(e[t]={}),e[t].xArrj=[],e[t].xArrjF=[],e[t].xArrjVal=[],e[t].yArrj=[],e[t].yArrjF=[],e[t].yArrjVal=[]})}},{key:"getPathFillColor",value:function(e,t,i,n){var o,r,c,h,u,p=this.w,g=this.barCtx.ctx.fill,x=null,v=this.barCtx.barOptions.distributed?i:t;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function(k){e[t][i]>=k.from&&e[t][i]<=k.to&&(x=k.color)}),(o=p.config.series[t].data[i])!==null&&o!==void 0&&o.fillColor&&(x=p.config.series[t].data[i].fillColor),g.fillPath({seriesNumber:this.barCtx.barOptions.distributed?v:n,dataPointIndex:i,color:x,value:e[t][i],fillConfig:(r=p.config.series[t].data[i])===null||r===void 0?void 0:r.fill,fillType:(c=p.config.series[t].data[i])!==null&&c!==void 0&&(h=c.fill)!==null&&h!==void 0&&h.type?(u=p.config.series[t].data[i])===null||u===void 0?void 0:u.fill.type:Array.isArray(p.config.fill.type)?p.config.fill.type[n]:p.config.fill.type})}},{key:"getStrokeWidth",value:function(e,t,i){var n=0,o=this.w;return this.barCtx.series[e][t]?this.barCtx.isNullValue=!1:this.barCtx.isNullValue=!0,o.config.stroke.show&&(this.barCtx.isNullValue||(n=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[i]:this.barCtx.strokeWidth)),n}},{key:"createBorderRadiusArr",value:function(e){var t=this.w,i=!this.w.config.chart.stacked||t.config.plotOptions.bar.borderRadiusWhenStacked!=="last"||t.config.plotOptions.bar.borderRadius<=0,n=e.length,o=e[0].length,r=Array.from({length:n},function(){return Array(o).fill(i?"top":"none")});if(i)return r;for(var c=0;c<o;c++){for(var h=[],u=[],p=0,g=0;g<n;g++){var x=e[g][c];x>0?(h.push(g),p++):x<0&&(u.push(g),p++)}if(h.length>0&&u.length===0)if(h.length===1)r[h[0]][c]="both";else{var v,k=h[0],A=h[h.length-1],S=T(h);try{for(S.s();!(v=S.n()).done;){var M=v.value;r[M][c]=M===k?"bottom":M===A?"top":"none"}}catch(se){S.e(se)}finally{S.f()}}else if(u.length>0&&h.length===0)if(u.length===1)r[u[0]][c]="both";else{var L,d=u[0],b=u[u.length-1],C=T(u);try{for(C.s();!(L=C.n()).done;){var I=L.value;r[I][c]=I===d?"bottom":I===b?"top":"none"}}catch(se){C.e(se)}finally{C.f()}}else if(h.length>0&&u.length>0){var P,_=h[h.length-1],N=T(h);try{for(N.s();!(P=N.n()).done;){var Y=P.value;r[Y][c]=Y===_?"top":"none"}}catch(se){N.e(se)}finally{N.f()}var G,J=u[u.length-1],Z=T(u);try{for(Z.s();!(G=Z.n()).done;){var Q=G.value;r[Q][c]=Q===J?"bottom":"none"}}catch(se){Z.e(se)}finally{Z.f()}}else p===1&&(r[h[0]||u[0]][c]="both")}return r}},{key:"barBackground",value:function(e){var t=e.j,i=e.i,n=e.x1,o=e.x2,r=e.y1,c=e.y2,h=e.elSeries,u=this.w,p=new V(this.barCtx.ctx),g=new it(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&g===i){t>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(t%=this.barCtx.barOptions.colors.backgroundBarColors.length);var x=this.barCtx.barOptions.colors.backgroundBarColors[t],v=p.drawRect(n!==void 0?n:0,r!==void 0?r:0,o!==void 0?o:u.globals.gridWidth,c!==void 0?c:u.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,x,this.barCtx.barOptions.colors.backgroundBarOpacity);h.add(v),v.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(e){var t,i=e.barWidth,n=e.barXPosition,o=e.y1,r=e.y2,c=e.strokeWidth,h=e.isReversed,u=e.series,p=e.seriesGroup,g=e.realIndex,x=e.i,v=e.j,k=e.w,A=new V(this.barCtx.ctx);(c=Array.isArray(c)?c[g]:c)||(c=0);var S=i,M=n;(t=k.config.series[g].data[v])!==null&&t!==void 0&&t.columnWidthOffset&&(M=n-k.config.series[g].data[v].columnWidthOffset/2,S=i+k.config.series[g].data[v].columnWidthOffset);var L=c/2,d=M+L,b=M+S-L,C=(u[x][v]>=0?1:-1)*(h?-1:1);o+=.001-L*C,r+=.001+L*C;var I=A.move(d,o),P=A.move(d,o),_=A.line(b,o);if(k.globals.previousPaths.length>0&&(P=this.barCtx.getPreviousPath(g,v,!1)),I=I+A.line(d,r)+A.line(b,r)+_+(k.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[g][v]==="both"?" Z":" z"),P=P+A.line(d,o)+_+_+_+_+_+A.line(d,o)+(k.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[g][v]==="both"?" Z":" z"),this.arrBorderRadius[g][v]!=="none"&&(I=A.roundPathCorners(I,k.config.plotOptions.bar.borderRadius)),k.config.chart.stacked){var N=this.barCtx;(N=this.barCtx[p]).yArrj.push(r-L*C),N.yArrjF.push(Math.abs(o-r+c*C)),N.yArrjVal.push(this.barCtx.series[x][v])}return{pathTo:I,pathFrom:P}}},{key:"getBarpaths",value:function(e){var t,i=e.barYPosition,n=e.barHeight,o=e.x1,r=e.x2,c=e.strokeWidth,h=e.isReversed,u=e.series,p=e.seriesGroup,g=e.realIndex,x=e.i,v=e.j,k=e.w,A=new V(this.barCtx.ctx);(c=Array.isArray(c)?c[g]:c)||(c=0);var S=i,M=n;(t=k.config.series[g].data[v])!==null&&t!==void 0&&t.barHeightOffset&&(S=i-k.config.series[g].data[v].barHeightOffset/2,M=n+k.config.series[g].data[v].barHeightOffset);var L=c/2,d=S+L,b=S+M-L,C=(u[x][v]>=0?1:-1)*(h?-1:1);o+=.001+L*C,r+=.001-L*C;var I=A.move(o,d),P=A.move(o,d);k.globals.previousPaths.length>0&&(P=this.barCtx.getPreviousPath(g,v,!1));var _=A.line(o,b);if(I=I+A.line(r,d)+A.line(r,b)+_+(k.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[g][v]==="both"?" Z":" z"),P=P+A.line(o,d)+_+_+_+_+_+A.line(o,d)+(k.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[g][v]==="both"?" Z":" z"),this.arrBorderRadius[g][v]!=="none"&&(I=A.roundPathCorners(I,k.config.plotOptions.bar.borderRadius)),k.config.chart.stacked){var N=this.barCtx;(N=this.barCtx[p]).xArrj.push(r+L*C),N.xArrjF.push(Math.abs(o-r-c*C)),N.xArrjVal.push(this.barCtx.series[x][v])}return{pathTo:I,pathFrom:P}}},{key:"checkZeroSeries",value:function(e){for(var t=e.series,i=this.w,n=0;n<t.length;n++){for(var o=0,r=0;r<t[i.globals.maxValsInArrayIndex].length;r++)o+=t[n][r];o===0&&this.barCtx.zeroSerieses.push(n)}}},{key:"getXForValue",value:function(e,t){var i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2]?t:null;return e!=null&&(i=t+e/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?e/this.barCtx.invertedYRatio:0)),i}},{key:"getYForValue",value:function(e,t,i){var n=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3]?t:null;return e!=null&&(n=t-e/this.barCtx.yRatio[i]+2*(this.barCtx.isReversed?e/this.barCtx.yRatio[i]:0)),n}},{key:"getGoalValues",value:function(e,t,i,n,o,r){var c=this,h=this.w,u=[],p=function(v,k){var A;u.push((R(A={},e,e==="x"?c.getXForValue(v,t,!1):c.getYForValue(v,i,r,!1)),R(A,"attrs",k),A))};if(h.globals.seriesGoals[n]&&h.globals.seriesGoals[n][o]&&Array.isArray(h.globals.seriesGoals[n][o])&&h.globals.seriesGoals[n][o].forEach(function(v){p(v.value,v)}),this.barCtx.barOptions.isDumbbell&&h.globals.seriesRange.length){var g=this.barCtx.barOptions.dumbbellColors?this.barCtx.barOptions.dumbbellColors:h.globals.colors,x={strokeHeight:e==="x"?0:h.globals.markers.size[n],strokeWidth:e==="x"?h.globals.markers.size[n]:0,strokeDashArray:0,strokeLineCap:"round",strokeColor:Array.isArray(g[n])?g[n][0]:g[n]};p(h.globals.seriesRangeStart[n][o],x),p(h.globals.seriesRangeEnd[n][o],X(X({},x),{},{strokeColor:Array.isArray(g[n])?g[n][1]:g[n]}))}return u}},{key:"drawGoalLine",value:function(e){var t=e.barXPosition,i=e.barYPosition,n=e.goalX,o=e.goalY,r=e.barWidth,c=e.barHeight,h=new V(this.barCtx.ctx),u=h.group({className:"apexcharts-bar-goals-groups"});u.node.classList.add("apexcharts-element-hidden"),this.barCtx.w.globals.delayedElements.push({el:u.node}),u.attr("clip-path","url(#gridRectMarkerMask".concat(this.barCtx.w.globals.cuid,")"));var p=null;return this.barCtx.isHorizontal?Array.isArray(n)&&n.forEach(function(g){if(g.x>=-1&&g.x<=h.w.globals.gridWidth+1){var x=g.attrs.strokeHeight!==void 0?g.attrs.strokeHeight:c/2,v=i+x+c/2;p=h.drawLine(g.x,v-2*x,g.x,v,g.attrs.strokeColor?g.attrs.strokeColor:void 0,g.attrs.strokeDashArray,g.attrs.strokeWidth?g.attrs.strokeWidth:2,g.attrs.strokeLineCap),u.add(p)}}):Array.isArray(o)&&o.forEach(function(g){if(g.y>=-1&&g.y<=h.w.globals.gridHeight+1){var x=g.attrs.strokeWidth!==void 0?g.attrs.strokeWidth:r/2,v=t+x+r/2;p=h.drawLine(v-2*x,g.y,v,g.y,g.attrs.strokeColor?g.attrs.strokeColor:void 0,g.attrs.strokeDashArray,g.attrs.strokeHeight?g.attrs.strokeHeight:2,g.attrs.strokeLineCap),u.add(p)}}),u}},{key:"drawBarShadow",value:function(e){var t=e.prevPaths,i=e.currPaths,n=e.color,o=this.w,r=t.x,c=t.x1,h=t.barYPosition,u=i.x,p=i.x1,g=i.barYPosition,x=h+i.barHeight,v=new V(this.barCtx.ctx),k=new H,A=v.move(c,x)+v.line(r,x)+v.line(u,g)+v.line(p,g)+v.line(c,x)+(o.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[realIndex][j]==="both"?" Z":" z");return v.drawPath({d:A,fill:k.shadeColor(.5,H.rgb2hex(n)),stroke:"none",strokeWidth:0,fillOpacity:1,classes:"apexcharts-bar-shadows"})}},{key:"getZeroValueEncounters",value:function(e){var t,i=e.i,n=e.j,o=this.w,r=0,c=0;return(o.config.plotOptions.bar.horizontal?o.globals.series.map(function(h,u){return u}):((t=o.globals.columnSeries)===null||t===void 0?void 0:t.i.map(function(h){return h}))||[]).forEach(function(h){var u=o.globals.seriesPercent[h][n];u&&r++,h<i&&u===0&&c++}),{nonZeroColumns:r,zeroEncounters:c}}},{key:"getGroupIndex",value:function(e){var t=this.w,i=t.globals.seriesGroups.findIndex(function(r){return r.indexOf(t.globals.seriesNames[e])>-1}),n=this.barCtx.columnGroupIndices,o=n.indexOf(i);return o<0&&(n.push(i),o=n.length-1),{groupIndex:i,columnGroupIndex:o}}}]),E}(),_t=function(){function E(e,t){m(this,E),this.ctx=e,this.w=e.w;var i=this.w;this.barOptions=i.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=i.config.stroke.width,this.isNullValue=!1,this.isRangeBar=i.globals.seriesRange.length&&this.isHorizontal,this.isVerticalGroupedRangeBar=!i.globals.isBarHorizontal&&i.globals.seriesRange.length&&i.config.plotOptions.bar.rangeBarGroupRows,this.isFunnel=this.barOptions.isFunnel,this.xyRatios=t,this.xyRatios!==null&&(this.xRatio=t.xRatio,this.yRatio=t.yRatio,this.invertedXRatio=t.invertedXRatio,this.invertedYRatio=t.invertedYRatio,this.baseLineY=t.baseLineY,this.baseLineInvertedY=t.baseLineInvertedY),this.yaxisIndex=0,this.translationsIndex=0,this.seriesLen=0,this.pathArr=[];var n=new it(this.ctx);this.lastActiveBarSerieIndex=n.getActiveConfigSeriesIndex("desc",["bar","column"]),this.columnGroupIndices=[];var o=n.getBarSeriesIndices(),r=new he(this.ctx);this.stackedSeriesTotals=r.getStackedSeriesTotals(this.w.config.series.map(function(c,h){return o.indexOf(h)===-1?h:-1}).filter(function(c){return c!==-1})),this.barHelpers=new cn(this)}return y(E,[{key:"draw",value:function(e,t){var i=this.w,n=new V(this.ctx),o=new he(this.ctx,i);e=o.getLogSeries(e),this.series=e,this.yRatio=o.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e);var r=n.group({class:"apexcharts-bar-series apexcharts-plot-series"});i.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering - ApexCharts");for(var c=0,h=0;c<e.length;c++,h++){var u,p,g,x,v=void 0,k=void 0,A=[],S=[],M=i.globals.comboCharts?t[c]:c,L=this.barHelpers.getGroupIndex(M).columnGroupIndex,d=n.group({class:"apexcharts-series",rel:c+1,seriesName:H.escapeString(i.globals.seriesNames[M]),"data:realIndex":M});this.ctx.series.addCollapsedClassToSeries(d,M),e[c].length>0&&(this.visibleI=this.visibleI+1);var b=0,C=0;this.yRatio.length>1&&(this.yaxisIndex=i.globals.seriesYAxisReverseMap[M],this.translationsIndex=M);var I=this.translationsIndex;this.isReversed=i.config.yaxis[this.yaxisIndex]&&i.config.yaxis[this.yaxisIndex].reversed;var P=this.barHelpers.initialPositions();k=P.y,b=P.barHeight,p=P.yDivision,x=P.zeroW,v=P.x,C=P.barWidth,u=P.xDivision,g=P.zeroH,this.horizontal||S.push(v+C/2);var _=n.group({class:"apexcharts-datalabels","data:realIndex":M});i.globals.delayedElements.push({el:_.node}),_.node.classList.add("apexcharts-element-hidden");var N=n.group({class:"apexcharts-bar-goals-markers"}),Y=n.group({class:"apexcharts-bar-shadows"});i.globals.delayedElements.push({el:Y.node}),Y.node.classList.add("apexcharts-element-hidden");for(var G=0;G<e[c].length;G++){var J=this.barHelpers.getStrokeWidth(c,G,M),Z=null,Q={indexes:{i:c,j:G,realIndex:M,translationsIndex:I,bc:h},x:v,y:k,strokeWidth:J,elSeries:d};this.isHorizontal?(Z=this.drawBarPaths(X(X({},Q),{},{barHeight:b,zeroW:x,yDivision:p})),C=this.series[c][G]/this.invertedYRatio):(Z=this.drawColumnPaths(X(X({},Q),{},{xDivision:u,barWidth:C,zeroH:g})),b=this.series[c][G]/this.yRatio[I]);var se=this.barHelpers.getPathFillColor(e,c,G,M);if(this.isFunnel&&this.barOptions.isFunnel3d&&this.pathArr.length&&G>0){var ce=this.barHelpers.drawBarShadow({color:typeof se=="string"&&(se==null?void 0:se.indexOf("url"))===-1?se:H.hexToRgba(i.globals.colors[c]),prevPaths:this.pathArr[this.pathArr.length-1],currPaths:Z});ce&&Y.add(ce)}this.pathArr.push(Z);var ue=this.barHelpers.drawGoalLine({barXPosition:Z.barXPosition,barYPosition:Z.barYPosition,goalX:Z.goalX,goalY:Z.goalY,barHeight:b,barWidth:C});ue&&N.add(ue),k=Z.y,v=Z.x,G>0&&S.push(v+C/2),A.push(k),this.renderSeries({realIndex:M,pathFill:se,j:G,i:c,columnGroupIndex:L,pathFrom:Z.pathFrom,pathTo:Z.pathTo,strokeWidth:J,elSeries:d,x:v,y:k,series:e,barHeight:Math.abs(Z.barHeight?Z.barHeight:b),barWidth:Math.abs(Z.barWidth?Z.barWidth:C),elDataLabelsWrap:_,elGoalsMarkers:N,elBarShadows:Y,visibleSeries:this.visibleI,type:"bar"})}i.globals.seriesXvalues[M]=S,i.globals.seriesYvalues[M]=A,r.add(d)}return r}},{key:"renderSeries",value:function(e){var t=e.realIndex,i=e.pathFill,n=e.lineFill,o=e.j,r=e.i,c=e.columnGroupIndex,h=e.pathFrom,u=e.pathTo,p=e.strokeWidth,g=e.elSeries,x=e.x,v=e.y,k=e.y1,A=e.y2,S=e.series,M=e.barHeight,L=e.barWidth,d=e.barXPosition,b=e.barYPosition,C=e.elDataLabelsWrap,I=e.elGoalsMarkers,P=e.elBarShadows,_=e.visibleSeries,N=e.type,Y=e.classes,G=this.w,J=new V(this.ctx);if(!n){var Z=typeof G.globals.stroke.colors[t]=="function"?function(ge){var xe,pe=G.config.stroke.colors;return Array.isArray(pe)&&pe.length>0&&((xe=pe[ge])||(xe=""),typeof xe=="function")?xe({value:G.globals.series[ge][o],dataPointIndex:o,w:G}):xe}(t):G.globals.stroke.colors[t];n=this.barOptions.distributed?G.globals.stroke.colors[o]:Z}G.config.series[r].data[o]&&G.config.series[r].data[o].strokeColor&&(n=G.config.series[r].data[o].strokeColor),this.isNullValue&&(i="none");var Q=o/G.config.chart.animations.animateGradually.delay*(G.config.chart.animations.speed/G.globals.dataPoints)/2.4,se=J.renderPaths({i:r,j:o,realIndex:t,pathFrom:h,pathTo:u,stroke:n,strokeWidth:p,strokeLineCap:G.config.stroke.lineCap,fill:i,animationDelay:Q,initialSpeed:G.config.chart.animations.speed,dataChangeSpeed:G.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(N,"-area ").concat(Y),chartType:N});se.attr("clip-path","url(#gridRectBarMask".concat(G.globals.cuid,")"));var ce=G.config.forecastDataPoints;ce.count>0&&o>=G.globals.dataPoints-ce.count&&(se.node.setAttribute("stroke-dasharray",ce.dashArray),se.node.setAttribute("stroke-width",ce.strokeWidth),se.node.setAttribute("fill-opacity",ce.fillOpacity)),k!==void 0&&A!==void 0&&(se.attr("data-range-y1",k),se.attr("data-range-y2",A)),new le(this.ctx).setSelectionFilter(se,t,o),g.add(se);var ue=new xt(this).handleBarDataLabels({x,y:v,y1:k,y2:A,i:r,j:o,series:S,realIndex:t,columnGroupIndex:c,barHeight:M,barWidth:L,barXPosition:d,barYPosition:b,renderedPath:se,visibleSeries:_});return ue.dataLabels!==null&&C.add(ue.dataLabels),ue.totalDataLabels&&C.add(ue.totalDataLabels),g.add(C),I&&g.add(I),P&&g.add(P),g}},{key:"drawBarPaths",value:function(e){var t,i=e.indexes,n=e.barHeight,o=e.strokeWidth,r=e.zeroW,c=e.x,h=e.y,u=e.yDivision,p=e.elSeries,g=this.w,x=i.i,v=i.j;if(g.globals.isXNumeric)t=(h=(g.globals.seriesX[x][v]-g.globals.minX)/this.invertedXRatio-n)+n*this.visibleI;else if(g.config.plotOptions.bar.hideZeroBarsWhenGrouped){var k=0,A=0;g.globals.seriesPercent.forEach(function(M,L){M[v]&&k++,L<x&&M[v]===0&&A++}),k>0&&(n=this.seriesLen*n/k),t=h+n*this.visibleI,t-=n*A}else t=h+n*this.visibleI;this.isFunnel&&(r-=(this.barHelpers.getXForValue(this.series[x][v],r)-r)/2),c=this.barHelpers.getXForValue(this.series[x][v],r);var S=this.barHelpers.getBarpaths({barYPosition:t,barHeight:n,x1:r,x2:c,strokeWidth:o,isReversed:this.isReversed,series:this.series,realIndex:i.realIndex,i:x,j:v,w:g});return g.globals.isXNumeric||(h+=u),this.barHelpers.barBackground({j:v,i:x,y1:t-n*this.visibleI,y2:n*this.seriesLen,elSeries:p}),{pathTo:S.pathTo,pathFrom:S.pathFrom,x1:r,x:c,y:h,goalX:this.barHelpers.getGoalValues("x",r,null,x,v),barYPosition:t,barHeight:n}}},{key:"drawColumnPaths",value:function(e){var t,i=e.indexes,n=e.x,o=e.y,r=e.xDivision,c=e.barWidth,h=e.zeroH,u=e.strokeWidth,p=e.elSeries,g=this.w,x=i.realIndex,v=i.translationsIndex,k=i.i,A=i.j,S=i.bc;if(g.globals.isXNumeric){var M=this.getBarXForNumericXAxis({x:n,j:A,realIndex:x,barWidth:c});n=M.x,t=M.barXPosition}else if(g.config.plotOptions.bar.hideZeroBarsWhenGrouped){var L=this.barHelpers.getZeroValueEncounters({i:k,j:A}),d=L.nonZeroColumns,b=L.zeroEncounters;d>0&&(c=this.seriesLen*c/d),t=n+c*this.visibleI,t-=c*b}else t=n+c*this.visibleI;o=this.barHelpers.getYForValue(this.series[k][A],h,v);var C=this.barHelpers.getColumnPaths({barXPosition:t,barWidth:c,y1:h,y2:o,strokeWidth:u,isReversed:this.isReversed,series:this.series,realIndex:x,i:k,j:A,w:g});return g.globals.isXNumeric||(n+=r),this.barHelpers.barBackground({bc:S,j:A,i:k,x1:t-u/2-c*this.visibleI,x2:c*this.seriesLen+u/2,elSeries:p}),{pathTo:C.pathTo,pathFrom:C.pathFrom,x:n,y:o,goalY:this.barHelpers.getGoalValues("y",null,h,k,A,v),barXPosition:t,barWidth:c}}},{key:"getBarXForNumericXAxis",value:function(e){var t=e.x,i=e.barWidth,n=e.realIndex,o=e.j,r=this.w,c=n;return r.globals.seriesX[n].length||(c=r.globals.maxValsInArrayIndex),r.globals.seriesX[c][o]&&(t=(r.globals.seriesX[c][o]-r.globals.minX)/this.xRatio-i*this.seriesLen/2),{barXPosition:t+i*this.visibleI,x:t}}},{key:"getPreviousPath",value:function(e,t){for(var i,n=this.w,o=0;o<n.globals.previousPaths.length;o++){var r=n.globals.previousPaths[o];r.paths&&r.paths.length>0&&parseInt(r.realIndex,10)===parseInt(e,10)&&n.globals.previousPaths[o].paths[t]!==void 0&&(i=n.globals.previousPaths[o].paths[t].d)}return i}}]),E}(),D=function(E){B(t,_t);var e=O(t);function t(){return m(this,t),e.apply(this,arguments)}return y(t,[{key:"draw",value:function(i,n){var o=this,r=this.w;this.graphics=new V(this.ctx),this.bar=new _t(this.ctx,this.xyRatios);var c=new he(this.ctx,r);i=c.getLogSeries(i),this.yRatio=c.getLogYRatios(this.yRatio),this.barHelpers.initVariables(i),r.config.chart.stackType==="100%"&&(i=r.globals.comboCharts?n.map(function(k){return r.globals.seriesPercent[k]}):r.globals.seriesPercent.slice()),this.series=i,this.barHelpers.initializeStackedPrevVars(this);for(var h=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),u=0,p=0,g=function(k,A){var S=void 0,M=void 0,L=void 0,d=void 0,b=r.globals.comboCharts?n[k]:k,C=o.barHelpers.getGroupIndex(b),I=C.groupIndex,P=C.columnGroupIndex;o.groupCtx=o[r.globals.seriesGroups[I]];var _=[],N=[],Y=0;o.yRatio.length>1&&(o.yaxisIndex=r.globals.seriesYAxisReverseMap[b][0],Y=b),o.isReversed=r.config.yaxis[o.yaxisIndex]&&r.config.yaxis[o.yaxisIndex].reversed;var G=o.graphics.group({class:"apexcharts-series",seriesName:H.escapeString(r.globals.seriesNames[b]),rel:k+1,"data:realIndex":b});o.ctx.series.addCollapsedClassToSeries(G,b);var J=o.graphics.group({class:"apexcharts-datalabels","data:realIndex":b}),Z=o.graphics.group({class:"apexcharts-bar-goals-markers"}),Q=0,se=0,ce=o.initialPositions(u,p,S,M,L,d,Y);p=ce.y,Q=ce.barHeight,M=ce.yDivision,d=ce.zeroW,u=ce.x,se=ce.barWidth,S=ce.xDivision,L=ce.zeroH,r.globals.barHeight=Q,r.globals.barWidth=se,o.barHelpers.initializeStackedXYVars(o),o.groupCtx.prevY.length===1&&o.groupCtx.prevY[0].every(function(Ie){return isNaN(Ie)})&&(o.groupCtx.prevY[0]=o.groupCtx.prevY[0].map(function(){return L}),o.groupCtx.prevYF[0]=o.groupCtx.prevYF[0].map(function(){return 0}));for(var ue=0;ue<r.globals.dataPoints;ue++){var ge=o.barHelpers.getStrokeWidth(k,ue,b),xe={indexes:{i:k,j:ue,realIndex:b,translationsIndex:Y,bc:A},strokeWidth:ge,x:u,y:p,elSeries:G,columnGroupIndex:P,seriesGroup:r.globals.seriesGroups[I]},pe=null;o.isHorizontal?(pe=o.drawStackedBarPaths(X(X({},xe),{},{zeroW:d,barHeight:Q,yDivision:M})),se=o.series[k][ue]/o.invertedYRatio):(pe=o.drawStackedColumnPaths(X(X({},xe),{},{xDivision:S,barWidth:se,zeroH:L})),Q=o.series[k][ue]/o.yRatio[Y]);var Ae=o.barHelpers.drawGoalLine({barXPosition:pe.barXPosition,barYPosition:pe.barYPosition,goalX:pe.goalX,goalY:pe.goalY,barHeight:Q,barWidth:se});Ae&&Z.add(Ae),p=pe.y,u=pe.x,_.push(u),N.push(p);var Fe=o.barHelpers.getPathFillColor(i,k,ue,b),Re="";r.globals.isBarHorizontal?o.barHelpers.arrBorderRadius[b][ue]==="bottom"&&r.globals.series[b][ue]>0&&(Re="apexcharts-flip-x"):o.barHelpers.arrBorderRadius[b][ue]==="bottom"&&r.globals.series[b][ue]>0&&(Re="apexcharts-flip-y"),G=o.renderSeries({realIndex:b,pathFill:Fe,j:ue,i:k,columnGroupIndex:P,pathFrom:pe.pathFrom,pathTo:pe.pathTo,strokeWidth:ge,elSeries:G,x:u,y:p,series:i,barHeight:Q,barWidth:se,elDataLabelsWrap:J,elGoalsMarkers:Z,type:"bar",visibleSeries:P,classes:Re})}r.globals.seriesXvalues[b]=_,r.globals.seriesYvalues[b]=N,o.groupCtx.prevY.push(o.groupCtx.yArrj),o.groupCtx.prevYF.push(o.groupCtx.yArrjF),o.groupCtx.prevYVal.push(o.groupCtx.yArrjVal),o.groupCtx.prevX.push(o.groupCtx.xArrj),o.groupCtx.prevXF.push(o.groupCtx.xArrjF),o.groupCtx.prevXVal.push(o.groupCtx.xArrjVal),h.add(G)},x=0,v=0;x<i.length;x++,v++)g(x,v);return h}},{key:"initialPositions",value:function(i,n,o,r,c,h,u){var p,g,x=this.w;if(this.isHorizontal){r=x.globals.gridHeight/x.globals.dataPoints;var v=x.config.plotOptions.bar.barHeight;p=String(v).indexOf("%")===-1?parseInt(v,10):r*parseInt(v,10)/100,h=x.globals.padHorizontal+(this.isReversed?x.globals.gridWidth-this.baseLineInvertedY:this.baseLineInvertedY),n=(r-p)/2}else{g=o=x.globals.gridWidth/x.globals.dataPoints;var k=x.config.plotOptions.bar.columnWidth;x.globals.isXNumeric&&x.globals.dataPoints>1?g=(o=x.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:String(k).indexOf("%")===-1?g=parseInt(k,10):g*=parseInt(k,10)/100,c=this.isReversed?this.baseLineY[u]:x.globals.gridHeight-this.baseLineY[u],i=x.globals.padHorizontal+(o-g)/2}var A=x.globals.barGroups.length||1;return{x:i,y:n,yDivision:r,xDivision:o,barHeight:p/A,barWidth:g/A,zeroH:c,zeroW:h}}},{key:"drawStackedBarPaths",value:function(i){for(var n,o=i.indexes,r=i.barHeight,c=i.strokeWidth,h=i.zeroW,u=i.x,p=i.y,g=i.columnGroupIndex,x=i.seriesGroup,v=i.yDivision,k=i.elSeries,A=this.w,S=p+g*r,M=o.i,L=o.j,d=o.realIndex,b=o.translationsIndex,C=0,I=0;I<this.groupCtx.prevXF.length;I++)C+=this.groupCtx.prevXF[I][L];var P;if((P=x.indexOf(A.config.series[d].name))>0){var _=h;this.groupCtx.prevXVal[P-1][L]<0?_=this.series[M][L]>=0?this.groupCtx.prevX[P-1][L]+C-2*(this.isReversed?C:0):this.groupCtx.prevX[P-1][L]:this.groupCtx.prevXVal[P-1][L]>=0&&(_=this.series[M][L]>=0?this.groupCtx.prevX[P-1][L]:this.groupCtx.prevX[P-1][L]-C+2*(this.isReversed?C:0)),n=_}else n=h;u=this.series[M][L]===null?n:n+this.series[M][L]/this.invertedYRatio-2*(this.isReversed?this.series[M][L]/this.invertedYRatio:0);var N=this.barHelpers.getBarpaths({barYPosition:S,barHeight:r,x1:n,x2:u,strokeWidth:c,isReversed:this.isReversed,series:this.series,realIndex:o.realIndex,seriesGroup:x,i:M,j:L,w:A});return this.barHelpers.barBackground({j:L,i:M,y1:S,y2:r,elSeries:k}),p+=v,{pathTo:N.pathTo,pathFrom:N.pathFrom,goalX:this.barHelpers.getGoalValues("x",h,null,M,L,b),barXPosition:n,barYPosition:S,x:u,y:p}}},{key:"drawStackedColumnPaths",value:function(i){var n=i.indexes,o=i.x,r=i.y,c=i.xDivision,h=i.barWidth,u=i.zeroH,p=i.columnGroupIndex,g=i.seriesGroup,x=i.elSeries,v=this.w,k=n.i,A=n.j,S=n.bc,M=n.realIndex,L=n.translationsIndex;if(v.globals.isXNumeric){var d=v.globals.seriesX[M][A];d||(d=0),o=(d-v.globals.minX)/this.xRatio-h/2*v.globals.barGroups.length}for(var b,C=o+p*h,I=0,P=0;P<this.groupCtx.prevYF.length;P++)I+=isNaN(this.groupCtx.prevYF[P][A])?0:this.groupCtx.prevYF[P][A];var _=k;if(g&&(_=g.indexOf(v.globals.seriesNames[M])),_>0&&!v.globals.isXNumeric||_>0&&v.globals.isXNumeric&&v.globals.seriesX[M-1][A]===v.globals.seriesX[M][A]){var N,Y,G,J=Math.min(this.yRatio.length+1,M+1);if(this.groupCtx.prevY[_-1]!==void 0&&this.groupCtx.prevY[_-1].length)for(var Z=1;Z<J;Z++){var Q;if(!isNaN((Q=this.groupCtx.prevY[_-Z])===null||Q===void 0?void 0:Q[A])){G=this.groupCtx.prevY[_-Z][A];break}}for(var se=1;se<J;se++){var ce,ue;if(((ce=this.groupCtx.prevYVal[_-se])===null||ce===void 0?void 0:ce[A])<0){Y=this.series[k][A]>=0?G-I+2*(this.isReversed?I:0):G;break}if(((ue=this.groupCtx.prevYVal[_-se])===null||ue===void 0?void 0:ue[A])>=0){Y=this.series[k][A]>=0?G:G+I-2*(this.isReversed?I:0);break}}Y===void 0&&(Y=v.globals.gridHeight),b=(N=this.groupCtx.prevYF[0])!==null&&N!==void 0&&N.every(function(xe){return xe===0})&&this.groupCtx.prevYF.slice(1,_).every(function(xe){return xe.every(function(pe){return isNaN(pe)})})?u:Y}else b=u;r=this.series[k][A]?b-this.series[k][A]/this.yRatio[L]+2*(this.isReversed?this.series[k][A]/this.yRatio[L]:0):b;var ge=this.barHelpers.getColumnPaths({barXPosition:C,barWidth:h,y1:b,y2:r,yRatio:this.yRatio[L],strokeWidth:this.strokeWidth,isReversed:this.isReversed,series:this.series,seriesGroup:g,realIndex:n.realIndex,i:k,j:A,w:v});return this.barHelpers.barBackground({bc:S,j:A,i:k,x1:C,x2:h,elSeries:x}),{pathTo:ge.pathTo,pathFrom:ge.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,u,k,A),barXPosition:C,x:v.globals.isXNumeric?o:o+c,y:r}}}]),t}(),F=function(E){B(t,_t);var e=O(t);function t(){return m(this,t),e.apply(this,arguments)}return y(t,[{key:"draw",value:function(i,n,o){var r=this,c=this.w,h=new V(this.ctx),u=c.globals.comboCharts?n:c.config.chart.type,p=new Ze(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=c.config.plotOptions.bar.horizontal;var g=new he(this.ctx,c);i=g.getLogSeries(i),this.series=i,this.yRatio=g.getLogYRatios(this.yRatio),this.barHelpers.initVariables(i);for(var x=h.group({class:"apexcharts-".concat(u,"-series apexcharts-plot-series")}),v=function(A){r.isBoxPlot=c.config.chart.type==="boxPlot"||c.config.series[A].type==="boxPlot";var S,M,L,d,b=void 0,C=void 0,I=[],P=[],_=c.globals.comboCharts?o[A]:A,N=r.barHelpers.getGroupIndex(_).columnGroupIndex,Y=h.group({class:"apexcharts-series",seriesName:H.escapeString(c.globals.seriesNames[_]),rel:A+1,"data:realIndex":_});r.ctx.series.addCollapsedClassToSeries(Y,_),i[A].length>0&&(r.visibleI=r.visibleI+1);var G,J,Z=0;r.yRatio.length>1&&(r.yaxisIndex=c.globals.seriesYAxisReverseMap[_][0],Z=_);var Q=r.barHelpers.initialPositions();C=Q.y,G=Q.barHeight,M=Q.yDivision,d=Q.zeroW,b=Q.x,J=Q.barWidth,S=Q.xDivision,L=Q.zeroH,P.push(b+J/2);for(var se=h.group({class:"apexcharts-datalabels","data:realIndex":_}),ce=function(ge){var xe=r.barHelpers.getStrokeWidth(A,ge,_),pe=null,Ae={indexes:{i:A,j:ge,realIndex:_,translationsIndex:Z},x:b,y:C,strokeWidth:xe,elSeries:Y};pe=r.isHorizontal?r.drawHorizontalBoxPaths(X(X({},Ae),{},{yDivision:M,barHeight:G,zeroW:d})):r.drawVerticalBoxPaths(X(X({},Ae),{},{xDivision:S,barWidth:J,zeroH:L})),C=pe.y,b=pe.x,ge>0&&P.push(b+J/2),I.push(C),pe.pathTo.forEach(function(Fe,Re){var Ie=!r.isBoxPlot&&r.candlestickOptions.wick.useFillColor?pe.color[Re]:c.globals.stroke.colors[A],ot=p.fillPath({seriesNumber:_,dataPointIndex:ge,color:pe.color[Re],value:i[A][ge]});r.renderSeries({realIndex:_,pathFill:ot,lineFill:Ie,j:ge,i:A,pathFrom:pe.pathFrom,pathTo:Fe,strokeWidth:xe,elSeries:Y,x:b,y:C,series:i,columnGroupIndex:N,barHeight:G,barWidth:J,elDataLabelsWrap:se,visibleSeries:r.visibleI,type:c.config.chart.type})})},ue=0;ue<c.globals.dataPoints;ue++)ce(ue);c.globals.seriesXvalues[_]=P,c.globals.seriesYvalues[_]=I,x.add(Y)},k=0;k<i.length;k++)v(k);return x}},{key:"drawVerticalBoxPaths",value:function(i){var n=i.indexes,o=i.x;i.y;var r=i.xDivision,c=i.barWidth,h=i.zeroH,u=i.strokeWidth,p=this.w,g=new V(this.ctx),x=n.i,v=n.j,k=!0,A=p.config.plotOptions.candlestick.colors.upward,S=p.config.plotOptions.candlestick.colors.downward,M="";this.isBoxPlot&&(M=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var L=this.yRatio[n.translationsIndex],d=n.realIndex,b=this.getOHLCValue(d,v),C=h,I=h;b.o>b.c&&(k=!1);var P=Math.min(b.o,b.c),_=Math.max(b.o,b.c),N=b.m;p.globals.isXNumeric&&(o=(p.globals.seriesX[d][v]-p.globals.minX)/this.xRatio-c/2);var Y=o+c*this.visibleI;this.series[x][v]===void 0||this.series[x][v]===null?(P=h,_=h):(P=h-P/L,_=h-_/L,C=h-b.h/L,I=h-b.l/L,N=h-b.m/L);var G=g.move(Y,h),J=g.move(Y+c/2,P);return p.globals.previousPaths.length>0&&(J=this.getPreviousPath(d,v,!0)),G=this.isBoxPlot?[g.move(Y,P)+g.line(Y+c/2,P)+g.line(Y+c/2,C)+g.line(Y+c/4,C)+g.line(Y+c-c/4,C)+g.line(Y+c/2,C)+g.line(Y+c/2,P)+g.line(Y+c,P)+g.line(Y+c,N)+g.line(Y,N)+g.line(Y,P+u/2),g.move(Y,N)+g.line(Y+c,N)+g.line(Y+c,_)+g.line(Y+c/2,_)+g.line(Y+c/2,I)+g.line(Y+c-c/4,I)+g.line(Y+c/4,I)+g.line(Y+c/2,I)+g.line(Y+c/2,_)+g.line(Y,_)+g.line(Y,N)+"z"]:[g.move(Y,_)+g.line(Y+c/2,_)+g.line(Y+c/2,C)+g.line(Y+c/2,_)+g.line(Y+c,_)+g.line(Y+c,P)+g.line(Y+c/2,P)+g.line(Y+c/2,I)+g.line(Y+c/2,P)+g.line(Y,P)+g.line(Y,_-u/2)],J+=g.move(Y,P),p.globals.isXNumeric||(o+=r),{pathTo:G,pathFrom:J,x:o,y:_,barXPosition:Y,color:this.isBoxPlot?M:k?[A]:[S]}}},{key:"drawHorizontalBoxPaths",value:function(i){var n=i.indexes;i.x;var o=i.y,r=i.yDivision,c=i.barHeight,h=i.zeroW,u=i.strokeWidth,p=this.w,g=new V(this.ctx),x=n.i,v=n.j,k=this.boxOptions.colors.lower;this.isBoxPlot&&(k=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var A=this.invertedYRatio,S=n.realIndex,M=this.getOHLCValue(S,v),L=h,d=h,b=Math.min(M.o,M.c),C=Math.max(M.o,M.c),I=M.m;p.globals.isXNumeric&&(o=(p.globals.seriesX[S][v]-p.globals.minX)/this.invertedXRatio-c/2);var P=o+c*this.visibleI;this.series[x][v]===void 0||this.series[x][v]===null?(b=h,C=h):(b=h+b/A,C=h+C/A,L=h+M.h/A,d=h+M.l/A,I=h+M.m/A);var _=g.move(h,P),N=g.move(b,P+c/2);return p.globals.previousPaths.length>0&&(N=this.getPreviousPath(S,v,!0)),_=[g.move(b,P)+g.line(b,P+c/2)+g.line(L,P+c/2)+g.line(L,P+c/2-c/4)+g.line(L,P+c/2+c/4)+g.line(L,P+c/2)+g.line(b,P+c/2)+g.line(b,P+c)+g.line(I,P+c)+g.line(I,P)+g.line(b+u/2,P),g.move(I,P)+g.line(I,P+c)+g.line(C,P+c)+g.line(C,P+c/2)+g.line(d,P+c/2)+g.line(d,P+c-c/4)+g.line(d,P+c/4)+g.line(d,P+c/2)+g.line(C,P+c/2)+g.line(C,P)+g.line(I,P)+"z"],N+=g.move(b,P),p.globals.isXNumeric||(o+=r),{pathTo:_,pathFrom:N,x:C,y:o,barYPosition:P,color:k}}},{key:"getOHLCValue",value:function(i,n){var o=this.w;return{o:this.isBoxPlot?o.globals.seriesCandleH[i][n]:o.globals.seriesCandleO[i][n],h:this.isBoxPlot?o.globals.seriesCandleO[i][n]:o.globals.seriesCandleH[i][n],m:o.globals.seriesCandleM[i][n],l:this.isBoxPlot?o.globals.seriesCandleC[i][n]:o.globals.seriesCandleL[i][n],c:this.isBoxPlot?o.globals.seriesCandleL[i][n]:o.globals.seriesCandleC[i][n]}}}]),t}(),W=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w}return y(E,[{key:"checkColorRange",value:function(){var e=this.w,t=!1,i=e.config.plotOptions[e.config.chart.type];return i.colorScale.ranges.length>0&&i.colorScale.ranges.map(function(n,o){n.from<=0&&(t=!0)}),t}},{key:"getShadeColor",value:function(e,t,i,n){var o=this.w,r=1,c=o.config.plotOptions[e].shadeIntensity,h=this.determineColor(e,t,i);o.globals.hasNegs||n?r=o.config.plotOptions[e].reverseNegativeShade?h.percent<0?h.percent/100*(1.25*c):(1-h.percent/100)*(1.25*c):h.percent<=0?1-(1+h.percent/100)*c:(1-h.percent/100)*c:(r=1-h.percent/100,e==="treemap"&&(r=(1-h.percent/100)*(1.25*c)));var u=h.color,p=new H;if(o.config.plotOptions[e].enableShades)if(this.w.config.theme.mode==="dark"){var g=p.shadeColor(-1*r,h.color);u=H.hexToRgba(H.isColorHex(g)?g:H.rgb2hex(g),o.config.fill.opacity)}else{var x=p.shadeColor(r,h.color);u=H.hexToRgba(H.isColorHex(x)?x:H.rgb2hex(x),o.config.fill.opacity)}return{color:u,colorProps:h}}},{key:"determineColor",value:function(e,t,i){var n=this.w,o=n.globals.series[t][i],r=n.config.plotOptions[e],c=r.colorScale.inverse?i:t;r.distributed&&n.config.chart.type==="treemap"&&(c=i);var h=n.globals.colors[c],u=null,p=Math.min.apply(Math,ie(n.globals.series[t])),g=Math.max.apply(Math,ie(n.globals.series[t]));r.distributed||e!=="heatmap"||(p=n.globals.minY,g=n.globals.maxY),r.colorScale.min!==void 0&&(p=r.colorScale.min<n.globals.minY?r.colorScale.min:n.globals.minY,g=r.colorScale.max>n.globals.maxY?r.colorScale.max:n.globals.maxY);var x=Math.abs(g)+Math.abs(p),v=100*o/(x===0?x-1e-6:x);return r.colorScale.ranges.length>0&&r.colorScale.ranges.map(function(k,A){if(o>=k.from&&o<=k.to){h=k.color,u=k.foreColor?k.foreColor:null,p=k.from,g=k.to;var S=Math.abs(g)+Math.abs(p);v=100*o/(S===0?S-1e-6:S)}}),{color:h,foreColor:u,percent:v}}},{key:"calculateDataLabels",value:function(e){var t=e.text,i=e.x,n=e.y,o=e.i,r=e.j,c=e.colorProps,h=e.fontSize,u=this.w.config.dataLabels,p=new V(this.ctx),g=new mt(this.ctx),x=null;if(u.enabled){x=p.group({class:"apexcharts-data-labels"});var v=u.offsetX,k=u.offsetY,A=i+v,S=n+parseFloat(u.style.fontSize)/3+k;g.plotDataLabelsText({x:A,y:S,text:t,i:o,j:r,color:c.foreColor,parent:x,fontSize:h,dataLabelsConfig:u})}return x}},{key:"addListeners",value:function(e){var t=new V(this.ctx);e.node.addEventListener("mouseenter",t.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",t.pathMouseLeave.bind(this,e)),e.node.addEventListener("mousedown",t.pathMouseDown.bind(this,e))}}]),E}(),K=function(){function E(e,t){m(this,E),this.ctx=e,this.w=e.w,this.xRatio=t.xRatio,this.yRatio=t.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new W(e),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return y(E,[{key:"draw",value:function(e){var t=this.w,i=new V(this.ctx),n=i.group({class:"apexcharts-heatmap"});n.attr("clip-path","url(#gridRectMask".concat(t.globals.cuid,")"));var o=t.globals.gridWidth/t.globals.dataPoints,r=t.globals.gridHeight/t.globals.series.length,c=0,h=!1;this.negRange=this.helpers.checkColorRange();var u=e.slice();t.config.yaxis[0].reversed&&(h=!0,u.reverse());for(var p=h?0:u.length-1;h?p<u.length:p>=0;h?p++:p--){var g=i.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:H.escapeString(t.globals.seriesNames[p]),rel:p+1,"data:realIndex":p});if(this.ctx.series.addCollapsedClassToSeries(g,p),t.config.chart.dropShadow.enabled){var x=t.config.chart.dropShadow;new le(this.ctx).dropShadow(g,x,p)}for(var v=0,k=t.config.plotOptions.heatmap.shadeIntensity,A=0;A<u[p].length;A++){var S=this.helpers.getShadeColor(t.config.chart.type,p,A,this.negRange),M=S.color,L=S.colorProps;t.config.fill.type==="image"&&(M=new Ze(this.ctx).fillPath({seriesNumber:p,dataPointIndex:A,opacity:t.globals.hasNegs?L.percent<0?1-(1+L.percent/100):k+L.percent/100:L.percent/100,patternID:H.randomId(),width:t.config.fill.image.width?t.config.fill.image.width:o,height:t.config.fill.image.height?t.config.fill.image.height:r}));var d=this.rectRadius,b=i.drawRect(v,c,o,r,d);if(b.attr({cx:v,cy:c}),b.node.classList.add("apexcharts-heatmap-rect"),g.add(b),b.attr({fill:M,i:p,index:p,j:A,val:e[p][A],"stroke-width":this.strokeWidth,stroke:t.config.plotOptions.heatmap.useFillColorAsStroke?M:t.globals.stroke.colors[0],color:M}),this.helpers.addListeners(b),t.config.chart.animations.enabled&&!t.globals.dataChanged){var C=1;t.globals.resized||(C=t.config.chart.animations.speed),this.animateHeatMap(b,v,c,o,r,C)}if(t.globals.dataChanged){var I=1;if(this.dynamicAnim.enabled&&t.globals.shouldAnimate){I=this.dynamicAnim.speed;var P=t.globals.previousPaths[p]&&t.globals.previousPaths[p][A]&&t.globals.previousPaths[p][A].color;P||(P="rgba(255, 255, 255, 0)"),this.animateHeatColor(b,H.isColorHex(P)?P:H.rgb2hex(P),H.isColorHex(M)?M:H.rgb2hex(M),I)}}var _=(0,t.config.dataLabels.formatter)(t.globals.series[p][A],{value:t.globals.series[p][A],seriesIndex:p,dataPointIndex:A,w:t}),N=this.helpers.calculateDataLabels({text:_,x:v+o/2,y:c+r/2,i:p,j:A,colorProps:L,series:u});N!==null&&g.add(N),v+=o}c+=r,n.add(g)}var Y=t.globals.yAxisScale[0].result.slice();return t.config.yaxis[0].reversed?Y.unshift(""):Y.push(""),t.globals.yAxisScale[0].result=Y,n}},{key:"animateHeatMap",value:function(e,t,i,n,o,r){var c=new ke(this.ctx);c.animateRect(e,{x:t+n/2,y:i+o/2,width:0,height:0},{x:t,y:i,width:n,height:o},r,function(){c.animationCompleted(e)})}},{key:"animateHeatColor",value:function(e,t,i,n){e.attr({fill:t}).animate(n).attr({fill:i})}}]),E}(),ne=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w}return y(E,[{key:"drawYAxisTexts",value:function(e,t,i,n){var o=this.w,r=o.config.yaxis[0],c=o.globals.yLabelFormatters[0];return new V(this.ctx).drawText({x:e+r.labels.offsetX,y:t+r.labels.offsetY,text:c(n,i),textAnchor:"middle",fontSize:r.labels.style.fontSize,fontFamily:r.labels.style.fontFamily,foreColor:Array.isArray(r.labels.style.colors)?r.labels.style.colors[i]:r.labels.style.colors})}}]),E}(),oe=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w;var t=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=t.globals.stroke.colors!==void 0?t.globals.stroke.colors:t.globals.colors,this.defaultSize=Math.min(t.globals.gridWidth,t.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=t.globals.gridWidth/2,t.config.chart.type==="radialBar"?this.fullAngle=360:this.fullAngle=Math.abs(t.config.plotOptions.pie.endAngle-t.config.plotOptions.pie.startAngle),this.initialAngle=t.config.plotOptions.pie.startAngle%this.fullAngle,t.globals.radialSize=this.defaultSize/2.05-t.config.stroke.width-(t.config.chart.sparkline.enabled?0:t.config.chart.dropShadow.blur),this.donutSize=t.globals.radialSize*parseInt(t.config.plotOptions.pie.donut.size,10)/100;var i=t.config.plotOptions.pie.customScale,n=t.globals.gridWidth/2,o=t.globals.gridHeight/2;this.translateX=n-n*i,this.translateY=o-o*i,this.dataLabelsGroup=new V(this.ctx).group({class:"apexcharts-datalabels-group",transform:"translate(".concat(this.translateX,", ").concat(this.translateY,") scale(").concat(i,")")}),this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return y(E,[{key:"draw",value:function(e){var t=this,i=this.w,n=new V(this.ctx),o=n.group({class:"apexcharts-pie"});if(i.globals.noData)return o;for(var r=0,c=0;c<e.length;c++)r+=H.negToZero(e[c]);var h=[],u=n.group();r===0&&(r=1e-5),e.forEach(function(d){t.maxY=Math.max(t.maxY,d)}),i.config.yaxis[0].max&&(this.maxY=i.config.yaxis[0].max),i.config.grid.position==="back"&&this.chartType==="polarArea"&&this.drawPolarElements(o);for(var p=0;p<e.length;p++){var g=this.fullAngle*H.negToZero(e[p])/r;h.push(g),this.chartType==="polarArea"?(h[p]=this.fullAngle/e.length,this.sliceSizes.push(i.globals.radialSize*e[p]/this.maxY)):this.sliceSizes.push(i.globals.radialSize)}if(i.globals.dataChanged){for(var x,v=0,k=0;k<i.globals.previousPaths.length;k++)v+=H.negToZero(i.globals.previousPaths[k]);for(var A=0;A<i.globals.previousPaths.length;A++)x=this.fullAngle*H.negToZero(i.globals.previousPaths[A])/v,this.prevSectorAngleArr.push(x)}if(this.donutSize<0&&(this.donutSize=0),this.chartType==="donut"){var S=n.drawCircle(this.donutSize);S.attr({cx:this.centerX,cy:this.centerY,fill:i.config.plotOptions.pie.donut.background?i.config.plotOptions.pie.donut.background:"transparent"}),u.add(S)}var M=this.drawArcs(h,e);if(this.sliceLabels.forEach(function(d){M.add(d)}),u.attr({transform:"translate(".concat(this.translateX,", ").concat(this.translateY,") scale(").concat(i.config.plotOptions.pie.customScale,")")}),u.add(M),o.add(u),this.donutDataLabels.show){var L=this.renderInnerDataLabels(this.dataLabelsGroup,this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show});o.add(L)}return i.config.grid.position==="front"&&this.chartType==="polarArea"&&this.drawPolarElements(o),o}},{key:"drawArcs",value:function(e,t){var i=this.w,n=new le(this.ctx),o=new V(this.ctx),r=new Ze(this.ctx),c=o.group({class:"apexcharts-slices"}),h=this.initialAngle,u=this.initialAngle,p=this.initialAngle,g=this.initialAngle;this.strokeWidth=i.config.stroke.show?i.config.stroke.width:0;for(var x=0;x<e.length;x++){var v=o.group({class:"apexcharts-series apexcharts-pie-series",seriesName:H.escapeString(i.globals.seriesNames[x]),rel:x+1,"data:realIndex":x});c.add(v),u=g,p=(h=p)+e[x],g=u+this.prevSectorAngleArr[x];var k=p<h?this.fullAngle+p-h:p-h,A=r.fillPath({seriesNumber:x,size:this.sliceSizes[x],value:t[x]}),S=this.getChangedPath(u,g),M=o.drawPath({d:S,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[x]:this.lineColorArr,strokeWidth:0,fill:A,fillOpacity:i.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(x)});if(M.attr({index:0,j:x}),n.setSelectionFilter(M,0,x),i.config.chart.dropShadow.enabled){var L=i.config.chart.dropShadow;n.dropShadow(M,L,x)}this.addListeners(M,this.donutDataLabels),V.setAttrs(M.node,{"data:angle":k,"data:startAngle":h,"data:strokeWidth":this.strokeWidth,"data:value":t[x]});var d={x:0,y:0};this.chartType==="pie"||this.chartType==="polarArea"?d=H.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize/1.25+i.config.plotOptions.pie.dataLabels.offset,(h+k/2)%this.fullAngle):this.chartType==="donut"&&(d=H.polarToCartesian(this.centerX,this.centerY,(i.globals.radialSize+this.donutSize)/2+i.config.plotOptions.pie.dataLabels.offset,(h+k/2)%this.fullAngle)),v.add(M);var b=0;if(!this.initialAnim||i.globals.resized||i.globals.dataChanged?this.animBeginArr.push(0):((b=k/this.fullAngle*i.config.chart.animations.speed)===0&&(b=1),this.animDur=b+this.animDur,this.animBeginArr.push(this.animDur)),this.dynamicAnim&&i.globals.dataChanged?this.animatePaths(M,{size:this.sliceSizes[x],endAngle:p,startAngle:h,prevStartAngle:u,prevEndAngle:g,animateStartingPos:!0,i:x,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:i.config.chart.animations.dynamicAnimation.speed}):this.animatePaths(M,{size:this.sliceSizes[x],endAngle:p,startAngle:h,i:x,totalItems:e.length-1,animBeginArr:this.animBeginArr,dur:b}),i.config.plotOptions.pie.expandOnClick&&this.chartType!=="polarArea"&&M.node.addEventListener("mouseup",this.pieClicked.bind(this,x)),i.globals.selectedDataPoints[0]!==void 0&&i.globals.selectedDataPoints[0].indexOf(x)>-1&&this.pieClicked(x),i.config.dataLabels.enabled){var C=d.x,I=d.y,P=100*k/this.fullAngle+"%";if(k!==0&&i.config.plotOptions.pie.dataLabels.minAngleToShowLabel<e[x]){var _=i.config.dataLabels.formatter;_!==void 0&&(P=_(i.globals.seriesPercent[x][0],{seriesIndex:x,w:i}));var N=i.globals.dataLabels.style.colors[x],Y=o.group({class:"apexcharts-datalabels"}),G=o.drawText({x:C,y:I,text:P,textAnchor:"middle",fontSize:i.config.dataLabels.style.fontSize,fontFamily:i.config.dataLabels.style.fontFamily,fontWeight:i.config.dataLabels.style.fontWeight,foreColor:N});if(Y.add(G),i.config.dataLabels.dropShadow.enabled){var J=i.config.dataLabels.dropShadow;n.dropShadow(G,J)}G.node.classList.add("apexcharts-pie-label"),i.config.chart.animations.animate&&i.globals.resized===!1&&(G.node.classList.add("apexcharts-pie-label-delay"),G.node.style.animationDelay=i.config.chart.animations.speed/940+"s"),this.sliceLabels.push(Y)}}}return c}},{key:"addListeners",value:function(e,t){var i=new V(this.ctx);e.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this,e)),e.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",i.pathMouseDown.bind(this,e)),this.donutDataLabels.total.showAlways||(e.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,e.node,t)))}},{key:"animatePaths",value:function(e,t){var i=this.w,n=t.endAngle<t.startAngle?this.fullAngle+t.endAngle-t.startAngle:t.endAngle-t.startAngle,o=n,r=t.startAngle,c=t.startAngle;t.prevStartAngle!==void 0&&t.prevEndAngle!==void 0&&(r=t.prevEndAngle,o=t.prevEndAngle<t.prevStartAngle?this.fullAngle+t.prevEndAngle-t.prevStartAngle:t.prevEndAngle-t.prevStartAngle),t.i===i.config.series.length-1&&(n+c>this.fullAngle?t.endAngle=t.endAngle-(n+c):n+c<this.fullAngle&&(t.endAngle=t.endAngle+(this.fullAngle-(n+c)))),n===this.fullAngle&&(n=this.fullAngle-.01),this.animateArc(e,r,c,n,o,t)}},{key:"animateArc",value:function(e,t,i,n,o,r){var c,h=this,u=this.w,p=new ke(this.ctx),g=r.size;(isNaN(t)||isNaN(o))&&(t=i,o=n,r.dur=0);var x=n,v=i,k=t<i?this.fullAngle+t-i:t-i;u.globals.dataChanged&&r.shouldSetPrevPaths&&r.prevEndAngle&&(c=h.getPiePath({me:h,startAngle:r.prevStartAngle,angle:r.prevEndAngle<r.prevStartAngle?this.fullAngle+r.prevEndAngle-r.prevStartAngle:r.prevEndAngle-r.prevStartAngle,size:g}),e.attr({d:c})),r.dur!==0?e.animate(r.dur,u.globals.easing,r.animBeginArr[r.i]).afterAll(function(){h.chartType!=="pie"&&h.chartType!=="donut"&&h.chartType!=="polarArea"||this.animate(u.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":h.strokeWidth}),r.i===u.config.series.length-1&&p.animationCompleted(e)}).during(function(A){x=k+(n-k)*A,r.animateStartingPos&&(x=o+(n-o)*A,v=t-o+(i-(t-o))*A),c=h.getPiePath({me:h,startAngle:v,angle:x,size:g}),e.node.setAttribute("data:pathOrig",c),e.attr({d:c})}):(c=h.getPiePath({me:h,startAngle:v,angle:n,size:g}),r.isTrack||(u.globals.animationEnded=!0),e.node.setAttribute("data:pathOrig",c),e.attr({d:c,"stroke-width":h.strokeWidth}))}},{key:"pieClicked",value:function(e){var t,i=this.w,n=this,o=n.sliceSizes[e]+(i.config.plotOptions.pie.expandOnClick?4:0),r=i.globals.dom.Paper.select(".apexcharts-".concat(n.chartType.toLowerCase(),"-slice-").concat(e)).members[0];if(r.attr("data:pieClicked")!=="true"){var c=i.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(c,function(g){g.setAttribute("data:pieClicked","false");var x=g.getAttribute("data:pathOrig");x&&g.setAttribute("d",x)}),i.globals.capturedDataPointIndex=e,r.attr("data:pieClicked","true");var h=parseInt(r.attr("data:startAngle"),10),u=parseInt(r.attr("data:angle"),10);t=n.getPiePath({me:n,startAngle:h,angle:u,size:o}),u!==360&&r.plot(t)}else{r.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(r.node,this.donutDataLabels);var p=r.attr("data:pathOrig");r.attr({d:p})}}},{key:"getChangedPath",value:function(e,t){var i="";return this.dynamicAnim&&this.w.globals.dataChanged&&(i=this.getPiePath({me:this,startAngle:e,angle:t-e,size:this.size})),i}},{key:"getPiePath",value:function(e){var t,i=e.me,n=e.startAngle,o=e.angle,r=e.size,c=new V(this.ctx),h=n,u=Math.PI*(h-90)/180,p=o+n;Math.ceil(p)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(p=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(p)>this.fullAngle&&(p-=this.fullAngle);var g=Math.PI*(p-90)/180,x=i.centerX+r*Math.cos(u),v=i.centerY+r*Math.sin(u),k=i.centerX+r*Math.cos(g),A=i.centerY+r*Math.sin(g),S=H.polarToCartesian(i.centerX,i.centerY,i.donutSize,p),M=H.polarToCartesian(i.centerX,i.centerY,i.donutSize,h),L=o>180?1:0,d=["M",x,v,"A",r,r,0,L,1,k,A];return t=i.chartType==="donut"?[].concat(d,["L",S.x,S.y,"A",i.donutSize,i.donutSize,0,L,0,M.x,M.y,"L",x,v,"z"]).join(" "):i.chartType==="pie"||i.chartType==="polarArea"?[].concat(d,["L",i.centerX,i.centerY,"L",x,v]).join(" "):[].concat(d).join(" "),c.roundPathCorners(t,2*this.strokeWidth)}},{key:"drawPolarElements",value:function(e){var t=this.w,i=new Ei(this.ctx),n=new V(this.ctx),o=new ne(this.ctx),r=n.group(),c=n.group(),h=i.niceScale(0,Math.ceil(this.maxY),0),u=h.result.reverse(),p=h.result.length;this.maxY=h.niceMax;for(var g=t.globals.radialSize,x=g/(p-1),v=0;v<p-1;v++){var k=n.drawCircle(g);if(k.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":t.config.plotOptions.polarArea.rings.strokeWidth,stroke:t.config.plotOptions.polarArea.rings.strokeColor}),t.config.yaxis[0].show){var A=o.drawYAxisTexts(this.centerX,this.centerY-g+parseInt(t.config.yaxis[0].labels.style.fontSize,10)/2,v,u[v]);c.add(A)}r.add(k),g-=x}this.drawSpokes(e),e.add(r),e.add(c)}},{key:"renderInnerDataLabels",value:function(e,t,i){var n=this.w,o=new V(this.ctx),r=t.total.show;e.node.innerHTML="",e.node.style.opacity=i.opacity;var c,h,u=i.centerX,p=this.donutDataLabels.total.label?i.centerY:i.centerY-i.centerY/6;c=t.name.color===void 0?n.globals.colors[0]:t.name.color;var g=t.name.fontSize,x=t.name.fontFamily,v=t.name.fontWeight;h=t.value.color===void 0?n.config.chart.foreColor:t.value.color;var k=t.value.formatter,A="",S="";if(r?(c=t.total.color,g=t.total.fontSize,x=t.total.fontFamily,v=t.total.fontWeight,S=this.donutDataLabels.total.label?t.total.label:"",A=t.total.formatter(n)):n.globals.series.length===1&&(A=k(n.globals.series[0],n),S=n.globals.seriesNames[0]),S&&(S=t.name.formatter(S,t.total.show,n)),t.name.show){var M=o.drawText({x:u,y:p+parseFloat(t.name.offsetY),text:S,textAnchor:"middle",foreColor:c,fontSize:g,fontWeight:v,fontFamily:x});M.node.classList.add("apexcharts-datalabel-label"),e.add(M)}if(t.value.show){var L=t.name.show?parseFloat(t.value.offsetY)+16:t.value.offsetY,d=o.drawText({x:u,y:p+L,text:A,textAnchor:"middle",foreColor:h,fontWeight:t.value.fontWeight,fontSize:t.value.fontSize,fontFamily:t.value.fontFamily});d.node.classList.add("apexcharts-datalabel-value"),e.add(d)}return e}},{key:"printInnerLabels",value:function(e,t,i,n){var o,r=this.w;n?o=e.name.color===void 0?r.globals.colors[parseInt(n.parentNode.getAttribute("rel"),10)-1]:e.name.color:r.globals.series.length>1&&e.total.show&&(o=e.total.color);var c=r.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),h=r.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");i=(0,e.value.formatter)(i,r),n||typeof e.total.formatter!="function"||(i=e.total.formatter(r));var u=t===e.total.label;t=this.donutDataLabels.total.label?e.name.formatter(t,u,r):"",c!==null&&(c.textContent=t),h!==null&&(h.textContent=i),c!==null&&(c.style.fill=o)}},{key:"printDataLabelsInner",value:function(e,t){var i=this.w,n=e.getAttribute("data:value"),o=i.globals.seriesNames[parseInt(e.parentNode.getAttribute("rel"),10)-1];i.globals.series.length>1&&this.printInnerLabels(t,o,n,e);var r=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");r!==null&&(r.style.opacity=1)}},{key:"drawSpokes",value:function(e){var t=this,i=this.w,n=new V(this.ctx),o=i.config.plotOptions.polarArea.spokes;if(o.strokeWidth!==0){for(var r=[],c=360/i.globals.series.length,h=0;h<i.globals.series.length;h++)r.push(H.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize,i.config.plotOptions.pie.startAngle+c*h));r.forEach(function(u,p){var g=n.drawLine(u.x,u.y,t.centerX,t.centerY,Array.isArray(o.connectorColors)?o.connectorColors[p]:o.connectorColors);e.add(g)})}}},{key:"revertDataLabelsInner",value:function(){var e=this.w;if(this.donutDataLabels.show){var t=e.globals.dom.Paper.select(".apexcharts-datalabels-group").members[0],i=this.renderInnerDataLabels(t,this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show});e.globals.dom.Paper.select(".apexcharts-radialbar, .apexcharts-pie").members[0].add(i)}}}]),E}(),ve=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var t=this.w;this.graphics=new V(this.ctx),this.lineColorArr=t.globals.stroke.colors!==void 0?t.globals.stroke.colors:t.globals.colors,this.defaultSize=t.globals.svgHeight<t.globals.svgWidth?t.globals.gridHeight:t.globals.gridWidth,this.isLog=t.config.yaxis[0].logarithmic,this.logBase=t.config.yaxis[0].logBase,this.coreUtils=new he(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(this.logBase,t.globals.maxY,0):t.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.logBase,this.w.globals.minY,0):t.globals.minY,this.polygons=t.config.plotOptions.radar.polygons,this.strokeWidth=t.config.stroke.show?t.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-t.config.chart.dropShadow.blur,t.config.xaxis.labels.show&&(this.size=this.size-t.globals.xAxisLabelsWidth/1.75),t.config.plotOptions.radar.size!==void 0&&(this.size=t.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return y(E,[{key:"draw",value:function(e){var t=this,i=this.w,n=new Ze(this.ctx),o=[],r=new mt(this.ctx);e.length&&(this.dataPointsLen=e[i.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var c=i.globals.gridWidth/2,h=i.globals.gridHeight/2,u=c+i.config.plotOptions.radar.offsetX,p=h+i.config.plotOptions.radar.offsetY,g=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(u||0,", ").concat(p||0,")")}),x=[],v=null,k=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),e.forEach(function(S,M){var L=S.length===i.globals.dataPoints,d=t.graphics.group().attr({class:"apexcharts-series","data:longestSeries":L,seriesName:H.escapeString(i.globals.seriesNames[M]),rel:M+1,"data:realIndex":M});t.dataRadiusOfPercent[M]=[],t.dataRadius[M]=[],t.angleArr[M]=[],S.forEach(function(Z,Q){var se=Math.abs(t.maxValue-t.minValue);Z-=t.minValue,t.isLog&&(Z=t.coreUtils.getLogVal(t.logBase,Z,0)),t.dataRadiusOfPercent[M][Q]=Z/se,t.dataRadius[M][Q]=t.dataRadiusOfPercent[M][Q]*t.size,t.angleArr[M][Q]=Q*t.disAngle}),x=t.getDataPointsPos(t.dataRadius[M],t.angleArr[M]);var b=t.createPaths(x,{x:0,y:0});v=t.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),k=t.graphics.group({class:"apexcharts-datalabels","data:realIndex":M}),i.globals.delayedElements.push({el:v.node,index:M});var C={i:M,realIndex:M,animationDelay:M,initialSpeed:i.config.chart.animations.speed,dataChangeSpeed:i.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:i.globals.stroke.colors[M],strokeLineCap:i.config.stroke.lineCap},I=null;i.globals.previousPaths.length>0&&(I=t.getPreviousPath(M));for(var P=0;P<b.linePathsTo.length;P++){var _=t.graphics.renderPaths(X(X({},C),{},{pathFrom:I===null?b.linePathsFrom[P]:I,pathTo:b.linePathsTo[P],strokeWidth:Array.isArray(t.strokeWidth)?t.strokeWidth[M]:t.strokeWidth,fill:"none",drawShadow:!1}));d.add(_);var N=n.fillPath({seriesNumber:M}),Y=t.graphics.renderPaths(X(X({},C),{},{pathFrom:I===null?b.areaPathsFrom[P]:I,pathTo:b.areaPathsTo[P],strokeWidth:0,fill:N,drawShadow:!1}));if(i.config.chart.dropShadow.enabled){var G=new le(t.ctx),J=i.config.chart.dropShadow;G.dropShadow(Y,Object.assign({},J,{noUserSpaceOnUse:!0}),M)}d.add(Y)}S.forEach(function(Z,Q){var se=new pt(t.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:M,dataPointIndex:Q}),ce=t.graphics.drawMarker(x[Q].x,x[Q].y,se);ce.attr("rel",Q),ce.attr("j",Q),ce.attr("index",M),ce.node.setAttribute("default-marker-size",se.pSize);var ue=t.graphics.group({class:"apexcharts-series-markers"});ue&&ue.add(ce),v.add(ue),d.add(v);var ge=i.config.dataLabels;if(ge.enabled){var xe=ge.formatter(i.globals.series[M][Q],{seriesIndex:M,dataPointIndex:Q,w:i});r.plotDataLabelsText({x:x[Q].x,y:x[Q].y,text:xe,textAnchor:"middle",i:M,j:M,parent:k,offsetCorrection:!1,dataLabelsConfig:X({},ge)})}d.add(k)}),o.push(d)}),this.drawPolygons({parent:g}),i.config.xaxis.labels.show){var A=this.drawXAxisTexts();g.add(A)}return o.forEach(function(S){g.add(S)}),g.add(this.yaxisLabels),g}},{key:"drawPolygons",value:function(e){for(var t=this,i=this.w,n=e.parent,o=new ne(this.ctx),r=i.globals.yAxisScale[0].result.reverse(),c=r.length,h=[],u=this.size/(c-1),p=0;p<c;p++)h[p]=u*p;h.reverse();var g=[],x=[];h.forEach(function(v,k){var A=H.getPolygonPos(v,t.dataPointsLen),S="";A.forEach(function(M,L){if(k===0){var d=t.graphics.drawLine(M.x,M.y,0,0,Array.isArray(t.polygons.connectorColors)?t.polygons.connectorColors[L]:t.polygons.connectorColors);x.push(d)}L===0&&t.yaxisLabelsTextsPos.push({x:M.x,y:M.y}),S+=M.x+","+M.y+" "}),g.push(S)}),g.forEach(function(v,k){var A=t.polygons.strokeColors,S=t.polygons.strokeWidth,M=t.graphics.drawPolygon(v,Array.isArray(A)?A[k]:A,Array.isArray(S)?S[k]:S,i.globals.radarPolygons.fill.colors[k]);n.add(M)}),x.forEach(function(v){n.add(v)}),i.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(v,k){var A=o.drawYAxisTexts(v.x,v.y,k,r[k]);t.yaxisLabels.add(A)})}},{key:"drawXAxisTexts",value:function(){var e=this,t=this.w,i=t.config.xaxis.labels,n=this.graphics.group({class:"apexcharts-xaxis"}),o=H.getPolygonPos(this.size,this.dataPointsLen);return t.globals.labels.forEach(function(r,c){var h=t.config.xaxis.labels.formatter,u=new mt(e.ctx);if(o[c]){var p=e.getTextPos(o[c],e.size),g=h(r,{seriesIndex:-1,dataPointIndex:c,w:t});u.plotDataLabelsText({x:p.newX,y:p.newY,text:g,textAnchor:p.textAnchor,i:c,j:c,parent:n,className:"apexcharts-xaxis-label",color:Array.isArray(i.style.colors)&&i.style.colors[c]?i.style.colors[c]:"#a8a8a8",dataLabelsConfig:X({textAnchor:p.textAnchor,dropShadow:{enabled:!1}},i),offsetCorrection:!1}).on("click",function(x){if(typeof t.config.chart.events.xAxisLabelClick=="function"){var v=Object.assign({},t,{labelIndex:c});t.config.chart.events.xAxisLabelClick(x,e.ctx,v)}})}}),n}},{key:"createPaths",value:function(e,t){var i=this,n=[],o=[],r=[],c=[];if(e.length){o=[this.graphics.move(t.x,t.y)],c=[this.graphics.move(t.x,t.y)];var h=this.graphics.move(e[0].x,e[0].y),u=this.graphics.move(e[0].x,e[0].y);e.forEach(function(p,g){h+=i.graphics.line(p.x,p.y),u+=i.graphics.line(p.x,p.y),g===e.length-1&&(h+="Z",u+="Z")}),n.push(h),r.push(u)}return{linePathsFrom:o,linePathsTo:n,areaPathsFrom:c,areaPathsTo:r}}},{key:"getTextPos",value:function(e,t){var i="middle",n=e.x,o=e.y;return Math.abs(e.x)>=10?e.x>0?(i="start",n+=10):e.x<0&&(i="end",n-=10):i="middle",Math.abs(e.y)>=t-10&&(e.y<0?o-=10:e.y>0&&(o+=10)),{textAnchor:i,newX:n,newY:o}}},{key:"getPreviousPath",value:function(e){for(var t=this.w,i=null,n=0;n<t.globals.previousPaths.length;n++){var o=t.globals.previousPaths[n];o.paths.length>0&&parseInt(o.realIndex,10)===parseInt(e,10)&&t.globals.previousPaths[n].paths[0]!==void 0&&(i=t.globals.previousPaths[n].paths[0].d)}return i}},{key:"getDataPointsPos",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.dataPointsLen;e=e||[],t=t||[];for(var n=[],o=0;o<i;o++){var r={};r.x=e[o]*Math.sin(t[o]),r.y=-e[o]*Math.cos(t[o]),n.push(r)}return n}}]),E}(),fe=function(E){B(t,oe);var e=O(t);function t(i){var n;m(this,t),(n=e.call(this,i)).ctx=i,n.w=i.w,n.animBeginArr=[0],n.animDur=0;var o=n.w;return n.startAngle=o.config.plotOptions.radialBar.startAngle,n.endAngle=o.config.plotOptions.radialBar.endAngle,n.totalAngle=Math.abs(o.config.plotOptions.radialBar.endAngle-o.config.plotOptions.radialBar.startAngle),n.trackStartAngle=o.config.plotOptions.radialBar.track.startAngle,n.trackEndAngle=o.config.plotOptions.radialBar.track.endAngle,n.barLabels=n.w.config.plotOptions.radialBar.barLabels,n.donutDataLabels=n.w.config.plotOptions.radialBar.dataLabels,n.radialDataLabels=n.donutDataLabels,n.trackStartAngle||(n.trackStartAngle=n.startAngle),n.trackEndAngle||(n.trackEndAngle=n.endAngle),n.endAngle===360&&(n.endAngle=359.99),n.margin=parseInt(o.config.plotOptions.radialBar.track.margin,10),n.onBarLabelClick=n.onBarLabelClick.bind(f(n)),n}return y(t,[{key:"draw",value:function(i){var n=this.w,o=new V(this.ctx),r=o.group({class:"apexcharts-radialbar"});if(n.globals.noData)return r;var c=o.group(),h=this.defaultSize/2,u=n.globals.gridWidth/2,p=this.defaultSize/2.05;n.config.chart.sparkline.enabled||(p=p-n.config.stroke.width-n.config.chart.dropShadow.blur);var g=n.globals.fill.colors;if(n.config.plotOptions.radialBar.track.show){var x=this.drawTracks({size:p,centerX:u,centerY:h,colorArr:g,series:i});c.add(x)}var v=this.drawArcs({size:p,centerX:u,centerY:h,colorArr:g,series:i}),k=360;n.config.plotOptions.radialBar.startAngle<0&&(k=this.totalAngle);var A=(360-k)/360;if(n.globals.radialSize=p-p*A,this.radialDataLabels.value.show){var S=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);n.globals.radialSize+=S*A}return c.add(v.g),n.config.plotOptions.radialBar.hollow.position==="front"&&(v.g.add(v.elHollow),v.dataLabels&&v.g.add(v.dataLabels)),r.add(c),r}},{key:"drawTracks",value:function(i){var n=this.w,o=new V(this.ctx),r=o.group({class:"apexcharts-tracks"}),c=new le(this.ctx),h=new Ze(this.ctx),u=this.getStrokeWidth(i);i.size=i.size-u/2;for(var p=0;p<i.series.length;p++){var g=o.group({class:"apexcharts-radialbar-track apexcharts-track"});r.add(g),g.attr({rel:p+1}),i.size=i.size-u-this.margin;var x=n.config.plotOptions.radialBar.track,v=h.fillPath({seriesNumber:0,size:i.size,fillColors:Array.isArray(x.background)?x.background[p]:x.background,solid:!0}),k=this.trackStartAngle,A=this.trackEndAngle;Math.abs(A)+Math.abs(k)>=360&&(A=360-Math.abs(this.startAngle)-.1);var S=o.drawPath({d:"",stroke:v,strokeWidth:u*parseInt(x.strokeWidth,10)/100,fill:"none",strokeOpacity:x.opacity,classes:"apexcharts-radialbar-area"});if(x.dropShadow.enabled){var M=x.dropShadow;c.dropShadow(S,M)}g.add(S),S.attr("id","apexcharts-radialbarTrack-"+p),this.animatePaths(S,{centerX:i.centerX,centerY:i.centerY,endAngle:A,startAngle:k,size:i.size,i:p,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:n.globals.easing})}return r}},{key:"drawArcs",value:function(i){var n=this.w,o=new V(this.ctx),r=new Ze(this.ctx),c=new le(this.ctx),h=o.group(),u=this.getStrokeWidth(i);i.size=i.size-u/2;var p=n.config.plotOptions.radialBar.hollow.background,g=i.size-u*i.series.length-this.margin*i.series.length-u*parseInt(n.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,x=g-n.config.plotOptions.radialBar.hollow.margin;n.config.plotOptions.radialBar.hollow.image!==void 0&&(p=this.drawHollowImage(i,h,g,p));var v=this.drawHollow({size:x,centerX:i.centerX,centerY:i.centerY,fill:p||"transparent"});if(n.config.plotOptions.radialBar.hollow.dropShadow.enabled){var k=n.config.plotOptions.radialBar.hollow.dropShadow;c.dropShadow(v,k)}var A=1;!this.radialDataLabels.total.show&&n.globals.series.length>1&&(A=0);var S=null;if(this.radialDataLabels.show){var M=n.globals.dom.Paper.select(".apexcharts-datalabels-group").members[0];S=this.renderInnerDataLabels(M,this.radialDataLabels,{hollowSize:g,centerX:i.centerX,centerY:i.centerY,opacity:A})}n.config.plotOptions.radialBar.hollow.position==="back"&&(h.add(v),S&&h.add(S));var L=!1;n.config.plotOptions.radialBar.inverseOrder&&(L=!0);for(var d=L?i.series.length-1:0;L?d>=0:d<i.series.length;L?d--:d++){var b=o.group({class:"apexcharts-series apexcharts-radial-series",seriesName:H.escapeString(n.globals.seriesNames[d])});h.add(b),b.attr({rel:d+1,"data:realIndex":d}),this.ctx.series.addCollapsedClassToSeries(b,d),i.size=i.size-u-this.margin;var C=r.fillPath({seriesNumber:d,size:i.size,value:i.series[d]}),I=this.startAngle,P=void 0,_=H.negToZero(i.series[d]>100?100:i.series[d])/100,N=Math.round(this.totalAngle*_)+this.startAngle,Y=void 0;n.globals.dataChanged&&(P=this.startAngle,Y=Math.round(this.totalAngle*H.negToZero(n.globals.previousPaths[d])/100)+P),Math.abs(N)+Math.abs(I)>360&&(N-=.01),Math.abs(Y)+Math.abs(P)>360&&(Y-=.01);var G=N-I,J=Array.isArray(n.config.stroke.dashArray)?n.config.stroke.dashArray[d]:n.config.stroke.dashArray,Z=o.drawPath({d:"",stroke:C,strokeWidth:u,fill:"none",fillOpacity:n.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+d,strokeDashArray:J});if(V.setAttrs(Z.node,{"data:angle":G,"data:value":i.series[d]}),n.config.chart.dropShadow.enabled){var Q=n.config.chart.dropShadow;c.dropShadow(Z,Q,d)}if(c.setSelectionFilter(Z,0,d),this.addListeners(Z,this.radialDataLabels),b.add(Z),Z.attr({index:0,j:d}),this.barLabels.enabled){var se=H.polarToCartesian(i.centerX,i.centerY,i.size,I),ce=this.barLabels.formatter(n.globals.seriesNames[d],{seriesIndex:d,w:n}),ue=["apexcharts-radialbar-label"];this.barLabels.onClick||ue.push("apexcharts-no-click");var ge=this.barLabels.useSeriesColors?n.globals.colors[d]:n.config.chart.foreColor;ge||(ge=n.config.chart.foreColor);var xe=se.x+this.barLabels.offsetX,pe=se.y+this.barLabels.offsetY,Ae=o.drawText({x:xe,y:pe,text:ce,textAnchor:"end",dominantBaseline:"middle",fontFamily:this.barLabels.fontFamily,fontWeight:this.barLabels.fontWeight,fontSize:this.barLabels.fontSize,foreColor:ge,cssClass:ue.join(" ")});Ae.on("click",this.onBarLabelClick),Ae.attr({rel:d+1}),I!==0&&Ae.attr({"transform-origin":"".concat(xe," ").concat(pe),transform:"rotate(".concat(I," 0 0)")}),b.add(Ae)}var Fe=0;!this.initialAnim||n.globals.resized||n.globals.dataChanged||(Fe=n.config.chart.animations.speed),n.globals.dataChanged&&(Fe=n.config.chart.animations.dynamicAnimation.speed),this.animDur=Fe/(1.2*i.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(Z,{centerX:i.centerX,centerY:i.centerY,endAngle:N,startAngle:I,prevEndAngle:Y,prevStartAngle:P,size:i.size,i:d,totalItems:2,animBeginArr:this.animBeginArr,dur:Fe,shouldSetPrevPaths:!0,easing:n.globals.easing})}return{g:h,elHollow:v,dataLabels:S}}},{key:"drawHollow",value:function(i){var n=new V(this.ctx).drawCircle(2*i.size);return n.attr({class:"apexcharts-radialbar-hollow",cx:i.centerX,cy:i.centerY,r:i.size,fill:i.fill}),n}},{key:"drawHollowImage",value:function(i,n,o,r){var c=this.w,h=new Ze(this.ctx),u=H.randomId(),p=c.config.plotOptions.radialBar.hollow.image;if(c.config.plotOptions.radialBar.hollow.imageClipped)h.clippedImgArea({width:o,height:o,image:p,patternID:"pattern".concat(c.globals.cuid).concat(u)}),r="url(#pattern".concat(c.globals.cuid).concat(u,")");else{var g=c.config.plotOptions.radialBar.hollow.imageWidth,x=c.config.plotOptions.radialBar.hollow.imageHeight;if(g===void 0&&x===void 0){var v=c.globals.dom.Paper.image(p).loaded(function(A){this.move(i.centerX-A.width/2+c.config.plotOptions.radialBar.hollow.imageOffsetX,i.centerY-A.height/2+c.config.plotOptions.radialBar.hollow.imageOffsetY)});n.add(v)}else{var k=c.globals.dom.Paper.image(p).loaded(function(A){this.move(i.centerX-g/2+c.config.plotOptions.radialBar.hollow.imageOffsetX,i.centerY-x/2+c.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(g,x)});n.add(k)}}return r}},{key:"getStrokeWidth",value:function(i){var n=this.w;return i.size*(100-parseInt(n.config.plotOptions.radialBar.hollow.size,10))/100/(i.series.length+1)-this.margin}},{key:"onBarLabelClick",value:function(i){var n=parseInt(i.target.getAttribute("rel"),10)-1,o=this.barLabels.onClick,r=this.w;o&&o(r.globals.seriesNames[n],{w:r,seriesIndex:n})}}]),t}(),we=function(E){B(t,_t);var e=O(t);function t(){return m(this,t),e.apply(this,arguments)}return y(t,[{key:"draw",value:function(i,n){var o=this.w,r=new V(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=i,this.seriesRangeStart=o.globals.seriesRangeStart,this.seriesRangeEnd=o.globals.seriesRangeEnd,this.barHelpers.initVariables(i);for(var c=r.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),h=0;h<i.length;h++){var u,p,g,x,v=void 0,k=void 0,A=o.globals.comboCharts?n[h]:h,S=this.barHelpers.getGroupIndex(A).columnGroupIndex,M=r.group({class:"apexcharts-series",seriesName:H.escapeString(o.globals.seriesNames[A]),rel:h+1,"data:realIndex":A});this.ctx.series.addCollapsedClassToSeries(M,A),i[h].length>0&&(this.visibleI=this.visibleI+1);var L=0,d=0,b=0;this.yRatio.length>1&&(this.yaxisIndex=o.globals.seriesYAxisReverseMap[A][0],b=A);var C=this.barHelpers.initialPositions();k=C.y,x=C.zeroW,v=C.x,d=C.barWidth,L=C.barHeight,u=C.xDivision,p=C.yDivision,g=C.zeroH;for(var I=r.group({class:"apexcharts-datalabels","data:realIndex":A}),P=r.group({class:"apexcharts-rangebar-goals-markers"}),_=0;_<o.globals.dataPoints;_++){var N=this.barHelpers.getStrokeWidth(h,_,A),Y=this.seriesRangeStart[h][_],G=this.seriesRangeEnd[h][_],J=null,Z=null,Q=null,se={x:v,y:k,strokeWidth:N,elSeries:M},ce=this.seriesLen;if(o.config.plotOptions.bar.rangeBarGroupRows&&(ce=1),o.config.series[h].data[_]===void 0)break;if(this.isHorizontal){Q=k+L*this.visibleI;var ue=(p-L*ce)/2;if(o.config.series[h].data[_].x){var ge=this.detectOverlappingBars({i:h,j:_,barYPosition:Q,srty:ue,barHeight:L,yDivision:p,initPositions:C});L=ge.barHeight,Q=ge.barYPosition}d=(J=this.drawRangeBarPaths(X({indexes:{i:h,j:_,realIndex:A},barHeight:L,barYPosition:Q,zeroW:x,yDivision:p,y1:Y,y2:G},se))).barWidth}else{o.globals.isXNumeric&&(v=(o.globals.seriesX[h][_]-o.globals.minX)/this.xRatio-d/2),Z=v+d*this.visibleI;var xe=(u-d*ce)/2;if(o.config.series[h].data[_].x){var pe=this.detectOverlappingBars({i:h,j:_,barXPosition:Z,srtx:xe,barWidth:d,xDivision:u,initPositions:C});d=pe.barWidth,Z=pe.barXPosition}L=(J=this.drawRangeColumnPaths(X({indexes:{i:h,j:_,realIndex:A,translationsIndex:b},barWidth:d,barXPosition:Z,zeroH:g,xDivision:u},se))).barHeight}var Ae=this.barHelpers.drawGoalLine({barXPosition:J.barXPosition,barYPosition:Q,goalX:J.goalX,goalY:J.goalY,barHeight:L,barWidth:d});Ae&&P.add(Ae),k=J.y,v=J.x;var Fe=this.barHelpers.getPathFillColor(i,h,_,A),Re=o.globals.stroke.colors[A];this.renderSeries({realIndex:A,pathFill:Fe,lineFill:Re,j:_,i:h,x:v,y:k,y1:Y,y2:G,pathFrom:J.pathFrom,pathTo:J.pathTo,strokeWidth:N,elSeries:M,series:i,barHeight:L,barWidth:d,barXPosition:Z,barYPosition:Q,columnGroupIndex:S,elDataLabelsWrap:I,elGoalsMarkers:P,visibleSeries:this.visibleI,type:"rangebar"})}c.add(M)}return c}},{key:"detectOverlappingBars",value:function(i){var n=i.i,o=i.j,r=i.barYPosition,c=i.barXPosition,h=i.srty,u=i.srtx,p=i.barHeight,g=i.barWidth,x=i.yDivision,v=i.xDivision,k=i.initPositions,A=this.w,S=[],M=A.config.series[n].data[o].rangeName,L=A.config.series[n].data[o].x,d=Array.isArray(L)?L.join(" "):L,b=A.globals.labels.map(function(I){return Array.isArray(I)?I.join(" "):I}).indexOf(d),C=A.globals.seriesRange[n].findIndex(function(I){return I.x===d&&I.overlaps.length>0});return this.isHorizontal?(r=A.config.plotOptions.bar.rangeBarGroupRows?h+x*b:h+p*this.visibleI+x*b,C>-1&&!A.config.plotOptions.bar.rangeBarOverlap&&(S=A.globals.seriesRange[n][C].overlaps).indexOf(M)>-1&&(r=(p=k.barHeight/S.length)*this.visibleI+x*(100-parseInt(this.barOptions.barHeight,10))/100/2+p*(this.visibleI+S.indexOf(M))+x*b)):(b>-1&&!A.globals.timescaleLabels.length&&(c=A.config.plotOptions.bar.rangeBarGroupRows?u+v*b:u+g*this.visibleI+v*b),C>-1&&!A.config.plotOptions.bar.rangeBarOverlap&&(S=A.globals.seriesRange[n][C].overlaps).indexOf(M)>-1&&(c=(g=k.barWidth/S.length)*this.visibleI+v*(100-parseInt(this.barOptions.barWidth,10))/100/2+g*(this.visibleI+S.indexOf(M))+v*b)),{barYPosition:r,barXPosition:c,barHeight:p,barWidth:g}}},{key:"drawRangeColumnPaths",value:function(i){var n=i.indexes,o=i.x,r=i.xDivision,c=i.barWidth,h=i.barXPosition,u=i.zeroH,p=this.w,g=n.i,x=n.j,v=n.realIndex,k=n.translationsIndex,A=this.yRatio[k],S=this.getRangeValue(v,x),M=Math.min(S.start,S.end),L=Math.max(S.start,S.end);this.series[g][x]===void 0||this.series[g][x]===null?M=u:(M=u-M/A,L=u-L/A);var d=Math.abs(L-M),b=this.barHelpers.getColumnPaths({barXPosition:h,barWidth:c,y1:M,y2:L,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:v,i:v,j:x,w:p});if(p.globals.isXNumeric){var C=this.getBarXForNumericXAxis({x:o,j:x,realIndex:v,barWidth:c});o=C.x,h=C.barXPosition}else o+=r;return{pathTo:b.pathTo,pathFrom:b.pathFrom,barHeight:d,x:o,y:S.start<0&&S.end<0?M:L,goalY:this.barHelpers.getGoalValues("y",null,u,g,x,k),barXPosition:h}}},{key:"preventBarOverflow",value:function(i){var n=this.w;return i<0&&(i=0),i>n.globals.gridWidth&&(i=n.globals.gridWidth),i}},{key:"drawRangeBarPaths",value:function(i){var n=i.indexes,o=i.y,r=i.y1,c=i.y2,h=i.yDivision,u=i.barHeight,p=i.barYPosition,g=i.zeroW,x=this.w,v=n.realIndex,k=n.j,A=this.preventBarOverflow(g+r/this.invertedYRatio),S=this.preventBarOverflow(g+c/this.invertedYRatio),M=this.getRangeValue(v,k),L=Math.abs(S-A),d=this.barHelpers.getBarpaths({barYPosition:p,barHeight:u,x1:A,x2:S,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:v,realIndex:v,j:k,w:x});return x.globals.isXNumeric||(o+=h),{pathTo:d.pathTo,pathFrom:d.pathFrom,barWidth:L,x:M.start<0&&M.end<0?A:S,goalX:this.barHelpers.getGoalValues("x",g,null,v,k),y:o}}},{key:"getRangeValue",value:function(i,n){var o=this.w;return{start:o.globals.seriesRangeStart[i][n],end:o.globals.seriesRangeEnd[i][n]}}}]),t}(),de=function(){function E(e){m(this,E),this.w=e.w,this.lineCtx=e}return y(E,[{key:"sameValueSeriesFix",value:function(e,t){var i=this.w;if((i.config.fill.type==="gradient"||i.config.fill.type[e]==="gradient")&&new he(this.lineCtx.ctx,i).seriesHaveSameValues(e)){var n=t[e].slice();n[n.length-1]=n[n.length-1]+1e-6,t[e]=n}return t}},{key:"calculatePoints",value:function(e){var t=e.series,i=e.realIndex,n=e.x,o=e.y,r=e.i,c=e.j,h=e.prevY,u=this.w,p=[],g=[];if(c===0){var x=this.lineCtx.categoryAxisCorrection+u.config.markers.offsetX;u.globals.isXNumeric&&(x=(u.globals.seriesX[i][0]-u.globals.minX)/this.lineCtx.xRatio+u.config.markers.offsetX),p.push(x),g.push(H.isNumber(t[r][0])?h+u.config.markers.offsetY:null),p.push(n+u.config.markers.offsetX),g.push(H.isNumber(t[r][c+1])?o+u.config.markers.offsetY:null)}else p.push(n+u.config.markers.offsetX),g.push(H.isNumber(t[r][c+1])?o+u.config.markers.offsetY:null);return{x:p,y:g}}},{key:"checkPreviousPaths",value:function(e){for(var t=e.pathFromLine,i=e.pathFromArea,n=e.realIndex,o=this.w,r=0;r<o.globals.previousPaths.length;r++){var c=o.globals.previousPaths[r];(c.type==="line"||c.type==="area")&&c.paths.length>0&&parseInt(c.realIndex,10)===parseInt(n,10)&&(c.type==="line"?(this.lineCtx.appendPathFrom=!1,t=o.globals.previousPaths[r].paths[0].d):c.type==="area"&&(this.lineCtx.appendPathFrom=!1,i=o.globals.previousPaths[r].paths[0].d,o.config.stroke.show&&o.globals.previousPaths[r].paths[1]&&(t=o.globals.previousPaths[r].paths[1].d)))}return{pathFromLine:t,pathFromArea:i}}},{key:"determineFirstPrevY",value:function(e){var t,i,n,o=e.i,r=e.realIndex,c=e.series,h=e.prevY,u=e.lineYPosition,p=e.translationsIndex,g=this.w,x=g.config.chart.stacked&&!g.globals.comboCharts||g.config.chart.stacked&&g.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||((t=this.w.config.series[r])===null||t===void 0?void 0:t.type)==="bar"||((i=this.w.config.series[r])===null||i===void 0?void 0:i.type)==="column");if(((n=c[o])===null||n===void 0?void 0:n[0])!==void 0)h=(u=x&&o>0?this.lineCtx.prevSeriesY[o-1][0]:this.lineCtx.zeroY)-c[o][0]/this.lineCtx.yRatio[p]+2*(this.lineCtx.isReversed?c[o][0]/this.lineCtx.yRatio[p]:0);else if(x&&o>0&&c[o][0]===void 0){for(var v=o-1;v>=0;v--)if(c[v][0]!==null&&c[v][0]!==void 0){h=u=this.lineCtx.prevSeriesY[v][0];break}}return{prevY:h,lineYPosition:u}}}]),E}(),me=function(E){for(var e,t,i,n,o=function(p){for(var g=[],x=p[0],v=p[1],k=g[0]=Ge(x,v),A=1,S=p.length-1;A<S;A++)x=v,v=p[A+1],g[A]=.5*(k+(k=Ge(x,v)));return g[A]=k,g}(E),r=E.length-1,c=[],h=0;h<r;h++)i=Ge(E[h],E[h+1]),Math.abs(i)<1e-6?o[h]=o[h+1]=0:(n=(e=o[h]/i)*e+(t=o[h+1]/i)*t)>9&&(n=3*i/Math.sqrt(n),o[h]=n*e,o[h+1]=n*t);for(var u=0;u<=r;u++)n=(E[Math.min(r,u+1)][0]-E[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u])),c.push([n||0,o[u]*n||0]);return c},Pe=function(E){var e=me(E),t=E[1],i=E[0],n=[],o=e[1],r=e[0];n.push(i,[i[0]+r[0],i[1]+r[1],t[0]-o[0],t[1]-o[1],t[0],t[1]]);for(var c=2,h=e.length;c<h;c++){var u=E[c],p=e[c];n.push([u[0]-p[0],u[1]-p[1],u[0],u[1]])}return n},ut=function(E,e,t){var i=E.slice(e,t);if(e){if(t-e>1&&i[1].length<6){var n=i[0].length;i[1]=[2*i[0][n-2]-i[0][n-4],2*i[0][n-1]-i[0][n-3]].concat(i[1])}i[0]=i[0].slice(-2)}return i};function Ge(E,e){return(e[1]-E[1])/(e[0]-E[0])}var Pt=function(){function E(e,t,i){m(this,E),this.ctx=e,this.w=e.w,this.xyRatios=t,this.pointsChart=!(this.w.config.chart.type!=="bubble"&&this.w.config.chart.type!=="scatter")||i,this.scatter=new kt(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new de(this),this.markers=new pt(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return y(E,[{key:"draw",value:function(e,t,i,n){var o,r=this.w,c=new V(this.ctx),h=r.globals.comboCharts?t:r.config.chart.type,u=c.group({class:"apexcharts-".concat(h,"-series apexcharts-plot-series")}),p=new he(this.ctx,r);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,e=p.getLogSeries(e),this.yRatio=p.getLogYRatios(this.yRatio),this.prevSeriesY=[];for(var g=[],x=0;x<e.length;x++){e=this.lineHelpers.sameValueSeriesFix(x,e);var v=r.globals.comboCharts?i[x]:x,k=this.yRatio.length>1?v:0;this._initSerieVariables(e,x,v);var A=[],S=[],M=[],L=r.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,v),r.globals.isXNumeric&&r.globals.seriesX.length>0&&(L=(r.globals.seriesX[v][0]-r.globals.minX)/this.xRatio),M.push(L);var d,b=L,C=void 0,I=b,P=this.zeroY,_=this.zeroY;P=this.lineHelpers.determineFirstPrevY({i:x,realIndex:v,series:e,prevY:P,lineYPosition:0,translationsIndex:k}).prevY,r.config.stroke.curve==="monotoneCubic"&&e[x][0]===null?A.push(null):A.push(P),d=P,h==="rangeArea"&&(C=_=this.lineHelpers.determineFirstPrevY({i:x,realIndex:v,series:n,prevY:_,lineYPosition:0,translationsIndex:k}).prevY,S.push(A[0]!==null?_:null));var N=this._calculatePathsFrom({type:h,series:e,i:x,realIndex:v,translationsIndex:k,prevX:I,prevY:P,prevY2:_}),Y=[A[0]],G=[S[0]],J={type:h,series:e,realIndex:v,translationsIndex:k,i:x,x:L,y:1,pX:b,pY:d,pathsFrom:N,linePaths:[],areaPaths:[],seriesIndex:i,lineYPosition:0,xArrj:M,yArrj:A,y2Arrj:S,seriesRangeEnd:n},Z=this._iterateOverDataPoints(X(X({},J),{},{iterations:h==="rangeArea"?e[x].length-1:void 0,isRangeStart:!0}));if(h==="rangeArea"){for(var Q=this._calculatePathsFrom({series:n,i:x,realIndex:v,prevX:I,prevY:_}),se=this._iterateOverDataPoints(X(X({},J),{},{series:n,xArrj:[L],yArrj:Y,y2Arrj:G,pY:C,areaPaths:Z.areaPaths,pathsFrom:Q,iterations:n[x].length-1,isRangeStart:!1})),ce=Z.linePaths.length/2,ue=0;ue<ce;ue++)Z.linePaths[ue]=se.linePaths[ue+ce]+Z.linePaths[ue];Z.linePaths.splice(ce),Z.pathFromLine=se.pathFromLine+Z.pathFromLine}else Z.pathFromArea+="z";this._handlePaths({type:h,realIndex:v,i:x,paths:Z}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),g.push(this.elSeries)}if(((o=r.config.series[0])===null||o===void 0?void 0:o.zIndex)!==void 0&&g.sort(function(pe,Ae){return Number(pe.node.getAttribute("zIndex"))-Number(Ae.node.getAttribute("zIndex"))}),r.config.chart.stacked)for(var ge=g.length-1;ge>=0;ge--)u.add(g[ge]);else for(var xe=0;xe<g.length;xe++)u.add(g[xe]);return u}},{key:"_initSerieVariables",value:function(e,t,i){var n=this.w,o=new V(this.ctx);this.xDivision=n.globals.gridWidth/(n.globals.dataPoints-(n.config.xaxis.tickPlacement==="on"?1:0)),this.strokeWidth=Array.isArray(n.config.stroke.width)?n.config.stroke.width[i]:n.config.stroke.width;var r=0;this.yRatio.length>1&&(this.yaxisIndex=n.globals.seriesYAxisReverseMap[i],r=i),this.isReversed=n.config.yaxis[this.yaxisIndex]&&n.config.yaxis[this.yaxisIndex].reversed,this.zeroY=n.globals.gridHeight-this.baseLineY[r]-(this.isReversed?n.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[r]:0),this.areaBottomY=this.zeroY,(this.zeroY>n.globals.gridHeight||n.config.plotOptions.area.fillTo==="end")&&(this.areaBottomY=n.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=o.group({class:"apexcharts-series",zIndex:n.config.series[i].zIndex!==void 0?n.config.series[i].zIndex:i,seriesName:H.escapeString(n.globals.seriesNames[i])}),this.elPointsMain=o.group({class:"apexcharts-series-markers-wrap","data:realIndex":i}),this.elDataLabelsWrap=o.group({class:"apexcharts-datalabels","data:realIndex":i});var c=e[t].length===n.globals.dataPoints;this.elSeries.attr({"data:longestSeries":c,rel:t+1,"data:realIndex":i}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(e){var t,i,n,o,r=e.type,c=e.series,h=e.i,u=e.realIndex,p=e.translationsIndex,g=e.prevX,x=e.prevY,v=e.prevY2,k=this.w,A=new V(this.ctx);if(c[h][0]===null){for(var S=0;S<c[h].length;S++)if(c[h][S]!==null){g=this.xDivision*S,x=this.zeroY-c[h][S]/this.yRatio[p],t=A.move(g,x),i=A.move(g,this.areaBottomY);break}}else t=A.move(g,x),r==="rangeArea"&&(t=A.move(g,v)+A.line(g,x)),i=A.move(g,this.areaBottomY)+A.line(g,x);if(n=A.move(0,this.zeroY)+A.line(0,this.zeroY),o=A.move(0,this.zeroY)+A.line(0,this.zeroY),k.globals.previousPaths.length>0){var M=this.lineHelpers.checkPreviousPaths({pathFromLine:n,pathFromArea:o,realIndex:u});n=M.pathFromLine,o=M.pathFromArea}return{prevX:g,prevY:x,linePath:t,areaPath:i,pathFromLine:n,pathFromArea:o}}},{key:"_handlePaths",value:function(e){var t=e.type,i=e.realIndex,n=e.i,o=e.paths,r=this.w,c=new V(this.ctx),h=new Ze(this.ctx);this.prevSeriesY.push(o.yArrj),r.globals.seriesXvalues[i]=o.xArrj,r.globals.seriesYvalues[i]=o.yArrj;var u=r.config.forecastDataPoints;if(u.count>0&&t!=="rangeArea"){var p=r.globals.seriesXvalues[i][r.globals.seriesXvalues[i].length-u.count-1],g=c.drawRect(p,0,r.globals.gridWidth,r.globals.gridHeight,0);r.globals.dom.elForecastMask.appendChild(g.node);var x=c.drawRect(0,0,p,r.globals.gridHeight,0);r.globals.dom.elNonForecastMask.appendChild(x.node)}this.pointsChart||r.globals.delayedElements.push({el:this.elPointsMain.node,index:i});var v={i:n,realIndex:i,animationDelay:n,initialSpeed:r.config.chart.animations.speed,dataChangeSpeed:r.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(t)};if(t==="area")for(var k=h.fillPath({seriesNumber:i}),A=0;A<o.areaPaths.length;A++){var S=c.renderPaths(X(X({},v),{},{pathFrom:o.pathFromArea,pathTo:o.areaPaths[A],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:k}));this.elSeries.add(S)}if(r.config.stroke.show&&!this.pointsChart){var M=null;if(t==="line")M=h.fillPath({seriesNumber:i,i:n});else if(r.config.stroke.fill.type==="solid")M=r.globals.stroke.colors[i];else{var L=r.config.fill;r.config.fill=r.config.stroke.fill,M=h.fillPath({seriesNumber:i,i:n}),r.config.fill=L}for(var d=0;d<o.linePaths.length;d++){var b=M;t==="rangeArea"&&(b=h.fillPath({seriesNumber:i}));var C=X(X({},v),{},{pathFrom:o.pathFromLine,pathTo:o.linePaths[d],stroke:M,strokeWidth:this.strokeWidth,strokeLineCap:r.config.stroke.lineCap,fill:t==="rangeArea"?b:"none"}),I=c.renderPaths(C);if(this.elSeries.add(I),I.attr("fill-rule","evenodd"),u.count>0&&t!=="rangeArea"){var P=c.renderPaths(C);P.node.setAttribute("stroke-dasharray",u.dashArray),u.strokeWidth&&P.node.setAttribute("stroke-width",u.strokeWidth),this.elSeries.add(P),P.attr("clip-path","url(#forecastMask".concat(r.globals.cuid,")")),I.attr("clip-path","url(#nonForecastMask".concat(r.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(e){var t,i,n=this,o=e.type,r=e.series,c=e.iterations,h=e.realIndex,u=e.translationsIndex,p=e.i,g=e.x,x=e.y,v=e.pX,k=e.pY,A=e.pathsFrom,S=e.linePaths,M=e.areaPaths,L=e.seriesIndex,d=e.lineYPosition,b=e.xArrj,C=e.yArrj,I=e.y2Arrj,P=e.isRangeStart,_=e.seriesRangeEnd,N=this.w,Y=new V(this.ctx),G=this.yRatio,J=A.prevY,Z=A.linePath,Q=A.areaPath,se=A.pathFromLine,ce=A.pathFromArea,ue=H.isNumber(N.globals.minYArr[h])?N.globals.minYArr[h]:N.globals.minY;c||(c=N.globals.dataPoints>1?N.globals.dataPoints-1:N.globals.dataPoints);var ge=function(je,Ue){return Ue-je/G[u]+2*(n.isReversed?je/G[u]:0)},xe=x,pe=N.config.chart.stacked&&!N.globals.comboCharts||N.config.chart.stacked&&N.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||((t=this.w.config.series[h])===null||t===void 0?void 0:t.type)==="bar"||((i=this.w.config.series[h])===null||i===void 0?void 0:i.type)==="column"),Ae=N.config.stroke.curve;Array.isArray(Ae)&&(Ae=Array.isArray(L)?Ae[L[p]]:Ae[p]);for(var Fe,Re=0,Ie=0;Ie<c;Ie++){var ot=r[p][Ie+1]===void 0||r[p][Ie+1]===null;if(N.globals.isXNumeric){var Ee=N.globals.seriesX[h][Ie+1];N.globals.seriesX[h][Ie+1]===void 0&&(Ee=N.globals.seriesX[h][c-1]),g=(Ee-N.globals.minX)/this.xRatio}else g+=this.xDivision;pe?p>0&&N.globals.collapsedSeries.length<N.config.series.length-1?d=this.prevSeriesY[function(je){for(var Ue=je;Ue>0;Ue--){if(!(N.globals.collapsedSeriesIndices.indexOf((L==null?void 0:L[Ue])||Ue)>-1))return Ue;Ue--}return 0}(p-1)][Ie+1]:d=this.zeroY:d=this.zeroY,ot?x=ge(ue,d):(x=ge(r[p][Ie+1],d),o==="rangeArea"&&(xe=ge(_[p][Ie+1],d))),b.push(g),!ot||N.config.stroke.curve!=="smooth"&&N.config.stroke.curve!=="monotoneCubic"?(C.push(x),I.push(xe)):(C.push(null),I.push(null));var Se=this.lineHelpers.calculatePoints({series:r,x:g,y:x,realIndex:h,i:p,j:Ie,prevY:J}),Te=this._createPaths({type:o,series:r,i:p,realIndex:h,j:Ie,x:g,y:x,y2:xe,xArrj:b,yArrj:C,y2Arrj:I,pX:v,pY:k,pathState:Re,segmentStartX:Fe,linePath:Z,areaPath:Q,linePaths:S,areaPaths:M,curve:Ae,isRangeStart:P});M=Te.areaPaths,S=Te.linePaths,v=Te.pX,k=Te.pY,Re=Te.pathState,Fe=Te.segmentStartX,Q=Te.areaPath,Z=Te.linePath,!this.appendPathFrom||Ae==="monotoneCubic"&&o==="rangeArea"||(se+=Y.line(g,this.zeroY),ce+=Y.line(g,this.zeroY)),this.handleNullDataPoints(r,Se,p,Ie,h),this._handleMarkersAndLabels({type:o,pointsPos:Se,i:p,j:Ie,realIndex:h,isRangeStart:P})}return{yArrj:C,xArrj:b,pathFromArea:ce,areaPaths:M,pathFromLine:se,linePaths:S,linePath:Z,areaPath:Q}}},{key:"_handleMarkersAndLabels",value:function(e){var t=e.type,i=e.pointsPos,n=e.isRangeStart,o=e.i,r=e.j,c=e.realIndex,h=this.w,u=new mt(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,r,{realIndex:c,pointsPos:i,zRatio:this.zRatio,elParent:this.elPointsMain});else{h.globals.series[o].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var p=this.markers.plotChartMarkers(i,c,r+1);p!==null&&this.elPointsMain.add(p)}var g=u.drawDataLabel({type:t,isRangeStart:n,pos:i,i:c,j:r+1});g!==null&&this.elDataLabelsWrap.add(g)}},{key:"_createPaths",value:function(e){var t=e.type,i=e.series,n=e.i;e.realIndex;var o,r=e.j,c=e.x,h=e.y,u=e.xArrj,p=e.yArrj,g=e.y2,x=e.y2Arrj,v=e.pX,k=e.pY,A=e.pathState,S=e.segmentStartX,M=e.linePath,L=e.areaPath,d=e.linePaths,b=e.areaPaths,C=e.curve,I=e.isRangeStart,P=new V(this.ctx),_=this.areaBottomY,N=t==="rangeArea",Y=t==="rangeArea"&&I;switch(C){case"monotoneCubic":var G=I?p:x;switch(A){case 0:if(G[r+1]===null)break;A=1;case 1:if(!(N?u.length===i[n].length:r===i[n].length-2))break;case 2:var J=I?u:u.slice().reverse(),Z=I?G:G.slice().reverse(),Q=(o=Z,J.map(function(Ee,Se){return[Ee,o[Se]]}).filter(function(Ee){return Ee[1]!==null})),se=Q.length>1?Pe(Q):Q,ce=[];N&&(Y?b=Q:ce=b.reverse());var ue=0,ge=0;if(function(Ee,Se){for(var Te=function(Fi){var Ke=[],Tt=0;return Fi.forEach(function(bl){bl!==null?Tt++:Tt>0&&(Ke.push(Tt),Tt=0)}),Tt>0&&Ke.push(Tt),Ke}(Ee),je=[],Ue=0,Ct=0;Ue<Te.length;Ct+=Te[Ue++])je[Ue]=ut(Se,Ct,Ct+Te[Ue]);return je}(Z,se).forEach(function(Ee){ue++;var Se=function(Ue){for(var Ct="",Fi=0;Fi<Ue.length;Fi++){var Ke=Ue[Fi],Tt=Ke.length;Tt>4?(Ct+="C".concat(Ke[0],", ").concat(Ke[1]),Ct+=", ".concat(Ke[2],", ").concat(Ke[3]),Ct+=", ".concat(Ke[4],", ").concat(Ke[5])):Tt>2&&(Ct+="S".concat(Ke[0],", ").concat(Ke[1]),Ct+=", ".concat(Ke[2],", ").concat(Ke[3]))}return Ct}(Ee),Te=ge,je=(ge+=Ee.length)-1;Y?M=P.move(Q[Te][0],Q[Te][1])+Se:N?M=P.move(ce[Te][0],ce[Te][1])+P.line(Q[Te][0],Q[Te][1])+Se+P.line(ce[je][0],ce[je][1]):(M=P.move(Q[Te][0],Q[Te][1])+Se,L=M+P.line(Q[je][0],_)+P.line(Q[Te][0],_)+"z",b.push(L)),d.push(M)}),N&&ue>1&&!Y){var xe=d.slice(ue).reverse();d.splice(ue),xe.forEach(function(Ee){return d.push(Ee)})}A=0}break;case"smooth":var pe=.35*(c-v);if(i[n][r]===null)A=0;else switch(A){case 0:if(S=v,M=Y?P.move(v,x[r])+P.line(v,k):P.move(v,k),L=P.move(v,k),i[n][r+1]===null){d.push(M),b.push(L);break}if(A=1,r<i[n].length-2){var Ae=P.curve(v+pe,k,c-pe,h,c,h);M+=Ae,L+=Ae;break}case 1:if(i[n][r+1]===null)M+=Y?P.line(v,g):P.move(v,k),L+=P.line(v,_)+P.line(S,_)+"z",d.push(M),b.push(L),A=-1;else{var Fe=P.curve(v+pe,k,c-pe,h,c,h);M+=Fe,L+=Fe,r>=i[n].length-2&&(Y&&(M+=P.curve(c,h,c,h,c,g)+P.move(c,g)),L+=P.curve(c,h,c,h,c,_)+P.line(S,_)+"z",d.push(M),b.push(L),A=-1)}}v=c,k=h;break;default:var Re=function(Ee,Se,Te){var je=[];switch(Ee){case"stepline":je=P.line(Se,null,"H")+P.line(null,Te,"V");break;case"linestep":je=P.line(null,Te,"V")+P.line(Se,null,"H");break;case"straight":je=P.line(Se,Te)}return je};if(i[n][r]===null)A=0;else switch(A){case 0:if(S=v,M=Y?P.move(v,x[r])+P.line(v,k):P.move(v,k),L=P.move(v,k),i[n][r+1]===null){d.push(M),b.push(L);break}if(A=1,r<i[n].length-2){var Ie=Re(C,c,h);M+=Ie,L+=Ie;break}case 1:if(i[n][r+1]===null)M+=Y?P.line(v,g):P.move(v,k),L+=P.line(v,_)+P.line(S,_)+"z",d.push(M),b.push(L),A=-1;else{var ot=Re(C,c,h);M+=ot,L+=ot,r>=i[n].length-2&&(Y&&(M+=P.line(c,g)),L+=P.line(c,_)+P.line(S,_)+"z",d.push(M),b.push(L),A=-1)}}v=c,k=h}return{linePaths:d,areaPaths:b,pX:v,pY:k,pathState:A,segmentStartX:S,linePath:M,areaPath:L}}},{key:"handleNullDataPoints",value:function(e,t,i,n,o){var r=this.w;if(e[i][n]===null&&r.config.markers.showNullDataPoints||e[i].length===1){var c=this.strokeWidth-r.config.markers.strokeWidth/2;c>0||(c=0);var h=this.markers.plotChartMarkers(t,o,n+1,c,!0);h!==null&&this.elPointsMain.add(h)}}}]),E}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function E(c,h,u,p){this.xoffset=c,this.yoffset=h,this.height=p,this.width=u,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(g){var x,v=[],k=this.xoffset,A=this.yoffset,S=o(g)/this.height,M=o(g)/this.width;if(this.width>=this.height)for(x=0;x<g.length;x++)v.push([k,A,k+S,A+g[x]/S]),A+=g[x]/S;else for(x=0;x<g.length;x++)v.push([k,A,k+g[x]/M,A+M]),k+=g[x]/M;return v},this.cutArea=function(g){var x;if(this.width>=this.height){var v=g/this.height,k=this.width-v;x=new E(this.xoffset+v,this.yoffset,k,this.height)}else{var A=g/this.width,S=this.height-A;x=new E(this.xoffset,this.yoffset+A,this.width,S)}return x}}function e(c,h,u,p,g){p=p===void 0?0:p,g=g===void 0?0:g;var x=t(function(v,k){var A,S=[],M=k/o(v);for(A=0;A<v.length;A++)S[A]=v[A]*M;return S}(c,h*u),[],new E(p,g,h,u),[]);return function(v){var k,A,S=[];for(k=0;k<v.length;k++)for(A=0;A<v[k].length;A++)S.push(v[k][A]);return S}(x)}function t(c,h,u,p){var g,x,v;if(c.length!==0)return g=u.shortestEdge(),function(k,A,S){var M;if(k.length===0)return!0;(M=k.slice()).push(A);var L=i(k,S),d=i(M,S);return L>=d}(h,x=c[0],g)?(h.push(x),t(c.slice(1),h,u,p)):(v=u.cutArea(o(h),p),p.push(u.getCoordinates(h)),t(c,[],v,p)),p;p.push(u.getCoordinates(h))}function i(c,h){var u=Math.min.apply(Math,c),p=Math.max.apply(Math,c),g=o(c);return Math.max(Math.pow(h,2)*p/Math.pow(g,2),Math.pow(g,2)/(Math.pow(h,2)*u))}function n(c){return c&&c.constructor===Array}function o(c){var h,u=0;for(h=0;h<c.length;h++)u+=c[h];return u}function r(c){var h,u=0;if(n(c[0]))for(h=0;h<c.length;h++)u+=r(c[h]);else u=o(c);return u}return function c(h,u,p,g,x){g=g===void 0?0:g,x=x===void 0?0:x;var v,k,A=[],S=[];if(n(h[0])){for(k=0;k<h.length;k++)A[k]=r(h[k]);for(v=e(A,u,p,g,x),k=0;k<h.length;k++)S.push(c(h[k],v[k][2]-v[k][0],v[k][3]-v[k][1],v[k][0],v[k][1]))}else S=e(h,u,p,g,x);return S}}();var at,fi,Oi=function(){function E(e,t){m(this,E),this.ctx=e,this.w=e.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new W(e),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return y(E,[{key:"draw",value:function(e){var t=this,i=this.w,n=new V(this.ctx),o=new Ze(this.ctx),r=n.group({class:"apexcharts-treemap"});if(i.globals.noData)return r;var c=[];return e.forEach(function(h){var u=h.map(function(p){return Math.abs(p)});c.push(u)}),this.negRange=this.helpers.checkColorRange(),i.config.series.forEach(function(h,u){h.data.forEach(function(p){Array.isArray(t.labels[u])||(t.labels[u]=[]),t.labels[u].push(p.x)})}),window.TreemapSquared.generate(c,i.globals.gridWidth,i.globals.gridHeight).forEach(function(h,u){var p=n.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:H.escapeString(i.globals.seriesNames[u]),rel:u+1,"data:realIndex":u});if(i.config.chart.dropShadow.enabled){var g=i.config.chart.dropShadow;new le(t.ctx).dropShadow(r,g,u)}var x=n.group({class:"apexcharts-data-labels"});h.forEach(function(v,k){var A=v[0],S=v[1],M=v[2],L=v[3],d=n.drawRect(A,S,M-A,L-S,i.config.plotOptions.treemap.borderRadius,"#fff",1,t.strokeWidth,i.config.plotOptions.treemap.useFillColorAsStroke?C:i.globals.stroke.colors[u]);d.attr({cx:A,cy:S,index:u,i:u,j:k,width:M-A,height:L-S});var b=t.helpers.getShadeColor(i.config.chart.type,u,k,t.negRange),C=b.color;i.config.series[u].data[k]!==void 0&&i.config.series[u].data[k].fillColor&&(C=i.config.series[u].data[k].fillColor);var I=o.fillPath({color:C,seriesNumber:u,dataPointIndex:k});d.node.classList.add("apexcharts-treemap-rect"),d.attr({fill:I}),t.helpers.addListeners(d);var P={x:A+(M-A)/2,y:S+(L-S)/2,width:0,height:0},_={x:A,y:S,width:M-A,height:L-S};if(i.config.chart.animations.enabled&&!i.globals.dataChanged){var N=1;i.globals.resized||(N=i.config.chart.animations.speed),t.animateTreemap(d,P,_,N)}if(i.globals.dataChanged){var Y=1;t.dynamicAnim.enabled&&i.globals.shouldAnimate&&(Y=t.dynamicAnim.speed,i.globals.previousPaths[u]&&i.globals.previousPaths[u][k]&&i.globals.previousPaths[u][k].rect&&(P=i.globals.previousPaths[u][k].rect),t.animateTreemap(d,P,_,Y))}var G=t.getFontSize(v),J=i.config.dataLabels.formatter(t.labels[u][k],{value:i.globals.series[u][k],seriesIndex:u,dataPointIndex:k,w:i});i.config.plotOptions.treemap.dataLabels.format==="truncate"&&(G=parseInt(i.config.dataLabels.style.fontSize,10),J=t.truncateLabels(J,G,A,S,M,L));var Z=null;i.globals.series[u][k]&&(Z=t.helpers.calculateDataLabels({text:J,x:(A+M)/2,y:(S+L)/2+t.strokeWidth/2+G/3,i:u,j:k,colorProps:b,fontSize:G,series:e})),i.config.dataLabels.enabled&&Z&&t.rotateToFitLabel(Z,G,J,A,S,M,L),p.add(d),Z!==null&&p.add(Z)}),p.add(x),r.add(p)}),r}},{key:"getFontSize",value:function(e){var t=this.w,i,n,o,r,c=function h(u){var p,g=0;if(Array.isArray(u[0]))for(p=0;p<u.length;p++)g+=h(u[p]);else for(p=0;p<u.length;p++)g+=u[p].length;return g}(this.labels)/function h(u){var p,g=0;if(Array.isArray(u[0]))for(p=0;p<u.length;p++)g+=h(u[p]);else for(p=0;p<u.length;p++)g+=1;return g}(this.labels);return i=e[2]-e[0],n=e[3]-e[1],o=i*n,r=Math.pow(o,.5),Math.min(r/c,parseInt(t.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(e,t,i,n,o,r,c){var h=new V(this.ctx),u=h.getTextRects(i,t);if(u.width+this.w.config.stroke.width+5>r-n&&u.width<=c-o){var p=h.rotateAroundCenter(e.node);e.node.setAttribute("transform","rotate(-90 ".concat(p.x," ").concat(p.y,") translate(").concat(u.height/3,")"))}}},{key:"truncateLabels",value:function(e,t,i,n,o,r){var c=new V(this.ctx),h=c.getTextRects(e,t).width+this.w.config.stroke.width+5>o-i&&r-n>o-i?r-n:o-i,u=c.getTextBasedOnMaxWidth({text:e,maxWidth:h,fontSize:t});return e.length!==u.length&&h/t<5?"":u}},{key:"animateTreemap",value:function(e,t,i,n){var o=new ke(this.ctx);o.animateRect(e,{x:t.x,y:t.y,width:t.width,height:t.height},{x:i.x,y:i.y,width:i.width,height:i.height},n,function(){o.animationCompleted(e)})}}]),E}(),da=86400,hn=10/da,dn=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return y(E,[{key:"calculateTimeScaleTicks",value:function(e,t){var i=this,n=this.w;if(n.globals.allSeriesCollapsed)return n.globals.labels=[],n.globals.timescaleLabels=[],[];var o=new _e(this.ctx),r=(t-e)/864e5;this.determineInterval(r),n.globals.disableZoomIn=!1,n.globals.disableZoomOut=!1,r<hn?n.globals.disableZoomIn=!0:r>5e4&&(n.globals.disableZoomOut=!0);var c=o.getTimeUnitsfromTimestamp(e,t,this.utc),h=n.globals.gridWidth/r,u=h/24,p=u/60,g=p/60,x=Math.floor(24*r),v=Math.floor(1440*r),k=Math.floor(r*da),A=Math.floor(r),S=Math.floor(r/30),M=Math.floor(r/365),L={minMillisecond:c.minMillisecond,minSecond:c.minSecond,minMinute:c.minMinute,minHour:c.minHour,minDate:c.minDate,minMonth:c.minMonth,minYear:c.minYear},d={firstVal:L,currentMillisecond:L.minMillisecond,currentSecond:L.minSecond,currentMinute:L.minMinute,currentHour:L.minHour,currentMonthDate:L.minDate,currentDate:L.minDate,currentMonth:L.minMonth,currentYear:L.minYear,daysWidthOnXAxis:h,hoursWidthOnXAxis:u,minutesWidthOnXAxis:p,secondsWidthOnXAxis:g,numberOfSeconds:k,numberOfMinutes:v,numberOfHours:x,numberOfDays:A,numberOfMonths:S,numberOfYears:M};switch(this.tickInterval){case"years":this.generateYearScale(d);break;case"months":case"half_year":this.generateMonthScale(d);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(d);break;case"hours":this.generateHourScale(d);break;case"minutes_fives":case"minutes":this.generateMinuteScale(d);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(d)}var b=this.timeScaleArray.map(function(C){var I={position:C.position,unit:C.unit,year:C.year,day:C.day?C.day:1,hour:C.hour?C.hour:0,month:C.month+1};return C.unit==="month"?X(X({},I),{},{day:1,value:C.value+1}):C.unit==="day"||C.unit==="hour"?X(X({},I),{},{value:C.value}):C.unit==="minute"?X(X({},I),{},{value:C.value,minute:C.value}):C.unit==="second"?X(X({},I),{},{value:C.value,minute:C.minute,second:C.second}):C});return b.filter(function(C){var I=1,P=Math.ceil(n.globals.gridWidth/120),_=C.value;n.config.xaxis.tickAmount!==void 0&&(P=n.config.xaxis.tickAmount),b.length>P&&(I=Math.floor(b.length/P));var N=!1,Y=!1;switch(i.tickInterval){case"years":C.unit==="year"&&(N=!0);break;case"half_year":I=7,C.unit==="year"&&(N=!0);break;case"months":I=1,C.unit==="year"&&(N=!0);break;case"months_fortnight":I=15,C.unit!=="year"&&C.unit!=="month"||(N=!0),_===30&&(Y=!0);break;case"months_days":I=10,C.unit==="month"&&(N=!0),_===30&&(Y=!0);break;case"week_days":I=8,C.unit==="month"&&(N=!0);break;case"days":I=1,C.unit==="month"&&(N=!0);break;case"hours":C.unit==="day"&&(N=!0);break;case"minutes_fives":case"seconds_fives":_%5!=0&&(Y=!0);break;case"seconds_tens":_%10!=0&&(Y=!0)}if(i.tickInterval==="hours"||i.tickInterval==="minutes_fives"||i.tickInterval==="seconds_tens"||i.tickInterval==="seconds_fives"){if(!Y)return!0}else if((_%I==0||N)&&!Y)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(e,t){var i=this.w,n=this.formatDates(e),o=this.removeOverlappingTS(n);i.globals.timescaleLabels=o.slice(),new Wt(this.ctx).plotCoords()}},{key:"determineInterval",value:function(e){var t=24*e,i=60*t;switch(!0){case e/365>5:this.tickInterval="years";break;case e>800:this.tickInterval="half_year";break;case e>180:this.tickInterval="months";break;case e>90:this.tickInterval="months_fortnight";break;case e>60:this.tickInterval="months_days";break;case e>30:this.tickInterval="week_days";break;case e>2:this.tickInterval="days";break;case t>2.4:this.tickInterval="hours";break;case i>15:this.tickInterval="minutes_fives";break;case i>5:this.tickInterval="minutes";break;case i>1:this.tickInterval="seconds_tens";break;case 60*i>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(e){var t=e.firstVal,i=e.currentMonth,n=e.currentYear,o=e.daysWidthOnXAxis,r=e.numberOfYears,c=t.minYear,h=0,u=new _e(this.ctx),p="year";if(t.minDate>1||t.minMonth>0){var g=u.determineRemainingDaysOfYear(t.minYear,t.minMonth,t.minDate);h=(u.determineDaysOfYear(t.minYear)-g+1)*o,c=t.minYear+1,this.timeScaleArray.push({position:h,value:c,unit:p,year:c,month:H.monthMod(i+1)})}else t.minDate===1&&t.minMonth===0&&this.timeScaleArray.push({position:h,value:c,unit:p,year:n,month:H.monthMod(i+1)});for(var x=c,v=h,k=0;k<r;k++)x++,v=u.determineDaysOfYear(x-1)*o+v,this.timeScaleArray.push({position:v,value:x,unit:p,year:x,month:1})}},{key:"generateMonthScale",value:function(e){var t=e.firstVal,i=e.currentMonthDate,n=e.currentMonth,o=e.currentYear,r=e.daysWidthOnXAxis,c=e.numberOfMonths,h=n,u=0,p=new _e(this.ctx),g="month",x=0;if(t.minDate>1){u=(p.determineDaysOfMonths(n+1,t.minYear)-i+1)*r,h=H.monthMod(n+1);var v=o+x,k=H.monthMod(h),A=h;h===0&&(g="year",A=v,k=1,v+=x+=1),this.timeScaleArray.push({position:u,value:A,unit:g,year:v,month:k})}else this.timeScaleArray.push({position:u,value:h,unit:g,year:o,month:H.monthMod(n)});for(var S=h+1,M=u,L=0,d=1;L<c;L++,d++){(S=H.monthMod(S))===0?(g="year",x+=1):g="month";var b=this._getYear(o,S,x);M=p.determineDaysOfMonths(S,b)*r+M;var C=S===0?b:S;this.timeScaleArray.push({position:M,value:C,unit:g,year:b,month:S===0?1:S}),S++}}},{key:"generateDayScale",value:function(e){var t=e.firstVal,i=e.currentMonth,n=e.currentYear,o=e.hoursWidthOnXAxis,r=e.numberOfDays,c=new _e(this.ctx),h="day",u=t.minDate+1,p=u,g=function(d,b,C){return d>c.determineDaysOfMonths(b+1,C)&&(p=1,h="month",v=b+=1),b},x=(24-t.minHour)*o,v=u,k=g(p,i,n);t.minHour===0&&t.minDate===1?(x=0,v=H.monthMod(t.minMonth),h="month",p=t.minDate):t.minDate!==1&&t.minHour===0&&t.minMinute===0&&(x=0,u=t.minDate,v=u,k=g(p=u,i,n)),this.timeScaleArray.push({position:x,value:v,unit:h,year:this._getYear(n,k,0),month:H.monthMod(k),day:p});for(var A=x,S=0;S<r;S++){h="day",k=g(p+=1,k,this._getYear(n,k,0));var M=this._getYear(n,k,0);A=24*o+A;var L=p===1?H.monthMod(k):p;this.timeScaleArray.push({position:A,value:L,unit:h,year:M,month:H.monthMod(k),day:L})}}},{key:"generateHourScale",value:function(e){var t=e.firstVal,i=e.currentDate,n=e.currentMonth,o=e.currentYear,r=e.minutesWidthOnXAxis,c=e.numberOfHours,h=new _e(this.ctx),u="hour",p=function(I,P){return I>h.determineDaysOfMonths(P+1,o)&&(S=1,P+=1),{month:P,date:S}},g=function(I,P){return I>h.determineDaysOfMonths(P+1,o)?P+=1:P},x=60-(t.minMinute+t.minSecond/60),v=x*r,k=t.minHour+1,A=k;x===60&&(v=0,A=k=t.minHour);var S=i;A>=24&&(A=0,S+=1,u="day");var M=p(S,n).month;M=g(S,M),this.timeScaleArray.push({position:v,value:k,unit:u,day:S,hour:A,year:o,month:H.monthMod(M)}),A++;for(var L=v,d=0;d<c;d++){u="hour",A>=24&&(A=0,u="day",M=p(S+=1,M).month,M=g(S,M));var b=this._getYear(o,M,0);L=60*r+L;var C=A===0?S:A;this.timeScaleArray.push({position:L,value:C,unit:u,hour:A,day:S,year:b,month:H.monthMod(M)}),A++}}},{key:"generateMinuteScale",value:function(e){for(var t=e.currentMillisecond,i=e.currentSecond,n=e.currentMinute,o=e.currentHour,r=e.currentDate,c=e.currentMonth,h=e.currentYear,u=e.minutesWidthOnXAxis,p=e.secondsWidthOnXAxis,g=e.numberOfMinutes,x=n+1,v=r,k=c,A=h,S=o,M=(60-i-t/1e3)*p,L=0;L<g;L++)x>=60&&(x=0,(S+=1)===24&&(S=0)),this.timeScaleArray.push({position:M,value:x,unit:"minute",hour:S,minute:x,day:v,year:this._getYear(A,k,0),month:H.monthMod(k)}),M+=u,x++}},{key:"generateSecondScale",value:function(e){for(var t=e.currentMillisecond,i=e.currentSecond,n=e.currentMinute,o=e.currentHour,r=e.currentDate,c=e.currentMonth,h=e.currentYear,u=e.secondsWidthOnXAxis,p=e.numberOfSeconds,g=i+1,x=n,v=r,k=c,A=h,S=o,M=(1e3-t)/1e3*u,L=0;L<p;L++)g>=60&&(g=0,++x>=60&&(x=0,++S===24&&(S=0))),this.timeScaleArray.push({position:M,value:g,unit:"second",hour:S,minute:x,second:g,day:v,year:this._getYear(A,k,0),month:H.monthMod(k)}),M+=u,g++}},{key:"createRawDateString",value:function(e,t){var i=e.year;return e.month===0&&(e.month=1),i+="-"+("0"+e.month.toString()).slice(-2),e.unit==="day"?i+=e.unit==="day"?"-"+("0"+t).slice(-2):"-01":i+="-"+("0"+(e.day?e.day:"1")).slice(-2),e.unit==="hour"?i+=e.unit==="hour"?"T"+("0"+t).slice(-2):"T00":i+="T"+("0"+(e.hour?e.hour:"0")).slice(-2),e.unit==="minute"?i+=":"+("0"+t).slice(-2):i+=":"+(e.minute?("0"+e.minute).slice(-2):"00"),e.unit==="second"?i+=":"+("0"+t).slice(-2):i+=":00",this.utc&&(i+=".000Z"),i}},{key:"formatDates",value:function(e){var t=this,i=this.w;return e.map(function(n){var o=n.value.toString(),r=new _e(t.ctx),c=t.createRawDateString(n,o),h=r.getDate(r.parseDate(c));if(t.utc||(h=r.getDate(r.parseDateWithTimezone(c))),i.config.xaxis.labels.format===void 0){var u="dd MMM",p=i.config.xaxis.labels.datetimeFormatter;n.unit==="year"&&(u=p.year),n.unit==="month"&&(u=p.month),n.unit==="day"&&(u=p.day),n.unit==="hour"&&(u=p.hour),n.unit==="minute"&&(u=p.minute),n.unit==="second"&&(u=p.second),o=r.formatDate(h,u)}else o=r.formatDate(h,i.config.xaxis.labels.format);return{dateString:c,position:n.position,value:o,unit:n.unit,year:n.year,month:n.month}})}},{key:"removeOverlappingTS",value:function(e){var t,i=this,n=new V(this.ctx),o=!1;e.length>0&&e[0].value&&e.every(function(h){return h.value.length===e[0].value.length})&&(o=!0,t=n.getTextRects(e[0].value).width);var r=0,c=e.map(function(h,u){if(u>0&&i.w.config.xaxis.labels.hideOverlappingLabels){var p=o?t:n.getTextRects(e[r].value).width,g=e[r].position;return h.position>g+p+10?(r=u,h):null}return h});return c=c.filter(function(h){return h!==null})}},{key:"_getYear",value:function(e,t,i){return e+Math.floor(t/12)+i}}]),E}(),un=function(){function E(e,t){m(this,E),this.ctx=t,this.w=t.w,this.el=e}return y(E,[{key:"setupElements",value:function(){var e=this.w,t=e.globals,i=e.config,n=i.chart.type;t.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].includes(n),t.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].includes(n),t.isBarHorizontal=["bar","rangeBar","boxPlot"].includes(n)&&i.plotOptions.bar.horizontal,t.chartClass=".apexcharts".concat(t.chartID),t.dom.baseEl=this.el,t.dom.elWrap=document.createElement("div"),V.setAttrs(t.dom.elWrap,{id:t.chartClass.substring(1),class:"apexcharts-canvas ".concat(t.chartClass.substring(1))}),this.el.appendChild(t.dom.elWrap),t.dom.Paper=new window.SVG.Doc(t.dom.elWrap),t.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(i.chart.offsetX,", ").concat(i.chart.offsetY,")")}),t.dom.Paper.node.style.background=i.theme.mode!=="dark"||i.chart.background?i.theme.mode!=="light"||i.chart.background?i.chart.background:"#fff":"#424242",this.setSVGDimensions(),t.dom.elLegendForeign=document.createElementNS(t.SVGNS,"foreignObject"),V.setAttrs(t.dom.elLegendForeign,{x:0,y:0,width:t.svgWidth,height:t.svgHeight}),t.dom.elLegendWrap=document.createElement("div"),t.dom.elLegendWrap.classList.add("apexcharts-legend"),t.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),t.dom.elLegendForeign.appendChild(t.dom.elLegendWrap),t.dom.Paper.node.appendChild(t.dom.elLegendForeign),t.dom.elGraphical=t.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),t.dom.elDefs=t.dom.Paper.defs(),t.dom.Paper.add(t.dom.elGraphical),t.dom.elGraphical.add(t.dom.elDefs)}},{key:"plotChartType",value:function(e,t){var i=this.w,n=this.ctx,o=i.config,r=i.globals,c={line:{series:[],i:[]},area:{series:[],i:[]},scatter:{series:[],i:[]},bubble:{series:[],i:[]},column:{series:[],i:[]},candlestick:{series:[],i:[]},boxPlot:{series:[],i:[]},rangeBar:{series:[],i:[]},rangeArea:{series:[],seriesRangeEnd:[],i:[]}},h=o.chart.type||"line",u=null,p=0;r.series.forEach(function(I,P){var _=e[P].type||h;c[_]?(_==="rangeArea"?(c[_].series.push(r.seriesRangeStart[P]),c[_].seriesRangeEnd.push(r.seriesRangeEnd[P])):c[_].series.push(I),c[_].i.push(P),_!=="column"&&_!=="bar"||(i.globals.columnSeries=c.column)):["heatmap","treemap","pie","donut","polarArea","radialBar","radar"].includes(_)?u=_:_==="bar"?(c.column.series.push(I),c.column.i.push(P)):console.warn("You have specified an unrecognized series type (".concat(_,").")),h!==_&&_!=="scatter"&&p++}),p>0&&(u&&console.warn("Chart or series type ".concat(u," cannot appear with other chart or series types.")),c.column.series.length>0&&o.plotOptions.bar.horizontal&&(p-=c.column.series.length,c.column={series:[],i:[]},i.globals.columnSeries={series:[],i:[]},console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"))),r.comboCharts||(r.comboCharts=p>0);var g=new Pt(n,t),x=new F(n,t);n.pie=new oe(n);var v=new fe(n);n.rangeBar=new we(n,t);var k=new ve(n),A=[];if(r.comboCharts){var S,M,L=new he(n);if(c.area.series.length>0&&(S=A).push.apply(S,ie(L.drawSeriesByGroup(c.area,r.areaGroups,"area",g))),c.column.series.length>0)if(o.chart.stacked){var d=new D(n,t);A.push(d.draw(c.column.series,c.column.i))}else n.bar=new _t(n,t),A.push(n.bar.draw(c.column.series,c.column.i));if(c.rangeArea.series.length>0&&A.push(g.draw(c.rangeArea.series,"rangeArea",c.rangeArea.i,c.rangeArea.seriesRangeEnd)),c.line.series.length>0&&(M=A).push.apply(M,ie(L.drawSeriesByGroup(c.line,r.lineGroups,"line",g))),c.candlestick.series.length>0&&A.push(x.draw(c.candlestick.series,"candlestick",c.candlestick.i)),c.boxPlot.series.length>0&&A.push(x.draw(c.boxPlot.series,"boxPlot",c.boxPlot.i)),c.rangeBar.series.length>0&&A.push(n.rangeBar.draw(c.rangeBar.series,c.rangeBar.i)),c.scatter.series.length>0){var b=new Pt(n,t,!0);A.push(b.draw(c.scatter.series,"scatter",c.scatter.i))}if(c.bubble.series.length>0){var C=new Pt(n,t,!0);A.push(C.draw(c.bubble.series,"bubble",c.bubble.i))}}else switch(o.chart.type){case"line":A=g.draw(r.series,"line");break;case"area":A=g.draw(r.series,"area");break;case"bar":o.chart.stacked?A=new D(n,t).draw(r.series):(n.bar=new _t(n,t),A=n.bar.draw(r.series));break;case"candlestick":A=new F(n,t).draw(r.series,"candlestick");break;case"boxPlot":A=new F(n,t).draw(r.series,o.chart.type);break;case"rangeBar":A=n.rangeBar.draw(r.series);break;case"rangeArea":A=g.draw(r.seriesRangeStart,"rangeArea",void 0,r.seriesRangeEnd);break;case"heatmap":A=new K(n,t).draw(r.series);break;case"treemap":A=new Oi(n,t).draw(r.series);break;case"pie":case"donut":case"polarArea":A=n.pie.draw(r.series);break;case"radialBar":A=v.draw(r.series);break;case"radar":A=k.draw(r.series);break;default:A=g.draw(r.series)}return A}},{key:"setSVGDimensions",value:function(){var e=this.w,t=e.globals,i=e.config;i.chart.width=i.chart.width||"100%",i.chart.height=i.chart.height||"auto",t.svgWidth=i.chart.width,t.svgHeight=i.chart.height;var n=H.getDimensions(this.el),o=i.chart.width.toString().split(/[0-9]+/g).pop();o==="%"?H.isNumber(n[0])&&(n[0].width===0&&(n=H.getDimensions(this.el.parentNode)),t.svgWidth=n[0]*parseInt(i.chart.width,10)/100):o!=="px"&&o!==""||(t.svgWidth=parseInt(i.chart.width,10));var r=String(i.chart.height).toString().split(/[0-9]+/g).pop();if(t.svgHeight!=="auto"&&t.svgHeight!=="")if(r==="%"){var c=H.getDimensions(this.el.parentNode);t.svgHeight=c[1]*parseInt(i.chart.height,10)/100}else t.svgHeight=parseInt(i.chart.height,10);else t.svgHeight=t.axisCharts?t.svgWidth/1.61:t.svgWidth/1.2;if(t.svgWidth=Math.max(t.svgWidth,0),t.svgHeight=Math.max(t.svgHeight,0),V.setAttrs(t.dom.Paper.node,{width:t.svgWidth,height:t.svgHeight}),r!=="%"){var h=i.chart.sparkline.enabled?0:t.axisCharts?i.chart.parentHeightOffset:0;t.dom.Paper.node.parentNode.parentNode.style.minHeight="".concat(t.svgHeight+h,"px")}t.dom.elWrap.style.width="".concat(t.svgWidth,"px"),t.dom.elWrap.style.height="".concat(t.svgHeight,"px")}},{key:"shiftGraphPosition",value:function(){var e=this.w.globals,t=e.translateY,i=e.translateX;V.setAttrs(e.dom.elGraphical.node,{transform:"translate(".concat(i,", ").concat(t,")")})}},{key:"resizeNonAxisCharts",value:function(){var e=this.w,t=e.globals,i=0,n=e.config.chart.sparkline.enabled?1:15;n+=e.config.grid.padding.bottom,["top","bottom"].includes(e.config.legend.position)&&e.config.legend.show&&!e.config.legend.floating&&(i=new ca(this.ctx).legendHelpers.getLegendDimensions().clwh+7);var o=e.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),r=2.05*e.globals.radialSize;if(o&&!e.config.chart.sparkline.enabled&&e.config.plotOptions.radialBar.startAngle!==0){var c=H.getBoundingClientRect(o);r=c.bottom;var h=c.bottom-c.top;r=Math.max(2.05*e.globals.radialSize,h)}var u=Math.ceil(r+t.translateY+i+n);t.dom.elLegendForeign&&t.dom.elLegendForeign.setAttribute("height",u),e.config.chart.height&&String(e.config.chart.height).includes("%")||(t.dom.elWrap.style.height="".concat(u,"px"),V.setAttrs(t.dom.Paper.node,{height:u}),t.dom.Paper.node.parentNode.parentNode.style.minHeight="".concat(u,"px"))}},{key:"coreCalculations",value:function(){new Li(this.ctx).init()}},{key:"resetGlobals",value:function(){var e=this,t=function(){return e.w.config.series.map(function(){return[]})},i=new aa,n=this.w.globals;i.initGlobalVars(n),n.seriesXvalues=t(),n.seriesYvalues=t()}},{key:"isMultipleY",value:function(){return!!(Array.isArray(this.w.config.yaxis)&&this.w.config.yaxis.length>1)&&(this.w.globals.isMultipleYAxis=!0,!0)}},{key:"xySettings",value:function(){var e=this.w,t=null;if(e.globals.axisCharts){if(e.config.xaxis.crosshairs.position==="back"&&new Pi(this.ctx).drawXCrosshairs(),e.config.yaxis[0].crosshairs.position==="back"&&new Pi(this.ctx).drawYCrosshairs(),e.config.xaxis.type==="datetime"&&e.config.xaxis.labels.formatter===void 0){this.ctx.timeScale=new dn(this.ctx);var i=[];isFinite(e.globals.minX)&&isFinite(e.globals.maxX)&&!e.globals.isBarHorizontal?i=this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minX,e.globals.maxX):e.globals.isBarHorizontal&&(i=this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minY,e.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(i)}t=new he(this.ctx).getCalculatedRatios()}return t}},{key:"updateSourceChart",value:function(e){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:e.w.globals.minX,max:e.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var e=this,t=this.w;if(t.config.chart.brush.enabled&&typeof t.config.chart.events.selection!="function"){var i=Array.isArray(t.config.chart.brush.targets)?t.config.chart.brush.targets:[t.config.chart.brush.target];i.forEach(function(n){var o=ApexCharts.getChartByID(n);o.w.globals.brushSource=e.ctx,typeof o.w.config.chart.events.zoomed!="function"&&(o.w.config.chart.events.zoomed=function(){return e.updateSourceChart(o)}),typeof o.w.config.chart.events.scrolled!="function"&&(o.w.config.chart.events.scrolled=function(){return e.updateSourceChart(o)})}),t.config.chart.events.selection=function(n,o){i.forEach(function(r){ApexCharts.getChartByID(r).ctx.updateHelpers._updateOptions({xaxis:{min:o.xaxis.min,max:o.xaxis.max}},!1,!1,!1,!1)})}}}}]),E}(),fn=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w}return y(E,[{key:"_updateOptions",value:function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0&&arguments[1],n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],o=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],r=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return new Promise(function(c){var h=[t.ctx];o&&(h=t.ctx.getSyncedCharts()),t.ctx.w.globals.isExecCalled&&(h=[t.ctx],t.ctx.w.globals.isExecCalled=!1),h.forEach(function(u,p){var g=u.w;if(g.globals.shouldAnimate=n,i||(g.globals.resized=!0,g.globals.dataChanged=!0,n&&u.series.getPreviousPaths()),e&&ae(e)==="object"&&(u.config=new Ht(e),e=he.extendArrayProps(u.config,e,g),u.w.globals.chartID!==t.ctx.w.globals.chartID&&delete e.series,g.config=H.extend(g.config,e),r&&(g.globals.lastXAxis=e.xaxis?H.clone(e.xaxis):[],g.globals.lastYAxis=e.yaxis?H.clone(e.yaxis):[],g.globals.initialConfig=H.extend({},g.config),g.globals.initialSeries=H.clone(g.config.series),e.series))){for(var x=0;x<g.globals.collapsedSeriesIndices.length;x++){var v=g.config.series[g.globals.collapsedSeriesIndices[x]];g.globals.collapsedSeries[x].data=g.globals.axisCharts?v.data.slice():v}for(var k=0;k<g.globals.ancillaryCollapsedSeriesIndices.length;k++){var A=g.config.series[g.globals.ancillaryCollapsedSeriesIndices[k]];g.globals.ancillaryCollapsedSeries[k].data=g.globals.axisCharts?A.data.slice():A}u.series.emptyCollapsedSeries(g.config.series)}return u.update(e).then(function(){p===h.length-1&&c(u)})})})}},{key:"_updateSeries",value:function(e,t){var i=this,n=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return new Promise(function(o){var r,c=i.w;return c.globals.shouldAnimate=t,c.globals.dataChanged=!0,t&&i.ctx.series.getPreviousPaths(),c.globals.axisCharts?((r=e.map(function(h,u){return i._extendSeries(h,u)})).length===0&&(r=[{data:[]}]),c.config.series=r):c.config.series=e.slice(),n&&(c.globals.initialConfig.series=H.clone(c.config.series),c.globals.initialSeries=H.clone(c.config.series)),i.ctx.update().then(function(){o(i.ctx)})})}},{key:"_extendSeries",value:function(e,t){var i=this.w,n=i.config.series[t];return X(X({},i.config.series[t]),{},{name:e.name?e.name:n==null?void 0:n.name,color:e.color?e.color:n==null?void 0:n.color,type:e.type?e.type:n==null?void 0:n.type,group:e.group?e.group:n==null?void 0:n.group,hidden:e.hidden!==void 0?e.hidden:n==null?void 0:n.hidden,data:e.data?e.data:n==null?void 0:n.data,zIndex:e.zIndex!==void 0?e.zIndex:t})}},{key:"toggleDataPointSelection",value:function(e,t){var i=this.w,n=null,o=".apexcharts-series[data\\:realIndex='".concat(e,"']");return i.globals.axisCharts?n=i.globals.dom.Paper.select("".concat(o," path[j='").concat(t,"'], ").concat(o," circle[j='").concat(t,"'], ").concat(o," rect[j='").concat(t,"']")).members[0]:t===void 0&&(n=i.globals.dom.Paper.select("".concat(o," path[j='").concat(e,"']")).members[0],i.config.chart.type!=="pie"&&i.config.chart.type!=="polarArea"&&i.config.chart.type!=="donut"||this.ctx.pie.pieClicked(e)),n?(new V(this.ctx).pathMouseDown(n,null),n.node?n.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(e){var t=this.w;if(["min","max"].forEach(function(n){e.xaxis[n]!==void 0&&(t.config.xaxis[n]=e.xaxis[n],t.globals.lastXAxis[n]=e.xaxis[n])}),e.xaxis.categories&&e.xaxis.categories.length&&(t.config.xaxis.categories=e.xaxis.categories),t.config.xaxis.convertedCatToNumeric){var i=new Yt(e);e=i.convertCatToNumericXaxis(e,this.ctx)}return e}},{key:"forceYAxisUpdate",value:function(e){return e.chart&&e.chart.stacked&&e.chart.stackType==="100%"&&(Array.isArray(e.yaxis)?e.yaxis.forEach(function(t,i){e.yaxis[i].min=0,e.yaxis[i].max=100}):(e.yaxis.min=0,e.yaxis.max=100)),e}},{key:"revertDefaultAxisMinMax",value:function(e){var t=this,i=this.w,n=i.globals.lastXAxis,o=i.globals.lastYAxis;e&&e.xaxis&&(n=e.xaxis),e&&e.yaxis&&(o=e.yaxis),i.config.xaxis.min=n.min,i.config.xaxis.max=n.max;var r=function(c){o[c]!==void 0&&(i.config.yaxis[c].min=o[c].min,i.config.yaxis[c].max=o[c].max)};i.config.yaxis.map(function(c,h){i.globals.zoomed||o[h]!==void 0?r(h):t.ctx.opts.yaxis[h]!==void 0&&(c.min=t.ctx.opts.yaxis[h].min,c.max=t.ctx.opts.yaxis[h].max)})}}]),E}();at=typeof window<"u"?window:void 0,fi=function(E,e){var t=(this!==void 0?this:E).SVG=function(d){if(t.supported)return d=new t.Doc(d),t.parser.draw||t.prepare(),d};if(t.ns="http://www.w3.org/2000/svg",t.xmlns="http://www.w3.org/2000/xmlns/",t.xlink="http://www.w3.org/1999/xlink",t.svgjs="http://svgjs.dev",t.supported=!0,!t.supported)return!1;t.did=1e3,t.eid=function(d){return"Svgjs"+p(d)+t.did++},t.create=function(d){var b=e.createElementNS(this.ns,d);return b.setAttribute("id",this.eid(d)),b},t.extend=function(){var d,b;b=(d=[].slice.call(arguments)).pop();for(var C=d.length-1;C>=0;C--)if(d[C])for(var I in b)d[C].prototype[I]=b[I];t.Set&&t.Set.inherit&&t.Set.inherit()},t.invent=function(d){var b=typeof d.create=="function"?d.create:function(){this.constructor.call(this,t.create(d.create))};return d.inherit&&(b.prototype=new d.inherit),d.extend&&t.extend(b,d.extend),d.construct&&t.extend(d.parent||t.Container,d.construct),b},t.adopt=function(d){return d?d.instance?d.instance:((b=d.nodeName=="svg"?d.parentNode instanceof E.SVGElement?new t.Nested:new t.Doc:d.nodeName=="linearGradient"?new t.Gradient("linear"):d.nodeName=="radialGradient"?new t.Gradient("radial"):t[p(d.nodeName)]?new t[p(d.nodeName)]:new t.Element(d)).type=d.nodeName,b.node=d,d.instance=b,b instanceof t.Doc&&b.namespace().defs(),b.setData(JSON.parse(d.getAttribute("svgjs:data"))||{}),b):null;var b},t.prepare=function(){var d=e.getElementsByTagName("body")[0],b=(d?new t.Doc(d):t.adopt(e.documentElement).nested()).size(2,0);t.parser={body:d||e.documentElement,draw:b.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:b.polyline().node,path:b.path().node,native:t.create("svg")}},t.parser={native:t.create("svg")},e.addEventListener("DOMContentLoaded",function(){t.parser.draw||t.prepare()},!1),t.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},t.utils={map:function(d,b){for(var C=d.length,I=[],P=0;P<C;P++)I.push(b(d[P]));return I},filter:function(d,b){for(var C=d.length,I=[],P=0;P<C;P++)b(d[P])&&I.push(d[P]);return I},filterSVGElements:function(d){return this.filter(d,function(b){return b instanceof E.SVGElement})}},t.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},t.Color=function(d){var b,C;this.r=0,this.g=0,this.b=0,d&&(typeof d=="string"?t.regex.isRgb.test(d)?(b=t.regex.rgb.exec(d.replace(t.regex.whitespace,"")),this.r=parseInt(b[1]),this.g=parseInt(b[2]),this.b=parseInt(b[3])):t.regex.isHex.test(d)&&(b=t.regex.hex.exec((C=d).length==4?["#",C.substring(1,2),C.substring(1,2),C.substring(2,3),C.substring(2,3),C.substring(3,4),C.substring(3,4)].join(""):C),this.r=parseInt(b[1],16),this.g=parseInt(b[2],16),this.b=parseInt(b[3],16)):ae(d)==="object"&&(this.r=d.r,this.g=d.g,this.b=d.b))},t.extend(t.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+g(this.r)+g(this.g)+g(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(d){return this.destination=new t.Color(d),this},at:function(d){return this.destination?(d=d<0?0:d>1?1:d,new t.Color({r:~~(this.r+(this.destination.r-this.r)*d),g:~~(this.g+(this.destination.g-this.g)*d),b:~~(this.b+(this.destination.b-this.b)*d)})):this}}),t.Color.test=function(d){return d+="",t.regex.isHex.test(d)||t.regex.isRgb.test(d)},t.Color.isRgb=function(d){return d&&typeof d.r=="number"&&typeof d.g=="number"&&typeof d.b=="number"},t.Color.isColor=function(d){return t.Color.isRgb(d)||t.Color.test(d)},t.Array=function(d,b){(d=(d||[]).valueOf()).length==0&&b&&(d=b.valueOf()),this.value=this.parse(d)},t.extend(t.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(d){return d=d.valueOf(),Array.isArray(d)?d:this.split(d)}}),t.PointArray=function(d,b){t.Array.call(this,d,b||[[0,0]])},t.PointArray.prototype=new t.Array,t.PointArray.prototype.constructor=t.PointArray;for(var i={M:function(d,b,C){return b.x=C.x=d[0],b.y=C.y=d[1],["M",b.x,b.y]},L:function(d,b){return b.x=d[0],b.y=d[1],["L",d[0],d[1]]},H:function(d,b){return b.x=d[0],["H",d[0]]},V:function(d,b){return b.y=d[0],["V",d[0]]},C:function(d,b){return b.x=d[4],b.y=d[5],["C",d[0],d[1],d[2],d[3],d[4],d[5]]},Q:function(d,b){return b.x=d[2],b.y=d[3],["Q",d[0],d[1],d[2],d[3]]},S:function(d,b){return b.x=d[2],b.y=d[3],["S",d[0],d[1],d[2],d[3]]},Z:function(d,b,C){return b.x=C.x,b.y=C.y,["Z"]}},n="mlhvqtcsaz".split(""),o=0,r=n.length;o<r;++o)i[n[o]]=function(d){return function(b,C,I){if(d=="H")b[0]=b[0]+C.x;else if(d=="V")b[0]=b[0]+C.y;else if(d=="A")b[5]=b[5]+C.x,b[6]=b[6]+C.y;else for(var P=0,_=b.length;P<_;++P)b[P]=b[P]+(P%2?C.y:C.x);if(i&&typeof i[d]=="function")return i[d](b,C,I)}}(n[o].toUpperCase());t.PathArray=function(d,b){t.Array.call(this,d,b||[["M",0,0]])},t.PathArray.prototype=new t.Array,t.PathArray.prototype.constructor=t.PathArray,t.extend(t.PathArray,{toString:function(){return function(d){for(var b=0,C=d.length,I="";b<C;b++)I+=d[b][0],d[b][1]!=null&&(I+=d[b][1],d[b][2]!=null&&(I+=" ",I+=d[b][2],d[b][3]!=null&&(I+=" ",I+=d[b][3],I+=" ",I+=d[b][4],d[b][5]!=null&&(I+=" ",I+=d[b][5],I+=" ",I+=d[b][6],d[b][7]!=null&&(I+=" ",I+=d[b][7])))));return I+" "}(this.value)},move:function(d,b){var C=this.bbox();return C.x,C.y,this},at:function(d){if(!this.destination)return this;for(var b=this.value,C=this.destination.value,I=[],P=new t.PathArray,_=0,N=b.length;_<N;_++){I[_]=[b[_][0]];for(var Y=1,G=b[_].length;Y<G;Y++)I[_][Y]=b[_][Y]+(C[_][Y]-b[_][Y])*d;I[_][0]==="A"&&(I[_][4]=+(I[_][4]!=0),I[_][5]=+(I[_][5]!=0))}return P.value=I,P},parse:function(d){if(d instanceof t.PathArray)return d.valueOf();var b,C={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};d=typeof d=="string"?d.replace(t.regex.numbersWithDots,h).replace(t.regex.pathLetters," $& ").replace(t.regex.hyphen,"$1 -").trim().split(t.regex.delimiter):d.reduce(function(G,J){return[].concat.call(G,J)},[]);var I=[],P=new t.Point,_=new t.Point,N=0,Y=d.length;do t.regex.isPathLetter.test(d[N])?(b=d[N],++N):b=="M"?b="L":b=="m"&&(b="l"),I.push(i[b].call(null,d.slice(N,N+=C[b.toUpperCase()]).map(parseFloat),P,_));while(Y>N);return I},bbox:function(){return t.parser.draw||t.prepare(),t.parser.path.setAttribute("d",this.toString()),t.parser.path.getBBox()}}),t.Number=t.invent({create:function(d,b){this.value=0,this.unit=b||"",typeof d=="number"?this.value=isNaN(d)?0:isFinite(d)?d:d<0?-34e37:34e37:typeof d=="string"?(b=d.match(t.regex.numberAndUnit))&&(this.value=parseFloat(b[1]),b[5]=="%"?this.value/=100:b[5]=="s"&&(this.value*=1e3),this.unit=b[5]):d instanceof t.Number&&(this.value=d.valueOf(),this.unit=d.unit)},extend:{toString:function(){return(this.unit=="%"?~~(1e8*this.value)/1e6:this.unit=="s"?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(d){return d=new t.Number(d),new t.Number(this+d,this.unit||d.unit)},minus:function(d){return d=new t.Number(d),new t.Number(this-d,this.unit||d.unit)},times:function(d){return d=new t.Number(d),new t.Number(this*d,this.unit||d.unit)},divide:function(d){return d=new t.Number(d),new t.Number(this/d,this.unit||d.unit)},to:function(d){var b=new t.Number(this);return typeof d=="string"&&(b.unit=d),b},morph:function(d){return this.destination=new t.Number(d),d.relative&&(this.destination.value+=this.value),this},at:function(d){return this.destination?new t.Number(this.destination).minus(this).times(d).plus(this):this}}}),t.Element=t.invent({create:function(d){this._stroke=t.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=d)&&(this.type=d.nodeName,this.node.instance=this,this._stroke=d.getAttribute("stroke")||this._stroke)},extend:{x:function(d){return this.attr("x",d)},y:function(d){return this.attr("y",d)},cx:function(d){return d==null?this.x()+this.width()/2:this.x(d-this.width()/2)},cy:function(d){return d==null?this.y()+this.height()/2:this.y(d-this.height()/2)},move:function(d,b){return this.x(d).y(b)},center:function(d,b){return this.cx(d).cy(b)},width:function(d){return this.attr("width",d)},height:function(d){return this.attr("height",d)},size:function(d,b){var C=x(this,d,b);return this.width(new t.Number(C.width)).height(new t.Number(C.height))},clone:function(d){this.writeDataToDom();var b=A(this.node.cloneNode(!0));return d?d.add(b):this.after(b),b},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(d){return this.after(d).remove(),d},addTo:function(d){return d.put(this)},putIn:function(d){return d.add(this)},id:function(d){return this.attr("id",d)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return this.style("display")!="none"},toString:function(){return this.attr("id")},classes:function(){var d=this.attr("class");return d==null?[]:d.trim().split(t.regex.delimiter)},hasClass:function(d){return this.classes().indexOf(d)!=-1},addClass:function(d){if(!this.hasClass(d)){var b=this.classes();b.push(d),this.attr("class",b.join(" "))}return this},removeClass:function(d){return this.hasClass(d)&&this.attr("class",this.classes().filter(function(b){return b!=d}).join(" ")),this},toggleClass:function(d){return this.hasClass(d)?this.removeClass(d):this.addClass(d)},reference:function(d){return t.get(this.attr(d))},parent:function(d){var b=this;if(!b.node.parentNode)return null;if(b=t.adopt(b.node.parentNode),!d)return b;for(;b&&b.node instanceof E.SVGElement;){if(typeof d=="string"?b.matches(d):b instanceof d)return b;if(!b.node.parentNode||b.node.parentNode.nodeName=="#document")return null;b=t.adopt(b.node.parentNode)}},doc:function(){return this instanceof t.Doc?this:this.parent(t.Doc)},parents:function(d){var b=[],C=this;do{if(!(C=C.parent(d))||!C.node)break;b.push(C)}while(C.parent);return b},matches:function(d){return function(b,C){return(b.matches||b.matchesSelector||b.msMatchesSelector||b.mozMatchesSelector||b.webkitMatchesSelector||b.oMatchesSelector).call(b,C)}(this.node,d)},native:function(){return this.node},svg:function(d){var b=e.createElementNS("http://www.w3.org/2000/svg","svg");if(!(d&&this instanceof t.Parent))return b.appendChild(d=e.createElementNS("http://www.w3.org/2000/svg","svg")),this.writeDataToDom(),d.appendChild(this.node.cloneNode(!0)),b.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");b.innerHTML="<svg>"+d.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var C=0,I=b.firstChild.childNodes.length;C<I;C++)this.node.appendChild(b.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(d){return this.dom=d,this},is:function(d){return function(b,C){return b instanceof C}(this,d)}}}),t.easing={"-":function(d){return d},"<>":function(d){return-Math.cos(d*Math.PI)/2+.5},">":function(d){return Math.sin(d*Math.PI/2)},"<":function(d){return 1-Math.cos(d*Math.PI/2)}},t.morph=function(d){return function(b,C){return new t.MorphObj(b,C).at(d)}},t.Situation=t.invent({create:function(d){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new t.Number(d.duration).valueOf(),this.delay=new t.Number(d.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=d.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),t.FX=t.invent({create:function(d){this._target=d,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(d,b,C){ae(d)==="object"&&(b=d.ease,C=d.delay,d=d.duration);var I=new t.Situation({duration:d||1e3,delay:C||0,ease:t.easing[b||"-"]||b});return this.queue(I),this},target:function(d){return d&&d instanceof t.Element?(this._target=d,this):this._target},timeToAbsPos:function(d){return(d-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(d){return this.situation.duration/this._speed*d+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=E.requestAnimationFrame((function(){this.step()}).bind(this))},stopAnimFrame:function(){E.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(d){return(typeof d=="function"||d instanceof t.Situation)&&this.situations.push(d),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof t.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var d,b=this.situation;if(b.init)return this;for(var C in b.animations){d=this.target()[C](),Array.isArray(d)||(d=[d]),Array.isArray(b.animations[C])||(b.animations[C]=[b.animations[C]]);for(var I=d.length;I--;)b.animations[C][I]instanceof t.Number&&(d[I]=new t.Number(d[I])),b.animations[C][I]=d[I].morph(b.animations[C][I])}for(var C in b.attrs)b.attrs[C]=new t.MorphObj(this.target().attr(C),b.attrs[C]);for(var C in b.styles)b.styles[C]=new t.MorphObj(this.target().style(C),b.styles[C]);return b.initialTransformation=this.target().matrixify(),b.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(d,b){var C=this.active;return this.active=!1,b&&this.clearQueue(),d&&this.situation&&(!C&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(d){var b=this.last();return this.target().on("finished.fx",function C(I){I.detail.situation==b&&(d.call(this,b),this.off("finished.fx",C))}),this._callStart()},during:function(d){var b=this.last(),C=function(I){I.detail.situation==b&&d.call(this,I.detail.pos,t.morph(I.detail.pos),I.detail.eased,b)};return this.target().off("during.fx",C).on("during.fx",C),this.after(function(){this.off("during.fx",C)}),this._callStart()},afterAll:function(d){var b=function C(I){d.call(this),this.off("allfinished.fx",C)};return this.target().off("allfinished.fx",b).on("allfinished.fx",b),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(d,b,C){return this.last()[C||"animations"][d]=b,this._callStart()},step:function(d){var b,C,I;d||(this.absPos=this.timeToAbsPos(+new Date)),this.situation.loops!==!1?(b=Math.max(this.absPos,0),C=Math.floor(b),this.situation.loops===!0||C<this.situation.loops?(this.pos=b-C,I=this.situation.loop,this.situation.loop=C):(this.absPos=this.situation.loops,this.pos=1,I=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=!!((this.situation.loop-I)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var P=this.situation.ease(this.pos);for(var _ in this.situation.once)_>this.lastPos&&_<=P&&(this.situation.once[_].call(this.target(),this.pos,P),delete this.situation.once[_]);return this.active&&this.target().fire("during",{pos:this.pos,eased:P,fx:this,situation:this.situation}),this.situation?(this.eachAt(),this.pos==1&&!this.situation.reversed||this.situation.reversed&&this.pos==0?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=P,this):this},eachAt:function(){var d,b=this,C=this.target(),I=this.situation;for(var P in I.animations)d=[].concat(I.animations[P]).map(function(Y){return typeof Y!="string"&&Y.at?Y.at(I.ease(b.pos),b.pos):Y}),C[P].apply(C,d);for(var P in I.attrs)d=[P].concat(I.attrs[P]).map(function(G){return typeof G!="string"&&G.at?G.at(I.ease(b.pos),b.pos):G}),C.attr.apply(C,d);for(var P in I.styles)d=[P].concat(I.styles[P]).map(function(G){return typeof G!="string"&&G.at?G.at(I.ease(b.pos),b.pos):G}),C.style.apply(C,d);if(I.transforms.length){d=I.initialTransformation,P=0;for(var _=I.transforms.length;P<_;P++){var N=I.transforms[P];N instanceof t.Matrix?d=N.relative?d.multiply(new t.Matrix().morph(N).at(I.ease(this.pos))):d.morph(N).at(I.ease(this.pos)):(N.relative||N.undo(d.extract()),d=d.multiply(N.at(I.ease(this.pos))))}C.matrix(d)}return this},once:function(d,b,C){var I=this.last();return C||(d=I.ease(d)),I.once[d]=b,this},_callStart:function(){return setTimeout((function(){this.start()}).bind(this),0),this}},parent:t.Element,construct:{animate:function(d,b,C){return(this.fx||(this.fx=new t.FX(this))).animate(d,b,C)},delay:function(d){return(this.fx||(this.fx=new t.FX(this))).delay(d)},stop:function(d,b){return this.fx&&this.fx.stop(d,b),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),t.MorphObj=t.invent({create:function(d,b){return t.Color.isColor(b)?new t.Color(d).morph(b):t.regex.delimiter.test(d)?t.regex.pathLetters.test(d)?new t.PathArray(d).morph(b):new t.Array(d).morph(b):t.regex.numberAndUnit.test(b)?new t.Number(d).morph(b):(this.value=d,void(this.destination=b))},extend:{at:function(d,b){return b<1?this.value:this.destination},valueOf:function(){return this.value}}}),t.extend(t.FX,{attr:function(d,b,C){if(ae(d)==="object")for(var I in d)this.attr(I,d[I]);else this.add(d,b,"attrs");return this},plot:function(d,b,C,I){return arguments.length==4?this.plot([d,b,C,I]):this.add("plot",new(this.target()).morphArray(d))}}),t.Box=t.invent({create:function(d,b,C,I){if(!(ae(d)!=="object"||d instanceof t.Element))return t.Box.call(this,d.left!=null?d.left:d.x,d.top!=null?d.top:d.y,d.width,d.height);var P;arguments.length==4&&(this.x=d,this.y=b,this.width=C,this.height=I),(P=this).x==null&&(P.x=0,P.y=0,P.width=0,P.height=0),P.w=P.width,P.h=P.height,P.x2=P.x+P.width,P.y2=P.y+P.height,P.cx=P.x+P.width/2,P.cy=P.y+P.height/2}}),t.BBox=t.invent({create:function(d){if(t.Box.apply(this,[].slice.call(arguments)),d instanceof t.Element){var b;try{if(!e.documentElement.contains){for(var C=d.node;C.parentNode;)C=C.parentNode;if(C!=e)throw new Error("Element not in the dom")}b=d.node.getBBox()}catch{if(d instanceof t.Shape){t.parser.draw||t.prepare();var I=d.clone(t.parser.draw.instance).show();I&&I.node&&typeof I.node.getBBox=="function"&&(b=I.node.getBBox()),I&&typeof I.remove=="function"&&I.remove()}else b={x:d.node.clientLeft,y:d.node.clientTop,width:d.node.clientWidth,height:d.node.clientHeight}}t.Box.call(this,b)}},inherit:t.Box,parent:t.Element,construct:{bbox:function(){return new t.BBox(this)}}}),t.BBox.prototype.constructor=t.BBox,t.Matrix=t.invent({create:function(d){var b=k([1,0,0,1,0,0]);d=d===null?b:d instanceof t.Element?d.matrixify():typeof d=="string"?k(d.split(t.regex.delimiter).map(parseFloat)):arguments.length==6?k([].slice.call(arguments)):Array.isArray(d)?k(d):d&&ae(d)==="object"?d:b;for(var C=M.length-1;C>=0;--C)this[M[C]]=d[M[C]]!=null?d[M[C]]:b[M[C]]},extend:{extract:function(){var d=v(this,0,1);v(this,1,0);var b=180/Math.PI*Math.atan2(d.y,d.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(b*Math.PI/180)+this.f*Math.sin(b*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(b*Math.PI/180)+this.e*Math.sin(-b*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:b,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new t.Matrix(this)}},clone:function(){return new t.Matrix(this)},morph:function(d){return this.destination=new t.Matrix(d),this},multiply:function(d){return new t.Matrix(this.native().multiply(function(b){return b instanceof t.Matrix||(b=new t.Matrix(b)),b}(d).native()))},inverse:function(){return new t.Matrix(this.native().inverse())},translate:function(d,b){return new t.Matrix(this.native().translate(d||0,b||0))},native:function(){for(var d=t.parser.native.createSVGMatrix(),b=M.length-1;b>=0;b--)d[M[b]]=this[M[b]];return d},toString:function(){return"matrix("+S(this.a)+","+S(this.b)+","+S(this.c)+","+S(this.d)+","+S(this.e)+","+S(this.f)+")"}},parent:t.Element,construct:{ctm:function(){return new t.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof t.Nested){var d=this.rect(1,1),b=d.node.getScreenCTM();return d.remove(),new t.Matrix(b)}return new t.Matrix(this.node.getScreenCTM())}}}),t.Point=t.invent({create:function(d,b){var C;C=Array.isArray(d)?{x:d[0],y:d[1]}:ae(d)==="object"?{x:d.x,y:d.y}:d!=null?{x:d,y:b??d}:{x:0,y:0},this.x=C.x,this.y=C.y},extend:{clone:function(){return new t.Point(this)},morph:function(d,b){return this.destination=new t.Point(d,b),this}}}),t.extend(t.Element,{point:function(d,b){return new t.Point(d,b).transform(this.screenCTM().inverse())}}),t.extend(t.Element,{attr:function(d,b,C){if(d==null){for(d={},C=(b=this.node.attributes).length-1;C>=0;C--)d[b[C].nodeName]=t.regex.isNumber.test(b[C].nodeValue)?parseFloat(b[C].nodeValue):b[C].nodeValue;return d}if(ae(d)==="object")for(var I in d)this.attr(I,d[I]);else if(b===null)this.node.removeAttribute(d);else{if(b==null)return(b=this.node.getAttribute(d))==null?t.defaults.attrs[d]:t.regex.isNumber.test(b)?parseFloat(b):b;d=="stroke-width"?this.attr("stroke",parseFloat(b)>0?this._stroke:null):d=="stroke"&&(this._stroke=b),d!="fill"&&d!="stroke"||(t.regex.isImage.test(b)&&(b=this.doc().defs().image(b,0,0)),b instanceof t.Image&&(b=this.doc().defs().pattern(0,0,function(){this.add(b)}))),typeof b=="number"?b=new t.Number(b):t.Color.isColor(b)?b=new t.Color(b):Array.isArray(b)&&(b=new t.Array(b)),d=="leading"?this.leading&&this.leading(b):typeof C=="string"?this.node.setAttributeNS(C,d,b.toString()):this.node.setAttribute(d,b.toString()),!this.rebuild||d!="font-size"&&d!="x"||this.rebuild(d,b)}return this}}),t.extend(t.Element,{transform:function(d,b){var C;return ae(d)!=="object"?(C=new t.Matrix(this).extract(),typeof d=="string"?C[d]:C):(C=new t.Matrix(this),b=!!b||!!d.relative,d.a!=null&&(C=b?C.multiply(new t.Matrix(d)):new t.Matrix(d)),this.attr("transform",C))}}),t.extend(t.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(t.regex.transforms).slice(0,-1).map(function(d){var b=d.trim().split("(");return[b[0],b[1].split(t.regex.delimiter).map(function(C){return parseFloat(C)})]}).reduce(function(d,b){return b[0]=="matrix"?d.multiply(k(b[1])):d[b[0]].apply(d,b[1])},new t.Matrix)},toParent:function(d){if(this==d)return this;var b=this.screenCTM(),C=d.screenCTM().inverse();return this.addTo(d).untransform().transform(C.multiply(b)),this},toDoc:function(){return this.toParent(this.doc())}}),t.Transformation=t.invent({create:function(d,b){if(arguments.length>1&&typeof b!="boolean")return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(d))for(var C=0,I=this.arguments.length;C<I;++C)this[this.arguments[C]]=d[C];else if(d&&ae(d)==="object")for(C=0,I=this.arguments.length;C<I;++C)this[this.arguments[C]]=d[this.arguments[C]];this.inversed=!1,b===!0&&(this.inversed=!0)}}),t.Translate=t.invent({parent:t.Matrix,inherit:t.Transformation,create:function(d,b){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),t.extend(t.Element,{style:function(d,b){if(arguments.length==0)return this.node.style.cssText||"";if(arguments.length<2)if(ae(d)==="object")for(var C in d)this.style(C,d[C]);else{if(!t.regex.isCss.test(d))return this.node.style[u(d)];for(d=d.split(/\s*;\s*/).filter(function(I){return!!I}).map(function(I){return I.split(/\s*:\s*/)});b=d.pop();)this.style(b[0],b[1])}else this.node.style[u(d)]=b===null||t.regex.isBlank.test(b)?"":b;return this}}),t.Parent=t.invent({create:function(d){this.constructor.call(this,d)},inherit:t.Element,extend:{children:function(){return t.utils.map(t.utils.filterSVGElements(this.node.childNodes),function(d){return t.adopt(d)})},add:function(d,b){return b==null?this.node.appendChild(d.node):d.node!=this.node.childNodes[b]&&this.node.insertBefore(d.node,this.node.childNodes[b]),this},put:function(d,b){return this.add(d,b),d},has:function(d){return this.index(d)>=0},index:function(d){return[].slice.call(this.node.childNodes).indexOf(d.node)},get:function(d){return t.adopt(this.node.childNodes[d])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(d,b){for(var C=this.children(),I=0,P=C.length;I<P;I++)C[I]instanceof t.Element&&d.apply(C[I],[I,C]),b&&C[I]instanceof t.Container&&C[I].each(d,b);return this},removeElement:function(d){return this.node.removeChild(d.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),t.extend(t.Parent,{ungroup:function(d,b){return b===0||this instanceof t.Defs||this.node==t.parser.draw||(d=d||(this instanceof t.Doc?this:this.parent(t.Parent)),b=b||1/0,this.each(function(){return this instanceof t.Defs?this:this instanceof t.Parent?this.ungroup(d,b-1):this.toParent(d)}),this.node.firstChild||this.remove()),this},flatten:function(d,b){return this.ungroup(d,b)}}),t.Container=t.invent({create:function(d){this.constructor.call(this,d)},inherit:t.Parent}),t.ViewBox=t.invent({parent:t.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(d){t.Element.prototype[d]=function(b){return t.on(this.node,d,b),this}}),t.listeners=[],t.handlerMap=[],t.listenerId=0,t.on=function(d,b,C,I,P){var _=C.bind(I||d.instance||d),N=(t.handlerMap.indexOf(d)+1||t.handlerMap.push(d))-1,Y=b.split(".")[0],G=b.split(".")[1]||"*";t.listeners[N]=t.listeners[N]||{},t.listeners[N][Y]=t.listeners[N][Y]||{},t.listeners[N][Y][G]=t.listeners[N][Y][G]||{},C._svgjsListenerId||(C._svgjsListenerId=++t.listenerId),t.listeners[N][Y][G][C._svgjsListenerId]=_,d.addEventListener(Y,_,P||{passive:!1})},t.off=function(d,b,C){var I=t.handlerMap.indexOf(d),P=b&&b.split(".")[0],_=b&&b.split(".")[1],N="";if(I!=-1)if(C){if(typeof C=="function"&&(C=C._svgjsListenerId),!C)return;t.listeners[I][P]&&t.listeners[I][P][_||"*"]&&(d.removeEventListener(P,t.listeners[I][P][_||"*"][C],!1),delete t.listeners[I][P][_||"*"][C])}else if(_&&P){if(t.listeners[I][P]&&t.listeners[I][P][_]){for(var Y in t.listeners[I][P][_])t.off(d,[P,_].join("."),Y);delete t.listeners[I][P][_]}}else if(_)for(var G in t.listeners[I])for(var N in t.listeners[I][G])_===N&&t.off(d,[G,_].join("."));else if(P){if(t.listeners[I][P]){for(var N in t.listeners[I][P])t.off(d,[P,N].join("."));delete t.listeners[I][P]}}else{for(var G in t.listeners[I])t.off(d,G);delete t.listeners[I],delete t.handlerMap[I]}},t.extend(t.Element,{on:function(d,b,C,I){return t.on(this.node,d,b,C,I),this},off:function(d,b){return t.off(this.node,d,b),this},fire:function(d,b){return d instanceof E.Event?this.node.dispatchEvent(d):this.node.dispatchEvent(d=new t.CustomEvent(d,{detail:b,cancelable:!0})),this._event=d,this},event:function(){return this._event}}),t.Defs=t.invent({create:"defs",inherit:t.Container}),t.G=t.invent({create:"g",inherit:t.Container,extend:{x:function(d){return d==null?this.transform("x"):this.transform({x:d-this.x()},!0)}},construct:{group:function(){return this.put(new t.G)}}}),t.Doc=t.invent({create:function(d){d&&((d=typeof d=="string"?e.getElementById(d):d).nodeName=="svg"?this.constructor.call(this,d):(this.constructor.call(this,t.create("svg")),d.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:t.Container,extend:{namespace:function(){return this.attr({xmlns:t.ns,version:"1.1"}).attr("xmlns:xlink",t.xlink,t.xmlns).attr("xmlns:svgjs",t.svgjs,t.xmlns)},defs:function(){var d;return this._defs||((d=this.node.getElementsByTagName("defs")[0])?this._defs=t.adopt(d):this._defs=new t.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&this.node.parentNode.nodeName!="#document"?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,t.parser.draw&&!t.parser.draw.parentNode&&this.node.appendChild(t.parser.draw),this},clone:function(d){this.writeDataToDom();var b=this.node,C=A(b.cloneNode(!0));return d?(d.node||d).appendChild(C.node):b.parentNode.insertBefore(C.node,b.nextSibling),C}}}),t.extend(t.Element,{}),t.Gradient=t.invent({create:function(d){this.constructor.call(this,t.create(d+"Gradient")),this.type=d},inherit:t.Container,extend:{at:function(d,b,C){return this.put(new t.Stop).update(d,b,C)},update:function(d){return this.clear(),typeof d=="function"&&d.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(d,b,C){return d=="transform"&&(d="gradientTransform"),t.Container.prototype.attr.call(this,d,b,C)}},construct:{gradient:function(d,b){return this.defs().gradient(d,b)}}}),t.extend(t.Gradient,t.FX,{from:function(d,b){return(this._target||this).type=="radial"?this.attr({fx:new t.Number(d),fy:new t.Number(b)}):this.attr({x1:new t.Number(d),y1:new t.Number(b)})},to:function(d,b){return(this._target||this).type=="radial"?this.attr({cx:new t.Number(d),cy:new t.Number(b)}):this.attr({x2:new t.Number(d),y2:new t.Number(b)})}}),t.extend(t.Defs,{gradient:function(d,b){return this.put(new t.Gradient(d)).update(b)}}),t.Stop=t.invent({create:"stop",inherit:t.Element,extend:{update:function(d){return(typeof d=="number"||d instanceof t.Number)&&(d={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),d.opacity!=null&&this.attr("stop-opacity",d.opacity),d.color!=null&&this.attr("stop-color",d.color),d.offset!=null&&this.attr("offset",new t.Number(d.offset)),this}}}),t.Pattern=t.invent({create:"pattern",inherit:t.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(d){return this.clear(),typeof d=="function"&&d.call(this,this),this},toString:function(){return this.fill()},attr:function(d,b,C){return d=="transform"&&(d="patternTransform"),t.Container.prototype.attr.call(this,d,b,C)}},construct:{pattern:function(d,b,C){return this.defs().pattern(d,b,C)}}}),t.extend(t.Defs,{pattern:function(d,b,C){return this.put(new t.Pattern).update(C).attr({x:0,y:0,width:d,height:b,patternUnits:"userSpaceOnUse"})}}),t.Shape=t.invent({create:function(d){this.constructor.call(this,d)},inherit:t.Element}),t.Symbol=t.invent({create:"symbol",inherit:t.Container,construct:{symbol:function(){return this.put(new t.Symbol)}}}),t.Use=t.invent({create:"use",inherit:t.Shape,extend:{element:function(d,b){return this.attr("href",(b||"")+"#"+d,t.xlink)}},construct:{use:function(d,b){return this.put(new t.Use).element(d,b)}}}),t.Rect=t.invent({create:"rect",inherit:t.Shape,construct:{rect:function(d,b){return this.put(new t.Rect).size(d,b)}}}),t.Circle=t.invent({create:"circle",inherit:t.Shape,construct:{circle:function(d){return this.put(new t.Circle).rx(new t.Number(d).divide(2)).move(0,0)}}}),t.extend(t.Circle,t.FX,{rx:function(d){return this.attr("r",d)},ry:function(d){return this.rx(d)}}),t.Ellipse=t.invent({create:"ellipse",inherit:t.Shape,construct:{ellipse:function(d,b){return this.put(new t.Ellipse).size(d,b).move(0,0)}}}),t.extend(t.Ellipse,t.Rect,t.FX,{rx:function(d){return this.attr("rx",d)},ry:function(d){return this.attr("ry",d)}}),t.extend(t.Circle,t.Ellipse,{x:function(d){return d==null?this.cx()-this.rx():this.cx(d+this.rx())},y:function(d){return d==null?this.cy()-this.ry():this.cy(d+this.ry())},cx:function(d){return d==null?this.attr("cx"):this.attr("cx",d)},cy:function(d){return d==null?this.attr("cy"):this.attr("cy",d)},width:function(d){return d==null?2*this.rx():this.rx(new t.Number(d).divide(2))},height:function(d){return d==null?2*this.ry():this.ry(new t.Number(d).divide(2))},size:function(d,b){var C=x(this,d,b);return this.rx(new t.Number(C.width).divide(2)).ry(new t.Number(C.height).divide(2))}}),t.Line=t.invent({create:"line",inherit:t.Shape,extend:{array:function(){return new t.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(d,b,C,I){return d==null?this.array():(d=b!==void 0?{x1:d,y1:b,x2:C,y2:I}:new t.PointArray(d).toLine(),this.attr(d))},move:function(d,b){return this.attr(this.array().move(d,b).toLine())},size:function(d,b){var C=x(this,d,b);return this.attr(this.array().size(C.width,C.height).toLine())}},construct:{line:function(d,b,C,I){return t.Line.prototype.plot.apply(this.put(new t.Line),d!=null?[d,b,C,I]:[0,0,0,0])}}}),t.Polyline=t.invent({create:"polyline",inherit:t.Shape,construct:{polyline:function(d){return this.put(new t.Polyline).plot(d||new t.PointArray)}}}),t.Polygon=t.invent({create:"polygon",inherit:t.Shape,construct:{polygon:function(d){return this.put(new t.Polygon).plot(d||new t.PointArray)}}}),t.extend(t.Polyline,t.Polygon,{array:function(){return this._array||(this._array=new t.PointArray(this.attr("points")))},plot:function(d){return d==null?this.array():this.clear().attr("points",typeof d=="string"?d:this._array=new t.PointArray(d))},clear:function(){return delete this._array,this},move:function(d,b){return this.attr("points",this.array().move(d,b))},size:function(d,b){var C=x(this,d,b);return this.attr("points",this.array().size(C.width,C.height))}}),t.extend(t.Line,t.Polyline,t.Polygon,{morphArray:t.PointArray,x:function(d){return d==null?this.bbox().x:this.move(d,this.bbox().y)},y:function(d){return d==null?this.bbox().y:this.move(this.bbox().x,d)},width:function(d){var b=this.bbox();return d==null?b.width:this.size(d,b.height)},height:function(d){var b=this.bbox();return d==null?b.height:this.size(b.width,d)}}),t.Path=t.invent({create:"path",inherit:t.Shape,extend:{morphArray:t.PathArray,array:function(){return this._array||(this._array=new t.PathArray(this.attr("d")))},plot:function(d){return d==null?this.array():this.clear().attr("d",typeof d=="string"?d:this._array=new t.PathArray(d))},clear:function(){return delete this._array,this}},construct:{path:function(d){return this.put(new t.Path).plot(d||new t.PathArray)}}}),t.Image=t.invent({create:"image",inherit:t.Shape,extend:{load:function(d){if(!d)return this;var b=this,C=new E.Image;return t.on(C,"load",function(){t.off(C);var I=b.parent(t.Pattern);I!==null&&(b.width()==0&&b.height()==0&&b.size(C.width,C.height),I&&I.width()==0&&I.height()==0&&I.size(b.width(),b.height()),typeof b._loaded=="function"&&b._loaded.call(b,{width:C.width,height:C.height,ratio:C.width/C.height,url:d}))}),t.on(C,"error",function(I){t.off(C),typeof b._error=="function"&&b._error.call(b,I)}),this.attr("href",C.src=this.src=d,t.xlink)},loaded:function(d){return this._loaded=d,this},error:function(d){return this._error=d,this}},construct:{image:function(d,b,C){return this.put(new t.Image).load(d).size(b||0,C||b||0)}}}),t.Text=t.invent({create:function(){this.constructor.call(this,t.create("text")),this.dom.leading=new t.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",t.defaults.attrs["font-family"])},inherit:t.Shape,extend:{x:function(d){return d==null?this.attr("x"):this.attr("x",d)},text:function(d){if(d===void 0){d="";for(var b=this.node.childNodes,C=0,I=b.length;C<I;++C)C!=0&&b[C].nodeType!=3&&t.adopt(b[C]).dom.newLined==1&&(d+=`
`),d+=b[C].textContent;return d}if(this.clear().build(!0),typeof d=="function")d.call(this,this);else{C=0;for(var P=(d=d.split(`
`)).length;C<P;C++)this.tspan(d[C]).newLine()}return this.build(!1).rebuild()},size:function(d){return this.attr("font-size",d).rebuild()},leading:function(d){return d==null?this.dom.leading:(this.dom.leading=new t.Number(d),this.rebuild())},lines:function(){var d=(this.textPath&&this.textPath()||this).node,b=t.utils.map(t.utils.filterSVGElements(d.childNodes),function(C){return t.adopt(C)});return new t.Set(b)},rebuild:function(d){if(typeof d=="boolean"&&(this._rebuild=d),this._rebuild){var b=this,C=0,I=this.dom.leading*new t.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(b.textPath()||this.attr("x",b.attr("x")),this.text()==`
`?C+=I:(this.attr("dy",I+C),C=0))}),this.fire("rebuild")}return this},build:function(d){return this._build=!!d,this},setData:function(d){return this.dom=d,this.dom.leading=new t.Number(d.leading||1.3),this}},construct:{text:function(d){return this.put(new t.Text).text(d)},plain:function(d){return this.put(new t.Text).plain(d)}}}),t.Tspan=t.invent({create:"tspan",inherit:t.Shape,extend:{text:function(d){return d==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof d=="function"?d.call(this,this):this.plain(d),this)},dx:function(d){return this.attr("dx",d)},dy:function(d){return this.attr("dy",d)},newLine:function(){var d=this.parent(t.Text);return this.dom.newLined=!0,this.dy(d.dom.leading*d.attr("font-size")).attr("x",d.x())}}}),t.extend(t.Text,t.Tspan,{plain:function(d){return this._build===!1&&this.clear(),this.node.appendChild(e.createTextNode(d)),this},tspan:function(d){var b=(this.textPath&&this.textPath()||this).node,C=new t.Tspan;return this._build===!1&&this.clear(),b.appendChild(C.node),C.text(d)},clear:function(){for(var d=(this.textPath&&this.textPath()||this).node;d.hasChildNodes();)d.removeChild(d.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),t.TextPath=t.invent({create:"textPath",inherit:t.Parent,parent:t.Text,construct:{morphArray:t.PathArray,array:function(){var d=this.track();return d?d.array():null},plot:function(d){var b=this.track(),C=null;return b&&(C=b.plot(d)),d==null?C:this},track:function(){var d=this.textPath();if(d)return d.reference("href")},textPath:function(){if(this.node.firstChild&&this.node.firstChild.nodeName=="textPath")return t.adopt(this.node.firstChild)}}}),t.Nested=t.invent({create:function(){this.constructor.call(this,t.create("svg")),this.style("overflow","visible")},inherit:t.Container,construct:{nested:function(){return this.put(new t.Nested)}}});var c={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(d,b){return b=="color"?d:d+"-"+b}};function h(d,b,C,I){return C+I.replace(t.regex.dots," .")}function u(d){return d.toLowerCase().replace(/-(.)/g,function(b,C){return C.toUpperCase()})}function p(d){return d.charAt(0).toUpperCase()+d.slice(1)}function g(d){var b=d.toString(16);return b.length==1?"0"+b:b}function x(d,b,C){if(b==null||C==null){var I=d.bbox();b==null?b=I.width/I.height*C:C==null&&(C=I.height/I.width*b)}return{width:b,height:C}}function v(d,b,C){return{x:b*d.a+C*d.c+0,y:b*d.b+C*d.d+0}}function k(d){return{a:d[0],b:d[1],c:d[2],d:d[3],e:d[4],f:d[5]}}function A(d){for(var b=d.childNodes.length-1;b>=0;b--)d.childNodes[b]instanceof E.SVGElement&&A(d.childNodes[b]);return t.adopt(d).id(t.eid(d.nodeName))}function S(d){return Math.abs(d)>1e-37?d:0}["fill","stroke"].forEach(function(d){var b={};b[d]=function(C){if(C===void 0)return this;if(typeof C=="string"||t.Color.isRgb(C)||C&&typeof C.fill=="function")this.attr(d,C);else for(var I=c[d].length-1;I>=0;I--)C[c[d][I]]!=null&&this.attr(c.prefix(d,c[d][I]),C[c[d][I]]);return this},t.extend(t.Element,t.FX,b)}),t.extend(t.Element,t.FX,{translate:function(d,b){return this.transform({x:d,y:b})},matrix:function(d){return this.attr("transform",new t.Matrix(arguments.length==6?[].slice.call(arguments):d))},opacity:function(d){return this.attr("opacity",d)},dx:function(d){return this.x(new t.Number(d).plus(this instanceof t.FX?0:this.x()),!0)},dy:function(d){return this.y(new t.Number(d).plus(this instanceof t.FX?0:this.y()),!0)}}),t.extend(t.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(d){return this.node.getPointAtLength(d)}}),t.Set=t.invent({create:function(d){Array.isArray(d)?this.members=d:this.clear()},extend:{add:function(){for(var d=[].slice.call(arguments),b=0,C=d.length;b<C;b++)this.members.push(d[b]);return this},remove:function(d){var b=this.index(d);return b>-1&&this.members.splice(b,1),this},each:function(d){for(var b=0,C=this.members.length;b<C;b++)d.apply(this.members[b],[b,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(d){return this.index(d)>=0},index:function(d){return this.members.indexOf(d)},get:function(d){return this.members[d]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(d){return new t.Set(d)}}}),t.FX.Set=t.invent({create:function(d){this.set=d}}),t.Set.inherit=function(){var d=[];for(var b in t.Shape.prototype)typeof t.Shape.prototype[b]=="function"&&typeof t.Set.prototype[b]!="function"&&d.push(b);for(var b in d.forEach(function(I){t.Set.prototype[I]=function(){for(var P=0,_=this.members.length;P<_;P++)this.members[P]&&typeof this.members[P][I]=="function"&&this.members[P][I].apply(this.members[P],arguments);return I=="animate"?this.fx||(this.fx=new t.FX.Set(this)):this}}),d=[],t.FX.prototype)typeof t.FX.prototype[b]=="function"&&typeof t.FX.Set.prototype[b]!="function"&&d.push(b);d.forEach(function(C){t.FX.Set.prototype[C]=function(){for(var I=0,P=this.set.members.length;I<P;I++)this.set.members[I].fx[C].apply(this.set.members[I].fx,arguments);return this}})},t.extend(t.Element,{}),t.extend(t.Element,{remember:function(d,b){if(ae(arguments[0])==="object")for(var C in d)this.remember(C,d[C]);else{if(arguments.length==1)return this.memory()[d];this.memory()[d]=b}return this},forget:function(){if(arguments.length==0)this._memory={};else for(var d=arguments.length-1;d>=0;d--)delete this.memory()[arguments[d]];return this},memory:function(){return this._memory||(this._memory={})}}),t.get=function(d){var b=e.getElementById(function(C){var I=(C||"").toString().match(t.regex.reference);if(I)return I[1]}(d)||d);return t.adopt(b)},t.select=function(d,b){return new t.Set(t.utils.map((b||e).querySelectorAll(d),function(C){return t.adopt(C)}))},t.extend(t.Parent,{select:function(d){return t.select(d,this.node)}});var M="abcdef".split("");if(typeof E.CustomEvent!="function"){var L=function(d,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var C=e.createEvent("CustomEvent");return C.initCustomEvent(d,b.bubbles,b.cancelable,b.detail),C};L.prototype=E.Event.prototype,t.CustomEvent=L}else t.CustomEvent=E.CustomEvent;return t},ae(l)==="object"?s.exports=at.document?fi(at,at.document):function(E){return fi(E,E.document)}:at.SVG=fi(at,at.document),(function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(r,c){return this.add(r,c),!r.attr("in")&&this.autoSetIn&&r.attr("in",this.source),r.attr("result")||r.attr("result",r),r},blend:function(r,c,h){return this.put(new SVG.BlendEffect(r,c,h))},colorMatrix:function(r,c){return this.put(new SVG.ColorMatrixEffect(r,c))},convolveMatrix:function(r){return this.put(new SVG.ConvolveMatrixEffect(r))},componentTransfer:function(r){return this.put(new SVG.ComponentTransferEffect(r))},composite:function(r,c,h){return this.put(new SVG.CompositeEffect(r,c,h))},flood:function(r,c){return this.put(new SVG.FloodEffect(r,c))},offset:function(r,c){return this.put(new SVG.OffsetEffect(r,c))},image:function(r){return this.put(new SVG.ImageEffect(r))},merge:function(){var r=[void 0];for(var c in arguments)r.push(arguments[c]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,r)))},gaussianBlur:function(r,c){return this.put(new SVG.GaussianBlurEffect(r,c))},morphology:function(r,c){return this.put(new SVG.MorphologyEffect(r,c))},diffuseLighting:function(r,c,h){return this.put(new SVG.DiffuseLightingEffect(r,c,h))},displacementMap:function(r,c,h,u,p){return this.put(new SVG.DisplacementMapEffect(r,c,h,u,p))},specularLighting:function(r,c,h,u){return this.put(new SVG.SpecularLightingEffect(r,c,h,u))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(r,c,h,u,p){return this.put(new SVG.TurbulenceEffect(r,c,h,u,p))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(r){var c=this.put(new SVG.Filter);return typeof r=="function"&&r.call(c,c),c}}),SVG.extend(SVG.Container,{filter:function(r){return this.defs().filter(r)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(r){return this.filterer=r instanceof SVG.Element?r:this.doc().filter(r),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(r){return this.filterer&&r===!0&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(r){return r==null?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",r)},result:function(r){return r==null?this.attr("result"):this.attr("result",r)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(r){return r==null?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",r)},result:function(r){return r==null?this.attr("result"):this.attr("result",r)},toString:function(){return this.result()}}});var E={blend:function(r,c){return this.parent()&&this.parent().blend(this,r,c)},colorMatrix:function(r,c){return this.parent()&&this.parent().colorMatrix(r,c).in(this)},convolveMatrix:function(r){return this.parent()&&this.parent().convolveMatrix(r).in(this)},componentTransfer:function(r){return this.parent()&&this.parent().componentTransfer(r).in(this)},composite:function(r,c){return this.parent()&&this.parent().composite(this,r,c)},flood:function(r,c){return this.parent()&&this.parent().flood(r,c)},offset:function(r,c){return this.parent()&&this.parent().offset(r,c).in(this)},image:function(r){return this.parent()&&this.parent().image(r)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(r,c){return this.parent()&&this.parent().gaussianBlur(r,c).in(this)},morphology:function(r,c){return this.parent()&&this.parent().morphology(r,c).in(this)},diffuseLighting:function(r,c,h){return this.parent()&&this.parent().diffuseLighting(r,c,h).in(this)},displacementMap:function(r,c,h,u){return this.parent()&&this.parent().displacementMap(this,r,c,h,u)},specularLighting:function(r,c,h,u){return this.parent()&&this.parent().specularLighting(r,c,h,u).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(r,c,h,u,p){return this.parent()&&this.parent().turbulence(r,c,h,u,p).in(this)}};SVG.extend(SVG.Effect,E),SVG.extend(SVG.ParentEffect,E),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(r){this.attr("in",r)}}});var e={blend:function(r,c,h){this.attr({in:r,in2:c,mode:h||"normal"})},colorMatrix:function(r,c){r=="matrix"&&(c=n(c)),this.attr({type:r,values:c===void 0?null:c})},convolveMatrix:function(r){r=n(r),this.attr({order:Math.sqrt(r.split(" ").length),kernelMatrix:r})},composite:function(r,c,h){this.attr({in:r,in2:c,operator:h})},flood:function(r,c){this.attr("flood-color",r),c!=null&&this.attr("flood-opacity",c)},offset:function(r,c){this.attr({dx:r,dy:c})},image:function(r){this.attr("href",r,SVG.xlink)},displacementMap:function(r,c,h,u,p){this.attr({in:r,in2:c,scale:h,xChannelSelector:u,yChannelSelector:p})},gaussianBlur:function(r,c){r!=null||c!=null?this.attr("stdDeviation",function(h){if(!Array.isArray(h))return h;for(var u=0,p=h.length,g=[];u<p;u++)g.push(h[u]);return g.join(" ")}(Array.prototype.slice.call(arguments))):this.attr("stdDeviation","0 0")},morphology:function(r,c){this.attr({operator:r,radius:c})},tile:function(){},turbulence:function(r,c,h,u,p){this.attr({numOctaves:c,seed:h,stitchTiles:u,baseFrequency:r,type:p})}},t={merge:function(){var r;if(arguments[0]instanceof SVG.Set){var c=this;arguments[0].each(function(u){this instanceof SVG.MergeNode?c.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&c.put(new SVG.MergeNode(this))})}else{r=Array.isArray(arguments[0])?arguments[0]:arguments;for(var h=0;h<r.length;h++)r[h]instanceof SVG.MergeNode?this.put(r[h]):this.put(new SVG.MergeNode(r[h]))}},componentTransfer:function(r){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach((function(h){this[h]=new SVG["Func"+h.toUpperCase()]("identity"),this.rgb.add(this[h]),this.node.appendChild(this[h].node)}).bind(this)),r)for(var c in r.rgb&&(["r","g","b"].forEach((function(h){this[h].attr(r.rgb)}).bind(this)),delete r.rgb),r)this[c].attr(r[c])},diffuseLighting:function(r,c,h){this.attr({surfaceScale:r,diffuseConstant:c,kernelUnitLength:h})},specularLighting:function(r,c,h,u){this.attr({surfaceScale:r,diffuseConstant:c,specularExponent:h,kernelUnitLength:u})}},i={distantLight:function(r,c){this.attr({azimuth:r,elevation:c})},pointLight:function(r,c,h){this.attr({x:r,y:c,z:h})},spotLight:function(r,c,h,u,p,g){this.attr({x:r,y:c,z:h,pointsAtX:u,pointsAtY:p,pointsAtZ:g})},mergeNode:function(r){this.attr("in",r)}};function n(r){return Array.isArray(r)&&(r=new SVG.Array(r)),r.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function o(){var r=function(){};for(var c in typeof arguments[arguments.length-1]=="function"&&(r=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var h in arguments[c])r(arguments[c][h],h,arguments[c])}["r","g","b","a"].forEach(function(r){i["Func"+r.toUpperCase()]=function(c){switch(this.attr("type",c),c){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}}),o(e,function(r,c){var h=c.charAt(0).toUpperCase()+c.slice(1);SVG[h+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+h)),r.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})}),o(t,function(r,c){var h=c.charAt(0).toUpperCase()+c.slice(1);SVG[h+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+h)),r.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})}),o(i,function(r,c){var h=c.charAt(0).toUpperCase()+c.slice(1);SVG[h]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+h)),r.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})}),SVG.extend(SVG.MergeEffect,{in:function(r){return r instanceof SVG.MergeNode?this.add(r,0):this.add(new SVG.MergeNode(r),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(r){return r==null?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",r)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}).call(void 0),function(){function E(o,r,c,h,u,p,g){for(var x=o.slice(r,c||g),v=h.slice(u,p||g),k=0,A={pos:[0,0],start:[0,0]},S={pos:[0,0],start:[0,0]};x[k]=e.call(A,x[k]),v[k]=e.call(S,v[k]),x[k][0]!=v[k][0]||x[k][0]=="M"||x[k][0]=="A"&&(x[k][4]!=v[k][4]||x[k][5]!=v[k][5])?(Array.prototype.splice.apply(x,[k,1].concat(i.call(A,x[k]))),Array.prototype.splice.apply(v,[k,1].concat(i.call(S,v[k])))):(x[k]=t.call(A,x[k]),v[k]=t.call(S,v[k])),!(++k==x.length&&k==v.length);)k==x.length&&x.push(["C",A.pos[0],A.pos[1],A.pos[0],A.pos[1],A.pos[0],A.pos[1]]),k==v.length&&v.push(["C",S.pos[0],S.pos[1],S.pos[0],S.pos[1],S.pos[0],S.pos[1]]);return{start:x,dest:v}}function e(o){switch(o[0]){case"z":case"Z":o[0]="L",o[1]=this.start[0],o[2]=this.start[1];break;case"H":o[0]="L",o[2]=this.pos[1];break;case"V":o[0]="L",o[2]=o[1],o[1]=this.pos[0];break;case"T":o[0]="Q",o[3]=o[1],o[4]=o[2],o[1]=this.reflection[1],o[2]=this.reflection[0];break;case"S":o[0]="C",o[6]=o[4],o[5]=o[3],o[4]=o[2],o[3]=o[1],o[2]=this.reflection[1],o[1]=this.reflection[0]}return o}function t(o){var r=o.length;return this.pos=[o[r-2],o[r-1]],"SCQT".indexOf(o[0])!=-1&&(this.reflection=[2*this.pos[0]-o[r-4],2*this.pos[1]-o[r-3]]),o}function i(o){var r=[o];switch(o[0]){case"M":return this.pos=this.start=[o[1],o[2]],r;case"L":o[5]=o[3]=o[1],o[6]=o[4]=o[2],o[1]=this.pos[0],o[2]=this.pos[1];break;case"Q":o[6]=o[4],o[5]=o[3],o[4]=1*o[4]/3+2*o[2]/3,o[3]=1*o[3]/3+2*o[1]/3,o[2]=1*this.pos[1]/3+2*o[2]/3,o[1]=1*this.pos[0]/3+2*o[1]/3;break;case"A":r=function(c,h){var u,p,g,x,v,k,A,S,M,L,d,b,C,I,P,_,N,Y,G,J,Z,Q,se,ce,ue,ge,xe=Math.abs(h[1]),pe=Math.abs(h[2]),Ae=h[3]%360,Fe=h[4],Re=h[5],Ie=h[6],ot=h[7],Ee=new SVG.Point(c),Se=new SVG.Point(Ie,ot),Te=[];if(xe===0||pe===0||Ee.x===Se.x&&Ee.y===Se.y)return[["C",Ee.x,Ee.y,Se.x,Se.y,Se.x,Se.y]];for(u=new SVG.Point((Ee.x-Se.x)/2,(Ee.y-Se.y)/2).transform(new SVG.Matrix().rotate(Ae)),(p=u.x*u.x/(xe*xe)+u.y*u.y/(pe*pe))>1&&(xe*=p=Math.sqrt(p),pe*=p),g=new SVG.Matrix().rotate(Ae).scale(1/xe,1/pe).rotate(-Ae),Ee=Ee.transform(g),Se=Se.transform(g),x=[Se.x-Ee.x,Se.y-Ee.y],k=x[0]*x[0]+x[1]*x[1],v=Math.sqrt(k),x[0]/=v,x[1]/=v,A=k<4?Math.sqrt(1-k/4):0,Fe===Re&&(A*=-1),S=new SVG.Point((Se.x+Ee.x)/2+A*-x[1],(Se.y+Ee.y)/2+A*x[0]),M=new SVG.Point(Ee.x-S.x,Ee.y-S.y),L=new SVG.Point(Se.x-S.x,Se.y-S.y),d=Math.acos(M.x/Math.sqrt(M.x*M.x+M.y*M.y)),M.y<0&&(d*=-1),b=Math.acos(L.x/Math.sqrt(L.x*L.x+L.y*L.y)),L.y<0&&(b*=-1),Re&&d>b&&(b+=2*Math.PI),!Re&&d<b&&(b-=2*Math.PI),I=Math.ceil(2*Math.abs(d-b)/Math.PI),_=[],N=d,C=(b-d)/I,P=4*Math.tan(C/4)/3,Z=0;Z<=I;Z++)G=Math.cos(N),Y=Math.sin(N),J=new SVG.Point(S.x+G,S.y+Y),_[Z]=[new SVG.Point(J.x+P*Y,J.y-P*G),J,new SVG.Point(J.x-P*Y,J.y+P*G)],N+=C;for(_[0][0]=_[0][1].clone(),_[_.length-1][2]=_[_.length-1][1].clone(),g=new SVG.Matrix().rotate(Ae).scale(xe,pe).rotate(-Ae),Z=0,Q=_.length;Z<Q;Z++)_[Z][0]=_[Z][0].transform(g),_[Z][1]=_[Z][1].transform(g),_[Z][2]=_[Z][2].transform(g);for(Z=1,Q=_.length;Z<Q;Z++)se=(J=_[Z-1][2]).x,ce=J.y,ue=(J=_[Z][0]).x,ge=J.y,Ie=(J=_[Z][1]).x,ot=J.y,Te.push(["C",se,ce,ue,ge,Ie,ot]);return Te}(this.pos,o),o=r[0]}return o[0]="C",this.pos=[o[5],o[6]],this.reflection=[2*o[5]-o[3],2*o[6]-o[4]],r}function n(o,r){if(r===!1)return!1;for(var c=r,h=o.length;c<h;++c)if(o[c][0]=="M")return c;return!1}SVG.extend(SVG.PathArray,{morph:function(o){for(var r=this.value,c=this.parse(o),h=0,u=0,p=!1,g=!1;h!==!1||u!==!1;){var x;p=n(r,h!==!1&&h+1),g=n(c,u!==!1&&u+1),h===!1&&(h=(x=new SVG.PathArray(v.start).bbox()).height==0||x.width==0?r.push(r[0])-1:r.push(["M",x.x+x.width/2,x.y+x.height/2])-1),u===!1&&(u=(x=new SVG.PathArray(v.dest).bbox()).height==0||x.width==0?c.push(c[0])-1:c.push(["M",x.x+x.width/2,x.y+x.height/2])-1);var v=E(r,h,p,c,u,g);r=r.slice(0,h).concat(v.start,p===!1?[]:r.slice(p)),c=c.slice(0,u).concat(v.dest,g===!1?[]:c.slice(g)),h=p!==!1&&h+v.start.length,u=g!==!1&&u+v.dest.length}return this.value=r,this.destination=new SVG.PathArray,this.destination.value=c,this}})}(),(function(){function E(e){e.remember("_draggable",this),this.el=e}E.prototype.init=function(e,t){var i=this;this.constraint=e,this.value=t,this.el.on("mousedown.drag",function(n){i.start(n)}),this.el.on("touchstart.drag",function(n){i.start(n)})},E.prototype.transformPoint=function(e,t){var i=(e=e||window.event).changedTouches&&e.changedTouches[0]||e;return this.p.x=i.clientX-(t||0),this.p.y=i.clientY,this.p.matrixTransform(this.m)},E.prototype.getBBox=function(){var e=this.el.bbox();return this.el instanceof SVG.Nested&&(e=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(e.x=this.el.x(),e.y=this.el.y()),e},E.prototype.start=function(e){if(e.type!="click"&&e.type!="mousedown"&&e.type!="mousemove"||(e.which||e.buttons)==1){var t=this;if(this.el.fire("beforedrag",{event:e,handler:this}),!this.el.event().defaultPrevented){e.preventDefault(),e.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var i,n=this.getBBox();if(this.el instanceof SVG.Text)switch(i=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":i/=2;break;case"start":i=0}this.startPoints={point:this.transformPoint(e,i),box:n,transform:this.el.transform()},SVG.on(window,"mousemove.drag",function(o){t.drag(o)}),SVG.on(window,"touchmove.drag",function(o){t.drag(o)}),SVG.on(window,"mouseup.drag",function(o){t.end(o)}),SVG.on(window,"touchend.drag",function(o){t.end(o)}),this.el.fire("dragstart",{event:e,p:this.startPoints.point,m:this.m,handler:this})}}},E.prototype.drag=function(e){var t=this.getBBox(),i=this.transformPoint(e),n=this.startPoints.box.x+i.x-this.startPoints.point.x,o=this.startPoints.box.y+i.y-this.startPoints.point.y,r=this.constraint,c=i.x-this.startPoints.point.x,h=i.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:e,p:i,m:this.m,handler:this}),this.el.event().defaultPrevented)return i;if(typeof r=="function"){var u=r.call(this.el,n,o,this.m);typeof u=="boolean"&&(u={x:u,y:u}),u.x===!0?this.el.x(n):u.x!==!1&&this.el.x(u.x),u.y===!0?this.el.y(o):u.y!==!1&&this.el.y(u.y)}else typeof r=="object"&&(r.minX!=null&&n<r.minX?c=(n=r.minX)-this.startPoints.box.x:r.maxX!=null&&n>r.maxX-t.width&&(c=(n=r.maxX-t.width)-this.startPoints.box.x),r.minY!=null&&o<r.minY?h=(o=r.minY)-this.startPoints.box.y:r.maxY!=null&&o>r.maxY-t.height&&(h=(o=r.maxY-t.height)-this.startPoints.box.y),r.snapToGrid!=null&&(n-=n%r.snapToGrid,o-=o%r.snapToGrid,c-=c%r.snapToGrid,h-=h%r.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:c,y:h},!0):this.el.move(n,o));return i},E.prototype.end=function(e){var t=this.drag(e);this.el.fire("dragend",{event:e,p:t,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(e,t){typeof e!="function"&&typeof e!="object"||(t=e,e=!0);var i=this.remember("_draggable")||new E(this);return(e=e===void 0||e)?i.init(t||{},e):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}).call(void 0),function(){function E(e){this.el=e,e.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(t,i,n){var o=typeof t!="string"?t:i[t];return n?o/2:o},this.pointCoords=function(t,i){var n=this.pointsList[t];return{x:this.pointCoord(n[0],i,t==="t"||t==="b"),y:this.pointCoord(n[1],i,t==="r"||t==="l")}}}E.prototype.init=function(e,t){var i=this.el.bbox();this.options={};var n=this.el.selectize.defaults.points;for(var o in this.el.selectize.defaults)this.options[o]=this.el.selectize.defaults[o],t[o]!==void 0&&(this.options[o]=t[o]);var r=["points","pointsExclude"];for(var o in r){var c=this.options[r[o]];typeof c=="string"?c=c.length>0?c.split(/\s*,\s*/i):[]:typeof c=="boolean"&&r[o]==="points"&&(c=c?n:[]),this.options[r[o]]=c}this.options.points=[n,this.options.points].reduce(function(h,u){return h.filter(function(p){return u.indexOf(p)>-1})}),this.options.points=[this.options.points,this.options.pointsExclude].reduce(function(h,u){return h.filter(function(p){return u.indexOf(p)<0})}),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(i.x,i.y)),this.options.deepSelect&&["line","polyline","polygon"].indexOf(this.el.type)!==-1?this.selectPoints(e):this.selectRect(e),this.observe(),this.cleanup()},E.prototype.selectPoints=function(e){return this.pointSelection.isSelected=e,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},E.prototype.getPointArray=function(){var e=this.el.bbox();return this.el.array().valueOf().map(function(t){return[t[0]-e.x,t[1]-e.y]})},E.prototype.drawPoints=function(){for(var e=this,t=this.getPointArray(),i=0,n=t.length;i<n;++i){var o=function(c){return function(h){(h=h||window.event).preventDefault?h.preventDefault():h.returnValue=!1,h.stopPropagation();var u=h.pageX||h.touches[0].pageX,p=h.pageY||h.touches[0].pageY;e.el.fire("point",{x:u,y:p,i:c,event:h})}}(i),r=this.drawPoint(t[i][0],t[i][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",o).on("mousedown",o);this.pointSelection.set.add(r)}},E.prototype.drawPoint=function(e,t){var i=this.options.pointType;switch(i){case"circle":return this.drawCircle(e,t);case"rect":return this.drawRect(e,t);default:if(typeof i=="function")return i.call(this,e,t);throw new Error("Unknown "+i+" point type!")}},E.prototype.drawCircle=function(e,t){return this.nested.circle(this.options.pointSize).center(e,t)},E.prototype.drawRect=function(e,t){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(e,t)},E.prototype.updatePointSelection=function(){var e=this.getPointArray();this.pointSelection.set.each(function(t){this.cx()===e[t][0]&&this.cy()===e[t][1]||this.center(e[t][0],e[t][1])})},E.prototype.updateRectSelection=function(){var e=this,t=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:t.width,height:t.height}),this.options.points.length&&this.options.points.map(function(n,o){var r=e.pointCoords(n,t);e.rectSelection.set.get(o+1).center(r.x,r.y)}),this.options.rotationPoint){var i=this.rectSelection.set.length();this.rectSelection.set.get(i-1).center(t.width/2,20)}},E.prototype.selectRect=function(e){var t=this,i=this.el.bbox();function n(c){return function(h){(h=h||window.event).preventDefault?h.preventDefault():h.returnValue=!1,h.stopPropagation();var u=h.pageX||h.touches[0].pageX,p=h.pageY||h.touches[0].pageY;t.el.fire(c,{x:u,y:p,event:h})}}if(this.rectSelection.isSelected=e,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(i.width,i.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map(function(c,h){var u=t.pointCoords(c,i),p=t.drawPoint(u.x,u.y).attr("class",t.options.classPoints+"_"+c).on("mousedown",n(c)).on("touchstart",n(c));t.rectSelection.set.add(p)}),this.rectSelection.set.each(function(){this.addClass(t.options.classPoints)})),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var o=function(c){(c=c||window.event).preventDefault?c.preventDefault():c.returnValue=!1,c.stopPropagation();var h=c.pageX||c.touches[0].pageX,u=c.pageY||c.touches[0].pageY;t.el.fire("rot",{x:h,y:u,event:c})},r=this.drawPoint(i.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",o).on("mousedown",o);this.rectSelection.set.add(r)}},E.prototype.handler=function(){var e=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(e.x,e.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},E.prototype.observe=function(){var e=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver(function(){e.handler()}),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch{}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",function(){e.handler()})},E.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each(function(){this.remove()}),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each(function(){this.remove()}),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(e,t){return typeof e=="object"&&(t=e,e=!0),(this.remember("_selectHandler")||new E(this)).init(e===void 0||e,t||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function E(e){e.remember("_resizeHandler",this),this.el=e,this.parameters={},this.lastUpdateCall=null,this.p=e.doc().node.createSVGPoint()}E.prototype.transformPoint=function(e,t,i){return this.p.x=e-(this.offset.x-window.pageXOffset),this.p.y=t-(this.offset.y-window.pageYOffset),this.p.matrixTransform(i||this.m)},E.prototype._extractPosition=function(e){return{x:e.clientX!=null?e.clientX:e.touches[0].clientX,y:e.clientY!=null?e.clientY:e.touches[0].clientY}},E.prototype.init=function(e){var t=this;if(this.stop(),e!=="stop"){for(var i in this.options={},this.el.resize.defaults)this.options[i]=this.el.resize.defaults[i],e[i]!==void 0&&(this.options[i]=e[i]);this.el.on("lt.resize",function(n){t.resize(n||window.event)}),this.el.on("rt.resize",function(n){t.resize(n||window.event)}),this.el.on("rb.resize",function(n){t.resize(n||window.event)}),this.el.on("lb.resize",function(n){t.resize(n||window.event)}),this.el.on("t.resize",function(n){t.resize(n||window.event)}),this.el.on("r.resize",function(n){t.resize(n||window.event)}),this.el.on("b.resize",function(n){t.resize(n||window.event)}),this.el.on("l.resize",function(n){t.resize(n||window.event)}),this.el.on("rot.resize",function(n){t.resize(n||window.event)}),this.el.on("point.resize",function(n){t.resize(n||window.event)}),this.update()}},E.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},E.prototype.resize=function(e){var t=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var i=this._extractPosition(e.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(i.x,i.y),x:e.detail.x,y:e.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},this.el.type==="text"&&(this.parameters.fontSize=this.el.attr()["font-size"]),e.detail.i!==void 0){var n=this.el.array().valueOf();this.parameters.i=e.detail.i,this.parameters.pointCoords=[n[e.detail.i][0],n[e.detail.i][1]]}switch(e.type){case"lt":this.calc=function(o,r){var c=this.snapToGrid(o,r);if(this.parameters.box.width-c[0]>0&&this.parameters.box.height-c[1]>0){if(this.parameters.type==="text")return this.el.move(this.parameters.box.x+c[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-c[0]);c=this.checkAspectRatio(c),this.el.move(this.parameters.box.x+c[0],this.parameters.box.y+c[1]).size(this.parameters.box.width-c[0],this.parameters.box.height-c[1])}};break;case"rt":this.calc=function(o,r){var c=this.snapToGrid(o,r,2);if(this.parameters.box.width+c[0]>0&&this.parameters.box.height-c[1]>0){if(this.parameters.type==="text")return this.el.move(this.parameters.box.x-c[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+c[0]);c=this.checkAspectRatio(c,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+c[1]).size(this.parameters.box.width+c[0],this.parameters.box.height-c[1])}};break;case"rb":this.calc=function(o,r){var c=this.snapToGrid(o,r,0);if(this.parameters.box.width+c[0]>0&&this.parameters.box.height+c[1]>0){if(this.parameters.type==="text")return this.el.move(this.parameters.box.x-c[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+c[0]);c=this.checkAspectRatio(c),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+c[0],this.parameters.box.height+c[1])}};break;case"lb":this.calc=function(o,r){var c=this.snapToGrid(o,r,1);if(this.parameters.box.width-c[0]>0&&this.parameters.box.height+c[1]>0){if(this.parameters.type==="text")return this.el.move(this.parameters.box.x+c[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-c[0]);c=this.checkAspectRatio(c,!0),this.el.move(this.parameters.box.x+c[0],this.parameters.box.y).size(this.parameters.box.width-c[0],this.parameters.box.height+c[1])}};break;case"t":this.calc=function(o,r){var c=this.snapToGrid(o,r,2);if(this.parameters.box.height-c[1]>0){if(this.parameters.type==="text")return;this.el.move(this.parameters.box.x,this.parameters.box.y+c[1]).height(this.parameters.box.height-c[1])}};break;case"r":this.calc=function(o,r){var c=this.snapToGrid(o,r,0);if(this.parameters.box.width+c[0]>0){if(this.parameters.type==="text")return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+c[0])}};break;case"b":this.calc=function(o,r){var c=this.snapToGrid(o,r,0);if(this.parameters.box.height+c[1]>0){if(this.parameters.type==="text")return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+c[1])}};break;case"l":this.calc=function(o,r){var c=this.snapToGrid(o,r,1);if(this.parameters.box.width-c[0]>0){if(this.parameters.type==="text")return;this.el.move(this.parameters.box.x+c[0],this.parameters.box.y).width(this.parameters.box.width-c[0])}};break;case"rot":this.calc=function(o,r){var c=o+this.parameters.p.x,h=r+this.parameters.p.y,u=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),p=Math.atan2(h-this.parameters.box.y-this.parameters.box.height/2,c-this.parameters.box.x-this.parameters.box.width/2),g=this.parameters.rotation+180*(p-u)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(g-g%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(o,r){var c=this.snapToGrid(o,r,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),h=this.el.array().valueOf();h[this.parameters.i][0]=this.parameters.pointCoords[0]+c[0],h[this.parameters.i][1]=this.parameters.pointCoords[1]+c[1],this.el.plot(h)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:e}),SVG.on(window,"touchmove.resize",function(o){t.update(o||window.event)}),SVG.on(window,"touchend.resize",function(){t.done()}),SVG.on(window,"mousemove.resize",function(o){t.update(o||window.event)}),SVG.on(window,"mouseup.resize",function(){t.done()})},E.prototype.update=function(e){if(e){var t=this._extractPosition(e),i=this.transformPoint(t.x,t.y),n=i.x-this.parameters.p.x,o=i.y-this.parameters.p.y;this.lastUpdateCall=[n,o],this.calc(n,o),this.el.fire("resizing",{dx:n,dy:o,event:e})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},E.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},E.prototype.snapToGrid=function(e,t,i,n){var o;return n!==void 0?o=[(i+e)%this.options.snapToGrid,(n+t)%this.options.snapToGrid]:(i=i??3,o=[(this.parameters.box.x+e+(1&i?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+t+(2&i?0:this.parameters.box.height))%this.options.snapToGrid]),e<0&&(o[0]-=this.options.snapToGrid),t<0&&(o[1]-=this.options.snapToGrid),e-=Math.abs(o[0])<this.options.snapToGrid/2?o[0]:o[0]-(e<0?-this.options.snapToGrid:this.options.snapToGrid),t-=Math.abs(o[1])<this.options.snapToGrid/2?o[1]:o[1]-(t<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(e,t,i,n)},E.prototype.constraintToBox=function(e,t,i,n){var o,r,c=this.options.constraint||{};return n!==void 0?(o=i,r=n):(o=this.parameters.box.x+(1&i?0:this.parameters.box.width),r=this.parameters.box.y+(2&i?0:this.parameters.box.height)),c.minX!==void 0&&o+e<c.minX&&(e=c.minX-o),c.maxX!==void 0&&o+e>c.maxX&&(e=c.maxX-o),c.minY!==void 0&&r+t<c.minY&&(t=c.minY-r),c.maxY!==void 0&&r+t>c.maxY&&(t=c.maxY-r),[e,t]},E.prototype.checkAspectRatio=function(e,t){if(!this.options.saveAspectRatio)return e;var i=e.slice(),n=this.parameters.box.width/this.parameters.box.height,o=this.parameters.box.width+e[0],r=this.parameters.box.height-e[1],c=o/r;return c<n?(i[1]=o/n-this.parameters.box.height,t&&(i[1]=-i[1])):c>n&&(i[0]=this.parameters.box.width-r*n,t&&(i[0]=-i[0])),i},SVG.extend(SVG.Element,{resize:function(e){return(this.remember("_resizeHandler")||new E(this)).init(e||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),window.Apex===void 0&&(window.Apex={});var ua=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w}return y(E,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","isSeriesHidden","highlightSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new ke(this.ctx),this.ctx.axes=new an(this.ctx),this.ctx.core=new un(this.ctx.el,this.ctx),this.ctx.config=new Ht({}),this.ctx.data=new ri(this.ctx),this.ctx.grid=new na(this.ctx),this.ctx.graphics=new V(this.ctx),this.ctx.coreUtils=new he(this.ctx),this.ctx.crosshairs=new Pi(this.ctx),this.ctx.events=new sa(this.ctx),this.ctx.exports=new Lt(this.ctx),this.ctx.fill=new Ze(this.ctx),this.ctx.localization=new li(this.ctx),this.ctx.options=new At,this.ctx.responsive=new ra(this.ctx),this.ctx.series=new it(this.ctx),this.ctx.theme=new Ti(this.ctx),this.ctx.formatters=new We(this.ctx),this.ctx.titleSubtitle=new oa(this.ctx),this.ctx.legend=new ca(this.ctx),this.ctx.toolbar=new Ii(this.ctx),this.ctx.tooltip=new ui(this.ctx),this.ctx.dimensions=new Wt(this.ctx),this.ctx.updateHelpers=new fn(this.ctx),this.ctx.zoomPanSelection=new on(this.ctx),this.ctx.w.globals.tooltip=new ui(this.ctx)}}]),E}(),fa=function(){function E(e){m(this,E),this.ctx=e,this.w=e.w}return y(E,[{key:"clear",value:function(e){var t=e.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:t})}},{key:"killSVG",value:function(e){e.each(function(){this.removeClass("*"),this.off(),this.stop()},!0),e.ungroup(),e.clear()}},{key:"clearDomElements",value:function(e){var t=this,i=e.isUpdating,n=this.w.globals.dom.Paper.node;n.parentNode&&n.parentNode.parentNode&&!i&&(n.parentNode.parentNode.style.minHeight="unset");var o=this.w.globals.dom.baseEl;o&&this.ctx.eventList.forEach(function(c){o.removeEventListener(c,t.ctx.events.documentEvent)});var r=this.w.globals.dom;if(this.ctx.el!==null)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(r.Paper),r.Paper.remove(),r.elWrap=null,r.elGraphical=null,r.elLegendWrap=null,r.elLegendForeign=null,r.baseEl=null,r.elGridRect=null,r.elGridRectMask=null,r.elGridRectBarMask=null,r.elGridRectMarkerMask=null,r.elForecastMask=null,r.elNonForecastMask=null,r.elDefs=null}}]),E}(),Di=new WeakMap,xl=function(){function E(e,t){m(this,E),this.opts=t,this.ctx=this,this.w=new Xt(t).init(),this.el=e,this.w.globals.cuid=H.randomId(),this.w.globals.chartID=this.w.config.chart.id?H.escapeString(this.w.config.chart.id):this.w.globals.cuid,new ua(this).initModules(),this.create=H.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return y(E,[{key:"render",value:function(){var e=this;return new Promise(function(t,i){if(e.el!==null){Apex._chartInstances===void 0&&(Apex._chartInstances=[]),e.w.config.chart.id&&Apex._chartInstances.push({id:e.w.globals.chartID,group:e.w.config.chart.group,chart:e}),e.setLocale(e.w.config.chart.defaultLocale);var n=e.w.config.chart.events.beforeMount;typeof n=="function"&&n(e,e.w),e.events.fireEvent("beforeMount",[e,e.w]),window.addEventListener("resize",e.windowResizeHandler),function(x,v){var k=!1;if(x.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var A=x.getBoundingClientRect();x.style.display!=="none"&&A.width!==0||(k=!0)}var S=new ResizeObserver(function(M){k&&v.call(x,M),k=!0});x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(x.children).forEach(function(M){return S.observe(M)}):S.observe(x),Di.set(v,S)}(e.el.parentNode,e.parentResizeHandler);var o=e.el.getRootNode&&e.el.getRootNode(),r=H.is("ShadowRoot",o),c=e.el.ownerDocument,h=r?o.getElementById("apexcharts-css"):c.getElementById("apexcharts-css");if(!h){var u;(h=document.createElement("style")).id="apexcharts-css",h.textContent=`@keyframes opaque {
  0% {
    opacity: 0
  }

  to {
    opacity: 1
  }
}

@keyframes resizeanim {

  0%,
  to {
    opacity: 0
  }
}

.apexcharts-canvas {
  position: relative;
  direction: ltr !important;
  user-select: none
}

.apexcharts-canvas ::-webkit-scrollbar {
  -webkit-appearance: none;
  width: 6px
}

.apexcharts-canvas ::-webkit-scrollbar-thumb {
  border-radius: 4px;
  background-color: rgba(0, 0, 0, .5);
  box-shadow: 0 0 1px rgba(255, 255, 255, .5);
  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5)
}

.apexcharts-inner {
  position: relative
}

.apexcharts-text tspan {
  font-family: inherit
}

rect.legend-mouseover-inactive,
.legend-mouseover-inactive rect,
.legend-mouseover-inactive path,
.legend-mouseover-inactive circle,
.legend-mouseover-inactive line,
.legend-mouseover-inactive text.apexcharts-yaxis-title-text,
.legend-mouseover-inactive text.apexcharts-yaxis-label {
  transition: .15s ease all;
  opacity: .2
}

.apexcharts-legend-text {
  padding-left: 15px;
  margin-left: -15px;
}

.apexcharts-series-collapsed {
  opacity: 0
}

.apexcharts-tooltip {
  border-radius: 5px;
  box-shadow: 2px 2px 6px -4px #999;
  cursor: default;
  font-size: 14px;
  left: 62px;
  opacity: 0;
  pointer-events: none;
  position: absolute;
  top: 20px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  white-space: nowrap;
  z-index: 12;
  transition: .15s ease all
}

.apexcharts-tooltip.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-tooltip.apexcharts-theme-light {
  border: 1px solid #e3e3e3;
  background: rgba(255, 255, 255, .96)
}

.apexcharts-tooltip.apexcharts-theme-dark {
  color: #fff;
  background: rgba(30, 30, 30, .8)
}

.apexcharts-tooltip * {
  font-family: inherit
}

.apexcharts-tooltip-title {
  padding: 6px;
  font-size: 15px;
  margin-bottom: 4px
}

.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {
  background: #eceff1;
  border-bottom: 1px solid #ddd
}

.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {
  background: rgba(0, 0, 0, .7);
  border-bottom: 1px solid #333
}

.apexcharts-tooltip-text-goals-value,
.apexcharts-tooltip-text-y-value,
.apexcharts-tooltip-text-z-value {
  display: inline-block;
  margin-left: 5px;
  font-weight: 600
}

.apexcharts-tooltip-text-goals-label:empty,
.apexcharts-tooltip-text-goals-value:empty,
.apexcharts-tooltip-text-y-label:empty,
.apexcharts-tooltip-text-y-value:empty,
.apexcharts-tooltip-text-z-value:empty,
.apexcharts-tooltip-title:empty {
  display: none
}

.apexcharts-tooltip-text-goals-label,
.apexcharts-tooltip-text-goals-value {
  padding: 6px 0 5px
}

.apexcharts-tooltip-goals-group,
.apexcharts-tooltip-text-goals-label,
.apexcharts-tooltip-text-goals-value {
  display: flex
}

.apexcharts-tooltip-text-goals-label:not(:empty),
.apexcharts-tooltip-text-goals-value:not(:empty) {
  margin-top: -6px
}

.apexcharts-tooltip-marker {
  width: 12px;
  height: 12px;
  position: relative;
  top: 0;
  margin-right: 10px;
  border-radius: 50%
}

.apexcharts-tooltip-series-group {
  padding: 0 10px;
  display: none;
  text-align: left;
  justify-content: left;
  align-items: center
}

.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {
  opacity: 1
}

.apexcharts-tooltip-series-group.apexcharts-active,
.apexcharts-tooltip-series-group:last-child {
  padding-bottom: 4px
}

.apexcharts-tooltip-y-group {
  padding: 6px 0 5px
}

.apexcharts-custom-tooltip,
.apexcharts-tooltip-box {
  padding: 4px 8px
}

.apexcharts-tooltip-boxPlot {
  display: flex;
  flex-direction: column-reverse
}

.apexcharts-tooltip-box>div {
  margin: 4px 0
}

.apexcharts-tooltip-box span.value {
  font-weight: 700
}

.apexcharts-tooltip-rangebar {
  padding: 5px 8px
}

.apexcharts-tooltip-rangebar .category {
  font-weight: 600;
  color: #777
}

.apexcharts-tooltip-rangebar .series-name {
  font-weight: 700;
  display: block;
  margin-bottom: 5px
}

.apexcharts-xaxistooltip,
.apexcharts-yaxistooltip {
  opacity: 0;
  pointer-events: none;
  color: #373d3f;
  font-size: 13px;
  text-align: center;
  border-radius: 2px;
  position: absolute;
  z-index: 10;
  background: #eceff1;
  border: 1px solid #90a4ae
}

.apexcharts-xaxistooltip {
  padding: 9px 10px;
  transition: .15s ease all
}

.apexcharts-xaxistooltip.apexcharts-theme-dark {
  background: rgba(0, 0, 0, .7);
  border: 1px solid rgba(0, 0, 0, .5);
  color: #fff
}

.apexcharts-xaxistooltip:after,
.apexcharts-xaxistooltip:before {
  left: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none
}

.apexcharts-xaxistooltip:after {
  border-color: transparent;
  border-width: 6px;
  margin-left: -6px
}

.apexcharts-xaxistooltip:before {
  border-color: transparent;
  border-width: 7px;
  margin-left: -7px
}

.apexcharts-xaxistooltip-bottom:after,
.apexcharts-xaxistooltip-bottom:before {
  bottom: 100%
}

.apexcharts-xaxistooltip-top:after,
.apexcharts-xaxistooltip-top:before {
  top: 100%
}

.apexcharts-xaxistooltip-bottom:after {
  border-bottom-color: #eceff1
}

.apexcharts-xaxistooltip-bottom:before {
  border-bottom-color: #90a4ae
}

.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,
.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {
  border-bottom-color: rgba(0, 0, 0, .5)
}

.apexcharts-xaxistooltip-top:after {
  border-top-color: #eceff1
}

.apexcharts-xaxistooltip-top:before {
  border-top-color: #90a4ae
}

.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,
.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {
  border-top-color: rgba(0, 0, 0, .5)
}

.apexcharts-xaxistooltip.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-yaxistooltip {
  padding: 4px 10px
}

.apexcharts-yaxistooltip.apexcharts-theme-dark {
  background: rgba(0, 0, 0, .7);
  border: 1px solid rgba(0, 0, 0, .5);
  color: #fff
}

.apexcharts-yaxistooltip:after,
.apexcharts-yaxistooltip:before {
  top: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none
}

.apexcharts-yaxistooltip:after {
  border-color: transparent;
  border-width: 6px;
  margin-top: -6px
}

.apexcharts-yaxistooltip:before {
  border-color: transparent;
  border-width: 7px;
  margin-top: -7px
}

.apexcharts-yaxistooltip-left:after,
.apexcharts-yaxistooltip-left:before {
  left: 100%
}

.apexcharts-yaxistooltip-right:after,
.apexcharts-yaxistooltip-right:before {
  right: 100%
}

.apexcharts-yaxistooltip-left:after {
  border-left-color: #eceff1
}

.apexcharts-yaxistooltip-left:before {
  border-left-color: #90a4ae
}

.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,
.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {
  border-left-color: rgba(0, 0, 0, .5)
}

.apexcharts-yaxistooltip-right:after {
  border-right-color: #eceff1
}

.apexcharts-yaxistooltip-right:before {
  border-right-color: #90a4ae
}

.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,
.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {
  border-right-color: rgba(0, 0, 0, .5)
}

.apexcharts-yaxistooltip.apexcharts-active {
  opacity: 1
}

.apexcharts-yaxistooltip-hidden {
  display: none
}

.apexcharts-xcrosshairs,
.apexcharts-ycrosshairs {
  pointer-events: none;
  opacity: 0;
  transition: .15s ease all
}

.apexcharts-xcrosshairs.apexcharts-active,
.apexcharts-ycrosshairs.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-ycrosshairs-hidden {
  opacity: 0
}

.apexcharts-selection-rect {
  cursor: move
}

.svg_select_boundingRect,
.svg_select_points_rot {
  pointer-events: none;
  opacity: 0;
  visibility: hidden
}

.apexcharts-selection-rect+g .svg_select_boundingRect,
.apexcharts-selection-rect+g .svg_select_points_rot {
  opacity: 0;
  visibility: hidden
}

.apexcharts-selection-rect+g .svg_select_points_l,
.apexcharts-selection-rect+g .svg_select_points_r {
  cursor: ew-resize;
  opacity: 1;
  visibility: visible
}

.svg_select_points {
  fill: #efefef;
  stroke: #333;
  rx: 2
}

.apexcharts-svg.apexcharts-zoomable.hovering-zoom {
  cursor: crosshair
}

.apexcharts-svg.apexcharts-zoomable.hovering-pan {
  cursor: move
}

.apexcharts-menu-icon,
.apexcharts-pan-icon,
.apexcharts-reset-icon,
.apexcharts-selection-icon,
.apexcharts-toolbar-custom-icon,
.apexcharts-zoom-icon,
.apexcharts-zoomin-icon,
.apexcharts-zoomout-icon {
  cursor: pointer;
  width: 20px;
  height: 20px;
  line-height: 24px;
  color: #6e8192;
  text-align: center
}

.apexcharts-menu-icon svg,
.apexcharts-reset-icon svg,
.apexcharts-zoom-icon svg,
.apexcharts-zoomin-icon svg,
.apexcharts-zoomout-icon svg {
  fill: #6e8192
}

.apexcharts-selection-icon svg {
  fill: #444;
  transform: scale(.76)
}

.apexcharts-theme-dark .apexcharts-menu-icon svg,
.apexcharts-theme-dark .apexcharts-pan-icon svg,
.apexcharts-theme-dark .apexcharts-reset-icon svg,
.apexcharts-theme-dark .apexcharts-selection-icon svg,
.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,
.apexcharts-theme-dark .apexcharts-zoom-icon svg,
.apexcharts-theme-dark .apexcharts-zoomin-icon svg,
.apexcharts-theme-dark .apexcharts-zoomout-icon svg {
  fill: #f3f4f5
}

.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,
.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,
.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {
  fill: #008ffb
}

.apexcharts-theme-light .apexcharts-menu-icon:hover svg,
.apexcharts-theme-light .apexcharts-reset-icon:hover svg,
.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,
.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,
.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,
.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {
  fill: #333
}

.apexcharts-menu-icon,
.apexcharts-selection-icon {
  position: relative
}

.apexcharts-reset-icon {
  margin-left: 5px
}

.apexcharts-menu-icon,
.apexcharts-reset-icon,
.apexcharts-zoom-icon {
  transform: scale(.85)
}

.apexcharts-zoomin-icon,
.apexcharts-zoomout-icon {
  transform: scale(.7)
}

.apexcharts-zoomout-icon {
  margin-right: 3px
}

.apexcharts-pan-icon {
  transform: scale(.62);
  position: relative;
  left: 1px;
  top: 0
}

.apexcharts-pan-icon svg {
  fill: #fff;
  stroke: #6e8192;
  stroke-width: 2
}

.apexcharts-pan-icon.apexcharts-selected svg {
  stroke: #008ffb
}

.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {
  stroke: #333
}

.apexcharts-toolbar {
  position: absolute;
  z-index: 11;
  max-width: 176px;
  text-align: right;
  border-radius: 3px;
  padding: 0 6px 2px;
  display: flex;
  justify-content: space-between;
  align-items: center
}

.apexcharts-menu {
  background: #fff;
  position: absolute;
  top: 100%;
  border: 1px solid #ddd;
  border-radius: 3px;
  padding: 3px;
  right: 10px;
  opacity: 0;
  min-width: 110px;
  transition: .15s ease all;
  pointer-events: none
}

.apexcharts-menu.apexcharts-menu-open {
  opacity: 1;
  pointer-events: all;
  transition: .15s ease all
}

.apexcharts-menu-item {
  padding: 6px 7px;
  font-size: 12px;
  cursor: pointer
}

.apexcharts-theme-light .apexcharts-menu-item:hover {
  background: #eee
}

.apexcharts-theme-dark .apexcharts-menu {
  background: rgba(0, 0, 0, .7);
  color: #fff
}

@media screen and (min-width:768px) {
  .apexcharts-canvas:hover .apexcharts-toolbar {
    opacity: 1
  }
}

.apexcharts-canvas .apexcharts-element-hidden,
.apexcharts-datalabel.apexcharts-element-hidden,
.apexcharts-hide .apexcharts-series-points {
  opacity: 0;
}

.apexcharts-hidden-element-shown {
  opacity: 1;
  transition: 0.25s ease all;
}

.apexcharts-datalabel,
.apexcharts-datalabel-label,
.apexcharts-datalabel-value,
.apexcharts-datalabels,
.apexcharts-pie-label {
  cursor: default;
  pointer-events: none
}

.apexcharts-pie-label-delay {
  opacity: 0;
  animation-name: opaque;
  animation-duration: .3s;
  animation-fill-mode: forwards;
  animation-timing-function: ease
}

.apexcharts-radialbar-label {
  cursor: pointer;
}

.apexcharts-annotation-rect,
.apexcharts-area-series .apexcharts-area,
.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,
.apexcharts-gridline,
.apexcharts-line,
.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,
.apexcharts-point-annotation-label,
.apexcharts-radar-series path:not(.apexcharts-marker),
.apexcharts-radar-series polygon,
.apexcharts-toolbar svg,
.apexcharts-tooltip .apexcharts-marker,
.apexcharts-xaxis-annotation-label,
.apexcharts-yaxis-annotation-label,
.apexcharts-zoom-rect {
  pointer-events: none
}

.apexcharts-tooltip-active .apexcharts-marker {
  transition: .15s ease all
}

.resize-triggers {
  animation: 1ms resizeanim;
  visibility: hidden;
  opacity: 0;
  height: 100%;
  width: 100%;
  overflow: hidden
}

.contract-trigger:before,
.resize-triggers,
.resize-triggers>div {
  content: " ";
  display: block;
  position: absolute;
  top: 0;
  left: 0
}

.resize-triggers>div {
  height: 100%;
  width: 100%;
  background: #eee;
  overflow: auto
}

.contract-trigger:before {
  overflow: hidden;
  width: 200%;
  height: 200%
}

.apexcharts-bar-goals-markers {
  pointer-events: none
}

.apexcharts-bar-shadows {
  pointer-events: none
}

.apexcharts-rangebar-goals-markers {
  pointer-events: none
}
`;var p=((u=e.opts.chart)===null||u===void 0?void 0:u.nonce)||e.w.config.chart.nonce;p&&h.setAttribute("nonce",p),r?o.prepend(h):c.head.appendChild(h)}var g=e.create(e.w.config.series,{});if(!g)return t(e);e.mount(g).then(function(){typeof e.w.config.chart.events.mounted=="function"&&e.w.config.chart.events.mounted(e,e.w),e.events.fireEvent("mounted",[e,e.w]),t(g)}).catch(function(x){i(x)})}else i(new Error("Element not found"))})}},{key:"create",value:function(e,t){var i=this,n=this.w;new ua(this).initModules();var o=this.w.globals;if(o.noData=!1,o.animationEnded=!1,this.responsive.checkResponsiveConfig(t),n.config.xaxis.convertedCatToNumeric&&new Yt(n.config).convertCatToNumericXaxis(n.config,this.ctx),this.el===null||(this.core.setupElements(),n.config.chart.type==="treemap"&&(n.config.grid.show=!1,n.config.yaxis[0].show=!1),o.svgWidth===0))return o.animationEnded=!0,null;var r=e;e.forEach(function(x,v){x.hidden&&(r=i.legend.legendHelpers.getSeriesAfterCollapsing({realIndex:v}))});var c=he.checkComboSeries(r,n.config.chart.type);o.comboCharts=c.comboCharts,o.comboBarCount=c.comboBarCount;var h=r.every(function(x){return x.data&&x.data.length===0});(r.length===0||h&&o.collapsedSeries.length<1)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(r),this.theme.init(),new pt(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),o.noData&&o.collapsedSeries.length!==o.series.length&&!n.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),o.axisCharts&&(this.core.coreCalculations(),n.config.xaxis.type!=="category"&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=n.globals.minX,this.ctx.toolbar.maxX=n.globals.maxX),this.formatters.heatmapLabelFormatters(),new he(this).getLargestMarkerSize(),this.dimensions.plotCoords();var u=this.core.xySettings();this.grid.createGridMask();var p=this.core.plotChartType(r,u),g=new mt(this);return g.bringForward(),n.config.dataLabels.background.enabled&&g.dataLabelsBackground(),this.core.shiftGraphPosition(),{elGraph:p,xyRatios:u,dimensions:{plot:{left:n.globals.translateX,top:n.globals.translateY,width:n.globals.gridWidth,height:n.globals.gridHeight}}}}},{key:"mount",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,i=this,n=i.w;return new Promise(function(o,r){if(i.el===null)return r(new Error("Not enough data to display or target element not found"));(t===null||n.globals.allSeriesCollapsed)&&i.series.handleNoData(),i.grid=new na(i);var c,h,u=i.grid.drawGrid();if(i.annotations=new ia(i),i.annotations.drawImageAnnos(),i.annotations.drawTextAnnos(),n.config.grid.position==="back"&&(u&&n.globals.dom.elGraphical.add(u.el),u!=null&&(c=u.elGridBorders)!==null&&c!==void 0&&c.node&&n.globals.dom.elGraphical.add(u.elGridBorders)),Array.isArray(t.elGraph))for(var p=0;p<t.elGraph.length;p++)n.globals.dom.elGraphical.add(t.elGraph[p]);else n.globals.dom.elGraphical.add(t.elGraph);n.config.grid.position==="front"&&(u&&n.globals.dom.elGraphical.add(u.el),u!=null&&(h=u.elGridBorders)!==null&&h!==void 0&&h.node&&n.globals.dom.elGraphical.add(u.elGridBorders)),n.config.xaxis.crosshairs.position==="front"&&i.crosshairs.drawXCrosshairs(),n.config.yaxis[0].crosshairs.position==="front"&&i.crosshairs.drawYCrosshairs(),n.config.chart.type!=="treemap"&&i.axes.drawAxis(n.config.chart.type,u);var g=new Bt(e.ctx,u),x=new oi(e.ctx,u);if(u!==null&&(g.xAxisLabelCorrections(u.xAxisTickWidth),x.setYAxisTextAlignments(),n.config.yaxis.map(function(k,A){n.globals.ignoreYAxisIndexes.indexOf(A)===-1&&x.yAxisTitleRotate(A,k.opposite)})),i.annotations.drawAxesAnnotations(),!n.globals.noData){if(n.config.tooltip.enabled&&!n.globals.noData&&i.w.globals.tooltip.drawTooltip(t.xyRatios),n.globals.axisCharts&&(n.globals.isXNumeric||n.config.xaxis.convertedCatToNumeric||n.globals.isRangeBar))(n.config.chart.zoom.enabled||n.config.chart.selection&&n.config.chart.selection.enabled||n.config.chart.pan&&n.config.chart.pan.enabled)&&i.zoomPanSelection.init({xyRatios:t.xyRatios});else{var v=n.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(k){v[k]=!1})}n.config.chart.toolbar.show&&!n.globals.allSeriesCollapsed&&i.toolbar.createToolbar()}n.globals.memory.methodsToExec.length>0&&n.globals.memory.methodsToExec.forEach(function(k){k.method(k.params,!1,k.context)}),n.globals.axisCharts||n.globals.noData||i.core.resizeNonAxisCharts(),o(i)})}},{key:"destroy",value:function(){var e,t;window.removeEventListener("resize",this.windowResizeHandler),this.el.parentNode,e=this.parentResizeHandler,(t=Di.get(e))&&(t.disconnect(),Di.delete(e));var i=this.w.config.chart.id;i&&Apex._chartInstances.forEach(function(n,o){n.id===H.escapeString(i)&&Apex._chartInstances.splice(o,1)}),new fa(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0&&arguments[1],n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],o=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],r=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],c=this.w;return c.globals.selection=void 0,e.series&&(this.series.resetSeries(!1,!0,!1),e.series.length&&e.series[0].data&&(e.series=e.series.map(function(h,u){return t.updateHelpers._extendSeries(h,u)})),this.updateHelpers.revertDefaultAxisMinMax()),e.xaxis&&(e=this.updateHelpers.forceXAxisUpdate(e)),e.yaxis&&(e=this.updateHelpers.forceYAxisUpdate(e)),c.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),e.theme&&(e=this.theme.updateThemeOptions(e)),this.updateHelpers._updateOptions(e,i,n,o,r)}},{key:"updateSeries",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(e,t,i)}},{key:"appendSeries",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],n=this.w.config.series.slice();return n.push(e),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(n,t,i)}},{key:"appendData",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=this;i.w.globals.dataChanged=!0,i.series.getPreviousPaths();for(var n=i.w.config.series.slice(),o=0;o<n.length;o++)if(e[o]!==null&&e[o]!==void 0)for(var r=0;r<e[o].data.length;r++)n[o].data.push(e[o].data[r]);return i.w.config.series=n,t&&(i.w.globals.initialSeries=H.clone(i.w.config.series)),this.update()}},{key:"update",value:function(e){var t=this;return new Promise(function(i,n){new fa(t.ctx).clear({isUpdating:!0});var o=t.create(t.w.config.series,e);if(!o)return i(t);t.mount(o).then(function(){typeof t.w.config.chart.events.updated=="function"&&t.w.config.chart.events.updated(t,t.w),t.events.fireEvent("updated",[t,t.w]),t.w.globals.isDirty=!0,i(t)}).catch(function(r){n(r)})})}},{key:"getSyncedCharts",value:function(){var e=this.getGroupedCharts(),t=[this];return e.length&&(t=[],e.forEach(function(i){t.push(i)})),t}},{key:"getGroupedCharts",value:function(){var e=this;return Apex._chartInstances.filter(function(t){if(t.group)return!0}).map(function(t){return e.w.config.chart.group===t.group?t.chart:e})}},{key:"toggleSeries",value:function(e){return this.series.toggleSeries(e)}},{key:"highlightSeriesOnLegendHover",value:function(e,t){return this.series.toggleSeriesOnHover(e,t)}},{key:"showSeries",value:function(e){this.series.showSeries(e)}},{key:"hideSeries",value:function(e){this.series.hideSeries(e)}},{key:"highlightSeries",value:function(e){this.series.highlightSeries(e)}},{key:"isSeriesHidden",value:function(e){this.series.isSeriesHidden(e)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.series.resetSeries(e,t)}},{key:"addEventListener",value:function(e,t){this.events.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this.events.removeEventListener(e,t)}},{key:"addXaxisAnnotation",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,n=this;i&&(n=i),n.annotations.addXaxisAnnotationExternal(e,t,n)}},{key:"addYaxisAnnotation",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,n=this;i&&(n=i),n.annotations.addYaxisAnnotationExternal(e,t,n)}},{key:"addPointAnnotation",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,n=this;i&&(n=i),n.annotations.addPointAnnotationExternal(e,t,n)}},{key:"clearAnnotations",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,t=this;e&&(t=e),t.annotations.clearAnnotations(t)}},{key:"removeAnnotation",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,i=this;t&&(i=t),i.annotations.removeAnnotation(i,e)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(e,t){return this.coreUtils.getSeriesTotalsXRange(e,t)}},{key:"getHighestValueInSeries",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Li(this.ctx).getMinYMaxY(e).highestY}},{key:"getLowestValueInSeries",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Li(this.ctx).getMinYMaxY(e).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(e,t){return this.updateHelpers.toggleDataPointSelection(e,t)}},{key:"zoomX",value:function(e,t){this.ctx.toolbar.zoomUpdateOptions(e,t)}},{key:"setLocale",value:function(e){this.localization.setCurrentLocaleValues(e)}},{key:"dataURI",value:function(e){return new Lt(this.ctx).dataURI(e)}},{key:"exportToCSV",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Lt(this.ctx).exportToCSV(e)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var e=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){e.w.globals.resized=!0,e.w.globals.dataChanged=!1,e.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var e=this.w.config.chart.redrawOnWindowResize;typeof e=="function"&&(e=e()),e&&this._windowResize()}}],[{key:"getChartByID",value:function(e){var t=H.escapeString(e);if(Apex._chartInstances){var i=Apex._chartInstances.filter(function(n){return n.id===t})[0];return i&&i.chart}}},{key:"initOnLoad",value:function(){for(var e=document.querySelectorAll("[data-apexcharts]"),t=0;t<e.length;t++)new E(e[t],JSON.parse(e[t].getAttribute("data-options"))).render()}},{key:"exec",value:function(e,t){var i=this.getChartByID(e);if(i){i.w.globals.isExecCalled=!0;var n=null;if(i.publicMethods.indexOf(t)!==-1){for(var o=arguments.length,r=new Array(o>2?o-2:0),c=2;c<o;c++)r[c-2]=arguments[c];n=i[t].apply(i,r)}return n}}},{key:"merge",value:function(e,t){return H.extend(e,t)}}]),E}();s.exports=xl})(ns,ns.exports);var Uf=ns.exports;const $f=jf(Uf);var Pn=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],pi={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(s){return typeof console<"u"&&console.warn(s)},getWeek:function(s){var l=new Date(s.getTime());l.setHours(0,0,0,0),l.setDate(l.getDate()+3-(l.getDay()+6)%7);var a=new Date(l.getFullYear(),0,4);return 1+Math.round(((l.getTime()-a.getTime())/864e5-3+(a.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},Ui={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(s){var l=s%100;if(l>3&&l<21)return"th";switch(l%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},nt=function(s,l){return l===void 0&&(l=2),("000"+s).slice(l*-1)},ft=function(s){return s===!0?1:0};function Ar(s,l){var a;return function(){var f=this,m=arguments;clearTimeout(a),a=setTimeout(function(){return s.apply(f,m)},l)}}var Tn=function(s){return s instanceof Array?s:[s]};function Qe(s,l,a){if(a===!0)return s.classList.add(l);s.classList.remove(l)}function Me(s,l,a){var f=window.document.createElement(s);return l=l||"",a=a||"",f.className=l,a!==void 0&&(f.textContent=a),f}function ka(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function pl(s,l){if(l(s))return s;if(s.parentNode)return pl(s.parentNode,l)}function Ca(s,l){var a=Me("div","numInputWrapper"),f=Me("input","numInput "+s),m=Me("span","arrowUp"),w=Me("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?f.type="number":(f.type="text",f.pattern="\\d*"),l!==void 0)for(var y in l)f.setAttribute(y,l[y]);return a.appendChild(f),a.appendChild(m),a.appendChild(w),a}function ct(s){try{if(typeof s.composedPath=="function"){var l=s.composedPath();return l[0]}return s.target}catch{return s.target}}var In=function(){},Ha=function(s,l,a){return a.months[l?"shorthand":"longhand"][s]},qf={D:In,F:function(s,l,a){s.setMonth(a.months.longhand.indexOf(l))},G:function(s,l){s.setHours((s.getHours()>=12?12:0)+parseFloat(l))},H:function(s,l){s.setHours(parseFloat(l))},J:function(s,l){s.setDate(parseFloat(l))},K:function(s,l,a){s.setHours(s.getHours()%12+12*ft(new RegExp(a.amPM[1],"i").test(l)))},M:function(s,l,a){s.setMonth(a.months.shorthand.indexOf(l))},S:function(s,l){s.setSeconds(parseFloat(l))},U:function(s,l){return new Date(parseFloat(l)*1e3)},W:function(s,l,a){var f=parseInt(l),m=new Date(s.getFullYear(),0,2+(f-1)*7,0,0,0,0);return m.setDate(m.getDate()-m.getDay()+a.firstDayOfWeek),m},Y:function(s,l){s.setFullYear(parseFloat(l))},Z:function(s,l){return new Date(l)},d:function(s,l){s.setDate(parseFloat(l))},h:function(s,l){s.setHours((s.getHours()>=12?12:0)+parseFloat(l))},i:function(s,l){s.setMinutes(parseFloat(l))},j:function(s,l){s.setDate(parseFloat(l))},l:In,m:function(s,l){s.setMonth(parseFloat(l)-1)},n:function(s,l){s.setMonth(parseFloat(l)-1)},s:function(s,l){s.setSeconds(parseFloat(l))},u:function(s,l){return new Date(parseFloat(l))},w:In,y:function(s,l){s.setFullYear(2e3+parseFloat(l))}},$t={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Wi={Z:function(s){return s.toISOString()},D:function(s,l,a){return l.weekdays.shorthand[Wi.w(s,l,a)]},F:function(s,l,a){return Ha(Wi.n(s,l,a)-1,!1,l)},G:function(s,l,a){return nt(Wi.h(s,l,a))},H:function(s){return nt(s.getHours())},J:function(s,l){return l.ordinal!==void 0?s.getDate()+l.ordinal(s.getDate()):s.getDate()},K:function(s,l){return l.amPM[ft(s.getHours()>11)]},M:function(s,l){return Ha(s.getMonth(),!0,l)},S:function(s){return nt(s.getSeconds())},U:function(s){return s.getTime()/1e3},W:function(s,l,a){return a.getWeek(s)},Y:function(s){return nt(s.getFullYear(),4)},d:function(s){return nt(s.getDate())},h:function(s){return s.getHours()%12?s.getHours()%12:12},i:function(s){return nt(s.getMinutes())},j:function(s){return s.getDate()},l:function(s,l){return l.weekdays.longhand[s.getDay()]},m:function(s){return nt(s.getMonth()+1)},n:function(s){return s.getMonth()+1},s:function(s){return s.getSeconds()},u:function(s){return s.getTime()},w:function(s){return s.getDay()},y:function(s){return String(s.getFullYear()).substring(2)}},ml=function(s){var l=s.config,a=l===void 0?pi:l,f=s.l10n,m=f===void 0?Ui:f,w=s.isMobile,y=w===void 0?!1:w;return function(T,O,R){var z=R||m;return a.formatDate!==void 0&&!y?a.formatDate(T,O,z):O.split("").map(function(B,U,re){return Wi[B]&&re[U-1]!=="\\"?Wi[B](T,z,a):B!=="\\"?B:""}).join("")}},ss=function(s){var l=s.config,a=l===void 0?pi:l,f=s.l10n,m=f===void 0?Ui:f;return function(w,y,T,O){if(!(w!==0&&!w)){var R=O||m,z,B=w;if(w instanceof Date)z=new Date(w.getTime());else if(typeof w!="string"&&w.toFixed!==void 0)z=new Date(w);else if(typeof w=="string"){var U=y||(a||pi).dateFormat,re=String(w).trim();if(re==="today")z=new Date,T=!0;else if(a&&a.parseDate)z=a.parseDate(w,U);else if(/Z$/.test(re)||/GMT$/.test(re))z=new Date(w);else{for(var X=void 0,ee=[],q=0,ie=0,te="";q<U.length;q++){var ae=U[q],be=ae==="\\",H=U[q-1]==="\\"||be;if($t[ae]&&!H){te+=$t[ae];var ke=new RegExp(te).exec(w);ke&&(X=!0)&&ee[ae!=="Y"?"push":"unshift"]({fn:qf[ae],val:ke[++ie]})}else be||(te+=".")}z=!a||!a.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),ee.forEach(function(le){var V=le.fn,he=le.val;return z=V(z,he,R)||z}),z=X?z:void 0}}if(!(z instanceof Date&&!isNaN(z.getTime()))){a.errorHandler(new Error("Invalid date provided: "+B));return}return T===!0&&z.setHours(0,0,0,0),z}}};function ht(s,l,a){return a===void 0&&(a=!0),a!==!1?new Date(s.getTime()).setHours(0,0,0,0)-new Date(l.getTime()).setHours(0,0,0,0):s.getTime()-l.getTime()}var Zf=function(s,l,a){return s>Math.min(l,a)&&s<Math.max(l,a)},_n=function(s,l,a){return s*3600+l*60+a},Kf=function(s){var l=Math.floor(s/3600),a=(s-l*3600)/60;return[l,a,s-l*3600-a*60]},Jf={DAY:864e5};function On(s){var l=s.defaultHour,a=s.defaultMinute,f=s.defaultSeconds;if(s.minDate!==void 0){var m=s.minDate.getHours(),w=s.minDate.getMinutes(),y=s.minDate.getSeconds();l<m&&(l=m),l===m&&a<w&&(a=w),l===m&&a===w&&f<y&&(f=s.minDate.getSeconds())}if(s.maxDate!==void 0){var T=s.maxDate.getHours(),O=s.maxDate.getMinutes();l=Math.min(l,T),l===T&&(a=Math.min(O,a)),l===T&&a===O&&(f=s.maxDate.getSeconds())}return{hours:l,minutes:a,seconds:f}}typeof Object.assign!="function"&&(Object.assign=function(s){for(var l=[],a=1;a<arguments.length;a++)l[a-1]=arguments[a];if(!s)throw TypeError("Cannot convert undefined or null to object");for(var f=function(T){T&&Object.keys(T).forEach(function(O){return s[O]=T[O]})},m=0,w=l;m<w.length;m++){var y=w[m];f(y)}return s});var $e=function(){return $e=Object.assign||function(s){for(var l,a=1,f=arguments.length;a<f;a++){l=arguments[a];for(var m in l)Object.prototype.hasOwnProperty.call(l,m)&&(s[m]=l[m])}return s},$e.apply(this,arguments)},kr=function(){for(var s=0,l=0,a=arguments.length;l<a;l++)s+=arguments[l].length;for(var f=Array(s),m=0,l=0;l<a;l++)for(var w=arguments[l],y=0,T=w.length;y<T;y++,m++)f[m]=w[y];return f},Qf=300;function eg(s,l){var a={config:$e($e({},pi),Xe.defaultConfig),l10n:Ui};a.parseDate=ss({config:a.config,l10n:a.l10n}),a._handlers=[],a.pluginElements=[],a.loadedPlugins=[],a._bind=ee,a._setHoursFromDate=U,a._positionCalendar=li,a.changeMonth=Nt,a.changeYear=pt,a.clear=Yt,a.close=Ht,a.onMouseOver=Lt,a._createElement=Me,a.createDay=ke,a.destroy=aa,a.isEnabled=kt,a.jumpToDate=te,a.updateValue=xt,a.open=na,a.redraw=ra,a.set=nn,a.setDate=sn,a.toggle=ha;function f(){a.utils={getDaysInMonth:function(D,F){return D===void 0&&(D=a.currentMonth),F===void 0&&(F=a.currentYear),D===1&&(F%4===0&&F%100!==0||F%400===0)?29:a.l10n.daysInMonth[D]}}}function m(){a.element=a.input=s,a.isOpen=!1,Li(),sa(),ca(),rn(),f(),a.isMobile||H(),ie(),(a.selectedDates.length||a.config.noCalendar)&&(a.config.enableTime&&U(a.config.noCalendar?a.latestSelectedDateObj:void 0),xt(!1)),T();var D=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!a.isMobile&&D&&li(),Oe("onReady")}function w(){var D;return((D=a.calendarContainer)===null||D===void 0?void 0:D.getRootNode()).activeElement||document.activeElement}function y(D){return D.bind(a)}function T(){var D=a.config;D.weekNumbers===!1&&D.showMonths===1||D.noCalendar!==!0&&window.requestAnimationFrame(function(){if(a.calendarContainer!==void 0&&(a.calendarContainer.style.visibility="hidden",a.calendarContainer.style.display="block"),a.daysContainer!==void 0){var F=(a.days.offsetWidth+1)*D.showMonths;a.daysContainer.style.width=F+"px",a.calendarContainer.style.width=F+(a.weekWrapper!==void 0?a.weekWrapper.offsetWidth:0)+"px",a.calendarContainer.style.removeProperty("visibility"),a.calendarContainer.style.removeProperty("display")}})}function O(D){if(a.selectedDates.length===0){var F=a.config.minDate===void 0||ht(new Date,a.config.minDate)>=0?new Date:new Date(a.config.minDate.getTime()),W=On(a.config);F.setHours(W.hours,W.minutes,W.seconds,F.getMilliseconds()),a.selectedDates=[F],a.latestSelectedDateObj=F}D!==void 0&&D.type!=="blur"&&_t(D);var K=a._input.value;B(),xt(),a._input.value!==K&&a._debouncedChange()}function R(D,F){return D%12+12*ft(F===a.l10n.amPM[1])}function z(D){switch(D%24){case 0:case 12:return 12;default:return D%12}}function B(){if(!(a.hourElement===void 0||a.minuteElement===void 0)){var D=(parseInt(a.hourElement.value.slice(-2),10)||0)%24,F=(parseInt(a.minuteElement.value,10)||0)%60,W=a.secondElement!==void 0?(parseInt(a.secondElement.value,10)||0)%60:0;a.amPM!==void 0&&(D=R(D,a.amPM.textContent));var K=a.config.minTime!==void 0||a.config.minDate&&a.minDateHasTime&&a.latestSelectedDateObj&&ht(a.latestSelectedDateObj,a.config.minDate,!0)===0,ne=a.config.maxTime!==void 0||a.config.maxDate&&a.maxDateHasTime&&a.latestSelectedDateObj&&ht(a.latestSelectedDateObj,a.config.maxDate,!0)===0;if(a.config.maxTime!==void 0&&a.config.minTime!==void 0&&a.config.minTime>a.config.maxTime){var oe=_n(a.config.minTime.getHours(),a.config.minTime.getMinutes(),a.config.minTime.getSeconds()),ve=_n(a.config.maxTime.getHours(),a.config.maxTime.getMinutes(),a.config.maxTime.getSeconds()),fe=_n(D,F,W);if(fe>ve&&fe<oe){var we=Kf(oe);D=we[0],F=we[1],W=we[2]}}else{if(ne){var de=a.config.maxTime!==void 0?a.config.maxTime:a.config.maxDate;D=Math.min(D,de.getHours()),D===de.getHours()&&(F=Math.min(F,de.getMinutes())),F===de.getMinutes()&&(W=Math.min(W,de.getSeconds()))}if(K){var me=a.config.minTime!==void 0?a.config.minTime:a.config.minDate;D=Math.max(D,me.getHours()),D===me.getHours()&&F<me.getMinutes()&&(F=me.getMinutes()),F===me.getMinutes()&&(W=Math.max(W,me.getSeconds()))}}re(D,F,W)}}function U(D){var F=D||a.latestSelectedDateObj;F&&F instanceof Date&&re(F.getHours(),F.getMinutes(),F.getSeconds())}function re(D,F,W){a.latestSelectedDateObj!==void 0&&a.latestSelectedDateObj.setHours(D%24,F,W||0,0),!(!a.hourElement||!a.minuteElement||a.isMobile)&&(a.hourElement.value=nt(a.config.time_24hr?D:(12+D)%12+12*ft(D%12===0)),a.minuteElement.value=nt(F),a.amPM!==void 0&&(a.amPM.textContent=a.l10n.amPM[ft(D>=12)]),a.secondElement!==void 0&&(a.secondElement.value=nt(W)))}function X(D){var F=ct(D),W=parseInt(F.value)+(D.delta||0);(W/1e3>1||D.key==="Enter"&&!/[^\d]/.test(W.toString()))&&pt(W)}function ee(D,F,W,K){if(F instanceof Array)return F.forEach(function(ne){return ee(D,ne,W,K)});if(D instanceof Array)return D.forEach(function(ne){return ee(ne,F,W,K)});D.addEventListener(F,W,K),a._handlers.push({remove:function(){return D.removeEventListener(F,W,K)}})}function q(){Oe("onChange")}function ie(){if(a.config.wrap&&["open","close","toggle","clear"].forEach(function(W){Array.prototype.forEach.call(a.element.querySelectorAll("[data-"+W+"]"),function(K){return ee(K,"click",a[W])})}),a.isMobile){on();return}var D=Ar(Bt,50);if(a._debouncedChange=Ar(q,Qf),a.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&ee(a.daysContainer,"mouseover",function(W){a.config.mode==="range"&&Lt(ct(W))}),ee(a._input,"keydown",ri),a.calendarContainer!==void 0&&ee(a.calendarContainer,"keydown",ri),!a.config.inline&&!a.config.static&&ee(window,"resize",D),window.ontouchstart!==void 0?ee(window.document,"touchstart",Ze):ee(window.document,"mousedown",Ze),ee(window.document,"focus",Ze,{capture:!0}),a.config.clickOpens===!0&&(ee(a._input,"focus",a.open),ee(a._input,"click",a.open)),a.daysContainer!==void 0&&(ee(a.monthNav,"click",cn),ee(a.monthNav,["keyup","increment"],X),ee(a.daysContainer,"click",oa)),a.timeContainer!==void 0&&a.minuteElement!==void 0&&a.hourElement!==void 0){var F=function(W){return ct(W).select()};ee(a.timeContainer,["increment"],O),ee(a.timeContainer,"blur",O,{capture:!0}),ee(a.timeContainer,"click",ae),ee([a.hourElement,a.minuteElement],["focus","click"],F),a.secondElement!==void 0&&ee(a.secondElement,"focus",function(){return a.secondElement&&a.secondElement.select()}),a.amPM!==void 0&&ee(a.amPM,"click",function(W){O(W)})}a.config.allowInput&&ee(a._input,"blur",it)}function te(D,F){var W=D!==void 0?a.parseDate(D):a.latestSelectedDateObj||(a.config.minDate&&a.config.minDate>a.now?a.config.minDate:a.config.maxDate&&a.config.maxDate<a.now?a.config.maxDate:a.now),K=a.currentYear,ne=a.currentMonth;try{W!==void 0&&(a.currentYear=W.getFullYear(),a.currentMonth=W.getMonth())}catch(oe){oe.message="Invalid date supplied: "+W,a.config.errorHandler(oe)}F&&a.currentYear!==K&&(Oe("onYearChange"),We()),F&&(a.currentYear!==K||a.currentMonth!==ne)&&Oe("onMonthChange"),a.redraw()}function ae(D){var F=ct(D);~F.className.indexOf("arrow")&&be(D,F.classList.contains("arrowUp")?1:-1)}function be(D,F,W){var K=D&&ct(D),ne=W||K&&K.parentNode&&K.parentNode.firstChild,oe=hi("increment");oe.delta=F,ne&&ne.dispatchEvent(oe)}function H(){var D=window.document.createDocumentFragment();if(a.calendarContainer=Me("div","flatpickr-calendar"),a.calendarContainer.tabIndex=-1,!a.config.noCalendar){if(D.appendChild(tn()),a.innerContainer=Me("div","flatpickr-innerContainer"),a.config.weekNumbers){var F=Mi(),W=F.weekWrapper,K=F.weekNumbers;a.innerContainer.appendChild(W),a.weekNumbers=K,a.weekWrapper=W}a.rContainer=Me("div","flatpickr-rContainer"),a.rContainer.appendChild(At()),a.daysContainer||(a.daysContainer=Me("div","flatpickr-days"),a.daysContainer.tabIndex=-1),_e(),a.rContainer.appendChild(a.daysContainer),a.innerContainer.appendChild(a.rContainer),D.appendChild(a.innerContainer)}a.config.enableTime&&D.appendChild(ta()),Qe(a.calendarContainer,"rangeMode",a.config.mode==="range"),Qe(a.calendarContainer,"animate",a.config.animate===!0),Qe(a.calendarContainer,"multiMonth",a.config.showMonths>1),a.calendarContainer.appendChild(D);var ne=a.config.appendTo!==void 0&&a.config.appendTo.nodeType!==void 0;if((a.config.inline||a.config.static)&&(a.calendarContainer.classList.add(a.config.inline?"inline":"static"),a.config.inline&&(!ne&&a.element.parentNode?a.element.parentNode.insertBefore(a.calendarContainer,a._input.nextSibling):a.config.appendTo!==void 0&&a.config.appendTo.appendChild(a.calendarContainer)),a.config.static)){var oe=Me("div","flatpickr-wrapper");a.element.parentNode&&a.element.parentNode.insertBefore(oe,a.element),oe.appendChild(a.element),a.altInput&&oe.appendChild(a.altInput),oe.appendChild(a.calendarContainer)}!a.config.static&&!a.config.inline&&(a.config.appendTo!==void 0?a.config.appendTo:window.document.body).appendChild(a.calendarContainer)}function ke(D,F,W,K){var ne=kt(F,!0),oe=Me("span",D,F.getDate().toString());return oe.dateObj=F,oe.$i=K,oe.setAttribute("aria-label",a.formatDate(F,a.config.ariaDateFormat)),D.indexOf("hidden")===-1&&ht(F,a.now)===0&&(a.todayDateElem=oe,oe.classList.add("today"),oe.setAttribute("aria-current","date")),ne?(oe.tabIndex=-1,_i(F)&&(oe.classList.add("selected"),a.selectedDateElem=oe,a.config.mode==="range"&&(Qe(oe,"startRange",a.selectedDates[0]&&ht(F,a.selectedDates[0],!0)===0),Qe(oe,"endRange",a.selectedDates[1]&&ht(F,a.selectedDates[1],!0)===0),D==="nextMonthDay"&&oe.classList.add("inRange")))):oe.classList.add("flatpickr-disabled"),a.config.mode==="range"&&ln(F)&&!_i(F)&&oe.classList.add("inRange"),a.weekNumbers&&a.config.showMonths===1&&D!=="prevMonthDay"&&K%7===6&&a.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+a.config.getWeek(F)+"</span>"),Oe("onDayCreate",oe),oe}function le(D){D.focus(),a.config.mode==="range"&&Lt(D)}function V(D){for(var F=D>0?0:a.config.showMonths-1,W=D>0?a.config.showMonths:-1,K=F;K!=W;K+=D)for(var ne=a.daysContainer.children[K],oe=D>0?0:ne.children.length-1,ve=D>0?ne.children.length:-1,fe=oe;fe!=ve;fe+=D){var we=ne.children[fe];if(we.className.indexOf("hidden")===-1&&kt(we.dateObj))return we}}function he(D,F){for(var W=D.className.indexOf("Month")===-1?D.dateObj.getMonth():a.currentMonth,K=F>0?a.config.showMonths:-1,ne=F>0?1:-1,oe=W-a.currentMonth;oe!=K;oe+=ne)for(var ve=a.daysContainer.children[oe],fe=W-a.currentMonth===oe?D.$i+F:F<0?ve.children.length-1:0,we=ve.children.length,de=fe;de>=0&&de<we&&de!=(F>0?we:-1);de+=ne){var me=ve.children[de];if(me.className.indexOf("hidden")===-1&&kt(me.dateObj)&&Math.abs(D.$i-de)>=Math.abs(F))return le(me)}a.changeMonth(ne),Le(V(ne),0)}function Le(D,F){var W=w(),K=mt(W||document.body),ne=D!==void 0?D:K?W:a.selectedDateElem!==void 0&&mt(a.selectedDateElem)?a.selectedDateElem:a.todayDateElem!==void 0&&mt(a.todayDateElem)?a.todayDateElem:V(F>0?1:-1);ne===void 0?a._input.focus():K?he(ne,F):le(ne)}function Ce(D,F){for(var W=(new Date(D,F,1).getDay()-a.l10n.firstDayOfWeek+7)%7,K=a.utils.getDaysInMonth((F-1+12)%12,D),ne=a.utils.getDaysInMonth(F,D),oe=window.document.createDocumentFragment(),ve=a.config.showMonths>1,fe=ve?"prevMonthDay hidden":"prevMonthDay",we=ve?"nextMonthDay hidden":"nextMonthDay",de=K+1-W,me=0;de<=K;de++,me++)oe.appendChild(ke("flatpickr-day "+fe,new Date(D,F-1,de),de,me));for(de=1;de<=ne;de++,me++)oe.appendChild(ke("flatpickr-day",new Date(D,F,de),de,me));for(var Pe=ne+1;Pe<=42-W&&(a.config.showMonths===1||me%7!==0);Pe++,me++)oe.appendChild(ke("flatpickr-day "+we,new Date(D,F+1,Pe%ne),Pe,me));var ut=Me("div","dayContainer");return ut.appendChild(oe),ut}function _e(){if(a.daysContainer!==void 0){ka(a.daysContainer),a.weekNumbers&&ka(a.weekNumbers);for(var D=document.createDocumentFragment(),F=0;F<a.config.showMonths;F++){var W=new Date(a.currentYear,a.currentMonth,1);W.setMonth(a.currentMonth+F),D.appendChild(Ce(W.getFullYear(),W.getMonth()))}a.daysContainer.appendChild(D),a.days=a.daysContainer.firstChild,a.config.mode==="range"&&a.selectedDates.length===1&&Lt()}}function We(){if(!(a.config.showMonths>1||a.config.monthSelectorType!=="dropdown")){var D=function(K){return a.config.minDate!==void 0&&a.currentYear===a.config.minDate.getFullYear()&&K<a.config.minDate.getMonth()?!1:!(a.config.maxDate!==void 0&&a.currentYear===a.config.maxDate.getFullYear()&&K>a.config.maxDate.getMonth())};a.monthsDropdownContainer.tabIndex=-1,a.monthsDropdownContainer.innerHTML="";for(var F=0;F<12;F++)if(D(F)){var W=Me("option","flatpickr-monthDropdown-month");W.value=new Date(a.currentYear,F).getMonth().toString(),W.textContent=Ha(F,a.config.shorthandCurrentMonth,a.l10n),W.tabIndex=-1,a.currentMonth===F&&(W.selected=!0),a.monthsDropdownContainer.appendChild(W)}}}function dt(){var D=Me("div","flatpickr-month"),F=window.document.createDocumentFragment(),W;a.config.showMonths>1||a.config.monthSelectorType==="static"?W=Me("span","cur-month"):(a.monthsDropdownContainer=Me("select","flatpickr-monthDropdown-months"),a.monthsDropdownContainer.setAttribute("aria-label",a.l10n.monthAriaLabel),ee(a.monthsDropdownContainer,"change",function(ve){var fe=ct(ve),we=parseInt(fe.value,10);a.changeMonth(we-a.currentMonth),Oe("onMonthChange")}),We(),W=a.monthsDropdownContainer);var K=Ca("cur-year",{tabindex:"-1"}),ne=K.getElementsByTagName("input")[0];ne.setAttribute("aria-label",a.l10n.yearAriaLabel),a.config.minDate&&ne.setAttribute("min",a.config.minDate.getFullYear().toString()),a.config.maxDate&&(ne.setAttribute("max",a.config.maxDate.getFullYear().toString()),ne.disabled=!!a.config.minDate&&a.config.minDate.getFullYear()===a.config.maxDate.getFullYear());var oe=Me("div","flatpickr-current-month");return oe.appendChild(W),oe.appendChild(K),F.appendChild(oe),D.appendChild(F),{container:D,yearElement:ne,monthElement:W}}function si(){ka(a.monthNav),a.monthNav.appendChild(a.prevMonthNav),a.config.showMonths&&(a.yearElements=[],a.monthElements=[]);for(var D=a.config.showMonths;D--;){var F=dt();a.yearElements.push(F.yearElement),a.monthElements.push(F.monthElement),a.monthNav.appendChild(F.container)}a.monthNav.appendChild(a.nextMonthNav)}function tn(){return a.monthNav=Me("div","flatpickr-months"),a.yearElements=[],a.monthElements=[],a.prevMonthNav=Me("span","flatpickr-prev-month"),a.prevMonthNav.innerHTML=a.config.prevArrow,a.nextMonthNav=Me("span","flatpickr-next-month"),a.nextMonthNav.innerHTML=a.config.nextArrow,si(),Object.defineProperty(a,"_hidePrevMonthArrow",{get:function(){return a.__hidePrevMonthArrow},set:function(D){a.__hidePrevMonthArrow!==D&&(Qe(a.prevMonthNav,"flatpickr-disabled",D),a.__hidePrevMonthArrow=D)}}),Object.defineProperty(a,"_hideNextMonthArrow",{get:function(){return a.__hideNextMonthArrow},set:function(D){a.__hideNextMonthArrow!==D&&(Qe(a.nextMonthNav,"flatpickr-disabled",D),a.__hideNextMonthArrow=D)}}),a.currentYearElement=a.yearElements[0],di(),a.monthNav}function ta(){a.calendarContainer.classList.add("hasTime"),a.config.noCalendar&&a.calendarContainer.classList.add("noCalendar");var D=On(a.config);a.timeContainer=Me("div","flatpickr-time"),a.timeContainer.tabIndex=-1;var F=Me("span","flatpickr-time-separator",":"),W=Ca("flatpickr-hour",{"aria-label":a.l10n.hourAriaLabel});a.hourElement=W.getElementsByTagName("input")[0];var K=Ca("flatpickr-minute",{"aria-label":a.l10n.minuteAriaLabel});if(a.minuteElement=K.getElementsByTagName("input")[0],a.hourElement.tabIndex=a.minuteElement.tabIndex=-1,a.hourElement.value=nt(a.latestSelectedDateObj?a.latestSelectedDateObj.getHours():a.config.time_24hr?D.hours:z(D.hours)),a.minuteElement.value=nt(a.latestSelectedDateObj?a.latestSelectedDateObj.getMinutes():D.minutes),a.hourElement.setAttribute("step",a.config.hourIncrement.toString()),a.minuteElement.setAttribute("step",a.config.minuteIncrement.toString()),a.hourElement.setAttribute("min",a.config.time_24hr?"0":"1"),a.hourElement.setAttribute("max",a.config.time_24hr?"23":"12"),a.hourElement.setAttribute("maxlength","2"),a.minuteElement.setAttribute("min","0"),a.minuteElement.setAttribute("max","59"),a.minuteElement.setAttribute("maxlength","2"),a.timeContainer.appendChild(W),a.timeContainer.appendChild(F),a.timeContainer.appendChild(K),a.config.time_24hr&&a.timeContainer.classList.add("time24hr"),a.config.enableSeconds){a.timeContainer.classList.add("hasSeconds");var ne=Ca("flatpickr-second");a.secondElement=ne.getElementsByTagName("input")[0],a.secondElement.value=nt(a.latestSelectedDateObj?a.latestSelectedDateObj.getSeconds():D.seconds),a.secondElement.setAttribute("step",a.minuteElement.getAttribute("step")),a.secondElement.setAttribute("min","0"),a.secondElement.setAttribute("max","59"),a.secondElement.setAttribute("maxlength","2"),a.timeContainer.appendChild(Me("span","flatpickr-time-separator",":")),a.timeContainer.appendChild(ne)}return a.config.time_24hr||(a.amPM=Me("span","flatpickr-am-pm",a.l10n.amPM[ft((a.latestSelectedDateObj?a.hourElement.value:a.config.defaultHour)>11)]),a.amPM.title=a.l10n.toggleTitle,a.amPM.tabIndex=-1,a.timeContainer.appendChild(a.amPM)),a.timeContainer}function At(){a.weekdayContainer?ka(a.weekdayContainer):a.weekdayContainer=Me("div","flatpickr-weekdays");for(var D=a.config.showMonths;D--;){var F=Me("div","flatpickr-weekdaycontainer");a.weekdayContainer.appendChild(F)}return ia(),a.weekdayContainer}function ia(){if(a.weekdayContainer){var D=a.l10n.firstDayOfWeek,F=kr(a.l10n.weekdays.shorthand);D>0&&D<F.length&&(F=kr(F.splice(D,F.length),F.splice(0,D)));for(var W=a.config.showMonths;W--;)a.weekdayContainer.children[W].innerHTML=`
      <span class='flatpickr-weekday'>
        `+F.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function Mi(){a.calendarContainer.classList.add("hasWeeks");var D=Me("div","flatpickr-weekwrapper");D.appendChild(Me("span","flatpickr-weekday",a.l10n.weekAbbreviation));var F=Me("div","flatpickr-weeks");return D.appendChild(F),{weekWrapper:D,weekNumbers:F}}function Nt(D,F){F===void 0&&(F=!0);var W=F?D:D-a.currentMonth;W<0&&a._hidePrevMonthArrow===!0||W>0&&a._hideNextMonthArrow===!0||(a.currentMonth+=W,(a.currentMonth<0||a.currentMonth>11)&&(a.currentYear+=a.currentMonth>11?1:-1,a.currentMonth=(a.currentMonth+12)%12,Oe("onYearChange"),We()),_e(),Oe("onMonthChange"),di())}function Yt(D,F){if(D===void 0&&(D=!0),F===void 0&&(F=!0),a.input.value="",a.altInput!==void 0&&(a.altInput.value=""),a.mobileInput!==void 0&&(a.mobileInput.value=""),a.selectedDates=[],a.latestSelectedDateObj=void 0,F===!0&&(a.currentYear=a._initialDate.getFullYear(),a.currentMonth=a._initialDate.getMonth()),a.config.enableTime===!0){var W=On(a.config),K=W.hours,ne=W.minutes,oe=W.seconds;re(K,ne,oe)}a.redraw(),D&&Oe("onChange")}function Ht(){a.isOpen=!1,a.isMobile||(a.calendarContainer!==void 0&&a.calendarContainer.classList.remove("open"),a._input!==void 0&&a._input.classList.remove("active")),Oe("onClose")}function aa(){a.config!==void 0&&Oe("onDestroy");for(var D=a._handlers.length;D--;)a._handlers[D].remove();if(a._handlers=[],a.mobileInput)a.mobileInput.parentNode&&a.mobileInput.parentNode.removeChild(a.mobileInput),a.mobileInput=void 0;else if(a.calendarContainer&&a.calendarContainer.parentNode)if(a.config.static&&a.calendarContainer.parentNode){var F=a.calendarContainer.parentNode;if(F.lastChild&&F.removeChild(F.lastChild),F.parentNode){for(;F.firstChild;)F.parentNode.insertBefore(F.firstChild,F);F.parentNode.removeChild(F)}}else a.calendarContainer.parentNode.removeChild(a.calendarContainer);a.altInput&&(a.input.type="text",a.altInput.parentNode&&a.altInput.parentNode.removeChild(a.altInput),delete a.altInput),a.input&&(a.input.type=a.input._type,a.input.classList.remove("flatpickr-input"),a.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(W){try{delete a[W]}catch{}})}function Xt(D){return a.calendarContainer.contains(D)}function Ze(D){if(a.isOpen&&!a.config.inline){var F=ct(D),W=Xt(F),K=F===a.input||F===a.altInput||a.element.contains(F)||D.path&&D.path.indexOf&&(~D.path.indexOf(a.input)||~D.path.indexOf(a.altInput)),ne=!K&&!W&&!Xt(D.relatedTarget),oe=!a.config.ignoredFocusElements.some(function(ve){return ve.contains(F)});ne&&oe&&(a.config.allowInput&&a.setDate(a._input.value,!1,a.config.altInput?a.config.altFormat:a.config.dateFormat),a.timeContainer!==void 0&&a.minuteElement!==void 0&&a.hourElement!==void 0&&a.input.value!==""&&a.input.value!==void 0&&O(),a.close(),a.config&&a.config.mode==="range"&&a.selectedDates.length===1&&a.clear(!1))}}function pt(D){if(!(!D||a.config.minDate&&D<a.config.minDate.getFullYear()||a.config.maxDate&&D>a.config.maxDate.getFullYear())){var F=D,W=a.currentYear!==F;a.currentYear=F||a.currentYear,a.config.maxDate&&a.currentYear===a.config.maxDate.getFullYear()?a.currentMonth=Math.min(a.config.maxDate.getMonth(),a.currentMonth):a.config.minDate&&a.currentYear===a.config.minDate.getFullYear()&&(a.currentMonth=Math.max(a.config.minDate.getMonth(),a.currentMonth)),W&&(a.redraw(),Oe("onYearChange"),We())}}function kt(D,F){var W;F===void 0&&(F=!0);var K=a.parseDate(D,void 0,F);if(a.config.minDate&&K&&ht(K,a.config.minDate,F!==void 0?F:!a.minDateHasTime)<0||a.config.maxDate&&K&&ht(K,a.config.maxDate,F!==void 0?F:!a.maxDateHasTime)>0)return!1;if(!a.config.enable&&a.config.disable.length===0)return!0;if(K===void 0)return!1;for(var ne=!!a.config.enable,oe=(W=a.config.enable)!==null&&W!==void 0?W:a.config.disable,ve=0,fe=void 0;ve<oe.length;ve++){if(fe=oe[ve],typeof fe=="function"&&fe(K))return ne;if(fe instanceof Date&&K!==void 0&&fe.getTime()===K.getTime())return ne;if(typeof fe=="string"){var we=a.parseDate(fe,void 0,!0);return we&&we.getTime()===K.getTime()?ne:!ne}else if(typeof fe=="object"&&K!==void 0&&fe.from&&fe.to&&K.getTime()>=fe.from.getTime()&&K.getTime()<=fe.to.getTime())return ne}return!ne}function mt(D){return a.daysContainer!==void 0?D.className.indexOf("hidden")===-1&&D.className.indexOf("flatpickr-disabled")===-1&&a.daysContainer.contains(D):!1}function it(D){var F=D.target===a._input,W=a._input.value.trimEnd()!==ui();F&&W&&!(D.relatedTarget&&Xt(D.relatedTarget))&&a.setDate(a._input.value,!0,D.target===a.altInput?a.config.altFormat:a.config.dateFormat)}function ri(D){var F=ct(D),W=a.config.wrap?s.contains(F):F===a._input,K=a.config.allowInput,ne=a.isOpen&&(!K||!W),oe=a.config.inline&&W&&!K;if(D.keyCode===13&&W){if(K)return a.setDate(a._input.value,!0,F===a.altInput?a.config.altFormat:a.config.dateFormat),a.close(),F.blur();a.open()}else if(Xt(F)||ne||oe){var ve=!!a.timeContainer&&a.timeContainer.contains(F);switch(D.keyCode){case 13:ve?(D.preventDefault(),O(),Ti()):oa(D);break;case 27:D.preventDefault(),Ti();break;case 8:case 46:W&&!a.config.allowInput&&(D.preventDefault(),a.clear());break;case 37:case 39:if(!ve&&!W){D.preventDefault();var fe=w();if(a.daysContainer!==void 0&&(K===!1||fe&&mt(fe))){var we=D.keyCode===39?1:-1;D.ctrlKey?(D.stopPropagation(),Nt(we),Le(V(1),0)):Le(void 0,we)}}else a.hourElement&&a.hourElement.focus();break;case 38:case 40:D.preventDefault();var de=D.keyCode===40?1:-1;a.daysContainer&&F.$i!==void 0||F===a.input||F===a.altInput?D.ctrlKey?(D.stopPropagation(),pt(a.currentYear-de),Le(V(1),0)):ve||Le(void 0,de*7):F===a.currentYearElement?pt(a.currentYear-de):a.config.enableTime&&(!ve&&a.hourElement&&a.hourElement.focus(),O(D),a._debouncedChange());break;case 9:if(ve){var me=[a.hourElement,a.minuteElement,a.secondElement,a.amPM].concat(a.pluginElements).filter(function(Ge){return Ge}),Pe=me.indexOf(F);if(Pe!==-1){var ut=me[Pe+(D.shiftKey?-1:1)];D.preventDefault(),(ut||a._input).focus()}}else!a.config.noCalendar&&a.daysContainer&&a.daysContainer.contains(F)&&D.shiftKey&&(D.preventDefault(),a._input.focus());break}}if(a.amPM!==void 0&&F===a.amPM)switch(D.key){case a.l10n.amPM[0].charAt(0):case a.l10n.amPM[0].charAt(0).toLowerCase():a.amPM.textContent=a.l10n.amPM[0],B(),xt();break;case a.l10n.amPM[1].charAt(0):case a.l10n.amPM[1].charAt(0).toLowerCase():a.amPM.textContent=a.l10n.amPM[1],B(),xt();break}(W||Xt(F))&&Oe("onKeyDown",D)}function Lt(D,F){if(F===void 0&&(F="flatpickr-day"),!(a.selectedDates.length!==1||D&&(!D.classList.contains(F)||D.classList.contains("flatpickr-disabled")))){for(var W=D?D.dateObj.getTime():a.days.firstElementChild.dateObj.getTime(),K=a.parseDate(a.selectedDates[0],void 0,!0).getTime(),ne=Math.min(W,a.selectedDates[0].getTime()),oe=Math.max(W,a.selectedDates[0].getTime()),ve=!1,fe=0,we=0,de=ne;de<oe;de+=Jf.DAY)kt(new Date(de),!0)||(ve=ve||de>ne&&de<oe,de<K&&(!fe||de>fe)?fe=de:de>K&&(!we||de<we)&&(we=de));var me=Array.from(a.rContainer.querySelectorAll("*:nth-child(-n+"+a.config.showMonths+") > ."+F));me.forEach(function(Pe){var ut=Pe.dateObj,Ge=ut.getTime(),Pt=fe>0&&Ge<fe||we>0&&Ge>we;if(Pt){Pe.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(at){Pe.classList.remove(at)});return}else if(ve&&!Pt)return;["startRange","inRange","endRange","notAllowed"].forEach(function(at){Pe.classList.remove(at)}),D!==void 0&&(D.classList.add(W<=a.selectedDates[0].getTime()?"startRange":"endRange"),K<W&&Ge===K?Pe.classList.add("startRange"):K>W&&Ge===K&&Pe.classList.add("endRange"),Ge>=fe&&(we===0||Ge<=we)&&Zf(Ge,K,W)&&Pe.classList.add("inRange"))})}}function Bt(){a.isOpen&&!a.config.static&&!a.config.inline&&li()}function na(D,F){if(F===void 0&&(F=a._positionElement),a.isMobile===!0){if(D){D.preventDefault();var W=ct(D);W&&W.blur()}a.mobileInput!==void 0&&(a.mobileInput.focus(),a.mobileInput.click()),Oe("onOpen");return}else if(a._input.disabled||a.config.inline)return;var K=a.isOpen;a.isOpen=!0,K||(a.calendarContainer.classList.add("open"),a._input.classList.add("active"),Oe("onOpen"),li(F)),a.config.enableTime===!0&&a.config.noCalendar===!0&&a.config.allowInput===!1&&(D===void 0||!a.timeContainer.contains(D.relatedTarget))&&setTimeout(function(){return a.hourElement.select()},50)}function Ei(D){return function(F){var W=a.config["_"+D+"Date"]=a.parseDate(F,a.config.dateFormat),K=a.config["_"+(D==="min"?"max":"min")+"Date"];W!==void 0&&(a[D==="min"?"minDateHasTime":"maxDateHasTime"]=W.getHours()>0||W.getMinutes()>0||W.getSeconds()>0),a.selectedDates&&(a.selectedDates=a.selectedDates.filter(function(ne){return kt(ne)}),!a.selectedDates.length&&D==="min"&&U(W),xt()),a.daysContainer&&(ra(),W!==void 0?a.currentYearElement[D]=W.getFullYear().toString():a.currentYearElement.removeAttribute(D),a.currentYearElement.disabled=!!K&&W!==void 0&&K.getFullYear()===W.getFullYear())}}function Li(){var D=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],F=$e($e({},JSON.parse(JSON.stringify(s.dataset||{}))),l),W={};a.config.parseDate=F.parseDate,a.config.formatDate=F.formatDate,Object.defineProperty(a.config,"enable",{get:function(){return a.config._enable},set:function(me){a.config._enable=Wt(me)}}),Object.defineProperty(a.config,"disable",{get:function(){return a.config._disable},set:function(me){a.config._disable=Wt(me)}});var K=F.mode==="time";if(!F.dateFormat&&(F.enableTime||K)){var ne=Xe.defaultConfig.dateFormat||pi.dateFormat;W.dateFormat=F.noCalendar||K?"H:i"+(F.enableSeconds?":S":""):ne+" H:i"+(F.enableSeconds?":S":"")}if(F.altInput&&(F.enableTime||K)&&!F.altFormat){var oe=Xe.defaultConfig.altFormat||pi.altFormat;W.altFormat=F.noCalendar||K?"h:i"+(F.enableSeconds?":S K":" K"):oe+(" h:i"+(F.enableSeconds?":S":"")+" K")}Object.defineProperty(a.config,"minDate",{get:function(){return a.config._minDate},set:Ei("min")}),Object.defineProperty(a.config,"maxDate",{get:function(){return a.config._maxDate},set:Ei("max")});var ve=function(me){return function(Pe){a.config[me==="min"?"_minTime":"_maxTime"]=a.parseDate(Pe,"H:i:S")}};Object.defineProperty(a.config,"minTime",{get:function(){return a.config._minTime},set:ve("min")}),Object.defineProperty(a.config,"maxTime",{get:function(){return a.config._maxTime},set:ve("max")}),F.mode==="time"&&(a.config.noCalendar=!0,a.config.enableTime=!0),Object.assign(a.config,W,F);for(var fe=0;fe<D.length;fe++)a.config[D[fe]]=a.config[D[fe]]===!0||a.config[D[fe]]==="true";Pn.filter(function(me){return a.config[me]!==void 0}).forEach(function(me){a.config[me]=Tn(a.config[me]||[]).map(y)}),a.isMobile=!a.config.disableMobile&&!a.config.inline&&a.config.mode==="single"&&!a.config.disable.length&&!a.config.enable&&!a.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var fe=0;fe<a.config.plugins.length;fe++){var we=a.config.plugins[fe](a)||{};for(var de in we)Pn.indexOf(de)>-1?a.config[de]=Tn(we[de]).map(y).concat(a.config[de]):typeof F[de]>"u"&&(a.config[de]=we[de])}F.altInputClass||(a.config.altInputClass=oi().className+" "+a.config.altInputClass),Oe("onParseConfig")}function oi(){return a.config.wrap?s.querySelector("[data-input]"):s}function sa(){typeof a.config.locale!="object"&&typeof Xe.l10ns[a.config.locale]>"u"&&a.config.errorHandler(new Error("flatpickr: invalid locale "+a.config.locale)),a.l10n=$e($e({},Xe.l10ns.default),typeof a.config.locale=="object"?a.config.locale:a.config.locale!=="default"?Xe.l10ns[a.config.locale]:void 0),$t.D="("+a.l10n.weekdays.shorthand.join("|")+")",$t.l="("+a.l10n.weekdays.longhand.join("|")+")",$t.M="("+a.l10n.months.shorthand.join("|")+")",$t.F="("+a.l10n.months.longhand.join("|")+")",$t.K="("+a.l10n.amPM[0]+"|"+a.l10n.amPM[1]+"|"+a.l10n.amPM[0].toLowerCase()+"|"+a.l10n.amPM[1].toLowerCase()+")";var D=$e($e({},l),JSON.parse(JSON.stringify(s.dataset||{})));D.time_24hr===void 0&&Xe.defaultConfig.time_24hr===void 0&&(a.config.time_24hr=a.l10n.time_24hr),a.formatDate=ml(a),a.parseDate=ss({config:a.config,l10n:a.l10n})}function li(D){if(typeof a.config.position=="function")return void a.config.position(a,D);if(a.calendarContainer!==void 0){Oe("onPreCalendarPosition");var F=D||a._positionElement,W=Array.prototype.reduce.call(a.calendarContainer.children,function(fa,Di){return fa+Di.offsetHeight},0),K=a.calendarContainer.offsetWidth,ne=a.config.position.split(" "),oe=ne[0],ve=ne.length>1?ne[1]:null,fe=F.getBoundingClientRect(),we=window.innerHeight-fe.bottom,de=oe==="above"||oe!=="below"&&we<W&&fe.top>W,me=window.pageYOffset+fe.top+(de?-W-2:F.offsetHeight+2);if(Qe(a.calendarContainer,"arrowTop",!de),Qe(a.calendarContainer,"arrowBottom",de),!a.config.inline){var Pe=window.pageXOffset+fe.left,ut=!1,Ge=!1;ve==="center"?(Pe-=(K-fe.width)/2,ut=!0):ve==="right"&&(Pe-=K-fe.width,Ge=!0),Qe(a.calendarContainer,"arrowLeft",!ut&&!Ge),Qe(a.calendarContainer,"arrowCenter",ut),Qe(a.calendarContainer,"arrowRight",Ge);var Pt=window.document.body.offsetWidth-(window.pageXOffset+fe.right),at=Pe+K>window.document.body.offsetWidth,fi=Pt+K>window.document.body.offsetWidth;if(Qe(a.calendarContainer,"rightMost",at),!a.config.static)if(a.calendarContainer.style.top=me+"px",!at)a.calendarContainer.style.left=Pe+"px",a.calendarContainer.style.right="auto";else if(!fi)a.calendarContainer.style.left="auto",a.calendarContainer.style.right=Pt+"px";else{var Oi=an();if(Oi===void 0)return;var da=window.document.body.offsetWidth,hn=Math.max(0,da/2-K/2),dn=".flatpickr-calendar.centerMost:before",un=".flatpickr-calendar.centerMost:after",fn=Oi.cssRules.length,ua="{left:"+fe.left+"px;right:auto;}";Qe(a.calendarContainer,"rightMost",!1),Qe(a.calendarContainer,"centerMost",!0),Oi.insertRule(dn+","+un+ua,fn),a.calendarContainer.style.left=hn+"px",a.calendarContainer.style.right="auto"}}}}function an(){for(var D=null,F=0;F<document.styleSheets.length;F++){var W=document.styleSheets[F];if(W.cssRules){try{W.cssRules}catch{continue}D=W;break}}return D??Pi()}function Pi(){var D=document.createElement("style");return document.head.appendChild(D),D.sheet}function ra(){a.config.noCalendar||a.isMobile||(We(),di(),_e())}function Ti(){a._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(a.close,0):a.close()}function oa(D){D.preventDefault(),D.stopPropagation();var F=function(me){return me.classList&&me.classList.contains("flatpickr-day")&&!me.classList.contains("flatpickr-disabled")&&!me.classList.contains("notAllowed")},W=pl(ct(D),F);if(W!==void 0){var K=W,ne=a.latestSelectedDateObj=new Date(K.dateObj.getTime()),oe=(ne.getMonth()<a.currentMonth||ne.getMonth()>a.currentMonth+a.config.showMonths-1)&&a.config.mode!=="range";if(a.selectedDateElem=K,a.config.mode==="single")a.selectedDates=[ne];else if(a.config.mode==="multiple"){var ve=_i(ne);ve?a.selectedDates.splice(parseInt(ve),1):a.selectedDates.push(ne)}else a.config.mode==="range"&&(a.selectedDates.length===2&&a.clear(!1,!1),a.latestSelectedDateObj=ne,a.selectedDates.push(ne),ht(ne,a.selectedDates[0],!0)!==0&&a.selectedDates.sort(function(me,Pe){return me.getTime()-Pe.getTime()}));if(B(),oe){var fe=a.currentYear!==ne.getFullYear();a.currentYear=ne.getFullYear(),a.currentMonth=ne.getMonth(),fe&&(Oe("onYearChange"),We()),Oe("onMonthChange")}if(di(),_e(),xt(),!oe&&a.config.mode!=="range"&&a.config.showMonths===1?le(K):a.selectedDateElem!==void 0&&a.hourElement===void 0&&a.selectedDateElem&&a.selectedDateElem.focus(),a.hourElement!==void 0&&a.hourElement!==void 0&&a.hourElement.focus(),a.config.closeOnSelect){var we=a.config.mode==="single"&&!a.config.enableTime,de=a.config.mode==="range"&&a.selectedDates.length===2&&!a.config.enableTime;(we||de)&&Ti()}q()}}var ci={locale:[sa,ia],showMonths:[si,T,At],minDate:[te],maxDate:[te],positionElement:[Ii],clickOpens:[function(){a.config.clickOpens===!0?(ee(a._input,"focus",a.open),ee(a._input,"click",a.open)):(a._input.removeEventListener("focus",a.open),a._input.removeEventListener("click",a.open))}]};function nn(D,F){if(D!==null&&typeof D=="object"){Object.assign(a.config,D);for(var W in D)ci[W]!==void 0&&ci[W].forEach(function(K){return K()})}else a.config[D]=F,ci[D]!==void 0?ci[D].forEach(function(K){return K()}):Pn.indexOf(D)>-1&&(a.config[D]=Tn(F));a.redraw(),xt(!0)}function la(D,F){var W=[];if(D instanceof Array)W=D.map(function(K){return a.parseDate(K,F)});else if(D instanceof Date||typeof D=="number")W=[a.parseDate(D,F)];else if(typeof D=="string")switch(a.config.mode){case"single":case"time":W=[a.parseDate(D,F)];break;case"multiple":W=D.split(a.config.conjunction).map(function(K){return a.parseDate(K,F)});break;case"range":W=D.split(a.l10n.rangeSeparator).map(function(K){return a.parseDate(K,F)});break}else a.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(D)));a.selectedDates=a.config.allowInvalidPreload?W:W.filter(function(K){return K instanceof Date&&kt(K,!1)}),a.config.mode==="range"&&a.selectedDates.sort(function(K,ne){return K.getTime()-ne.getTime()})}function sn(D,F,W){if(F===void 0&&(F=!1),W===void 0&&(W=a.config.dateFormat),D!==0&&!D||D instanceof Array&&D.length===0)return a.clear(F);la(D,W),a.latestSelectedDateObj=a.selectedDates[a.selectedDates.length-1],a.redraw(),te(void 0,F),U(),a.selectedDates.length===0&&a.clear(!1),xt(F),F&&Oe("onChange")}function Wt(D){return D.slice().map(function(F){return typeof F=="string"||typeof F=="number"||F instanceof Date?a.parseDate(F,void 0,!0):F&&typeof F=="object"&&F.from&&F.to?{from:a.parseDate(F.from,void 0),to:a.parseDate(F.to,void 0)}:F}).filter(function(F){return F})}function rn(){a.selectedDates=[],a.now=a.parseDate(a.config.now)||new Date;var D=a.config.defaultDate||((a.input.nodeName==="INPUT"||a.input.nodeName==="TEXTAREA")&&a.input.placeholder&&a.input.value===a.input.placeholder?null:a.input.value);D&&la(D,a.config.dateFormat),a._initialDate=a.selectedDates.length>0?a.selectedDates[0]:a.config.minDate&&a.config.minDate.getTime()>a.now.getTime()?a.config.minDate:a.config.maxDate&&a.config.maxDate.getTime()<a.now.getTime()?a.config.maxDate:a.now,a.currentYear=a._initialDate.getFullYear(),a.currentMonth=a._initialDate.getMonth(),a.selectedDates.length>0&&(a.latestSelectedDateObj=a.selectedDates[0]),a.config.minTime!==void 0&&(a.config.minTime=a.parseDate(a.config.minTime,"H:i")),a.config.maxTime!==void 0&&(a.config.maxTime=a.parseDate(a.config.maxTime,"H:i")),a.minDateHasTime=!!a.config.minDate&&(a.config.minDate.getHours()>0||a.config.minDate.getMinutes()>0||a.config.minDate.getSeconds()>0),a.maxDateHasTime=!!a.config.maxDate&&(a.config.maxDate.getHours()>0||a.config.maxDate.getMinutes()>0||a.config.maxDate.getSeconds()>0)}function ca(){if(a.input=oi(),!a.input){a.config.errorHandler(new Error("Invalid input element specified"));return}a.input._type=a.input.type,a.input.type="text",a.input.classList.add("flatpickr-input"),a._input=a.input,a.config.altInput&&(a.altInput=Me(a.input.nodeName,a.config.altInputClass),a._input=a.altInput,a.altInput.placeholder=a.input.placeholder,a.altInput.disabled=a.input.disabled,a.altInput.required=a.input.required,a.altInput.tabIndex=a.input.tabIndex,a.altInput.type="text",a.input.setAttribute("type","hidden"),!a.config.static&&a.input.parentNode&&a.input.parentNode.insertBefore(a.altInput,a.input.nextSibling)),a.config.allowInput||a._input.setAttribute("readonly","readonly"),Ii()}function Ii(){a._positionElement=a.config.positionElement||a._input}function on(){var D=a.config.enableTime?a.config.noCalendar?"time":"datetime-local":"date";a.mobileInput=Me("input",a.input.className+" flatpickr-mobile"),a.mobileInput.tabIndex=1,a.mobileInput.type=D,a.mobileInput.disabled=a.input.disabled,a.mobileInput.required=a.input.required,a.mobileInput.placeholder=a.input.placeholder,a.mobileFormatStr=D==="datetime-local"?"Y-m-d\\TH:i:S":D==="date"?"Y-m-d":"H:i:S",a.selectedDates.length>0&&(a.mobileInput.defaultValue=a.mobileInput.value=a.formatDate(a.selectedDates[0],a.mobileFormatStr)),a.config.minDate&&(a.mobileInput.min=a.formatDate(a.config.minDate,"Y-m-d")),a.config.maxDate&&(a.mobileInput.max=a.formatDate(a.config.maxDate,"Y-m-d")),a.input.getAttribute("step")&&(a.mobileInput.step=String(a.input.getAttribute("step"))),a.input.type="hidden",a.altInput!==void 0&&(a.altInput.type="hidden");try{a.input.parentNode&&a.input.parentNode.insertBefore(a.mobileInput,a.input.nextSibling)}catch{}ee(a.mobileInput,"change",function(F){a.setDate(ct(F).value,!1,a.mobileFormatStr),Oe("onChange"),Oe("onClose")})}function ha(D){if(a.isOpen===!0)return a.close();a.open(D)}function Oe(D,F){if(a.config!==void 0){var W=a.config[D];if(W!==void 0&&W.length>0)for(var K=0;W[K]&&K<W.length;K++)W[K](a.selectedDates,a.input.value,a,F);D==="onChange"&&(a.input.dispatchEvent(hi("change")),a.input.dispatchEvent(hi("input")))}}function hi(D){var F=document.createEvent("Event");return F.initEvent(D,!0,!0),F}function _i(D){for(var F=0;F<a.selectedDates.length;F++){var W=a.selectedDates[F];if(W instanceof Date&&ht(W,D)===0)return""+F}return!1}function ln(D){return a.config.mode!=="range"||a.selectedDates.length<2?!1:ht(D,a.selectedDates[0])>=0&&ht(D,a.selectedDates[1])<=0}function di(){a.config.noCalendar||a.isMobile||!a.monthNav||(a.yearElements.forEach(function(D,F){var W=new Date(a.currentYear,a.currentMonth,1);W.setMonth(a.currentMonth+F),a.config.showMonths>1||a.config.monthSelectorType==="static"?a.monthElements[F].textContent=Ha(W.getMonth(),a.config.shorthandCurrentMonth,a.l10n)+" ":a.monthsDropdownContainer.value=W.getMonth().toString(),D.value=W.getFullYear().toString()}),a._hidePrevMonthArrow=a.config.minDate!==void 0&&(a.currentYear===a.config.minDate.getFullYear()?a.currentMonth<=a.config.minDate.getMonth():a.currentYear<a.config.minDate.getFullYear()),a._hideNextMonthArrow=a.config.maxDate!==void 0&&(a.currentYear===a.config.maxDate.getFullYear()?a.currentMonth+1>a.config.maxDate.getMonth():a.currentYear>a.config.maxDate.getFullYear()))}function ui(D){var F=D||(a.config.altInput?a.config.altFormat:a.config.dateFormat);return a.selectedDates.map(function(W){return a.formatDate(W,F)}).filter(function(W,K,ne){return a.config.mode!=="range"||a.config.enableTime||ne.indexOf(W)===K}).join(a.config.mode!=="range"?a.config.conjunction:a.l10n.rangeSeparator)}function xt(D){D===void 0&&(D=!0),a.mobileInput!==void 0&&a.mobileFormatStr&&(a.mobileInput.value=a.latestSelectedDateObj!==void 0?a.formatDate(a.latestSelectedDateObj,a.mobileFormatStr):""),a.input.value=ui(a.config.dateFormat),a.altInput!==void 0&&(a.altInput.value=ui(a.config.altFormat)),D!==!1&&Oe("onValueUpdate")}function cn(D){var F=ct(D),W=a.prevMonthNav.contains(F),K=a.nextMonthNav.contains(F);W||K?Nt(W?-1:1):a.yearElements.indexOf(F)>=0?F.select():F.classList.contains("arrowUp")?a.changeYear(a.currentYear+1):F.classList.contains("arrowDown")&&a.changeYear(a.currentYear-1)}function _t(D){D.preventDefault();var F=D.type==="keydown",W=ct(D),K=W;a.amPM!==void 0&&W===a.amPM&&(a.amPM.textContent=a.l10n.amPM[ft(a.amPM.textContent===a.l10n.amPM[0])]);var ne=parseFloat(K.getAttribute("min")),oe=parseFloat(K.getAttribute("max")),ve=parseFloat(K.getAttribute("step")),fe=parseInt(K.value,10),we=D.delta||(F?D.which===38?1:-1:0),de=fe+ve*we;if(typeof K.value<"u"&&K.value.length===2){var me=K===a.hourElement,Pe=K===a.minuteElement;de<ne?(de=oe+de+ft(!me)+(ft(me)&&ft(!a.amPM)),Pe&&be(void 0,-1,a.hourElement)):de>oe&&(de=K===a.hourElement?de-oe-ft(!a.amPM):ne,Pe&&be(void 0,1,a.hourElement)),a.amPM&&me&&(ve===1?de+fe===23:Math.abs(de-fe)>ve)&&(a.amPM.textContent=a.l10n.amPM[ft(a.amPM.textContent===a.l10n.amPM[0])]),K.value=nt(de)}}return m(),a}function mi(s,l){for(var a=Array.prototype.slice.call(s).filter(function(y){return y instanceof HTMLElement}),f=[],m=0;m<a.length;m++){var w=a[m];try{if(w.getAttribute("data-fp-omit")!==null)continue;w._flatpickr!==void 0&&(w._flatpickr.destroy(),w._flatpickr=void 0),w._flatpickr=eg(w,l||{}),f.push(w._flatpickr)}catch(y){console.error(y)}}return f.length===1?f[0]:f}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(s){return mi(this,s)},HTMLElement.prototype.flatpickr=function(s){return mi([this],s)});var Xe=function(s,l){return typeof s=="string"?mi(window.document.querySelectorAll(s),l):s instanceof Node?mi([s],l):mi(s,l)};Xe.defaultConfig={};Xe.l10ns={en:$e({},Ui),default:$e({},Ui)};Xe.localize=function(s){Xe.l10ns.default=$e($e({},Xe.l10ns.default),s)};Xe.setDefaults=function(s){Xe.defaultConfig=$e($e({},Xe.defaultConfig),s)};Xe.parseDate=ss({});Xe.formatDate=ml({});Xe.compareDates=ht;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(s){return mi(this,s)});Date.prototype.fp_incr=function(s){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof s=="string"?parseInt(s,10):s))};typeof window<"u"&&(window.flatpickr=Xe);window.Alpine=ol;window.TomSelect=tt;window.ApexCharts=$f;window.flatpickr=Xe;ol.start();

--- FIN DU FICHIER : ./public/build/assets/app-CPhjo8g8.js ---


////////////////////////////////////////////////////////////////
CHEMIN : ./public/build/manifest.json
////////////////////////////////////////////////////////////////

{
  "resources/css/app.css": {
    "file": "assets/app-B11aCoLq.css",
    "src": "resources/css/app.css",
    "isEntry": true
  },
  "resources/js/app.js": {
    "file": "assets/app-CPhjo8g8.js",
    "name": "app",
    "src": "resources/js/app.js",
    "isEntry": true
  }
}
--- FIN DU FICHIER : ./public/build/manifest.json ---


////////////////////////////////////////////////////////////////
CHEMIN : ./public/css/tomselect-users.css
////////////////////////////////////////////////////////////////

/* Styles personnalisés pour TomSelect - Sélection d'utilisateurs */

/* Conteneur principal */
.tomselect-users .ts-control {
    border: 1px solid #d1d5db;
    border-radius: 0.375rem;
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    min-height: 42px;
    padding: 0.5rem;
    background-color: white;
    transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}

.tomselect-users .ts-control:focus-within {
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    outline: none;
}

/* Dropdown */
.tomselect-users .ts-dropdown {
    border: 1px solid #e5e7eb;
    border-radius: 0.375rem;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    background-color: white;
    z-index: 1000;
    max-height: 300px;
    overflow-y: auto;
}

/* Options dans le dropdown */
.tomselect-users .ts-dropdown .option {
    padding: 0.75rem;
    cursor: pointer;
    border-bottom: 1px solid #f3f4f6;
    transition: background-color 0.15s ease-in-out;
}

.tomselect-users .ts-dropdown .option:hover {
    background-color: #f9fafb;
}

.tomselect-users .ts-dropdown .option.selected {
    background-color: #eff6ff;
    color: #1d4ed8;
}

.tomselect-users .ts-dropdown .option:last-child {
    border-bottom: none;
}

/* Cases à cocher dans les options */
.tomselect-users .ts-dropdown .option input[type="checkbox"] {
    margin-right: 0.75rem;
    width: 1rem;
    height: 1rem;
    border-radius: 0.25rem;
    border: 1px solid #d1d5db;
    color: #3b82f6;
}

.tomselect-users .ts-dropdown .option input[type="checkbox"]:focus {
    ring: 2px;
    ring-color: #3b82f6;
    ring-opacity: 0.5;
}

/* Items sélectionnés */
.tomselect-users .ts-control .item {
    background-color: #dbeafe;
    color: #1e40af;
    border: 1px solid #bfdbfe;
    border-radius: 9999px;
    padding: 0.25rem 0.75rem;
    margin: 0.125rem;
    font-size: 0.75rem;
    font-weight: 500;
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
}

/* Bouton de suppression des items */
.tomselect-users .ts-control .item .remove {
    color: #1e40af;
    margin-left: 0.25rem;
    cursor: pointer;
    font-weight: bold;
    opacity: 0.7;
    transition: opacity 0.15s ease-in-out;
}

.tomselect-users .ts-control .item .remove:hover {
    opacity: 1;
}

/* Input de recherche */
.tomselect-users .ts-control input {
    border: none;
    outline: none;
    background: transparent;
    font-size: 0.875rem;
    min-width: 200px;
}

.tomselect-users .ts-control input::placeholder {
    color: #9ca3af;
}

/* Flèche dropdown */
.tomselect-users .ts-control .ts-control-arrow {
    color: #6b7280;
    transition: transform 0.15s ease-in-out;
}

.tomselect-users .ts-control.dropdown-active .ts-control-arrow {
    transform: rotate(180deg);
}

/* État désactivé */
.tomselect-users .ts-control.disabled {
    background-color: #f9fafb;
    color: #6b7280;
    cursor: not-allowed;
}

/* Responsive */
@media (max-width: 640px) {
    .tomselect-users .ts-dropdown {
        max-height: 200px;
    }
    
    .tomselect-users .ts-control input {
        min-width: 150px;
    }
}

/* Animation d'apparition du dropdown */
.tomselect-users .ts-dropdown {
    animation: fadeIn 0.15s ease-out;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(-4px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Amélioration de l'accessibilité */
.tomselect-users .ts-dropdown .option:focus {
    background-color: #eff6ff;
    outline: 2px solid #3b82f6;
    outline-offset: -2px;
}

/* Indicateur de chargement */
.tomselect-users .ts-control.loading::after {
    content: '';
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    width: 16px;
    height: 16px;
    border: 2px solid #e5e7eb;
    border-top: 2px solid #3b82f6;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: translateY(-50%) rotate(0deg); }
    100% { transform: translateY(-50%) rotate(360deg); }
}

/* Message "Aucun résultat" */
.tomselect-users .ts-dropdown .no-results {
    padding: 1rem;
    text-align: center;
    color: #6b7280;
    font-style: italic;
}

/* Amélioration du contraste pour l'accessibilité */
.tomselect-users .ts-dropdown .option.active {
    background-color: #3b82f6;
    color: white;
}

.tomselect-users .ts-dropdown .option.active input[type="checkbox"] {
    border-color: white;
    background-color: white;
}


--- FIN DU FICHIER : ./public/css/tomselect-users.css ---


////////////////////////////////////////////////////////////////
CHEMIN : ./public/css/vehicle_handover_form.css
////////////////////////////////////////////////////////////////

/* Styles pour la fiche de remise de véhicule */
@page {
    size: A4;
    margin: 1cm;
}

body {
    font-family: Arial, sans-serif;
    font-size: 12px;
    line-height: 1.5;
    color: #333;
}

.header {
    text-align: center;
    margin-bottom: 20px;
    border-bottom: 2px solid #333;
    padding-bottom: 10px;
}

.header h1 {
    font-size: 18px;
    font-weight: bold;
    margin: 0;
    padding: 0;
}

.header .logo {
    max-height: 60px;
    margin-bottom: 10px;
}

.info-section {
    margin-bottom: 20px;
}

.info-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
}

.info-item {
    display: flex;
    margin-bottom: 5px;
}

.info-label {
    font-weight: bold;
    width: 150px;
}

.info-value {
    flex: 1;
}

.vehicle-sketch {
    border: 1px solid #ccc;
    padding: 10px;
    margin-bottom: 20px;
    display: flex;
}

.sketch-image {
    width: 60%;
    border: 1px dashed #999;
    height: 200px;
    background-color: #f9f9f9;
}

.observations {
    width: 40%;
    padding-left: 10px;
}

.observations textarea {
    width: 100%;
    height: 180px;
    border: 1px solid #ccc;
    padding: 5px;
}

.control-section {
    margin-bottom: 20px;
}

.control-section h2 {
    font-size: 14px;
    font-weight: bold;
    background-color: #eee;
    padding: 5px;
    margin-bottom: 10px;
}

.control-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
}

.control-item {
    display: flex;
    align-items: center;
    margin-bottom: 5px;
}

.control-label {
    flex: 1;
}

.control-options {
    display: flex;
    gap: 10px;
}

.control-option {
    display: flex;
    align-items: center;
    gap: 3px;
}

.signatures {
    margin-top: 30px;
    display: flex;
    justify-content: space-between;
}

.signature-box {
    width: 45%;
}

.signature-line {
    border-top: 1px solid #333;
    margin-top: 50px;
    padding-top: 5px;
    text-align: center;
    font-weight: bold;
}

.form-actions {
    margin-top: 20px;
    text-align: center;
    display: flex;
    gap: 10px;
    justify-content: center;
}

.btn {
    padding: 8px 15px;
    background-color: #4a6fdc;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
}

.btn-secondary {
    background-color: #6c757d;
}

@media print {
    .form-actions {
        display: none;
    }
    
    input, select, textarea {
        border: none !important;
        background: transparent !important;
    }
    
    .control-option input[type="radio"] {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        width: 12px;
        height: 12px;
        border: 1px solid #333;
        border-radius: 50%;
    }
    
    .control-option input[type="radio"]:checked {
        background-color: #333;
    }
    
    .signature-upload {
        display: none;
    }
}

--- FIN DU FICHIER : ./public/css/vehicle_handover_form.css ---


////////////////////////////////////////////////////////////////
CHEMIN : ./public/css/vehicle_handover_form.css:Zone.Identifier
////////////////////////////////////////////////////////////////

[ZoneTransfer]
ZoneId=3
ReferrerUrl=D:\GESTION DE FLOTTE\Dfinir la Structure de Base de Donnes pour ZENFLEET.zip

--- FIN DU FICHIER : ./public/css/vehicle_handover_form.css:Zone.Identifier ---


////////////////////////////////////////////////////////////////
CHEMIN : ./public/favicon.ico
////////////////////////////////////////////////////////////////


--- FIN DU FICHIER : ./public/favicon.ico ---


////////////////////////////////////////////////////////////////
CHEMIN : ./public/images/car_sketch.png
////////////////////////////////////////////////////////////////

PNG

   IHDR  r     >2   gAMA  a  
IiCCPsRGB IEC61966-2.1  HSwX>eVBl "#Y a@Ņ
VHUĂ
H(gAZU\8ܧ}zy&j 9R<:OHɽH g  yx~t?o  p.$P&W   "R .T  Sd
   ly|B"  I> ة آ  (G$@ `UR, @".Y2G vX@` B,  8 C L0ҿ_pH ˕͗K3w!lBa)f	"#HL  8?flŢko">! N_puk[ V h]3	Z
zy8@P<
%b0>3o~@z q@qanvRB1n#ǅ)4\,XP"MyRD!ɕ2	w ONl~Xv @~- g42y  @+ ͗  \L  D*AaD@$<B
AT:18\p`	Aa!:b""aH4 Q"rBj]H#-r9\@ 2G1Qu@Ơst4]k=Kut }c1fa\E`X&cX5V5cX7va$^lGXLXC%#W	1'"O%zxb:XF&!!%^'_H$ɒN
!%2IIkHH-S>iL&m O:ňL	$RJ5e?2BQͩ:ZImvP/S4u%͛Cˤ-Кigih/t	݃EЗkwHb(k{/LӗT02goUX**|:V~TUsU?yTU^V}FUP	թU6RwRPQ__cFHTc!2eXBrV,kMb[Lvv/{LSCsfffqƱ9ٜJ!{--?-jf~7zھbrup@,:m:u	6Qu>cy	Gm7046l18c̐ckihhI'&g5x>fob4ek<abi2ۤĤ)͔kfѴt,ܬج9՜kaټEJ6ǖږ|MV>VyVV׬I\,mWlPW:˶vm))Sn1
9a%m;t;|rtuvlp4éĩWggs5KvSmnz˕ҵܭm=}M.]=AXq㝧/^v^Y^O&0m[{`:>=e>>z"=#~~~;yN`k5/>B	Yroc3g,Z0&L~oL̶Gli})*2.QStqt,֬Yg񏩌;jrvgjlRlc웸xEt$	=sl3Ttcܢ˞w<Y5Y|8? BP/OnM򄛅OEQJ<V8;}ChOFu3	OR+y#MVDެq-9Ri+0(Of++ym#slLѣRPL/+x[[xHHZ3f#|PظxY"E#Sw.1]Rdxi}h˲PXRUjyRҥC+W4nZcadUj[V*_pFWN_|ymJHnYJjAІ_mJtzjʹ5a5[̶6z]V&ֿw{;켵+xWkE}nݏb~ݸGwOŞ{{Ejtolܯ	mR6H:p囀oڛwpZ*A'ߦ|{PߙHy+:u-m=茣^G~1cu5W(=䂓dN?=ԙyLk]Q]gCϞ?tL_]p"b%K==G~pH[oeW<tM;js.]yn&%vw
L]zxem``Y	ӇGG#F#dΓ᧲~VysKXϿyr﫩:#y=}ǽ(@PcǧO>|/-G8    cHRM  z&         u0  `  :  pQ<   	pHYs       -IDATxyX'300 (Jejv4=ieK[<)5=r:,Mmr%WQTQ`````f~3*(us=a5nB!NGSB!7GB! 'B$	!B8)	rB!NJB! 'B$	!B8)	rB!NJB! 'B$	!B8)	rB!NJB! 'B$	!B8)	rB!NJB! 'B$	!B8)	rB!NJB! 'B$	!B8)	rB!NJB! 'B$	!B8)	rB!NJB!rc4Bj6Dq-Dl߾	&XEBT1vncI"ANTX`` ?suCQŮU#7l0233fN@| hj.v2x{{B%B!9!B'%AN!IIB!pRB!9!B'%AN!IIB!pRB!9!B'%AN!IIB!pRB!9!B'%AN!IIB!pRB!9!B'%AN!IIB!pRB!9!B'%AN!IIB!pRB!ku@!cZ՟+Zm?3YHB!dٳ>}sΑ˗1LQPPll6STTn ͆n/uL$JV+EEE퍷7nnnh4||| 4405jD1x{{K+'	rB!-0L8qCqq.\@nn.W@@@ !!!DFF憻;^^^xzz^Gף3W9U5ZjZ,&	DNN撟dŋdffrAjbٰZѨQ#BBBEqO]#AN!uֱm6.^Hrr2CPPAAADDDЯ_?ZF~~>+WPWRv{l6 vzq^4+]]\\[#&jZt:];<==	GѨvuuEѐIff&{?$++ ???BCCiٲ%={$::<JBq֭c夥q%	FѼysڦӁ+OOO<<<6OOO|}}߿?Zwww<==9<<<Y}V+f<	9//|f36Dnn.999PPP@qqh]\\pww',,777
$>>+V H^d 'B\E	o˗/e˖4P Ν;GZZZ@fh֬QQQ4joo)**"??ș3gͥ BAAAU?*T___

//ͤeQٌh$++s	x"FOOO%))ٳg0|p&LP'B9!ubApA,Y5k8~84i҄:pΜ9CXX:t`	n^S(}咓IMMҥKL&f3l6<<<W>>>zpssSkt:>>>:ifQPP@NN$%%aZտM&<QFLVm_=jeƍ8q۷A˖-;ذa׿Xp!]ta	3U^֐!aƍ̙3UBc6>|8+WT2Ο?owwwz=63n8d`0 }>ŋհ兏7q4k֌Pz=XVX,竵rfs`t:^^^W~EEEq%Ν;GjjZ:QFjՊnݺNb~kגjK.hW?ϟ/Q#$ȉ
 'DVy^'((t,{ｌ=ټy3{K&Mh޼94nܘP.]Dvv6'N %%T233ͥbpssCө{yyXU:;#Fqq1X,V+3ԫW@5jDDDDDD`XԾIII9rd._/ۗ7o@rr2Xv-6777Z-999X,-ZDǎkM '*Du[m
r_9t;v$''GC=#<ɓ'׿j4jԈ;={R~}z==z3gp%4  ШQ#5kFpp0߿@٬tؙ9NQr-JRRϟL&qssۛƍӺukڵkGpp0۷gϲaqss]v58 xVXj%**
VKbb"cذa?`>I"AN~M6ر=Ä	Xz5˖-Ã~1vX9z(;v`֭?|uB۶mҶm[ZhNSI%g)V_)ХpA8s0LѴiSZǹhԨ'N`lܸ\olGaA||<L&*k9{Q
!7)11e˖G||<>>>|ᇜ;wzΝ;|r?y79y$DGG3j(ZhT@\5xz@HH@ʕ+租~BE߾}:u*III|ᇴjՊW_}{޽FŞ={0Lx{{;$5rBFN62cǎ̷~OBBt:&Mɓ'16{ｗ~97lzJ;^OFF+W_~!55v1m44h;w棏>WWWZ-=cƌQ%:ry{R
!Hrr2qF~m>֭[yWر#:tP?~|~T&LF:Te*F˓YV3f?k֬u֌97|._̤IdeeWs9iZBQg\,?ٽ{7;wT);tuQ~ERj=kє&n>ˣ>?ΝwIbb"]v믿cƌ̘1Çsy2BQg$&&Nӧ/"3gΤt֍uUwE%P?sBϞ=9s&_|SdbÆHB:ɓ<yGy7ҡC֯_ODDoV5PT&V^7;oUV,^NI9!u˗IJJ]v_m۶gUgD%jfsk9rVKعs	rB!KTTw^uVEUqreʈ#8t/^aÆd< N8s'NѣxyyE~d*\=Hdd$:4k֌zꑙ鴃X$	!.]DNNѠA.|}}UC


t7OV8jgg# 7克4 --Dpe
qwwjRTTDPP/_v 5r&CBqA6l؀?EEEl6CPP tξ}ٳ|bV4iժ DEEf>s5kf`0=sKy^Ou>݌fʺciU!w!33&M鉛Ǐ'**J#հaCIMM/r~<z((V+6bرcv<<<X|9tرCʡ7bbԨXl;7!?A\\plϞ=\xnݺaZ	EsQ\N={EӦMtѾ}{6mĴiӸ뮻X,kYH٬^'??Daa!6t5ر#qqqTwQ▜>};C}EBBB>RN:ԣōeddBxx8bի޽{6lWNNN5b$]ǚ5kXd	Epp05f4Z\\\L||<_5ϟgɒ%4o޼K*Ҕ6zZhM|2R+WKsyz]bFťTm,ݭ w5kGҲeKBnh֬毌͕5b_ԅqVWWW
+NѦM֮]ɓ'iٲe5XT6e޽{sFQ+45\;G2d/^n'׽^yQPP^
),,HqUFVU_BϏ&Mиqc&^zuֱw^bbbE-<g}޽{K]3aJ|vt:bDGG¾}0`|qv܉n/յp7yYzum۶e60BWj^zR(5TPHKKŋ$&&rej{ooo%Bzh4<憻;nnn%.w MZZ#++{LmNٳ'=wqG7ی+7gaݺuߟ'dڵ|76777[X,V-Z9q*Q%3L$%%A;R.]~y ̚5-Zĸq0a=\e\|۱c/1111w|24nܘvڡhSUٌb_cǎ:%a۫BW^pСkĉiӦ_}ZD9 @^^ɄN	

ĉ
1:*osDy5=8iZKFVl6vܩ6emV@=ٳ!Mܹ3[laŊ_ uVzs=Wf+o?hc%^ɳ>{kF֭qqqaϞ=U:U'P!:x O>$7oW_e޽<eLϝ;W:vZvqs\d|霔 zEl6_呗Gaad2aX(**%`E77?=<<Ey;effrikfQʤ\[o\yGbb"SNeĈjt8q"уszdgg3p@zlVk۔7/Jteb]4oޜ͛7sӰaC T[koaҤIq'((f͚ϤIXpaSNdu{Yv-			7reմ)}FBZZdffr%Tp9rss1Ou<kFncZ)...تM-zQ𻸸燧'ooo5jD`` :ミ???V:&$$`Xגb޼ytM}իWf=z4SN-}yfYt)GrO=Nh4ҹsgRRR1b;wVx"lْ$mrq~*{My0ɓ]]FQtddd\s˗3g X`Ǐ/ߍBDff&ryKJJ
%l6ZKj퍻;^^^xzz퍏COlwYUǤL_\#++<jU󹺺Z<///|||0ԯ_`7nLxx87&((M[lݝ>}.}vJ ڪU+RRR0ϔ
23֭[ψׯ\y<<<(((Ã 7'X,\\\pssSGL&#77dF]g̘Avnþ&[nԨz]tt4{UC8*3v/p2Yz5jsnM6lܸ@/_^f[ӦMٽ{ڔCPP:𖖖ƹs8}4III$''s233ɡPjJiNz%(( 	ϏP<<<txxx5Q8rV	J2cUBmnn.FٳgpZqKff&Νc˖-ꊇ___ԩM4!<<Mb0~ne'קcǎj_|N pZV@\\͛7gҥƲuV u2`ڶm[{uCr'N$66}r=/P~}^z&%%CqY0L`Z1L\t	<<<(**B׳iӦӄWT%e*@6mhٲ%cǎ-_Y\ZVZa20L*iӆ6m\^z~8vڅ:ݻԩ_~~rsaڴiر<Ⱦ}8{,>nnnԫW???ZjEXX͛7yxzzE@@@>bӱ21t:61)9Ofz)((󤥥Fzz:jKJJb˖-l^^^DFFҦM:t@.]

?ɓL0Ѩ6Nu5ڵkyزeG&%%ݻzj֭[WeˊsAh4ҠAob_套^RϬ^SNhԨ۷'00ʬш%!PuTѣGY|9~)z7߼fFaZ ""BN!?ݺu̙3hZƍ9|0&L`ʔ)l۶ٳ'w^,Xw}@zz:V5jD.]hѢ͛7'22RmѮuѵrvZQ3$&&r!HKKرV6^pN<IVV:tDV/zjڶmKhh(pvU:&զMjeǎꨔ!CÎ;:u*ߟ^x
gM0|pz=Q\]^˗,)T!kѷo_G}oƌ3HOOCexcӦM%W;t@ZZO>}!660uWފaaahZL&۷m۶qrrraС<x|ʞ={		cǎ$$$8Zg}<{3x`RRReANy^~ebcc,:rq|IF#O?4<&M*q;vpaΜ9KܗnWkה2ǵѭ&ex:\v<>oĐT8q]RTTTcép裏h":uSO=W_}Eٿ?ǏgҤIVPY?Nhh(|Iw|qθ*Ϝ|jQJ2ezիWӥKrrrrFXloӦMW_ej;Yzu	ks_냜2gn駟楗^aÆt:?αcǨ_>;wߟ~3ydV+_}:'LPPM4Q߬YaECŞ[r}mFNxӧ~!?_~RfɄBj,t3-[9x 9r_ӿ.]6<%F2KIII/d~uOgQTTs=ǢE0;w;ＳږẞZo'O,5I	#))9sӠA&OLFF_1b gΜQkR2ώ㶫`4us=ݻ<x0~inTQ]=|@n>|8
< { 9r}.u\my?.]B7|_|_|*{aѢE<իWgCr:I&ob,_5<Sf{mۆjeرt֍&MGѦM4iBϞ=iժ@~sWO\֤X6n8{O?͇~ȳ>˯z#UA裏rJZlG}]w.v~)4˲VaÆⶊW/..Օ/m۶1zhZnj^(IAd˖-9rp{1(,,L<I&K/DddvQieH}뮻xꫯJ\0`J/!q~'4h
p]wq]w1m4N:4h G˫Z,_QQݺuciP ""F6*j}3g?0x{{}vIVV0}tCdRR̚5RC\u֭G%887ҳgOZh޽{%	!ނ=z4ƍST8 \;̱t'=Za.ڵbLvv6GqsƕVrU5o< 6lHrr2w{7sϡ>}:ǏgΜ9<U^۩e˖dggKjjjȨT!QԩSx{{/T8euE..]Օ_~-[t5Y[`^6Â2e
F;ҫW/-[FQQnnnF~{ UQFdggѣGJsB8#eb;=z{`ڴi ;w:*ӼysΟ?AXXiiiNjedo;v+f#;;oN+vƍWȑ#YtZ-_)$$&pVʨӷz_M灲B\zۉfs>tԉUV1sj.YԊ9%x(sĤyf/_^b׸q		)=00P],ZHB8+%ٓvک׮]KӦMٿoX,3o<8r{/͚5Ky;.1>}#H	tIII+e>qgyv_!D%j̙3ӳgO,Xp}kݦ8z(+Vs\|~Un&)nݺ'ObXJtLԉpqa\&=OΦMٳ'_ դinR|׸;?xKjEj+C=UբXp`]w%qBQ(Õ^&^pvIh4='lْ.ZԊ g4FN
\xʕҵkRCҸ;BT\tRuG"|||:t(fΜ9tNV+N;Ｃ,?>͛7СCeViFj2d6mo߾|]Q+7_}_ذaO?4:NTMNsˋqWRzjZ-Nť'h۶mR'c˴i0Lжm[ ֯_ϊ+8}4 +V`ժU NϏ#FTc	o^~䫯?,1+^l6pB6lHjjjl6l޼Vc6iժZV]'Cr^֭saʔ)|g4m2ŋ
(ͣV777N>MFFzʮ]xgٹsg;K\8[ϝ;0zY꺵kR\\LVV{op0hѢD*??Vlݽ#M`` F\\\x衇h׮ׯ$<<p:wLtt4'N'j"}W\O履~"((ʤI(,,,q۩߬K.VX,DDDf:vHjj*ƍŋ4lذ'n\GZZ4ɓ4k֌.Ms o_6nӦMPTTDnݰZVK^^^ں(55___.]D8Bq[y{{ܹsI&V [޽	f޼yDFF憇Gu9}YyftO>$_x???NquuUرcٴiaaaf	ruHtt4{v?\Y:Ƚ[׬+#Q5QQQΝէ!77FCAA]!m<<<(..&""+V0uTN8GDvFɪUԩHT7ϩҥKY7w\`رf;FXXm.ebZn׉>BlXVBCCygwޡ^zz1n86mʸqWzީχNnTa <==ڵ+K,!((Hn^Wi4L&L/"ݱꫯBnn.FVULOn̙--pڳҥKyKkkZ6n܈Fc4yرcujEղxb9v7VF0!D̋yd",,NJZd2M@@ yyyǔ,x)ܢEW^eٖ/_NPPvCb2|2CaÆ|u&9ڼy3޽6mTwq(_^#Ew}s=]JAn֬Y<㥶kZ9{,EEEn_|Axx8:'zj<Xfm^m,Wv4iBZZVCpqq1b!&F@H(wNڸǗyŋ&33'bX?7n///N8/lͥZ+W]^_\\\kCB(n<==owmM7t0~iqp%eo߾ |}}iܸ1{b0` f3sǇ]v^G2Z[o{￟`	!~r/XNu'''Dmn^g˖-hZ.\>VﾣM6X,V+;w$$$z駟F!44Yܹs5k.Օj-5rBF5rrsS5Μ9ѣGfZtXV֮]`@0dF#Po;AAAhZϟϡC8|0<S?eXh_~%|ǎ:Ē4v]#BzJl0nWcI*Sȥjժ233'33O.]tL&,}bf8x DGGwߑMƍX,0ugSOȘ1cgEӳgO^~Rm6\j!Zh4v:<S8yiԩS;JlZjƕ+WCFF/>LNc<3_6lVU]kՔ'ȑ#,XC+?޽{{L<mˮ)G!*l2[!evZR\PFf9}?yxZ,֯__*(KE`` ͛7j?ի1߿'O(Mdfn_W&N7&L_Tx	Fbk2AQ96*]&}s_Yi6Yp!tڵvNlf߾}@\\:$,۷?$**/_|C!$$D]gŋrJ5j#F`͚5|駸ÀǕ '/w\A^e7g~Νl2x2|W`47nfłNرc4%KOiРcǎ_~ۛrrA>#N<?cǎ%//uq9֭cǎhZu \*ANQ(㔚8oV+j)z6<5g9rd}ؒؾ};4lP]wǎjd
%,,+/Hdd$w}7AAA5.̝?>;vB>}ɓ|F;۷/ݻwժހې '픁_nii?{ϙ3!Ct:uD*߿?֭cӦMBX	

bԨQ1cƌ9O?Į]0oߞ|~w222thт!CУGJ\]>nnnUPFQ\Y51j5>ݻӧ}J%KHHH]~ZﾣSNjٽ{7wy'+WdРAdff0h jsd/kגCDDwy'nnn:tEMxx8w}7{&22ROZV_Fk	!j;FfDӪ6kv-wrϧADGGtRlBZZwwwZlɚ5k0aZkgXؽ{7o6Vc4Bח
g>cvŋbt:v?Lff&t֍ӵkWJvؔU!DmjK4^Mjjɨ*yfΞ=˘1cmZV]^*++>ph4R\\L&Mj^&Mo>:w\>o8r2T)oρȠqt҅l²e0E퉉]vi:&++KVR#xbw<׆(MN w^:tPbnF\Y`0Ӿ}{8|0'99y?a^aÆ0-[ۙr@\NǞ={Xj{`:vH&Mصk;.\Ϗ-ZХKvJtttVoWBQMF^\mxklҥK 9RnW?^Zjݻׯ51̽;vy̙s8Gsçj?YnGf]w݅+_ŋ}G֭ܗrF<Q jk5%;{EFr}'O歷*Z}Q\\LLLӧOh߿D*?cƌY;wQJN###6ٳgE<o>VXAVV^^^hтﾛVZUbRk=R\\\eBG@jZU WEӯ9	Քp?Zbb"6Ӵjժ\1ͼlܸ"ر#pT	ٳgYh.\ ;;???ZnM^`lڴ<|||hݺ5}G9´*N.$WSkV%Ux zU7޽{2dvIӦMk4zxxNJJ
;wFՒʕ+ٸq#.]Օf͚ѹsgիILL䧟~nH.]ر#:tYf@(;U2!7຺ť*#UBz$7&K	rUdڵŕ{VKJJ
.\P,wAAA]v-zZoooٲegΜadddFTT;w&//}qaF#Zƍ3zh"""/1Q2Ekn.~׬.A
$$$믗{V˚5kP?dddj9w4 ,:_ͱc0$$$0x`N
1L߿LW6o߾oߞf͚a0eySVIn4jq]B9!zUG2ء52AŚUf3[l)1OܥK ??_&j%jL&lHJJ"??FnWf]vzf͚BÆi׮۷'((H-cٜre)Bh}	!BѨ_D˪IlU֤<rPSٳi׮aHY
`ݺuFؾ};ϧWWW6FTHOO'00Hlf߾}Kzz:͚5Yf4lvѧO})?nn(f!Dm憋&ZmmG;w2rHo~6oLJJ
/^ח lj\fGnx7YhGڻgrai߾=ǎ 66͑38nqJӪyxx₋K~Bv9	rU ))俳gf˖-ӤI:w̨QQG333ٶm7111,^ٳg7иqcFnn.Nbb0hݺ5駟r<==8W[UWD!jV~-FN֜ܖ"Qe˖ѬY3 FMRRw}<tMFoooL&V^dĉ$&&gONΝ9sAlْ˗1oߞz=ќ9sW_}!l4nܸ)uB8iť/jk=җzjԫvlڴ޽{swtR8Õ5VL&˖-ȑ#\t"t:&M"""@VV>}.~:t6kFF[V;1
=HKKȑ#=zu-[,L˪`<3|G\V!gsY{jk=6FoEznٲQF1o޼rFLAA?4UVtЁ.]IRRG%55@:vȽ[|\\\ϧBNK.e̙df/⢢":uĮ]?мعs'<8!DشzYt~pF9B!`ǎdgg3qDu"ᄄf͚ENNW
iInx q.\HN0` ~~~4oޜ`0J5<|L4I[%Ca2jܜwBq?
rF\-u g%U&ooo٣mPڰGVX?HJJ
&MаaC._'|fA:TZz rss-Coe<C<Sl$$$ttNGFF*1ff!Dg4ծ5P;f"%YVׯ\"%%E5LLn:~:DƍgQ'n۶-<Te3| V^])*<s4jNkVfX$Zc6վp1{{{8Y.b///u-$$Dj*W={p	ݹ1c5[}å)S JUr)ٳgsiuh\xмysR&Fhe!DmNãD+ci̫}σ+5rnnnQJS#ٳ_ ݻ7?<mڴ)^Ņ4um
1b h_z+,Z  |ABZZg~7v;FRC&B|>`4?~<=zPn`̘1t:4ӟjTx"cǎ̝;Tc;+1n͛믿\ZiNU:qjZ\]]cǎ<o^TZTZ!?:u|%N)))jx	&L@LLTwnI
r/3Zhő^aÆ^[]	1)۔tZB&OL۶mTg2uG\\'N --+VSU\E9{u譲X,8T@ĥKʢ|)..V)<==9sXVرcjժBT	RNSb ?~\ݖZkf2X,鉇X,rrr+P]]]K9FCvv6GFNN)))\tI1'ܮjqwwwnD䪙jb`2HOO\tK.a45t:rrr   ˗/MxzzAvv6x{{퍏O<{, 7&!!OOOl6>ڵcs=?!U+,,\C{yyS(s:YDQB|.\.Z w9sαcX,)..Օ|._L@@ xxx닿?兛Mg;uG(iӦvK2s>e_>Ν+uVٳN?sɜ?דINN	PPP6yzzzL	PgVF={HOOAPѐ.3VVqƍYp!$%%o>|{w3Bq{qС2ܑ#G x׀+ҠAZ1Պ$++vEzz:/^ܹs<裥wAf̘ϟ*vA;Frr2999jShذ!7VKAAO>||l6YYY+z___"""~qJӀ^WG0|ٰaC2/^$@
!jzsҺuko\r|}Y6n֭dffr9vUߟ`BBBR[JY9Jb)bΝdggSk4ٳ'5">>oExx8N?E-zhd޽۷OOAA:BCCiܸ1h4N>A	: |}}޽;QQQ8]ȍV .TQ\|	!jѣG3w\F.]q8111 %j233IOO'==,CqqzQrQ?KX_TTT-Q)cKAAFQfaZ%Ք
@"##			!((^_qذaqa?y7oc
ndBדC8~8jp$"":P~}N83gؾ}-.<<4%UFY߾}4i5OJJ4lK!jm۶tR9#G?ݨQ#Vk 3YLXdX(((,QTT˗oaQJUFWZV|x` hZ1={4.^ɓ'flՐbbb6mArζP{jj*			c((( I&lْ͛x"3p@o87	eĔ<ZONyꩧOf͸p͚59!D	OѣKuVJ5kְsN:t@ff&j͐+~~~ꊿ?4h ???n.5*38FL&yyy\x<9{,䨃 322PW4~رf͚ҤI5jNSamQ゜HLLdӦM߸h߾=͚5#==}J~*1jHժ F?0z6&%%ExxZV!͔fUgtt44^xQQ:wL&f3jg...ʬ:nݮ6*V"uYH@P4^W~իGz`0`0jx{{ӷo2hW8{QANyQב#Gسg'OҥKUX5on޼={`2x~oSNf;i׮]S^T/`G}*+HM:??~\7B~+/BIiv-JS^^%fPZҏl6;dJSXհ8r2:`<EHMM%44_HMNQ9rsq8nAdeeUfddټy3SqiѢ))):tlڷoc=FPPpVV}.*˃>H>}ѣu;{,6777/	!V[NUIaV	BTʚ&c͚5;wPɓK}+jѢEgÆ۷"1Μ9Ê+宻cǎMoIXVϟŋYd7LC-$	QԸ 2e
			jx^[?9k,[ne˖-RTT;wFѐHqq1Ѽ7-TbEcǎr[XXHaa!%.|!5M
rc;8/^\BՒɖ-[HNN&;;LHHݻwh4_~%k~TF8CطoڏBٳe^<1tk+MWSG))#Po9yMqtQN8Aqq1{-='25I
rΝ/,fΞ=ӻwo_	dѥXkU!k֬aݺuǓ^WGҰaCׯNgr=ǎ~2tP)(( &&Fm-ٳqwww兟_E	sBg1uT}/Ɋ{$n/=x 
nnnh4e}իWWyYoU
rmq_5OV14i҄;rYV^MDD=X,F:/zj򈋋cʔ)tޝRި_~%?#9+Wޣcǎ7<͛ټy3O̙3SM*?ѣGYhB5v#z=F'OrqΜ9CFFvt:P	fsum1q;,z믿^DJHH߮bK
rᖏQAK.l6L&ƒJ||<7_`0CǕ"?6mπJbïz=V#F0dVXѣmׯ_ywfZ}ͦ|{	

O?-Wل2?FQw3+99ʔQQQPTTDdd$Qj̩S8~ڇ6""B]vIy-;qظq#})׾.]t<2&5*U۶mcQPP@dd$QQQ;wkC=Dppz@vQZf͚O=Xb59{322|2ၻ; ,zzx3gҮ];&Mt"_}5Keb)K__Llllq9ªUXn.\_~/5A欴Z-qqq|ƍ̙3!_rWjj*vܩ,JTT)))l߾HƍGPPP#O5zZ'={뙮^ g֭[ӧ9<v<==WZL&EEEEdd$]t!66Y?zɓIHH(#BNF3g?˓O>ɰalw|ߙL&yf`(KMfxٺu+?i׮ݻwO>(5Bګ9eej_:vHVV'Z(ٜXWoJ-s=/P:%m۶:vHTT{/ڵ#$$DWx4Hjj*'Od۶m|,X p}1уҷo_6lp+^!*͢Ex	e<шhTkM&			$&&DNN&I}_86v4DDDߏ?:BX|9iii̝;VZ1h ̙sSk郜j-&ʣGo>ߏFˋ;bظq#aaaL<D姟~e˖۳go)))t֍tر}ffZRD̐!Ct?~={xb,X@nx7j9jɒ%L>vpU!ZIKK7`̘1APP|믜>}@É#**p"""cYVL&&˗/sqXhק_~7N}OzfϞ{СCiժsaРA_Bs WB>IJJ@֭޽___MFpp:n7FS8x+Vcjl[] Xa6X,t:7oN=z4Ǐޣo߾׏3g{@66mb[Jff&X,^~e<<<xh޼9POlh4'$$0:vȑ#jsN,YZn?"##`0j*~7My_$R+Vd2K.j
wwwvڅ#GM6VjFAJJ
'NP͚5 HNNfǎٳ'NUN#88XzEKܚ7o_|#Gxh۶-+9Q]MϢEٳ'pK?/"6lM6̝;]KII!!!{r!GNpp0:tk׮?ϟO۶mK|4h"667jժYj]!j+rJ8iIƍiҤ	Ã1cƨNMq]t!,,;wyYfm6F#6e˖<DFF秆3Պ^'33v֭[Yb:iӦ::7::/x&O Wܙ3gx_-?~!nd:tӧOؾfƍg2221ѦMNJPP4(1G\ff&YYY\|Gm6~'v;wqǏ}̘13foЯ_?Ə_n֭L6[^@!nrt'OddffҤIΝ;>|8j3^W/|f͚5e˖ͩ{`ҤI:зm6'PAAA\fffG}c=FxgJ5tP2:,Y}w^J_תy7+3;6m+1Lrr2f"11H{1?lV)S\qtЁ	& Ϸ~[=ҿfΜɣ>ʔ)SJ͙3iӦѪU+>2\5yåK*|v Y=9


>1ejl߾oD	ꄻ@ w+={6|perݩS'Я_>T-q`Gb6Yp!ӧO'$$9sWеkWo߮cÆ'\s|Ԅq"X	   CѺuJl68rzRUt"ܫW(k2߫xzźuJl߿?ڵΚ5k0`@ڰ5%PT\>իz`L6M2{lYj3g;(1QY[n{ТEu[NNNQTT$ANgcf%.sO8a?q}ÆYf_x{Ν:tO0|r{aanۃ|^\\\esj>c{qqjժ>#G^XrQ~ެY3o^\}{-Jl={We{?n{a?uT̝;ov}ŋW}]u9e{޽Kl;s挽e˖)S֮]koٲ}Ĉ~ߌ_޶m[~n?/Ҟo?qn}{nJgϘ[)CU_?xm=z}]oٲ!͛bK)_ x뭷Xt) ^^^ԫW|}}={6hZuӴ4xʽխzWx՚s~`ܹj*2_SLow%&VVwp2e
+V`޼yL2(nrrrX,Q\\|5woֵ-ZĚ5kJ4?/2~xJ5k˽ԭ?ƌ?NˢE8q"6Lz)xbB)ⶩ1Anذalْ_￿WPvfs}O>k!1=\xulztlڴ)SjN}ꩧ8{,{/? o6&M WKh4v;WWW w	+9s&{mWѣGsR}nHxi׮WClܸ;wwwFbaɒ%Ջ_w@b0r-ɅhذaUOQjL3,[v%]=כcsΑhP|ACv۷/Ç/Kme;KM5{q}hݺBWkJM}+ߩ6UJqJnӧO'00?emҤ	ڵ>g4o\}ܷJ̓Uco߾%B5&]2oRRׯ=z4lܸͫ
eJlq$UA:Ok׎xg1cZ+Ӵihݺ5Ǐ󄄄0zhP&.  @>QӦM`00l0>L6mO_ʞ={ h޼9xǈR_[aaamaaaUCiC	rFQF]zFNܹsNtt4>,͚5iӦ<jk2G>|X?GJi}i0i$f̘A||PfQs)*fԚuy֬Y6h"._iӦԈ[%GуM6qw2`}z)-[VcXcqlBn5"%''c0_R:FQQwh޼y5ƍݽRvuƍyW>|}l޼.JO?mĈ|j5S_W6^WM_$991cW_1{lJ7A5
!^9V7Ĵ徽ݝ~*ZjoGeǎu/RoƗ_~IBB

}уΝ;'ٳg&N\+n:_~չaQQ5mi.M4VFBυ21obb"/_>d2ƍSٳo:)͆(5[FhѢ]tQ +qe .\H.]XlcǎwaԩL<NGxx8-Z୷Rkk
ǹFNtOj4l0:vXbHJJtRz|PDq=0v؛:fbb"'N$&&ڷoϫʫ??̫J\\'{!11>b}Օ7˃)Ǯ)+qujeؕ8>j<X,t:7n$##ӧ7j$''3n8:wʕ+ر#?<}/"-Zرc}lڴ/Kw}ǿ/CPCߴiԩjY'UkTwѣ=UV3<S=lڴc_^sΝ;ӹsg/'AΝ;3l0&Nȗ_~?,]ӵkW3fLk 4hP%319{,|:;ＣnXt)FQuÇ3R#+AgϞ%\mڴ_~__
:u*&##郏-R	CbQwԨ L
\OfXbbbhРM5N8'ЪU+-ZTw}ڵ+=_+S̚52J`0Tl<7zKܹs駟~&NHz*T,))	̙3gX~=,Z薏kKYVz-vl}rr7n$//ɓ'cZY`MGzIhh(֭#((Bͅ={$!!-[pr7̝;.]Zhw }Q/^\n WNVϏ'OҶm[u/ԕWLLcǎZ<G<=z`<j]yۗ>]ҬY3HHHcǎL&Ο?_u֕Fʚ 9eӿJ=7.k׮k׮XV6okv_t)#FjtRCW6;xZ<%U瞣K.L4a...o^z#_xV+s׿طo_wȑ#}%OR	!*SrJ?9aGWu_fy1dȐ
Bs,ZӮ]r̍9'x`ݺu			3((BNCn6m`ZIKK+fkz
;_d%lsaϞ=Ypaܔ)S7n;Сf͚? ?swW_q+f5_
r/_ٳ7uۜ5c999nW]6MkKSxqqqݎm۶mV
{={VZS8Ç6mڴaՌ;-Z{nFQ}XtYϿ(;t:wuZߟLlق^ߟgb4K9r$m1=z\AOL07Ao+j͚5s=߇Vg8!jiKJJ_~ǇUVѬY3o[ӧO5}lٲܷWETtpBy]=<_yǉ_ǇsaX*䂂OԿ	jjb5``ܸq pY>222fժU:Vw}G-}KrE/_^%eWD(5s1rH{Əȑ#y饗D.]㏫ꫯm3g,;!sA.882gKZF.]9~8ԩSdddK)ؕŋKlߵkWj͛Wf\RİfpN8?X,BCCղS`0@ZZ=z 88Hjj*>(:Dxrm[`^}őLDD2d, ##X\]]ٳg;vA O˖U5k֌WKGrprŊ :tcǎq9u*^Opp0QQQs=iӆ NJǎˬ}ap"n7r9 vELLYYY$&&rIٲe׽"eNf,jec6Վ&bbb0ͤ2zr.]J?YZ9N/'88@:Dǎhт{B5KWB1AW^GC?M6%  X,fqZVfB	ft
Y'N,Ѵy#lܸXݻ7<Z	Hov2g<<<<֭zNN|5jNc֭6nٲe]k277jԈˏ<yZhAzz:}^{fѣGRVBTL	r#F7dƍZf222c߾}ܹ3wkVW'VTUf'YM6-wjTTǎjy5jMf%;͍-[dL&j߽{7V/^App0?#wujDDDpi 7o^bUڶm[c_,mT!DU1AϏ:ns\ffQTT']v7޸f?<x+lPO47h]egÆ
r]ta͕vWv?<6ÇӨQ#V+łVSNx_֭[ xkI?VKvػw/ {Z	rުVZ1sz)#XEjT+6FﾣqƷR$AQWFUSڻмys֬YS*<H6m tR[T/Fzz*t:4iŋ.1SRRn{SeV'ժ6ft::uqS8&D-W\U	g+R{WYBCC˽FQP۷g!jѱcGmƉ'@pQ:w-1f۩YflݺiZ<<<(((@ę3gXd	l۶/B\Cr&L厽4hЀuݶ><R#[/*LfRfLjj* ݛLl6Xʣ5ӿ^u._Lll,'O"
!0rʉ&UVm۶[>R4zhu???L&Sn Ν;W}ZmZ3ǅхt0̙3UR{~ŋ=ObA`Z1\tM61k֬Ds p<	XVo8"Vdeekއㄇk_\VeϯPj\.9ύYBV+ERBJ}ܹmi7o^}<XjۭLS 7t
"WǏkժN"_:5Qr
%ʥ,4(5Z&NX}+R{'DyW(9NQ֌udhZ=JTT-I)UVRѵDvի4%}ڿ"wBW\\\ҥ+WҔ_@ddd?}4-[R	!͑ w[0cuҪxbO^322h׮]He			_fU\+4SOk@Off&YYYTyلfHI={C7ި6<+: jhѶm[VXQë<Z̀07ͦM-ֳV~BCM8p`1c.]Ҿr|Ij/_N.]<n1bD#/2ΝҾr,` tԩveBT7	r7IŪHsyxJjVrm111o+wm9rdj{ƒSUErȑJ)N:1ydO^`M6WZ9!DM Aٓ{wܙŋ3v[/8_~۷#UJ3lӦMK5DG{h1lذJs :uL2M)2o<5kγf\BA-1cϟP(ss̚ۉK.ŋyKl{wYn]3m4N<YZCaO?6$&&!n̙ŋKkq1ZhqB A:Brp%;v?}Vv.99z{z!NQ  *}WZ9Zr%/gϞ7ә4iW7o<6lH(u}PPzBTk.3f̠{$&&V8mٲo_|oooÝwY8Zdv͒%K8u{_~!$$eO*|bfĐP墣ٴi~)9gϞDGGYVL&f͛7tRΞ=K~nzJO>EHXBh.v~u]k*11)Se˖oիW{{{)9֫W.]0rHuV.n^Z"97!!iӦcǎUVse jXV(((   ÇӻwoKy5ǀx׉'o}&R#W	:wL5j˖-c//Pr$>>>II9qU4&SNdɒ*7+..=z0f曛:СC:t( GbPTTV׷{f͛7.?1v WIfϞMy1c-zM7J8&UQΝKLL/-KiZX,XVuN[	q{÷T6!$Nj˖-t҅裏ޖ/'OеkJ(WTc	

WV[8JLL?2	!$AܹS]-ܭ8~8b<#;0wCGF;wO?-5Ozj	q	gΜ9zV^-!N$U;wrv{>}:~DƑ#GHHH`R_|{%K{D$UmҥK>rWwޜ>}K8Qmڴhoz4kE)=:tÇ$B&A͞=?e˖1p[^czF;vMO";''гgO~8q"&MjBQ`۠s|L<Fţ>iEV^͗_~ɱc8p8zŦMoxW`ԨQ3斏ȫʅ߿M 5pn&}>}͛ӭ[7n"""n8#Gعs'$%%0v1O7߰l2RSSiԨe˖놷=x '۷og޽4lؐaÆ߆@VvʙVv W͛ǁ8{,V ݩW6s:ĚB6Ǐglڴ3g`Xwww\\\X,STTD^^V&MЩS'.ڷo_,WIʙ4V)S WjF#={4rrrP禓&͛Ӽysy 222HOO'--Dzz:zhذ!4`0PB8!Dm$Aj/aM}HQBZKB9!D%AL!OjB!9!B'%AN!IIB!pRB!9!B'%AN!IIB!pRB!9!B'%AN!IIB!pRB!9!B'%AN!IIB!pRB!9!B'%AN!IVwNVnj+$B!DIB! 'Bj}q㪻l?g!666N!(Z~Gos=Wb{rr2MHV>q{iZ4.\Pf_{`` .$%%EBV9 ___ZlѣGiٲ%/ 3iҤj.J>,AAAYv-< aaaj !#j}W^K6}tzbl6py*MV+~!?O>dwѣտ۷o;wˬV+YYY]BAj-Z777򈊊҉jZf:ww}͛K猵pV+}=XuEpWw1qi&._,ANO? YձTzgҤIꚺ;uhz]\\:u*etVF/WwQk߾=˖-b!n/D3Vk뚔ӳ`H	{eN 222(DyTwPg\`` ѣjNRUzOOOϟNU4lڴsS!LS|<#lٲriZu4c^^|^^^dffpj.e:u}S 'uGr<]b`Z易 FC퉌$88ooj.m~^z]!Nv]!B[Vjꪫ'	cBW'kB!j:ҬKN!]dB!\!}BGjB!9!B'%ANr
!$	!B8)	rB\JFN!DMTGڵ}rȑ.77Ge<x:jZ2W!DQkzI޽&$$ 772ZXVu¹˗ԩǏ9!5Rq/p	|M<<<pqqF : ZjE\\DeIJJ %%;v	&`2nWфBRIKK#""bfaՋR㒕Ehh(-bjwy`~6$##֬YC`` QQQB!D]vq)뇇>>>닇~~~H`` Ŵhт޽{S(66^zMDD +q1Hn X~}u[!Z_#?k׮%$$Dh(..fͪ f222x'䢲mݺdwRcXӓr
!U\=ڵ+O>${fӦMP^=puuUG!j4z=z-[^_fƍjm\YIHH`РA,\)S
!S냜FN?ϩS9sZ;'hZF;ŋ2jU!DMTܶm8{:+YYY|`u@yc@o2'--Nǚ5k x駫B!ͪ MF9{luE@W=FCAAQQQ (Bq]>ȵlْWw1D9gQQg̘1ٓ,BQZ
IhZz=IxBQ 'DE9NG#BdB!9!B'%AN!IIB!pRB!9!B'%AN!IIB!pRB!9!B'%AN!IIB!pRB!9!B'%AN!IIB!pRB!9!B'%AN!IVw.Z7}[V[%B8#	rB*cXX,hZ5tV?B\9!MZL&F#yyy䐛K~~>&Ll.-f,EEEl2n`ٰ~<<<pss777t:^U :OOO|||ԯ_V^^^xyy^GIBHBٱc{ԩSֶVt:58%̸Yw-**bP\\\gNNVͦl6RSSKl6lfꊻ;:5kF֭СQQ$	!믿櫯"++06mʈ# Gre]"H7jKh4w^:ʕ+y7w߭
!n	rB2ߟ,NC=T\	k֬YŋbRC'DmBJ׺ukuƮ]$9O2s.Iljiݺ5Ç筷ު"
p:` N8ATTuA.33^x<RSSW^uI~!۶mn3{lH@sF\\\e{(f̘sVY}ாڷNyLc+ׯ*,,s!jZf3FƌCnhܸ1]4QKzBBBΦw̙3Ww*baڵ7
q=[VuN9ŢsΩ#7J\Q6Ml6SPP uJNMlz)c]\\Jhh4%;h4":NIUF*#xNCѠjiԨ:0DWFxR1vX>c/^رc+t0jX郜jEף0aw}7v"??ww.%1?~aÆ1sLt`qSSp:t(e:رdRRR+ӏQ\\Laa!vCѨJNq-Z5Hi45.}߁zW?˚f
z̏w Ǫ<~e*i[t::hiڴ)eGǎٶm[ܵ'Y>)<?ɴnݚw}x+*?ѣ9s&ӓf̘AFFFSN1z
~ǎtR5k{U.P)v;Z!I	y^^^6%*x?JMOǐ\''Vʡ\xSS)j%^TT^Nq(MORj&BL&8jqFu`wwwz#<\	 ݺu㩧*s$//{G}]VBA,ڵ((Deh۶-[nՕ. <ôh ȸm]]]ϧo߾$&&ҨQ#7`jhW^05CJscN+Qၧ'z4MGǉ\"TʺUAi~VfDB^l|y6Iͅ%nR6履~oeԩ:رcyꩧٶm[[hh(zl|}}y';v,ӦMje.yᇉɓ h"|jZΜ9Odd$wq&I&Kxx8gΜI&ALLYjZxs8PA	+(xWxYrrrغu+{!77=z0cFZ+ۺukmoƠAUcǎI߾}ٰacǎeCj愨Aj]sln)99`2220,\^z_Vȑ#{､o|5ĭ\Bev_րVBctt46nӹ5k4h_Wnƍ,]Yf}v^z%:u%	QԺaIWwfvr2^WQQQuFQiINN.m҈UV4nܘ듑Q'n"e]G]:uO?^CUhCVV{׮]i֬Y}p ]<;k׮nj


B|W<:;YtIW(--Hi,Ed,gq@AD/~qdd beRJ)4i͞פMڴMyӓ6'K'y^u̟? 0}t/mYgh4 @yy9X\~[ng3'z깓1c<&0\\zͱ{}!,9OvލM6&Dqq1/^:?*
Jޘb1R*xw{nbL:ػw/>fDDD`РAXlנ. && XJ?SCŷ~LcĈ8rFc~BHp] {n,X YYY7onE2wKx+&&UUU={6=իWcH$n1<a߾}?>mƛ`h4BT\TCb`Ĉ
J8u/^^zۦQV t'OBRСC>mR7o"99[GBRNføq㐘\p>}:VZ,_@n7|B{R СC~eZ刉ASSZ-J%W3=رcn޼| -)))ׯ&LBrOƐ!C|޾Ň~7
|$Zj%$$஻JasN Zd2ҥK_8R><u]NcƍВ+99կmTTT?/^3gz=&ۃS[[Aqyʲ-!!W\AYY%%%ܼHoob  wߡ* rZ+WЀ>}Ðd(((@AA
ڵCWӃ[f999@ss۝N'd2'N 66瞇l9sƏn~<3Xjh1Ю]a<y֭\.h`H$Ͳ=t\|qqqr
a֬Y7oVZǦ&9}4>#Boxݺu'Ny|cԩhjjBcc#ޓ+W?9~G3ׯl6d2!::			z*1c֭[q9s&rrro !!
Rۑg1dٳ6۷/4<]v!77O狑#Go2!xwٳܐ&744ѣhu(`J
7np=7nhs;[fq)kF#bcc}~\|
$n"VF+Ns[ijjPTT.]ĕzcǎQ`Bz9~Ny	&ʕ+1qD\x!1vv B;r 7a={YYY^1Lr
pA̟?			0 >>8h"u^X+!!isnǵkנT*a зo_ʯ>`_lvD"?~ؿǫqY%H$HLLDYYr2^rJWbXr%|My꽎^{?w}YYYHHH  l6!Jp8P[[]FBPv5o]ׯCPp VOPbFdjye{dٽ{wtOl	Lv=~y
,r5558ydO5<q+aZ pQ @~|_&t;|Yx{_d2W^i3aH$v7n **
uuulh4!"QUUԠ*ch x ￏ
OvQQQne5DHU*6Fŋqwcر=,^9_
1j(.}/kӇ޽{g}6mT
ZX,툏q!"**
OuS
ש)Nje"v;{d!}D";^XDB00`j:ﾀádH6׳WkVNIIIȅv1C,p-۲s:70`QQQ^{~	!=C鑫q[ Pw?u(X455q"""+~vBnb|\\\wLDll,v;{bX J;?Kv%{xȱÀ	\Ӈ?ٳǧM#BJJJM|<RD[z ?-6S>}!sl{ܖZn?qv{JBWВ};AV%KD}W_Ӷ/"ش'//+W`΅?_c&[krZ. #V{ VWeeeׯnܸǌZ#T(xȱ+kjjf&ou>3-T<{ｇ'|N>J%KGlϞ=8<rh	|N'
_۝/0lcOnܸXn{{UOH3&&@$j?m%	$ct:DDDtAɤ	e
r9BaS;Ktt.\  ̰	вu	555
~}|bqW{!@dd$l6Ng'?j@&͛0` *++/®A[{A/=PL_*cK(s9"\;<#~:`믿q?!??08~?rz=_yrVR 0Z-Ǝ͋]/P(TFBj7P󦮮7o͛}HMMVZ-[E ]~۷o#::둋sǦHHHf:px˗	A 9_rAjj*}JT*ATr	$t(
8N477CTB(rS&Zo4= @@d?e2t:)
PZ/_D~#]V"FHRf'zCbAdd$&& n\W{= 'k0P(pu;
[;FZH$l\9:@ FPxc_g[}=ǫ:a ˽!$b~ql6C,l6 u|bbbt:
d2Q GH .11+4p
el"WWvk
z,阷dOh+W@-HJJ8Atd\y$ן۷o#224p:j5İ6+++ ?rZ2 s琔ݶiii~4jBH'PUUfP(VN9nv<a^W_}K.w}7^)h/((c+iH5H$pU]me}x#F`>|8F#Fh	!.fϞ3gGtxz亏aTUUaϞ=Gii)~iN)HNNv}̘18qD/JR%Aa$%%qz=ӧO{~mذeggw] n*݋˗ > p	TUU7n\JBZlܸ			2d %%%00LPx:,+vȊ<j̘1w*G.CfnBZZ;ⱲNyh2!@h	؀n8sN8'NO>qU YfaرظqO<RSS1|pRhb


v	rX,8
BnJD]]T*# 0|.r hȕ ڣ>zwYofΜ֑P1vX<?8/V\Gy0^3wTY,7~ٴid@jVI\bmYVBzd2^ƎNۼy?K^ȵg8s͝v}uaǨh-Z=:t(N$$$vΟ?|g^/˹\T5%rvHRBt:>뗀#F`x'!C`Сm ;nHuݺu={g!\ [IoK-}g2d1t6z0X,xq5ԩSسg^W ␕ 8x z gϞEzz:_;&a	@[n!%%Bc{=VZ;w >\v  w}Φ!UB(\b={6.\&=6sƨ'-ZN<c0$	AFF222_ PRRk M~ 0av8 hllL&Cmm-mn<pdn@ @}}}yGZnSO=eī+&ts\\ pUbѢEnO~h	誫; @^ЭkIGaZ!V4#lt@'D馐
 7 GpkaN:t:&L Nb߿?M⤥HKKÞ={:\\G<rć&^Œ>}E麐䀖`.77tBBVPAı>nڵHKKi?^ϥ`˺r@Z?_\:o4?wy?ϡi>!A&ȹZr%z=~@7% C$Sl2PVV'OC8t:̙3N6/2&Lt&Ly_X
ݎRsK<ZJP* Hux<=z;GO6!#?~|0wlق͛7cҤI]>k֬aBP;vlѮܟ>}ùrqqq`B4d	0Z-ZB᜷ 0w\.8BOHr_n9CW^qo/݋c֭H$n? P^^EwhYtRWj 4B^|  \bZgb :6vÒo'OFii[OqZ3fÇzjB.fВؗZu8p8x':<nff&bbb/pP(Dmm-
{LÁzwt-[vZ|xtR,_KKneFĉ|ك}B,O>G||<ѿII;vO_.\  (--Eee%~HNNFNNv;b1=oHOO ;8sL	BHQ so&ZOj4VX§Z,$''t~;^~elڴ	}|IhllēO>ɕl*))\.H

#pkZ8Nܼy;@ P(@ cbbRH$dT*H$rňL&X,D"P(brrW\kк^gX,0hjjBSSL&-6p8hnnvbbpl6f3wbs.V3T={7H$}v64fBEE;'8:!G\pp\ҳ]]K.c=[+d2A=<.@ tif9P	%s຿.Y"Bbd\Ah߮lOt{>.}u}\Z?F&fkET\HKKzc؞{ ؽ{7VXgy۶mߏYfq!9BBԸqbx6m3<5ظq0n8zףuuu0hDSS#
iX6ՉnP(Ddd$0
xNn/d2Y`vנdB!wɖxsH$D{;]d2@T"22QQQRRl,66֭ジgݻBz r0R#G{Yc.6GUttt2NhKm2`2@h4l6l6wRqk^vP(T*0\`%^?lϢP(DBB?b2:nUTTq `ժU<x0q@0J%/^<DFFȑ#0L]:Z:o)X]z0z>ϝ;; (#(!!뮻  `Z3=SĻibZ?Rm}H[	!C=ru;N0&k_G3ӦDWRR"
	anC"f!""fVr<ls_y{J0%F9@!a]Q*ɺ},J=^]}`zݎB?ǋe|Zn#--GEQQQCz*M6!M"***j1sL`ܹ<y2=nϧpga0`0+8z(݋۷oaDDD@VZ-QQQjIpBxW_w ;@FF^h4h46HpX,j(//Gqq1_sqe֒1i$,\X`A`L.\W^yn݂ltsOL&_Ν;|@7[QUUÁ+Vp` Kbҥ "|7())W_}>Kr+~߿?lРAo|iCX.\   K.ƍj:N#))	SNń	W"ŋqrrr؈4]@NӸv-'>lׯ._Xܣ<{͛qmvcĉ\y+WmWQUUr\~(((_|j\m^Z%Ebb"w!C  ]Мqr['_rflU[n0}6ʠ=j555 >}pAff&~ ##?p80tP;ׯhĖ-[!#G@hhh^Jȑ#{7v۷q1; ;E]SyXV]sc= x)))HKK=]c /_ lܸ믿b [PYY'Ort:8l9+1D\Q([֊9*J!Jnwݎ\"[w%HnZ;-fXٿ]ܳga6aj[UTALLÇ۷o dffh|w)))Jhnnʕ+tRL:էcBKr8z(4/_|N'W͘駟r&OZz݆Mo#::EEEHIIViee%f3,N>ݩnذ&L  \F
f.(bm4^.0Z\`'͵V@ pZSS50
\`111dP*P(nT\\"""BVݧuE;wb>p Ǒ!!))	ÆjL&08-] 0aJKKq%=v,Zr< >Cߟ{,P@ L;w |]{f31h 8NhZ\t	Fe˖o&,Y3ft\.911;4ڳ$H:]bbcc1hР.'fߟz=\?9$&&~	@he@ @ p`mC9nByy9C[MzQQQBĲE Ъ'NWƖ-[.]e˖ᥗ^¾}'  eggcʔ)>ȑ#1p@KxWu0LTiEEE8p n/^ӧO̙3X,Fzz:|MdggcѢEp:رcJJJPYYv#B>?>>c䠺mpjTVVBRa̘1-5۷/P(Mq555P8<L3g՝׺G ,X"rY־}PPPB|'Xz5	*
DxoߎÇ5',X5ŋJCq_BJ%N,\Fjj*J%A}}= ȠTr 0{l|xװf]Gnhyc=!>;ܺ@}}=,XuaڴiTsjʔ)\е~zOnGŕ+W}a߾}իVQ{@KܪUT*	DNO-;Ӱi]+l<xĽދ+V hY9.dWgeex뭷0{l^˞_BPoBOrصk {Jȑ#73Ç?IT*J%RRR HPRR`ٲe>u=lǎ :t@B8V[n.8sme* ""2
2vB[]](\[ٌ&455&B[-p},\ل	p!_~ׯ[/]~~[jg%5q_r'O@ @BB~6mP%Q=rOCs,6UO{){<P\ AnXaXP[[D )[\S?R2QQQtDDDp[٠}BHW| ݻw}ȑ:?V^LLL\G؅
Zl,=LO!	ȑc۹.oQBQrɰa=u":~<$^򓜆37(	!`	B!C.q-'O=B!+96Ha/N8ӧYAfq)7Zs;J %!'!-=Ml	.@{ｗ8։h	!Sr@KR[[x 			!=f/=ͅ+**!ɰ~z?f٧㳏 cYUU&E{47BBCrlh顪^Ǭ,h4tͯpȶO\hh=ϗ}OX,k0bH$~;0fG6ZyX@ f*kz _b}MiALpX,H$`\ <>?lea }痐F~zNu=VOH=?P.੧ dff L7KVs\k^ ǘ]$O؀Mvt:Z-=ѣG|	!"X @jj*cuߞCUvΟ? ={6.\7n`߾}hhh  DEE QQQp @<~__=oFmm-.^6`ӦMlN\.Gtt40j(\!B>;u^|E8B8fw{zzc/UÁH$B~~>³>v6`۷oݍ7|r444pAJFAbb"!C`РAquWwbAii)PVV[nAAף 
#F@ll,rrr#33v(r9;?"B>p@$fqs怖j8m}Ɋ6yR]]l+;D܏T*D"A~~~l233?{eklw%.(,,NCSS
bccV	&x\PcQZZ+WZ.8GDR	\CbXڵk8~8=RjBP 22h42dRRR0` Ϗ֣lHKK{NM!}xꩧ"v̓`]uVFmۺ}l7B\x/q!777yd׏t)iӰtRzh4 @qq* ";;mF/_ƵkPVV/e˖!551+TTT@]$%%Ð!Ca|lHJJBFF͛,a=l]t:!{W!A :nn{YVVHMM[ZEEEXhQ۞5k VYgΜzzٳga0y9駟r=|.빅㺫c~aDff&XZ,\|۶mâEP]]Hl6111~iW0`Y,GբMMM1cj5+V`ҤI>\{غ]~{RIY!y=}|B+WjO7z>RcǖJD0\o6vF{)I\eff⭷ނn࣏>0ͅ\.fJuuu?~<V^}Bb@׃a(>7 /~̙3G@B-1fSS.^\!LxZઠ @sss/>x1yd<x0L&|_P(`0 QVV\^x,c{6/iG[]}_}6N+VtiBH@r
?\=o1m4;w.\pHd=`0@P:_cǶ_O`Y*9!'좜P<xp(m۶l(..zETA|0nݺ
(J^wr9Ҧv(_!#ءk׮)ƌ 	XCF-[jEuu5"##B|-!0sL<c0H$PT	T)!!",9vϽs6lݻ=RYY[kDш4,]k׮Emm-@7KאL&CII	0x`nifZ%[Xr rZ0zh>Ցs	~ӓ+bUyyyNgF-§~/Dvv6W؞CL]]JKKP(+prRt"))) GXrddg߸Ba555[[=;w.ܼyG3fJ9˗Op3EŋTTTjDш_~̓VNՄ|fA(V3f{@nСCHOOX!{ｇD"nSY^ҿl2,[G/Gu{G57US;$	ƌ,<yZ֯oodhnn0\ dn^\{)))2	@n8sƏ]ǖI1{mmmv$&&h{jT-/566.`ݺu~=t7b 8p V^cݎW^y=zIWTWW	3gt{m삒#G`O0f={O?tE233o>Yf\[Co+y睠z?SC|lz
OjoEￏQF믿ZŋkaРAؼy3n
TyD&^\MȗJ0LHJJq)=r.Dܰhhb۷a!
q]waɒ%8tr9"B:`TCΝ;@7%G}Fi{6@n}Y? ##KNѣu͛~	z^^$ʕ+JXtiο8,^RiiikGnn.Z-q ??,s6B| Z!l6sIL2#Gę3gp9ݻ
*
шF?GCCz!޾l6?OmG^^L&GyIII\̘1##t_r$8AVb@Tb?~<F#n޼W)J<1cb>pJ\ҭ]@˗ǜ_B9(o*))Nh0eFFFH)vk>6 MC_I8@0TRRZ7xJկ0h F p']sxej(//r!N{?>?IIIGjj*y[&+$WEEjjjPYY	^P}bػwo@Gid2	a+5/IVӧOǤI0i$zĉ8{OS{xíD&G,nd2y]:<_BBT*;GBBF#$	֭[qlZBArpXWB@IIu*
cƌT.]v^o>}:FǏɓ78Dev;,^}Umܸxۯ5a/+9r9Ξ=Xܹȑpv|&y&}].X\r Z[ՊDn%,G}4`dddѣ:ƚ5k{YO=[ǏcѢE1cFj:JiӰgF ==k<l0:usz=uTؾj*STضmZ-@7 #Gf)jܹ3(,,ɓ'Rږ4}t/z}g~~>nnRw}ǎkS*::^PR@˂ŋmsb뷿-6n܈w>ߵkqq1;|^9N*c=sf d۱i&\v́nN+..P?CǏ8,$	?#77<xp-))o~.O	aBZ8q9 ?~<*sMbqI^<`0	8
i-F Wuw\WkuN>˗/ֹMλk.h4L4p)8#V#"""M!Q GH+l6pp̙.~?IO0w6=qÔ)Sh4<94iV^B<Ý>bAQQr97v9\9s7aQzӛ;#p87xjgΜA}}=T*Zmw/bln%lܹm:Ν^z	cǎ}	6Jݻ?o}׭[kv7no	UwB:/A7oM %Ur]^yoSHNNBt^8>ӨIsY{)=a=zFBz_r			_m۶E\MMju0lRR7+DW	عp
nݺ%Kի!?G.33[lbrut{BBrrr:}^>KJJB~~>RbtjBMXrzLm	/݌h4?~<̙%Ktz:cueߌ3;v9sz1]pHIIAdddHϑ#$U JNNt8lo\C~^9 '@t::_~%n߾LRiPZz]T14ԩS;vlX		5aBZd2?K/RÂpi$%%C׮ʾTƟg͏sz=t:fϞ/r/!r1Pz
?8x9Ǵi  gϞms[ı:󕗗'|%%%~o0ضm86-{BrzL4	رcsaذaHKK0> m
ÓO ozW^ￏ믿FQQD"͑#$DP n߾sH`w؁6v]@$A,Dp8\=ݎ7oǏqׂBG^{O^֭À,P__&g}6!9B gų> 8r d2zhnn~9|HMMň# 
! H0}tL8auG8~m9 }SSS!B;ＳK	,
@|||@{GKN#GbΜ9n=vIxK\QQUVE`D\t:<	tS	qqq8t_k
I]],[M'V\0Trpe0V;<z/lMODVߓ2^]^n4BH@N"`Ɉj-  ]ʹ% `4؈hb +WtPk p8  P(jr[qԩBH`U z> NڥcT*< Z
_WUUujdz|oc.%Լ,F#RRRSO ܧ			noذƎ;:ՎpEXaȹN.6;\.GZZZh4۷o,.**[RRR fddO랤~	wƢU"PBHrS}}}oݣp8L>b9>nlzDGGw]=7!$8Q G2@_ݔp%򗿄JhtKB	OBa?~mGNTRG@=#F݌phZnżn`0G3	!g(x#(#B)
HP4BHѧ'!BObPl6@ PH[gިGB!(#AB!C`joÀ2?v;".JP*X, ]zyg960X,0hnn;a2_`BH
@_~عs'N` >?{?SLjРAصkΝc|ZX,(++CjjjGaܸqX,\	$ZA!$X] ob֬Y<y2""":`ĉ wT*Uw:hjj~3,[Uk֬9s\ꩱSL=܃(Dyk4,_K BzSXrl'|ҭr h~l xs6UUUoBB_@r9͓#*c@upQK-q.>r"=ƌ^ԧO| 9~]B~"p:@7{@xݥ#++7osI{͛7ov?0h ?H._})z!,
!BxB!rB!<E!BOQ G!SB!rB!<E!BOQ G!SB!rB!<E!BOQ G!SB!rB!<E!BOQ G!SB!rB!<E!BOQ G!SB!rB!<E!BOQ G!SB!QW2    IENDB`
--- FIN DU FICHIER : ./public/images/car_sketch.png ---


////////////////////////////////////////////////////////////////
CHEMIN : ./public/images/scooter_sketch.png
////////////////////////////////////////////////////////////////

PNG

   IHDR  r     >2   gAMA  a  
IiCCPsRGB IEC61966-2.1  HSwX>eVBl "#Y a@Ņ
VHUĂ
H(gAZU\8ܧ}zy&j 9R<:OHɽH g  yx~t?o  p.$P&W   "R .T  Sd
   ly|B"  I> ة آ  (G$@ `UR, @".Y2G vX@` B,  8 C L0ҿ_pH ˕͗K3w!lBa)f	"#HL  8?flŢko">! N_puk[ V h]3	Z
zy8@P<
%b0>3o~@z q@qanvRB1n#ǅ)4\,XP"MyRD!ɕ2	w ONl~Xv @~- g42y  @+ ͗  \L  D*AaD@$<B
AT:18\p`	Aa!:b""aH4 Q"rBj]H#-r9\@ 2G1Qu@Ơst4]k=Kut }c1fa\E`X&cX5V5cX7va$^lGXLXC%#W	1'"O%zxb:XF&!!%^'_H$ɒN
!%2IIkHH-S>iL&m O:ňL	$RJ5e?2BQͩ:ZImvP/S4u%͛Cˤ-Кigih/t	݃EЗkwHb(k{/LӗT02goUX**|:V~TUsU?yTU^V}FUP	թU6RwRPQ__cFHTc!2eXBrV,kMb[Lvv/{LSCsfffqƱ9ٜJ!{--?-jf~7zھbrup@,:m:u	6Qu>cy	Gm7046l18c̐ckihhI'&g5x>fob4ek<abi2ۤĤ)͔kfѴt,ܬج9՜kaټEJ6ǖږ|MV>VyVV׬I\,mWlPW:˶vm))Sn1
9a%m;t;|rtuvlp4éĩWggs5KvSmnz˕ҵܭm=}M.]=AXq㝧/^v^Y^O&0m[{`:>=e>>z"=#~~~;yN`k5/>B	Yroc3g,Z0&L~oL̶Gli})*2.QStqt,֬Yg񏩌;jrvgjlRlc웸xEt$	=sl3Ttcܢ˞w<Y5Y|8? BP/OnM򄛅OEQJ<V8;}ChOFu3	OR+y#MVDެq-9Ri+0(Of++ym#slLѣRPL/+x[[xHHZ3f#|PظxY"E#Sw.1]Rdxi}h˲PXRUjyRҥC+W4nZcadUj[V*_pFWN_|ymJHnYJjAІ_mJtzjʹ5a5[̶6z]V&ֿw{;켵+xWkE}nݏb~ݸGwOŞ{{Ejtolܯ	mR6H:p囀oڛwpZ*A'ߦ|{PߙHy+:u-m=茣^G~1cu5W(=䂓dN?=ԙyLk]Q]gCϞ?tL_]p"b%K==G~pH[oeW<tM;js.]yn&%vw
L]zxem``Y	ӇGG#F#dΓ᧲~VysKXϿyr﫩:#y=}ǽ(@PcǧO>|/-G8    cHRM  z&         u0  `  :  pQ<   	pHYs      :IDATxy|ǟd7"+,VAQq6uk)*--UzhjUO-JwQٺJ%$`#ld7dt7g<<fv泳3y}g1fC @Qq@ @p!'@"@ Sr@ O)B	@ <!'@"@ Sr@ O)B	@ <!'@"@ Sr@ O)B	@ <!'@"@ Sr@ O)B	@ <!'@x@ bW*q$O>l6qB  E\Aa爰	b`Zoy?
Ef3R]ZMENa4IKKʕ+_={lnNb>f3K.q5Zn|Ib`6e'}_UZJ%|!'xغu+(
J(+Wؾ};UV'vJ>11Of<vSNȑ#9;;K^^jՊ^{???yb"-%Jb]3g`6qrrXbl6/lǇݻ3b<<<x2BNTc49qo&zwwwzI&Mڵ+7x۷s	yR+uC̨j tÇ[.z^s>66LV^͞={HNNˋ>0Y$<F#fFСCٺu+yyy4hЀVZѽ{w޳{n֭[Gnn..M6<IMʕ+g{mYYYf%&&ڴZmʔ)[NNc@ 222lk׶iZZ{8''Gm6̙3m5l7ř3gl66k,[mժUXaﺠy{ҤI6Je[zuW9Slh4R3g'O&88߀h+
`#;wc[n6ѣcԩt__߇>na6iҤ	/^dʔ)[v)c՞k2tPKppC퓏r	&ӭ[74o̅}ŋOCwb!--ڵksAڽ<W_eРAE>^cXbE8z(A&BTʮݻwDS0a;wnݺA Yccʔ)s@Yh*T
wΞ={xcƌE>^!}GԫW[7mJ%{O5_g^H!O#G?I&{(Q*<yZ}ϖ{kUZCL	h4	GJnݺvZF#JRGtf7o.b]Z<X,zۗFv;BqO@J^^YS
Ǉ~{"Dch4j*T*j2PJ"==Bq )h42}t2225k/OzHOO/}ً=zPjU<VXܹsh4ܽ}vl6BNDcZQL6SoVж-X,RT9T@PmDttl/'?|-<SlYBCCQ*ϝ?xg!O,{믿f1dȐ[[Awq<==(AQH۶m	d2a00--Z ++aÆVQ*L L&&MGkRɓ'4B	x.\HXXmbJ%Of͚{߈gҥxxx^$LJ;w.C BQP85kAՋ|7CԪU5<$%%ȑ#NnAV˗/ӢE6N@PH	GǇާB 77QFtRZj%d-֭Ϗ>}P^=Ο?G@߾}X,|wEf{ZBNDsQ\\\

l6c6b+n$>j_|CBϏ7xPHI1YV^OVpjJbVa۶m8#F?h=$$ݻsj׬q 	ܹs)SNl&--Jŉ'CTzjʗ/F,R}'Om۶,]-s>ٓ$1T*әEh$&&={g_`0oطoCý
.iY&Ov_B	h:uDBBh4|||xw	%((6m8ԌRTfz=+VЫW/1IO&!CaƏO͹r=l6sN~T*r._Zh4Vڵ+:t$""k׮QNEߔ)Sh4skq 	'33^z`_ٳgׯ\r;x{{ӧO;bAPV3fps%_/)<M(
PTtЁ8Z-ݺuUVl۶5j(^xF?͛7ۛ9?L:(/Xٌhdܸqdee1{l<<<hܸ15jfKZZAAAwܷhdTTYf?uV-t(fl{Aa̞=ŋo믿3uT ޺u+gΜŅʢEؿ?AAA_]	O+ҽk6Z͍7X"M6m۶-[Պ`h4h"N:E%Xx14'{=VXA׮]iԨnnnlܸ ,>Ӏ4L&X|9l^ϩSP*H2d6mjժ4oޜ`jժEvv6iii$''s1INNF3f܀ׁJs#fԨQٳ'NiҤ	+:tb`0Zz/_ҥKIKKc޼yԩSc4A,@V;wvZqr{/JEz1b-Z7f>|8[l!99@*UrGRI!
A5ժUZjl޼s2vX]氭t#""ؽ{7ׯ\~bŊLɒ%!88Ah	n"_d2qF;?	'7U(<[ػ5P/H йsgfΜO?ĉsؗ݊>}:SN̙3(
y뭷0aBh1r'/RBJ*T*h4r,^W̽O%KdrS_~Ɋ+09J*ѫW/=fYat>4igFR1~xʖ-{<<<X,\B@@ jDʕ+:bX$˜D.";>vN̋/HժU1ܹQ,6(JH	#!!+V?A r'Ʉl^z 9rʕ++Z! +$sI"##Qռ1N`bđw}K.n: LÆiݺw!B	X$"t:t x]@ (JNCRӻwo &M' Ui82{lNZfٜ;w~A^hGr'Lh޼9 W\JMg4o	p+g@p7fZ-:3fĉZ8qÇmg)C5>>HFhѢC࣏>bGp+ҪMwۗ7xz ݁[
0ĊP Hf';T*5jҥKsZuX,9r+VGJJ
999ܸqC>BgggJ.-կ_FJ*0AJߓ֭[x7prry?m(?"xHbKsϑBhh({L28;;s!6l˖-[wIt;D"n4T*7Ǉ6 PzuXvA$\lٲ~dV+e˖VZRpwwcM&׮]l6ӧILLbPti7o, {ڲeW_bAѰrJ:t^8E#,rǊN>cժUc<<<HKKۛΝ;T*9reʔqXdAܰZ9rFñcǨUgϞEV~zz<t;!oBƍy	n&tIf:s|r7n_}-Zۍ=pMFѸqchdr^/,q#'xdX,hdӦMlْ?yR0LxxxаaCy<w"yA 9mݺ5ÇGR1boli{b;|ʕ+ǆ:u*̚5M.PC])	{xx0n8N>͒%Kpuu{tQ.$/۱KǓOgXV=ʮ]طo,:
Xd?b<Rj5f=z//sYz	 O
^OnݰX,Ҹqc^ 9u
,ܹsOh4>*UDVP*;c(Jzѣ<y22a_%UHnJJ~cf3[fDGG?AhL;W
_ә7o,ƎKfPT5#dT*ÃS~}t*B
jRRRh4r,/"E}̛Go!<<JEdd$eʔaܹcԯ_TΟ? iً"ҏ}$&&}Rzu"""$>>ڎٻokԨAFر#&KÇ^G		fCҲeK^ubcci޼JuA:u
 V` ++	&`4EC@P1|_ʯ3F.[r'J%iiit:j׮͍7HII777m~
UղUOx`ڵ|G4hЀ+WsWcW*Fپ};
JW_}E*a)9>Dnn."  Pvy/7w\rtFÂѣǣ8?d~mbaĈ\zqQ˙4/LV+ݛt.^(c{]^cǒkF߾}ʢRػw/+V 99Yq3g̚5KB=>ENPFt:uNժU[NjhoߥAf̘p3b0sLZnM~hٲ%iii#
gaÆQtifΜ/y摕ū*[8_qAm3zk<T*	qweQX,׏I&ɞZʹix饗m#B	
Zq1` >3v!4IϜ+c6ٴi[nnݺ9r5j0j(yRoN^1(
ˁsjhnʲeˀB~t%@ܭ7o&>>ӧQHVZ&Mo˥EV\_#E)?,,ݻws|||P($&՛lvm4{l>cRSSɯf͚RX1pnnn899c1tv
@ ()˾ǳRDѰn:4iܬٖNF?>:uj{nIMM%;;tN:uKg"(?RN(_<TV@Zh!ױkժ.\$''Rm۶j֭[wo*x 
I5k$339nK٦&xVӅX`u=<<[.eʔ!//App0%J矧A4hЀ?S?1ͷL$F ,,\*T`ڵԭ[@NNx(_<:SB5kF-ܹ3aaa	\"Q"Y~'.^``˖-?~O?DJEbb")Sٌj%!!?
G9}#@Æ)SKJ.TȾ}Xv-ׯ_ѣ?F\<''ŋJݺuQ(RZ5oΦM;v,e˖ѰaCٕhnY9+@`dybPNv-o+Yֺt§~JBBݲ۷Stiϟϐ!C0\(4i\gϞrO'c0۷/9/**
"er#'oO5jD:uXz5psSJP,n2xw0` gϦJ*pB\]]DFFb
ڵkGLLǎb0m4J%L0ӭ[7>C@vt/A~9mۗƍl2Ν;'vJ͚5~:~~~o=dzlYR7x%l6[o+Vlٲ|w󤦦ǳsN1rF@Vh41w\j5nnn(J֭c͚5;w`	QWTW^y:t+V5kɓ߈&33///7n;NNN{lذC1tPjX@ EjwwwZjEbb""77rqUy{www^z%f̘Q`U{{d"W\/̑#GUV7lذ_~{Gb(SŊCdBCC9<'N`L:űz<l6SV-*W޽{ob?cf3/}AVc4Qt:Z-sO?xLŊxdgg$$$De۷>ӽ{w{4;w' {1'&@ 	+)SXz5Νn V͚5[0!'kz=cĈL4ɡݎQb41L(
U|+l؅ٌ^gɒ%,^Drssqwwfq14Ǐgƍ$&&
!BNpHl6Ӯ];\\\عs'))),Yu֡T*yx饗ظۉ)@ZZ׮]cƌdffRF:vH6m丹oZf߾}rC߾}9p ӧOg׮]ZsҵkW! =LޥxiРǏUV޽[\B%⥸1I=znݺn:6mz84~iw^GPR%jժ/J%n18q:u`4gϞ+W/:lŘ1k+>iG8b!--Onn.fYq6lL2ߟ!C8JFT*h48qoBVxo6k֬y7Օ\:tbח6m6_|'Owޏ	ǂ}RhUHpssTRrvbϏ@݊i:УGRSSqٗ_*^j5j;mv'<<<hӦIII*URJ9DGx[8{B?;F||<psYlgݝzKG$UAdFEBBÆw(Jvͻ˩Sh4K4uF%pss`0Eff&Z3gΠjb'<cH7xB_~PGRZ@ZVRRRviiideeq5o~:7n **<*V*$1
&֏?$*T_E&M𒢦}L&܈؋%J˥K֭...RD	ʖ-7)SVKJHn\J_Mtt4#Fk	rb+Yvʕ+ٹs'j+Wdnܸ{GӦMfJRN|(i2~WiҤ	sAc6iѢN"((HuԉtHJJK.r@;v,9-Zx'K <RZիW?C2epYYYvyyy/~HBNNeʔˋ5jB\\ʕb"
%KfKboڴiܸqmrq(BOBB>>>rK.qeiyYzu9ޯf͚;d2q,r`pvvXbTP777vMvv6ZBBNP('+)e|4i҄_|NG߾}9r-Sl&99p+[v#%66V+R*DFF͋/Ȳe˸x"PR%t:III޽^z*r3d.]f͚1`ʕf͚TTI,?Fl6ӧ^:&	Ju-777FAժU_>SL᭷޺e?
wL&poqqqɥ|?H++?/4RSS9{,III(J)Y$e˖ϯ_@9AH7}jN   ڶm˲e˰X,rPT\֭[[oa0x7X`=۷gTZO>D3ga߾}+t҅<v؁FroZ
"?GIll,ŋ?u:O&&&Tt:ׯ_d2q5WU7%k_~'%Ӹqcj֬I͚56l+V`ҥ5j9쏛n8m4~g5kƎ; nBŊ`0Pzu
%J@TV[UZ___ʕ+Gjx;e]zuRRR8sC,!'#ҤtRvMVXx,+ш` ))oʓ+㥗^W^?pe~7y4lؐm۶q|MyFp%V^3;w.³"7111Ҹqc"""B
L&L&ŋIWPL%d'nnnxxxмysӧuԡtҔ+WNIV%@ 9^|EBCCiѢuԡG̜9SDf6x7)l|ᇤ?.&;߾nԕDGGo&	Hvv6ٲ0"//	Y/;;['xD	_M߾}	AףP(puu\rDDD0~x7oj~.]?ٰaKv믿ׯqqq6LvZx{{ӹsg_NJJ
˗/%L <||zuƶmۨ\2βenc䄳3NNN`0$77tL&ǏՕGRbŊԭ[RjqVa޴X,۷7|t4i_|ebv3gdƍL&t²e^bA0r	lOOOt/hbŊ(QZZv(͒fXbl6rrrl(J._quuŋRT)6o@c f9B>}eӿdSAqIIIYCquJ.MPP۷Ak֬aԩb
z=ǏgQ\9VZEHKKc	<x.ЦM:Ą	7n}aϞ=$''ʕ+Сc9`6	 nf{zz@VV,d~:bxܸq'''Zg6v+Vo߾FV+Ν=z *T@ڵ	$88A8Js턞Y,֬YâE8qlEtvv ''V+*T:'a_0l^O\\III<yӧO%FkԨA6m ]'V*[ߊ+ [E]\\(Y$J"//ׯRprr"**
FlfΜ9#fV^ͤIni
mhDdۛ6mжm[989̇<j("##y<y2p3.СCtԉ+V8~_ȷ~Kff&Jb֬Y3ooo=Ύ@ xH:tʕ+SlY,yyyrM8WWWJ.˗\rr<<<(W˗'11-[zjw.+N#55kגDZZ
OOO|||jժ+WNsf,s爊{FkZ֭KժU2yBWVU.EBB/_ƍT*J.?m۶N:dJח%K2|p>CF#W\!33ׯHJJ
233ݸqCәr={]RU̗_~ƍٵknлvbϞ=<y<j׮M۶mر+n$j3c	

b	>}^zFݝ2e~zˣdɒ4i҄L8ŋ@ xz3oƸqx/bAРA֯_/^ ]DN:EBB\rՊnnn.]*UPjU)%Ht4'{غt.^ŋIMMիsu233eѦhST\OOO<<<s`8r;wf!7[P0ܜk֬_N:DEE=~B	lwDFF7&N8e8y$Kytԉ`}|;ӾBhywv+Wu֘fypvvN:dggSD	7oNpp06_f	T{m(t:.]"$$bX8r}x)SFv6lؐv.Ti4Ҹ~:fYv/ʵT*)AVJ%Jh$//xyLNNNrY*UP*HZl\h`0pi"""ؿ?rϮ]2sLlsȑ#r=B	lfȐ!?_k.l67W_Kj~`\U"{fΜׯ_' 	I5i҄<~g֭+]8#U{]FUV@\\Ν#==LbZjԫW:uP~}c~fAܰZ\YYYdeelٲTXRJɥ?ұ933;wdvѣGt7nfR'$$ڵkS^=*Ut[KbB=B	l۷իSN&O,O\iiir} M(R+-RܹsO䥗^b(J-+RTtؑDN8!O.A <{\ BN}z;֭[#117n+4nܘݻ"l6&?ޒuރ;Yٱc{9ӓ@ׯOhܸlE3Lѻ¿X>b}!'#͛7e˖ERQR%ڷoON[~MFFF=˖-^xǏgڵ9s!^DAQ ĥ'wÜ9snܸAJ5pUT} PQ#:{2tPvInn.hZ6mJVUZAoQŰBBNpG9qǎĉ$''se<<<xW=z{̨DINNWgeeQxq^ӧˣk׮,X ptO؏EZJ-t;||'h6`0p%>C]6rZre9Kr3eڳe233IOO'++K.a2WWW\\\8|0Z>jժQVBBNpGnnL}saԩw^.^JBRGFڵ+3f`\~-Z-e
[*Ufz7##eUs@ iܸ1ڵspX,dddAVV@Ts(]4999X,bɉ%KBIOOGVSV-\2a^z%^uOό#bܑ1f.]ʛo믿ZN:yxxK/D||<uGRɅ?0	

r@ xt:7oNY|Ϲfgϒj&`0m6Ù4i-'aBBN@lڴٳgo1K-e̹sh޼9k׮ElFN]J{HRRRׅO"Z___8@LLU?g͞=]vaZV\nΉ!!!o^^# 9sݻxb͇<2ܖqf۶mF*TZdɒTRW_}ƍ;ԅKIIѬY3֯_Bg٧?6 ׀ϔR*iӆWVB	')1¾}5j`ƍF#<xL5Xv-6l	V&(x"4k֌oF#R8|0ݺucZ.@(q<NҥK~`dddйsgJ')p^b۶m<,_???y>>> H@PHɒ%t&y!4/i4,ǎc̙xyyi&4h;*
:w5jժE6mͥdɒXVt:se	,Y\*W̙3g-0,رc4oRSS

B:|9mX,|7|,Y0f3*x&O̹shР#GGg}ƴifÆr6DaD~WjTT!!!߿]R~}/^,c"N <Ncsu:VtX"6aÆSbBݪ>yWؾ}hQQQܹm۶@vv6jбcG;ߩD9}BȾ}9r$YYY3cʢIBcccINN_~[-^4iiihтy/oII+xݻ7̄	زe/_חΝ;Ӻukj׮}Kyj|ٱc]uXf[l!99,4h1chӦ|draR<l楗^0)S8ĩrϟ?VY|I&9rOOOظqc&{Koѷo[.'%Wʤ2dN|rMD덽1bv{6ۺuÃo-[:q|
+O M0=z4ݝK.1cjl%H?2dvbŊtYnlX8|0AAAr+2p@FcTXO>Yӷo_bJd",,z_siFyK{-{\[Ra`m۶ZK.ѭ[7é_>֭+vD8d1k,9qdmJ|sKϿϜ9C`uO<ɍ7		!""Wo!}O4ZҥK\r`%F5N <*$aO?QfMRRRصkwfr|XdJsj-qN>.йsgL.]<.wǇraJ%vL<~SNN+t"*L8Y,
ЫW/T*Vr]l~-
$f̘ի`jvEʕiٲ%QQQr}#h!jҾ}{>>C"##	K seL&*Uرcr<2ݓr1せݻz{yjZRЪٙF:CoߞmbX8p .\`Ѽ[h4F1c_HNNvnB	Gpח.]ĸqdK{0F a2VU[;?ڵkɓB=Y!UT̞=///bcc9r7ovXq1/t:oCݻٽ{7 Jvܸq54|M&M`S8@Xٴi7SN9s<Has}Ü~V#ps^~7믿;w.ݺu#22R'$''ǖeȰ]zՖjKMMթSǦVm?ŋ999}j׮m;y8ۇ~h+Qmʔ)6frl]vj?eee^8~-++˶k.mҥ[bb-''H%͝?ޙ3glmڴ)c?n222l6fXmРA6&'Q~?°aiҤ	˗/GR5R;bb
kΝKHH;` V\I׮]IJJݭ{V+nnn2DOaUK͚59|0ᑸQ^ˏFi?[_OJJחm۶ѹsg֮]KXXhr!Zt=$%%ƕ+WXfCG)Wh4YI5$Mq'NΝ;ټy3Z^FI&r)jC}9iHOOlٲB	ǆJb	XV9^4L&:uDvv6KˋJ*QR%VJjը^:jZ~{f^Ojj*W^lذ^ϥK0Lh4ߏ`Xezxx`6h4hZFEXX+[B)v+"_|ihܸn: rRny&BPXd"<<ѣGFբhɉf0 <dΝpv'3KRRK,]vTRE/8zA(JV+1dx"ϟ篿jfx8;;RZj> ..l,.\l6l6ŊBAJR
!!!L&V^ /~+)U߿C/9<|{t:yhܸ1iii*U/Ҽysrssqvv&//''',ŊIXD	"""1߿cҦMNJRR͆ў<yR$
kdZ<x05VZpv5j4zdff>}q7Ç9<qqq\|tlaTwFRBʕ[.~~~hZڵk?^/ ;w^ ##aÆW_1gΜ[Z6
B=دZ-Æcɒ%4oޜ/o~Fb֬YC`` F^~)ׯgr___bbbnݺݻWm~$jTT"11QUc%**~uQR%麠T*z*F4n5i҄&M_)V@ָvL6ӳgOY
C.z:={UF'NoUVlܸQާAV;
mӧyyy;vΝ;!''O>}2g,-)cҴiS9.I()aߴ<C[<mInn.:t`ԩ|_BQ*VH_)Y͍SK(hu,X!CrO1~O>Yfر

MUZHHΝcٲetUXZ9>@Bmy9r$/2;v@RMjj**gvM8s\I WR`\BFFL&F#ׯ_ʕ+撛+7Jnn.yyyRpuuE?Wj͋/Hj0%slٲE^0qR$33"w{KϚJ*q	^{5^|E@X{i޼9̘1!C`6	'i啖&wl/gΜKH6B!ʟ>j(bccYf|ԪUPlYڶm+8)mmRlߧ}h4yָ4\xdRSSIMMڵkdffƵkdR$''Lnn.+VL*URJQ\9
...8;;SD	J%%Jddd`4=z4~-`賅$#""<x0
*`tE4;#M^}?m}c&MD9vjՒt!"+jcǎѡC4.]RRI@I=S%/9rd)^x{{}vj֬jܹsxxx`0j0ٳg˿K.i믿HMMezax
X,L&d2ݲ0?N` 99SN.rKOO';;ŋVbŊꊋ
ҥKj	tҔ+WOOO)Ueʔ{I)NjժѤI֭['g)+33Crҥ"(.\ =?x؇Pti Q* ;/fʔ)QP!!=8p ӦMn+T%1u!ZlZ&..UgfΜ9ٓW^yE~n߾ٿN:rLJRbaҤIl___9>OdT*&$$ӧ9s/^eׯ_ƍl6pvvFTRtij5j
*鉗UV%  !([f!Xʃ>}
*_%t\r͆ ==ݡ\r"ݑ!#	"W\[P~}:J|A)~qƲj*ڵk'J}<Ҥ4x`V^͘1c3f3Q[K FE\\ӧOETT@6m$~tޝ~M&DJŶmHLLdϞ=Ν݋P)h_R=,|Al`BDDǎCIRR/^ŋSF<<<([,TPVKʕLKk;]
3̙3R,5kxq{γX,uYQlY ڴiÞ={/b#ҨQnnn\vn,/	c*
L&zrzT'|LFCXx-㾛b;ЩS'M\H2RZ-F!%99?piz\TPh$//-Z0` ~wVZ<[CLL}{#sǩY&p[ThHNNobjZӨQ#̙@NRxtߋy!dg̘1t҅:f2e
_5:t`ڵw`ZY|9fO?_Ν)^lS*xyyQBvڅNlw#$KbDDL6MdYSTIɓ'ɓ$''L2TXZj1p@ 8sV.]0dT*9+W~-er?dbPR%
cO?W^YfX,x{{!2w	E'
YYY?~|}}Ζ{lݺRFEpw<33fĈ[3gҳgO
Z-Vza0طoNzKnX	⭷ŋڵKmӦ$9QFl6N>bS#G{xxx8Fy)LI(Ū$z=IIIDEEE\\iiipJ(Ar#,,:ȅSRRضmׯ'##Nhh|&%%a>gBPʟ1e,YB\\S}
E
3ˣgϞ R|w@@ YYYq5999)S!yaN>+Vd4F){
[ԩS$$$8XQJye𯸒sITNf͘1cTO>DFFr)O>ő~O^l*
"""8wǎnWH1֭[Ǚ3g%''<J...(QBnVT)FAi-\vWryΝ;GJJ\?MlΔ.]OOOԩC5y`0vZ+N:Z&001cиqcY[y|||ڵ9U,-;w.͛7&R)Y}2|޷#yX/.srrhժS*Oо}{['G8OϏ\Rt($i@:vȅXb-[&7H7Rdݺu|駼넇bdذal۶W/ٸq#'O6ݍ5NR#GҹsgiJ\jRbE
,ɑ`dggvR%(V`͕ G+W5k֤~h!@Қf9vӘL&*VH&M?~<~~~hZ
ZٳH;w.&t:ÃW^yE{<7^^^\,-ҥK	yX#;;]RW˗/еkW͛'gZrc0J*9r$udafXo:u*!!!ڵˡ%Wa$``ܹ_իWjӓٳgtR>,³g2qDV\ŇwQI͍d믿?mb`0pe7oGG,Y!Aq/v,ٳgٽ{7'O{?j4իǋ/H-cK<Rq^iٳgYx3`_X
-\:H9sܸqWWW?K 5jԈ޽{Sf;<^Ξ=K.]''"ݱX,=)SHOo˽]+ʅ֭j%66V$$x!Qre5jݻS___z=rkq%MƠAHKKsx-Ɋ7qDXhߟ3aVXAPP3vXڶm+g*I܍0VJТE<쭢D*G}W_}ŢEԩC]%{RQ/}JKK\v/?p\"Y&!!!r0$d!	iii{h"<fRRRHMM%##M6Hrr2PD	)]45_~4nܘFݲ%K~˚5kS.*<zG!bXr
zl6s
nnnr/_˗ӷo_233/</;vaΝ ݾ};AAAE1d}P̖_#xH?˖-cСL4	ٌVl6c2dy뭷8w7/$88X"t`XHNNNGxx8~~~̘1C~pf:D߾}7o}رcP\95j$O:(nGDD;w&&&F@qqS4Hm˖-׏%Kзo_"##Yp!111\zggg+j%''B;eʔ!##JEɒ%quutҔ)Sʕ+Ǖ+Wn;]v9L2h4*V5kּд'{+է~9p},ϻq~F;wr1qZZ\SOQBh֬ZzĆݻwg.]QxyyQvmtB
}{iO"^ӨT*VXXx@5~nܸ1ps>Z%S KނvQxqN<Y$BbԩSYp!*.]`Zپ}Ct@A|||ضm=/BvuIs{qAf36dƌ4iDޏ9
&	"##	',,!HPpy'|B=tԪUjժhꫯ(	^&JѣGӴiqifoӽ{wzAJJ
Ջv?d2Aff&٤X,t:{>e˖Օuʿjpss3p(֜hشi_~%=z{۵hGGGb$''c0ɡx)SOOO	M6*UJ^ܩѽ\͛7yɜ8q[c/^Lbh4TV޽{sr'HplڴI^HRl"k͍8Lԩ+Ve>*Fj+sNÜ9sdJQRJa0Ҽys-Z?B=f߿?gff޽{9z(dggSR%1tPtvJ,^oVNj r{aÆ1n8F#Aιs1$
[-ڳsNbccٵk{DvPP!!!+ԯ_2bĈE_PZM۟۝Vׂv-N[oŅxw{D_:SNqa9"`JEʕiӦ4sη$#5\9~VÃ:ȋ$.\ҥKYf+VdȐ!O}2#GR{zz:ʕ'ÝW_1b^}U4Æ?v0 ߟ>ׯ|DDDE1v777HMMEҺukf͚%[E=G3͛7t̞=>lT*eʔߟҭ[74?= IT*P*8p_~O?v5kҦMO.ټy3QQQUFG71L>ڵk i{0I822H۷/Vr\wj坬?ǳIػCv:wP(HHH`ƌDDDЦM~79(DŽ
cعs'Ν#**
NǍ7prr???:wLhh(>>>rmc$յ (

j^ϖ-[شiQQQFx񢃧"33uqʛ}=<<8z(oa֬YKL20j(V^JbɌ1 [)Yz=VU.Ityy^<Z'3}Z@@ AAAtwwwBBBRJ 9!+ Ҫߟ5k0i$VX@h4@pp0K.*֭[裏W2^۰a%i¾J.]X"6l`Zl}a /zFGG?C*UXjClwAc~+4&I,Ʋ~z"""8u&\T* ^~e4iBZ
}h$%jo9uضmdffŘ1c:t(r<`_d29(^rU_i /ކBz8r=˖-Ǉ={һwo* رK|	Æpu̚4ܸqC~bŊZ{[?3Z'޽{odr fdblڴ۷VIKKu*5j֭[1X@xx8C0X㤱5jժQZ5,VO/Xx /(,(Mw;RΝ;7oϟaÆϷdfE+1_nK.\t\aРAtJ?(ź,_]HbccYnQQQZۛӪU+ԩ#/ؒttaq&x8:u\BBB222nQJE&MhҤ	
gϞe̙̘1Cvipufǉ`~Ge}5zxxp%T*f???""""#ľ÷~`U(_իٲejٌ'&	JE֭)Qwk0[.̜9M{?"NAhغu+'OL&C	's4qD_t|<GqwwK.sL#J5nZ?>k֬!11Q.T\bE6mJXXM6ً,lz>%M;v{Ebb")))\~<^͚5yN1VjEJ-+k֬\rb&ɝ0L&BBB_۷oѣL:޽{2r؍}lB/^fŊ cBLAnJ6m]w`A#eرuqM)))ɫOOO:v숓v][PVGՕaÆqZ0Hh4se&MDPPIII<!?d$WT_NtڵիWsUj׮7|#,kOqt:/_ΆpYYYˋ/H_|=l﵎$[$7侵?8qT"""HNNիdgg֤%]vԬY/Y6qKRђ%Kh׮w((ZH*U$Ka VB4V+6f͚/R$&&777ZmsTJ
*pu̙3{9B=$lfpr-Ҷ_}ܹK}v 9IJ:tl-oAll,ɘL&^RqVZRgo	{VJDIulق^ˋ}/:0A$M>ba޼y$&&38vQFs(Y[
O'i,ǰwZV٪Irr2$$$Hff&F,N_ff&/^$<<W&_*r;kEt._̻<}O]	իzff&.]2:7nܐQPϣWnдiSrss9}44B#CF2K%KXPמY}d2sN;6n(חw}۷74m۶1gV\W,ZR)q}⏛ǏX,$bUkiDGG?`0(W:u}(JY@K&xot:x{{ӽ{w>[%YݖfVPFdh4r8{,񤦦r5nܸ[*\bEZ-ԯ_!}1{lrhyq~/ݟuĉxzz'GPHX{h3VU*TR&>߻ԳU
X,x{{"<:̫C
TmԨaaatpx"co+Vl2n*\|+{-&i0ի1aaa$%%qPE={6]vnoxdffo<)wf/TϧhdÆݻSNQX1VJ޽iڴC\oHHHwl6S\9Zlɗ_~I˖-Q
n-kE@\Ga֭\x4_NVV777B~~~ԩS5jS7{?wߺYS2Ll߾iӦ=gI`ЬY39`0VINNrʷQ_OrrKŊGkvv6:}}̣!fԂk	\z8ҺSͪ7Dܺuػw\W.(J͛?	

q,۷EDGG/	k\|1cIʕ+/^Ȋl(ґb/<(pww'((	&PFB[T*ѣFZ-ᄇ{b~^
F?Hp/^gggʕ+'קN:4i HַSN1x`ڵ+ӧO.wlR:t(nnnECt4Μ9CթQ?#/_v(Q>e
*]ƩS;v,W^d2Qre!2믿2{l1`
ę``?8qLXnNzѣ?>zT*z>}`Zٺu+:??"_~%r2na;Kasf8}4GܹswEi׮,{4F),࿰c4_~t_b8d+WA||<899QT)<<<}4mڔ
*-5n̙OϞ=[.jbҤI4hdy߻SV_	&<ŀRdӦMߟ}7w}ԩ999YpkC>IH^:{}~;/LyWСFj	OS)l6Ӽys^|E{7%M&Ü8qNիWʢdɒj6mܹs>|-ͶU*;wdС|7W7,HqLfY"-*C8yvYx(UPAkv'KJId2".--Dd!PT1p@4i"s 7fANVaI}6mڄJ{;TTI[/c?:ud~wN>͕+WFPreҥrô\{n`` Ofٲe̚5=zV)_<uԡYfpHPPЧO<==yIB:FN'wPȑ#8Vˁ|G_xyyQF~9fjRYGRqf̘޽{)Q端BRϵk;v, 5jOUb6,駟O?&LC(ɓ'$$$~,*T@`` ͚5ur[.]0>|A||<~gϞrZf݄2w\{9R֋qƱqF8 Iz5TXݻw˥:>$z=:uz=YYY899hA`/^Sշd:t(ʕ?{[(
~la:7qF}BÆԩC5F9s˗/CQ*/^bŊK%0\pG7nLYt)jʕ+si 9FN<Y3fp	_>zO>Vms/@tt4cƌae_vͯJDDkkEUFWcٲe}uE!7߰tRvZtt4رC:Hy\]]R
M4~< x<ȵkHJJ9yу@&OL||<$''ȰaׯCy(ÇСSjd9$88?III$%%qEL&{j3e˖Zj4Ck4Hxx$eNJHHH`ŊL6
*fBCCO4viAo>f̘All,FQnS׿4iB``C{@>
j5o6Xd2Mvv6W^%##FJ`_l0hԨ'N_bC2eٳ'={l6_wg1qDiԨnݺxk`0ºuسgQQQQZ5ƨQ`0N9Dvv6pk9<!F5jDHHk׮e	/^WWWʗ/O>|8uԡvrAAJҍV%==e˖a0	r:Ď;\|...(BՉeݷiJ%JٳIft:W\!##8RRRp/_&77%KR|y<==ӧlqTRWz8uHAwvzEnn.K,yh4t:n%kѣG9~8zUƛo+rKj=g|rJ.]Ĕ)Sj!#O͆Fh4'x7<y2ޓgIӦMiٲO>#Gn:{w޼vyXd2￳j*._LZZ62eТENϞ=#g/ƍi޼95M63YZ?!WHJŬY0l޼4&NH۶mokfnJbͭj1L4mڔ#F8_z_믿[_9ڵk:u,JAwY\\\lOue͚56b2z*X,+\8Vҽ{wԩsE<ka'(
<<<.]}v:w̆'%99~;vN
]6~)6K{V}TXP3b'777/.[f3Kf?ҩS'ƍWhO>ɄVرcDGG|r&N믿~_BQF]1cЬY3zI		q\R-TFCrr2۶mB
rLhǎn۶J!iL23gT*Yh6~ZZj紴4L&ǎ#**$9{,իWg鷸$V%u^hd,\N`Y2/$tԩg֜>j(yJ*+6???*UtWmy	"R`///._8p| }_~EqYʗ/Ohh(ƍsB(ʳd\cǎ2uTR}(Jj5ׯVZriٲ%SN7ߤm۶Ҷm[ʗ//_|!'<$$BժUX0{!Veǎܓ̟?ŋBٲe?ח;wRZ*nnnٳGN<\{@

8m׮-[{X,[ƌS`yF5={cǎq!bccz*7nܠXbO׮]ݻ7wkI7$Z-kfϞ=W:'lٲCzz 55RJ>:t@ٲe			aذaR8Z[
_qd)*J|}}qwwdɒr|^GVD`߾} lْ J
;w.ϔ+I'((={c6ҥ}C	իqF >#V^ܹsh4nݚnݺѴiS;_~-vp8b̬Yn@%KC2www|M"[/\@ӦM'"\`oz駟:tJŨQ^o!ſ\ÇťK%KRlYY&={c49r[l{)88͛74̂1b \ǾtFJJ
yyy^z1a5jDRE˾ÆDAaYK&Mؽ

LXXGJ*|<sErҵ1vX>#QvӺuk;9ߟ+W8ɓ'3yd"##Yv-[neڵX,9Am۶a0Z}/Xngs(kt'yBA.]J*a69{,۶mc\pANkܸ1KjfO8Aƍh4ҨQ܂G""&&L~'~wYx͛7opaZf͚<shт:u*I"=|p{ڴiSCSN|GYh>|8ۅI&tsgڶm/Bhh(NNN(J\]]h4TV:uPJڵkW_:5X~!A:FÆiժ[nu8dE=zܯJ6mn),7\ԬYƎKrr2B="uNLLh4J%
X,0vXVٻw/;v?`ȑVYv-...-[ʕ+j>l0'ݫM)[ξ^$^`0P~}U5k䥗^gϞx{{˙R?111g0t}l6uVC!F	v8;;~zKt:
ǏSbE:t j#tKJW7j%44ӯ_[O%XhJco׮6k.:((ӢE.\˗9s'OԩS;v۷sd^|yW-[$((ph( T*߿_vrmC^/r~ի	`ժUiӦH,amEJ*0` iii\rEv揙<<|}})Y$+Wdܸq(
ٿ]5}~ѯ_?V,fΟ?޽{?C'ŋBҥh4/_ƍP((Q-JcIMhd2qe]ױZ?.]Ξ=KFFwssٙAQJ*VX`Tш^欔xŊ+#B[5..VZI&MhԨ-M[=IwN+V_~6i\>>>رCrs

*uVe	'""O?VV%88_|풒8t;8q"7n*WL`` 5j ((Tw7HڴiCnXnx{{˫qifmƫ
	; 	4)q͚5^SQQQr͚5kThH^^:;wMzDjj*III$''̱c8z(r-ђ%K*ˣx;1112D~nZ]FVV2eEhh(TR9cxVB{ܰX,$&&RD	,W\g/E#B"@ׯǏ]%$n*
Z={2o<-ZD޽H2ɷlْ5k8WDBvL|!hgIJYYYisjZzM޽߬Y8w[laٲedffߑ7*UMA̷瞣m۶,_\v8p /,:Q9zJfΜPTO?~ɋIM1[.Ȳ7BF]Y쉎oZ>|8Z@@\~ۏ^ 22R>ޟI*U߯^y,CCTV3sL|}}yek0
7tP;&O:waΜ9Mggrّ*UׯḡR_ǧHʫkrNvɾ}t			lٲll6jrK`` 5Q;AGq֭s(Enի;v,e˖%""FCϧ;-J,&sq9"""qv"!!T*jt:E^2d|			EjrYF>TrgJsTZʾì㖑3J$URdÆ,YR>BQĬ^N:ѷo_*T WO (ʇ^XX.d͚54o\6KbXbr}Uikl֬Y|rx0K.xGViӦr,ك_@Inݚ:ϑ#G8{,?̞=[QՔ-[???|||ر#+WVZԯ_uɋ;_~]v1tPlH/+WrAN>Mjj\4UPPlY\¥Kprrrʔ.]^xW^y777Fx=&J.رcqssÃ233xaiޖ,o8[<Fɒ%pDPj*|||d~）^hܸ1_~b4B޽3gܦ˾K76lppشi{QVqȼ,V`#Fb
Fh HA&I.K?~<~-[l!..K.oF>}h4űvZGjhݺ5[lb8XHӅRbEN:>}:%$dK҃~Fݻw_3x`ZjE͚5\r7]vahݺ5ozbW_`0{n.^Htt45kdСYO5jğ)2T\ӧO7i1N؇?<	˗/^l6Rĉ<s{x))@Z)?t:s̡zуkPV+{fɒ%ܹFaXjFz̙3oaf'׽{w>yL_gUVn>l'X,FŋYhOfРA8Pviؗ]W
ruۋi+D*
ZlPSRQrezͪU46^z}v8p AAAX,ʟ0$<T
"ܧkKHEzwADD\|K.T[lY|||С7&((HIѶm["""hҤ	۷oǠVꫯxwطo-Z࣏>kb SC-$,ʿ?n/GVVDFFRT)<<<d2/?ֱ"Fb69uv⣏>*PR?Ϗ?ZvXKu:]V+]v%//OͪHۼy3Jz?BXR"t^H%Nj5nnnriʕ+ӠA.]zK_{7dbqIo;BBBT'jIb{Ν|焅B:uhڴ)SNdɒrAN8ٳg.dѴjJ^,)
i֬jB1m4o.O=fԩoߞRHI>;w&77ݻw7CM]&=G%l6s5}\899q19>Nj["|qeʗ/Pq5lذ+Wҷo_,j o6mڗ*
V3f̠k׮>cߝA3{l.^H۶m4hK.},P*$$$CժUBnn7l6y뭷~fɸO2]vHbb"+V2eM۶miܸ1r>Aǎ9z(ժUtl6~g>#J*Gʒ%Kh޼9+Wdܹ:|ij*7oN*UP($%%Qxq9aq_ܗ(Q'''	'''Μ9#R7oLÆ	,?dVXA>}8y$ӧO[aI<DmZj$%%ѥK,YB߾}ʦM1cF"k׮XHD;	I;h?K.ڵqѢEf͚E@@ :>&{WlRJԩS777"""dA&^ɮسg*|qqq={t)VKחAѮ];4h /DۍE:gSJ֬Y#[{=VʱcǠ :u|˨Qعs\[zԫWǏc6j*UX\\\lN֭[$%%.)VyyydggEʕET;ZӶm[`RX@eg09N'>µHf2gVK/ıc %8[j1b/_&>>z4rH\Nߗ?zذaɮ@RP$z9Xx1_51`|W,^&squN:%_M2@4h@BBb?WA׷~\۷ח
*PR%,YBrr24`ڴi?~^ٳgپ};ƍf͚YO$(v???N85k8s;vlٲE>O*ٳgSvmF_%55Us?>j,fãE\rF#9re>F,۶mGQ~}&NHTT˗O>̚5[r)Xz5-ZĉDFF?N1L̟?ZjѳgOM^?K.L剎&;;֭[Ȅ5 ,rݻӷo_;Ƹqܹ3+Vdʔ)tQhZڞ҃AzO~3f6l --VKPP^^^|,X@xxiZj5fߗ<r#*Ug=d?~<cǎ_~tFØ1cHIIa?4˜4YJƍ#.. "KUJE9w/&,,Ln͕{{Q
5:f2X,9s]v?#L.QٓPBCCYP}')k3Ǐgݺu/_~}ʙ6lK.~aÆ1vXe*=D,Y/|G}͍zp=<?/RLׯϦMJI&LCpqqVZ匎9BDDׯ@ד˗!<<J*QdI*WLΝ	S||xbʗ/ϔ)SR|]Q$*]peˢV %B1]RQիk.F#F^yXB~σRYV^y֯_OttmT*ݻ7gϾ?^ZضmCttgf6۬\]}vBBBؾ};:t ))E?,KKժUyٻwl/C:_}UjԨPTr)\ߥd	SYn۶m#))	NG^^6h ڶmK5b)%\Тv֊&MƍQL>aÆ7aX侺wBNf3uԡ|޽5ki֬AAA#@VͼyXd	!!!,XHν4zOdd$Y&Mf.]{ǥK~
RJQ\99&L2TZDdd$fׯF '''J(]vDT3tP	/d6mJb4h`<999w]VV-55VXamVxq;#nʲeddزl|W^l65f͙3̙cw/ǷGz?oڵ'sj+W]xQަgϞ={ڮ^ZOVV-''ǖaKLLl6W_}esqq۷f{=w6Zm[tfN<pAbbmΜ9VJ[ٲem+V5l6p@ƍ>t=KiMz59s?*VhV|#kȑ6V+Wl6mغu0񻻻۾;-++֨Q#ۊ+#}G}-  fݜufڵmѢE|zVL+bxm֬YMʔ)c5m6rH۾}lt/fddȟɓjۼl%&&&MdXF/ڮ^p999۪Vj۷o-##VbE~+?l6O+.J)h4riv͙3g 7n5
Klٲ5ĉ*U?Pʤ$Z-;vd4h@_tCKFLPP˖-ymzVÆĉ>|=+'?.*Jzvw7ǸFJ%9rN:pBZn-ǳfTHHJ"..H?oT*\Eϕ+W(Y$4k֌=zФI+a_>Zz<{3ĉ1T\P<==QTZի;NMj׮GnZ$ݻc+Jʁ###7n0al),%::{Cjy?8p=QZ5
9b޼y8;;ӴiSjuY][K,aҥt:V?]w\S~ a{(*EDŅU:jjjKjUbXQ\U(7(PAA%JP	wO]'1s==x^,]Ǐرc1wO>p:?W^})5pIYYY5k:u777sGP(
###̚5_|K	<|>͛7ǺuдiS0>eIIIh֬FxxII	$	,--m6iӆ,푘@U*f̘Cm۶8v3yƢW^`\7~D"ѩS',X gM8k֬A~X7	u'O"77pqqAhh("##+sq`WW.9;HJc1b#dee!%%O>EAAJKKX;֭"==={!ammH$6)7ߠA;??Fp8|0Ѯ];ļpyMNNFѵkWHRC,C߾}5;zqΜ9֭[(((GP(PVV>cccA*6D%0|pL82ԩի˗cҤI}6sxQz3~B[BFTDO8u
мys4o6y_9:ud,YcZ9___3N;?~<>Tk1111c*	.V?jnn`(,,d4sCUZ'.HCŊ+4N*
mڴױgjkDi򱗒5k 11裏гgOn"HM]hSόQ/[G@3@%//?+.]:::2dϟ5,WB8q7o_/B.C__1FɮZ16l"""_#../Z:wBGBR+W|a/H³gϰl2<2	Zr8tΟ?BVVVpww200)ݻׯϣG@D044ڶm;UV^եwHIIAxx8[[[>|c*
>>>hݺ5֮]foհ*aޞ$	o^'JݷAo>}L:sepsR|R*AR?I$򒓓I"r^}7f6oLDfumvv6YZZR.]4KHH KKK
ШWUc߶i֬Y@,--M6W_m>ksjj*%$$Y[[ŋ5IoNSqr$''ŋAdnnN:ub>pNQFK.TN;wnj|#)J:z(YZZRQ޽oyԭ[7'jѢ;=BSKu뒕y{{ȑ#/mZZҮ]H$Q֭BBB4|OߦT*~rJR*dnnNN\7ZA
1G͛5hL˜6K׮]dJHHZv-EEEQTTEGGS\\ݛuFCiiilTh*~4iBٔ6VZV'z"؞7'ZYYi 6???jڴ)^}<QTTK;5jԈ9HSxx8D"Zx*[.**(88ˋ>eY񞂂"DB4vX"*x {ށA$
)**եfkkK&L`AGX8>/9dkkKT*YU˸vΎb1%''SZZ{v"p6TYz5X,m۲29Ņޞ&MFh{>h "
&6կśA g˖-Bԯ_?6k+-Μvڵk͝;@-Z ///rtt$rrr"'''rqq!OOO[.կ_ׯO5 jѢ+ф	(44tB;vaÆYԐz8,]BBB*MLCCCZv@ȡ}ԤIJeUgU}h׮]QTTD,JX]cA>>>ѭ/R/3MQy;aqU[TWFnn.^	oԥKJHH`VFjJ=oҥdnnN4c{/IMM-[~	u֥-Z0mN-^ԅonQDDٙƎK{7oNFFF$(--5jDg6(<<ʲ^ ѣB<N:ž?>|$4qUHNNS`` GeQe-j
(**J$Hhرl6s!wϰa(  )'  :uD4|ڼy3=zjwwwrqq.55ϟO`
.]Pdd$m޼.\@J-Z`qk	dbb֮]KlC[Hi~655jXp!p١diiNyf
eddT+T,111Լys"kkkر#]pA~ϋ>5zk
RIdmmML#*Cm&瓃9::j636lll[Z<7/éETTTD;vx?>PǎiZnN+JZt)鑉	%$$09͘1 PV^A{+R4nܘׯOfffLÆ; N޽{S-h	L trrq_X%
rjHMM%///Hrf<IT4zh
 kkkH$ԨQ#
͛7X}JTWPP@iii^vbbbhܹA!!!ԩS'
df6nrqiFŅiSSSk+QݧiӦZO2&MPӦMPqGFFؘ.\Y۶mXCu\EN1l0rpp SSSjժӮVx^7V"I&%hp/mK͛7'X\t~~>m޼lmm)$$5jDրZh{_'N ggg$"޽{Si	qHD:::t)fbHR*dffFdooϴ^U^ ^ŋΎǇڴiCDDAAAJDD 5J6mʕ+Y݉AuZA ֭11?=JaaaAKLܗn"p],Ӕ)S$(̽H0gaa7u///
}|"ҭ[7ԩS?tܜ6o\<w\>իWϧGRAA]vR)yyy1i~4qUUV^K.듹9Pdd$ikvm?Wŋ\]])((	emϧ޽{!h0r$ϭ[6mڐ_?1g4̄2Q922ڴiC&M@DρǇMF111dkkKD4Zuv~"_>M6-TPP@mڴcǒRY=@B-<<ZjE.԰pe׏7n̾\ll,YZZR:u+ziӦY[[S)::mڎ'9%0` 3fPrrKO)s~$WWj}zDFF2pI*?Je:dddN3f ccc6lX%&x59ȑ#ښ(,,LI+bޖ WTT)E= ..B!Є	hJFFF4wܗҒ6ocǎ%}}}]C}gccCݺu#wwWv8?j,r4imQQQC<sI&4|ر#lHHH [[[6o߄ w		a666k׮Jg=z4oߞΝ,Q?i$ƮPkZ}{	rܩtB"ggg})


"kkkYfi222:eMlXGO#[[[#\gaaՕSgʕ]_%k,LFMJڴig˂jhZ77%i{nFF%''Q`kaaA ֖]Fˋ\]]k*?k׮%Zz5iSnnnRB}Pׯ{_W^M (""eN:ѣ͍lq:u(22=u
rJ֌M4~U䈈tuuI__FXG%'''v׫o8{,zcccܼyBܸqHOOGƍf*bxooo ՓrDu>عs'aii	4i6Ĉ# A#^%%%(,,Dzz:ƍA())A\\4iR P~}|>"!J;277g׫`nn>}`޼y\|<r黪:1e˰rJd24h P(du֞7BzχT*E~~>J%"""0qD!//9s&0vXdffGݳgO $$ 0b &O`Ν2d|||Zx<dggk׮o*Kf͂Fcǎi\cjj7o #wVTF\\
E*d2$&&b޼y)>ܹrARxDUm۶EYYT*koK-ۮJBzz:d2v܉v?FJJ
|>d2d2u֭[
8x :wYkkkUKr
n:|b޽{!H0fDLX?.\.\. B\r;wСC磠 ...U
	5i%<y!!T*RSS7k׮Fcr@P^zpuuE@@ 1h ŐH$Jlx.%K`eeEW^d8v|||X갪>Qݵ"}77^Ǎ۳tC H)))~:ƌbL:kMXs
С<ycLr7T*ƍ1 7]]]W;x<L<Ӹ/^dyzT\ݻwǏ{W9w򒒒PRR0FHR1ͅGP:::Xhsu]-BsBB={`͚5߿?rD.]p	4h N7d2YЛW_}
PT		KW_a޼yXlΝ>Po 2O<ÇwE~~>
~111;:}!**
1ҼB!V!o|>_}>c6b1~wke21d	3fc驑t+800i$۷ ƍìYPx<"22{쁡!fϞ>7oT*1` "$$׮]@ @qq$gΜA&M  s΅B֭[#%%2˗/g]-=h>B333?wܮZ
<y2ۧU{!<B UV,-[޽_6믿s
022accþ/,,1>;wX_U6͇mڴAff&Xr{bԨQH$8|0ի@,\gϞP.x98rƏB.cĉ8p ߏc(++CYY!
aaa___B"bXCHh׮&L +++@ n߾79[n̙3PT}|-ߟ} ~-m<|ݫi[]XcǎPnʵ>o/+)
0 			-[XVLDC,ٳgXd	
1h (J`֭ؿ?ۇcǎSN/*U >["WƠAء6^7|>6l]v [ڮ;t Z"BPP$	D"صkBUARԩS_F|y&֭~/))'O0tP,^Y*SpIz%^-ԩ"8g6mڐH$kuj	mër殮M66mڰƒ)J"HDDQwVgQ]&{{J|hʔ)/+ݝ!!855ڷoOD Є	ϧl߳R)Iw	J:u"ccc`A8)A9deeE3f̠.]S.](..qύ~m'55i֬YDNM,J#T_^ڡnщ'H*jDDkvbAk׮9aaQO8k,%"ZST7rssŅѣG RBB	JKK2]Qy蠠 I->H9Α\RHKKB۷'O ӧOIu=Ͼ|2nݺV'bȐ!>bA @(26>x<bΜ9 k^|>$	233_+kT*;vr;\˴n: 
v
P8,[Lhrr7 χD"Abb"VZ۷oGdL6Pq<͛7GNN<x/"00P\@P ::V^=z`Ȑ!uyfdddo}WΝ;ogܖm۶ڵ+tuuo>(_{x  \zkJRט3߿?>|j:L=³gо}{5C͡B"B:u`ffիWW9T*.]N:A
r2<ΐJ8q _EVgٳl#|#8 FN|dff#,,5D"ANNvB%Kn:8qgϞW:w^^^UM#޽Nm|>9ƌSB$''ckpss\.GPPOXصklmmrJ?nb7YMCݩ{ժUWZnkkk$''ŋZA"...ľ}0zhcǎĺu3$%%A$sBPUJP(AD s_~W]\\iӦ*daA&wKKK'(++ck@nn. Hn5k@RA*ϟ|L\nݺiKG-JS\]]q ~XĠC@= H-.IIIĎ; /6_|&f۶m!C %%兟m
?~:(ԩS)4CBi 0_4;v@,ߟёp[N,<\Gbxƍy|OVP0+f̟?2:u©SoZT*Pn];vcǎ'|˗/~-<<<gϞ/f8aq 3f (nnnӧ~W9sV¨Qfu?8p-88+W!p39X\ٳJ8|0ٜS׆I$+^żLJJ2033Ö-[ QPP }}}"''M6ɓ'
&M-u]k/M4`EEɏQjjOw67#giiI'///4iu!KKK\vĉ]]*SѣY/dgg٬)66Vh{{A4iҤ*}kvv65oޜRk׮ii#6IFF<lmmIWW
q|ôlW5bccIWW8q"""ؘtttחҒ.\2s㒑Fyyy֖F5äIt\\Y[[@  GGGu뒮.]VcZjEaaaߩEd|V5?¨}6R⼽|||ˋH P-(<<ׯ_~)&&Fkw	F 4h \|>cdgg#++i999g
Ǚ#H$x>}t?3 ?6mڄx2^^^/ѳgO9ڵk\vMÏH8Ssi&>}{.<==j* JP*	|||РAOU}P( q#4Uˇ	&!!!'q>'OBWWA @"ŋUp}5~xOprrBQQۛSTs~TK}igΜw2M`oo_n/mۢ^zqɒ%Ɲ;w9sCӧ?du;<q=ܻw(..!D"b1lll HWWWьr"Rhaʕ2d֭[Ǣ
6mڄ:0j7j<666Xz5z3M3add D&Mw^A" (7khյfs<=TUP/>|>׮]Cvi^}M\-agg8[aa!whtp4-
())Z;<{A.==P(Enn.ڶm{!99c7MnQ⯿+W\11VVVBrr2 0'˱m6DEEaС8q"-[Ϟ=÷~Mٳg#((G}Ą5@SMvZرׯ_Gqq1вeK>7nD||<¢P(+W 77'OD||<ttt мysj
6J[͛C@ ? 'Ú5kQ"K.U
FD8q"""RsN4o\kGd*Q wi\zW^Źsp-aÆXr%Zj oQPPR Ç#//mڴ!J_-[ b۶mHII{4ʲO޽{,Daa!JKK@uk׮		gB'tq}T_Ux<x0J%
+++A ;wƞ={p\|>>>>k7WG0a͛OBWżrرcc|кuk$&&oͩ܁A.C @.[?({{{ ?B-KΞ=:Bεx5x9BkkkǏ#66ǝ;wp] `dQT(,,ľ}pܾ}gϞEFFJ%ttt`jj
___hٲ%
cK.Ŋ+h"VvMOǏX,СC|I<y(((E0h @"h-Z?Ǎ7 /;<<\]]1{lòe˰a,\ӦMc־ex<deeʕ+8x bccMb̘1Kݙ׮]b:T*:wgggqErǡ,K\Fpa=ADD;>} ::ZCShiԣ"U*d2?~۷oΝ;B~~>?~tx<<}qbx<ΈBhhh2{eѥKB\p&&&

Btt4σaȐ!7oӨ޽[<z999d >\vؾ};f̘I&;wƧ~
wwwS_{^)|ԨQE׮]VZ!==8q1|p8qb}H
AWW1~ga֭7nF___\ti-qܹz*nݺ={ӧP*(++cBOO(++CYYfpww5իnBx<Ɛ8s@S_xxْ%K^zXcSRT*ر{[p}束G JSRRuVDGGc̙P((++#577GII	zX /`ҤI "|>ڴi޽!!!,ԛSsP(ؽ{7$	>Sdgg())2220dfN
VΜ58\r2Yڤ$l߾-Y%  ++4pM6!99IIIزe_-Z`N޻w/!
qqԫW@ՂVwxx!p=fZei|222χݻ>޽{Z-xWjj:^8}عs'н{w4nJظq#ܾ}#F@zz:?~"bQ|DR@WW*
Ϟ=666ĠAп(
Z
7nڵkaeeˋfSPp1w\d2#77̛7ƍCzz:0~x& B999Ľ{ga>}:x<lmm!H@D055i=33֬,>֭[#55ڵGnn.J%b(**b8___$''㣏>^
/,lӦMQVV;w\@yz2LG8x 6m(ZA{-UJB@@ o;v@||<9;w@&hݺ5:tTaaa Gaa!ttt`kkO++[вeKC*>wAUT9r$B!mۆ~gFv J^ff&y"?6{ѭ[7bL6ΝW$0k,tOUżue6l؀˗cٲe,n޼ΥHP싊B@@ 6l ՙ2|>5k===\z͚5C&Mp5L<ӦMcz*;<~NB~~>r9
QTTR	RR@__011|||;;;XXX666,O(bĈł^r:Ci&$&&BR~~~<x0^ `ڴiعs'6n܈5k@TiӦ_0zh:t@9Ν;!J1ydx{{kh+cNSN᯿­[0{l?h߾=3fƍ =z4KMgE&m8rSX~~>
4h@<xQQQ4jx)qFtoFpp0lmmP(5Dq|>z쉫Wxyyaׯkk
___|		P4hΝ;777iiig>~BbGPpBjՊy%%%9m~ҵx9ίׯ_G޽Ѻuknݺݻ7w/>ݻw1a?'O˗/C"`h֬ZlYi6Xжm[oIIId2~L:Ě5k0qDaʕ

 |7	7=._}pBx{{3NӦM}Կ{0 Of#ns0AP`>|89Yf!..}6޽A	rYf֭>ݫ͛7?HySd2b<x0x<߿[naǎwnݺ\r3~>Nc|LLL `bb333@"nnn,%g­)evZjUc6\uf$Nh9s&VZKKKԫWu<sQRR___D"<{Xx17n-[ѣG033cZ={`РA,'qU){;rظq#1cX6lW_}9s&BBBLT0	sϟrssannիW?F^{nO>.++]vԩS!	]v۸utuuq-vغu+<iqL<.]BPPajjӧ#>> >>>l-/[jәo+7LLL|jQo3dUCJp!\X7Q9uCƍؘOZt)5=222(77W#W/{9=u޼y3x<xdaaA.\ "HDԥK;w.YYYiaFȨ	


bbb(44,e*/\ޞN8qOOO6lߢK.DTNQFC=m' ]]]'5i҄ڷoOݺusRtt4ڵH[J%edd-:u_ջwoZcǎdffFZ͘1M2ޭ[7@iӦ|jܸ1R`` !I$R*S}
dddȑ#ɉlmmiҥDD4|$///Ƞ֘;GTn]rttdקX,&3330a־EFA2zhFÍaÆQ֭|#ccc
3fЬYhdbbB			DD@cIWHѠA6>"bR6mڐ7m޼f̘Acǎ%___233" KKKVOF֖rss5W;>(A"8N/uAnڵ$
)88h͕rVU-y6mPQQ "*ttt(**J]?(##HWW	M\m۶՟4aߪA,:H$]vi\󾣨bbbں&MЩSxƑFDrJ266͛7ѣGi׮]jՍ7^RIdccS+ф	ܜsqeggP(*((իW1ѣѣ@:::h׮]dccCDD4W>g?N8+((X'sss&"~EFFsj\rpp͛{Fbѣ>9&M0aB%A/rssI(j


ʊ(>>tttMr4chȑdnnNDV\ITTTD/&F~~>V{ vA<ѺukL809'ODXXX\Gbj|Z|}}1m4W̭R`nnk׮aÆ8<222`nntÆ9>c>D/\^^^>|8tÇk\?n8\|Yk=S_|XvF*2i뇊pttD=AC /@xx֨qơQFd&Պ(
$&&bXl`ooݻC$i|*?k
IݫCUbݺuHMM{%s:eT*ń	0uTD"4i...X,ӧ`ܻwp=
\JV疬BRb+7oo_WWW^/^ĦMЦMFHV><wk׮W^ (XZZ _|ssЖ5̡yP*,X,%~7$%%aݻ7si:u*Ѱa÷PHJkرc!ˑXׯoĉqUǣA <==5U({E 9Kƀr(<ܩS `kkwbʔ)Ƥ&esnr95R(?~<Zh777?C$CV`ԫW6mBjj*qu4G]p@ ?.][bܹXt)rrr6;cƌ+
])g-,T*1e|_!1uTb,擒fE!ʸҩS'3#F\.[jUtL8,Hꇬ3f@Tb֭hذ!tuua`` L:_|JKK1` lذ:u?!66/_faEOE1GN쌄d2888O<pvGms/r=B||<ƍHXܸqݻwGaaaQϞ=H$>XboߎRt۷/._5(MHP F¯vAOOX|9;͛CR֭[hѢF=z圔x*Wx
4vX***ƍ3;>&>iC۶mP:<,,,d֬YdggGRMFԼysϯG&3ӯ_?rqqaXf͚ESWիWuﹹk.tBT҅Ғp'ӦMcș*D"0"Ҟ]e@@ M4_YG͛7#GVgjǇQDD	BYfꒅT*I&2RZp!=QFHiԱcGk׮JF\YU;Jey*/CCCZ~=KgddDSL4ͥwj,kʴ1ƈ:uD{f͚5<==5MKK#===cpxU???Zxq%ӽR$@`fѣ^kZ}GAlwtb{.ӄ ~͚5ޡC_Dbb"ŏ?4bsܹs_c9r$~GdJQm;vW_}BŋcԨQyx;wI_~UVFxx8 &N0gL:U#ː*
tիΝ;rZw(o˯
;;;|'@y>Cݺuaoouֱ2H4\]>|Z:::]w! `cc;w@RٳgqgΜPN3sLt?Ƒ#G0p@$$$  3q͚5c&ߏ7oĽ{PXXȸaee={bh۶-?bɒ%(..zH$H$x{{=zv}%Kg1"||X|91vX)_U] ͚5Ν;lCZZ蕷 "khw9SSSaذa ʩutt\9ƍk+*K"M}h6oތHG\M8uާBر/^Dnn.={©9R_~D@ܼyǦMfؠo߾lbq7nAs͚5iѵkWϕťԩ;w (u	ry*RL<[nEfx쌼<;v0vXf|&;߽{ׯǶm4ҽck˖-1c5,s	߆BRs;d899aٲeL|)ڶmʟjb1<x OOO~>'N@@@ n߾SSSDEEA&Ϟ=0|pfff011>._ܽ{066QVV###3?͛ޞʅs.ѷo_6d2^wvRRRP\\#Gb̙?~r9wA׮]q5

f¢E`ggzޗ*cS?r*
Z:8  X'ODhh(n޼&W%JKK5ٳgغu+S\-ZKJJPTT1*
qsE5q"k֬㑚'Oɓ5 y<6l؀G G}f͚1ךܹs@hh(6oތ1퀺?˗~?~	8
s;#Ç3;v@ppO M6VСCkښrH8piXYYaEaaa%XSRRp,^iK8;;I&,5sܸqpuuEǎ+ ;;;̜9ǎí[*nP]p\R͛8t@(	ǏqiĶmۘF*})CC#22K.ÇxDDDɓx9h޼9=zDRR233ADс!6m
7774h КB][˗/k@yƍAڵ{o۶-L<Y qgFDDٳghԨ݋'B `	=z4nܸ(y_\+fPwV?]zktuuqQtYkޅ +ԡ/++ 1bcu7n`Yisϫū{/U4fff"227nDff&v˗cĈ̄si3\۷oGz0l0vjy4k֌dΝ^^^={6tuu3g"552,OUйsg9s֭C^SmE!UP`={6Fž6lСCE"YBL&T*?ÇM6l	*xcѢEؽ{7틟~IC#[nܸD={ "e8tn޼J}nQKNN?\xb)8m\~			{PRRSSSxzz"44M6e
/u++WJJJ0vX,_۷oGϞ=FLӧO%6m
LBRuOƙ3g'O  aaasssߏ۷C$...0` fL.+ù:hт%(~nݺ᧟~23D"fmڵ+݋QF!!!X|9rrr։wy|$%%ҥK8{,޽ǌP(--EYYY.NNNؽ{VAN5]#|q{ۘ8q@C0y500P(1ꊆ⣏>P(dkz>Z;ׂ\%P3_gϞ
X~=V9;;W[Ò%KpaݺupuueQ8qY#===&&&Ev؂adggԩSZ>.\333<ݺuCz34mO>wV*O(bŊ0~x,Y999Xh6oތ(|oA(BPW^:ŋGU4tرZ';zohժSTFaa!.\/B#U: /3WϨi@.cϞ=ؽ{7n߾D@ }gVXGO?1wWRGuL]0
;v,"""}aٳ@ kGoBMGPҥK8q"Zjzݽui77ϛ5k'OTҜkF+
t^^^P(xb\PPΟ?`ǎHJJ޽{Ѱa07qDlٲD梹9-Z@*ׇN:V~,*uS޵67x!=z>}T*OP/_B`JCff&>|L\t	7ofyeE"6lؠoZZ64va066Ƃп \8q"tuuqF[cǎ=֭'''XXXBzz:o?066vZkl\[zz!&&	VϽعsg\|BYYY8<ׯT{nܸL<.dׯcΜ9/70<uS6S.Y RhJbСC1bB}!++III/ ,_"[01x`8iJVT4a۷			8sQTT===XZZnݺ4iׯ7773Z1k֬׳*Аg||8w|:_cԩN:tttРA<}CÆ:BtKu>G*' WT*LLL*d9k~KJJOh";lق/~~~>}:͛[a^+Vs%Nu|pFSNye*ظq#,--+Ku@PPÑ#Gw!88`xktHHcJաV\I,_Y=&&ԩCT~}Zz5.**dhZp!\4RիԔD"Q+JvYZZRƍiʕղse^vZhANNNDD$J)44DS:S2tؑODԾ}{!"2_?)B{OU(j迫%///zb&M0Zm^^^ԦMYUkhԭ[7$KKK&
sҵkx*K]Ayݻ7yxxhMťڵkّ5i҄@-Z 333@Tn]ruuP2e
_Qo~<<<hܹ=H*ѣGkKED@&&&ԤIԦM!Z~=CDƍLGI;Vr.6667--"##nݺZ8	Fŋ5mkk˲psiӆ[nZ׌SuqտNW^kSҡC+WO>jtYpī(⫯BAABCCwA.#%%:t`000`bCRA$/TncŰ}гgO;wk׮7F 	7ƍhذF  ,]ir9$	m///L:s̩D ٳ'9>ϟgNi9KTTصk6l˗#22Fm`۶mxVX^XXBcǢo߾L*4|@ڷoJ*5+A.ĉErr2>|b@"e˖޽;|}}+is9-.I\i~]v}6hӧOfff@ƍ!p!ܿƸud2ܹ:u`Ĉp񝥰P$ʊiky5666:/ AAAHOOG`` lmm1h DGGcøq0j(ԩS{X,~+׉G/U;LMMyWRwt,FPHݚB]g֚W_޶$*`mmMєPITFׯ048۶mK4avJk۶-bruuk׮Uy/((4Zv-<ΎH䤡޽{?%5M0i&	.9MQ&ae2334FZqP5~Y2דH$-[wM[`iiIӦMӨŋGDTܘ=z4#-((>ĉ4ejڴ)9995YZZSLL8U'ti^\NҵkX-ZЄ	hՌH㑾>EFFjhM"1éI&=I&^6Tl/ڵkI"%P\\3.!:#w|E<O#gnnU#GDԣGݻsww'ok䈈"##ѱFsbv҅ ҥK_[kx5r]v)P'#F˖-C!44x hڴ)lق@eW<%s9 {>} !!|V#;;r9bbb0h 0 [lM<R@޽qyرcƌu&ۿ?<==qt
ѹsg<xqmGѿ^e|d|ѣF@\</w}}}}8q۷H$	lll"))	*ᴚ?6oތ4U#%%{spMܿeee055:vN:k^^^%WvV1ԟ[xy>4h`L>ʩ333D"cŊ011Add$ڵk}ֈ:w	Z¡C^h#%%׫k___$%%aժUOADxYH	ׯz1c`ƌ/t?UCۡCOhҤ011RC[ZZB*hڴ)D"ׯWmK"


wJ%аa44qf"""3f.5h@4'|j۶-5jԈ?JQQRpp0	BǝjS*T~}
SN){5N[:u""rtt+_Gؘ/^~{|nn.iӆlllڵk/UƫR@


b~i'N-[ʕ+iҥ@DÃf̘)66L5"+++277'j޼9͘1=Zms}]mpppƍ?~5E(((ԩCbFdAAѣG4o󪑛KҰUKؿQrr2^.\[CSvv6S&MHTRvvWU93339JAi,,,I&lݪ9r$x:uͩuDD]b-^1jݺ5 o>??%%%Xn H0ydZ
WիWgϞe2RRR<+ĝ|aΝ4hKu?_yi糐 OOOĠ^z=z4vޭ'@$aɒ%GNNb1_[[[;v,
 ӛb:tڵvZH$8v郦MC3FH.<yyyX==z#G@qq1 ̞=͚5 *a:שyֿMGG7Xp㉣<y2h0h ,ZH\}m۶C"ȑ#= "<W7n!
Py?Ddee!00gΜA߾}akkDƧWtuu~Y\B!N<	]FtwqT*kD1dbʔ)5k.j/jeT:{,RSSqƈngg2RRRp1@(b̙Xj<y<899^o߾h۶-zCݺu'O`8~86mf͚!88C69x<]vѬY3$&&UV ꫯpBaժU@ÆEG\qRsN͚5äI0` ǣe˖
s[<lق/b͚5Xj  `hh###hS	=PRRR_ZZJKKAD5͖ݻX|9.^DWWW4k֌qqGq)ܻwc`bNS{=^[U:t邛7o"//IN@1bU9o<|UchhtV|ZT*qtשSׯ9R4.8;T~fU|)J|b$&&b޼yGϞ=nݺjʡo;;;AL2Hu000@ݺu\
ܸqιu6?J6>JSI&
ƱcǪ]T*Zlb1bbbl2\xCÆ#GH0 ۷QznE@ϟG߾}all~  XhO`@}sؽ{7\\\777DGGiӦu6lV\#..)SsθtFd]O0y}X^=,_	W\իWP*(**>nAe@N!,gf&&&0339,,,@Ǔ'OD]SN\.P(!>}ʒ;;;cС֭[J*BۘI*IijLcǎ12ۊc&d2L2033̙3ѯ_gkРRSSYY	!
HOO;X|9


Ly1sν^\) `|O_uԁH$bYJJJ~aݺu,vLFӓΓ<x<KͭR'M~011J³g`kk{%@_t	)))ҥ:uĜ
/C.]@cܸqؽ{7R)b1f̘C⫯T*ڵkŋt.^l|	ƍ={V1ǏO?<O6lKbҤIݻ7B!ڶmVZaРAXb;Us:+|ݺuѽ{wСd2$@ -[бcG$%%1Gz>#--8{,*jS ڕbt?3yۊ9;;ٹJSTUtU,'*
/^DRR222pU䰴O|>7n777h͚5{wEˤpvvɓqF*T.1f8p B6l@֭!!˟K[Ӻuk8q@	 ...HKK@ L&c9*'Om۶AOO%K{HIID"aχXXXcѣ5jjWE=???蠠@|_5rσ1RRRܕJ8}4 T6NsrrƈP^ل
ͪ!Ϟ=t-[N6$d2辀 <uԁq ޽.]믿ƤI䤱$&&"::OFqq1`eeٳgcxbA$}fP%%%駟777ܽ{D˖-	 Xh4i7o"㧟~B֭aeeccc5koPAפIUz[{F֭qvoE!+wɒ%ñ~z޽O5Y$kW)
\v(((@vv6n߾ O>ųg4r,VVVLSSSXZZ2hEJM7w*
Ř8q"V\cǎA,3wWiKKKX;v	gY-T*q-/>VZԩSL3f+++|wիx<PXXiӦ!&&n݂;fϞ?Q011?&O-[_T*ENNp26l-[LLTw%%%lRǋDvO055Eaa!x<mW\A׮]w߱9E={]t=\]]QZZU[l̙3h"8::23mL&_!Cտ`Ŋh֬b1{fr:u*-Z^zᣏ>ȑ#1o<cHOOGz0gۗ=K=V:u0i$ `'nIIIx"Μ9Sisشi666:u*OHaÆaܹ_+777XYYaݻgZÿ-''?`̴ptt]IM+))AXX5kݻC*AAASLUχ\.Ǐ ??PTl-((8R2BOOi-`bbwww8;;hܸq:Nr*[jѸqcT#''&LÇ{m۶(/.%++mn
xw.NBB!<<<0m4̞=}n{J6m`hٲ%ܰaC;sLغuٱ*4o999Z\?>4BWWyyy6m݋zԩSw8//Z
SNEw&퇀B8ns~ȴhU	SqqqHNN/+W ++?јAAAx)VZooolݺk֬RD:upUH$`ժU|2^>c<[%]d	֭L(++~w;v;v@n0|aԨQزe=ݻ+jz-[ 11VvBqaӧD"F_rɺ9alm|zcݸr
oߎ8l߾T*AGGZp]]]vw
DpttX,R)ahh333HZ<4uCT*ñuVl۶M#7Sw5k
m6BPk)^:SsU&}NhlIKKÃܽ{%OJJBTT>̄Vz9s`ƍP*C,P(Dff&Faĉ;w.oBݻcĈ1bvZ?'!//͚5Cii){1-\.gJ
???ؼy3:wt<{Yk|;IS(˗/CP0-RU?#FMdhҤ	3kFGGC,3*$ѡC899aӦMS̞=#GH$BϞ=_ NNNhܸ1LLLua۶mRXX޽Cet?OOOgϞBBB}v WZ9~a̘1ظq#D"̰yf2LN%R`رd(	Bgjwww;waT7yrU:c*½h**8Ah۶-.\4Fn\r9\޽{Xl/^ڗIMSv0"7,dff"11/^ĕ+WG1333X[[u_1U1=ׯϟ7oqX|y W2SNP6n܈`3۷oɓ'!==˗/ٳ3g<EEEU
r@9Ɍ30x`|dff}Z$aٲe?><==Y?OB!Cl2TKIH(Ν;L1cӧP(ӧ!H`nnpH$XYY!++27b1VZ)S6mO?E:u桔Jҥ~,_GիWQn]8&&&ضm`ٳs"@eq_[nؿ?ΝQu+))	S)CM>s%UAܦW+6l"?? ))	7MرcPTp!th'ԩ7'ǙqQ:u
W\{PXXRhӦ6m
B11C3&Ne˖C{ntYpuuŢE0k,2K裏PVVm۶{Ahh(BCCѳgO8;;gϞظq#|~WuY>`܅C$!//;văb
LQ2||\^߷w^I-C׮]R}{E6m qGfm۶|affXRFm r
B!郃b۶mM&ihv܉7oj8~8pY666		ĉqe"??|>9{X_5VX $&&iӦ:q8tV䄮]]vuHU39sPë)MuRq|Pyyy?bccӧx)J%t122D"Av0sLB(
HR#11JUN޽{ٳgɓ'P*Յ|||о}{̇Pŋ1n8|իۇΝ;W\
rtWFƍT*5Wkkk|FލBƍqy:Rk֬a5v *CYY;Sq?#---L&cpРAػw/5k7npnDǎC~~>͛\Pq棨bccYj)kk*ȤRAAҩSCqqq)44LBu뒽=RnHOO<b
k׮QQQ5hЀڴi^EEEF:::pB"*OniiImڴ!'''4imۖ+**"kײkR+'N۳T'..$	2*&.**`H$Y=ˇC3 ///"GGG󣠠 
3fPLLȥ#Spڵlmm_Iʫ" 6/^cP=SQQeggի)""ڶmK>>>dooOVVVB~~~L~z~6h{6oAAk*){);;<ʕ+_?P*$JY*n糾4iѣGܜcKWջwojܸ1{'::ݵz)=+77)--YJHNNNzJϬYޞ6mSYJKAdkkK}_w^#nFx"̐^mċΞ=Rw! @hh(`aa(7qM,\wF^XD?~Bbӱo>'ӧOcϞ=Xh,X Xɓ'c8<̙? N͛77|sa|2|||мys|(,,`hW75ذ;X_n"rh,lقԯ_ϟgADEs:-gǾ}0rHLN(--EVVUy<;?xJ4/8k׮ŋy&RRR"T*H$h۶-Zh>E/U(86 ??wƈ# affTfEP7:QFTK())ɓ1g9CS.c̙9s&Paܸqe1P鯃ttt |R7rHJRQTVRRB۷ś,Yhx:;;c̙ ʃd2Ym+;/qHNN9sssb[[[fXjw{.nF9s&N:r|Xv-6lTP(0ctM#O|0yd`1bϜAw؁B1c@P	WFtt4$	Ο?JScϞ=pwwǩS0vX|ZnΝ;#((W^X,fgn-,,/q6mBHHmhMwƺupUfBZjJ044Ď;M"011'*Q1߿$;vx>}
.Ghh(|}}nXl,,,g1>}AAALq9Ѯ];lذCANN"##b
tGү-66ׯ_ TqR}}}(
;w߇Zڴi===顴ZߺW9s`ʕ,gܹs%%%HOO e˖atM\;C\.\.Ǎ7d3ӧO0תKqc?::K.@ u%םZ<A 222X$QUuI ==vzC72-<<;wJBP+))Y[j~9}4?L5
=ƍh2߿??~8uVAkN>&MTaUp۷oT*Exx8~gBmz!C_Ell,ҐU''~`رcݻj
}6>(fQXXXi#R#"GWw0ppps qy<y|2<x \",--QN͛7Ƹߔ5wp6^zcٲeH  *@z*ƍ+W2={طo:t1777l۶25zׯ_GXX
舻w YYY(..۷qmܿ5
())9s0~xb<z'Nd<ccc<z+߿潼pUd2R)6lFO>q Bh{Eݺu^m@wA޽>ĤIW_hW5//ƍQXXWŵ*T*:u_|֪K.puu#oѣxb4sAzz:6oތ۷o&&&!..ʰAbbpT*Enn.e˖jۡNFsN^.cҥ6m
OOO<xlbG?Vx{Plق/000@fbЪU+G7n ++=bg\$ǏSٳgL/--EII	@D+Ν;i6}ԡ'(wDARRPVV@ +++ԩShҤ	̡֭ڴopvvfǎΝ;ѥKbaÆUQx{{3IGgϞ!CÇZr}E޽{cǎ022 <\`ԩA@"hRTOTqݻ8rl-^ACii)PPPLW}V(011P.]"R֦M``` 777L2hذ!MJÂ0w\ڵ3gĈ#4r9 AOOvBv0}t2FFF(**b666,݌33\~ްV=ͭZ#~>ZjѣGgϞd)8:N)Hp!̞=6lKErZߡx~W;wsĈ#СCf*LMMDEEaʔ)P*L0ǃ.tuuaddcccA(JZ\\\`ff;;;|W?@sJ%+O>گM3D}!,,;v 9)PRR<ԭ[6m;Jn{	u-Ѹqo>xxxի\Y*#*/L&7RSSP(pE`>͛7AC{Ghh(<xGARχlmmADUxi=X9))	ׯGbb"˯\UZ<ANRM'=yVVV ?//	fKLL=x<N<ZudeeٳO0a4k~~~?>6oތx{{S9ϒv܉`XXXS\]]aaa &&s$	B!?~ prr6].077Gqqs-Z?י>r';.bÆ8x ƍ;w"::%H^rrrpo8s>|ӧOg3bt<~->|HXGGGHRXYY<U&鶸EC3G_JX,W_aڵS:wBccc\~AAAǝ;wX!SP֖)
$Ç-[ɓ'YPmxxA
BXYY!##}aG			K25ANBΝ1uTlڴI&uŰ:woq WRR]]](
cU8n̢S(Zy}W0㏫2m۶/HLLW_}X"##pJ{8w(7;;;ޒdddYfpuu1hET+++<}<eeeZOD;%Ƙ1cb
_9@ܾ}_51LE:mѕՁNHH@VV>|]]]H$}hݺ5\޽{8x $	Ѿ}J/j{A$e˖z*VX`̴]堧Jp̌+
rꇴZ-Gep&*
ׯ_0293,nOP( cccű`eeuQF-ANGGRH$8;={2ˏ6C$]ECG0aT}/F PXX[[*~:,,,4
JvvvDxYBΝ;q-A兯
.ǏtRHJ999dZ:@5)Y|9[X8?6[@R]/Hp	FҠ8Q`ɘ<y2>S?"Ce@6Sg}/";Rs~94 w7Μ93g %%߇R<==1l0hт%x~S(>BϞ=q̜9۷ѬY3fQ[Qmu/	oĈEaf,O\.mJ &&&2ADؾ};Rwx[eT쏻wn9舿 77,,,4̐똩)


PPPP/]  $T
KKKښ=z:u L(1qDlٲfbNj -`Y3qP(ׯq ===j `H$}6SJ(((#0qD MSRq
~vvvb]]'nP(`ee+V`̘1h׮ǴUx<lڴ	qFX~~~?~F-hHQU󠮉;y$Ο?SNHR͛7G-P~}Wv+N:B-BJJ
ڦM~022+0bĈJʭ
"->b066fQ}|~RY嚣.?8.^ǣUVhܸ1><v Zh%%%x)


PVVz044!==<+[9@M\_Rԭ[W#_JJ
:w]]]<x>YqH$b]uת;s=ܩ@=WEp>*ׯ_!7ӧ޽;N>4w~){h$\6=zĴL˨.rH$2sssf|T*ҋ<'8~'ШQ#C*"''\@$;w.ΝbP(7opK롎W-콌rwP('O˸w޽၎;ܜ/6E͛7#++%%%صk`ffgϞAP^zXh-Z Xv-oߎ9s`ڴiƌôu;uJM}3%pm?~111HKKcQNNNСV۷ӧс񐟟JMFD066f
QQQ:t(HQF;wj2Z+y777|گbYfxU* ΒpIfv޾}ݺuúu 5\h!ޫm8n!4kkk~
B(w
MJJBHHH%' ::VVV>|8\\\?ɓ'X`Ρ]r666A~~֬ C335y)
A.?W "Ezyya׮]

ɍpe˖a޽_f;wXQ}FEQŅ

ahh/ŋq{5,s@1|p4kNNNjAJ@wիɓ' 4YX 逈49>Fb6mBrr2vLM={Ddd`!˟
"))	݃R!aooM6UVUr"##}왆xQQQV'O@WWYZZVbhذ!\_~ӦMck83gQ:?ѣGAA5kOwhٲ%7ݬJ~x&&&011Hdeea̙|2tuuaeeo	111L&C^Ç>.hCZeW\YYrrrL?SX.^]jJBݺuY/nɁ;"""~zԭ[Cŉ'pXZZ[Z:]1|pHR<z4ږgϲRzFjӚUu(|tƚ5ku5f7nƍB3g !!͛iӦ666puueѼ~~~,̫ڬ8^#uF&Ç~:n߾lܻwx	P\\bB(NNNF@@ 4wuڪi8RfOz*rrr4jѥK~Ro#77p@ӦMѴiS&`۶mXr%[D"cǎ<xOh-6};9d\t	iiiHIIAvv6nq9r$x:w dgg#33hܸ1Ν;sDaa!R `ccÞqU۷o 
mj5r
ݺuCXXDEEa׮]P*zDJrssˋٳp@.#%%YYY055}nRW"­[p}={wAYY@D8~8tuuabb]]]\r۷oGQQtQN`۶mdzj %%b/_<e48{,ԩ*[BP ""9 /YQQQҥ~g888`߿?MA.z5))	ڵ+;RtM=.]BÆvҿ}s7oބD"5R( ,Yz᫯%вeKtAku~ꛎ@ @PPġRXӧOƍHIIAaa!>}ʴd@__1^={b(JcTPӧxKWqB~~~pqq76lX)P[<mhVLW?ٳgD[[[`ܸq,r+nDLVZ{СC]Ge0w\6l+ijk#>>|cǎŋʂL&\.GII	ˏiii	87G^<x/)))x	RRR0rH}4\HT@vEx.翃<>}:cƍXv-f͚:bkkCCC8::B,31ZhCCCO>X>׉lܸckD"X,`ii	OOOT*X[[#33Z>3A*bժUhٲek{%ȉbUFf|8::ܹšgeekעsΘ;wnh֬yXT߇oaM@YWPL\Ӵ^MKK3MMLiYY^bn (209 蹯k.q|opB\]]yW裏e,ݬׯh42vXKXXSL}x[f-+4nܘ}YBBB\1qzy'gudeeݰ.י3g]FXJ>|8Çg޽lذ~M61~x<==k׮l9J*W4P<Xŧ=zҀY/^$?? gVTT۴J/jt]6xzzf%)f'!!AvѦQXXHyy9CնZ&Hxzz=+(]eUzV?K/\![neǎ?RQQՋj{W>K`uTΕ&.\ ''ӧOsiRSStgϞFCYYCTTDFFҢEkJIUYyy9/"hZVX&M`ccCyy9ҿΝK^8z( [ϫ;d|}}NyPA|||IĉiԨݺuuVOd/OwQT*|]IYwJ̙3]999|,Y׳n:pssRYKÙ3gXz5vJ׆#j5>>>ro\^cr&iUfzW_}믿|СC3g,&$QbYGͲbuH89ѣG8t~ղҺ/^dSNV>Hƍ˗/Ӷm[֮][m)EIi6iҤ	M4a̙T*Yv-7ofCۛ6mEN6^VzxJ5mڴxBKwos]u;1ܹsli̔].""'Ҷmj_/.Ѳ\{LD
ټy3mڴ,FѬY3Gbb",ԩSRΝ+gm;99內'///ptt[~s)d|"dҥKn㊊
\]]r
!UB.\(RSSe+-o鸮h4/|zVZŔ)S8p d2@xx8ݛŋ ^Ν纓\¸xPy$ŋ~z;&NHEEШQ#bcc2e
SNNβ'2͌7qY-yfFɓ'9<常аaClRm	Ewwcqjx?駟h޼9gϞvL|IVXW7󄇇3zhrVueȑ̘1C~8I3*˛RlJϏ'xҿٵkXmx饗c߾}'лwoj5]veɒ%x{{_$mח4Zh!}Y|ff&=w&55^Oii)@ÆcǎC̲$:ߕ-OۖʮxOvSGGG\]]e]LL>,o`Xy޽;YYY7\Ǎ҃d2QXX(FeڴiVc';;-[HZZQErhRT\p0֭lf˖->ݻwBڵСvvviРW\!..x	u,[LϤX Knahhذ!lݺ)Sw߱m۶*>g&''3ydJ'_~<N*BBBXt)~)FѪ¿dݽ{7_|Ok2pww͍@ѣAAA\fH^x9Nжm[رcJ`8qd'++K%((`|A			Qhbj[bo&cǎj+Of̤Ih׮֯_O||<>[ƏOZZZh7܆!!!lٲCѽ{w֬YCϞ=)jeՖYR͛7_ZeYc۶m><==oʵu1رrΜ9C~~>888,AAAԯ_p¬ܜY,~F3gΰw^9ٳgh4bkkkצ~DGGNFxWK^/Bz/RgR=Z'''¬,n?O&**iӦYl,ϋFgO>iDǎ0aze˖tޝ$ݩ_>ٔqFF͖-[طo/^]v<sUa9ٳ'			deea6yKDFF/L&͛7CL:vEDDOfܸq̙3k$N>M"<<^x֟̙39s\]...Ԯ]֬Yܹs塚!)[HݐT*u%>>r9B).Zڵ+/2xzz_~*VvQ^^N֭y?yٸqlݲ`0cӤI&4q3L&RSSyiҤ	[nEӧO^u9V+g7VZCɟwmVcZ6l 22bgg''hZK߾},g>}?NaaP憇>>>Ԯ]WWW\\\CJA~IV˗),,"1Aff&\|YNjZ<#tޝUYuoY^@	)Nakkݻ			aݺuUH4hիi֬>>>rf}p97nٳXd	L:/UVO/,W'FCIMM%99Z|>CJJJx'<x0fTXlN:WcmtK֭[|NmAniZ{akrGرc?~L.^HqqG;;;ԩ=M4KBMqiFAdd$U5݋5#k:5"W{#G;]vÆ,ZH>}֭[ѣIMMo2/!!H5j-[nEV3j(vM~X|\}Y~7ˁ-Zc4;@N߾}y	ܹsklРA|컥+A2|veUnrFNNqqq䐝^㔕a6)))c$uR`T*vvvl%}}}WAAA4iҤBU'{ߟ-[2gpaY^^NVV'No|}}Yr%Ga888Z&==,XCذaǏg餥Rvmv]mhi&F77nDѧORSS:u*~-=I&Ѹqc;v쐻mJO?СC߿5ۗR-~1c\7Dcj^W^_&;;@.$;::bggǼy?EEE!CHOO5mڔн{wY~}F#j/hڴطoŢ劋EFFܹ۷o/t"SYF!YGvvBѸqc(f*ENĤIĚ5kĎ;Ğ={O?$&L ڴi#<<<DxxسgBoooѥKyyyyLϘ1Cxzzb%:w,ҥK#<R#))IԮ][H[)++WAAyyynuٯ+W!>>>"%%s߹LL4IL>]~'LԮ][?^!ę3gB+Wnݺ:u7771a!W^U4mT̛7O?~jBq1}t.<==K/$EAAŜ9s>}ӧHIILgѩS*OYYB(n*z%tr"]bբ^zLtUx{{ۋN:Ν;ۋXѥKѿhҥKEAA͛`ѭ[7Ѯ];ѱcG+:w,u&t":u$ZXz:}sg48!g)nݺbUhrJѫW/!Uq$ZطoXxpuuB%,IJJڵtVȑ#bذaE"  @ԭ[Wԭ[W(1x`Y	&GGGa#!|HǢjEFFj"##C^K.b֭Ut/eeetpeߊM6'osYdggb.V^-n*ERR=#b]!ǅ'{1&|}}E@@_ԯ__L>]pk֬yzRRRD^^8s挘4ihѢx1bB777uVyx	1gΜjQYYرc,k׮-֬YI	!ċ/(6m*򄏏سg5bry!Wܼyk-;;[[feeebذaM6"//OxzzF"Nj⪀[t;vhժu2ѹsg믿#<"7n,~}U~Ww`ʕSȂ\'OubǎL9sFU!"""DvDFFS6l,֮]+ufB-ZI&Yfɳ(1j(|rQ^=[U"{.;;[L>]	!N|||DAA(((˗/FA!:v(\]]{bbN;D텛<)+..))):


į*"##EƍBVZVZKJJ< +ӭ[7y󓷩"V#FB!	$]]Y,k_WS#رcEÆEYYt"##Z$~:w,Xx{{3f!ZƎ{DAAHIIg(Yƍnݺ_|Q,]T|b]v"<<\x{{ƍEY6,c	___!ÆSPP z)֬YSZ'Y94h ̙s@p7PVV&~Qn]=8v!ڴi#V:u[SdddcǊۋ&M!솗?hذM4F?HII-~R8Ð!CDhh;wGWRTY!ҥK<	q~1c22##CtUSqyȐ!8  @vW^7nذ*$7}AA7oBP*xb|}}ԭ[W^yzʂ*j*ϟ/hݺ5\t	wwwBBB-g~ߟF||<ׯgL&j8880p@y{`(j`sϱi&
ٹs'ׯرcΝKTTT٧"RvT@Ũp7Һukٿ?ݻw^3,
vԉVZSO_b69v|7Ō3ҥ'ӲdX|9;w_~AnggGݺu<x0$<<"RO>Iyy9z{9;׷~˥K;vl	3A%퍿?dʕʽ|`٪J=j5eeeV唕QTTk(*	wU@nDnDFFWǏ-[3g3y	GGG!GGG1o<{%^PPٳ<Zf<y6H^jL8sbV߮];qȑ)̙3UVcǎ((܍ǋp'ŁNU۵kg믿
{{{bjEhh/BXҝZUDq:˄d`akk+/_.<yBָ~j:sl[v?fu
w=Yn*-roZ,,C!/^,ÅB~麮~ZHz=.qqq͐!CL&"##yg1bsѿ\]]t:t~]V[(uńhjr|9uꔼ&mۖe˖N#,,	&ϓZf̘1L8kc'|&MDrr2+V k݋Z棏>"77@ll,FWdK?>3fd2@nXv-O=GԩS\|$v؁dajVk5$''^`uqq1l2[I].yMƷ~	M6rAoNG=x{UY8={6ߟ6~~(**@.{7Rufe!x"W[F'w!!!4nܘA?e~h4z=C!,,wy'OrJFAHH<xD"""8z(ZNNc͚5$$$"Wy7s4i҄,(/#Gdܹɣ>J׮]yǪp5Ԟ={x衇hڴ)AAA6FWP[00O?qYUճG_~DFFri5ki׮[nҥK4hЀCpB֣htPTL& W^R;=٨Q#VZEQQ\#/**7KPPoF+W)%K?0e2dAyeHrjպx dQ#)i駟Һuk.]Jdd$?0۶mryJ^gٲe<CL2ٳgc0Xh%%%4nܘy摜i׮AAAk׎:ĉygRbΝ_}-^fRa'x>3g;0e^yrrraĉ1cƌ*-|죢x$..spVy뭷$>>'|1cpk*cǎe̘1,[ѣqsscԨQݻǏ3e6lNdd5qE*z+&N_|AILLd<׏+W/3gĉ|w7j5z"((hڨpwRXXZ&33<~i***-vvvdffU|	wƆ
+chՕ,
+jlHH}]v;vgggV\YeAJff&[lC̝;8>ڵkĉٴi?999gĈ#HJJ⣏>"""BvhZOaa!<ӧOE\yy9gϞ%??~]vCNNXٽ{7zZ-?<,_\^?s1ݻ7>>>V$:t(z"##Yf1w\l%HLLdҥ6A矣4hu֥_~o8qI&Cll,7hI-a'˪l6	񄆆믿o0vXN>MFxIOO}-=m߾bz!BCCԩܷUٌ?#FK;3888OAANNN|^XXHƍ8p j[[[ʬ<=
w9u?A
Xvuuk֬,:T~Reee]v⥗^	`ܠA)f͚%<?BR	???1vXXTgL,ZHtEx{{^z˗իW#Fp!:w,Y`jM6rbr	*;H!...b͚5bΜ9G!j

5)nݺW_GrꊑZ֗ΥAK.BՊ#Fҥ4k֬LI_{&M͛7"<<\.հrJ#đ#GDvv3f:uabB^S0\"00P,XJìY;սZqʵVBX,_\:v(Zly">}d$]3fӪYDDD"00P4h@DFFv	$ QV-.7nl+-O?Y	<ѥKѧOT:Q&0rrr9TW
!4i[j!'}	K.HgQ~}.^}Uy{,;vKԩSG4lPiFƊ͛ƍ`Qvm-"##ū*_W]	'aǎ+ufY_9v]'<==ɓ]8~xׅhРzկ__PQ~}akk{ǅ\ӦMݐWhh6"//Or|=!D^DÆBxxxȳg)p-Z$bccO?$2 LK.bǎ@-W-/?~\rKv	,';;[]VƊ3fe$!W(=j(Qvm!'[UWEAngذarU9Gk֬ڵ/'YV^-"##?\*XرC'M$^z%xbq{pڵb_ԫWOL4Iaȑ#iӦb֬YVĪC{ƌM6I&-߳zjQN!I=-Z\<4oҤxǅuK(]Bڽ{o߾,['''fϞͤI]^*1VIHH7ёcҮ];9SRe,YBbb"eee888ТE7nxxxPPP@bb"pipvviӦ3:1s6D3e.]+Bnr<TDtZ-K,ߦ޽{sQoߎ\
Dd"::WWW~7xꩧ3gL"Ri	pqq^iӦt:j8>smFEEvvvԮ]&MдiS|||prrȉ'8y$\t	{{{xٳ'999V?k,8YرHaΝу3gO?1yd\.I:6%l63qDN8͛	cŊt27'ln7<'Z=C,_6l٬]͛gUY[&;T͛i׮]tu Պ9F#ץdڵ˼ꫴlْ7|S.]O?@BBlݺm۶QZZ*׍	WWW5j=z $$ĪfUHHF^{dz!FNAgjVqF~myvEFF{OFT*k׮%66red1gQl6Rt=K/Dhh(o|nZٱcQTTDII	h4	u֕$Fû޽{᫯[T3Tի_5/^geӦMf!
8ɓ'r
Z3?%Wsϡ`튐!SBYft҅\֬Y?T/,˂ rݻwaÆу*22H\uf$>}W_}f^/ޖ"NIL&~gÇ9y$3gΔIRDBMFVݻߟ'O%1WUV)@dd$< }חaÆѳgOyy???θqcY.j=fvMVXlה7iLgeeѶm[ΝK=puuW^SNJ͸@nn.={d֭xzzXyDf,޽{O={{p+SB]v[rћs\Qղ|rmƆXl}7&66`ׯ3dƍٵk'N@R7|#A%'U~#Fay'Xd	ڵ#33Sq(3jYn<='O$,,GGG^yDԗTI Ʉ\3/O>O>!  ҠAZ,$V\-G΁8|0W\ylݺj8p3m4&L Aqw7YfL<͛˞uƍ6l*SBN@Ldq?~ŜT8XZOVҥ$%%~֯_O^^B5jDEE8::7d1ɸq㈌k00\#FO?QN.\1

5Ν;o>ڴiƍϏD6l \ւɲZfҤIL4c}ْꊻ;rG%%%qEJKKtԮ]CҩS'nX,-[lg/`[8_gݺuxyyfS_r?=%$ףhd	f5jDbb"			DGG˝T*5hi_0ͤ{nJlmmea裏ҤI t:fY^D}qHh4L&z"!!K.rJ{9-ZĈ# %~FEVӬY3VZE>}X`.,,cǎHjj*~~~rU˾Rf3͍{N.}RRR(**\BEEnnn4i҄H6m,e&ɓ'evITT<SV"Ng֭iFkNf:XZ;t vttdJ\rMZZ-M4^4nܘu/)7ɖq뱼[y~~~0j{-Y,#vM$Uo?{,tz=ӦMweɒ%>\^2Vq(KH_͐!C8p 'OW^b
Kzzfyp
???"""ҽo邭^siBBB g8;;3o޼f+ܝdff2ydۇJ{[KڗSZ͛pB9{߾}^*wGel˄	?Xp!}ӇXF\r[i}T*9zږRInKPzz<̞=X{1=Jtt4˖-cϞ=<V3QPPx{{h̤o߾ٳ_~6mڰ{nNʐ!Cx衇

ǇuX,Kd͗,vU , oh۶-YYY6>}b
EPi۶-~-uֵuWmhOή*WDavvv8q}&_O'%f͚`ʔ)ddd?Ӹqc-[&ۙi9WGyy9AAA|w^5j>>>C1_.U%SU^EVpqq`0ЬY3.\3Z-[rYpwwgԩDFFiUʧ:-FHr=R;=$?N:,]gϲh"ٷo?#'L`6mڄ>>>?~-[B	ZׄmWZjj׮ͪU=z42ޯBNBVsaJÆ8q"			<s+4hЀ+V+qm4[Vzj|}}?>3gԩSݛ3qD>\=IkJ?Eusrrػw/SNw<:t>+V%@nʖzad2jٰa1N׮]IOORh4VI..\`gҿ太ng
^O-طo>>>saxJB=V;7Bވ-?'$$[[[z=?8/2矗r> 3j:u*kfԩL2\
?~3f3B)~O)oH%r!&M"77bHJJ"++O?MNNVRxdqfDDD0vXwN^^!!!_ŋ*ܽ<мys[@||<*f͚iicu-rXR_FxhժAAAZ
F`PݻC?ub͚5B!͛'4i"<<<DVĂDRRBȍf7в?5))InL,5^vjOV(V^-#«ܟQA~EiL~͚5_Ԯ][,ZH~/**Jt:ѤIK/!F-{J\-{$K"&&F1g!{SL>]۷u+ݯ=k,Ѽys!Y'phh5%̙ck򫠠@,틗BY`eu(SVo%pB.]Jyy9='33e˖7P\\4k׮4mڔ &fU>|={pIRSS),,ۛ'|I&hxa3ӧO-[IfPPƲZbo&EEEуŋjyYz5/^DVMDDQQQhт*o
9u'''NG7o:RRRc=/`UkN2ԭ[ƍAII	|;sЕ/YaZ-M6C̘1N'^^^|GϪ%-%Iŋڵ+T*;k׮)B2}>0l0&NZf#))L&jI(LYY4hЀ!CгgO233ٴiK.%==p^|E\

c)pٲe,[4?~<ߟm۶7ŋ1ԪUV+r
B9Ǉ@wΨQg͚ũSprrbܸq<'Uk;wdڴih4(//iӦ7_}&L ""~Z'.''{oϪU7U!U-&1cƐo6pwq_9i6/tjYx1۷o'//4iB߾}ӧf4bqttnzjvMII	<#L<@^feWP,kb_}X5ok֬h4ڴiC~hҤ	~~~E~~>SPP>>>@Æh4={~GKzz:tؑ^xf͚]7Or5KkZz\\\n;Jר4gff2vX;-ZbĉkuY~=W`0رc0aeY,>]r7Q<H\\;v8777|||prrBbooOii)\|R(..
ӥK:v(7 



7G"ޖ4Fu֑FQQ憷7q\˗ʢR***N:lْÇӬY3 +gY*V;^-kY~,^gGo.ߟ޽{3m4sTXYrBb0طoǎҥK\|˗/V777<<<pqq!::<==tVq


M, ZwQRRR8{,z*;>>>ԩS0hԨ,;9TwW1FȼNj233IIIKKK.{{{bbbիU視!w(݁"n#doʅF_A2 mW3nS%!frа333dn]or(Bw
*((T~BQSymBΒ[;YO^E)(((TCuQHHH`ΝQXX('9;;Tz7AMrU_ŋhZ***#66.]\^5})XfkFzz:&	ZU'JmڴaȑoKۣh(**[[[\]]>|8ӦMBwl޼FC>|8uӓK.'..ƕ+W`ԨQL2P,rwEGE{FI& ٸq#ٸs"j&Ç~zڷoϯjeARǎcŊ_|A``[ج	T!o; SO=Ejr}ʮӜ4o~)!P#ضm?0믿)!"L={6j?gϞrW[~q	,-cV8z(<<ɯwJrJϟO`` \9^!P#%));vЬYeQR,YyqE>Sܺ^Rw$ٌ 4̙3tڕ7^cMci5<޽]vѨQ{w@AAAAAf8y$[U?_|cƌa۶m"m" M4ܹsL4UVYeR})!fuVY0ޫ(BNAAAAFpիw>7BdaѢExxxOu*=R>$%%#G2w\217+,cL&ԪUt+޽(!Pc8wm	\WTۗg}L=d+(ֹ;ZFV//eqw+"NBd6E=YIr




5HOO-d̸q㈎Vz*Y,X=>";jꫯsηkWZ!P#:t(lٲ嶬OVhxgB0o<j)h@p1?~0ze6/!!={H.SPPPP????NJrr2VEWyy-"88F_|%K

垬-w7ѠAѣ-\+\;w.kT*FE)((((j5|1c.п+u:;;coo;SNeԩ56#ŮfL&ud2舿ҾٗNukZ~m֭[GfxG%5!P۷/&L?o߾L&233GIVRSSYh<"n#RCnn.tܙkRVVFbb-O1g4e۲eXt)NNNV{(BNAAAApBzۉKHnFIze˖a6	Eq	6l1cHMM½l7ؼy34`ҤI|ԫWJݻV1fNdBo/ȟVl6"!P3gjՊ3g '0ܬ{N׳qF >#L&>>>ddd믿? m`ݍ'`ܸq̘1Zo߾$%%hѢjסR|z<H.]Xhu!99yJ.ׯ999x{{3h z)"##1V<+[g>3/^̩SϏ}2j(BBBؾ};@BN4 fb{9z( _}K.%==K.V<x0ÇuwJVE׳yf/_ΡC04ŋhdw?X@r




5bjԩ|gz4M6YfDEE3.]";;ݻwORRjbҤIL<S}v.\%K2d< zGt!wslڴAq1i۶-iiiDGG3fxꩧHMMՕVZФI***b߿rET*mڴz?9${}](++ʕ+,kkkL<nݺY}>eKrssIOOy[;ɄVW#]q^u^z%6lŋY~ԩ|7@)*
<<<֭&L    F#Iޏ"j<RYK+αc8sJ֭	Zff&:-ZЦM>s-[ԩS#44*K]=zFrr2<|Wj9) 55;wҪU+I,]SPPPPHVjϴk׎:PQQ/"[8[Aron޼{~hpqqaΝu{[ZUPPPP	Q2f kٶmj^[u/	ȑ#ӧ|g9sFq,@r





U2grssyQTL>ѣGc0trGk:t(+W0c~i4ȿZUPPPPP2w\QTl;;;m&/o	Drܹ^zO?Ѷm[^u֬YCzz:&	Vocn7ENAAAAA
y籷gAV7ߐªUUNqRRGޥizÇ3fڶmh[gI("X@0I?dƌ$$$ Wieݼt222RVVF:uvhZ4Ϳ^g߾}8p ZM޽q(9j:
у" 7n/|,n'c֭$''STT$h48::hPTP\\LYYڵ+:
uVׯΝ;9r$J7;"@Ltt4_~%}l67|CfPոVҽ{wZ!   V+̵2f3TTTPZZʩSHII@&OLql6ȓO>ٳ1<iӆŋ[-p{QBHn@^dbϜ:u
˗3uT._` n-!33Ӫ-^g$&&AVSPP@AA%%%ؠhpvvnEEfR@nnnJff&̘1;䢺"*9r$;v̙3w1o<Ν;eTGr





 	ӧO/?8sd2ѥKj5G߲UN4,]ٳgRGGGԩCƍiӦG6l@ZZ/_ʕ+R\\Y|9pU@JMozRRRݻ7#$$Dn5qD^yyYPrwE)(((((\Igor%٢+	0ͷ,j5dڵL9r$r	JCVpB`v$''[	[uzyy1|pϟdgaݜ>}tDr





7$7nLhh(_~%Z+V/_ҦMJ|ʆhZ8|0|'T*/^ٳg1 ۛ~~%kMHH>`޽YmSN̛7-[9p -;Y1׫W/Μ9Þ={h46lȦMg2t7}nE)((((( ) ..~f3:Cӧo*L1{ؿ?:ubǎmۖӧOӻwo6lHVpss?-[`6i۶:͛|@HHExzzٳgꫯ8z(=K.ŅYf1sLAȱop}Wuxꩧ0r#a T*L&N






7EqqB]={
!BQn]1x^׌3 f͚%E̙32eeeKرcHII_hprr[nv{eee"%%Exzz#F<Q\\,?.jժ%ׯ/DAAMVK."%%E$%%	N'Μ9#[WΡ9XNGEDJJpvvk֬`սlllĤIDqq1bmggg~XlR2)V^-"##Cb2YP%%%	777q!"))I؈Yf{UQPP Đ!CB;X\"WΡRPPPPP	`}Dxx8>>>Z
^@hh(/fȑZ2Lzy!<<EpgjKBjU^^.[p!999qF0` &	ooo9NOբVj'|"o_3g/믿JNN?&tv튇+W@ӑIrr2o9[K){>ٌh'..m۲k.ٸq#˨T*֭ˀXl,qpp-v]*N<BJri4JJJpttzoƌ\r?{RRRByy9!!!<#ۗwyӧO!WVcT*-Zz_Σ$;((((((R)3h Ο?ONNZɄGfʕ!pvvW^Yf3m4޽;3f@ӱpBfϞͥK0͜={*3ղHyy9111qFB8bf̘Q~K6mēO>Ʌ *:޽{@Fڵ+8|l,.. '' w}UNJÝCq*(((((&grI
ٶm>>>r?̮]GѰqF^z%z믿믿f͚5fƍGE(G5leD
Yji{1qDZʊ+xǭYfdff_sA4[nqԪU[[[*[f3999$&&RPPDYeJ
ŵplذ>'ORV-5ב#G(**bǎ|dffRV-<<<BCbb"4hЀݻw[oUդ}vFFW^V߶mIIIԫW4௒]ta˖-8EDD\|TCII	>FF\i4ߙ3gW\JEll,)))!ꫯo֭#GE={$BΘ1c1bm)fP=kUAAAAA,kµmۖ˗/矓Ő!C*[V-"""?~<Æ#((cܹlݺulݺjŋc(++$&&6mTϏիWrequu^z8~FSeֆ8|0gFӑCÆ=z4>,=?bƆ֭[xb>Cu=]n"*!eL&*C~d˃>T3g2{l"""&  @ob4x>dffb0VZԪU^Oii)666r@[[[T*U2\I[pssgggiРAAA8;;yf>oFhh([l;4ݻuֱk.ʸr
ƍc DEEٳر5p{PuXlǏ֖CyS1_mΝ|g8qckk=L兗899F!$$ڵkEnɓ'ϗ=.\ !!,f3TTTpzv h4tޝW^y\׍z>1|p-Z$I=(Nkj0ၓ!!! 7%F())`FF#&
(//r
/^ŋS\\LYY!d2QZZzø3=vvvvڲ(WWW<<<DU龕޳,"S$^U.rXJS"I~i+^z%LѣG瓓ŋˣ"JKK)++"jժdh4ƍ̙3z._LAAFQ][N	!V-*PTaooOXXvvv$m^UTTTPVVFaa!EEEg2(..&..N׬Dt:kߟuHHH\*ŲG+ŬXB.loouvvWWWח  <==t?0=~"*VI˖-[뙳3憛:///};w-Z N:TTThwwwYJÆk-v7Nwe}8I\JKF'8sdeeENNyyyYJXKJZZiii^k..]sa0dq]TTd-W\|f3ܹ󶝟{"pOҮ];vA9x`X
ZR̚B<==9s-CebunțVe{[uִnH ϟ'994222pF0FUׇYUIY>,6m",c̙5ٛXڕ/;JEff&!VLHH%h(wc˪u3RxF,_S^^K߷z(nݺ={гg"	X帰RXhZYժUKrzsX[n$~n$FTg}
)9r1ZքJ `ccC=.˘:_J%/V)((VZ3(BSPPPPHA]t	
Z.oYBd2p䐜\Cdέл1tbѓe.	iB0ydYΊ5ZV-*✜lllprrBr




5ԩSx{{#h42f


|2zbrTtFjBQn],Ki }*v͒ꄞ;666s222+((@REYGGGZ-uɉ4T*'O/Q=ɟ)7?tAAAxyy#닿?^^^uLӦMΖ߻+^ff&+VTL222(**K.qEtyyy>}< VZEop!pORRR";۸qMr_Zͺuhݺ5}_~DDDP~}]=)2~LݨBM*gYh4g>_|A>}d]elPPAAA7СCٻw/6$''w  J9i)vٳ9y$888I`` 111tЁ*#YېZVݍf|H}5dffjٻw/)))deea0P8::һwo^{55]P}?)QYtܹ\8~8f3ZNGdd$y~X)[1L={#GObb"ϟr;!!!DEEѡC֭+[ͤBEeK?Gr




[ezON8Sp{{{ԩCVի;vJŜ;9>>[qF(**BRE`` ۷E-|`}LUe*B9jJl8ɄZɓ:ux6o̅PT^RSS#nݚSNE-hٲ%:tiӦ=VFSQAr





9{z^v3Jq&;0g&L ǖ9///ׯ϶m0Vu$Av;OrE)(XGNN}`0


>E?Ӊd,Z_uZƍ2d#F`X9Q⿋2lPPJL&ϟOTTm۶eÆ͵QPPfZUߟsαb
Jjj**:E]СC2W^yӧj1T*pwB
%gܸqqիp5?S[i<;%%%|wc2Cz;۷ӷo_}]&L@NNN۬݁bS$^<@߾}$==1c`kkK۶mpC3"pe/_Ν;yh4L&FmK`0`4zĻرc1hZ9NrEݽ(9
ZԩSiҤ	ϟ7x@|||+(((\hdxw;v,5
d1s'd2h׮Æ|\Sƻ%A"&&'OӥKyj_>O=?`wټy37o;w),,?iӦv&@t:kNGXXϏ0t:]Ue\P}Ν;8p ܹt:ш`e˖deeYT,ea\IeeeqF~gΞ=h?ST899Q~})**"!!N'H3yd{ڶmKrr2eeeR^^NNNԭ[;M&Mg'CᎢVif3?3fر,\@nl6QTZ
///Υ+((?֬YêUHJJh4RQQZݝ 5k<@e֨Q#z͗_~m>7|Ntt4ǹs爋CדHBBuC=D֭oÙQ(9{ѣG0jԨk>1114nܘ%KX}X.#Gdǎ`ooOݺuyi׮5e6sά]Lo:FMwʉٳ~/2{ly}ٻw/_5'##b\<cT;P=|Æe*{ѯ_?+BNAAzTVlݺ˗/cgg?ڵc̘1DGG%%jZhA@@ `0t26mcܸq,ZHgZɄ^gѢElٲsQZZ6_o߾VAoE)hf3FNg50ԫW+VDhhU/@I̙L&~}Y222nkv{Ɗ3gGQPPgС:U垤UOZcǎ$%%1~x^{5ZMg}ƌ3(((`4kLnrog3>|K}vo߾״Y9Ϸ~ׯƍ`ر͛7 FaqFE)((z!qppe˖̟?_V"ZVxVFhzt:+W7ޠ:uDTT6^Ojj*{e˖-QZZJ޽Yj5Q::^fffoqFj|0ax#aE)hѣQQQ:tW_}c*Kihh(/Gf@PSNѿ.\@5j`8p|F#%%%TTT `kk3%%%]iӦt	M6矓Lii)&rlmm׆ңG9.l6fIKK#55˗/	^QVVht:^^^4myUo&cƌ
]Qܿ"j4ӦMcʕITTsuAH3jNŋy'YFh$	[k2[luj@j׮Mڵ	777Z;R瓟OQQr9
B?h4 pssˋr233Ӝ?[[[ԩCڵ	&88qqqK1F
qvvٳ\pΞ=K^^%%%T*vIvv6BN85fuN_oSz(--%77_1c0|p^}Uyĉ$GA2BrmڴСCٓqѨQ#Y_qnCPCqΖʸrlsuuёFѶm[ԛ+%?ˡ)2331qF|IjժEYYzV9e\=(BNƓNfEբIII>*whtFDDܹs3f"Bq{}<#_PefYr[r̛ԃ5779ǇM6ѫW/̪Ud1;"j<N:ѻwof͚?O?XZFGDDгgO6l nʾR@n)++3;8s޸g9!mf8~8ה7+<6((L&+1` 7]#TTTBDJ*//`0pƏ/₋Kq7#f2LFQ.$M{\´i%PPBFpppԩSxzz^FŅO?ZjQ^=e5XU7T*/"666̙3V/	4IUշ<>Iߩ%Y,_7X?ueҥ7]NS3

 ͎9ruшJgŜVt:HfMF5GM(((Hcw}Gxx8f*dVQ˄FpYx"A(r
!j5nnnxxx鉧'-Z777t:Uqti_BIm/g2i4^}U&Lӧ
+9[Fc2',,~>}#^ yff36Sk7RspxF#&LgMe||<۷oСC;w^OII	#899IHHL&찳֖2


0sEN:Ç)--er9JVKЦMej}W+O|GĉY~=SL[ZPFi$4)//iӦdj6oLPPOOOUX]UlF|gԪUqUyHBɄh!?3k׮%--jx{{NTT-[
OfRviff&)))ʱcؾ};?ATT#FV=Hg,^XrSXѣe˛UV1j(;5x7#yl;v+r*V8ٴiribt:{e͚5ڵK.RիV{]?\i4鈉!&&j0L=z={{n֯_ϧ~-[䭷"""BJcz%Ke1΢QHܡCAӦMׯFgG~c͚5͞={h߾=Wu5RUſiQGAQxwG*{X˗SXXmڴaرk׮ʖUIh4cGFFjnݺ1uT~n۶ݻҥKjE2~!P%KoGHII	6$;;3gģ>i֬zf͚o>%Xכc;Y{8ڷoOFFU	Z͇~ȼy(++[n:.] E-WpBU1ږ%K&j*.\@Ve$$Z-|(Nɓ'$;;;;;z!z	+5j.dʕ5ѣG[CB ׂrss&//btYYY(++Dn#666J@@ gĉa)(HB?^6h42rHΝk}.!Ru.˒#,3Co	ah4?<3t:x*oG
Siܸ1Gh4^WH*s3Pc1r	 ^=jtذaݺucCBVm6lllnu[^/UgϞҥKٳ\222|2"ԪUJ\*gggt:ԭ[@BCCvڵsVqpp 00vѻwob`½`@RuVBCCo#0euz*-Pn$ qlfϤH5gݺu5~;vȟ#0mڴ{݊rvv$h4~Wz?UVOAAՀh0YwNYX.#rz=:usΑM~~>BF#fYfpe닏6N:laqTTHѣ>}_~u駟booσ>Ȓ%K0\p|RSSoooj\Ynr--	Fh$//|Ph4yz-6l@hh\HRݔF #}ue.aD.]|2M6%,,DFFkg9	MΠ9*9}4v"**
7779r]$KZh4ӧeVeȑɱ)B֭k}^o%nv`үVJYeddʹsdc4:Qjquuvڴhт	

BFàRIJ֭[Ӻuk"?OOOj5NNNX7SQQ+Wr
B5h4xyy@XX^^^HHH"Z-{	&Ȣf̜9.]Xu<Չ᝴ZU},c8f)DnݺuW)ktQ}jmڴ[i&Vh4ѱcGCppUǿYy#""hժ rզMX`zNU`[G^OZZΝ#++cǎŋ|2%%%V]h4lؐzAfn"Ur,cq,@;wdŊӣG:v7%}2#r.^HZZϟ'++,rrr8x ۷oT>W\E>>>t???	V)1oߎΡRx7ҥ5n*\fڗ1~;hѢO=CwQ}DU7Ӷm駟رcyyyxzzҾ}{y"##ػw/۷og޽|,^X iӆ]ҭ[7	wlwFGhddF.1"=322m49wgϞԩS\pSN|2EEEckk+hRYDDAAAN:rہT|F\w̔]ff&&))͛/Y$,NQF~T'$&&ʮ3g;PQQAyy9666899QN7oN-h֬!!!UīBul۶MKQFɞo7²^l6sqHNN&33S$QTTDaa!7܆B
憗u%88:7KW*/±ccĈt::tիo
}lf͚5|W<yLf36`Һa6e>|-[#g|hт=z0p;fټy3Z{!Cg"""		a֬Y4oޜ'booΝ;yWqvvd2ѠAfΜɉ' {{{f3W\Ņ:u₷7#<<@t2w޽0{̼)!w+ےʒhiĞV%''.Ƒ#G8rgϞ%??blllpww'<<֭[ChhоYWK@@ ܹ)Sw߱~jXVb͜:uJaoo+nnnHhh(NNNt:Ϟ=K^^SXX(Oplu777e˖4i|&_ĉ駟8u[lG%77W+ۏ"-[Ɨ_~ӧ',,>}гgO/BJJ
YYYr<Yxx8?0͚5s,Yf㏜?2iٲ%`РA׸-Z %%???Ć%%%`ccCZZ4 ==blmmCԥFvuؑx	:u$:H1@|Ǵh*.V‮1~5qYfÇi&>̩S(..www7nLll,#FxTpb6quue<䓄h"$o(d޽X#GdڵkFӦMiР5BYޮlyi]Rl3g8v$11/R\\Lyy2h bbbwi,s1b֭2aC(B'66޽;iӦV3# }ZY~=III9sFYfoߞm^cHRR۶m̙3Nll,O<={)aL~~>ߟ>7zZMN`˖-tؑ4x<<<ԩS3999RO-[{'^rizMNN=cǎEV˭$|\=-6mbl߾f3nnnкukj'/שp"۶mc<x-[^WuϜ9۷Nii)hт6m}Ur+,cZM9<B܈^KSZ_~ȑ#1d.\xR{(BA*իy穨:uNk׮GLL5OLL?$..'OrEc`` AAAq:f3bΝ|$''cggǃ>ȠA?ŋ\pшBΝ;GݺuIHHZVEɭ`"""2e
FZʕ+رj`<WBgҥ4hЀ}uߩz¯媪/YL&iii矬Yd٢ܤIyzRL&V\?Oaa!5k׮̜9Z0d/_Ι3gA>zꚃ&p믿Lbb"a4o*FNlyzzsԮ]Zn]wrD,TwW_}޽{x"NNNݛzjRͥq?~~QTTDbbbC(B#d2ѷo_~wΝ˨Qh4<3|ԯ_zH]x///V'صk'N ##(#իWڵkӪU+.^H~~><yK.akkIIIlԨK.z233VѢE8{,GSNYFL&rssСCVBRRR߿?gϞ\eW4FGGSVVƂ2d<]nj#v#KTLZf?~իWsi	[n<c4k֬*{Ak.Ξ=@^W_~VZlْw}ooot:ܚV$kF!9988{,TTT퍛NNNEpp0~~~78w:uU nnnsr&i_-Ū$ضmK,h4R^=^~e'g-4h%%%|粧~=(Bc$::GGG8&G}C裏34`4|28::hpttˋ@5jDڵD
5=z8>LVV/_cѲeKbbb@բygؼy3FbV9r0?}ә1c			4kwwwRSS[^,='NGrȽ,,1<l޼G]:oJU3fWKO|ٳ|}}߿?O= VW)n|oJ`` ӦM'$33tZ-z"!!z)^yT:yKHH`ҥǓJii)ȣ>ŋ18pEo-[0qD҈'''۷sAY<
!%22nݺѵkk&Ϟd^~eك&Mbĉ<ɓ0` %{Ҿ}{z!4999DEEȩS b+[v!rrr8|L&
ˣnݺ\x
[.xyyѬY3ds$*oSѶiOOO>@VHIIٳVOjpjժEQQGŅ۷˱\6dÆӮ];~:vxM+,sONp}#䒓޽;FT*6oٳg)//rƝZ'''Z-θѼys\\\h4VUOv$''3o<p1I&U)~QWqwwg̘1hZm?ȑ#ٸq#6d޼yr24Yʕ+do߾tEne%ũ~ᇼ{8pR')))OB,k8qopi***SN<Sԯ__[۟y֭[/m۶رcr!"##$;"j83gdΜ9̜9)S aJnXt):Fr+''NٳgIOO'##COQQ)))888`oo\|Vmmmlll駟v/\!ܒ)Sfqtt䫯Bǣ>/y8s=z ++\#̪r]vܹs3>|;vp!~gRVVFZjxyyQ^= ۂ;RQQAYY"H())!??_[RRBQQeeefHۅr`Ԓf]ek2fT~mvڅh$<<YfѥK9G+I||<mڴaǎ]kb6qrrbrTkQ^%$$pBǥKpvv&22G}$wwwrss1V'^^g߾}lذ]vF!""{Ν;JVelܸJEaa!^^^<L>j=q{P
 *g
N2>~AyYd	|Ç'==NwK$7ehh<OK4JqXRܚԶ=$&&_9Z]yɁr+Wh8~8<=)nm۶zj8KdwӦM#""ƍ_y;\fsqq)--[[[U wnϗyyy9s挼LZ1x{{Odd$r]sLS-ʕ+ꫯX|9DSO1eaUÑۛ6mʠAp|	}EFAc29r$[lXLM0A-=7ӤIr[mzhٳ'={$..OOOV\>|80qD1L&.]ʜ9sxǨW%%%dffb4eÂCr5|m22e
K.￧C <S_۷%6$#FلwfFTUI):A%k֬A͛
	ª4zꫯcС7*J L>vɩSr
hBv)ahXnׯ'%%ED.]J|rrrdnNNYVV&s&RŋBj$,,(:utNUꂳ-[I2DNywX|9/GeƌՆ(ٳLXXԩSה?>?ǏG2|pʈHU7{=oŴjժ.KpibEyy9ǏgƌF;vĠA>}|O,Y)Sk.yp{Qܿdv;TvzM?@Ν<GZDbb"M6mt7<P٩}ywԩ<|SSSh48;;[k4.]JԩS|rڴiC``-n7׫WfymǳuV>3򰷷y̝;ˉ%̈́rG~c֭ԪU:p1su\تIII撔d(Y튋6n۶mFBLL<Hr*tY2*W^y3fg1|4h@dp)\e@\\0Elٲs璒#ge<1dZVʙ3gnKaaaV٨׳IH"'' rrrk׮lذt>3V\ɒ%KwޡiӦ<Ӈm#wP}(1rK`Y+Hѐ˅_~뱌d޼y̚5[ҰaCt:zdddTxlxyytR9ෲd2QN֮]K޽D ???FͯJ۶mY~=V-GUd:vȱc\v,yŬ[gH<y2,Ͳδ	w;w.iii2m41L̜9{{{Ν{u&I"rV+i=zT0eʔ*VWRVDwqiڷoφuU?uqDI!om۶fϟʕ+)))!&&1cVN{Ǘ_~I~͕c%o|=S$%%c[n'O?-K;}?@HEŁ{Bj]E~mmmZ[Wκ8QP(  $p~	<O>JrYs-Oo̓b̘1pssåKTa8q.]{SNȑ#!){ѠNGK$fffʊxzzb``PeY2d2B!D__\x~߻wobaaAfQCL&#BlmmI`` IOO'yyy*XF>}.KFILLLH@@ Yh133#3g$͚5#dѢEk׮}d۶mgSXX2F0cWXXHrssIbb"mS||<ӧiԨ%AAA3SoU}WXXHRRR˖-#]v%>>>d*m#dС*d$77gIɚ5kɓI>}Ȍ3Ȋ+ӧŋ'ښxkke}ѤuԔL81KOO+Ԧu>D<KVXAIJJ
%AAAƆ8;;V?^BȺu']vLk3֭#uҷpҲeKFz___ȂԾL%BڶmK<<<h;4x{h:LH, ڒ&Mgggf5
Ɔ{{{H3qqq!...uDWW[ۧO!cXhe2#ߟ8::BY!!!BYh֭YfYfaǇ[[[biiIȑ#!={6KY@@o;wƍG<==Ç+\S^8V~QfUӧɗ_~IȀȚ5k&U٢@߻ 6l _~%	$Ǐ={7155%...d޼y恺6Vaܶm%B={VeS}FS333f2` bllLɶm*޵]@@ڷoO֬YC+=C^^")))oݧ@2bĈZݓI͛G7oNLMMI@@ }W|Pnɉ%K'''}Ҡj=@mĈ~:\DkP(P\\L?2;0cҤIXp!|>FǏ#;;@y>D5F&1q8jk <yӦM96mڄG?Ĉ#ra``'NEDD`ԨQή`:KMMEvV]C*vDݻcϞ=^[VS0@1+39 ƎKMqBM2?~ں߇s툈@VV<<<0|x<=dڵ+~7]5M*`ԩ'N,#DQ1VX,r9\.~z4mT%tp@S̞=׮]&[{{{h7.uyGNND"


[nܹ[^B=`ccsssd2BGGHKKCJJ
M.;b̙hڴi<Ƥ<֮]+V?Z|Kh:?55n)S$BؤI|<yr;vx<7)}zP?6ۨ{$	D"\\\ÐdĘ1cеkW|Wسg+lT Xx10d|>$AN,#,,/^.J
kKR~2QiL>Ej֭H$'BBBL`tU6ώ9Pc\.ǥKsN$&&ۛ&>r̙ttSM?355ϱeF=z̙36lvڥ[ueuDW?~z*߿4HRzW(W9zyyaǎ3g&OVP(LJda"̅B!Y!ڴ|Pm\.͛1gHR<~=ޫ>@YΨSRRȢEH۶m	!D?)O޽'ёp\sz>$0e 
ĉL&#Ϙc1T1sgud27ccc"	!3f61HOO'մZXXHÉ9qpp 6l+@WsieBr2m4Gȑ#Çɽ{ԗKULN,߆DB:t@-ZD}HLMMɼy!Л|ʛÉ!9r$!ԉ9c1MǫWwB*Aý{?9r[w||<oy7ۖabb|LЏQx<4k6mשS`Tiar]x"
ϟ?ǏaaaKKK	W:b1SSS^fC* 322K 'OW_ ѦM|~-
UmlYlVXB&L@1ϛec{?HIIAaa!wߡ{u6|>p"-G{{{lݺ111ѿ,]AAA۷/-Z+Vvn|yǌɊ+0vXtmڴ>!@*uNCЏ0YiM"66
;wK3MǃX,Y(iP3hzT*EPP&Nk"44&;w			8<RRR  O`P(puuUIXye~-Tݻ4sǫY&[ll,.]gCii)2rߟr8XXr% /^T[>C\P'|?X`BM{			LٌY^ }vDFF"99%%%h޼9&L Z6#&[nwu><///lٲ.]i~g,\fB˖-!pmXXX P/T[r"11ݻwG6mH}cx?6rX,t%Tp[ÇhR&g8t
osEȡ/`ƌg}/^@OOvǏ3  ˅P(Df9sfͪP&u/⇶n_uV wT2B\.ǌ3l8::bp8ϱxb߈d2RSSSl)))泡|Dի޽`- 8;;INh`H$زe.^<E>ŏQ:uDy>lt͚5Chh(={PBÇiӦHHH)qdk)9VZ	7n܀}ߑگAP(111
ʇꞥ;U,6(fp8ܽ{mڴ:F(oD;w.~ eiWѫW/4dcعs'd2\R
{yyCTc,h<¨Q0l0#++ ڵkq	#99ҥ&MBƎ鷨vGƁk׮<®	q̼ڵ&;eree᭾N͛7ǈg/g}+WB"`׮]4h5kܷS_~ cǎUX7qBנr&&&8ydAM"*0ϮYf۷iPXmP(3Y_HOOV&l6<ǏC.;w/|}}!n,}~׷Pf?'OȨ@3,߿sA~~>|}}qF899|>cƌAf `jjlذbt077W;?sΝ;bӦMZ0'O`ǎL&H5F4B>7e8;;#??\c¦MvZL2oߎ={I&HIIf.
۷R52́R*/^Ă[{$F EuټBLLr9
hvhܛ
@-r}a9s6mڄ[n收!00zOC&jof!
+Pg0hPdf	ӥK0fػwCOOs/))	...J:t(.\>}`Ϟ=*ooN6			χ&MݻͫVl ))820a >ŋp	[[[5
۶m{ԙr9`B˖-ULCcnӦ[?ϷsHc033Ó'Oި\bx?A]sJi4=PjAdLQLPƹpB\zpqq_~ob(-1KLl6ٸp"""h @m.w# (
<~iiiͅT*Ç!Jb@&½J8x 7o^j2;w.b14?F׮]q-k2gZ\\]Ço߾Pf:x 222 
i>!ήwѣhGMͤ2ٳr
M믿V	V`Pb1̼9_~իN+9.KͬSN;rssahh+++4m{Fk\>vN2b^1Bejj*ѣ7z^Ν.ڵkW9׳(wA`LQ			:u*Ο?"bڴiTxcMYĠP ={D=Ю];ZB0wڴiHLLL&\.GII	JKK===CCCں?͆%\.֬Yϟyx9ٳq2aѰ1BYϞ=Q\\Ǐ $	$	xj#Gh׮<yBOңF[__ZZZɩwAn0zh_U.X(Gl9s;wDRR5jT!Xe4H @P	=zMy#0* 1vX<{G֭[)	ĉ)ovv6=<	ka? 991118u&L [[[_~077'"8\\\;vPu'Wӧpqqǃ7N:U(J,.aLJJNoh:?ߗ:3\'N@^^,,,ӧC @.h8Nl兒+W"++W\AFF>^^^puuŷ~333@__fxxԩشix<CVVѡCJLpU5
]vݻkʕ+HOOGBB֮]PL%/`ܸqrxյAY@׮]C߿{FjjjѰ\@)z֭HMM.0{lJ?o\{_fӚI&TSZh	]T*EFFf̘#F`ƍqaשHYhrؾ};>3WI~\rvʕ+a`` +++x{{?026,--q
\}y֌	wss^~-[ԪL޽Z=:YYY(((@Ϟ=[[\׈*]e(/1oAVVLMM1j(|簶2Ǫ8Ъj7ƍoD"dzիWH::esrWF0vXwi6&&&ѣGx> @(bXr%֯_Ah;B,cjχvm`cp`gg.| emL222p}ܼyΝ "<<FΉbjf1hZ8!V&dfӧѥKt|>=ǉ'T}Fev/T1x<x<#<<~߿QQQطotuuaee:jl؞Ym&dggcǎy&d{ō7+塨Ԃ9sԪ|mmmC[[[[	,,,wwwo߾^8v	mmmXGkU6yb1q=C.C[[LLLdggCGGիƏ6mTBU&T%T`ڴiɡZ&P] XAS5+/VaʰU0tP&qi*4gΜځ*Y,LMMq9m۶R~333>|>>>{'''={*c$
gϞZ-fpf___իՒD"ܸq{Ebb"5k)SÃfr?}D"yf=_~A||<n
TP\~iiiTcZW9z%Kʔ~	<yQQQʂ7n`6LŬ_\r5._Y%qA̞=
prr5k777YLӧuh{-paZ7|p<zo߮r?i`urBȒ%K̬q^ĶmGZnM6l@RRRT4נ>ҦML!Ȭ
ɓ'\ϯ*S7ϔĉ3y)sJ>}FUEN͛Gi@Onn.i֬JnULFIbbJKB&QQQjL&\.	t\>Ç???K-[V!go\3HϞ=I||<!fy&?d2ҡCM	!NH*׆˭uߏ5k֐ "
P($:t ˖-S"󢚙-MNڑ#G6MVXQ=W^Ν;ёhii+++NC-[FmJ&N`ֶU>2(ѣGѿ'GBA?1tttyfܾ}aaa.Vm[*sDZZV^USrlX|ZsjUmS}q3V$r˖-P(DV J3gիx[OOOXXX **
j7nL>%_sj'Ο?|ELL°l2QQQ>}Jj&}`ӣp
$	r&?V_Z BXXLLL?U&L.]
رc X9@By111Ν;ߘ`YyOJJJsssر-[ĨQ U^)xj
A.]УGdgg~CϞ=₾}b׮]oTT*E^^J+4L: *3K.ȑ#~z\vAAATpo\.ƛ mmm;vՅɊـl\ӧjAFTTϟOͩk֬mhqe"##ݺuB@nn.LLLԎǃ9^z࿅Q[[[mvڀ CKK @CcǎEqe̚5nIoCł>rsswS̳7nrrr>̟?_̑)SɓoU7` ]w/x{{cҥ*OaiӦv UB*"..úuXcccxyya4JM{EVVFgϞaƌy&?(?:u*|><==>eN9|2s]-07nBPI28+:Eرcׯ;X,҅YkƔv}ھx}FS^µkעK.jVRSS]]]:rXl̙CWv<RA*BGG5zLV:jܹs8{,=zX\}Abb"_P$%%"9k6]]]*P70A'8v}wO#?^Z9C.cժUj獺ZX,\.\.ǏXd	o߮S Bv(RM"ݙôT*Ņ>믿@>{xx{*/uBm0p@.]͛	Θ={6^Tddd6mE&M?T,*xw++wҟO	 ˰P5f̞=۷P}`B]okKRف!55˗/Gdd$u^gϞoQqN;\\\(o^зo_̝;r+WҍT__yyyjJ(..UxQ`3fֱY;vP\.5S*áωb}&:fsŘ0aM 6l@AAv	gg:m/7oW7H$T[[8AvЮ];8q}ϭ`˲("ULݕ+WеkW8 gϞݻwѿL6rv/^ a]ӧHKK!
annͭ^Ϟ=ý{憿VVVСN:΋b\t	z{hP#K$PrNe0>&hѢܰpwD"DDD?W%f^taaapwwۜӠYFFF61<_|X,6mT*͛7Dxr<~vvvTdnI-mۆ|ٳǀfF̙3+)p)KC===add$[nݰn:㺪(kCrrrkϟ#;;ʂD"T  --T4r@݋@=K!C 00zzz{.< ڵk	&M6ǃ l,L?/^Rl!00?#:wL9R2G@CӧXf0yd8;;cG$UJyALT/_"$$Dw%8vQXXr«W+̚5^Yp85jtRzMBpw^J@8s
X#G?ĻvJ)񐖖`J
+Յfa˖-zҤI077ǬYT{kf7n܀r9LA,-uɨϬU{q}Ҳ׮]())]Th#gDhѢŋ7nJ9cϷ~5kW^^)1cݻ "7ŋUتSNTsssOj+ח)S ({ömp)iW\JKŋzjl۶43uc44GZ}ƇG߾}kTfU;Ohڴi`9s/^ѣGr]Z]ϟ?OBIm2~xH$V6++fPnwiii?{my	&M6ƍs6lؠ8 044c/bbb Eil69>8ƢcǎHMMǏBP͠&>TdT1B۶mqmoP7bݺu4(dh߾=@xmj.,hg$&&B.C$A,#??!ΝСCgFFr9ƍWWWL>;vsNc̙4U]=+}ɂܹs:::uƫhP9l0)P(t]fڵkT~VP5gxry'[ X~=l6:vR~Mw=B$͛;w.dgn͚5S!upp9spΝ>-[ijcZqJۦ;wܜkLR꠫݌zb`u^>Rښ2dN|888@P@"qz
#GĎ; 8p N:#Gbڵ*ke۶mFxx87n hԨΟ?/^055U_+##999ɩu<JoL;w	L0MMMũS`ff7[nd52,B~YkP=\LhG,cr]ƍJTU_0d`*YYWŋammggg]MČj
  44δ
yVZH\p/\ݻwc޽R%ՅY5**
zzzpS?ޏO}јrبsl*XXX %%Ee|uuu|&8ڸx",,,k.|ܹsX|9S6k,l߾;wDfͰh""##~~~D(--T+%%%ػw/tOMM,}2BzQG͛ѣGСLMMQ\\;֭[JK.55Ffk  n޼^z	hPS4HA^^^BÓ'O`jj[llr 			3g ˩pP_ċ/6(((@ƍ[. J)/'JѮ];,^FǎKv9Qi6Tv1τإR)<==kǆ
݄:=̻[א尶V:cϯސR)LMM۷ѣ5k.\Db3 0h XZZ"   ;n޼/B__fffbL&
' 5T«W^y)+pP\\\xFFF`X7n6l؀1cȑ#*YUA*ӧH$ѣGkP{4HA	xP]zrJ999ԩz}I&js9aggg#;;.]UYJǮ]Ԛ(J+++] uJ}Cj7fqS(044-XTP\~7od2q^K(
x
H]"lO;wO?ggg<x ...WqQrq8ܿΝիWP(4jhҤ	.^.]`ؽ{7R?\ju`~ׇ;]+˛ԓ޽8p Ξ=BV1ĉ>z]BvNEÁ9>|Ej8<r9U|(sAŸwnZQ\\Li Unu+77*$#IRS˫S߇DRaSc4ZZZHHH@6mRd&{I]b @k>`Ϟ=x!Yfbur#GD))}tt4uwww?>: #77W<bQB{Nנ۷oS#F`ѢEh߾=affLH$`ٲe0adRX,.]TOrW)--rn߾=;BG Ѷm[bÆ^Ϙr9|>"##ѹsg aҤI1b	"l6B=BӦMq*"Q{{{ɓ'237fmTo<f(FpgX*cF/))wu	X
u-Yyzccc<x ZR{-,Jq<{wFFFB!lll@.رc(**BFF|>JJJŋj7?FGGiӦp8x6mP%lڴ	_|._\ml67oބ[ѠYZZV`DII	=zZׯ_Z>ʡܟynFjj*LMMZ/ann7ob46[]kR)|>ZjwwwD"D"WI>VF)MoC#}[68?9uI@y+s%r9
05=41kZygߧAyjiH0Y[&McǪLLLPRRoooԩSq,,,p`ffFו1<UG9:(
I&  kkk 7|@ kkk9¬sW^$*#dʬP"C X3;r\a*SQ-8i8mR7Ҝu>.ϟQ2͆#nݺwwwp]eFuh(ӱcB__Gؑ#G`ii.]@.###jW[[j75/L)B.XŴPrfɍ\^W`ɡ0ӞR/SH,1*͠*ņ

JԴZ/_R,ZHe߻w۷ǂX'qΝ;Uխm>}IeliӆK.aСXp!D"(_\FFD"fΜ	+++B@ll,JJJXӡנhP#|5jHfr!0i$\pXe91üڵÖ-[c<y̪<HMM}#a))) zeF7Á__'Np;6sssBQ+TBj5rttDvvv>-ϟ?QXP(PZZJ|
ý{*EEEA__\.Wp֭[SVRDDD`РA޽;ƍϟyf]p8r43j}
2y:۶mbP.llٲ_~eW\A^yfT*YnMjeddd7776ƍ"P>sB__ӧOWqRٳgahhX#:JcЪU+TIyccc3^[P(0zh\tLҵkWAAA*\ro߿?rss@[[&Lfl6iNK.@WWƍ!
&N`ڥ_IjNX,0P4ʙWK59l6Omp	2ܹ38f0vX-Z+`bbBEfCV*;ld24jԨ@.wˣS ͣcǎ9s& ohwz{%y8x b1V\ʊ
`m۶ŋ*|= ׹sgӧ~ctQ=s\"L:0qơ/_Ɋعs'
OHTFmƠu4
mmmܹsk׮۩#Do2īŐ8p lmm՞b1lllpI eP'IRشڶm[hii!**J1iii |D)mɑg	777Я_zWP 22l6͛7W/¯E᧟~+0f8;;SomֹK?>d(Dj

ׯ_gwލe˖XMNNF˖-w!..FBRRbccphGNRRB!^x1^z]v3f@vv6___mۖV%''\a)	rرcja2SSS,\M6U.fd͛i2ɓ'q;w Jӥ)b갶ӧkEbhٲ%mCcǎ&޽K{.*x<3*fdd0`jx<5k?CGN))SCRRRA!yߧZaH#//V͛Ѽysx<N3];6`zQ>ɧ@GV^.c֬Y044TI[ZZի۷/""" aooH^__3({'Hddd1}tԔ5? ,]>Ç+222ۿ>}hpqBk
|>v!!!BC}Q.cĈ6suu?cRҷi/	M4={APP߿,>}ݻJr7RٓFÖQWWWH$*D2k`T
BH9 Cǿ|֮]x,YAjjBKKeW\ׯ_@rŰmp8s&MD#VTڠ|;stcҥu%퍘
x<8p .T!U^WMMMp0d,\7oʕ+aggGi<<<<Gu`o`ddCaڵtuu|S^j
7o^.^DG䀲,<<_
JL#_)SUVXjʕ+>BÇȈ2vWFĨ`ʔ)߿?fcԨQxIUrݻw/'9}4.^+Vq{
bo߾SXXHsT
P6 _gϞr2eJطo࿹)1-+op3gTE"^zq۷os212@e /@&  ^5>&X,999ԥѣ!0rJ+C-дiSDDD`	ӧn߾X'N}ϯ5	R/_FNN+V  fϞHJyR)MDUV~	~
R(F5j[VP,~YYYXt)V^ٳgpO]NH&0D"yrӦM@ǎA]|JCRHRaɒ%`Xh׮N:+W|22bdPXġNJt\y<D"T(L yd2r_ؿ?p)Dfff"//p+;v刊D"?X/B_M( ՁA @"o7,,,w^!55ϟ*5GQQ]޸Y{|`͛7h"\v2mbÆprrBnnZ~}hժ>mmm			ظq#Kx*ѣG_~}x:GkoA`96cbT EBBd<^BBB:vSN =z􀳳3SW|*7yᘗ}xǧ|ߘ6dgg#66O<Uڶ|]͚5ܹsU|ԵbaǎHKKS
ڵ+N>3gbڵ*5iի42r9P?OPRPtݻwGFFJ̧M6Xv-
|}}m6ZC0<xP!~JgB@BB&OL53f@uuG!%%#e./eN8u\.ڵk1d4i>>>8}4w˗ܹs*Zn&ڿO3pA eO?ccclٲ	666ѣxb\Çݻwj
yyy Q\\>?3/̛7U1)qҥػw/
D"^|	zѭW bnnN-#Hf͈aАX[[{*dD&U.BB7nL/,,0(,,$yyyB1	

"G233o5>|XZZtZT޽{Ν;B%yyyBΞ=Ktttɓi˷C]2dffBr$>>DEEssJҒYNITTJw!fff5:???G?77WBŋI6m7Yn?%%^Pedٵ;
ɆH>}h	wʜ+d2Һuk^d2K?;ۺu:ciiIH׮]͛վ5|*`GGCʊ\IOO'ҺukK,YB\]]	%ZZZDKKׯ={ׯW3-^<B 6MׯYniԨw8TVȑ#I&M!DEEkkkIΙw-1(#颺yfA͉3	#YI˴B|>ٶm{ؘtMe1d2HfϞROMubjjJܹC
+s,x{{*y~~~M6={ThٳgxT&EEE w=rIPP8U3_r%i߾=СYp!733
Ǵ=$$[6i҄1BToΝАcܼy3			!D PHڴiCfϞMՖ3w׬YC	!,\k&//L"Ș1c!ZZZ 177'>>>d޼yɉ̞=%KԻ 7qD2cBH!tŊ$((899}}}KKrDGGEMBHGGs2&	

Bhh(RSSb
;v>s8ǨKQ23P
%KZ-/
k)ѣ5kVǲUVر#k\|˘Y+++\r"@s6/ÁX,ƦMвeKp8nsUGvTY,!yyyohYYY@=pybH$(
wɓ1b߿C0bxyyDLh޼yc3W\&My/ ''?D"QgC`믱|rܿ׮]ٳgq]A__>}k׮6Toߞ1ݴiƌv=U[FЯ_?4k}6_DHLL/?~\%b47о}{044D\\N8ǏWf
]]]/jPhЂ\]B!~̞=
{%KoQF;v,O *2Fed;w%hTFM7>x1'N@~~>
Ueo`` }}}l6FFF066@ 1Gbذa^^^Ƞ_9ၖ-[bغu+](/>7Fݱ{n899!88  4*9V&&&*ezꭅ&3\\\D,?,q1i$R6mڨu~f#Hl3!DGbŊ4h_ń	f\2et@١G̄\..4nܘژU?Ǐ6z0!(HR<|Ò%K h^p---ܾ}{qƟ7<y'''lٲx?M4qMJ>5mԩ==4\-,LN	&`qV^?/%1w\zá,1Ο"=zh|4d*,Hׯ_(((Bgszxd2^xFfaa#   =_  ƍXj{8qpww0x<
6nbƢm۶PQ/T7DR+񐜜>8u`2\f* b=z;w.gaj5Zʋ釶`lP8g_bذaAHHLMM?C,TNoTx<]ׯ_:sssL8jUQ]Ɨ7#ɓ8u'߇;lmmq	\zB4ohѢbccl2XYYPmҺ\.>w^4Xr%\~o߆(i]+3=y;!F|HMMP('Ob~:D"<==1a
t&<;;B _5ΝV'dP7fC ˅3LٳgP[)m۶EVwJ5<c׮] Çmϕ+W0h ǫ,˗/͛q7wƔgSLӧ#<<nʂ2j"8|0akk֭[_~pssTP6j\Cرcضmn[1Kr\̙3شil6݋/HMMU+Xñc0rHlܸV)cX*Z8eh:|(]@ݚ?>-Zf͚	!());B###dffƍ9lllp%DDD ))	(..ƶm۰uV={^_.#;;!!!8t+ۣC򂏏p)8q|>2ZZZ---fCGGP(066FBBLMMAsjPrufSfMXǏcu^x===8;;cС0afӅ1c`aaVemNBks_eŐJt+deep
h8"""0}t$''GU6FV֭[i9{L0j>Efҥسg_^'0f|Ν;Ç-\QWSY0b޽W^EJJ
aÆU^~(J?QgP~۷oǆIx1y
Z7ծ3ׯG޽cxyyANsٸq#/^Yw===R;>LLLₖ-[B__͚5ӧ!H @`ڴiզ{Jx)+lٲ[Fii)$	###GḾFPEEEԺ@+VW^3ʹU}EY44(K0LZHH155%DWWA-ZDrssIaa!n%&2@w!Q&?&/==xzz###bffFLܹS{===riZvff&Qi"t͛˘Ǔ2m4BX"HBHɘ1cH@@ i߾=6mxb#zчdd۶mVG}B&%KBJr<xbhhH.\HhemΝ;]&3f g&,hiimmm@J֭[G8@Cl6##G$OBraBΞ=K5jDCɗ_~IڴiC	 C&M6%wܩQ3tPHDh|I3l6s̙3*v؁SNa`bbwww۶mC۶mq1=nfragg(|lܸaaaD*i U_$%%aӦMعs'gggj
0` &Nѣر#D"x<`>|>Q\\\'>rӧO1b݋Ç˫©ZP ;;lTFT~b<@dd$~gr4o

	եR)$Z2r8dVcX۱k._EEExԩr9=RDulڵcǎի
\@!U (CxΝooo|:u*lmmKbHHH6!HMM]N:NMM:\5
޽;vǈKPTTTt6lhj7u˃q[J%Ɇ e0攔G?NLMM)I[YcM&OLڴiC͉p8ܹs,\L8E&&&~Fn:bll}ymNwFsrJH7nL,,,!ZZZDOOzGx<	'2~xҬY
T[XP>EJJQT$:M!ey~mے>}ŋp2w嵒u剏'25$\WfΜI8ٳg!hp5ڸf+h׼<LI~?i֬	$\.mmmC􈟟122"\.3̜9iL&#dʕߟ+++Ettt144$d̘1E&Maɴi!ܻh(PFU(ui(S>N&MhѬ, 22vB6m###hkkO>xh|T6hѢݻGOwɌ3 hdTXXB#D"rrr
P7Ν;q=lذ/FFFBaL&7rt&&&ϱzjD"-3_יj5n999022q=zFFFU	`"rͯ|.^ǌ3R/^BFFƌWOǹ{s]VZA*Vkk
ʚnOOOlܺuCB~}suu:u\t	}ɩ7.,t?;֮]:u
oƽ{3lݺ NNN(**`llp)
PF6bR<OE)&/c
޽;.]tx<4ϟǩSкukx{{Sgӏ5{Νʢ{īڨPwF0p8+r9pe@GGZZZȠ2a``P=BqqqXhܹ0&6\e* .;;;|1{T̚5z)Sp9XXXA" ++,_gMWܵ<q:u{{{<y<<yo^FbpHXYY!55JB#}X`sP}>V˗/,A.#55 ;vΝ;]]]ܹ3,ͭ"77^AÇʕ+q9rzzz011AFF&N'NT'XzkU2raBy#Kzz:122" \\\ &B?Nȁ쇲U98`ŊuÃrMF\.$ݺu#yl@_^OS+("
ɓ	%;w482jy(+tEƏOzIɓӧ*Q):g]ҹ >>rY㉑ӧm]ӦM#FFFdĉC]_(?-Ze˖BTS z̙3IϞ=IϞ=#	 lMX,144$AAǍ2b43g $((8;;EMԔCCCrY"Hpp0iڴ)#XXXGGGD?N뱱!/^$hLj<W͆~w5
ݺuł6JKKuYYY*唔:㛘@[[ hܸ1f͚ӧ93R1c@=Rر#ܹI&
'_a?QFСC066Ƒ#Gj*H$xxxTh[aaal	{ʕ+rJ;'Nܹsp@.[$n:
PP(
<zv%K?Gi[4ǀ)S ..pҥXlvZ*[ބ͛5jd2N:
i; @%U1JR"??8sRSS:EŵkpM(
z
2!L eßֈٳgLl߾ꫯB$(**˗/'N'NuSF#T=_N	!ʂB!\.򠫫===X,G֭[#))	
.]B۶maff3f~T/#`,\7oDV[= h"ܻwX~=<6 11aaa֭ݡ˗/CKK0` _|w*F76l؀6`ԨQtR|߿?5s2LD 	*sbЪU+j
 ۷?Ē%KЪU+*yȌ彌iM!Cر׮]?._X)S`_|3fӌ)R]s`,6l֯_Oe|
Ws0244D~~~


PXXH
x^xf͚aÇq-̘1с	sԋF$ݻ͛s2d\\\p	/Œ%K0a,^nnn
x/رO>Ŕ)Sbмy:o}?0*p
McΤI&hrٳ+D`~,HLL$2ّjGɞ={Ȉ#֭144$dѢEƆGGG"Ț5kHpp0ٳ'Yb-|=d̙Wu	OɓiԨ	W10RYy઻/$۷';w&ӦM#ׯ_WK9
[=~x~P6={ҵkW2ydRXXHI@@ ё̞=[e~*s)ie*aaaĄnݺj̩&<@Mdח'''Nl65cR3)133#u$::YUB*@7oNLLLH@@  Ml6___rɞ={Y`
Cy&+++,\^AB{`NL5rTjj*`nn:hҤ	.\   5s՝(-,, p%xzz~+T-QLG
7o͛SGQQ;	& 44ZQ}z\fիW1gl۶6mDs2GlϠ:vڡ]vp8oѼysSr1cFۀb!22/^DFFлwoaӦMpuuEAA7n~~~tlsD2sB&1sL8p [lf!&p T-2a$	BBB0gBmAAA4bTWWp8xURRRabb̘1M6իWs!99W\&N!C <<Yo˗_gF@@ |||TF{PmX0斜`عsgso8%D022%eTׯ_C Мb7NCpwwǦMDQ(/씔Q`\PCbС8w~WL2,ϟ:s&FݼTNqfѩS'(Kl2l1p\ܸq...u9$5F(>>?Ç[[[XXX 11~-d20o<!++@0fN6
!OCˋAEܿ/_H$X,~kRHJJƍ!php\r^~ژ4i??QRRmmmx<ߧ>ʮoL!fQF({w1qDtwń	`ffM6L],\.t邝;wb>|8ϟ<&&&
u QE[.S'w&9G憑#Gbu.)1o1\.ǦM0vXؠsΕWRRbD҂8'Oll!JQRRBʛ~׮]ѵkW ~K3DK.ꫯ[U	P:L>SL3g`BHH4j[0Ezz:s<yd"ϟaÆA("))C>AFxfΜ7oVB߾}bhI aΜ9~: ˡ0r|rX,<@۶mi%%%x9ZhmbժUߨO$	amm$8994.!QXXϟ&&&P(q?~ZZZhݺ5!ܹ3]|>~G|gŏ?3gٙttt `aa㫯urj c><x nnnٳ'"##Dn7okE\>i+;Ͽ)eСCj*t999l6LMMiǣG`nn.BQTT ;[l)STY~F4rP~[t).],̘18p ѢE>+?cQ@@޽;zcժU={ѣGWsy9^~\ '':~EEET˪P(P={bȐ!j7Pv+;=#IRJ:-HꊿjE"4x?ظq#/_ׯ_-[DXX\\\мyst=z4U---q4io0yd:wL\Xj
022ݻp:/s 3gLbܸq!c̟?ϟ!}eMy4wťK~pp	={W\A=l޼ T\ԕ*4G B*̵h۷Gtt4l6?ѼUA9# Z/ZꐑgϞ!++T! H*\s e%x與<X,4{쁛f͚ӧOC,b"?+dGP#ȕ7|(/	lڴ	l6111XfBڵC^GkR~eu*www_ 6H={.\	 PHof3H$t!??Gff&%.**Bzz:*..L&tttp`mmxzzw4uy1"8q7oFll,tuuѣG,Y{S&Wꇃ;"11Cŋk9Q<˅D":t耓'O@KRlXZZ";;:7o!			DرcJJJzѮ];={IIIh޼9N8#GB Ԫm"""(wѽ{wzݚ5kf899_EXXF4+GgI*Sa.;;7=pN:	'%0$ocbS(Bzz:?DB3( ++j!ɠSSS 066FII	:w{{{X[l?,X }5k[niӦf޽{FOLzzzX~=5m|wԩ\RӭB@iiG*0S֭P **
Dii) ___899][~,qUȆ!,,@PǏ###wEqq1`llgϞi˗(,,!x%  ZZZ҂.u
5kB	QʚFh찢NYw܁T*E˖-`}CfoEJJ
(7X,4OM󡫫Ka{5vT&0mۦb?9СCvallLe֭[SNJȠ: b|>_}bcƌAxx8;̛7aaaЬ*bC.Çܹ3̰w^t/_ѧO87`XǏ#11O>ūW,Ȣ022BNЭ[7p\B,S ;;;8;;Si7i$<ygΜ_/^DΝѥK0B[ׯ_c8q"p\c67oެgfA-**!R2	B?B߾}yO*͛8sbcccz-3_7nC& (..Faa!%f|~JxQPPPlBX,M3fkkccc033]'<O:=YѧOA.gưaUL|x`$w8jD"XZZѣG.333X,۷a`@lܸy+ z+W֭[+2ksV+V~1c<=={W^wD/;lܸBUC#}d`Bߙ3/Fdd$[<AAAرc̙ڵ+6o+++$&&RճgPPP<r@WWư7LMMIN$!22ׯ_͛7"j22265d28Hbbĉx066%Ə'Ϟ=/<ǫW`mmcƌAƍիWC(R3%KХK<}t,˗̅o~unAw;cǎTxe˖ڵkܹ3


pe\z_\.Gii)2 L%ӣ36iӦ044D-``` .FTkb)"ϟ?ڵkq<pttĤI0j(?Pgٜ>D"Ӄ:W ,D"~P\\Rp8ũ>~fffn@rr2RCOO@%ۂ	8y$||||L;qAJUVX'O`׮]xHKKB{{{X[[w5y?h7愷b
"00/xzzb?`ddnݺAOONNNpss * 1&?x ;xD"
;vD`` ZjV}hK,ٳ醾n:wŕ+W_~ O<AӦMSJ#p5֭[ڵ+B!fr!J>cƌATTmȘU|>DU9{7XB,Z+|||pYCY<ymǺm*1b,]QQQx)b1,,,Ni^rEiP&1~TxbLL*s`044Fݱzj~@t%qGGG$%%YfͅWWWp\|6\.,R/_DVVb1Oqx<1W޽{1o޼
QiѣVZ???DEEA,W0~Xd	n
www ӧOQPPkתH0&&&pqqA@[[qqqAЬD  agg,6.(\.cƌULF8d|R)_lڴ	/{{{&LPK1ҥKػw/>}R8;;ǈ#T7T7oB @iExbt;w.Ґccc!%%?F^T,--)QZZ
HtTW[7=rܼyk׮EXX~G]tQ_L]
uy)۷#::Ϟ=C~~>|>1cPfۀ4!abb;w/D"5-Z7KMO9 w\]]UuxÆCZZf1o<DDDٸvr9a\ *Cii)5jSSSfc޽{!pJK~~~(**Bnn."##QXXhRիW[n8y$b1$	^zd|ΝCjj*Oqaذax*A" ={`(,,:uѣGSӧO#--2I*@Eެ,?8qY,Zh!C $$2T%(
D"Bdeeo߾x+thҤ	ӣ3g΄!\\\*SKSPn;wFLLq =$Su}2޻Ɩ	l`8^K.!))KKK4i:uaaaAcMsXXX@P`ڴi^k.xiiiA^^p\	I[[Ÿwp- eǏԩSiӔ)Spa<{֭~7z]]wm۶r?m6>|X%u{ I&ضmp	A&=zɓ٘i899Ehٲ%=@2×/_b֬Y|2~G̝;)Bk``R%1Pӧc طo8,$=--pvvƈ#0a-O͛7H<nnnɓՆ+tbP$
&իxo>[[lL6ggg|pssbG獌ŋ0a.]/_bƌ4ᵁX,all>KKKiӦpuu&wAM$t:u*]`Ba	ꜿ9dee۸{.>}J#`U>|40 ˡ ͠P(eܸq|||`nnX,¢<Y|9V^Md077M W@/gM^(3BGGpvvV)rg\ikHHzj8p %%%r
: 077Gn(!7 :u
zBrrrA4\stRسg_ e?ׯ֌Pܽ{YYY`ׇ&M"_#qMej&e˖H$Bcзo_6?>}k׮ TW ͛7U]@'O --HIIٳgQXXH2&7"ǃlllLMFFFԧD]=...HII-[7`ڵǷ~N}9cDGGɓ'Gzz:^~L6l<<<вeK5Ѯi(G1wBƍ1vhUK+Jk,{yrfW{9r'N@JJ
 `ɴnG;v`1cZlYh4\ŪUVpssÄ	 ˱o>lݺ]vEII	7nPܻw/={B}X,H$. \SGPPϟ6`޽:t(R))k:PvoԨttt JU2l6aoo6m0kT"==Fݽ{/^DAA%e9LMMacc'''8::ܜFs\fyZa6o"44_?>:w*++۶20<}HII˗/SC"dgtԩ\n!N?ɓ'ܹ3p%k"1v3u*ŬI `bbRΝ;#F`ѢE~cM+++|>}:݋3gb̘1QB#}`2$R;w֭[߃&MB>}`ggGmʩU{dٸvDk׎d8ӧpssS!ͥ|O5uff=\.,,,T43e(
p\$''#==O>EZZ={ϟѣGAII	JJJPZZ
===fff-ФIu1dRT$tgϞEdd$kק5(**D"AII	-0H$ P---֖F6{xxPsP(q\ЧO</^ !佧SW*W{M=?!!!5*wСDppF{Cheᢲͮ0irָ|2ڶmXJb9w\t.\@@@ !HNNV
˫uQzB5mTm&WS<yDRM+͆LLL`nnKKKQF#=sg"$	T
DTG!22qqqDVVx<X[[۸q<y<RcXקx6ƍYfprrOFMCڀyOsΛcӦM
h֬5j"\vƓ'O`ffP}M...ؽ{7!E>a4 446mxLԲeCCCJV,<J&`(@Arfff&pUdgg#''իWQTTDI/CЫit@&9Э[7L<&sܹs.IԹ_+4X,<y+B7oͭB [uŌƌ)Sֶ^Р>4<|>JJJ)_b˖-T3͜8f| OPJ2&999@NNrrrKќPvjACÁ@ l6*Z]SOhm{M6h"?~1`RHOyШQ#MC-4\rDFFbոvR)/ 55.ĳg0k, eλFC[0k
u
BP%|Ķm v

b eVVVkmuDDAUAK4Çrss1x`<x 'NDRRbcc#G`Ĉعs'дiS8;;Ν{@,88/_dB~w[C*RHʘ(
J8t<==%%% 033= N:SN_i.]
==:;Uj
hvZRۜ5)~23ߨׯqFFFF/R}hr4z
 Cձ39r$.^zJ ]>1bL<cƌKܼy.]¡CѦM0 M6UJ322zW]x044 |JcyK իWq5$$$իWhݺ5888 44<ڵN4@hv/


bpu@",$f^zȑ#033{#
4СC1}tDGGch޼93ɓ8z(tuu6mڠ[nUpU1ahh\q;w111Fff&tuuyח^'ƽ!>YgϞͮ^,666Ǐ4L4x 1n8L:ÇB nnn1br9Ұm6:t;wѥKxzz!|>
hժttt	>Uߝʿ@ͩ;
S(`x7oB899 @rr2._(<}:::pttD`` \p{{{̙3ZZZ|*r4<}^^^gaaWWW\z凞h &oBԩSsN6{\.H$\.ԿV*x)~7z
\.hڴ)&L@s}}}$$$I&UGx
b182331|p8dgg۷oÇl>>>=z4\\\ *7|>"v͛!SO?nh9ЬY3۷;vaêb7nĳgQ+5@LvD-[ 00gWN*B.c*W^ݻw"((8p &M}}},^U2(
x:Zl6n߾")bA ܹsDRRfffChh( 
k\/Cѷo' APZZsU+q8CGGJhaI&_b`XDx*r^mۢm۶i"=)))F>}pСJ+xzz"--R)pxyyhԨQf]v/ ̞=_}N3ӧ!طoߛvGh9>rr$''׈A-pjl6MDXSN}7@>0\guCU\>k27jX=z[[[\xݻw9ڴic
666pqq\..:w A6<==!P\\Lg8x ^x+V !!r?=z4^9H4|Dҥ^x[n?/_^Daa!wZ4C#cǎnܸ;P&1dLVuRp8bٲe(**30bB `֭033_|.b>PRR{{{|g8p RRR`mm333xxx`Μ9طo:t耻w{w[pu'O|)@ǡ\h'N#qFL>@vl6ΝիWchf}HJJ¡C0i$tZ_|AۤR)%%%s:>gϞy		< paiiNJ <B:_uA>uTڵ&&&y4(F#G~ǏB,Xϟc޽ P)	ǃ-Ns:@O|>RWF||<x<f͚GGGlذ HRp\T	`b			PA0竽.Q\\L͡C"00~~~pssp8tMD PkS*K.0331c<zb^45\\\rJddd`X,F׮]h"V%5oGh	F8 ۷3f̙Ν;@|<( `ll hi&`|n;.[)&/.uהڵk!
!{aԩT(Ԡn4!1l0\t	ǏPpo>deeaԩP(H$j9\} .Yh񢼀haaaPM#)q;	5^K9 s[n9s&~\|BRfݩA4hPP6ob˖-4iRFhh(pZ׌h\X[naذaѣ>s q)*X4i8Mc #
B%%%Q޽+WɸsBBB af94;z]vA("##CuVVVXny:hifS˗È-ZDp8`XP(@VV>u+/h2MOOzeԏ.\@۶mѧOO<QI[VFFyI3w_|~A0'ѣGܺu=B4/
>>>8sñm6XXX`шAQF<
B	Q,w==
x^ϝ;oo
bɒ%puu!_DȠ|Ȼ5hnb8wVZ!22RZDX;ȑ#pss~/H4(e*TDFFbݸ>JKKajj
.\@'X"e6mڠI&صkW]*sΰSɨ~pp	2SNnݺ@&
}Yh/H6])UR7r4(S&c³gϰi&Q#GļyU#iA9MÁBGw^ܻwO>EAA eBFFFקLMMi&t޽9\___aȑH$H$(,,D~~>JKKwQqw<=쬓5ה`
	&j"?@Z*4r`$Df?(2rAdQk9M<9qO۹vn/2yXEQPXX<Xh}Y,\О[14֭[QQQg@UUTUUٳD""=]JTVV޽ǏbxbL6'z݉D8v\.n7\. , s|>06l؀?&bNsؑ+fb.ʪUpelݺ---p6olϡD"jjj¡Cpea%~uk֬O>?+躎e˖aҥhiiIyk.[D"#~`ˁfюæ_}]:|7عs'LD[[֭[h&|#G 
'_s:v4MXYJ="|9N=z),gΜ~z444pbOf@ 8tZ[[q-|rD4aׯ_eYزey㣏>BWW rA$߲2^ޜlۂTWW7Hy}SSlقSNW^Ųe˲ReA@CC^u#"Q\\UU܌R,Y>	AlS.Κ3gNVj)˅ya)ihh޽{xPXX7n=%N~Db1{4{M\.LӴWt:7&""Mr(J^,**~eqE49"",vGn::*nlB*Uip:%"<#F3;cq+..0n7OSrDDD$N" Y_ϲ,AxB&	SJaa!


`|>_V0MĜR),ht 0`C$nH$]X,fl***Rt:ׇ{.%	|wxꩧR^cL |Dc#""^ip 7n*kŊoS^G,McrDDDdh롪*ǜcz=%aҥKKyǾ}
pĉEc#""C7ܾ}6mq),]43޽;e
8ܹ򚢢"|',.Z[[G]AßQ7p@eDضmكƔ͛R$IVľ+xSxԄ6x<H]6+5Rf8MDDna BuDQa̝;a`` u=W(աc^:죹͛~!kQf䈈&HtÀ3XreKLiXnLD$Ayy9:;;! c#""ʀ/N[(7ob/(J΃XK4K={6֭[ Ba#"" X|9k,X ץ^-YYYN>7B4twws4 GDDHaɓ(**B0Dww7*++l4/"x(ʘb#""ʀs,vΝ:06lؐǔYE|I^xwޅi䂇iAh,BMM~'8,Ysr-yUBp88<jkkӓiDrDDDJg؈6 wϟ>555>r\	rDDDiu9bj8ƅw/^hw$Ǩ%sŸ~:,X 4ߟZi섈(Ma8Mp1q8qf͂iy&o>ESEp:x<4---x  <^{5lڴ	sūe4uؑ#""J?&I^z%8p p8ؽ{7W[[B%IeY} p_ގFe@t.]_~`kss3̙P(4aYfAUU;LSJJJ*,۷zGqq18O?AUUC\1IS%I֬YEaٰ,$NZ4+V繪j.d<I/ɲW^EKKKڟyǎhjjBYYLD4Emm-TU(i?&ΑH$.($qrʰ]Dj*Ϩ/;whf:VmaGӧ*{[Dp޽޿A.G䈈2&::Ο?Çŋux7QZZ
u#innɓ'FQRRcm:> QUepsÀihooGkk+z{{aL3^/֮]z{NP9~䈈2ܝÍ#{ɳ<<qir
z{{uhʕ+6RC19wP8䈈fBX!sϠ GDD?{g9"""<œQb#"""SrDDDDyA(O1)9"""< GDDD䈈Qb#"""SrDDDDyT[Fg    IENDB`
--- FIN DU FICHIER : ./public/images/scooter_sketch.png ---


////////////////////////////////////////////////////////////////
CHEMIN : ./public/index.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Contracts\Http\Kernel;
use Illuminate\Http\Request;

define('LARAVEL_START', microtime(true));

/*
|--------------------------------------------------------------------------
| Check If The Application Is Under Maintenance
|--------------------------------------------------------------------------
|
| If the application is in maintenance / demo mode via the "down" command
| we will load this file so that any pre-rendered content can be shown
| instead of starting the framework, which could cause an exception.
|
*/

if (file_exists($maintenance = __DIR__.'/../storage/framework/maintenance.php')) {
    require $maintenance;
}

/*
|--------------------------------------------------------------------------
| Register The Auto Loader
|--------------------------------------------------------------------------
|
| Composer provides a convenient, automatically generated class loader for
| this application. We just need to utilize it! We'll simply require it
| into the script here so we don't need to manually load our classes.
|
*/

require __DIR__.'/../vendor/autoload.php';

/*
|--------------------------------------------------------------------------
| Run The Application
|--------------------------------------------------------------------------
|
| Once we have the application, we can handle the incoming request using
| the application's HTTP kernel. Then, we will send the response back
| to this client's browser, allowing them to enjoy our application.
|
*/

$app = require_once __DIR__.'/../bootstrap/app.php';

$kernel = $app->make(Kernel::class);

$response = $kernel->handle(
    $request = Request::capture()
)->send();

$kernel->terminate($request, $response);

--- FIN DU FICHIER : ./public/index.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./public/js/tomselect-users-config.js
////////////////////////////////////////////////////////////////

// Configuration TomSelect pour la sélection d'utilisateurs
window.initUserTomSelect = function(element, preselectedIds = []) {
    if (!element) return;
    
    return new TomSelect(element, {
        plugins: ['checkbox_options', 'remove_button'],
        create: false,
        placeholder: 'Rechercher et sélectionner des utilisateurs...',
        searchField: ['text'],
        valueField: 'value',
        labelField: 'text',
        maxItems: null,
        items: preselectedIds.map(String),
        render: {
            option: function(data, escape) {
                const option = data.$option || data;
                const name = option.dataset?.name || data.text.split(' (')[0];
                const email = option.dataset?.email || data.text.match(/\(([^)]+)\)/)?.[1] || '';
                
                return `<div class="flex items-center space-x-3 p-2">
                    <input type="checkbox" class="rounded border-gray-300 text-primary-600 focus:ring-primary-500" ${data.selected ? 'checked' : ''}>
                    <div class="flex flex-col">
                        <span class="font-medium text-gray-900">${escape(name)}</span>
                        <span class="text-sm text-gray-500">${escape(email)}</span>
                    </div>
                </div>`;
            },
            item: function(data, escape) {
                const option = data.$option || data;
                const name = option.dataset?.name || data.text.split(' (')[0];
                
                return `<div class="flex items-center space-x-1">
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800">
                        ${escape(name)}
                    </span>
                </div>`;
            }
        }
    });
};


--- FIN DU FICHIER : ./public/js/tomselect-users-config.js ---


////////////////////////////////////////////////////////////////
CHEMIN : ./public/robots.txt
////////////////////////////////////////////////////////////////

User-agent: *
Disallow:

--- FIN DU FICHIER : ./public/robots.txt ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/css/app.css
////////////////////////////////////////////////////////////////

@import 'tom-select/dist/css/tom-select.default.css';

@import "flatpickr/dist/flatpickr.css";

@tailwind base;
@tailwind components;
@tailwind utilities;


/* Sidebar Custom Styles */
nav[x-data] {
    font-size: 0.925rem;
}

nav[x-data] a svg,
nav[x-data] button svg {
    height: 1.25rem;
    width: 1.25rem;
}

nav[x-data] .group .mr-3 svg {
    color: #6b7280;
}
nav[x-data] .group:hover .mr-3 svg {
    color: #374151;
}

nav[x-data] .sub-link-icon svg {
    color: inherit;
}

/* Sub-menu icon wrapper styles */
.sub-link-icon-wrapper {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    height: 1.5rem;
    width: 1.5rem;
    border-radius: 9999px;
    border: 1px solid #d1d5db; /* border-gray-300 */
    transition: all 0.2s ease-in-out;
}

.sub-link-icon-wrapper svg {
    /*height: 0.6rem; 12px */
    /*width: 0.6rem;   12px */
    height: inherit !important;
    width: inherit !important;
    color: #6b7280; /* text-gray-500 */
    transition: color 0.2s ease-in-out;
}

/* Active state for sub-menu links */
a.active .sub-link-icon-wrapper {
    background-color: rgb(2 132 199); /* bg-primary-600 */
    border-color: rgb(2 132 199);
}

a.active .sub-link-icon-wrapper svg {
    color: #ffffff;
}


/* STYLES SPÉCIFIQUES POUR L'IMPRESSION DE LA FICHE DE REMISE */
@media print {
    /* Cache tous les éléments de l'interface par défaut */
    body * {
        visibility: hidden;
    }

    
    
    /* Ne rend visible que la zone d'impression et son contenu */
    #print-area, #print-area * {
        visibility: visible;
    }

    /* Positionne la zone d'impression en haut de la page */
    #print-area {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        box-shadow: none !important;
        border: none !important;
    }

    /* Cache spécifiquement les éléments non désirés comme les boutons */
    .print\:hidden {
        display: none !important;
    }

    /* Optimisation de la police pour le format A4 */
    body, #print-area {
        font-size: 10pt;
        background-color: white !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
    }
}
--- FIN DU FICHIER : ./resources/css/app.css ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/js/app.js
////////////////////////////////////////////////////////////////

import './bootstrap';

import Alpine from 'alpinejs';
import TomSelect from 'tom-select';
import Sortable from 'sortablejs';

window.Alpine = Alpine;
window.TomSelect = TomSelect;
window.Sortable = Sortable;

import ApexCharts from 'apexcharts';
import flatpickr from "flatpickr";

window.ApexCharts = ApexCharts;
window.flatpickr = flatpickr;

Alpine.start();
--- FIN DU FICHIER : ./resources/js/app.js ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/js/bootstrap.js
////////////////////////////////////////////////////////////////

/**
 * We'll load the axios HTTP library which allows us to easily issue requests
 * to our Laravel back-end. This library automatically handles sending the
 * CSRF token as a header based on the value of the "XSRF" token cookie.
 */

import axios from 'axios';
window.axios = axios;

window.axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';

/**
 * Echo exposes an expressive API for subscribing to channels and listening
 * for events that are broadcast by Laravel. Echo and event broadcasting
 * allows your team to easily build robust real-time web applications.
 */

// import Echo from 'laravel-echo';

// import Pusher from 'pusher-js';
// window.Pusher = Pusher;

// window.Echo = new Echo({
//     broadcaster: 'pusher',
//     key: import.meta.env.VITE_PUSHER_APP_KEY,
//     cluster: import.meta.env.VITE_PUSHER_APP_CLUSTER ?? 'mt1',
//     wsHost: import.meta.env.VITE_PUSHER_HOST ? import.meta.env.VITE_PUSHER_HOST : `ws-${import.meta.env.VITE_PUSHER_APP_CLUSTER}.pusher.com`,
//     wsPort: import.meta.env.VITE_PUSHER_PORT ?? 80,
//     wssPort: import.meta.env.VITE_PUSHER_PORT ?? 443,
//     forceTLS: (import.meta.env.VITE_PUSHER_SCHEME ?? 'https') === 'https',
//     enabledTransports: ['ws', 'wss'],
// });

--- FIN DU FICHIER : ./resources/js/bootstrap.js ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/assignments/create.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            {{ __('Créer une Nouvelle Affectation') }}
        </h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-4xl mx-auto sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-8 text-gray-900">
                    <h3 class="text-xl font-semibold text-gray-700 mb-6 border-b pb-4">Détails de l'Affectation</h3>

                    @if ($errors->any())
                        <div class="mb-4 bg-red-100 border-l-4 border-red-500 text-red-700 p-4" role="alert">
                            <p class="font-bold">Veuillez corriger les erreurs :</p>
                            <ul class="mt-2 list-disc list-inside">@foreach ($errors->all() as $error)<li>{{ $error }}</li>@endforeach</ul>
                        </div>
                    @endif

                    <form method="POST" action="{{ route('admin.assignments.store') }}">
                        @csrf
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

                            {{-- Sélection du Véhicule --}}
                            <div class="md:col-span-2">
                                <x-input-label for="select-vehicle" value="Véhicule" required />
                                <select name="vehicle_id" id="select-vehicle" placeholder="Recherchez une immatriculation, marque..." required>
                                    <option value="">Sélectionnez un véhicule disponible</option>
                                    @foreach($availableVehicles as $vehicle)
                                        <option value="{{ $vehicle->id }}" @selected(old('vehicle_id') == $vehicle->id)>
                                            {{ $vehicle->brand }} {{ $vehicle->model }} ({{ $vehicle->registration_plate }})
                                        </option>
                                    @endforeach
                                </select>
                                <x-input-error :messages="$errors->get('vehicle_id')" class="mt-2" />
                            </div>

                            {{-- Sélection du Chauffeur --}}
                            <div class="md:col-span-2">
                                <x-input-label for="select-driver" value="Chauffeur" required />
                                <select name="driver_id" id="select-driver" placeholder="Recherchez un chauffeur..." required>
                                    <option value="">Sélectionnez un chauffeur disponible</option>
                                    @foreach($availableDrivers as $driver)
                                        <option value="{{ $driver->id }}" @selected(old('driver_id') == $driver->id)>{{ $driver->first_name }} {{ $driver->last_name }}</option>
                                    @endforeach
                                </select>
                                 <x-input-error :messages="$errors->get('driver_id')" class="mt-2" />
                            </div>

                            {{-- Date et Heure de Début --}}
                            <div>
                                <x-datetime-picker
                                    id="start_datetime"
                                    name="start_datetime"
                                    label="Date et Heure de Début"
                                    :value="old('start_datetime', now()->format('Y-m-d H:i'))"
                                    required
                                />
                                <x-input-error :messages="$errors->get('start_datetime')" class="mt-2" />
                            </div>

                            {{-- Kilométrage de Début --}}
                            <div>
                                <x-input-label for="start_mileage" value="Kilométrage de Début" required />
                                <x-text-input id="start_mileage" class="block mt-1 w-full" type="number" name="start_mileage" :value="old('start_mileage')" required />
                                <x-input-error :messages="$errors->get('start_mileage')" class="mt-2" />
                            </div>

                            {{-- Motif et Notes --}}
                            <div class="md:col-span-2">
                                <x-input-label for="reason" value="Motif de l'affectation" />
                                <x-text-input id="reason" name="reason" :value="old('reason')" class="block mt-1 w-full" type="text" />
                                <x-input-error :messages="$errors->get('reason')" class="mt-2" />
                            </div>

                            <div class="md:col-span-2">
                                <x-input-label for="notes" value="Notes" />
                                <textarea id="notes" name="notes" rows="3" class="block mt-1 w-full border-gray-300 focus:border-primary-500 focus:ring-primary-500 rounded-md shadow-sm">{{ old('notes') }}</textarea>
                                <x-input-error :messages="$errors->get('notes')" class="mt-2" />
                            </div>
                        </div>

                        <div class="mt-8 flex items-center justify-end gap-4 border-t pt-6">
                            <a href="{{ route('admin.assignments.index') }}" class="text-sm font-semibold text-gray-600 hover:text-gray-900">Annuler</a>
                            <x-primary-button>
                                <x-lucide-check-circle class="w-5 h-5 mr-2"/>
                                Créer l'Affectation
                            </x-primary-button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    @push('scripts')
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            if (window.TomSelect) {
                const vehicleMileageData = @json($availableVehicles->pluck('current_mileage', 'id'));
                const mileageInput = document.getElementById('start_mileage');

                let tomSelectVehicle = new TomSelect('#select-vehicle',{
                    create: false,
                    sortField: { field: "text", direction: "asc" },
                    onChange: function(value) {
                        if (mileageInput && value && vehicleMileageData[value] !== undefined) {
                            mileageInput.value = vehicleMileageData[value];
                        } else if (mileageInput) {
                            mileageInput.value = '';
                        }
                    }
                });
                
                new TomSelect('#select-driver',{
                    create: false,
                    sortField: { field: "text", direction: "asc" }
                });

                // Si la page est rechargée après une erreur de validation,
                // on s'assure que le kilométrage est bien pré-rempli pour la valeur "old()".
                if (tomSelectVehicle.getValue()) {
                    tomSelectVehicle.trigger('change', tomSelectVehicle.getValue());
                }
            }
        });
    </script>
    @endpush
</x-app-layout>
--- FIN DU FICHIER : ./resources/views/admin/assignments/create.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/assignments/edit.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            {{ __('Modifier l\'Affectation N°') }}{{ $assignment->id }}
        </h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-4xl mx-auto sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                 <div class="p-8 text-gray-900">

                    {{-- Section d'information non modifiable --}}
                    <div class="mb-8 border border-gray-200 rounded-lg p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Résumé de l'Affectation</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-sm">

                            <div class="flex items-center space-x-4">
                                <div class="flex-shrink-0">
                                    <x-lucide-user-circle-2 class="h-10 w-10 text-gray-400"/>
                                </div>
                                <div>
                                    <p class="text-gray-500">Chauffeur</p>
                                    <p class="font-bold text-gray-900">{{ $assignment->driver?->first_name }} {{ $assignment->driver?->last_name }}</p>
                                </div>
                            </div>

                            <div class="flex items-center space-x-4">
                                 <div class="flex-shrink-0">
                                    <x-lucide-truck class="h-10 w-10 text-gray-400"/>
                                </div>
                                <div>
                                     <p class="text-gray-500">Véhicule</p>
                                     <p class="font-bold text-gray-900">{{ $assignment->vehicle?->brand }} {{ $assignment->vehicle?->model }}</p>
                                     <p class="text-gray-600 font-mono">{{ $assignment->vehicle?->registration_plate }}</p>
                                </div>
                            </div>

                            <div class="p-4 bg-gray-50 rounded-md">
                                <p class="text-gray-500">Début de l'affectation</p>
                                <p class="font-semibold text-gray-900">{{ $assignment->start_datetime->format('d/m/Y à H:i') }}</p>
                            </div>
                            <div class="p-4 bg-gray-50 rounded-md">
                                <p class="text-gray-500">Fin de l'affectation</p>
                                <p class="font-semibold text-gray-900">{{ $assignment->end_datetime ? $assignment->end_datetime->format('d/m/Y à H:i') : 'En cours' }}</p>
                            </div>
                        </div>
                    </div>

                    {{-- Formulaire de modification --}}
                    <form method="POST" action="{{ route('admin.assignments.update', $assignment) }}">
                        @csrf
                        @method('PUT')
                        <div class="space-y-6">
                            <div>
                                <x-input-label for="reason" value="Motif de l'affectation" />
                                <x-text-input id="reason" class="block mt-1 w-full" type="text" name="reason" :value="old('reason', $assignment->reason)" />
                                <x-input-error :messages="$errors->get('reason')" class="mt-2" />
                            </div>
                            <div>
                                <x-input-label for="notes" value="Notes Complémentaires" />
                                <textarea id="notes" name="notes" rows="4" class="block mt-1 w-full border-gray-300 focus:border-primary-500 focus:ring-primary-500 rounded-md shadow-sm">{{ old('notes', $assignment->notes) }}</textarea>
                                <x-input-error :messages="$errors->get('notes')" class="mt-2" />
                            </div>
                        </div>

                        <div class="mt-8 flex items-center justify-end gap-4 border-t pt-6">
                             <a href="{{ route('admin.assignments.index') }}" class="text-sm font-semibold text-gray-600 hover:text-gray-900">Retour à la liste</a>
                             <x-primary-button>
                                 <x-lucide-check-circle class="w-5 h-5 mr-2"/>
                                 Enregistrer les Modifications
                             </x-primary-button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</x-app-layout>
--- FIN DU FICHIER : ./resources/views/admin/assignments/edit.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/assignments/index.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            {{ __('Gestion des Affectations') }}
        </h2>
    </x-slot>

    <div x-data="{
            showEndModal: false,
            assignmentToEnd: {},
            endFormUrl: '',
            modalErrors: {},
            isSubmitting: false,
            openEndModal(event) {
                const button = event.currentTarget;
                this.assignmentToEnd = JSON.parse(button.dataset.assignment);
                this.endFormUrl = button.dataset.url;
                this.modalErrors = {};
                this.showEndModal = true;
            },
            async submitEndForm() {
                this.isSubmitting = true;
                this.modalErrors = {};
                const formData = new FormData(this.$refs.endForm);
                try {
                    const response = await fetch(this.endFormUrl, {
                        method: 'POST',
                        headers: {
                            'X-CSRF-TOKEN': document.querySelector('meta[name=csrf-token]').content,
                            'X-Requested-With': 'XMLHttpRequest',
                            'Accept': 'application/json',
                        },
                        body: formData,
                    });
                    const data = await response.json();
                    if (!response.ok) {
                        if (response.status === 422) { this.modalErrors = data.errors; }
                        else { throw new Error(data.message || 'Une erreur serveur est survenue.'); }
                    } else {
                        window.dispatchEvent(new CustomEvent('toast', {
                            detail: {
                                type: 'success',
                                message: 'Affectation Terminée',
                                description: 'Le statut du véhicule et du chauffeur a été mis à jour.'
                            }
                        }));
                        this.showEndModal = false;
                        setTimeout(() => window.location.reload(), 1500);
                    }
                } catch (error) {
                    this.modalErrors = { general: [error.message] };
                } finally {
                    this.isSubmitting = false;
                }
            }
        }" class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">

            {{-- Section des Filtres --}}
            <div class="mb-6 bg-white p-4 shadow-sm sm:rounded-lg">
                <form action="{{ route('admin.assignments.index') }}" method="GET">
                    <div class="flex flex-col md:flex-row md:items-end md:space-x-4 space-y-2 md:space-y-0">
                        <div class="flex-grow">
                            <label for="search" class="block text-sm font-medium text-gray-700">Recherche</label>
                            <input type="text" name="search" id="search" value="{{ $filters['search'] ?? '' }}" placeholder="Immat, marque, chauffeur..." class="mt-1 block w-full border-gray-300 focus:border-primary-500 focus:ring-primary-500 rounded-md shadow-sm text-sm">
                        </div>
                        <div class="flex-shrink-0">
                            <label for="per_page" class="block text-sm font-medium text-gray-700">Par page</label>
                            <select name="per_page" id="per_page" onchange="this.form.submit()" class="mt-1 block w-full border-gray-300 focus:border-primary-500 focus:ring-primary-500 rounded-md shadow-sm text-sm">
                                @foreach(['15', '30', '50'] as $value)
                                    <option value="{{ $value }}" @selected(($filters['per_page'] ?? '15') == $value)>{{ $value }}</option>
                                @endforeach
                            </select>
                        </div>
                        <div class="flex-shrink-0 flex space-x-2">
                            <button type="submit" class="inline-flex items-center justify-center w-full px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700">Filtrer</button>
                            <a href="{{ route('admin.assignments.index') }}" class="inline-flex items-center justify-center w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">Reset</a>
                        </div>
                    </div>
                </form>
            </div>

            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-6 text-gray-900">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold text-gray-700">Historique des Affectations</h3>
                        @can('create assignments')
                            <a href="{{ route('admin.assignments.create') }}" class="inline-flex items-center px-4 py-2 bg-primary-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-primary-700">
                                <x-lucide-plus-circle class="w-4 h-4 mr-2"/>
                                Nouvelle Affectation
                            </a>
                        @endcan
                    </div>

                    <div class="overflow-x-auto border border-gray-200 rounded-lg">
                        <table class="w-full divide-y divide-gray-200">
                            <thead class="bg-gray-100">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Chauffeur</th>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Véhicule</th>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Période</th>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Statut</th>
                                    <th class="px-6 py-3 text-right text-xs font-bold text-gray-600 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                @forelse ($assignments as $assignment)
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-2 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-10 w-10">
                                                    @if($assignment->driver?->photo_path)
                                                        <img class="h-10 w-10 rounded-full object-cover" src="{{ asset('storage/' . $assignment->driver->photo_path) }}" alt="Photo de {{ $assignment->driver->first_name }}">
                                                    @else
                                                        <span class="h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center">
                                                            <x-lucide-user class="h-6 w-6 text-gray-400"/>
                                                        </span>
                                                    @endif
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-semibold text-gray-900">{{ $assignment->driver?->first_name }} {{ $assignment->driver?->last_name }}</div>
                                                    <div class="text-sm text-gray-500">{{ $assignment->driver?->personal_phone ?? '' }}</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-2 whitespace-nowrap">
                                            <div class="text-sm font-medium text-gray-900">{{ $assignment->vehicle?->brand }} {{ $assignment->vehicle?->model }}</div>
                                            <div class="text-xs text-gray-500 font-mono">{{ $assignment->vehicle?->registration_plate }}</div>
                                            <div class="text-xs text-primary-600 font-semibold mt-1 flex items-center">
                                                {{-- CORRECTION DÉFINITIVE : Remplacement par une icône universelle. --}}
                                                {{-- Après la mise à jour du package, vous pourrez utiliser <x-lucide-gauge /> si vous préférez. --}}
                                                <x-lucide-bar-chart class="w-4 h-4 mr-1"/>
                                                {{ number_format($assignment->vehicle?->current_mileage, 0, ',', ' ') }} km
                                            </div>
                                        </td>
                                        <td class="px-6 py-2 whitespace-nowrap text-sm text-gray-500">
                                            <div>De: {{ $assignment->start_datetime->format('d/m/Y H:i') }}</div>
                                            <div>À: @if($assignment->end_datetime) {{ $assignment->end_datetime->format('d/m/Y H:i') }} @else - @endif</div>
                                        </td>
                                        <td class="px-6 py-2 whitespace-nowrap text-sm">
                                            @if(is_null($assignment->end_datetime))
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                    <x-lucide-play-circle class="w-4 h-4 mr-1.5"/>
                                                    En cours
                                                </span>
                                            @else
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                                                    <x-lucide-check-circle class="w-4 h-4 mr-1.5"/>
                                                    Terminée
                                                </span>
                                            @endif
                                        </td>
                                        <td class="px-6 py-3 whitespace-nowrap text-right text-sm font-medium">
                                            <div class="flex items-center justify-end space-x-2">
                                                @can('create handovers')
                                                    @if($assignment->handoverForm)
                                                        <a href="{{ route('admin.handovers.vehicles.show', $assignment->handoverForm) }}" title="Voir la Fiche de Remise" class="p-2 rounded-full text-gray-400 hover:bg-primary-100 hover:text-primary-600">
                                                            <x-lucide-file-text class="h-5 w-5"/>
                                                        </a>
                                                    @else
                                                        <a href="{{ route('admin.handovers.vehicles.create', ['assignment' => $assignment->id]) }}" title="Créer Fiche de Remise" class="p-2 rounded-full text-gray-400 hover:bg-blue-100 hover:text-blue-600">
                                                            <x-lucide-file-plus class="h-5 w-5"/>
                                                        </a>
                                                    @endif
                                                @endcan
                                                @can('edit assignments')
                                                    <a href="{{ route('admin.assignments.edit', $assignment) }}" title="Modifier les notes/motif" class="p-2 rounded-full text-gray-400 hover:bg-primary-100 hover:text-primary-600">
                                                        <x-lucide-file-pen-line class="h-5 w-5"/>
                                                    </a>
                                                @endcan
                                                @if(is_null($assignment->end_datetime))
                                                    @can('end assignments')
                                                        <button type="button" @click="openEndModal($event)" data-assignment='@json($assignment->load('vehicle'))' data-url="{{ route('admin.assignments.end', $assignment) }}" title="Terminer l'affectation" class="p-2 rounded-full text-gray-400 hover:bg-yellow-100 hover:text-yellow-600">
                                                            <x-lucide-stop-circle class="h-5 w-5"/>
                                                        </button>
                                                    @endcan
                                                @endif
                                            </div>
                                        </td>
                                    </tr>
                                @empty
                                    <tr><td colspan="5" class="px-6 py-4 text-center text-sm text-gray-500">Aucune affectation trouvée.</td></tr>
                                @endforelse
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-6">{{ $assignments->withQueryString()->links() }}</div>
                </div>
            </div>
        </div>

        {{-- Modale pour terminer l'affectation --}}
        <div x-show="showEndModal" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" class="fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-60" style="display: none;">
            <div @click.away="showEndModal = false" class="bg-white rounded-lg shadow-xl p-6 sm:p-8 w-full max-w-lg mx-auto transform transition-all" x-show="showEndModal" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95" x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100" x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">Terminer l'affectation</h3>
                <p class="text-sm text-gray-600 mb-2">
                    Véhicule: <strong x-text="`${assignmentToEnd.vehicle?.brand} ${assignmentToEnd.vehicle?.model} (${assignmentToEnd.vehicle?.registration_plate})`"></strong>
                </p>
                <p class="text-sm text-gray-600 mb-6">
                    Début: <span x-text="new Date(assignmentToEnd.start_datetime).toLocaleString('fr-FR')"></span>
                    avec <span x-text="assignmentToEnd.start_mileage ? assignmentToEnd.start_mileage.toLocaleString('fr-FR') : 'N/A'"></span> km.
                </p>

                <form x-ref="endForm" @submit.prevent="submitEndForm">
                    <input type="hidden" name="_method" value="PATCH">
                    <div class="space-y-4">
                        <div>
                            <x-datetime-picker
                                id="end_datetime"
                                name="end_datetime"
                                label="Date et heure de fin"
                            />
                            <template x-if="modalErrors.end_datetime"><p class="text-xs text-red-600 mt-1" x-text="modalErrors.end_datetime[0]"></p></template>
                        </div>
                        <div>
                            <label for="end_mileage" class="block text-sm font-medium text-gray-700">Kilométrage de fin</label>
                            <input type="number" name="end_mileage" id="end_mileage" :min="assignmentToEnd.start_mileage" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500">
                            <template x-if="modalErrors.end_mileage"><p class="text-xs text-red-600 mt-1" x-text="modalErrors.end_mileage[0]"></p></template>
                        </div>
                        <template x-if="modalErrors.general"><p class="text-sm text-red-600 mt-2" x-text="modalErrors.general[0]"></p></template>
                    </div>

                    <div class="mt-8 flex justify-end space-x-3">
                        <button type="button" @click="showEndModal = false" :disabled="isSubmitting" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50">
                            Annuler
                        </button>
                        <button type="submit" :disabled="isSubmitting" class="inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50">
                            <span x-show="!isSubmitting">Confirmer la fin</span>
                            <span x-show="isSubmitting" class="flex items-center">
                                <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                                Chargement...
                            </span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</x-app-layout>
--- FIN DU FICHIER : ./resources/views/admin/assignments/index.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/drivers/create.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            {{ __('Ajouter un Nouveau Chauffeur') }}
        </h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-4xl mx-auto sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-8 text-gray-900" x-data="{
                    currentStep: {{ old('current_step', 1) }},
                    photoPreview: null,
                    init() {
                        new TomSelect(this.$refs.status_id, { create: false, placeholder: 'Sélectionnez un statut...' });
                        new TomSelect(this.$refs.user_id, { create: false, placeholder: 'Rechercher un utilisateur...' });
                    },
                    updatePhotoPreview(event) {
                        const file = event.target.files[0];
                        if (file) {
                            this.photoPreview = URL.createObjectURL(file);
                        }
                    }
                }" x-init="
                    init();
                    @if ($errors->any())
                        let errors = {{ json_encode($errors->messages()) }};
                        let firstErrorStep = null;
                        const fieldToStepMap = { 'first_name': 1, 'last_name': 1, 'birth_date': 1, 'personal_phone': 1, 'address': 1, 'blood_type': 1, 'personal_email': 1, 'photo': 1, 'employee_number': 2, 'recruitment_date': 2, 'contract_end_date': 2, 'status_id': 2, 'user_id': 2, 'license_number': 3, 'license_category': 3, 'license_issue_date': 3, 'license_authority': 3, 'emergency_contact_name': 3, 'emergency_contact_phone': 3 };
                        for (const field in fieldToStepMap) {
                            if (errors.hasOwnProperty(field)) { firstErrorStep = fieldToStepMap[field]; break; }
                        }
                        if (firstErrorStep) { currentStep = firstErrorStep; }
                    @endif
                ">

                    <ol class="flex items-center w-full mb-8">
                        <li :class="currentStep >= 1 ? 'text-primary-600' : 'text-gray-500'" class="flex w-full items-center after:content-[''] after:w-full after:h-1 after:border-b after:border-4 after:inline-block" :class="currentStep > 1 ? 'after:border-primary-600' : 'after:border-gray-200'">
                            <span class="flex items-center justify-center w-10 h-10 rounded-full shrink-0" :class="currentStep >= 1 ? 'bg-primary-100' : 'bg-gray-100'">
                                <x-lucide-user-circle-2 class="w-5 h-5"/>
                            </span>
                        </li>
                        <li :class="currentStep >= 2 ? 'text-primary-600' : 'text-gray-500'" class="flex w-full items-center after:content-[''] after:w-full after:h-1 after:border-b after:border-4 after:inline-block" :class="currentStep > 2 ? 'after:border-primary-600' : 'after:border-gray-200'">
                            <span class="flex items-center justify-center w-10 h-10 rounded-full shrink-0" :class="currentStep >= 2 ? 'bg-primary-100' : 'bg-gray-100'">
                                <x-lucide-briefcase class="w-5 h-5"/>
                            </span>
                        </li>
                        <li :class="currentStep === 3 ? 'text-primary-600' : 'text-gray-500'" class="flex items-center">
                            <span class="flex items-center justify-center w-10 h-10 rounded-full shrink-0" :class="currentStep === 3 ? 'bg-primary-100' : 'bg-gray-100'">
                                <x-lucide-contact class="w-5 h-5"/>
                            </span>
                        </li>
                    </ol>

                    <form method="POST" action="{{ route('admin.drivers.store') }}" enctype="multipart/form-data">
                        @csrf
                        <input type="hidden" name="current_step" x-model="currentStep">

                        <fieldset x-show="currentStep === 1" class="border border-gray-200 p-6 rounded-lg">
                            <legend class="text-lg font-semibold text-gray-800 px-2">Étape 1: Informations Personnelles</legend>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                                <div class="md:col-span-2">
                                    <x-input-label for="photo" value="Photo" />
                                    <div class="mt-2 flex items-center space-x-4">
                                        <span class="inline-block h-20 w-20 overflow-hidden rounded-full bg-gray-100" :class="{'hidden': photoPreview}">
                                            <x-lucide-user-circle-2 class="h-full w-full text-gray-300"/>
                                        </span>
                                        <img x-show="photoPreview" :src="photoPreview" class="h-20 w-20 rounded-full object-cover">
                                        <input id="photo" name="photo" type="file" @change="updatePhotoPreview" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100"/>
                                    </div>
                                    <x-input-error :messages="$errors->get('photo')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="first_name" value="Prénom" required />
                                    <x-text-input id="first_name" name="first_name" :value="old('first_name')" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('first_name')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="last_name" value="Nom" required />
                                    <x-text-input id="last_name" name="last_name" :value="old('last_name')" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('last_name')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="birth_date" value="Date de Naissance" />
                                    <x-text-input id="birth_date" type="date" name="birth_date" :value="old('birth_date')" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('birth_date')" class="mt-2" />
                                </div>
                                {{-- CHAMP CORRIGÉ --}}
                                <div>
                                    <x-input-label for="blood_type" value="Groupe Sanguin" />
                                    <x-text-input id="blood_type" name="blood_type" :value="old('blood_type')" placeholder="Ex: O+" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('blood_type')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="personal_phone" value="Téléphone Personnel" />
                                    <x-text-input id="personal_phone" name="personal_phone" :value="old('personal_phone')" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('personal_phone')" class="mt-2" />
                                </div>
                                {{-- CHAMP CORRIGÉ --}}
                                <div>
                                    <x-input-label for="personal_email" value="Email Personnel" />
                                    <x-text-input id="personal_email" name="personal_email" type="email" :value="old('personal_email')" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('personal_email')" class="mt-2" />
                                </div>
                                <div class="md:col-span-2">
                                    <x-input-label for="address" value="Adresse" />
                                    <textarea id="address" name="address" rows="3" class="block mt-1 w-full border-gray-300 focus:border-primary-500 focus:ring-primary-500 rounded-md shadow-sm">{{ old('address') }}</textarea>
                                    <x-input-error :messages="$errors->get('address')" class="mt-2" />
                                </div>
                            </div>
                        </fieldset>

                        <fieldset x-show="currentStep === 2" style="display: none;" class="border border-gray-200 p-6 rounded-lg">
                            <legend class="text-lg font-semibold text-gray-800 px-2">Étape 2: Informations Professionnelles</legend>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                                <div>
                                    <x-input-label for="employee_number" value="Matricule" />
                                    <x-text-input id="employee_number" name="employee_number" :value="old('employee_number')" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('employee_number')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="status_id" value="Statut" required />
                                    <select x-ref="status_id" name="status_id" id="status_id">
                                        @foreach($driverStatuses as $status)<option value="{{ $status->id }}" @selected(old('status_id') == $status->id)>{{ $status->name }}</option>@endforeach
                                    </select>
                                    <x-input-error :messages="$errors->get('status_id')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="recruitment_date" value="Date de Recrutement" />
                                    <x-text-input id="recruitment_date" type="date" name="recruitment_date" :value="old('recruitment_date')" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('recruitment_date')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="contract_end_date" value="Date de Fin de Contrat" />
                                    <x-text-input id="contract_end_date" name="contract_end_date" :value="old('contract_end_date')" type="date" class="mt-1 block w-full"/>
                                    <x-input-error :messages="$errors->get('contract_end_date')" class="mt-2" />
                                </div>
                                <div class="md:col-span-2">
                                    <x-input-label for="user_id" value="Lier à un Compte Utilisateur (Optionnel)" />
                                    <select x-ref="user_id" name="user_id" id="user_id">
                                         <option value="">Ne pas lier de compte</option>
                                        @foreach($linkableUsers as $user)<option value="{{ $user->id }}" @selected(old('user_id') == $user->id)>{{ $user->name }} ({{ $user->email }})</option>@endforeach
                                    </select>
                                    <x-input-error :messages="$errors->get('user_id')" class="mt-2" />
                                </div>
                            </div>
                        </fieldset>

                        <fieldset x-show="currentStep === 3" style="display: none;" class="border border-gray-200 p-6 rounded-lg">
                            <legend class="text-lg font-semibold text-gray-800 px-2">Étape 3: Permis & Contact d'Urgence</legend>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                                <div>
                                    <x-input-label for="license_number" value="Numéro de Permis" />
                                    <x-text-input id="license_number" name="license_number" :value="old('license_number')" class="mt-1 w-full"/>
                                    <x-input-error :messages="$errors->get('license_number')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="license_category" value="Catégorie(s)" />
                                    <x-text-input id="license_category" name="license_category" :value="old('license_category')" placeholder="Ex: B, C1E" class="mt-1 w-full"/>
                                    <x-input-error :messages="$errors->get('license_category')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="license_issue_date" value="Date de Délivrance" />
                                    <x-text-input id="license_issue_date" name="license_issue_date" :value="old('license_issue_date')" type="date" class="mt-1 w-full"/>
                                    <x-input-error :messages="$errors->get('license_issue_date')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="license_authority" value="Délivré par" />
                                    <x-text-input id="license_authority" name="license_authority" :value="old('license_authority')" class="mt-1 w-full"/>
                                    <x-input-error :messages="$errors->get('license_authority')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="emergency_contact_name" value="Nom du Contact d'Urgence" />
                                    <x-text-input id="emergency_contact_name" name="emergency_contact_name" :value="old('emergency_contact_name')" class="mt-1 w-full"/>
                                    <x-input-error :messages="$errors->get('emergency_contact_name')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="emergency_contact_phone" value="Téléphone d'Urgence" />
                                    <x-text-input id="emergency_contact_phone" name="emergency_contact_phone" :value="old('emergency_contact_phone')" class="mt-1 w-full"/>
                                    <x-input-error :messages="$errors->get('emergency_contact_phone')" class="mt-2" />
                                </div>
                            </div>
                        </fieldset>

                        <div class="mt-8 pt-6 border-t border-gray-200 flex items-center justify-between">
                            <x-secondary-button type="button" x-show="currentStep > 1" @click="currentStep--">Précédent</x-secondary-button>
                            <div class="flex-grow"></div>
                            <div class="flex items-center gap-4">
                                <a href="{{ route('admin.drivers.index') }}" class="text-sm font-semibold text-gray-600 hover:text-gray-900">Annuler</a>
                                <x-primary-button type="button" x-show="currentStep < 3" @click="currentStep++">Suivant</x-primary-button>
                                <button type="submit" x-show="currentStep === 3" class="inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700">
                                    Créer le Chauffeur
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</x-app-layout>
--- FIN DU FICHIER : ./resources/views/admin/drivers/create.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/drivers/edit.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">Modifier le Chauffeur : <span class="text-primary-600">{{ $driver->first_name }} {{ $driver->last_name }}</span></h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-4xl mx-auto sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-8 text-gray-900" x-data="{
                    currentStep: {{ old('current_step', 1) }},
                    photoPreview: '{{ $driver->photo_path ? asset('storage/' . $driver->photo_path) : null }}',
                    init() {
                        const tomConfig = (selectedValue) => ({
                            create: false,
                            placeholder: 'Sélectionnez...',
                            items: [selectedValue]
                        });
                        new TomSelect(this.$refs.status_id, tomConfig('{{ old('status_id', $driver->status_id) }}'));
                        new TomSelect(this.$refs.user_id, tomConfig('{{ old('user_id', $driver->user_id) }}'));
                    },
                    updatePhotoPreview(event) {
                        const file = event.target.files[0];
                        if (file) {
                            this.photoPreview = URL.createObjectURL(file);
                        }
                    }
                }" x-init="
                    init();
                    @if ($errors->any())
                        let errors = {{ json_encode($errors->messages()) }};
                        let firstErrorStep = null;
                        const fieldToStepMap = { 'first_name': 1, 'last_name': 1, 'birth_date': 1, 'personal_phone': 1, 'address': 1, 'blood_type': 1, 'personal_email': 1, 'photo': 1, 'employee_number': 2, 'recruitment_date': 2, 'contract_end_date': 2, 'status_id': 2, 'user_id': 2, 'license_number': 3, 'license_category': 3, 'license_issue_date': 3, 'license_authority': 3, 'emergency_contact_name': 3, 'emergency_contact_phone': 3 };
                        for (const field in fieldToStepMap) {
                            if (errors.hasOwnProperty(field)) { firstErrorStep = fieldToStepMap[field]; break; }
                        }
                        if (firstErrorStep) { currentStep = firstErrorStep; }
                    @endif
                ">

                    <ol class="flex items-center w-full mb-8">
                        <li :class="currentStep >= 1 ? 'text-primary-600' : 'text-gray-500'" class="flex w-full items-center after:content-[''] after:w-full after:h-1 after:border-b after:border-4 after:inline-block" :class="currentStep > 1 ? 'after:border-primary-600' : 'after:border-gray-200'">
                            <span class="flex items-center justify-center w-10 h-10 rounded-full shrink-0" :class="currentStep >= 1 ? 'bg-primary-100' : 'bg-gray-100'">
                                <x-lucide-user-circle-2 class="w-5 h-5"/>
                            </span>
                        </li>
                        <li :class="currentStep >= 2 ? 'text-primary-600' : 'text-gray-500'" class="flex w-full items-center after:content-[''] after:w-full after:h-1 after:border-b after:border-4 after:inline-block" :class="currentStep > 2 ? 'after:border-primary-600' : 'after:border-gray-200'">
                            <span class="flex items-center justify-center w-10 h-10 rounded-full shrink-0" :class="currentStep >= 2 ? 'bg-primary-100' : 'bg-gray-100'">
                                <x-lucide-briefcase class="w-5 h-5"/>
                            </span>
                        </li>
                        <li :class="currentStep === 3 ? 'text-primary-600' : 'text-gray-500'" class="flex items-center">
                            <span class="flex items-center justify-center w-10 h-10 rounded-full shrink-0" :class="currentStep === 3 ? 'bg-primary-100' : 'bg-gray-100'">
                                <x-lucide-contact class="w-5 h-5"/>
                            </span>
                        </li>
                    </ol>

                    <form method="POST" action="{{ route('admin.drivers.update', $driver) }}" enctype="multipart/form-data">
                        @csrf
                        @method('PUT')
                        <input type="hidden" name="current_step" x-model="currentStep">

                        <fieldset x-show="currentStep === 1" class="border border-gray-200 p-6 rounded-lg">
                             <legend class="text-lg font-semibold text-gray-800 px-2">Étape 1: Informations Personnelles</legend>
                             <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                                <div class="md:col-span-2">
                                    <x-input-label for="photo" value="Photo" />
                                    <div class="mt-2 flex items-center space-x-4">
                                        <span x-show="!photoPreview" class="inline-block h-20 w-20 overflow-hidden rounded-full bg-gray-100">
                                            <x-lucide-user-circle-2 class="h-full w-full text-gray-300"/>
                                        </span>
                                        <img x-show="photoPreview" :src="photoPreview" class="h-20 w-20 rounded-full object-cover">
                                        <input id="photo" name="photo" type="file" @change="updatePhotoPreview" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100"/>
                                    </div>
                                    <x-input-error :messages="$errors->get('photo')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="first_name" value="Prénom" required />
                                    <x-text-input id="first_name" name="first_name" :value="old('first_name', $driver->first_name)" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('first_name')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="last_name" value="Nom" required />
                                    <x-text-input id="last_name" name="last_name" :value="old('last_name', $driver->last_name)" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('last_name')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="birth_date" value="Date de Naissance" />
                                    <x-text-input id="birth_date" type="date" name="birth_date" :value="old('birth_date', $driver->birth_date?->format('Y-m-d'))" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('birth_date')" class="mt-2" />
                                </div>
                                {{-- CHAMP CORRIGÉ --}}
                                <div>
                                    <x-input-label for="blood_type" value="Groupe Sanguin" />
                                    <x-text-input id="blood_type" name="blood_type" :value="old('blood_type', $driver->blood_type)" placeholder="Ex: O+" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('blood_type')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="personal_phone" value="Téléphone Personnel" />
                                    <x-text-input id="personal_phone" name="personal_phone" :value="old('personal_phone', $driver->personal_phone)" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('personal_phone')" class="mt-2" />
                                </div>
                                {{-- CHAMP CORRIGÉ --}}
                                
                                <div>
                                    <label for="personal_email" class="block font-medium text-sm text-gray-700">Email Personnelle</label>
                                    <x-text-input id="personal_email" name="personal_email" type="email" :value="old('personal_email', $driver->personal_email)" class="mt-1 w-full" />
                                    <x-input-error :messages="$errors->get('personal_email')" class="mt-2" />
                                </div>
                                <div class="md:col-span-2">
                                    <x-input-label for="address" value="Adresse" />
                                    <textarea id="address" name="address" rows="3" class="block mt-1 w-full border-gray-300 focus:border-primary-500 focus:ring-primary-500 rounded-md shadow-sm">{{ old('address', $driver->address) }}</textarea>
                                    <x-input-error :messages="$errors->get('address')" class="mt-2" />
                                </div>
                            </div>
                        </fieldset>

                        <fieldset x-show="currentStep === 2" style="display: none;" class="border border-gray-200 p-6 rounded-lg">
                             <legend class="text-lg font-semibold text-gray-800 px-2">Étape 2: Informations Professionnelles</legend>
                             <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                                <div>
                                    <x-input-label for="employee_number" value="Matricule" />
                                    <x-text-input id="employee_number" name="employee_number" :value="old('employee_number', $driver->employee_number)" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('employee_number')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="status_id" value="Statut" required />
                                    <select x-ref="status_id" name="status_id" id="status_id">
                                        @foreach($driverStatuses as $status)<option value="{{ $status->id }}">{{ $status->name }}</option>@endforeach
                                    </select>
                                    <x-input-error :messages="$errors->get('status_id')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="recruitment_date" value="Date de Recrutement" />
                                    <x-text-input id="recruitment_date" type="date" name="recruitment_date" :value="old('recruitment_date', $driver->recruitment_date?->format('Y-m-d'))" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('recruitment_date')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="contract_end_date" value="Date de Fin de Contrat" />
                                    <x-text-input id="contract_end_date" name="contract_end_date" :value="old('contract_end_date', $driver->contract_end_date?->format('Y-m-d'))" type="date" class="mt-1 block w-full"/>
                                    <x-input-error :messages="$errors->get('contract_end_date')" class="mt-2" />
                                </div>
                                <div class="md:col-span-2">
                                    <x-input-label for="user_id" value="Lier à un Compte Utilisateur (Optionnel)" />
                                    <select x-ref="user_id" name="user_id" id="user_id">
                                         <option value="">Ne pas lier de compte</option>
                                        @foreach($linkableUsers as $user)<option value="{{ $user->id }}">{{ $user->name }} ({{ $user->email }})</option>@endforeach
                                    </select>
                                    <x-input-error :messages="$errors->get('user_id')" class="mt-2" />
                                </div>
                            </div>
                        </fieldset>

                        <fieldset x-show="currentStep === 3" style="display: none;" class="border border-gray-200 p-6 rounded-lg">
                             <legend class="text-lg font-semibold text-gray-800 px-2">Étape 3: Permis & Contact d'Urgence</legend>
                             <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                                <div>
                                    <x-input-label for="license_number" value="Numéro de Permis" />
                                    <x-text-input id="license_number" name="license_number" :value="old('license_number', $driver->license_number)" class="mt-1 w-full"/>
                                    <x-input-error :messages="$errors->get('license_number')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="license_category" value="Catégorie(s)" />
                                    <x-text-input id="license_category" name="license_category" :value="old('license_category', $driver->license_category)" placeholder="Ex: B, C1E" class="mt-1 w-full"/>
                                    <x-input-error :messages="$errors->get('license_category')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="license_issue_date" value="Date de Délivrance" />
                                    <x-text-input id="license_issue_date" name="license_issue_date" :value="old('license_issue_date', $driver->license_issue_date?->format('Y-m-d'))" type="date" class="mt-1 w-full"/>
                                    <x-input-error :messages="$errors->get('license_issue_date')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="license_authority" value="Délivré par" />
                                    <x-text-input id="license_authority" name="license_authority" :value="old('license_authority', $driver->license_authority)" class="mt-1 w-full"/>
                                    <x-input-error :messages="$errors->get('license_authority')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="emergency_contact_name" value="Nom du Contact d'Urgence" />
                                    <x-text-input id="emergency_contact_name" name="emergency_contact_name" :value="old('emergency_contact_name', $driver->emergency_contact_name)" class="mt-1 w-full"/>
                                    <x-input-error :messages="$errors->get('emergency_contact_name')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="emergency_contact_phone" value="Téléphone d'Urgence" />
                                    <x-text-input id="emergency_contact_phone" name="emergency_contact_phone" :value="old('emergency_contact_phone', $driver->emergency_contact_phone)" class="mt-1 w-full"/>
                                    <x-input-error :messages="$errors->get('emergency_contact_phone')" class="mt-2" />
                                </div>
                            </div>
                        </fieldset>

                        <div class="mt-8 pt-6 border-t border-gray-200 flex items-center justify-between">
                            <x-secondary-button type="button" x-show="currentStep > 1" @click="currentStep--">Précédent</x-secondary-button>
                            <div class="flex-grow"></div>
                            <div class="flex items-center gap-4">
                                <a href="{{ route('admin.drivers.index') }}" class="text-sm font-semibold text-gray-600 hover:text-gray-900">Annuler</a>
                                <x-primary-button type="button" x-show="currentStep < 3" @click="currentStep++">Suivant</x-primary-button>
                                <button type="submit" x-show="currentStep === 3" class="inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700">
                                    Enregistrer les Modifications
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</x-app-layout>
--- FIN DU FICHIER : ./resources/views/admin/drivers/edit.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/drivers/import-results.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header">
        <div class="flex justify-between items-center">
            <h2 class="font-semibold text-xl text-gray-800 leading-tight">
                {{ __('Résultats de l\'Importation des Chauffeurs') }}
            </h2>
            <a href="{{ route('admin.drivers.index') }}" class="inline-flex items-center px-3 py-1.5 bg-gray-100 border border-gray-300 rounded-md font-medium text-xs text-gray-700 uppercase tracking-widest hover:bg-gray-200 transition">
                <x-lucide-arrow-left class="h-4 w-4 mr-1"/>
                Retour à la liste
            </a>
        </div>
    </x-slot>

    <div class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
            {{-- Informations sur l'importation --}}
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6">
                <div class="p-6 border-b border-gray-200">
                    <div class="flex items-center">
                        <x-lucide-file-text class="h-8 w-8 text-primary-500 mr-3"/>
                        <div>
                            <h3 class="text-lg font-medium text-gray-900">Détails de l'importation</h3>
                            <div class="mt-1 text-sm text-gray-600">
                                <p><span class="font-medium">Fichier :</span> {{ $fileName ?? 'Fichier CSV' }}</p>
                                <p><span class="font-medium">Encodage détecté :</span> {{ ucfirst($encoding ?? 'utf8') }}</p>
                                <p><span class="font-medium">Identifiant d'importation :</span> <span class="font-mono text-xs">{{ $importId ?? 'N/A' }}</span></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {{-- Carte de Résumé Statistique --}}
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                    <div class="p-6 bg-gradient-to-br from-green-50 to-green-100 border-l-4 border-green-500">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-green-100 bg-opacity-60">
                                <x-lucide-check-circle-2 class="h-8 w-8 text-green-600"/>
                            </div>
                            <div class="ml-4">
                                <p class="text-3xl font-bold text-green-800">{{ $successCount }}</p>
                                <p class="text-sm font-medium text-green-700">Chauffeur(s) importé(s) avec succès</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                    <div class="p-6 bg-gradient-to-br from-red-50 to-red-100 border-l-4 border-red-500">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-red-100 bg-opacity-60">
                                <x-lucide-x-circle class="h-8 w-8 text-red-600"/>
                            </div>
                            <div class="ml-4">
                                <p class="text-3xl font-bold text-red-800">{{ count($errorRows) }}</p>
                                <p class="text-sm font-medium text-red-700">Ligne(s) en erreur</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {{-- Section des Erreurs (si applicable) --}}
            @if (!empty($errorRows))
                <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6">
                    <div class="p-6 md:p-8 text-gray-900">
                        <div class="flex items-center mb-4">
                            <x-lucide-alert-triangle class="h-6 w-6 text-amber-500 mr-2"/>
                            <h3 class="text-xl font-semibold text-gray-800">Détail des Lignes en Erreur</h3>
                        </div>
                        
                        <p class="text-sm text-gray-600 mb-6">
                            Les lignes suivantes n'ont pas été importées en raison d'erreurs. Veuillez corriger ces problèmes dans votre fichier CSV et réessayer l'importation.
                        </p>

                        <div class="overflow-x-auto border border-gray-200 rounded-lg">
                            <table class="w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Ligne</th>
                                        <th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Erreur(s)</th>
                                        <th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Données</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    @foreach ($errorRows as $error)
                                        <tr class="hover:bg-gray-50">
                                            <td class="px-6 py-4 whitespace-nowrap font-mono text-sm text-center">
                                                <span class="px-2 py-1 bg-gray-100 rounded-md">{{ $error['line'] }}</span>
                                            </td>
                                            <td class="px-6 py-4">
                                                <ul class="list-disc list-inside space-y-1 text-sm text-red-700">
                                                    @foreach ($error['errors'] as $message)
                                                        <li>{{ $message }}</li>
                                                    @endforeach
                                                </ul>
                                            </td>
                                            <td class="px-6 py-4">
                                                <div class="text-xs text-gray-600 max-w-md overflow-hidden">
                                                    @foreach ($error['data'] as $key => $value)
                                                        <div class="mb-1">
                                                            <span class="font-medium">{{ $key }}:</span> 
                                                            <span class="font-mono">{{ $value ?? 'NULL' }}</span>
                                                        </div>
                                                    @endforeach
                                                </div>
                                            </td>
                                        </tr>
                                    @endforeach
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            @endif

            {{-- Actions --}}
            <div class="flex items-center justify-end gap-4">
                <a href="{{ route('admin.drivers.import.show') }}" class="inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition">
                    <x-lucide-rotate-cw class="h-4 w-4 mr-2"/>
                    Nouvelle Importation
                </a>
                <a href="{{ route('admin.drivers.index') }}" class="inline-flex items-center px-4 py-2 bg-primary-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition">
                    <x-lucide-users class="h-4 w-4 mr-2"/>
                    Voir tous les Chauffeurs
                </a>
            </div>
        </div>
    </div>
</x-app-layout>
--- FIN DU FICHIER : ./resources/views/admin/drivers/import-results.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/drivers/import.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            {{ __('Importer des Chauffeurs par Fichier CSV') }}
        </h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-4xl mx-auto sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-8 text-gray-900">
                    <div class="mb-6 p-4 bg-primary-50 border border-primary-200 rounded-lg">
                        
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <x-lucide-info class="h-6 w-6 text-primary-500"/>
                            </div>
                            <div class="ml-3">
                                <h4 class="text-lg font-bold text-primary-800">Instructions</h4>
                                <ol class="list-decimal list-inside mt-2 text-sm text-violet-700 space-y-1">
                                    <li>Téléchargez le fichier modèle pour voir le format exact des colonnes.</li>
                                    <li>Remplissez le fichier avec vos données. Les colonnes <strong>nom, prenom, et date_naissance</strong> sont obligatoires.</li>
                                    <li>Le format pour toutes les dates doit être <strong>AAAA-MM-JJ</strong> (ex: 1990-05-25).</li>
                                    <li>Enregistrez votre fichier au format CSV (séparateur virgule, encodage UTF-8).</li>
                                    <li>Téléversez le fichier complété ci-dessous.</li>
                                </ol>
                            </div>
                        </div>
                    </div>

                    <form action="{{ route('admin.drivers.import.handle') }}" method="POST" enctype="multipart/form-data">
                        @csrf
                        <div>
                            <label for="csv_file" class="block font-medium text-sm text-gray-700">Votre Fichier CSV <span class="text-red-500">*</span></label>
                            <input type="file" name="csv_file" id="csv_file" class="block w-full text-sm text-gray-500 mt-1 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 file:text-violet-700 hover:file:bg-violet-100" required>
                            <x-input-error :messages="$errors->get('csv_file')" class="mt-2" />
                        </div>

                        <div class="mt-8 pt-6 border-t flex items-center justify-between">
                            <a href="{{ route('admin.drivers.import.template') }}" class="inline-flex items-center text-sm font-semibold text-primary-600 hover:text-primary-800">
                                <x-lucide-download class="h-5 w-5 mr-2"/>
                                Télécharger le modèle (.csv)
                            </a>
                            <div class="flex items-center gap-4">
                                <a href="{{ route('admin.drivers.index') }}" class="text-sm font-semibold text-gray-600 hover:text-gray-900">Annuler</a>
                                <button type="submit" class="inline-flex items-center px-4 py-2 bg-primary-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-primary-700">
                                    Lancer l'Importation
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</x-app-layout>
--- FIN DU FICHIER : ./resources/views/admin/drivers/import.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/drivers/index.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            {{ __('Gestion des Chauffeurs') }}
        </h2>
    </x-slot>

    {{-- Initialisation d'Alpine.js pour gérer la modale dynamique --}}
    <div x-data="{
            showConfirmModal: false,
            modalAction: '', // 'archive' ou 'delete'
            modalTitle: '',
            modalDescription: '',
            modalButtonText: '',
            modalButtonClass: '',
            modalIconClass: '',
            driverToProcess: {},
            formUrl: '',

            openModal(event, action) {
                const button = event.currentTarget;
                this.driverToProcess = JSON.parse(button.dataset.driver);
                this.formUrl = button.dataset.url;
                this.modalAction = action;

                if (action === 'archive') {
                    this.modalTitle = 'Archiver le Chauffeur';
                    this.modalDescription = `Êtes-vous sûr de vouloir archiver le chauffeur <strong>${this.driverToProcess.first_name} ${this.driverToProcess.last_name}</strong> ? Il pourra être restauré plus tard.`;
                    this.modalButtonText = 'Confirmer l\'Archivage';
                    this.modalButtonClass = 'bg-yellow-600 hover:bg-yellow-700';
                    this.modalIconClass = 'text-yellow-600 bg-yellow-100';
                } else if (action === 'delete') {
                    this.modalTitle = 'Suppression Définitive';
                    this.modalDescription = `Cette action est irréversible et supprimera définitivement le chauffeur <strong>${this.driverToProcess.first_name} ${this.driverToProcess.last_name}</strong>. Confirmez-vous cette action ?`;
                    this.modalButtonText = 'Supprimer Définitivement';
                    this.modalButtonClass = 'bg-red-600 hover:bg-red-700';
                    this.modalIconClass = 'text-red-600 bg-red-100';
                }
                this.showConfirmModal = true;
            }
        }" class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
            {{-- Section des Filtres et de la Recherche --}}
            <div class="mb-6 bg-white p-4 shadow-sm sm:rounded-lg">
                <form action="{{ route('admin.drivers.index') }}" method="GET">
                    <div class="flex flex-col md:flex-row md:items-end md:space-x-4 space-y-2 md:space-y-0">
                        <div class="flex-grow">
                            <label for="search" class="block text-sm font-medium text-gray-700">Recherche</label>
                            <input type="text" name="search" id="search" value="{{ $filters['search'] ?? '' }}" placeholder="Nom, matricule, N° permis..." class="mt-1 block w-full border-gray-300 focus:border-primary-500 focus:ring-primary-500 rounded-md shadow-sm text-sm">
                        </div>
                        <div class="flex-shrink-0">
                            <label for="status_id" class="block text-sm font-medium text-gray-700">Statut</label>
                            <select name="status_id" id="status_id" class="mt-1 block w-full border-gray-300 focus:border-primary-500 focus:ring-primary-500 rounded-md shadow-sm text-sm">
                                <option value="">Tous</option>
                                @foreach($driverStatuses as $status)
                                    <option value="{{ $status->id }}" @selected(($filters['status_id'] ?? '') == $status->id)>{{ $status->name }}</option>
                                @endforeach
                            </select>
                        </div>
                        <div class="flex-shrink-0">
                            <label for="per_page" class="block text-sm font-medium text-gray-700">Par page</label>
                            <select name="per_page" id="per_page" onchange="this.form.submit()" class="mt-1 block w-full border-gray-300 focus:border-primary-500 focus:ring-primary-500 rounded-md shadow-sm text-sm">
                                @foreach(['15', '30', '50', '100'] as $value)
                                    <option value="{{ $value }}" @selected(($filters['per_page'] ?? '15') == $value)>{{ $value }}</option>
                                @endforeach
                            </select>
                        </div>
                        <div>
                            <label for="view_deleted" class="block text-sm font-medium text-gray-700">Affichage</label>
                            <select name="view_deleted" id="view_deleted" onchange="this.form.submit()" class="mt-1 block w-full border-gray-300 focus:border-primary-500 focus:ring-primary-500 rounded-md shadow-sm text-sm">
                                <option value="">Actifs</option>
                                <option value="true" @selected(request('view_deleted'))>Archivés</option>
                            </select>
                        </div>
                        <div class="flex-shrink-0 flex space-x-2">
                            <button type="submit" class="inline-flex items-center justify-center w-full px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700">Filtrer</button>
                            <a href="{{ route('admin.drivers.index') }}" class="inline-flex items-center justify-center w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">Reset</a>
                        </div>
                    </div>
                </form>
            </div>

            

            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-6 text-gray-900">
                    <div class="flex flex-col sm:flex-row justify-between items-center mb-6 gap-4">
                        <h3 class="text-xl font-semibold text-gray-700">{{ __('Liste des Chauffeurs') }}</h3>
                        <div class="flex space-x-2">
                            @can('create drivers')
                                <a href="{{ route('admin.drivers.import.show') }}" class="inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 transition">
                                    <x-lucide-upload class="w-4 h-4 mr-2" stroke-width="1.5"/>
                                    Importer
                                </a>
                                <a href="{{ route('admin.drivers.create') }}" class="inline-flex items-center px-4 py-2 bg-primary-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-primary-700">
                                    <x-lucide-plus-circle class="w-4 h-4 mr-2" stroke-width="1.5"/>
                                    Ajouter
                                </a>
                            @endcan
                        </div>
                    </div>

                    <div class="overflow-x-auto border border-gray-200 rounded-lg">
                        <table class="w-full divide-y divide-gray-200">
                            <thead class="bg-gray-100">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Chauffeur</th>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Matricule</th>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Statut</th>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Utilisateur Lié</th>
                                    <th class="px-6 py-3 text-right text-xs font-bold text-gray-600 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                @forelse ($drivers as $driver)
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-2 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-10 w-10">
                                                    @if($driver->photo_path)
                                                        <img class="h-10 w-10 rounded-full object-cover" src="{{ asset('storage/' . $driver->photo_path) }}" alt="Photo de {{ $driver->first_name }}">
                                                    @else
                                                        <span class="h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center">
                                                            <x-lucide-user-circle-2 class="h-6 w-6 text-gray-400" stroke-width="1.5"/>
                                                        </span>
                                                    @endif
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-semibold text-gray-900">{{ $driver->last_name }} {{ $driver->first_name }}</div>
                                                    <div class="text-sm text-gray-500">{{ $driver->personal_phone ?? '' }}</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-2 whitespace-nowrap text-sm text-gray-500 font-mono">{{ $driver->employee_number ?? '-' }}</td>
                                        <td class="px-6 py-2 whitespace-nowrap text-sm">
                                            @php
                                                $statusName = $driver->driverStatus?->name ?? 'Indéfini';
                                                $statusClass = 'bg-gray-100 text-gray-800'; // Default
                                                if ($driver->trashed()) {
                                                    $statusName = 'Archivé';
                                                    $statusClass = 'bg-gray-200 text-gray-600';
                                                } else {
                                                    switch ($statusName) {
                                                        case 'Disponible': $statusClass = 'bg-green-100 text-green-800'; break;
                                                        case 'En mission': $statusClass = 'bg-blue-100 text-blue-800'; break;
                                                        case 'En congé': $statusClass = 'bg-indigo-100 text-indigo-800'; break;
                                                        case 'Suspendu': $statusClass = 'bg-yellow-100 text-yellow-800'; break;
                                                        case 'Inactif':
                                                        case 'Ex-employé':
                                                            $statusClass = 'bg-red-100 text-red-800'; break;
                                                    }
                                                }
                                            @endphp
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full {{ $statusClass }}">{{ $statusName }}</span>
                                        </td>
                                        <td class="px-6 py-2 whitespace-nowrap text-sm text-gray-500">{{ $driver->user?->email ?? 'Non lié' }}</td>
                                        <td class="px-6 py-2 whitespace-nowrap text-right text-sm font-medium">
                                            <div class="flex items-center justify-end space-x-2">
                                                @if ($driver->trashed())
                                                    @can('restore drivers')
                                                        <form method="POST" action="{{ route('admin.drivers.restore', $driver->id) }}">
                                                            @csrf @method('PATCH')
                                                            <button type="submit" title="Restaurer" class="p-2 rounded-full text-gray-400 hover:bg-green-100 hover:text-green-600">
                                                                <x-lucide-rotate-ccw class="h-5 w-5" stroke-width="1.5"/>
                                                            </button>
                                                        </form>
                                                    @endcan
                                                    @can('force delete drivers')
                                                        <button type="button" @click="openModal($event, 'delete')" data-driver='@json($driver->only(['id', 'first_name', 'last_name']))' data-url="{{ route('admin.drivers.force-delete', $driver->id) }}" title="Supprimer Définitivement" class="p-2 rounded-full text-gray-400 hover:bg-red-100 hover:text-red-600">
                                                            <x-lucide-trash-2 class="h-5 w-5" stroke-width="1.5"/>
                                                        </button>
                                                    @endcan
                                                @else
                                                    @can('edit drivers')
                                                        <a href="{{ route('admin.drivers.edit', $driver) }}" title="Modifier" class="p-2 rounded-full text-gray-400 hover:bg-primary-100 hover:text-primary-600">
                                                            <x-lucide-file-pen-line class="h-5 w-5" stroke-width="1.5"/>
                                                        </a>
                                                    @endcan
                                                    @can('delete drivers')
                                                        <button type="button" @click="openModal($event, 'archive')" data-driver='@json($driver->only(['id', 'first_name', 'last_name']))' data-url="{{ route('admin.drivers.destroy', $driver->id) }}" title="Archiver" class="p-2 rounded-full text-gray-400 hover:bg-yellow-100 hover:text-yellow-600">
                                                            <x-lucide-archive class="h-5 w-5" stroke-width="1.5"/>
                                                        </button>
                                                    @endcan
                                                @endif
                                            </div>
                                        </td>
                                    </tr>
                                @empty
                                    <tr><td colspan="5" class="px-6 py-4 text-center text-sm text-gray-500">Aucun chauffeur trouvé.</td></tr>
                                @endforelse
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-6">{{ $drivers->withQueryString()->links() }}</div>
                </div>
            </div>
        </div>

        {{-- Fenêtre Modale de Confirmation --}}
        <div x-show="showConfirmModal" x-transition class="fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-60" style="display: none;">
            <div @click.away="showConfirmModal = false" class="bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4">
                <div class="sm:flex sm:items-start">
                    <div class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full sm:mx-0 sm:h-10 sm:w-10" :class="modalIconClass">
                        <x-lucide-alert-triangle class="h-6 w-6" stroke-width="1.5"/>
                    </div>
                    <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left">
                        <h3 class="text-base font-semibold leading-6 text-gray-900" x-text="modalTitle"></h3>
                        <div class="mt-2">
                            <p class="text-sm text-gray-600" x-html="modalDescription"></p>
                        </div>
                    </div>
                </div>
                <div class="mt-5 sm:mt-4 sm:flex sm:flex-row-reverse">
                    <form :action="formUrl" method="POST">
                        @csrf
                        @method('DELETE')
                        <button type="submit" class="inline-flex w-full justify-center rounded-md px-4 py-2 text-sm font-semibold text-white shadow-sm sm:ml-3 sm:w-auto" :class="modalButtonClass" x-text="modalButtonText">
                        </button>
                    </form>
                    <button type="button" @click="showConfirmModal = false" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-4 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">
                        Annuler
                    </button>
                </div>
            </div>
        </div>
    </div>
</x-app-layout>
--- FIN DU FICHIER : ./resources/views/admin/drivers/index.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/handovers/vehicles/create.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
   <x-slot name="header">
       <h2 class="font-semibold text-xl text-gray-800 leading-tight">
           {{ __('Nouvelle Fiche de Remise de Véhicule') }}
       </h2>
   </x-slot>

   <div class="py-12">
       <div class="max-w-5xl mx-auto sm:px-6 lg:px-8">
           <form action="{{ route('admin.handovers.vehicles.store') }}" method="POST" class="space-y-6">
               @csrf
               <input type="hidden" name="assignment_id" value="{{ $assignment->id }}">

               <div class="bg-white p-6 shadow-sm sm:rounded-lg">
                   <h3 class="text-lg font-semibold text-gray-900 border-b border-gray-200 pb-4 mb-6">Informations Générales</h3>
                   <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-sm">
                       <div class="p-4 border rounded-lg flex items-center space-x-4">
                           <div class="flex-shrink-0">
                               <x-lucide-user-circle-2 class="h-10 w-10 text-gray-400"/>
                           </div>
                           <div>
                               <p class="text-gray-500 font-semibold">Chauffeur</p>
                               <p class="font-bold text-gray-900">{{ $assignment->driver->first_name }} {{ $assignment->driver->last_name }}</p>
                               <p class="text-gray-600">Matricule: {{ $assignment->driver->employee_number ?? 'N/A' }}</p>
                           </div>
                       </div>
                       <div class="p-4 border rounded-lg flex items-center space-x-4">
                           <div class="flex-shrink-0">
                               <x-lucide-truck class="h-10 w-10 text-gray-400"/>
                           </div>
                           <div>
                               <p class="text-gray-500 font-semibold">Véhicule</p>
                               <p class="font-bold text-gray-900">{{ $assignment->vehicle->brand }} {{ $assignment->vehicle->model }}</p>
                               <p class="text-gray-600 font-mono">{{ $assignment->vehicle->registration_plate }}</p>
                           </div>
                       </div>
                       <div class="p-4 bg-gray-50 rounded-md">
                           <x-input-label for="issue_date" value="Date de Remise" required />
                           <x-text-input id="issue_date" name="issue_date" type="date" class="mt-1 block w-full" :value="old('issue_date', now()->format('Y-m-d'))" required />
                           <x-input-error :messages="$errors->get('issue_date')" class="mt-2" />
                       </div>
                       <div class="p-4 bg-gray-50 rounded-md">
                            <x-input-label for="current_mileage" value="Kilométrage Actuel" />
                            <p class="text-lg font-semibold text-gray-800 mt-1">{{ number_format($assignment->vehicle->current_mileage, 0, ',', ' ') }} km</p>
                       </div>
                   </div>
               </div>

               <div class="bg-white p-6 shadow-sm sm:rounded-lg">
                    <h3 class="text-lg font-semibold text-gray-900 border-b border-gray-200 pb-4 mb-6">État Visuel et Observations</h3>
                    <div class="flex flex-col md:flex-row gap-6">
                        <div class="flex-shrink-0 mx-auto bg-gray-100 p-2 rounded-lg shadow-inner">
                             @if($assignment->vehicle->vehicleType->name === 'Moto')
                                <img src="{{ asset('images/scooter_sketch.png') }}" alt="Croquis Scooter" class="w-32 rounded">
                            @else
                                <img src="{{ asset('images/car_sketch.png') }}" alt="Croquis Voiture" class="w-48 rounded">
                            @endif
                        </div>
                        <div class="flex-1">
                            <x-input-label for="general_observations" value="Observations sur l'état extérieur (rayures, bosses, etc.)" />
                            <textarea name="general_observations" id="general_observations" rows="5" class="mt-1 block w-full border-gray-300 focus:border-primary-500 focus:ring-primary-500 rounded-md shadow-sm">{{ old('general_observations') }}</textarea>
                            <x-input-error :messages="$errors->get('general_observations')" class="mt-2" />
                        </div>
                    </div>
               </div>

               <div class="bg-white p-6 shadow-sm sm:rounded-lg">
                   <h3 class="text-lg font-semibold text-gray-900 border-b border-gray-200 pb-4 mb-6">Checklist des Équipements</h3>
                   @php
                       $isMoto = $assignment->vehicle->vehicleType->name === 'Moto';
                       $checklist = $isMoto ? [
                           'Papiers & Accessoires' => ['Carte Grise', 'Assurance', 'Carte Carburant', 'Clé', 'Casque', 'Top-case'],
                           'État Général' => ['Pneu Avant', 'Pneu Arrière', 'Saute-vent', 'Rétroviseur Gauche', 'Rétroviseur Droit', 'Verrouillage', 'Feux avant', 'Feux arrières', 'Carrosserie Générale', 'Propreté']
                       ] : [
                           'Papiers du véhicule' => ['Carte Grise', 'Assurance', 'Vignette', 'Contrôle technique', 'Permis de circuler', 'Carte Carburant'],
                           'Accessoires Intérieur' => ['Triangle', 'Cric', 'Manivelle/Clé', 'Gilet', 'Tapis', 'Extincteur', 'Trousse de secours', 'Rétroviseur intérieur', 'Pare-soleil', 'Autoradio', 'Propreté'],
                           'Pneumatiques' => ['Roue AV Gauche', 'Roue AV Droite', 'Roue AR Gauche', 'Roue AR Droite', 'Roue de Secours', 'Enjoliveurs'],
                           'État Extérieur' => ['Vitres', 'Pare-brise', 'Rétroviseur Gauche', 'Rétroviseur Droit', 'Verrouillage', 'Poignées', 'Feux avant', 'Feux arrières', 'Essuie-glaces', 'Carrosserie Générale']
                       ];
                       $binaryStatuses = ['Oui', 'Non', 'N/A'];
                       $conditionStatuses = ['Bon', 'Moyen', 'Mauvais', 'N/A'];
                   @endphp

                   <div class="space-y-8">
                       @if($isMoto)
                           <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">
                               @foreach($checklist as $category => $items)
                                   <div class="space-y-3">
                                       <h4 class="font-semibold text-gray-700">{{ $category }}</h4>
                                       @foreach($items as $item)
                                           @php $statusesToUse = in_array($category, ['Papiers & Accessoires']) ? $binaryStatuses : $conditionStatuses; @endphp
                                           <div class="bg-gray-50 rounded-md p-2 border border-gray-200">
                                               <x-handover-status-switcher :item="$item" :category="$category" :statuses="$statusesToUse" />
                                           </div>
                                       @endforeach
                                   </div>
                               @endforeach
                           </div>
                       @else
                           @php
                               $rows = [
                                   ['Papiers du véhicule', 'Pneumatiques'],
                                   ['Accessoires Intérieur', 'État Extérieur']
                               ];
                           @endphp
                           @foreach($rows as $row)
                           <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8">
                               @foreach($row as $categoryName)
                                   <div class="space-y-3">
                                       <h4 class="font-semibold text-gray-700">{{ $categoryName }}</h4>
                                       @foreach($checklist[$categoryName] as $item)
                                           @php $statusesToUse = in_array($categoryName, ['Papiers du véhicule', 'Accessoires Intérieur']) ? $binaryStatuses : $conditionStatuses; @endphp
                                           <div class="bg-gray-50 rounded-md p-2 border border-gray-200">
                                                <x-handover-status-switcher :item="$item" :category="$categoryName" :statuses="$statusesToUse" />
                                           </div>
                                       @endforeach
                                   </div>
                               @endforeach
                           </div>
                           @endforeach
                       @endif
                   </div>
               </div>

               <div class="flex items-center justify-end mt-8 gap-4">
                   <a href="{{ route('admin.assignments.index') }}" class="text-sm font-semibold text-gray-600 hover:text-gray-900">Annuler</a>
                   <x-primary-button>
                        <x-lucide-check-circle class="w-5 h-5 mr-2"/>
                        Créer la Fiche
                   </x-primary-button>
               </div>
           </form>
       </div>
   </div>
</x-app-layout>
--- FIN DU FICHIER : ./resources/views/admin/handovers/vehicles/create.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/handovers/vehicles/edit.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            {{ __("Modifier la Fiche de Remise N°") }} {{ $handover->id }}
        </h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-5xl mx-auto sm:px-6 lg:px-8">
            <form action="{{ route('admin.handovers.vehicles.update', $handover) }}" method="POST" class="space-y-6">
                @csrf
                @method('PUT')

                {{-- CARTE 1: INFORMATIONS GÉNÉRALES --}}
                <div class="bg-white p-6 shadow-sm sm:rounded-lg">
                    <div class="text-center mb-6">
                        <h3 class="text-3xl font-bold text-gray-900 mb-2">MODIFICATION FICHE DE REMISE</h3>
                        <p class="text-sm text-gray-500">Pour l'Affectation N° {{ $handover->assignment->id }}</p>
                    </div>

                    <div class="flex flex-col md:flex-row justify-between gap-x-8 text-sm">
                        
                        <div class="flex-grow">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6 border rounded-md p-6">
                                <div>
                                    <p class="text-gray-500 font-semibold">Chauffeur</p>
                                    <p class="font-bold text-lg text-gray-900">{{ $handover->assignment->driver->first_name }} {{ $handover->assignment->driver->last_name }}</p>
                                    <p class="text-gray-600">Matricule: {{ $handover->assignment->driver->employee_number ?? 'N/A' }}</p>
                                    <p class="text-gray-600">Téléphone: {{ $handover->assignment->driver->personal_phone ?? 'N/A' }}</p>
                                </div>
                                <div>
                                    <p class="text-gray-500 font-semibold">Véhicule</p>
                                    <p class="font-bold text-lg text-gray-900">{{ $handover->assignment->vehicle->brand }} {{ $handover->assignment->vehicle->model }}</p>
                                    <p class="text-gray-600 font-mono">{{ $handover->assignment->vehicle->registration_plate }}</p>
                                    <p class="text-gray-600">Kilométrage (à la remise): {{ $handover->current_mileage }} km</p>
                                </div>
                            </div>
                        </div>

                        <div class="flex-shrink-0 w-full md:w-1/3 mt-6 md:mt-0">
                             <div class="border rounded-md p-6 h-full">
                                <label for="issue_date" class="block font-medium text-sm text-gray-700">Date de Remise <span class="text-red-500">*</span></label>
                                <x-text-input id="issue_date" name="issue_date" type="date" class="mt-1 block w-full" :value="old('issue_date', $handover->issue_date->format('Y-m-d'))" required />
                                <x-input-error :messages="$errors->get('issue_date')" class="mt-2" />
                            </div>
                        </div>

                    </div>
                </div>

                {{-- CARTE 2: ÉTAT VISUEL ET OBSERVATIONS --}}
                <div class="bg-white p-6 shadow-sm sm:rounded-lg">
                    <h3 class="text-lg font-semibold text-gray-900 border-b border-gray-200 pb-4 mb-6">État Visuel du Véhicule</h3>
                    <div class="flex flex-col md:flex-row gap-6 border rounded-md p-6">
                        <div class="flex-shrink-0 mx-auto bg-gray-100 p-4 rounded-md shadow-inner">
                            @if($handover->assignment->vehicle->vehicleType->name === 'Moto')
                                <img src="{{ asset('images/scooter_sketch.png') }}" alt="Croquis Scooter" class="w-32 rounded">
                            @else
                                <img src="{{ asset('images/car_sketch.png') }}" alt="Croquis Voiture" class="w-48 rounded">
                            @endif
                        </div>
                        <div class="flex-1">
                            <label for="general_observations" class="block font-medium text-sm text-gray-700">Observations sur l'état extérieur (rayures, bosses, etc.)</label>
                            <textarea name="general_observations" id="general_observations" rows="5" class="mt-1 block w-full border-gray-300 focus:border-violet-500 focus:ring-violet-500 rounded-md shadow-sm">{{ old('general_observations', $handover->general_observations) }}</textarea>
                            <x-input-error :messages="$errors->get('general_observations')" class="mt-2" />
                        </div>
                    </div>
                </div>

                {{-- CARTE 3: CHECKLIST DÉTAILLÉE --}}
                <div class="bg-white p-6 shadow-sm sm:rounded-lg">
                    <h3 class="text-lg font-semibold text-gray-900 border-b border-gray-200 pb-4 mb-6">Checklist des Équipements</h3>
                    @php
                        $isMoto = $handover->assignment->vehicle->vehicleType->name === 'Moto';
                        // Important: Utiliser des clés qui matchent le slug dans le contrôleur (ex: 'Papiers_&_Accessoires')
                        $checklistConfig = $isMoto ? [
                            'Papiers_&_Accessoires' => ['Carte Grise', 'Assurance', 'Carte Carburant', 'Clé', 'Casque', 'Top-case'],
                            'État_Général' => ['Pneu Avant', 'Pneu Arrière', 'Saute-vent', 'Rétroviseur Gauche', 'Rétroviseur Droit', 'Verrouillage', 'Feux avant', 'Feux arrières', 'Carrosserie Générale', 'Propreté']
                        ] : [
                            'Papiers_du_véhicule' => ['Carte Grise', 'Assurance', 'Vignette', 'Contrôle technique', 'Permis de circuler', 'Carte Carburant'],
                            'Accessoires_Intérieur' => ['Triangle', 'Cric', 'Manivelle/Clé', 'Gilet', 'Tapis', 'Extincteur', 'Trousse de secours', 'Rétroviseur intérieur', 'Pare-soleil', 'Autoradio', 'Propreté'],
                            'Pneumatiques' => ['Roue AV Gauche', 'Roue AV Droite', 'Roue AR Gauche', 'Roue AR Droite', 'Roue de Secours', 'Enjoliveurs'],
                            'État_Extérieur' => ['Vitres', 'Pare-brise', 'Rétroviseur Gauche', 'Rétroviseur Droit', 'Verrouillage', 'Poignées', 'Feux avant', 'Feux arrières', 'Essuie-glaces', 'Carrosserie Générale']
                        ];
                        $binaryStatuses = ['Oui', 'Non', 'N/A'];
                        $conditionStatuses = ['Bon', 'Moyen', 'Mauvais', 'N/A'];
                    @endphp

                    @if($isMoto)
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                             @foreach($checklistConfig as $categoryKey => $items)
                                <div class="bg-gray-50 rounded-md p-4 border border-gray-200">
                                    <h4 class="font-semibold text-gray-700 mb-3">{{ str_replace('_', ' ', $categoryKey) }}</h4>
                                    <div class="space-y-2">
                                        @foreach($items as $item)
                                            @php
                                                $statusesToUse = $categoryKey === 'Papiers_&_Accessoires' ? $binaryStatuses : $conditionStatuses;
                                                $itemKey = Str::slug($item, '_');
                                                $currentStatus = $detailsMap->get($categoryKey . '.' . $itemKey);
                                            @endphp
                                            <div class="bg-white rounded-md shadow-sm p-2">
                                                <x-handover-status-switcher :item="$item" :category="$categoryKey" :statuses="$statusesToUse" :currentStatus="$currentStatus" />
                                            </div>
                                        @endforeach
                                    </div>
                                </div>
                            @endforeach
                        </div>
                    @else
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="space-y-6">
                                @foreach(['Papiers_du_véhicule', 'Accessoires_Intérieur'] as $categoryKey)
                                <div class="bg-gray-50 rounded-md p-4 border border-gray-200">
                                    <h4 class="font-semibold text-gray-700 mb-3">{{ str_replace('_', ' ', $categoryKey) }}</h4>
                                    <div class="space-y-2">
                                        @foreach($checklistConfig[$categoryKey] as $item)
                                            @php
                                                $itemKey = Str::slug($item, '_');
                                                $currentStatus = $detailsMap->get($categoryKey . '.' . $itemKey);
                                            @endphp
                                            <div class="bg-white rounded-md shadow-sm p-2">
                                                 <x-handover-status-switcher :item="$item" :category="$categoryKey" :statuses="$binaryStatuses" :currentStatus="$currentStatus" />
                                            </div>
                                        @endforeach
                                    </div>
                                </div>
                                @endforeach
                            </div>

                            <div class="space-y-6">
                                @foreach(['Pneumatiques', 'État_Extérieur'] as $categoryKey)
                                <div class="bg-gray-50 rounded-md p-4 border border-gray-200">
                                    <h4 class="font-semibold text-gray-700 mb-3">{{ str_replace('_', ' ', $categoryKey) }}</h4>
                                    <div class="space-y-2">
                                        @foreach($checklistConfig[$categoryKey] as $item)
                                             @php
                                                $itemKey = Str::slug($item, '_');
                                                $currentStatus = $detailsMap->get($categoryKey . '.' . $itemKey);
                                            @endphp
                                            <div class="bg-white rounded-md shadow-sm p-2">
                                                 <x-handover-status-switcher :item="$item" :category="$categoryKey" :statuses="$conditionStatuses" :currentStatus="$currentStatus" />
                                            </div>
                                        @endforeach
                                    </div>
                                </div>
                                @endforeach
                            </div>
                        </div>
                    @endif
                </div>

                <div class="bg-white p-6 shadow-sm sm:rounded-lg">
                    <div class="flex items-center justify-end mt-8 gap-4 border-t border-gray-200 pt-6">
                        <a href="{{ route('admin.handovers.vehicles.show', $handover) }}" class="text-sm font-semibold text-gray-600 hover:text-gray-900">Annuler</a>
                        <button type="submit" class="inline-flex items-center px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-violet-600 hover:bg-violet-700">
                            Mettre à jour la Fiche
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</x-app-layout>
--- FIN DU FICHIER : ./resources/views/admin/handovers/vehicles/edit.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/handovers/vehicles/pdf.blade.php
////////////////////////////////////////////////////////////////

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fiche de Remise N° {{ $handoverForm->id }}</title>
    <style>
        /* Reset et Styles de Base */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            font-size: 10pt;
            color: #333;
            background-color: #fff;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
        }
        #print-area {
            width: 210mm;
            min-height: 297mm;
            padding: 15mm;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
        }
        h1, h2, h3 {
            font-weight: bold;
            color: #000;
        }
        h1 { font-size: 20pt; margin-bottom: 5mm; }
        h2 { font-size: 14pt; margin-bottom: 4mm; border-bottom: 1px solid #eee; padding-bottom: 2mm; }
        h3 { font-size: 11pt; margin-bottom: 2mm; color: #444; }

        /* En-tête */
        header {
            border-bottom: 2px solid #000;
            padding-bottom: 5mm;
        }
        header .header-details {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }
        header .meta {
            font-size: 9pt;
            color: #666;
        }
        header .company-info p, header .document-info p {
            margin: 0;
        }
        header .company-info {
            font-weight: bold;
            font-size: 12pt;
        }
        header .document-info {
            text-align: right;
        }

        /* Contenu Principal */
        main {
            flex-grow: 1;
            margin-top: 8mm;
        }

        /* Section des Parties (Conducteur/Véhicule) */
        #parties {
            display: flex;
            justify-content: space-between;
            background-color: #f8f9fa;
            padding: 4mm;
            border-radius: 4px;
            border: 1px solid #dee2e6;
        }
        .party-info { width: 48%; }
        .party-info .name { font-weight: bold; font-size: 11pt; }
        .party-info .role { font-size: 8pt; color: #555; text-transform: uppercase; margin-bottom: 1mm; }
        .party-info .contact { font-size: 9pt; color: #666; }
        .party-info.vehicle { text-align: right; }

        /* Section d'Inspection */
        #inspection {
            margin-top: 8mm;
            display: flex;
            gap: 8mm;
            align-items: flex-start;
        }
        .visuals { flex: 1; }
        .visuals .content {
            display: flex;
            gap: 5mm;
            border: 1px solid #dee2e6;
            padding: 4mm;
            border-radius: 4px;
        }
        .sketch {
            flex: 0 0 45%;
            text-align: center;
        }
        .sketch img {
            max-width: 100%;
            border: 1px solid #ccc;
        }
        .sketch .caption {
            font-size: 8pt;
            color: #777;
            margin-top: 2mm;
        }
        .observations { flex: 1; }
        .observations strong { font-size: 10pt; }
        .observation-text {
            background-color: #f8f9fa;
            padding: 3mm;
            border-radius: 3px;
            min-height: 40mm;
            font-size: 9pt;
            white-space: pre-wrap;
            margin-top: 1mm;
            border: 1px solid #e9ecef;
        }

        .checklist { flex: 1; }
        .checklist .categories { column-count: 1; }
        .checklist .category {
            break-inside: avoid;
            margin-bottom: 5mm;
        }
        .checklist ul { list-style: none; }
        .checklist li {
            display: flex;
            justify-content: space-between;
            padding: 1.5mm 0;
            border-bottom: 1px dotted #ccc;
        }
        .checklist .item { color: #333; }
        .checklist .status { font-weight: bold; color: #000; }

        /* Pied de page */
        footer {
            margin-top: auto;
            padding-top: 10mm;
        }
        .signatures {
            display: flex;
            justify-content: space-between;
            text-align: center;
        }
        .signature-box {
            width: 30%;
            padding-top: 5mm;
            border-top: 1.5px solid #000;
        }
        .signature-box .name {
            font-weight: bold;
            margin-bottom: 1mm;
            min-height: 12pt;
        }
        .signature-box .role {
            font-size: 8pt;
            color: #666;
        }

        /* Media print pour ajustements fins */
        @media print {
            body {
                background-color: white;
            }
            #print-area {
                margin: 0;
                padding: 10mm; /* Marges d'impression */
                box-shadow: none;
                width: 100%;
                height: auto;
                min-height: 0;
            }
        }
    </style>
</head>
<body>

    {{-- Ce conteneur représente la page A4 et contient tout le contenu à imprimer. --}}
    <div id="print-area">

        <header>
            <h1>FICHE DE REMISE VÉHICULE</h1>
            <div class="header-details">
                <div class="company-info">
                    <p>{{ $handoverForm->assignment->organization->name }}</p>
                    <p class="meta">Affectation N°: {{ $handoverForm->assignment->id }}</p>
                </div>
                <div class="document-info">
                    <p class="meta">Document généré le {{ now()->format('d/m/Y') }}</p>
                </div>
            </div>
        </header>

        <main>
            <section id="parties">
                <div class="party-info driver">
                    <p class="name">{{ $handoverForm->assignment->driver->first_name }} {{ $handoverForm->assignment->driver->last_name }}</p>
                    <p class="role">Conducteur</p>
                    <p class="contact">{{ $handoverForm->assignment->driver->personal_phone ?? 'N/A' }}</p>
                </div>
                <div class="party-info vehicle">
                    <p class="name">{{ $handoverForm->assignment->vehicle->brand }} {{ $handoverForm->assignment->vehicle->model }} ({{ $handoverForm->assignment->vehicle->registration_plate }})</p>
                    <p class="role">Véhicule</p>
                    <p class="contact">Remis le: {{ $handoverForm->issue_date->format('d/m/Y') }} | {{ number_format($handoverForm->current_mileage, 0, ',', ' ') }} km</p>
                </div>
            </section>

            <section id="inspection">
                <div class="visuals">
                    <h2>État Visuel et Observations</h2>
                    <div class="content">
                        <div class="sketch">
                            @php
                                // La conversion en base64 se fera dans le contrôleur
                                $sketchAsset = $handoverForm->assignment->vehicle->vehicleType->name === 'Moto' ? 'images/scooter_sketch.png' : 'images/car_sketch.png';
                            @endphp
                            <img src="{{ $vehicle_sketch_base64 ?? '' }}" alt="Croquis du véhicule">
                            <p class="caption">Cocher les défauts constatés</p>
                        </div>
                        <div class="observations">
                            <strong>Observations générales:</strong>
                            <p class="observation-text">{{ $handoverForm->general_observations ?: 'Aucune observation particulière.' }}</p>
                        </div>
                    </div>
                </div>

                <div class="checklist">
                    <h2>Checklist de Contrôle</h2>
                    <div class="categories">
                    @foreach($checklist as $category => $items)
                        <div class="category">
                            <h3>{{ $category }}</h3>
                            <ul>
                            @foreach($items as $detail)
                                <li>
                                    <span class="item">{{ $detail->item }}</span>
                                    <span class="status">{{ $detail->status }}</span>
                                </li>
                            @endforeach
                            </ul>
                        </div>
                    @endforeach
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <div class="signatures">
                <div class="signature-box">
                    <p class="name">{{ $handoverForm->assignment->driver->first_name }} {{ $handoverForm->assignment->driver->last_name }}</p>
                    <p class="role">(Chauffeur)</p>
                </div>
                <div class="signature-box">
                    <p class="name">(Nom & Prénom)</p>
                    <p class="role">(Responsable Hiérarchique)</p>
                </div>
                <div class="signature-box">
                    <p class="name">(Nom & Prénom)</p>
                    <p class="role">(Responsable Parc)</p>
                </div>
            </div>
        </footer>

    </div>

</body>
</html>

--- FIN DU FICHIER : ./resources/views/admin/handovers/vehicles/pdf.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/handovers/vehicles/pdf.blade.php:Zone.Identifier
////////////////////////////////////////////////////////////////


--- FIN DU FICHIER : ./resources/views/admin/handovers/vehicles/pdf.blade.php:Zone.Identifier ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/handovers/vehicles/show.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    {{-- Le header contient les boutons d'action, qui seront masqués à l'impression --}}
    <x-slot name="header">
    <div class="flex justify-between items-center">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            Aperçu de la Fiche de Remise N° {{ $handoverForm->id }}
        </h2>
        <div class="space-x-2">
            <a href="{{ route('admin.handovers.vehicles.edit', $handoverForm) }}" class="inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50">
                <x-lucide-file-pen-line class="h-4 w-4 mr-2"/>
                Modifier
            </a>
            {{-- Le bouton est maintenant un lien vers notre nouvelle route --}}
            <a href="{{ route('admin.handovers.vehicles.downloadPdf', $handoverForm) }}" class="inline-flex items-center px-4 py-2 bg-primary-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-primary-700">
                <x-lucide-download class="h-4 w-4 mr-2"/>
                Télécharger PDF
            </a>
        </div>
    </div>
</x-slot>

    {{-- Le conteneur principal avec un fond gris pour l'aperçu à l'écran --}}
    <div class="py-12 bg-gray-200 print:bg-white">
        
        {{-- Le conteneur #print-area simule la page A4 et contient tout ce qui doit être imprimé --}}
        <div id="print-area" class="max-w-[210mm] min-h-[297mm] mx-auto bg-white shadow-lg p-10 print:p-0 print:shadow-none flex flex-col">

            <main class="flex-grow">
                <header class="flex justify-between items-start pb-4 border-b-2 border-black">
                    <div>
                        <h1 class="text-2xl font-bold text-black">FICHE DE REMISE VÉHICULE</h1>
                        <p class="text-sm text-gray-600">Affectation N°: {{ $handoverForm->assignment->id }}</p>
                    </div>
                    <div class="text-right">
                        <p class="font-semibold text-lg">{{ $handoverForm->assignment->organization->name }}</p>
                        <p class="text-xs text-gray-500">Document généré le {{ now()->format('d/m/Y') }}</p>
                    </div>
                </header>

                <section class="mt-6 grid grid-cols-2 gap-x-8 text-sm">
                    {{-- Colonne de gauche --}}
                    <div>
                        <p class="font-bold">{{ $handoverForm->assignment->driver->first_name }} {{ $handoverForm->assignment->driver->last_name }}</p>
                        <p class="text-gray-600">{{ $handoverForm->assignment->driver->personal_phone ?? 'N/A' }}</p>
                    </div>
                    {{-- Colonne de droite --}}
                    <div class="text-right">
                        <p class="text-gray-600 mt-2">Remis le: {{ $handoverForm->issue_date->format('d/m/Y') }}</p>
                        <p class="font-bold">{{ $handoverForm->assignment->vehicle->brand }} {{ $handoverForm->assignment->vehicle->model }} ({{ $handoverForm->assignment->vehicle->registration_plate }})</p>
                        <p class="text-gray-600">Kilométrage: {{ number_format($handoverForm->current_mileage, 0, ',', ' ') }} km</p>
                        
                    </div>
                </section>


                <section class="mt-6">
                    <h2 class="text-base font-bold mb-3 text-gray-800 uppercase tracking-wider border-b pb-1">État Visuel et Observations</h2>
                    <div class="flex gap-6 p-2 border rounded-lg">
                        <div class="w-1/3 flex-shrink-0 text-center self-center">
                            @php
                                $sketchAsset = $handoverForm->assignment->vehicle->vehicleType->name === 'Moto' ? 'images/scooter_sketch.png' : 'images/car_sketch.png';
                            @endphp
                            <img src="{{ asset($sketchAsset) }}" alt="Croquis" class="border mx-auto max-w-full">
                            <p class="text-xs text-gray-500 mt-2">Cocher les défauts constatés</p>
                        </div>
                        <div class="w-2/3">
                            <strong>Observations générales:</strong>
                            <p class="text-gray-700 p-2 bg-gray-50 min-h-[120px] mt-1 border rounded whitespace-pre-wrap text-sm">{{ $handoverForm->general_observations ?: 'Aucune observation particulière.' }}</p>
                        </div>
                    </div>
                </section>

                <section class="mt-6">
                    <h2 class="text-base font-bold mb-3 text-gray-800 uppercase tracking-wider border-b pb-1">Checklist de Contrôle</h2>
                    <div class="space-y-4 text-xs">
                        @php
                            $isMoto = $handoverForm->assignment->vehicle->vehicleType->name === 'Moto';
                            $rows = $isMoto ? [
                                ['Papiers & Accessoires', 'État Général']
                            ] : [
                                ['Papiers du véhicule', 'Pneumatiques'],
                                ['Accessoires Intérieur', 'État Extérieur']
                            ];
                        @endphp

                        @foreach($rows as $row)
                        <div class="grid grid-cols-2 gap-x-8">
                            @foreach($row as $categoryName)
                                @if(isset($checklist[$categoryName]))
                                <div class="break-inside-avoid">
                                    <h3 class="font-semibold text-gray-700 mb-2 border-b">{{ $categoryName }}</h3>
                                    <div class="space-y-1">
                                    @foreach($checklist[$categoryName] as $detail)
                                        <div class="flex justify-between border-b border-dotted">
                                            <span>{{ $detail->item }}</span>
                                            <span class="font-bold">{{ $detail->status }}</span>
                                        </div>
                                    @endforeach
                                    </div>
                                </div>
                                @endif
                            @endforeach
                        </div>
                        @endforeach
                    </div>
                </section>
            </main>

            <footer class="mt-auto pt-12">
                <div class="grid grid-cols-3 gap-12">
                    <div class="border-t-2 border-black pt-2 text-center text-sm">
                        <p class="font-semibold">{{ $handoverForm->assignment->driver->first_name }} {{ $handoverForm->assignment->driver->last_name }}</p>
                        <p class="text-xs text-gray-600">(Chauffeur)</p>
                    </div>
                    <div class="border-t-2 border-black pt-2 text-center text-sm">
                        <p class="font-semibold">(Nom & Prénom)</p>
                        <p class="text-xs text-gray-600">(Responsable Hiérarchique)</p>
                    </div>
                    <div class="border-t-2 border-black pt-2 text-center text-sm">
                        <p class="font-semibold">(Nom & Prénom)</p>
                        <p class="text-xs text-gray-600">(Responsable Parc)</p>
                    </div>
                </div>
            </footer>

        </div>
    </div>

    {{-- /////////// SECTION CSS CORRIGÉE /////////// --}}
    <style>
        @media print {
            body {
                background-color: white !important;
                -webkit-print-color-adjust: exact; /* For Chrome, Safari */
                print-color-adjust: exact; /* For Firefox */
            }

            /* 1. Rendre tout invisible par défaut */
            body * {
                visibility: hidden;
            }

            /* 2. Rendre la zone d'impression et son contenu visibles */
            #print-area, #print-area * {
                visibility: visible;
            }

            /* 3. Positionner la zone d'impression pour qu'elle occupe toute la page */
            #print-area {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                height: auto;
                padding: 10mm; /* Marges d'impression réduites */
                margin: 0;
                box-shadow: none;
                font-size: 10pt;
            }

            /* Classes utilitaires pour l'impression */
            .print\:hidden {
                display: none !important;
            }
            .break-inside-avoid {
                break-inside: avoid;
            }
        }
    </style>
</x-app-layout>
--- FIN DU FICHIER : ./resources/views/admin/handovers/vehicles/show.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/maintenance/dashboard.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            {{ __('Tableau de Bord de la Maintenance') }}
        </h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">

            {{-- SECTION DES STATISTIQUES CLÉS --}}
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                {{-- Carte État de la Flotte --}}
                <div class="bg-white overflow-hidden shadow-sm rounded-lg col-span-1 md:col-span-2 p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">État Actuel de la Flotte</h3>
                    <div id="fleet-status-chart"></div>
                </div>
                {{-- Cartes KPI --}}
                <div class="bg-white overflow-hidden shadow-sm rounded-lg p-6 flex flex-col justify-center">
                    <h4 class="text-sm font-medium text-gray-500">Maintenance Urgente</h4>
                    <p class="mt-1 text-3xl font-semibold text-orange-600">{{ $urgentPlans->count() }}</p>
                    <p class="text-xs text-gray-500">Plans nécessitant une attention</p>
                </div>
                 <div class="bg-white overflow-hidden shadow-sm rounded-lg p-6 flex flex-col justify-center">
                    <h4 class="text-sm font-medium text-gray-500">Total Véhicules</h4>
                    <p class="mt-1 text-3xl font-semibold text-primary-600">{{ $vehicleStats->sum() }}</p>
                    <p class="text-xs text-gray-500">actifs dans la flotte</p>
                </div>
            </div>

            {{-- SECTION DES JAUGES D'URGENCE --}}
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-6 text-gray-900">
                    <h3 class="text-xl font-semibold text-gray-700 mb-4">Échéances de Maintenance Prioritaires</h3>
                    @if($urgentPlans->isEmpty())
                        <div class="text-center py-8 text-gray-500">Aucune maintenance urgente à signaler.</div>
                    @else
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            @foreach($urgentPlans as $plan)
                                <div class="border rounded-lg p-4 flex flex-col">
                                    <div class="text-center">
                                        {{-- Placeholder pour la jauge ApexCharts --}}
                                        <div id="gauge-{{ $plan['id'] }}"></div>
                                    </div>
                                    <div class="mt-2 text-center">
                                        <p class="font-semibold text-gray-800">{{ $plan['vehicle_name'] }}</p>
                                        <p class="text-sm text-gray-600">{{ $plan['maintenance_type'] }}</p>
                                        <p class="text-xs font-mono text-gray-500">{{ $plan['plate'] }}</p>
                                        <p class="mt-2 text-sm font-bold {{ $plan['urgency_percent'] >= 90 ? 'text-red-600' : 'text-gray-700' }}">
                                            Échéance : {{ $plan['next_due'] }}
                                        </p>
                                    </div>
                                </div>
                            @endforeach
                        </div>
                    @endif
                </div>
            </div>

        </div>
    </div>

    @push('scripts')
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        if (window.ApexCharts) {
            // --- Configuration du Graphique Circulaire (Donut) ---
            const fleetStatusData = @json($vehicleStats);
            const donutOptions = {
                series: Object.values(fleetStatusData),
                labels: Object.keys(fleetStatusData),
                chart: { type: 'donut', height: 250 },
                colors: ['#10B981', '#F59E0B', '#3B82F6', '#EF4444', '#6B7280'], // Vert, Orange, Bleu, Rouge, Gris
                legend: { position: 'bottom' },
                responsive: [{ breakpoint: 480, options: { chart: { width: 200 }, legend: { position: 'bottom' } } }]
            };
            new ApexCharts(document.querySelector("#fleet-status-chart"), donutOptions).render();

            // --- Configuration des Jauges Radiales ---
            const urgentPlansData = @json($urgentPlans);
            urgentPlansData.forEach(plan => {
                const gaugeOptions = {
                    series: [plan.urgency_percent],
                    chart: { type: 'radialBar', height: 200, sparkline: { enabled: true } },
                    plotOptions: {
                        radialBar: {
                            startAngle: -90,
                            endAngle: 90,
                            hollow: { margin: 5, size: '60%' },
                            track: { background: '#e7e7e7', strokeWidth: '97%' },
                            dataLabels: {
                                name: { show: false },
                                value: { offsetY: -2, fontSize: '22px' }
                            }
                        }
                    },
                    grid: { padding: { top: -10 } },
                    fill: {
                        type: 'gradient',
                        gradient: {
                            shade: 'light',
                            type: 'horizontal',
                            shadeIntensity: 0.5,
                            gradientToColors: [plan.urgency_percent > 85 ? '#EF4444' : '#F59E0B'], // Rouge si > 85%, sinon Orange
                            inverseColors: false,
                            opacityFrom: 1,
                            opacityTo: 1,
                            stops: [0, 100]
                        },
                    },
                    labels: ['Progression'],
                };
                new ApexCharts(document.querySelector(`#gauge-${plan.id}`), gaugeOptions).render();
            });
        }
    });
    </script>
    @endpush
</x-app-layout>
--- FIN DU FICHIER : ./resources/views/admin/maintenance/dashboard.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/maintenance/plans/create.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            {{ __('Programmer un Plan de Maintenance') }}
        </h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-4xl mx-auto sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <script>
                    // On prépare les données PHP pour les rendre accessibles à notre script Alpine.js
                    const vehiclesData = @json($vehicles->keyBy('id')->map->only('current_mileage'));
                    const recurrenceUnitsData = @json($recurrenceUnits);
                </script>

                <div class="p-8 text-gray-900"
                     x-data="{
                        selectedVehicleId: '{{ old('vehicle_id') }}',
                        selectedRecurrenceUnitId: '{{ old('recurrence_unit_id') }}',
                        recurrenceValue: {{ old('recurrence_value', 10000) }},
                        currentMileageText: 'N/A',
                        recurrenceUnitName: '',

                        init() {
                            this.updateAllDisplays();
                            // Initialisation des sélecteurs TomSelect
                            let tomVehicle = new TomSelect('#select-vehicle', {create: false});
                            let tomMaintenance = new TomSelect('#select-maintenance-type', {create: false});

                            // Synchroniser Alpine avec TomSelect pour les véhicules
                            tomVehicle.on('change', (value) => { this.selectedVehicleId = value; this.updateAllDisplays(); });
                            if(this.selectedVehicleId) { tomVehicle.setValue(this.selectedVehicleId, true); }
                        },
                        updateAllDisplays() {
                            this.updateMileageDisplay();
                            this.updateRecurrenceUnitNameDisplay();
                            this.calculateAndSetDueDate();
                        },
                        updateMileageDisplay() {
                            const vehicle = vehiclesData[this.selectedVehicleId];
                            this.currentMileageText = vehicle ? new Intl.NumberFormat('fr-FR').format(vehicle.current_mileage) + ' km' : 'N/A';
                        },
                        updateRecurrenceUnitNameDisplay() {
                            const unit = recurrenceUnitsData.find(u => u.id == this.selectedRecurrenceUnitId);
                            this.recurrenceUnitName = unit ? unit.name : '';
                        },
                        calculateAndSetDueDate() {
                            if (this.recurrenceUnitName === 'Kilomètres') {
                                const vehicle = vehiclesData[this.selectedVehicleId];
                                const mileageInput = document.getElementById('next_due_mileage');
                                if (vehicle && mileageInput && this.recurrenceValue > 0) {
                                    mileageInput.value = parseInt(vehicle.current_mileage) + parseInt(this.recurrenceValue);
                                }
                            }
                        }
                     }"
                     x-init="init()">

                    <h3 class="text-xl font-semibold text-gray-700 mb-6">Nouveau Plan de Maintenance Préventive</h3>

                    @if ($errors->any())
                        <div class="mb-4 bg-red-100 border-l-4 border-red-500 text-red-700 p-4" role="alert">
                            <p class="font-bold">Veuillez corriger les erreurs :</p>
                            <ul class="mt-2 list-disc list-inside">@foreach ($errors->all() as $error)<li>{{ $error }}</li>@endforeach</ul>
                        </div>
                    @endif

                    <form method="POST" action="{{ route('admin.maintenance.plans.store') }}">
                        @csrf
                        <div class="space-y-6">
                            <div>
                                <label for="select-vehicle" class="block font-medium text-sm text-gray-700">Véhicule <span class="text-red-500">*</span></label>
                                <select name="vehicle_id" id="select-vehicle" required>
                                    <option value="">Sélectionnez un véhicule</option>
                                    @foreach($vehicles as $vehicle)
                                        <option value="{{ $vehicle->id }}">{{ $vehicle->brand }} {{ $vehicle->model }} ({{ $vehicle->registration_plate }})</option>
                                    @endforeach
                                </select>
                            </div>
                            <div>
                                <label for="select-maintenance-type" class="block font-medium text-sm text-gray-700">Type de Maintenance <span class="text-red-500">*</span></label>
                                <select name="maintenance_type_id" id="select-maintenance-type" placeholder="Rechercher un type..." required>
                                    <option value="">Sélectionnez un type</option>
                                    @foreach($maintenanceTypes as $type)
                                        <option value="{{ $type->id }}" @selected(old('maintenance_type_id') == $type->id)>{{ $type->name }}</option>
                                    @endforeach
                                </select>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label for="recurrence_value" class="block font-medium text-sm text-gray-700">Répéter tous les <span class="text-red-500">*</span></label>
                                    <input type="number" name="recurrence_value" id="recurrence_value" x-model.number="recurrenceValue" @input.debounce.500ms="calculateAndSetDueDate()" class="mt-1 block w-full border-gray-300 focus:border-violet-500 focus:ring-violet-500 rounded-md shadow-sm" required>
                                </div>
                                <div>
                                    <label for="recurrence_unit_id" class="block font-medium text-sm text-gray-700">Unité <span class="text-red-500">*</span></label>
                                    <select name="recurrence_unit_id" id="recurrence_unit_id" x-model="selectedRecurrenceUnitId" @change="updateRecurrenceUnitNameDisplay(); calculateAndSetDueDate();" class="mt-1 block w-full border-gray-300 focus:border-violet-500 focus:ring-violet-500 rounded-md shadow-sm" required>
                                        <option value="">Sélectionnez</option>
                                        @foreach($recurrenceUnits as $unit)
                                            <option value="{{ $unit->id }}">{{ $unit->name }}</option>
                                        @endforeach
                                    </select>
                                </div>
                            </div>

                            <div x-show="recurrenceUnitName === 'Jours' || recurrenceUnitName === 'Mois'" style="display: none;" x-transition>
                                <label for="next_due_date" class="block font-medium text-sm text-gray-700">Prochaine Échéance (Date)</label>
                                <p class="text-xs text-gray-500">Laissez vide pour un calcul automatique.</p>
                                <input type="date" name="next_due_date" id="next_due_date" class="mt-1 block w-full border-gray-300 focus:border-violet-500 focus:ring-violet-500 rounded-md shadow-sm">
                            </div>
                            <div x-show="recurrenceUnitName === 'Kilomètres'" style="display: none;" x-transition>
                                <label for="next_due_mileage" class="block font-medium text-sm text-gray-700">Prochaine Échéance (Kilométrage)</label>
                                <p class="mt-1 text-xs text-gray-500">Référence (km actuel) : <span class="font-semibold" x-text="currentMileageText"></span></p>
                                <input type="number" name="next_due_mileage" id="next_due_mileage" class="mt-1 block w-full border-gray-300 focus:border-violet-500 focus:ring-violet-500 rounded-md shadow-sm">
                            </div>
                            {{-- AJOUT DU CHAMP NOTES --}}
                            <div>
                                <label for="notes" class="block font-medium text-sm text-gray-700">Notes / Instructions</label>
                                <textarea name="notes" id="notes" rows="3" class="mt-1 block w-full border-gray-300 focus:border-violet-500 focus:ring-violet-500 rounded-md shadow-sm">{{ old('notes') }}</textarea>
                            </div>
                        </div>

                        <div class="mt-8 flex items-center justify-end gap-4 border-t border-gray-200 pt-6">
                            <a href="{{ route('admin.maintenance.plans.index') }}" class="text-sm font-semibold text-gray-600 hover:text-gray-900">Annuler</a>
                            <button type="submit" class="inline-flex items-center px-4 py-2 bg-violet-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-violet-700">Enregistrer le Plan</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</x-app-layout>

--- FIN DU FICHIER : ./resources/views/admin/maintenance/plans/create.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/maintenance/plans/index.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            {{ __('Plans de Maintenance Préventive') }}
        </h2>
    </x-slot>

    {{-- SOLUTION AMÉLIORÉE : Injection des données avant l'initialisation d'Alpine.js --}}
    <script>
        // Données injectées de manière sécurisée
        window.maintenancePlansData = {!! json_encode($plansForJs, JSON_HEX_TAG | JSON_HEX_APOS | JSON_HEX_AMP | JSON_HEX_QUOT) !!};
        window.recurrenceUnits = {!! json_encode($recurrenceUnits->keyBy('id'), JSON_HEX_TAG | JSON_HEX_APOS | JSON_HEX_AMP | JSON_HEX_QUOT) !!};
        
        // Définition UNIQUE du composant Alpine.js
        document.addEventListener('alpine:init', () => {
            Alpine.data('maintenancePlansPage', () => ({
                // État des modales
                showEditModal: false,
                showLogModal: false,
                
                // Données des plans
                plans: window.maintenancePlansData || {},
                recurrenceUnits: window.recurrenceUnits || {},
                
                // Plan en cours d'édition/logging
                planToEdit: {},
                planToLog: {},
                
                // URLs des formulaires
                editFormUrl: '',
                logFormUrl: '',

                // Initialisation des composants
                init() {
                    this.$nextTick(() => {
                        this.initTomSelect();
                    });
                },

                // Initialisation de TomSelect
                initTomSelect() {
                    if (window.TomSelect && this.$refs.vehicleFilter) {
                        new TomSelect(this.$refs.vehicleFilter, { 
                            create: false, 
                            placeholder: 'Rechercher un véhicule...' 
                        });
                    }
                    if (window.TomSelect && this.$refs.typeFilter) {
                        new TomSelect(this.$refs.typeFilter, { 
                            create: false, 
                            placeholder: 'Rechercher un type...' 
                        });
                    }
                },

                // Ouverture de la modale d'édition
                openEditModal(planId) {
                    const plan = this.plans[planId];
                    if (!plan) {
                        console.error('Plan non trouvé:', planId);
                        return;
                    }
                    
                    // Crée une copie profonde pour l'édition
                    this.planToEdit = JSON.parse(JSON.stringify(plan));
                    
                    // S'assurer que l'unité de récurrence est correctement définie
                    if (!this.planToEdit.recurrence_unit_id && plan.recurrence_unit_id) {
                        this.planToEdit.recurrence_unit_id = plan.recurrence_unit_id;
                    }
                    
                    this.editFormUrl = `/admin/maintenance/plans/${planId}`;
                    this.showEditModal = true;
                },

                // Ouverture de la modale de logging
                openLogModal(planId) {
                    const plan = this.plans[planId];
                    if (!plan) {
                        console.error('Plan non trouvé:', planId);
                        return;
                    }
                    
                    // Crée une copie profonde pour le logging
                    this.planToLog = JSON.parse(JSON.stringify(plan));
                    this.logFormUrl = '/admin/maintenance/logs';
                    this.showLogModal = true;
                },

                // Fermeture des modales
                closeEditModal() {
                    this.showEditModal = false;
                    this.planToEdit = {};
                    this.editFormUrl = '';
                },

                closeLogModal() {
                    this.showLogModal = false;
                    this.planToLog = {};
                    this.logFormUrl = '';
                },

                // Met à jour le nom de l'unité quand l'ID change dans la modale d'édition
                updateEditRecurrenceUnitName() {
                    const unit = this.recurrenceUnits[this.planToEdit.recurrence_unit_id];
                    if (unit) {
                        if (!this.planToEdit.recurrence_unit) {
                            this.planToEdit.recurrence_unit = {};
                        }
                        this.planToEdit.recurrence_unit.name = unit.name;
                    }
                },

                // Obtient le nom de l'unité de récurrence pour l'affichage
                getRecurrenceUnitName(unitId) {
                    const unit = this.recurrenceUnits[unitId];
                    return unit ? unit.name : '';
                },

                // Formate le kilométrage avec des espaces
                formatMileage(mileage) {
                    if (!mileage) return '0';
                    return new Intl.NumberFormat('fr-FR').format(mileage);
                },

                // Soumission du formulaire d'édition
                submitEditForm() {
                    if (this.editFormUrl && this.$refs.editForm) {
                        this.$refs.editForm.submit();
                    }
                },

                // Soumission du formulaire de logging
                submitLogForm() {
                    if (this.logFormUrl && this.$refs.logForm) {
                        this.$refs.logForm.submit();
                    }
                }
            }));
        });
    </script>

    <div x-data="maintenancePlansPage" x-init="init()" class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">

            {{-- Section des Filtres --}}
            <div class="mb-6 bg-white p-4 shadow-sm sm:rounded-lg">
                <form action="{{ route('admin.maintenance.plans.index') }}" method="GET">
                    <div class="flex flex-col md:flex-row md:items-end md:space-x-4 space-y-2 md:space-y-0">
                        <div class="flex-grow">
                            <label for="select-vehicle-filter" class="block text-sm font-medium text-gray-700">Filtrer par Véhicule</label>
                            <select x-ref="vehicleFilter" name="vehicle_id" class="mt-1">
                                <option value="">Tous les véhicules</option>
                                @foreach($vehicles as $vehicle)
                                    <option value="{{ $vehicle->id }}" @selected(($filters['vehicle_id'] ?? '') == $vehicle->id)>
                                        {{ $vehicle->brand }} {{ $vehicle->model }} ({{ $vehicle->registration_plate }})
                                    </option>
                                @endforeach
                            </select>
                        </div>
                        <div class="flex-grow">
                            <label for="select-maintenance-type-filter" class="block text-sm font-medium text-gray-700">Filtrer par Type</label>
                            <select x-ref="typeFilter" name="maintenance_type_id" class="mt-1">
                                <option value="">Tous les types</option>
                                @foreach($maintenanceTypes as $type)
                                    <option value="{{ $type->id }}" @selected(($filters['maintenance_type_id'] ?? '') == $type->id)>{{ $type->name }}</option>
                                @endforeach
                            </select>
                        </div>
                        <div class="flex-shrink-0 flex space-x-2">
                            <button type="submit" class="inline-flex items-center justify-center w-full px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-violet-600 hover:bg-violet-700">Filtrer</button>
                            <a href="{{ route('admin.maintenance.plans.index') }}" class="inline-flex items-center justify-center w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">Reset</a>
                        </div>
                    </div>
                </form>
            </div>

            @if (session('success'))
                <div class="mb-4 bg-green-100 border-l-4 border-green-500 text-green-700 p-4" role="alert">
                    <p class="font-bold">{{ session('success') }}</p>
                </div>
            @endif

            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-6 text-gray-900">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold text-gray-700">Tous les Plans Programmés</h3>
                        @can('manage maintenance plans')
                            <a href="{{ route('admin.maintenance.plans.create') }}" class="inline-flex items-center px-4 py-2 bg-violet-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-violet-700">
                                Ajouter un Plan
                            </a>
                        @endcan
                    </div>

                    <div class="overflow-x-auto border border-gray-200 rounded-lg">
                        <table class="w-full divide-y divide-gray-200">
                            <thead class="bg-gray-100">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase">Véhicule</th>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase">Plan</th>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase">Échéance</th>
                                    <th class="px-6 py-3 text-right text-xs font-bold text-gray-600 uppercase">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                @forelse ($plans as $plan)
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-3">
                                            <div class="text-sm font-medium text-gray-900">{{ $plan->vehicle?->brand }} {{ $plan->vehicle?->model }}</div>
                                            <div class="text-xs text-gray-500 font-mono">{{ $plan->vehicle?->registration_plate }}</div>
                                        </td>
                                        <td class="px-6 py-3">
                                            <div class="text-sm text-gray-800">{{ $plan->maintenanceType?->name }}</div>
                                            <div class="text-xs text-gray-500">Tous les {{ $plan->recurrence_value }} {{ $plan->recurrenceUnit?->name }}</div>
                                        </td>
                                        <td class="px-6 py-3 whitespace-nowrap text-sm">
                                            @php
                                                $isDateOverdue = $plan->next_due_date && $plan->next_due_date->isPast();
                                                $isMileageOverdue = $plan->next_due_mileage && $plan->vehicle?->current_mileage >= $plan->next_due_mileage;
                                                $isUrgent = $plan->next_due_date && !$isDateOverdue && $plan->next_due_date->isBefore(now()->addDays(30));
                                                $overdueClass = 'text-red-600 font-bold';
                                                $urgentClass = 'text-orange-600 font-semibold';
                                                $defaultClass = 'text-gray-600';
                                            @endphp

                                            @if($plan->next_due_date)
                                                <div class="{{ $isDateOverdue ? $overdueClass : ($isUrgent ? $urgentClass : $defaultClass) }}">
                                                    {{ $plan->next_due_date->format('d/m/Y') }}
                                                    @if($isDateOverdue) <span class="text-xs">(Dépassé)</span> @endif
                                                    @if($isUrgent) <span class="text-xs">(Urgent)</span> @endif
                                                </div>
                                            @endif
                                            @if($plan->next_due_mileage)
                                                <div class="text-xs {{ $isMileageOverdue ? $overdueClass : 'text-gray-500' }}">
                                                    (à {{ number_format($plan->next_due_mileage, 0, ',', ' ') }} km)
                                                    @if($isMileageOverdue) <span class="font-bold">(Dépassé)</span> @endif
                                                </div>
                                            @endif
                                        </td>
                                        <td class="px-6 py-3 whitespace-nowrap text-right text-sm font-medium">
                                            <div class="flex items-center justify-end space-x-2">
                                                @can('log maintenance')
                                                    <button type="button" @click="openLogModal({{ $plan->id }})" title="Enregistrer une intervention" class="p-2 rounded-full text-gray-400 hover:bg-green-100 hover:text-green-600">
                                                        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                                        </svg>
                                                    </button>
                                                @endcan
                                                @can('manage maintenance plans')
                                                    <button type="button" @click="openEditModal({{ $plan->id }})" title="Modifier le plan" class="p-2 rounded-full text-gray-400 hover:bg-violet-100 hover:text-violet-600">
                                                        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.536L16.732 3.732z" />
                                                        </svg>
                                                    </button>
                                                @endcan
                                            </div>
                                        </td>
                                    </tr>
                                @empty
                                    <tr>
                                        <td colspan="4" class="px-6 py-4 text-center text-sm text-gray-500">Aucun plan de maintenance trouvé.</td>
                                    </tr>
                                @endforelse
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-6 px-6 pb-6">{{ $plans->withQueryString()->links() }}</div>
                </div>
            </div>
        </div>

        {{-- Modale pour Modifier un Plan --}}
        <div x-show="showEditModal" 
             x-transition:enter="transition ease-out duration-300"
             x-transition:enter-start="opacity-0 transform scale-90"
             x-transition:enter-end="opacity-100 transform scale-100"
             x-transition:leave="transition ease-in duration-200"
             x-transition:leave-start="opacity-100 transform scale-100"
             x-transition:leave-end="opacity-0 transform scale-90"
             class="fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-60" 
             style="display: none;">
            <div @click.away="closeEditModal()" class="bg-white rounded-lg shadow-xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold text-gray-900">
                        Modifier le Plan #<span x-text="planToEdit.id"></span>
                    </h3>
                    <button @click="closeEditModal()" class="text-gray-400 hover:text-gray-600">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>

                {{-- Informations du véhicule --}}
                <div class="mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md">
                    <div class="flex items-center">
                        <svg class="h-5 w-5 text-blue-600 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <div class="text-sm">
                            <span class="font-medium text-blue-900">
                                <span x-text="planToEdit.vehicle?.brand"></span> 
                                <span x-text="planToEdit.vehicle?.model"></span>
                                (<span x-text="planToEdit.vehicle?.registration_plate"></span>)
                            </span>
                            <span class="text-blue-700 ml-2">
                                • Kilométrage actuel : <span x-text="formatMileage(planToEdit.vehicle?.current_mileage)"></span> km
                            </span>
                        </div>
                    </div>
                </div>

                <form x-ref="editForm" :action="editFormUrl" method="POST" class="space-y-4">
                    @csrf
                    @method('PATCH')

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Type de Maintenance</label>
                            <div class="mt-1 p-2 bg-gray-50 rounded-md text-sm text-gray-600">
                                <span x-text="planToEdit.maintenance_type?.name"></span>
                            </div>
                        </div>

                        <div>
                            <label for="edit_recurrence_value" class="block text-sm font-medium text-gray-700">Valeur de Récurrence <span class="text-red-500">*</span></label>
                            <input id="edit_recurrence_value" 
                                   type="number" 
                                   name="recurrence_value" 
                                   x-model="planToEdit.recurrence_value"
                                   min="1" 
                                   required 
                                   class="mt-1 block w-full border-gray-300 focus:border-violet-500 focus:ring-violet-500 rounded-md shadow-sm">
                        </div>

                        <div class="md:col-span-2">
                            <label for="edit_recurrence_unit_id" class="block text-sm font-medium text-gray-700">Unité de Récurrence <span class="text-red-500">*</span></label>
                            <select id="edit_recurrence_unit_id" 
                                    name="recurrence_unit_id" 
                                    x-model="planToEdit.recurrence_unit_id"
                                    @change="updateEditRecurrenceUnitName()"
                                    required 
                                    class="mt-1 block w-full border-gray-300 focus:border-violet-500 focus:ring-violet-500 rounded-md shadow-sm">
                                <option value="">Sélectionner une unité</option>
                                @foreach($recurrenceUnits as $unit)
                                    <option value="{{ $unit->id }}">{{ $unit->name }}</option>
                                @endforeach
                            </select>
                        </div>

                        <div>
                            <label for="edit_next_due_date" class="block text-sm font-medium text-gray-700">Prochaine Échéance (Date)</label>
                            <input id="edit_next_due_date" 
                                   type="date" 
                                   name="next_due_date" 
                                   x-model="planToEdit.next_due_date"
                                   class="mt-1 block w-full border-gray-300 focus:border-violet-500 focus:ring-violet-500 rounded-md shadow-sm">
                        </div>

                        <div>
                            <label for="edit_next_due_mileage" class="block text-sm font-medium text-gray-700">Prochaine Échéance (Kilométrage)</label>
                            <input id="edit_next_due_mileage" 
                                   type="number" 
                                   name="next_due_mileage" 
                                   x-model="planToEdit.next_due_mileage"
                                   min="0" 
                                   class="mt-1 block w-full border-gray-300 focus:border-violet-500 focus:ring-violet-500 rounded-md shadow-sm">
                        </div>
                    </div>

                    <div>
                        <label for="edit_notes" class="block text-sm font-medium text-gray-700">Notes</label>
                        <textarea id="edit_notes" 
                                  name="notes" 
                                  x-model="planToEdit.notes"
                                  rows="3" 
                                  maxlength="2000"
                                  class="mt-1 block w-full border-gray-300 focus:border-violet-500 focus:ring-violet-500 rounded-md shadow-sm"></textarea>
                    </div>

                    <div class="flex justify-end space-x-3 pt-4">
                        <button type="button" @click="closeEditModal()" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                            Annuler
                        </button>
                        <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-violet-600 hover:bg-violet-700">
                            Mettre à jour
                        </button>
                    </div>
                </form>
            </div>
        </div>

        {{-- Modale pour Enregistrer une Intervention --}}
        <div x-show="showLogModal" 
             x-transition:enter="transition ease-out duration-300"
             x-transition:enter-start="opacity-0 transform scale-90"
             x-transition:enter-end="opacity-100 transform scale-100"
             x-transition:leave="transition ease-in duration-200"
             x-transition:leave-start="opacity-100 transform scale-100"
             x-transition:leave-end="opacity-0 transform scale-90"
             class="fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-60" 
             style="display: none;">
            <div @click.away="closeLogModal()" class="bg-white rounded-lg shadow-xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto">
                <div class="sm:flex sm:items-start mb-4">
                    <div class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10">
                        <svg class="h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </div>
                    <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left flex-grow">
                        <h3 class="text-lg font-semibold leading-6 text-gray-900">Enregistrer une Intervention</h3>
                        <div class="mt-2">
                            <p class="text-sm text-gray-600">
                                Intervention de type <strong x-text="planToLog.maintenance_type?.name"></strong> 
                                pour le véhicule <strong x-text="planToLog.vehicle?.registration_plate"></strong>.
                            </p>
                        </div>
                    </div>
                    <button @click="closeLogModal()" class="text-gray-400 hover:text-gray-600">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>

                {{-- Informations du véhicule --}}
                <div class="mb-4 p-3 bg-green-50 border border-green-200 rounded-md">
                    <div class="flex items-center">
                        <svg class="h-5 w-5 text-green-600 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17a2 2 0 11-4 0 2 2 0 014 0zM19 17a2 2 0 11-4 0 2 2 0 014 0z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l2.414 2.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0M15 17a2 2 0 104 0" />
                        </svg>
                        <div class="text-sm">
                            <span class="font-medium text-green-900">
                                <span x-text="planToLog.vehicle?.brand"></span> 
                                <span x-text="planToLog.vehicle?.model"></span>
                                (<span x-text="planToLog.vehicle?.registration_plate"></span>)
                            </span>
                            <span class="text-green-700 ml-2">
                                • Kilométrage actuel : <span x-text="formatMileage(planToLog.vehicle?.current_mileage)"></span> km
                            </span>
                        </div>
                    </div>
                </div>

                <form x-ref="logForm" :action="logFormUrl" method="POST" class="space-y-4">
                    @csrf
                    {{-- Champs cachés pour passer les IDs nécessaires au contrôleur --}}
                    <input type="hidden" name="maintenance_plan_id" x-model="planToLog.id">
                    <input type="hidden" name="vehicle_id" x-model="planToLog.vehicle_id">
                    <input type="hidden" name="maintenance_type_id" x-model="planToLog.maintenance_type_id">

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="performed_on_date" class="block font-medium text-sm text-gray-700">Date de l'intervention <span class="text-red-500">*</span></label>
                            <input id="performed_on_date" 
                                   type="date" 
                                   name="performed_on_date" 
                                   value="{{ now()->format('Y-m-d') }}" 
                                   required 
                                   class="block mt-1 w-full border-gray-300 focus:border-violet-500 focus:ring-violet-500 rounded-md shadow-sm">
                        </div>

                        <div>
                            <label for="performed_at_mileage" class="block font-medium text-sm text-gray-700">Kilométrage lors de l'intervention <span class="text-red-500">*</span></label>
                            <input id="performed_at_mileage" 
                                   type="number" 
                                   name="performed_at_mileage" 
                                   x-model="planToLog.vehicle?.current_mileage"
                                   required 
                                   class="block mt-1 w-full border-gray-300 focus:border-violet-500 focus:ring-violet-500 rounded-md shadow-sm">
                        </div>

                        <div>
                            <label for="cost" class="block font-medium text-sm text-gray-700">Coût (DA)</label>
                            <input id="cost" 
                                   type="number" 
                                   name="cost" 
                                   step="0.01" 
                                   class="block mt-1 w-full border-gray-300 focus:border-violet-500 focus:ring-violet-500 rounded-md shadow-sm">
                        </div>

                        <div>
                            <label for="performed_by" class="block font-medium text-sm text-gray-700">Réalisé par (ex: Garage ABC)</label>
                            <input id="performed_by" 
                                   type="text" 
                                   name="performed_by" 
                                   class="block mt-1 w-full border-gray-300 focus:border-violet-500 focus:ring-violet-500 rounded-md shadow-sm">
                        </div>
                    </div>

                    <div>
                        <label for="details" class="block font-medium text-sm text-gray-700">Détails de l'intervention / Notes</label>
                        <textarea name="details" 
                                  id="details" 
                                  rows="3" 
                                  class="mt-1 block w-full border-gray-300 focus:border-violet-500 focus:ring-violet-500 rounded-md shadow-sm"></textarea>
                    </div>

                    <div class="flex justify-end space-x-3 pt-4">
                        <button type="button" @click="closeLogModal()" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                            Annuler
                        </button>
                        <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700">
                            Enregistrer l'Intervention
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</x-app-layout>

--- FIN DU FICHIER : ./resources/views/admin/maintenance/plans/index.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/organizations/create.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header"><h2 class="font-semibold text-xl text-gray-800 leading-tight">Créer une Nouvelle Organisation</h2></x-slot>
    <div class="py-12">
        <div class="max-w-4xl mx-auto sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-8 text-gray-900">
                    <form method="POST" action="{{ route('admin.organizations.store') }}">
                        @csrf
                        <div class="space-y-6">
                            <div>
                                <label for="name">Nom de l'Organisation <span class="text-red-500">*</span></label>
                                <x-text-input id="name" name="name" :value="old('name')" required class="mt-1 block w-full" />
                                <x-input-error :messages="$errors->get('name')" class="mt-2" />
                            </div>
                            {{-- (Ajoutez ici d'autres champs comme address, contact_email, status si nécessaire) --}}
                        </div>
                        <div class="mt-8 flex items-center justify-end gap-4">
                            <a href="{{ route('admin.organizations.index') }}" class="text-sm ...">Annuler</a>
                            <button type="submit" class="... bg-violet-600 ...">Enregistrer</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</x-app-layout>

--- FIN DU FICHIER : ./resources/views/admin/organizations/create.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/organizations/edit.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header"><h2 class="font-semibold text-xl text-gray-800 leading-tight">Modifier : {{ $organization->name }}</h2></x-slot>
    <div class="py-12">
        <div class="max-w-4xl mx-auto sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-8 text-gray-900">
                    <form method="POST" action="{{ route('admin.organizations.update', $organization) }}">
                        @csrf
                        @method('PUT')
                        <div class="space-y-6">
                            <div>
                                <label for="name">Nom de l'Organisation <span class="text-red-500">*</span></label>
                                <x-text-input id="name" name="name" :value="old('name', $organization->name)" required class="mt-1 block w-full" />
                                <x-input-error :messages="$errors->get('name')" class="mt-2" />
                            </div>
                        </div>
                        <div class="mt-8 flex items-center justify-end gap-4">
                            <a href="{{ route('admin.organizations.index') }}" class="text-sm ...">Annuler</a>
                            <button type="submit" class="... bg-violet-600 ...">Enregistrer les Modifications</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</x-app-layout>

--- FIN DU FICHIER : ./resources/views/admin/organizations/edit.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/organizations/index.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            {{ __('Gestion des Organisations') }}
        </h2>
    </x-slot>

    <div x-data="{ showConfirmModal: false, deleteFormUrl: '' }" class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
            @if (session('success'))
                <div class="mb-4 bg-green-100 border-l-4 border-green-500 text-green-700 p-4" role="alert"><p class="font-bold">{{ session('success') }}</p></div>
            @endif
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-6 text-gray-900">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold text-gray-700">Toutes les Organisations</h3>
                        @can('create organizations')
                            <a href="{{ route('admin.organizations.create') }}" class="inline-flex items-center px-4 py-2 bg-violet-600 ...">Ajouter</a>
                        @endcan
                    </div>
                    <div class="overflow-x-auto border border-gray-200 rounded-lg">
                        <table class="w-full divide-y divide-gray-200">
                            <thead class="bg-gray-100">
                                <tr>
                                    <th class="px-6 py-3 text-left ...">Nom de l'Organisation</th>
                                    <th class="px-6 py-3 text-left ...">Statut</th>
                                    <th class="px-6 py-3 text-left ...">Utilisateurs</th>
                                    <th class="px-6 py-3 text-right ...">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                @forelse ($organizations as $organization)
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 ...">{{ $organization->name }}</td>
                                        <td class="px-6 py-4 ...">{{ $organization->status }}</td>
                                        <td class="px-6 py-4 ...">{{ $organization->users_count }}</td>
                                        <td class="px-6 py-4 text-right">
                                            <div class="flex items-center justify-end space-x-2">
                                                <a href="{{ route('admin.organizations.edit', $organization) }}" title="Modifier" class="p-2 ..."><svg></svg></a>
                                                <button @click="showConfirmModal = true; deleteFormUrl = '{{ route('admin.organizations.destroy', $organization) }}'" title="Supprimer" class="p-2 ..."><svg></svg></button>
                                            </div>
                                        </td>
                                    </tr>
                                @empty
                                    <tr><td colspan="4" class="px-6 py-4 text-center ...">Aucune organisation trouvée.</td></tr>
                                @endforelse
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        {{-- Modale de confirmation de suppression --}}
    </div>
</x-app-layout>

--- FIN DU FICHIER : ./resources/views/admin/organizations/index.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/planning/index.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            {{ __('Planning des Affectations') }}
        </h2>
    </x-slot>

    <div class="py-12" x-data="planningGantt()">
        <div class="max-w-full mx-auto sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-4 sm:p-6 border-b border-gray-200">
                    <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                        <!-- Left Controls -->
                        <div class="flex items-center gap-2">
                            <form action="{{ route('admin.planning.index') }}" method="GET" class="relative">
                                <input type="hidden" name="view_mode" :value="viewMode">
                                <input type="hidden" name="date" :value="baseDate">
                                <x-lucide-search class="absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400" />
                                <input type="text" name="search" value="{{ $filters['search'] ?? '' }}" placeholder="Rechercher un actif ou un chauffeur..." class="pl-10 pr-4 py-2 w-64 border-gray-300 focus:border-primary-500 focus:ring-primary-500 rounded-md shadow-sm text-sm">
                            </form>
                            <button @click="showFilterPanel = true" class="inline-flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                                <x-lucide-sliders-horizontal class="h-5 w-5" />
                                <span>Filtres</span>
                            </button>
                        </div>

                        <!-- Center Controls -->
                        <div class="flex items-center gap-2 text-lg font-semibold text-gray-800">
                            <button @click="previousPeriod()" class="p-2 rounded-md hover:bg-gray-100"><x-lucide-chevron-left class="h-6 w-6" /></button>
                            <h3 class="w-48 text-center">
                                @if($viewMode === 'month') {{ $baseDate->isoFormat('MMMM YYYY') }}
                                @elseif($viewMode === 'week') {{ $dateRange['start']->isoFormat('D MMM') }} - {{ $dateRange['end']->isoFormat('D MMM, YYYY') }}
                                @elseif($viewMode === 'day') {{ $baseDate->isoFormat('D MMMM YYYY') }}
                                @else {{ $baseDate->isoFormat('YYYY') }}
                                @endif
                            </h3>
                            <button @click="nextPeriod()" class="p-2 rounded-md hover:bg-gray-100"><x-lucide-chevron-right class="h-6 w-6" /></button>
                        </div>

                        <!-- Right Controls -->
                        <div class="flex items-center gap-2">
                            <button @click="goToday()" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">Aujourd'hui</button>
                            <div class="relative" x-data="{ open: false }">
                                <button @click="open = !open" class="inline-flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                                    <span class="capitalize">{{ $viewMode }}</span>
                                    <x-lucide-chevron-down class="h-5 w-5" />
                                </button>
                                <div x-show="open" @click.away="open = false" class="absolute right-0 mt-2 w-32 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-20">
                                    <div class="py-1">
                                        <a href="#" @click.prevent="changeView('day')" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Jour</a>
                                        <a href="#" @click.prevent="changeView('week')" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Semaine</a>
                                        <a href="#" @click.prevent="changeView('month')" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Mois</a>
                                        <a href="#" @click.prevent="changeView('year')" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Année</a>
                                    </div>
                                </div>
                            </div>
                            <div class="p-1 bg-gray-200 rounded-lg flex items-center">
                                <button @click="activeView = 'gantt'" :class="activeView === 'gantt' ? 'bg-white shadow' : ''" class="p-1.5 rounded-md text-gray-600 hover:bg-white"><x-lucide-layout-grid class="h-5 w-5" /></button>
                                <button @click="activeView = 'table'" :class="activeView === 'table' ? 'bg-white shadow' : ''" class="p-1.5 rounded-md text-gray-600 hover:bg-white"><x-lucide-list class="h-5 w-5" /></button>
                            </div>
                            <button @click="openNewModal()" class="inline-flex items-center gap-2 px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700">
                                <x-lucide-plus class="h-5 w-5" />
                                <span>Ajouter une Affectation</span>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="p-6 text-gray-900 space-y-6" x-show="activeView === 'gantt'">
                    @php
                        if ($viewMode === 'day') {
                            $period = \Carbon\CarbonPeriod::create($dateRange['start'], '1 hour', $dateRange['end']);
                            $totalUnits = 24;
                        } else {
                            $period = \Carbon\CarbonPeriod::create($dateRange['start'], $dateRange['end']);
                            $totalUnits = $dateRange['start']->diffInDays($dateRange['end']) + 1;
                        }
                        $today = \Carbon\Carbon::today();
                    @endphp

                    {{-- Grille GANTT --}}
                    <div class="overflow-x-auto border border-gray-200 rounded-lg bg-white">
                        <div class="grid" style="grid-template-columns: minmax(250px, 1.5fr) repeat({{ $totalUnits }}, minmax(60px, 1fr));">

                            {{-- En-tête de Colonne Asset --}}
                            <div class="sticky left-0 z-20 bg-gray-100 border-b border-r border-gray-200 p-2 flex items-center justify-between">
                                <span class="font-semibold text-gray-600 text-sm">Asset</span>
                                <button @click="toggleSort('alpha_asc')" class="inline-flex items-center gap-1 text-xs font-medium text-gray-500 hover:text-gray-800" :class="{'text-primary-600': filters.sort === 'alpha_asc'}">
                                    A-Z
                                    <x-lucide-arrow-down-a-z class="h-4 w-4" />
                                </button>
                            </div>

                            {{-- En-têtes des Jours/Heures --}}
                            @foreach ($period as $date)
                                <div class="border-b border-r border-gray-200 p-2 text-center {{ $date->isSameDay($today) ? 'bg-primary-50' : 'bg-gray-50' }}">
                                    @if($viewMode === 'day')
                                        <div class="font-bold text-xs uppercase text-gray-500">{{ $date->format('H:i') }}</div>
                                    @else
                                        <div class="font-bold text-xs uppercase text-gray-500">{{ $date->isoFormat('ddd') }}</div>
                                        <div class="text-lg font-semibold {{ $date->isSameDay($today) ? 'text-primary-600' : 'text-gray-800' }}">{{ $date->format('j') }}</div>
                                    @endif
                                </div>
                            @endforeach

                            {{-- Lignes des Véhicules --}}
                            @forelse ($vehicles as $vehicle)
                                <div class="sticky left-0 z-10 bg-white border-b border-r border-gray-200 p-2 flex items-center gap-3">
                                    <img src="{{ $vehicle->photo_path ? asset('storage/' . $vehicle->photo_path) : 'https://ui-avatars.com/api/?name=' . urlencode($vehicle->brand) . '&color=7F9CF5&background=EBF4FF' }}" alt="Photo of {{ $vehicle->brand }}" class="h-10 w-10 rounded-md object-cover">
                                    <div class="flex-grow">
                                        <p class="font-bold text-sm text-gray-800 flex items-center">
                                            <span class="mr-2 w-2 h-2 rounded-full {{ match($vehicle->vehicleStatus->name ?? 'default') { 'Parking' => 'bg-blue-500', 'En mission' => 'bg-green-500', 'En maintenance' => 'bg-orange-500', 'Hors service' => 'bg-red-500', default => 'bg-gray-400' } }}"></span>
                                            {{ $vehicle->brand }} {{ $vehicle->model }}
                                        </p>
                                        <p class="text-xs text-gray-500">
                                            {{ $vehicle->vehicleStatus->name ?? 'N/A' }} &bull; {{ $vehicle->vehicleType->name ?? 'N/A' }}
                                        </p>
                                    </div>
                                </div>

                                <div x-ref="gridRow_{{ $vehicle->id }}" data-vehicle-id="{{ $vehicle->id }}" class="col-span-{{ $totalUnits }} grid relative" style="grid-template-columns: repeat({{ $totalUnits }}, minmax(60px, 1fr));">
                                    {{-- Ligne de fond de la grille --}}
                                    @foreach ($period as $index => $date)
                                        <div class="border-r border-b border-gray-200 {{ $date->isSameDay($today) ? 'bg-primary-50/50' : '' }}" data-date-index="{{ $index }}"></div>
                                    @endforeach

                                    {{-- Barres d'affectation --}}
                                    @foreach ($vehicle->assignments as $assignment)
                                        @php
                                            $start = \Carbon\Carbon::parse($assignment->start_datetime);
                                            $isOngoing = is_null($assignment->end_datetime);
                                            // Si pas de date de fin, on la fait courir jusqu'à la fin de la période visible pour le calcul
                                            $end = $isOngoing ? $dateRange['end']->copy()->endOfDay() : \Carbon\Carbon::parse($assignment->end_datetime);

                                            // On ne processe que les affectations visibles dans la période
                                            if ($end->isBefore($dateRange['start']) || $start->isAfter($dateRange['end'])) {
                                                continue;
                                            }

                                            $viewStart = $dateRange['start']->copy()->startOfDay();
                                            $viewEnd = $dateRange['end']->copy()->endOfDay();
                                            $totalMinutesInView = $viewStart->diffInMinutes($viewEnd);

                                            // On s'assure que les barres ne dépassent pas de la vue
                                            $barStart = $start->max($viewStart);
                                            $barEnd = $end->min($viewEnd);

                                            $startOffsetMinutes = $viewStart->diffInMinutes($barStart);
                                            $durationMinutes = $barStart->diffInMinutes($barEnd);

                                            // Sécurité pour éviter les divisions par zéro ou les durées négatives
                                            if ($totalMinutesInView <= 0 || $durationMinutes <= 0) {
                                                continue;
                                            }

                                            $leftPercentage = ($startOffsetMinutes / $totalMinutesInView) * 100;
                                            $widthPercentage = ($durationMinutes / $totalMinutesInView) * 100;
                                        @endphp

                                        <div id="assignment_{{ $assignment->id }}"
                                             data-assignment-id="{{ $assignment->id }}"
                                             data-duration-minutes="{{ $start->diffInMinutes($end) }}"
                                             @click="openEditModal({{ $assignment->id }})"
                                             class="absolute h-full p-1 z-10"
                                             style="left: {{ $leftPercentage }}%; width: {{ $widthPercentage }}%;">
                                            <div @class([
                                                    'relative h-full w-full border-l-4 border-blue-600 rounded-md shadow-sm text-blue-900 text-xs flex flex-col justify-center px-2 truncate cursor-pointer hover:ring-2 hover:ring-blue-500',
                                                    'bg-blue-200' => !$isOngoing,
                                                    'ongoing-assignment-bar' => $isOngoing,
                                                ])>
                                                <p class="font-bold truncate">{{ $assignment->driver->full_name ?? 'N/A' }}</p>
                                                <p class="font-normal">
                                                    {{ $start->format('H:i') }}
                                                    @if (!$isOngoing)
                                                        - {{ $end->format('H:i') }}
                                                    @else
                                                        - No end date
                                                    @endif
                                                </p>
                                            </div>
                                        </div>
                                    @endforeach
                                </div>
                            @empty
                                <div class="col-span-{{ $totalUnits + 1 }} text-center py-12 text-gray-500">
                                    Aucun véhicule trouvé pour les filtres sélectionnés.
                                </div>
                            @endforelse
                        </div>
                    </div>
                     <div class="mt-4">
                        {{ $vehicles->withQueryString()->links() }}
                    </div>
                </div>
            </div>
        </div>
    </div>

        {{-- Placeholders for Modals and Side Panels --}}
        <div x-show="showFilterPanel" @click.away="showFilterPanel = false" class="fixed inset-0 z-40 bg-gray-900 bg-opacity-50" x-transition>
            <div class="absolute top-0 right-0 h-full bg-white w-96 p-6 shadow-lg">
                <h3 class="text-lg font-semibold mb-4">Filtres Avancés</h3>
                <p class="text-gray-600">Les options de filtre seront ici.</p>
            </div>
        </div>

        <div x-show="showAssignmentModal" class="fixed inset-0 z-40 flex items-center justify-center bg-gray-900 bg-opacity-50" x-transition>
            <div @click.away="showAssignmentModal = false" class="bg-white rounded-lg shadow-xl p-6 w-full max-w-2xl">
                 <h3 class="text-xl font-semibold text-gray-800 mb-4" x-text="modalTitle"></h3>
                 <p class="text-gray-600">Le formulaire de création/édition d'affectation sera ici.</p>
                 <div class="mt-6 flex justify-end">
                     <button @click="showAssignmentModal = false" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50">Annuler</button>
                 </div>
            </div>
        </div>
    </div>

    @push('scripts')
    <script>
        function planningGantt() {
            return {
                viewMode: @json($viewMode),
                activeView: 'gantt', // or 'table'
                baseDate: @json($baseDate->toDateString()),
                filters: @json($filters),
                showFilterPanel: false,
                showAssignmentModal: false,
                modalTitle: '',

                init() {
                    console.log('Planning component initialized.');
                    this.initSortable();
                },

                initSortable() {
                    this.$nextTick(() => {
                        const ganttRows = this.$el.querySelectorAll('[x-ref^="gridRow_"]');
                        ganttRows.forEach(row => {
                            new Sortable(row, {
                                group: 'gantt-assignments',
                                animation: 150,
                                onEnd: (evt) => {
                                    const item = evt.item;
                                    const toRow = evt.to;
                                    const assignmentId = item.dataset.assignmentId;
                                    const newVehicleId = toRow.dataset.vehicleId;

                                    const ganttStartDate = new Date(this.baseDate);
                                    const totalWidth = toRow.offsetWidth;
                                    const leftPosition = item.offsetLeft;

                                    const totalMinutesInView = (new Date('{{ $dateRange['end']->toDateTimeString() }}') - new Date('{{ $dateRange['start']->toDateTimeString() }}')) / 60000;
                                    const minutesOffset = (leftPosition / totalWidth) * totalMinutesInView;

                                    let newStartDate = new Date('{{ $dateRange['start']->toDateTimeString() }}');
                                    newStartDate.setMinutes(newStartDate.getMinutes() + minutesOffset);

                                    let durationMinutes = parseInt(item.dataset.durationMinutes, 10);
                                    let newEndDate = new Date(newStartDate.getTime() + durationMinutes * 60000);

                                    this.updateAssignment(assignmentId, newVehicleId, newStartDate, newEndDate);
                                }
                            });
                        });
                    });
                },

                updateAssignment(id, vehicleId, startDate, endDate) {
                    const data = {
                        vehicle_id: vehicleId,
                        start_datetime: startDate.toISOString().slice(0, 19).replace('T', ' '),
                        end_datetime: endDate.toISOString().slice(0, 19).replace('T', ' '),
                        _token: '{{ csrf_token() }}'
                    };

                    fetch(`/api/admin/assignments/${id}/move`, {
                        method: 'PATCH',
                        headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
                        body: JSON.stringify(data)
                    })
                    .then(async response => {
                        if (!response.ok) {
                            const errorData = await response.json();
                            throw new Error(errorData.message || `Erreur ${response.status}`);
                        }
                        return response.json();
                    })
                    .then(data => {
                        console.log('Assignment updated:', data);
                        window.dispatchEvent(new CustomEvent('toast', { detail: { type: 'success', message: 'Affectation mise à jour !' } }));
                    })
                    .catch(error => {
                        console.error('Error updating assignment:', error);
                        window.dispatchEvent(new CustomEvent('toast', { detail: { type: 'error', message: error.message } }));
                        // We reload to revert the visual change on failure
                        setTimeout(() => window.location.reload(), 1500);
                    });
                },

                openNewModal() {
                    this.modalTitle = 'Ajouter une Affectation';
                    // Here you would typically clear any form data
                    this.showAssignmentModal = true;
                },

                async openEditModal(assignmentId) {
                    this.modalTitle = 'Modifier l\'Affectation';
                    // Here you would fetch assignment data from the API
                    // For now, we just open the modal
                    console.log('Fetching data for assignment', assignmentId);
                    this.showAssignmentModal = true;
                },

                toggleSort(type) {
                    let newSort = this.filters.sort === type ? '' : type;
                    const url = new URL(window.location.href);
                    if (newSort) {
                        url.searchParams.set('sort', newSort);
                    } else {
                        url.searchParams.delete('sort');
                    }
                    window.location.href = url.toString();
                },

                navigateTo(newDate) {
                    const url = new URL(window.location.href);
                    url.searchParams.set('date', newDate);
                    url.searchParams.set('view_mode', this.viewMode);
                    // Persist search filters
                    for (const key in this.filters) {
                        if (this.filters[key]) {
                            url.searchParams.set(key, this.filters[key]);
                        }
                    }
                    window.location.href = url.toString();
                },

                changeView(mode) {
                    this.viewMode = mode;
                    const url = new URL(window.location.href);
                    url.searchParams.set('view_mode', this.viewMode);
                    url.searchParams.delete('date'); // Reset date to today
                    window.location.href = url.toString();
                },

                goToday() {
                    const url = new URL(window.location.href);
                    url.searchParams.delete('date');
                    url.searchParams.set('view_mode', this.viewMode);
                    window.location.href = url.toString();
                },

                previousPeriod() {
                    let newDate = new Date(this.baseDate);
                    if (this.viewMode === 'week') newDate.setDate(newDate.getDate() - 7);
                    else if (this.viewMode === 'month') newDate.setMonth(newDate.getMonth() - 1);
                    else if (this.viewMode === 'year') newDate.setFullYear(newDate.getFullYear() - 1);
                    else if (this.viewMode === 'day') newDate.setDate(newDate.getDate() - 1);
                    this.navigateTo(newDate.toISOString().split('T')[0]);
                },

                nextPeriod() {
                    let newDate = new Date(this.baseDate);
                    if (this.viewMode === 'week') newDate.setDate(newDate.getDate() + 7);
                    else if (this.viewMode === 'month') newDate.setMonth(newDate.getMonth() + 1);
                    else if (this.viewMode === 'year') newDate.setFullYear(newDate.getFullYear() + 1);
                    else if (this.viewMode === 'day') newDate.setDate(newDate.getDate() + 1);
                    this.navigateTo(newDate.toISOString().split('T')[0]);
                }
            }
        }
    </script>
    @endpush
</x-app-layout>
--- FIN DU FICHIER : ./resources/views/admin/planning/index.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/roles/edit.blade.php
////////////////////////////////////////////////////////////////

{{-- resources/views/admin/roles/edit.blade.php --}}
<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            {{ __('Modifier le Rôle :') }} <span class="text-violet-700">{{ $role->name }}</span>
        </h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-4xl mx-auto sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-8 text-gray-900">
                    <h3 class="text-xl font-semibold text-gray-700 mb-6">{{ __('Assigner les Permissions') }}</h3>

                    <form method="POST" action="{{ route('admin.roles.update', $role) }}">
                        @csrf
                        @method('PUT')

                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            @forelse ($permissions as $permission)
                                <div class="flex items-center p-2 border rounded-md">
                                    <input type="checkbox"
                                           name="permissions[]"
                                           id="permission_{{ $permission->id }}"
                                           value="{{ $permission->id }}"
                                           class="h-4 w-4 rounded border-gray-300 text-violet-600 focus:ring-violet-500"
                                           @if($role->hasPermissionTo($permission)) checked @endif>
                                    <label for="permission_{{ $permission->id }}" class="ml-3 block text-sm font-medium text-gray-700">
                                        {{ $permission->name }}
                                    </label>
                                </div>
                            @empty
                                <p class="text-gray-500">Aucune permission trouvée. Veuillez exécuter le seeder.</p>
                            @endforelse
                        </div>

                        <div class="mt-8 flex items-center justify-end gap-4">
                            <a href="{{ route('admin.roles.index') }}" class="inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150">
                                {{ __('Annuler') }}
                            </a>

                            <button type="submit" class="inline-flex items-center px-4 py-2 bg-violet-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-violet-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500 transition ease-in-out duration-150">
                                {{ __('Mettre à jour les Permissions') }}
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</x-app-layout>

--- FIN DU FICHIER : ./resources/views/admin/roles/edit.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/roles/index.blade.php
////////////////////////////////////////////////////////////////

{{-- resources/views/admin/roles/index.blade.php --}}
<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            {{ __('Administration - Gestion des Rôles') }}
        </h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
            @if (session('success'))
                <div class="mb-4 bg-green-100 border-l-4 border-green-500 text-green-700 p-4" role="alert">
                    <p class="font-bold">{{ session('success') }}</p>
                </div>
            @endif

            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-6 text-gray-900">
                    <h3 class="text-xl font-semibold text-gray-700 mb-6">{{ __('Liste des Rôles') }}</h3>
                    <div class="overflow-x-auto border border-gray-200 rounded-lg">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-100">
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">ID</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Nom du Rôle</th>
                                    <th scope="col" class="relative px-6 py-3"><span class="sr-only">Actions</span></th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                @foreach ($roles as $role)
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{ $role->id }}</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">{{ $role->name }}</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                            <a href="{{ route('admin.roles.edit', $role) }}" class="text-violet-600 hover:text-violet-900">Gérer les Permissions</a>
                                        </td>
                                    </tr>
                                @endforeach
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</x-app-layout>

--- FIN DU FICHIER : ./resources/views/admin/roles/index.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/suppliers/create.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">{{ __('Ajouter un Fournisseur') }}</h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-4xl mx-auto sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-8 text-gray-900" x-data="supplierForm()">
                    <!-- MODAL POUR AJOUTER UNE CATÉGORIE -->
                    <div x-show="showCategoryModal" 
                         class="fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50" 
                         @click.away="showCategoryModal = false"
                         style="display: none;">

                        <div class="bg-white p-8 rounded-lg shadow-xl w-full max-w-md" @click.stop>
                            {{-- Le reste du contenu de votre modale est déjà parfait --}}
                            <h4 class="text-lg font-semibold mb-4">Ajouter une Catégorie</h4>
                            <form @submit.prevent="submitCategory">
                                <div>
                                    <x-input-label for="new_category_name" value="Nom de la catégorie" required />
                                    <x-text-input id="new_category_name" x-model="newCategoryName" class="mt-1 block w-full" />
                                    <span x-show="categoryError" x-text="categoryError" class="text-sm text-red-600 mt-2"></span>
                                </div>
                                <div class="mt-6 flex justify-end gap-4">
                                    <x-secondary-button @click.prevent="showCategoryModal = false">Annuler</x-secondary-button>
                                    <x-primary-button type="submit">Enregistrer</x-primary-button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <form method="POST" action="{{ route('admin.suppliers.store') }}">
                        @csrf
                        <fieldset class="border border-gray-200 p-6 rounded-lg">
                            <legend class="text-lg font-semibold text-gray-800 px-2">Informations sur le Fournisseur</legend>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                                <div class="md:col-span-2">
                                    <x-input-label for="name" value="Nom du Fournisseur" required />
                                    <x-text-input id="name" name="name" :value="old('name')" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('name')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="contact_name" value="Nom du Contact" />
                                    <x-text-input id="contact_name" name="contact_name" :value="old('contact_name')" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('contact_name')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="phone" value="Téléphone" />
                                    <x-text-input id="phone" name="phone" :value="old('phone')" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('phone')" class="mt-2" />
                                </div>
                                <div class="md:col-span-2">
                                    <x-input-label for="email" value="Email" />
                                    <x-text-input id="email" name="email" type="email" :value="old('email')" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('email')" class="mt-2" />
                                </div>
                                <div class="md:col-span-2">
                                    <x-input-label for="address" value="Adresse" />
                                    <textarea id="address" name="address" rows="3" class="block mt-1 w-full border-gray-300 focus:border-primary-500 focus:ring-primary-500 rounded-md shadow-sm">{{ old('address') }}</textarea>
                                    <x-input-error :messages="$errors->get('address')" class="mt-2" />
                                </div>
                                <div class="md:col-span-2">
                                    <x-input-label for="supplier_category_id" value="Catégorie" />
                                    <div class="flex items-center gap-2 mt-1">
                                        <select x-ref="categorySelect" name="supplier_category_id" id="supplier_category_id" class="flex-grow">
                                            <option value="">Aucune</option>
                                            @foreach($categories as $category)
                                            <option value="{{ $category->id }}" @selected(old('supplier_category_id')==$category->id)>{{ $category->name }}</option>
                                            @endforeach
                                        </select>
                                        <x-primary-button type="button" @click.prevent="showCategoryModal = true" title="Ajouter une catégorie">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                                <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" />
                                            </svg>
                                        </x-primary-button>
                                    </div>
                                    <x-input-error :messages="$errors->get('supplier_category_id')" class="mt-2" />
                                </div>
                            </div>
                        </fieldset>

                        <div class="mt-8 pt-6 border-t border-gray-200 flex items-center justify-end gap-4">
                            <a href="{{ route('admin.suppliers.index') }}" class="text-sm font-semibold text-gray-600 hover:text-gray-900">Annuler</a>
                            <x-primary-button type="submit">
                                Enregistrer le Fournisseur
                            </x-primary-button>
                        </div>
                    </form>
                </div>

                @push('scripts')
                <script>
                    function supplierForm() {
                        return {
                            showCategoryModal: false,
                            newCategoryName: '',
                            categoryError: '',
                            tomSelect: null,

                            init() {
                                this.tomSelect = new TomSelect(this.$refs.categorySelect, {
                                    create: false,
                                    placeholder: 'Sélectionnez une catégorie...'
                                });

                                // Pour la synchronisation si la valeur old() est présente
                                const selectedValue = this.$refs.categorySelect.value;
                                if (selectedValue) {
                                    this.tomSelect.setValue(selectedValue);
                                }
                            },

                            async submitCategory() {
                                this.categoryError = '';
                                if (!this.newCategoryName.trim()) {
                                    this.categoryError = "Le nom de la catégorie ne peut pas être vide.";
                                    return;
                                }

                                try {
                                    const response = await fetch('{{ route('admin.supplier-categories.store') }}', {
                                        method: 'POST',
                                        headers: {
                                            'Content-Type': 'application/json',
                                            'X-CSRF-TOKEN': document.querySelector('meta[name="csrf-token"]').getAttribute('content'),
                                            'Accept': 'application/json'
                                        },
                                        body: JSON.stringify({
                                            name: this.newCategoryName
                                        })
                                    });

                                    const result = await response.json();

                                    if (response.ok && result.success) {
                                        const newCategory = result.category;
                                        this.tomSelect.addOption({
                                            value: newCategory.id,
                                            text: newCategory.name
                                        });
                                        this.tomSelect.setValue(newCategory.id); // Sélectionne la nouvelle catégorie

                                        this.showCategoryModal = false;
                                        this.newCategoryName = '';

                                        // Afficher un toast/notification de succès
                                        window.dispatchEvent(new CustomEvent('toast-message', {
                                            detail: {
                                                message: 'Catégorie ajoutée avec succès !',
                                                type: 'success'
                                            }
                                        }));

                                    } else {
                                        this.categoryError = result.message || 'Une erreur est survenue.';
                                        if (result.errors && result.errors.name) {
                                            this.categoryError = result.errors.name[0];
                                        }
                                    }
                                } catch (error) {
                                    console.error('Erreur:', error);
                                    this.categoryError = 'Une erreur réseau est survenue.';
                                }
                            }
                        }
                    }
                </script>
                @endpush
            </div>
        </div>
    </div>
</x-app-layout>
--- FIN DU FICHIER : ./resources/views/admin/suppliers/create.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/suppliers/edit.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">{{ __('Modifier : ') . $supplier->name }}</h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-4xl mx-auto sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-8 text-gray-900" x-data="supplierForm()">
                    <!-- MODAL POUR AJOUTER UNE CATÉGORIE -->
                    <div x-show="showCategoryModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" @click.away="showCategoryModal = false">
                        <div class="bg-white p-8 rounded-lg shadow-xl w-full max-w-md" @click.stop>
                            <h4 class="text-lg font-semibold mb-4">Ajouter une Catégorie</h4>
                            <form @submit.prevent="submitCategory">
                                <div>
                                    <x-input-label for="new_category_name" value="Nom de la catégorie" required />
                                    <x-text-input id="new_category_name" x-model="newCategoryName" class="mt-1 block w-full" />
                                    <span x-show="categoryError" x-text="categoryError" class="text-sm text-red-600 mt-2"></span>
                                </div>
                                <div class="mt-6 flex justify-end gap-4">
                                    <x-secondary-button @click.prevent="showCategoryModal = false">Annuler</x-secondary-button>
                                    <x-primary-button type="submit">Enregistrer</x-primary-button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <form method="POST" action="{{ route('admin.suppliers.update', $supplier) }}">
                        @csrf
                        @method('PUT')
                        <fieldset class="border border-gray-200 p-6 rounded-lg">
                            <legend class="text-lg font-semibold text-gray-800 px-2">Informations sur le Fournisseur</legend>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                                <div class="md:col-span-2">
                                    <x-input-label for="name" value="Nom du Fournisseur" required />
                                    <x-text-input id="name" name="name" :value="old('name', $supplier->name)" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('name')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="contact_name" value="Nom du Contact" />
                                    <x-text-input id="contact_name" name="contact_name" :value="old('contact_name', $supplier->contact_name)" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('contact_name')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="phone" value="Téléphone" />
                                    <x-text-input id="phone" name="phone" :value="old('phone', $supplier->phone)" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('phone')" class="mt-2" />
                                </div>
                                <div class="md:col-span-2">
                                    <x-input-label for="email" value="Email" />
                                    <x-text-input id="email" name="email" type="email" :value="old('email', $supplier->email)" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('email')" class="mt-2" />
                                </div>
                                <div class="md:col-span-2">
                                    <x-input-label for="address" value="Adresse" />
                                    <textarea id="address" name="address" rows="3" class="block mt-1 w-full border-gray-300 focus:border-primary-500 focus:ring-primary-500 rounded-md shadow-sm">{{ old('address', $supplier->address) }}</textarea>
                                    <x-input-error :messages="$errors->get('address')" class="mt-2" />
                                </div>
                                <div class="md:col-span-2">
                                    <x-input-label for="supplier_category_id" value="Catégorie" />
                                    <div class="flex items-center gap-2 mt-1">
                                        <select x-ref="categorySelect" name="supplier_category_id" id="supplier_category_id" class="flex-grow">
                                            <option value="">Aucune</option>
                                            @foreach($categories as $category)
                                            <option value="{{ $category->id }}" @selected(old('supplier_category_id', $supplier->supplier_category_id) == $category->id)>{{ $category->name }}</option>
                                            @endforeach
                                        </select>
                                        <x-primary-button type="button" @click.prevent="showCategoryModal = true" title="Ajouter une catégorie">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                                <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" />
                                            </svg>
                                        </x-primary-button>
                                    </div>
                                    <x-input-error :messages="$errors->get('supplier_category_id')" class="mt-2" />
                                </div>
                            </div>
                        </fieldset>

                        <div class="mt-8 pt-6 border-t border-gray-200 flex items-center justify-end gap-4">
                            <a href="{{ route('admin.suppliers.index') }}" class="text-sm font-semibold text-gray-600 hover:text-gray-900">Annuler</a>
                            <x-primary-button type="submit">
                                Enregistrer les Modifications
                            </x-primary-button>
                        </div>
                    </form>
                </div>

                @push('scripts')
                <script>
                    function supplierForm() {
                        return {
                            showCategoryModal: false,
                            newCategoryName: '',
                            categoryError: '',
                            tomSelect: null,

                            init() {
                                this.tomSelect = new TomSelect(this.$refs.categorySelect, {
                                    create: false,
                                    placeholder: 'Sélectionnez une catégorie...'
                                });

                                const selectedValue = '{{ old('supplier_category_id', $supplier->supplier_category_id) }}';
                                if (selectedValue) {
                                    this.tomSelect.setValue(selectedValue);
                                }
                            },

                            async submitCategory() {
                                this.categoryError = '';
                                if (!this.newCategoryName.trim()) {
                                    this.categoryError = "Le nom de la catégorie ne peut pas être vide.";
                                    return;
                                }

                                try {
                                    const response = await fetch('{{ route('admin.supplier-categories.store') }}', {
                                        method: 'POST',
                                        headers: {
                                            'Content-Type': 'application/json',
                                            'X-CSRF-TOKEN': document.querySelector('meta[name="csrf-token"]').getAttribute('content'),
                                            'Accept': 'application/json'
                                        },
                                        body: JSON.stringify({
                                            name: this.newCategoryName
                                        })
                                    });

                                    const result = await response.json();

                                    if (response.ok && result.success) {
                                        const newCategory = result.category;
                                        this.tomSelect.addOption({
                                            value: newCategory.id,
                                            text: newCategory.name
                                        });
                                        this.tomSelect.setValue(newCategory.id);

                                        this.showCategoryModal = false;
                                        this.newCategoryName = '';

                                        window.dispatchEvent(new CustomEvent('toast-message', {
                                            detail: {
                                                message: 'Catégorie ajoutée avec succès !',
                                                type: 'success'
                                            }
                                        }));

                                    } else {
                                        this.categoryError = result.message || 'Une erreur est survenue.';
                                        if (result.errors && result.errors.name) {
                                            this.categoryError = result.errors.name[0];
                                        }
                                    }
                                } catch (error) {
                                    console.error('Erreur:', error);
                                    this.categoryError = 'Une erreur réseau est survenue.';
                                }
                            }
                        }
                    }
                </script>
                @endpush
            </div>
        </div>
    </div>
</x-app-layout>
--- FIN DU FICHIER : ./resources/views/admin/suppliers/edit.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/suppliers/index.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            {{ __('Gestion des Fournisseurs') }}
        </h2>
    </x-slot>

    <div x-data="{
        showConfirmModal: false,
        modalTitle: '',
        modalDescription: '',
        modalButtonText: '',
        modalButtonClass: '',
        modalIconClass: '',
        formUrl: '',

        openModal(event) {
            const button = event.currentTarget;
            const supplier = JSON.parse(button.dataset.supplier);
            this.formUrl = button.dataset.url;

            this.modalTitle = 'Supprimer le Fournisseur';
            this.modalDescription = `Êtes-vous sûr de vouloir supprimer le fournisseur <strong>${supplier.name}</strong> ? Cette action est irréversible.`;
            this.modalButtonText = 'Confirmer la Suppression';
            this.modalButtonClass = 'bg-red-600 hover:bg-red-700';
            this.modalIconClass = 'text-red-600 bg-red-100';

            this.showConfirmModal = true;
        }
    }" class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-6 text-gray-900">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold text-gray-700">{{ __('Liste des Fournisseurs') }}</h3>
                        @can('create suppliers')
                            <a href="{{ route('admin.suppliers.create') }}" class="inline-flex items-center px-4 py-2 bg-primary-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-primary-700">
                                <x-lucide-plus-circle class="w-4 h-4 mr-2" stroke-width="1.5"/>
                                Ajouter
                            </a>
                        @endcan
                    </div>

                    <div class="overflow-x-auto border border-gray-200 rounded-lg">
                        <table class="w-full divide-y divide-gray-200">
                            <thead class="bg-gray-100">
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Nom</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Catégorie</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Contact</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Téléphone</th>
                                    <th scope="col" class="px-6 py-3 text-right text-xs font-bold text-gray-600 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                @forelse ($suppliers as $supplier)
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{ $supplier->name }}</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ $supplier->category->name ?? 'N/A' }}</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ $supplier->contact_name }}</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ $supplier->phone }}</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                            <div class="flex items-center justify-end space-x-2">
                                                @can('edit suppliers')
                                                    <a href="{{ route('admin.suppliers.edit', $supplier) }}" title="Modifier" class="p-2 rounded-full text-gray-400 hover:bg-primary-100 hover:text-primary-600">
                                                        <x-lucide-file-pen-line class="h-5 w-5" stroke-width="1.5"/>
                                                    </a>
                                                @endcan
                                                @can('delete suppliers')
                                                    <button type="button"
                                                            @click="openModal($event)"
                                                            data-supplier='@json($supplier)'
                                                            data-url="{{ route('admin.suppliers.destroy', $supplier) }}"
                                                            title="Supprimer"
                                                            class="p-2 rounded-full text-gray-400 hover:bg-red-100 hover:text-red-600">
                                                        <x-lucide-trash-2 class="h-5 w-5" stroke-width="1.5"/>
                                                    </button>
                                                @endcan
                                            </div>
                                        </td>
                                    </tr>
                                @empty
                                    <tr>
                                        <td colspan="5" class="px-6 py-4 text-center text-sm text-gray-500">
                                            Aucun fournisseur trouvé.
                                        </td>
                                    </tr>
                                @endforelse
                            </tbody>
                        </table>
                    </div>
                     @if ($suppliers->hasPages())
                        <div class="mt-6">
                            {{ $suppliers->links() }}
                        </div>
                    @endif
                </div>
            </div>
        </div>

        {{-- Fenêtre Modale de Confirmation --}}
        <div x-show="showConfirmModal" x-transition class="fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-60" style="display: none;">
            <div @click.away="showConfirmModal = false" class="bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4">
                <div class="sm:flex sm:items-start">
                    <div class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full sm:mx-0 sm:h-10 sm:w-10" :class="modalIconClass">
                        <x-lucide-alert-triangle class="h-6 w-6" stroke-width="1.5"/>
                    </div>
                    <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left">
                        <h3 class="text-base font-semibold leading-6 text-gray-900" x-text="modalTitle"></h3>
                        <div class="mt-2">
                            <p class="text-sm text-gray-600" x-html="modalDescription"></p>
                        </div>
                    </div>
                </div>
                <div class="mt-5 sm:mt-4 sm:flex sm:flex-row-reverse">
                    <form :action="formUrl" method="POST">
                        @csrf
                        @method('DELETE')
                        <button type="submit" class="inline-flex w-full justify-center rounded-md px-4 py-2 text-sm font-semibold text-white shadow-sm sm:ml-3 sm:w-auto" :class="modalButtonClass" x-text="modalButtonText">
                        </button>
                    </form>
                    <button type="button" @click="showConfirmModal = false" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-4 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">
                        Annuler
                    </button>
                </div>
            </div>
        </div>
    </div>
</x-app-layout>
--- FIN DU FICHIER : ./resources/views/admin/suppliers/index.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/users/create.blade.php
////////////////////////////////////////////////////////////////

{{-- resources/views/admin/users/create.blade.php --}}
<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            {{ __('Créer un Nouvel Utilisateur') }}
        </h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-4xl mx-auto sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-8 text-gray-900">

                    @if ($errors->any())
                        <div class="mb-4 bg-red-100 border-l-4 border-red-500 text-red-700 p-4" role="alert">
                            <p class="font-bold">Erreurs de validation</p>
                            <ul>
                                @foreach ($errors->all() as $error)
                                    <li>{{ $error }}</li>
                                @endforeach
                            </ul>
                        </div>
                    @endif

                    <form method="POST" action="{{ route('admin.users.store') }}">
                        @csrf
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <x-input-label for="first_name" :value="__('Prénom')" />
                                <x-text-input id="first_name" class="block mt-1 w-full" type="text" name="first_name" :value="old('first_name')" required autofocus />
                            </div>
                            <div>
                                <x-input-label for="last_name" :value="__('Nom de famille')" />
                                <x-text-input id="last_name" class="block mt-1 w-full" type="text" name="last_name" :value="old('last_name')" required />
                            </div>
                            <div class="md:col-span-2">
                                <x-input-label for="email" :value="__('Email')" />
                                <x-text-input id="email" class="block mt-1 w-full" type="email" name="email" :value="old('email')" required />
                            </div>
                            <div class="md:col-span-2">
                                <x-input-label for="phone" :value="__('Téléphone (optionnel)')" />
                                <x-text-input id="phone" class="block mt-1 w-full" type="text" name="phone" :value="old('phone')" />
                            </div>
                            <div class="md:col-span-2">
                                <label for="organization_id" class="block font-medium text-sm text-gray-700">Organisation <span class="text-red-500">*</span></label>
                                <select name="organization_id" id="organization_id" class="mt-1 block w-full ..." required>
                                    <option value="">Sélectionnez une organisation</option>
                                    @foreach($organizations as $org)
                                        <option value="{{ $org->id }}" @selected(old('organization_id') == $org->id)>{{ $org->name }}</option>
                                    @endforeach
                                </select>
                                <x-input-error :messages="$errors->get('organization_id')" class="mt-2" />
                            </div>
                            <div>
                                <x-input-label for="password" :value="__('Mot de passe')" />
                                <x-text-input id="password" class="block mt-1 w-full" type="password" name="password" required />
                            </div>
                            <div>
                                <x-input-label for="password_confirmation" :value="__('Confirmer le mot de passe')" />
                                <x-text-input id="password_confirmation" class="block mt-1 w-full" type="password" name="password_confirmation" required />
                            </div>
                        </div>

                        <div class="mt-6 border-t border-gray-200 pt-6">
                            <p class="font-medium text-gray-800">Assigner des Rôles :</p>
                            <div class="mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                @foreach ($roles as $role)
                                    <div class="flex items-center">
                                        <input type="checkbox" name="roles[]" id="role_{{ $role->id }}" value="{{ $role->id }}" class="h-4 w-4 rounded border-gray-300 text-violet-600 focus:ring-violet-500">
                                        <label for="role_{{ $role->id }}" class="ml-3 block text-sm font-medium text-gray-700">{{ $role->name }}</label>
                                    </div>
                                @endforeach
                            </div>
                        </div>

                        <div class="mt-8 flex items-center justify-end gap-4">
                            <a href="{{ route('admin.users.index') }}" class="text-sm font-semibold text-gray-600 hover:text-gray-900">{{ __('Annuler') }}</a>
                            <button type="submit" class="inline-flex items-center px-4 py-2 bg-violet-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-violet-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500 transition ease-in-out duration-150">
                                {{ __('Créer l\'Utilisateur') }}
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</x-app-layout>

--- FIN DU FICHIER : ./resources/views/admin/users/create.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/users/edit.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            {{ __('Modifier l\'Utilisateur :') }} <span class="text-violet-700">{{ $user->name }}</span>
        </h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-4xl mx-auto sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-8 text-gray-900">
                    
                    @if ($errors->any())
                        <div class="mb-4 bg-red-100 border-l-4 border-red-500 text-red-700 p-4" role="alert">
                            <p class="font-bold">Veuillez corriger les erreurs ci-dessous.</p>
                        </div>
                    @endif

                    <form method="POST" action="{{ route('admin.users.update', $user) }}">
                        @csrf
                        @method('PUT')
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            
                            {{-- Prénom --}}
                            <div>
                                <label for="first_name" class="block font-medium text-sm text-gray-700">Prénom <span class="text-red-500">*</span></label>
                                <x-text-input id="first_name" class="block mt-1 w-full" type="text" name="first_name" :value="old('first_name', $user->first_name)" required autofocus />
                                <x-input-error :messages="$errors->get('first_name')" class="mt-2" />
                            </div>

                            {{-- Nom --}}
                            <div>
                                <label for="last_name" class="block font-medium text-sm text-gray-700">Nom <span class="text-red-500">*</span></label>
                                <x-text-input id="last_name" class="block mt-1 w-full" type="text" name="last_name" :value="old('last_name', $user->last_name)" required />
                                <x-input-error :messages="$errors->get('last_name')" class="mt-2" />
                            </div>

                            {{-- Email --}}
                            <div class="md:col-span-2">
                                <label for="email" class="block font-medium text-sm text-gray-700">Email <span class="text-red-500">*</span></label>
                                <x-text-input id="email" class="block mt-1 w-full" type="email" name="email" :value="old('email', $user->email)" required />
                                <x-input-error :messages="$errors->get('email')" class="mt-2" />
                            </div>

                             {{-- Organisation --}}
                            <div class="md:col-span-2">
                                <label for="organization_id" class="block font-medium text-sm text-gray-700">Organisation <span class="text-red-500">*</span></label>
                                <select name="organization_id" id="organization_id" class="mt-1 block w-full border-gray-300 focus:border-violet-500 focus:ring-violet-500 rounded-md shadow-sm" required>
                                    @foreach($organizations as $org)
                                        <option value="{{ $org->id }}" @selected(old('organization_id', $user->organization_id) == $org->id)>
                                            {{ $org->name }}
                                        </option>
                                    @endforeach
                                </select>
                                <x-input-error :messages="$errors->get('organization_id')" class="mt-2" />
                            </div>

                            {{-- Mot de passe --}}
                            <div class="border-t pt-6 md:col-span-2">
                                <p class="text-sm text-gray-500">Laissez les champs de mot de passe vides si vous ne souhaitez pas le modifier.</p>
                            </div>
                            <div>
                                <label for="password" class="block font-medium text-sm text-gray-700">Nouveau Mot de passe</label>
                                <x-text-input id="password" class="block mt-1 w-full" type="password" name="password" autocomplete="new-password" />
                                <x-input-error :messages="$errors->get('password')" class="mt-2" />
                            </div>
                            <div>
                                <label for="password_confirmation" class="block font-medium text-sm text-gray-700">Confirmation du Mot de passe</label>
                                <x-text-input id="password_confirmation" class="block mt-1 w-full" type="password" name="password_confirmation" />
                            </div>
                        </div>

                        {{-- Rôles --}}
                        <div class="mt-6 border-t pt-6">
                            <label class="block font-medium text-sm text-gray-700">Rôles</label>
                            <div class="mt-2 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
                                @foreach ($roles as $role)
                                    <div class="flex items-center">
                                        <input type="checkbox" name="roles[]" id="role_{{ $role->id }}" value="{{ $role->id }}" class="h-4 w-4 rounded border-gray-300 text-violet-600 focus:ring-violet-500"
                                            @checked(in_array($role->id, old('roles', $user->roles->pluck('id')->toArray())))>
                                        <label for="role_{{ $role->id }}" class="ml-3 block text-sm font-medium text-gray-700">{{ $role->name }}</label>
                                    </div>
                                @endforeach
                            </div>
                            <x-input-error :messages="$errors->get('roles')" class="mt-2" />
                        </div>

                        <div class="mt-8 flex items-center justify-end gap-4">
                            <a href="{{ route('admin.users.index') }}" class="text-sm font-semibold text-gray-600 hover:text-gray-900">Annuler</a>
                            <button type="submit" class="inline-flex items-center px-4 py-2 bg-violet-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-violet-700">
                                Mettre à Jour
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</x-app-layout>
--- FIN DU FICHIER : ./resources/views/admin/users/edit.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/users/index.blade.php
////////////////////////////////////////////////////////////////

{{-- resources/views/admin/users/index.blade.php --}}
<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            {{ __('Administration - Gestion des Utilisateurs') }}
        </h2>
    </x-slot>

    {{-- Initialisation d'Alpine.js pour la modale de confirmation --}}
    <div x-data="{ showConfirmModal: false, userToDelete: {}, deleteFormUrl: '' }" class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
            @if (session('success'))
                <div class="mb-4 bg-green-100 border-l-4 border-green-500 text-green-700 p-4" role="alert">
                    <p class="font-bold">{{ session('success') }}</p>
                </div>
            @endif

            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-6 text-gray-900">

                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold text-gray-700">{{ __('Liste des Utilisateurs') }}</h3>
                        @can('create users')
                            <a href="{{ route('admin.users.create') }}" class="inline-flex items-center px-4 py-2 bg-primary-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition ease-in-out duration-150">
                                <x-lucide-plus-circle class="w-5 h-5 mr-2"/>
                                {{ __('Ajouter un Utilisateur') }}
                            </a>
                        @endcan
                    </div>

                    <div class="overflow-x-auto border border-gray-200 rounded-lg">
                        <table class="w-full divide-y divide-gray-200">
                            <thead class="bg-gray-100">
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Nom Complet</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Email</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Rôles</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Inscrit le</th>
                                    <th scope="col" class="px-6 py-3 text-right text-xs font-bold text-gray-600 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                @forelse ($users as $user)
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 text-sm text-gray-800">{{ $user->name }}</td>
                                        <td class="px-6 py-4 text-sm text-gray-500">{{ $user->email }}</td>
                                        <td class="px-6 py-4 text-sm text-gray-500">
                                            @forelse($user->roles as $role)
                                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-primary-100 text-primary-800">
                                                    {{ $role->name }}
                                                </span>
                                            @empty
                                                <span class="text-xs italic text-gray-400">Aucun rôle</span>
                                            @endforelse
                                        </td>
                                        <td class="px-6 py-4 text-sm text-gray-500">{{ $user->created_at->format('d/m/Y') }}</td>

                                        <td class="px-6 py-4 text-right text-sm font-medium">
                                            <div class="flex items-center justify-end space-x-2">
                                                @can('edit users')
                                                    <a href="{{ route('admin.users.edit', $user) }}" title="Modifier" class="p-2 rounded-full text-gray-400 hover:bg-primary-100 hover:text-primary-600 transition-colors duration-200">
                                                        <x-lucide-file-pen-line class="h-5 w-5"/>
                                                    </a>
                                                @endcan
                                                @can('delete users')
                                                    <button type="button" 
                                                            @click="showConfirmModal = true; userToDelete = {{ json_encode($user->only(['id', 'name'])) }}; deleteFormUrl = '{{ route('admin.users.destroy', $user->id) }}'" 
                                                            title="Supprimer" 
                                                            class="p-2 rounded-full text-gray-400 hover:bg-red-100 hover:text-red-600 transition-colors duration-200">
                                                        <x-lucide-trash-2 class="h-5 w-5"/>
                                                    </button>
                                                @endcan
                                            </div>
                                        </td>

                                    </tr>
                                @empty
                                    <tr><td colspan="5" class="px-6 py-4 text-center text-sm text-gray-500">Aucun utilisateur trouvé.</td></tr>
                                @endforelse
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-6">{{ $users->links() }}</div>
                </div>
            </div>
        </div>

        {{-- Fenêtre Modale de Confirmation de Suppression --}}
        <div x-show="showConfirmModal" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" class="fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-60" style="display: none;">
            <div @click.away="showConfirmModal = false" class="bg-white rounded-lg shadow-xl p-6 md:p-8 w-full max-w-md mx-4">
                <div class="sm:flex sm:items-start">
                    <div class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10">
                        <x-lucide-alert-triangle class="h-6 w-6 text-red-600"/>
                    </div>
                    <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left">
                        <h3 class="text-base font-semibold leading-6 text-gray-900" id="modal-title">Confirmer la Suppression</h3>
                        <div class="mt-2">
                            <p class="text-sm text-gray-600">Êtes-vous sûr de vouloir supprimer l'utilisateur <strong class="font-bold" x-text="userToDelete.name"></strong> ?</p>
                            <p class="mt-1 text-sm text-gray-500">Cette action est définitive et irréversible.</p>
                        </div>
                    </div>
                </div>
                <div class="mt-5 sm:mt-4 sm:flex sm:flex-row-reverse">
                    <form :action="deleteFormUrl" method="POST" x-ref="deleteForm">
                        @csrf
                        @method('DELETE')
                        <button type="submit" class="inline-flex w-full justify-center rounded-md bg-red-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-700 sm:ml-3 sm:w-auto">
                            Confirmer la Suppression
                        </button>
                    </form>
                    <button type="button" @click="showConfirmModal = false" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-4 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">
                        Annuler
                    </button>
                </div>
            </div>
        </div>

    </div>
</x-app-layout>
--- FIN DU FICHIER : ./resources/views/admin/users/index.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/vehicles/create.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">{{ __('Ajouter un Nouveau Véhicule') }}</h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-4xl mx-auto sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-8 text-gray-900" x-data="{
                    currentStep: {{ old('current_step', 1) }},
                    initTomSelect() {
                        new TomSelect(this.$refs.vehicle_type_id, { create: false, placeholder: 'Sélectionnez un type...' });
                        new TomSelect(this.$refs.fuel_type_id, { create: false, placeholder: 'Sélectionnez un carburant...' });
                        new TomSelect(this.$refs.transmission_type_id, { create: false, placeholder: 'Sélectionnez une transmission...' });
                        new TomSelect(this.$refs.status_id, { create: false, placeholder: 'Sélectionnez un statut...' });
                        
                        // Configuration TomSelect pour les utilisateurs
                        if (this.$refs.users && window.initUserTomSelect) {
                            window.initUserTomSelect(this.$refs.users);
                        }
                    }
                }" x-init="
                    initTomSelect();
                    @if ($errors->any())
                        let errors = {{ json_encode($errors->messages()) }};
                        let firstErrorStep = null;
                        const fieldToStepMap = { 'registration_plate': 1, 'vin': 1, 'brand': 1, 'model': 1, 'color': 1, 'vehicle_type_id': 2, 'fuel_type_id': 2, 'transmission_type_id': 2, 'manufacturing_year': 2, 'seats': 2, 'power_hp': 2, 'engine_displacement_cc': 2, 'acquisition_date': 3, 'purchase_price': 3, 'current_value': 3, 'initial_mileage': 3, 'status_id': 3, 'notes': 3 };
                        for (const field in fieldToStepMap) {
                            if (errors.hasOwnProperty(field)) { firstErrorStep = fieldToStepMap[field]; break; }
                        }
                        if (firstErrorStep) { currentStep = firstErrorStep; }
                    @endif
                ">

                    <ol class="flex items-center w-full mb-8">
                        <li :class="currentStep >= 1 ? 'text-primary-600' : 'text-gray-500'" class="flex w-full items-center after:content-[''] after:w-full after:h-1 after:border-b after:border-4 after:inline-block" :class="currentStep > 1 ? 'after:border-primary-600' : 'after:border-gray-200'">
                            <span class="flex items-center justify-center w-10 h-10 rounded-full shrink-0" :class="currentStep >= 1 ? 'bg-primary-100' : 'bg-gray-100'">
                                <x-lucide-contact class="w-5 h-5"/>
                            </span>
                        </li>
                        <li :class="currentStep >= 2 ? 'text-primary-600' : 'text-gray-500'" class="flex w-full items-center after:content-[''] after:w-full after:h-1 after:border-b after:border-4 after:inline-block" :class="currentStep > 2 ? 'after:border-primary-600' : 'after:border-gray-200'">
                            <span class="flex items-center justify-center w-10 h-10 rounded-full shrink-0" :class="currentStep >= 2 ? 'bg-primary-100' : 'bg-gray-100'">
                                <x-lucide-wrench class="w-5 h-5"/>
                            </span>
                        </li>
                        <li :class="currentStep === 3 ? 'text-primary-600' : 'text-gray-500'" class="flex items-center">
                            <span class="flex items-center justify-center w-10 h-10 rounded-full shrink-0" :class="currentStep === 3 ? 'bg-primary-100' : 'bg-gray-100'">
                                <x-lucide-key-round class="w-5 h-5"/>
                            </span>
                        </li>
                    </ol>

                    <form method="POST" action="{{ route('admin.vehicles.store') }}" enctype="multipart/form-data">
                        @csrf
                        <input type="hidden" name="current_step" x-model="currentStep">

                        <fieldset x-show="currentStep === 1" class="border border-gray-200 p-6 rounded-lg">
                            <legend class="text-lg font-semibold text-gray-800 px-2">Étape 1: Identification</legend>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                                <div>
                                    <x-input-label for="registration_plate" value="Immatriculation" required />
                                    <x-text-input id="registration_plate" name="registration_plate" :value="old('registration_plate')" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('registration_plate')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="vin" value="Numéro de série (VIN)" />
                                    <x-text-input id="vin" name="vin" :value="old('vin')" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('vin')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="brand" value="Marque" required />
                                    <x-text-input id="brand" name="brand" :value="old('brand')" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('brand')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="model" value="Modèle" required />
                                    <x-text-input id="model" name="model" :value="old('model')" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('model')" class="mt-2" />
                                </div>
                                <div class="md:col-span-2">
                                    <x-input-label for="color" value="Couleur" />
                                    <x-text-input id="color" name="color" :value="old('color')" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('color')" class="mt-2" />
                                </div>
                            </div>
                        </fieldset>

                        <fieldset x-show="currentStep === 2" style="display: none;" class="border border-gray-200 p-6 rounded-lg">
                            <legend class="text-lg font-semibold text-gray-800 px-2">Étape 2: Caractéristiques Techniques</legend>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-4">
                                <div>
                                    <x-input-label for="vehicle_type_id" value="Type de Véhicule" required />
                                    <select x-ref="vehicle_type_id" name="vehicle_type_id" id="vehicle_type_id">
                                        @foreach($vehicleTypes as $type)<option value="{{ $type->id }}" @selected(old('vehicle_type_id') == $type->id)>{{ $type->name }}</option>@endforeach
                                    </select>
                                    <x-input-error :messages="$errors->get('vehicle_type_id')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="fuel_type_id" value="Type de Carburant" required />
                                    <select x-ref="fuel_type_id" name="fuel_type_id" id="fuel_type_id">
                                        @foreach($fuelTypes as $type)<option value="{{ $type->id }}" @selected(old('fuel_type_id') == $type->id)>{{ $type->name }}</option>@endforeach
                                    </select>
                                    <x-input-error :messages="$errors->get('fuel_type_id')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="transmission_type_id" value="Type de Transmission" required />
                                    <select x-ref="transmission_type_id" name="transmission_type_id" id="transmission_type_id">
                                        @foreach($transmissionTypes as $type)<option value="{{ $type->id }}" @selected(old('transmission_type_id') == $type->id)>{{ $type->name }}</option>@endforeach
                                    </select>
                                    <x-input-error :messages="$errors->get('transmission_type_id')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="manufacturing_year" value="Année de Fabrication" />
                                    <x-text-input id="manufacturing_year" type="number" name="manufacturing_year" :value="old('manufacturing_year')" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('manufacturing_year')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="seats" value="Nombre de places" />
                                    <x-text-input id="seats" type="number" name="seats" :value="old('seats')" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('seats')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="power_hp" value="Puissance (CV)" />
                                    <x-text-input id="power_hp" type="number" name="power_hp" :value="old('power_hp')" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('power_hp')" class="mt-2" />
                                </div>
                                <div class="lg:col-span-3">
                                    <x-input-label for="engine_displacement_cc" value="Cylindrée (cc)" />
                                    <x-text-input id="engine_displacement_cc" type="number" name="engine_displacement_cc" :value="old('engine_displacement_cc')" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('engine_displacement_cc')" class="mt-2" />
                                </div>
                            </div>
                        </fieldset>

                        <fieldset x-show="currentStep === 3" style="display: none;" class="border border-gray-200 p-6 rounded-lg">
                            <legend class="text-lg font-semibold text-gray-800 px-2">Étape 3: Acquisition & Statut</legend>
                             <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                                <div>
                                    <x-input-label for="acquisition_date" value="Date d'acquisition" />
                                    <x-text-input id="acquisition_date" type="date" name="acquisition_date" :value="old('acquisition_date')" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('acquisition_date')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="purchase_price" value="Prix d'achat (DA)" />
                                    <x-text-input id="purchase_price" type="number" step="0.01" name="purchase_price" :value="old('purchase_price')" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('purchase_price')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="current_value" value="Valeur actuelle (DA)" />
                                    <x-text-input id="current_value" type="number" step="0.01" name="current_value" :value="old('current_value')" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('current_value')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="initial_mileage" value="Kilométrage Initial" />
                                    <x-text-input id="initial_mileage" type="number" name="initial_mileage" :value="old('initial_mileage', 0)" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('initial_mileage')" class="mt-2" />
                                </div>
                                <div class="md:col-span-2">
                                    <x-input-label for="status_id" value="Statut Initial" required />
                                    <select x-ref="status_id" name="status_id" id="status_id">
                                        @foreach($vehicleStatuses as $status)<option value="{{ $status->id }}" @selected(old('status_id') == $status->id)>{{ $status->name }}</option>@endforeach
                                    </select>
                                    <x-input-error :messages="$errors->get('status_id')" class="mt-2" />
                                </div>
                                {{-- --- CHAMP UTILISATEURS AMÉLIORÉ --- --}}
                                <div class="md:col-span-2">
                                    <x-input-label for="users" value="Utilisateurs Autorisés" />
                                    <select name="users[]" id="users" multiple x-ref="users" class="tomselect-users">
                                        @foreach($users as $user)
                                            <option value="{{ $user->id }}" 
                                                    data-name="{{ $user->name }}" 
                                                    data-email="{{ $user->email }}"
                                                    @selected(in_array($user->id, old('users', [])))>
                                                {{ $user->name }} ({{ $user->email }})
                                            </option>
                                        @endforeach
                                    </select>
                                    <p class="mt-1 text-xs text-gray-500">
                                        Recherchez et sélectionnez les utilisateurs autorisés à utiliser ce véhicule.
                                    </p>
                                    <x-input-error :messages="$errors->get('users')" class="mt-2" />
                                </div>
                                {{-- --- FIN CHAMP UTILISATEURS --- --}}
                                <div class="md:col-span-2">
                                    <x-input-label for="notes" value="Notes" />
                                    <textarea id="notes" name="notes" rows="3" class="block mt-1 w-full border-gray-300 focus:border-primary-500 focus:ring-primary-500 rounded-md shadow-sm">{{ old('notes') }}</textarea>
                                    <x-input-error :messages="$errors->get('notes')" class="mt-2" />
                                </div>
                             </div>
                        </fieldset>

                        <div class="mt-8 pt-6 border-t border-gray-200 flex items-center justify-between">
                            <x-secondary-button type="button" x-show="currentStep > 1" @click="currentStep--">Précédent</x-secondary-button>
                            <div class="flex-grow"></div> <div class="flex items-center gap-4">
                                <a href="{{ route('admin.vehicles.index') }}" class="text-sm font-semibold text-gray-600 hover:text-gray-900">Annuler</a>
                                <x-primary-button type="button" x-show="currentStep < 3" @click="currentStep++">Suivant</x-primary-button>
                                <button type="submit" x-show="currentStep === 3" class="inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700">
                                    Enregistrer le Véhicule
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</x-app-layout>
--- FIN DU FICHIER : ./resources/views/admin/vehicles/create.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/vehicles/edit.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">Modifier le Véhicule : <span class="text-primary-600">{{ $vehicle->registration_plate }}</span></h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-4xl mx-auto sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-8 text-gray-900" x-data="{
                    currentStep: {{ old('current_step', 1) }},
                    initTomSelect() {
                        const tomConfig = (selectedValue) => ({
                            create: false,
                            placeholder: 'Sélectionnez...',
                            items: [selectedValue]
                        });
                        new TomSelect(this.$refs.vehicle_type_id, tomConfig('{{ old('vehicle_type_id', $vehicle->vehicle_type_id) }}'));
                        new TomSelect(this.$refs.fuel_type_id, tomConfig('{{ old('fuel_type_id', $vehicle->fuel_type_id) }}'));
                        new TomSelect(this.$refs.transmission_type_id, tomConfig('{{ old('transmission_type_id', $vehicle->transmission_type_id) }}'));
                        new TomSelect(this.$refs.status_id, tomConfig('{{ old('status_id', $vehicle->status_id) }}'));
                        
                        // Configuration TomSelect pour les utilisateurs avec présélection
                        if (this.$refs.users && window.initUserTomSelect) {
                            const assignedUserIds = @json(old('users', $vehicle->users->pluck('id')->toArray()));
                            window.initUserTomSelect(this.$refs.users, assignedUserIds);
                        }
                    }
                }" x-init="
                    initTomSelect();
                     @if ($errors->any())
                        let errors = {{ json_encode($errors->messages()) }};
                        let firstErrorStep = null;
                        const fieldToStepMap = { 'registration_plate': 1, 'vin': 1, 'brand': 1, 'model': 1, 'color': 1, 'vehicle_type_id': 2, 'fuel_type_id': 2, 'transmission_type_id': 2, 'manufacturing_year': 2, 'seats': 2, 'power_hp': 2, 'engine_displacement_cc': 2, 'acquisition_date': 3, 'purchase_price': 3, 'current_value': 3, 'initial_mileage': 3, 'status_id': 3, 'notes': 3 };
                        for (const field in fieldToStepMap) {
                            if (errors.hasOwnProperty(field)) { firstErrorStep = fieldToStepMap[field]; break; }
                        }
                        if (firstErrorStep) { currentStep = firstErrorStep; }
                    @endif
                ">

                    <ol class="flex items-center w-full mb-8">
                        <li :class="currentStep >= 1 ? 'text-primary-600' : 'text-gray-500'" class="flex w-full items-center after:content-[''] after:w-full after:h-1 after:border-b after:border-4 after:inline-block" :class="currentStep > 1 ? 'after:border-primary-600' : 'after:border-gray-200'">
                            <span class="flex items-center justify-center w-10 h-10 rounded-full shrink-0" :class="currentStep >= 1 ? 'bg-primary-100' : 'bg-gray-100'">
                                <x-lucide-contact class="w-5 h-5"/>
                            </span>
                        </li>
                        <li :class="currentStep >= 2 ? 'text-primary-600' : 'text-gray-500'" class="flex w-full items-center after:content-[''] after:w-full after:h-1 after:border-b after:border-4 after:inline-block" :class="currentStep > 2 ? 'after:border-primary-600' : 'after:border-gray-200'">
                            <span class="flex items-center justify-center w-10 h-10 rounded-full shrink-0" :class="currentStep >= 2 ? 'bg-primary-100' : 'bg-gray-100'">
                                <x-lucide-wrench class="w-5 h-5"/>
                            </span>
                        </li>
                        <li :class="currentStep === 3 ? 'text-primary-600' : 'text-gray-500'" class="flex items-center">
                            <span class="flex items-center justify-center w-10 h-10 rounded-full shrink-0" :class="currentStep === 3 ? 'bg-primary-100' : 'bg-gray-100'">
                                <x-lucide-key-round class="w-5 h-5"/>
                            </span>
                        </li>
                    </ol>

                    <form method="POST" action="{{ route('admin.vehicles.update', $vehicle->id) }}" enctype="multipart/form-data">
                        @csrf
                        @method('PUT')
                        <input type="hidden" name="current_step" x-model="currentStep">

                        <fieldset x-show="currentStep === 1" class="border border-gray-200 p-6 rounded-lg">
                             <legend class="text-lg font-semibold text-gray-800 px-2">Étape 1: Identification</legend>
                             <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                                <div>
                                    <x-input-label for="registration_plate" value="Immatriculation" required />
                                    <x-text-input id="registration_plate" name="registration_plate" :value="old('registration_plate', $vehicle->registration_plate)" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('registration_plate')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="vin" value="Numéro de série (VIN)" />
                                    <x-text-input id="vin" name="vin" :value="old('vin', $vehicle->vin)" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('vin')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="brand" value="Marque" required />
                                    <x-text-input id="brand" name="brand" :value="old('brand', $vehicle->brand)" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('brand')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="model" value="Modèle" required />
                                    <x-text-input id="model" name="model" :value="old('model', $vehicle->model)" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('model')" class="mt-2" />
                                </div>
                                 <div class="md:col-span-2">
                                    <x-input-label for="color" value="Couleur" />
                                    <x-text-input id="color" name="color" :value="old('color', $vehicle->color)" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('color')" class="mt-2" />
                                </div>
                            </div>
                        </fieldset>

                        <fieldset x-show="currentStep === 2" style="display: none;" class="border border-gray-200 p-6 rounded-lg">
                             <legend class="text-lg font-semibold text-gray-800 px-2">Étape 2: Caractéristiques Techniques</legend>
                             <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-4">
                                <div>
                                    <x-input-label for="vehicle_type_id" value="Type de Véhicule" required />
                                    <select x-ref="vehicle_type_id" name="vehicle_type_id" id="vehicle_type_id">
                                        @foreach($vehicleTypes as $type)<option value="{{ $type->id }}">{{ $type->name }}</option>@endforeach
                                    </select>
                                    <x-input-error :messages="$errors->get('vehicle_type_id')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="fuel_type_id" value="Type de Carburant" required />
                                    <select x-ref="fuel_type_id" name="fuel_type_id" id="fuel_type_id">
                                        @foreach($fuelTypes as $type)<option value="{{ $type->id }}">{{ $type->name }}</option>@endforeach
                                    </select>
                                    <x-input-error :messages="$errors->get('fuel_type_id')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="transmission_type_id" value="Type de Transmission" required />
                                    <select x-ref="transmission_type_id" name="transmission_type_id" id="transmission_type_id">
                                        @foreach($transmissionTypes as $type)<option value="{{ $type->id }}">{{ $type->name }}</option>@endforeach
                                    </select>
                                    <x-input-error :messages="$errors->get('transmission_type_id')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="manufacturing_year" value="Année de Fabrication" />
                                    <x-text-input id="manufacturing_year" type="number" name="manufacturing_year" :value="old('manufacturing_year', $vehicle->manufacturing_year)" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('manufacturing_year')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="seats" value="Nombre de places" />
                                    <x-text-input id="seats" type="number" name="seats" :value="old('seats', $vehicle->seats)" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('seats')" class="mt-2" />
                                </div>
                                 <div>
                                    <x-input-label for="power_hp" value="Puissance (CV)" />
                                    <x-text-input id="power_hp" type="number" name="power_hp" :value="old('power_hp', $vehicle->power_hp)" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('power_hp')" class="mt-2" />
                                </div>
                                <div class="lg:col-span-3">
                                    <x-input-label for="engine_displacement_cc" value="Cylindrée (cc)" />
                                    <x-text-input id="engine_displacement_cc" type="number" name="engine_displacement_cc" :value="old('engine_displacement_cc', $vehicle->engine_displacement_cc)" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('engine_displacement_cc')" class="mt-2" />
                                </div>
                            </div>
                        </fieldset>

                        <fieldset x-show="currentStep === 3" style="display: none;" class="border border-gray-200 p-6 rounded-lg">
                             <legend class="text-lg font-semibold text-gray-800 px-2">Étape 3: Acquisition & Statut</legend>
                             <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                                <div>
                                    <x-input-label for="acquisition_date" value="Date d'acquisition" />
                                    <x-text-input id="acquisition_date" type="date" name="acquisition_date" :value="old('acquisition_date', $vehicle->acquisition_date?->format('Y-m-d'))" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('acquisition_date')" class="mt-2" />
                                </div>
                                 <div>
                                    <x-input-label for="purchase_price" value="Prix d'achat (DA)" />
                                    <x-text-input id="purchase_price" type="number" step="0.01" name="purchase_price" :value="old('purchase_price', $vehicle->purchase_price)" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('purchase_price')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="current_value" value="Valeur actuelle (DA)" />
                                    <x-text-input id="current_value" type="number" step="0.01" name="current_value" :value="old('current_value', $vehicle->current_value)" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('current_value')" class="mt-2" />
                                </div>
                                <div>
                                    <x-input-label for="current_mileage" value="Kilométrage Actuel" />
                                    <x-text-input id="current_mileage" type="number" name="current_mileage" :value="old('current_mileage', $vehicle->current_mileage)" class="mt-1 block w-full" />
                                    <x-input-error :messages="$errors->get('current_mileage')" class="mt-2" />
                                </div>
                                <div class="md:col-span-2">
                                    <x-input-label for="status_id" value="Statut" required />
                                    <select x-ref="status_id" name="status_id" id="status_id">
                                        @foreach($vehicleStatuses as $status)<option value="{{ $status->id }}">{{ $status->name }}</option>@endforeach
                                    </select>
                                    <x-input-error :messages="$errors->get('status_id')" class="mt-2" />
                                </div>
                                {{-- --- CHAMP UTILISATEURS AMÉLIORÉ --- --}}
                                <div class="md:col-span-2">
                                    <x-input-label for="users" value="Utilisateurs Autorisés" />
                                    
                                    <select name="users[]" id="users" multiple x-ref="users" class="tomselect-users">
                                        {{-- On prépare en PHP la liste des IDs déjà assignés --}}
                                        @php
                                            $assignedUserIds = old('users', $vehicle->users->pluck('id')->toArray());
                                        @endphp

                                        {{-- On boucle sur tous les utilisateurs disponibles pour créer les options --}}
                                        @foreach($users as $user)
                                            <option value="{{ $user->id }}" 
                                                    data-name="{{ $user->name }}" 
                                                    data-email="{{ $user->email }}"
                                                    @selected(in_array($user->id, $assignedUserIds))>
                                                {{ $user->name }} ({{ $user->email }})
                                            </option>
                                        @endforeach
                                    </select>
                                    <p class="mt-1 text-xs text-gray-500">
                                        Recherchez et sélectionnez les utilisateurs autorisés à utiliser ce véhicule.
                                    </p>
                                    <x-input-error :messages="$errors->get('users')" class="mt-2" />
                                </div>
                                {{-- --- FIN CHAMP UTILISATEURS --- --}}
                                 <div class="md:col-span-2">
                                    <x-input-label for="notes" value="Notes" />
                                    <textarea id="notes" name="notes" rows="3" class="block mt-1 w-full border-gray-300 focus:border-primary-500 focus:ring-primary-500 rounded-md shadow-sm">{{ old('notes', $vehicle->notes) }}</textarea>
                                    <x-input-error :messages="$errors->get('notes')" class="mt-2" />
                                </div>
                                
                             </div>
                        </fieldset>

                        <div class="mt-8 pt-6 border-t border-gray-200 flex items-center justify-between">
                            <x-secondary-button type="button" x-show="currentStep > 1" @click="currentStep--">Précédent</x-secondary-button>
                            <div class="flex-grow"></div>
                            <div class="flex items-center gap-4">
                                <a href="{{ route('admin.vehicles.index') }}" class="text-sm font-semibold text-gray-600 hover:text-gray-900">Annuler</a>
                                <x-primary-button type="button" x-show="currentStep < 3" @click="currentStep++">Suivant</x-primary-button>
                                <button type="submit" x-show="currentStep === 3" class="inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700">
                                    Enregistrer les Modifications
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</x-app-layout>
--- FIN DU FICHIER : ./resources/views/admin/vehicles/edit.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/vehicles/import-results.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header">
        <div class="flex justify-between items-center">
            <h2 class="font-semibold text-xl text-gray-800 leading-tight">
                {{ __('Résultats de l\'Importation des Véhicules') }}
            </h2>
            <a href="{{ route('admin.vehicles.index') }}" class="inline-flex items-center px-3 py-1.5 bg-gray-100 border border-gray-300 rounded-md font-medium text-xs text-gray-700 uppercase tracking-widest hover:bg-gray-200 transition">
                <x-lucide-arrow-left class="h-4 w-4 mr-1"/>
                Retour à la liste
            </a>
        </div>
    </x-slot>

    <div class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
            {{-- Informations sur l'importation --}}
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6">
                <div class="p-6 border-b border-gray-200">
                    <div class="flex items-center">
                        <x-lucide-file-text class="h-8 w-8 text-primary-500 mr-3"/>
                        <div>
                            <h3 class="text-lg font-medium text-gray-900">Détails de l'importation</h3>
                            <div class="mt-1 text-sm text-gray-600">
                                <p><span class="font-medium">Fichier :</span> {{ $fileName ?? 'Fichier CSV' }}</p>
                                <p><span class="font-medium">Encodage détecté :</span> {{ ucfirst($encoding ?? 'utf8') }}</p>
                                <p><span class="font-medium">Identifiant d'importation :</span> <span class="font-mono text-xs">{{ $importId ?? 'N/A' }}</span></p>
                                <p><span class="font-medium">Date et heure :</span> {{ now()->format('d/m/Y H:i:s') }}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {{-- Carte de Résumé Statistique --}}
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                    <div class="p-6 bg-gradient-to-br from-green-50 to-green-100 border-l-4 border-green-500">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-green-100 bg-opacity-60">
                                <x-lucide-check-circle-2 class="h-8 w-8 text-green-600"/>
                            </div>
                            <div class="ml-4">
                                <p class="text-3xl font-bold text-green-800">{{ $successCount }}</p>
                                <p class="text-sm font-medium text-green-700">Véhicule(s) importé(s) avec succès</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                    <div class="p-6 bg-gradient-to-br from-red-50 to-red-100 border-l-4 border-red-500">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-red-100 bg-opacity-60">
                                <x-lucide-x-circle class="h-8 w-8 text-red-600"/>
                            </div>
                            <div class="ml-4">
                                <p class="text-3xl font-bold text-red-800">{{ count($errorRows) }}</p>
                                <p class="text-sm font-medium text-red-700">Ligne(s) en erreur</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                    <div class="p-6 bg-gradient-to-br from-blue-50 to-blue-100 border-l-4 border-blue-500">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-blue-100 bg-opacity-60">
                                <x-lucide-bar-chart-3 class="h-8 w-8 text-blue-600"/>
                            </div>
                            <div class="ml-4">
                                <p class="text-3xl font-bold text-blue-800">{{ $successCount + count($errorRows) }}</p>
                                <p class="text-sm font-medium text-blue-700">Total de lignes traitées</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {{-- Section des Erreurs (si applicable) --}}
            @if (!empty($errorRows))
                <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6">
                    <div class="p-6 md:p-8 text-gray-900">
                        <div class="flex items-center mb-4">
                            <x-lucide-alert-triangle class="h-6 w-6 text-amber-500 mr-2"/>
                            <h3 class="text-xl font-semibold text-gray-800">Détail des Lignes en Erreur</h3>
                        </div>
                        
                        <p class="text-sm text-gray-600 mb-6">
                            Les lignes suivantes n'ont pas été importées en raison d'erreurs. Veuillez corriger ces problèmes dans votre fichier CSV et réessayer l'importation.
                        </p>

                        <div class="overflow-x-auto border border-gray-200 rounded-lg">
                            <table class="w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Ligne</th>
                                        <th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Erreur(s)</th>
                                        <th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Données</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    @foreach ($errorRows as $error)
                                        <tr class="hover:bg-gray-50">
                                            <td class="px-6 py-4 whitespace-nowrap font-mono text-sm text-center">
                                                <span class="px-2 py-1 bg-gray-100 rounded-md">{{ $error['line'] }}</span>
                                            </td>
                                            <td class="px-6 py-4">
                                                <ul class="list-disc list-inside space-y-1 text-sm text-red-700">
                                                    @foreach ($error['errors'] as $message)
                                                        <li>{{ $message }}</li>
                                                    @endforeach
                                                </ul>
                                            </td>
                                            <td class="px-6 py-4">
                                                <div class="text-xs text-gray-600 max-w-md overflow-hidden">
                                                    <div class="grid grid-cols-2 gap-1">
                                                        @foreach ($error['data'] as $key => $value)
                                                            <div class="mb-1 @if(in_array($key, array_map('trim', explode(',', $error['problematic_fields'] ?? '')))) bg-red-50 rounded px-1 @endif">
                                                                <span class="font-medium">{{ $key }}:</span> 
                                                                <span class="font-mono">{{ $value ?? 'NULL' }}</span>
                                                            </div>
                                                        @endforeach
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    @endforeach
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="mt-6 p-4 bg-amber-50 border border-amber-200 rounded-lg">
                            <div class="flex">
                                <div class="flex-shrink-0">
                                    <x-lucide-lightbulb class="h-5 w-5 text-amber-500"/>
                                </div>
                                <div class="ml-3">
                                    <h4 class="text-sm font-medium text-amber-800">Conseils pour résoudre les erreurs</h4>
                                    <ul class="mt-2 text-sm text-amber-700 list-disc list-inside space-y-1">
                                        <li>Vérifiez que les valeurs des champs obligatoires sont bien renseignées</li>
                                        <li>Assurez-vous que les types de véhicules, carburants et statuts correspondent exactement à ceux définis dans le système</li>
                                        <li>Vérifiez le format des dates (AAAA-MM-JJ) et des nombres</li>
                                        <li>Corrigez les problèmes d'encodage si des caractères spéciaux sont mal affichés</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                {{-- Option d'export des erreurs --}}
                <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <x-lucide-download class="h-6 w-6 text-primary-500 mr-2"/>
                                <h3 class="text-lg font-medium text-gray-900">Exporter les erreurs</h3>
                            </div>
                            <a href="{{ route('admin.vehicles.import.export-errors', ['import_id' => $importId]) }}" class="inline-flex items-center px-4 py-2 bg-primary-100 border border-primary-200 rounded-md font-semibold text-xs text-primary-700 uppercase tracking-widest hover:bg-primary-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition">
                                <x-lucide-file-down class="h-4 w-4 mr-2"/>
                                Télécharger le rapport d'erreurs
                            </a>
                        </div>
                        <p class="mt-2 text-sm text-gray-600">
                            Téléchargez un fichier CSV contenant uniquement les lignes en erreur pour faciliter leur correction.
                        </p>
                    </div>
                </div>
            @else
                {{-- Cas parfait : aucune erreur --}}
                <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6">
                    <div class="p-6 md:p-8 text-gray-900">
                        <div class="text-center py-12">
                            <x-lucide-sparkles class="mx-auto h-16 w-16 text-green-500"/>
                            <h3 class="mt-4 text-2xl font-bold text-gray-900">Importation Parfaite !</h3>
                            <p class="mt-2 text-base text-gray-600">
                                Tous les véhicules de votre fichier ont été importés avec succès dans votre flotte.
                            </p>
                        </div>
                    </div>
                </div>
            @endif

            {{-- Actions --}}
            <div class="flex flex-col sm:flex-row items-center justify-end gap-4">
                <a href="{{ route('admin.vehicles.import.show') }}" class="w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition">
                    <x-lucide-rotate-cw class="h-4 w-4 mr-2"/>
                    Nouvelle Importation
                </a>
                <a href="{{ route('admin.vehicles.index') }}" class="w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 bg-primary-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition">
                    <x-lucide-truck class="h-4 w-4 mr-2"/>
                    Voir tous les Véhicules
                </a>
            </div>
        </div>
    </div>
</x-app-layout>
--- FIN DU FICHIER : ./resources/views/admin/vehicles/import-results.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/vehicles/import.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header">
        <div class="flex justify-between items-center">
            <h2 class="font-semibold text-xl text-gray-800 leading-tight">
                {{ __('Importer des Véhicules par Fichier CSV') }}
            </h2>
            <a href="{{ route('admin.vehicles.index') }}" class="inline-flex items-center px-3 py-1.5 bg-gray-100 border border-gray-300 rounded-md font-medium text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition">
                <x-lucide-arrow-left class="h-4 w-4 mr-1"/>
                Retour
            </a>
        </div>
    </x-slot>

    <div class="py-12">
        <div class="max-w-4xl mx-auto sm:px-6 lg:px-8">
            @if (session('error'))
                <div class="mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start">
                    <div class="flex-shrink-0 mt-0.5">
                        <x-lucide-alert-triangle class="h-5 w-5 text-red-500"/>
                    </div>
                    <div class="ml-3">
                        <h4 class="text-sm font-medium text-red-800">{{ session('error') }}</h4>
                    </div>
                </div>
            @endif

            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-8 text-gray-900">
                    <div class="mb-8 p-5 bg-primary-50 border border-primary-200 rounded-lg">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <x-lucide-info class="h-6 w-6 text-primary-500"/>
                            </div>
                            <div class="ml-3">
                                <h4 class="text-lg font-bold text-primary-800">Instructions d'importation</h4>
                                <ol class="list-decimal list-inside mt-3 text-sm text-primary-700 space-y-2">
                                    <li>Téléchargez le fichier modèle pour voir le format exact des colonnes.</li>
                                    <li>Remplissez le fichier avec vos données. Les colonnes <strong>Immatriculation*, Marque*, Modèle*, Type de Véhicule*, Type de Carburant*, Type de Transmission*, et Statut Initial*</strong> sont obligatoires.</li>
                                    <li>Le format pour toutes les dates doit être <strong>AAAA-MM-JJ</strong> (ex: 2023-05-25).</li>
                                    <li>Les valeurs pour les types et statuts (ex: "Berline", "En service") doivent correspondre exactement à celles définies dans le système.</li>
                                    <li>Enregistrez votre fichier au format CSV.</li>
                                    <li>Sélectionnez l'encodage approprié si votre fichier contient des caractères accentués.</li>
                                </ol>
                                <div class="mt-4 p-3 bg-primary-100 rounded-md">
                                    <p class="text-sm font-medium text-primary-800">
                                        <x-lucide-lightbulb class="inline-block h-4 w-4 mr-1"/>
                                        Conseil : Pour les fichiers Excel, utilisez "Enregistrer sous" et choisissez le format "CSV UTF-8" pour une compatibilité optimale.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <form action="{{ route('admin.vehicles.import.handle') }}" method="POST" enctype="multipart/form-data" class="space-y-6" id="importForm">
                        @csrf
                        <div>
                            <label for="csv_file" class="block font-medium text-sm text-gray-700">Votre Fichier CSV <span class="text-red-500">*</span></label>
                            <div class="mt-2">
                                <input type="file" name="csv_file" id="csv_file" 
                                    class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100 focus:outline-none"
                                    required 
                                    accept=".csv,.txt">
                                <p class="mt-1 text-xs text-gray-500">Formats acceptés : .csv, .txt</p>
                            </div>
                            <x-input-error :messages="$errors->get('csv_file')" class="mt-2" />
                        </div>

                        <div>
                            <label for="encoding" class="block font-medium text-sm text-gray-700">Encodage du fichier</label>
                            <select name="encoding" id="encoding" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring focus:ring-primary-200 focus:ring-opacity-50">
                                <option value="auto" selected>Détection automatique (recommandé)</option>
                                <option value="utf8">UTF-8</option>
                                <option value="iso">ISO-8859-1</option>
                                <option value="windows">Windows-1252</option>
                            </select>
                            <p class="mt-1 text-xs text-gray-500">Sélectionnez l'encodage approprié si vous rencontrez des problèmes avec les caractères accentués.</p>
                        </div>

                        <div class="mt-8 pt-6 border-t flex items-center justify-between">
                            <a href="{{ route('admin.vehicles.import.template') }}" class="inline-flex items-center text-sm font-semibold text-primary-600 hover:text-primary-800 transition">
                                <x-lucide-download class="h-5 w-5 mr-2"/>
                                Télécharger le modèle (.csv)
                            </a>
                            <div class="flex items-center gap-4">
                                <a href="{{ route('admin.vehicles.index') }}" class="text-sm font-semibold text-gray-600 hover:text-gray-900">Annuler</a>
                                <button type="submit" class="inline-flex items-center px-4 py-2 bg-primary-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition" id="submitBtn">
                                    <x-lucide-upload class="h-4 w-4 mr-2"/>
                                    Lancer l'Importation
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    @push('scripts')
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('importForm');
            const submitBtn = document.getElementById('submitBtn');
            const fileInput = document.getElementById('csv_file');
            
            form.addEventListener('submit', function(e) {
                if (fileInput.files.length > 0) {
                    submitBtn.disabled = true;
                    submitBtn.innerHTML = `<svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg> Traitement en cours...`;
                }
            });
            
            fileInput.addEventListener('change', function() {
                const fileName = this.files[0]?.name;
                if (fileName) {
                    // Vérifier l'extension du fichier
                    const extension = fileName.split('.').pop().toLowerCase();
                    if (extension !== 'csv' && extension !== 'txt') {
                        alert("Format de fichier non valide. Veuillez sélectionner un fichier CSV ou TXT.");
                        this.value = '';
                    }
                }
            });
        });
    </script>
    @endpush
</x-app-layout>
--- FIN DU FICHIER : ./resources/views/admin/vehicles/import.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/admin/vehicles/index.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            {{ __('Gestion de la Flotte - Véhicules') }}
        </h2>
    </x-slot>

    {{-- Initialisation d'Alpine.js pour gérer la modale de suppression/archivage --}}
    <div x-data="{
            showConfirmModal: false,
            modalAction: '', // 'archive' ou 'delete'
            modalTitle: '',
            modalDescription: '',
            modalButtonText: '',
            modalButtonClass: '',
            modalIconClass: '',
            vehicleToProcess: {},
            formUrl: '',
            isForceDelete: false,

            openModal(event, action) {
                const button = event.currentTarget;
                this.vehicleToProcess = JSON.parse(button.dataset.vehicle);
                this.formUrl = button.dataset.url;
                this.modalAction = action;

                if (action === 'archive') {
                    this.modalTitle = 'Archiver le Véhicule';
                    this.modalDescription = `Êtes-vous sûr de vouloir archiver le véhicule ${this.vehicleToProcess.brand} ${this.vehicleToProcess.model} (${this.vehicleToProcess.registration_plate}) ? Il pourra être restauré plus tard.`;
                    this.modalButtonText = 'Confirmer l\'Archivage';
                    this.modalButtonClass = 'bg-yellow-600 hover:bg-yellow-700';
                    this.modalIconClass = 'text-yellow-600 bg-yellow-100';
                    this.isForceDelete = false;
                } else if (action === 'delete') {
                    this.modalTitle = 'Suppression Définitive';
                    this.modalDescription = `Cette action est irréversible. Toutes les données associées à ce véhicule (maintenances, affectations...) seront définitivement perdues. Confirmez-vous la suppression du véhicule ${this.vehicleToProcess.brand} ${this.vehicleToProcess.model} (${this.vehicleToProcess.registration_plate}) ?`;
                    this.modalButtonText = 'Supprimer Définitivement';
                    this.modalButtonClass = 'bg-red-600 hover:bg-red-700';
                    this.modalIconClass = 'text-red-600 bg-red-100';
                    this.isForceDelete = true;
                }
                this.showConfirmModal = true;
            }
        }" class="py-12">

        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">

            {{-- Section des Filtres et de la Recherche --}}
            <div class="mb-6 bg-white p-4 shadow-sm sm:rounded-lg">
                <form action="{{ route('admin.vehicles.index') }}" method="GET">
                    <div class="flex flex-col md:flex-row md:items-end md:space-x-4 space-y-2 md:space-y-0">
                        <div class="flex-grow">
                            <label for="search" class="block text-sm font-medium text-gray-700">Recherche</label>
                            <input type="text" name="search" id="search" value="{{ $filters['search'] ?? '' }}" placeholder="Immat, marque, modèle..." class="mt-1 block w-full border-gray-300 focus:border-primary-500 focus:ring-primary-500 rounded-md shadow-sm text-sm">
                        </div>
                        <div class="flex-shrink-0">
                            <label for="status_id" class="block text-sm font-medium text-gray-700">Statut</label>
                            <select name="status_id" id="status_id" class="mt-1 block w-full border-gray-300 focus:border-primary-500 focus:ring-primary-500 rounded-md shadow-sm text-sm">
                                <option value="">Tous</option>
                                @foreach($vehicleStatuses as $status)
                                    <option value="{{ $status->id }}" @selected(($filters['status_id'] ?? '') == $status->id)>{{ $status->name }}</option>
                                @endforeach
                            </select>
                        </div>
                        <div class="flex-shrink-0">
                            <label for="per_page" class="block text-sm font-medium text-gray-700">Par page</label>
                            <select name="per_page" id="per_page" onchange="this.form.submit()" class="mt-1 block w-full border-gray-300 focus:border-primary-500 focus:ring-primary-500 rounded-md shadow-sm text-sm">
                                @foreach(['15', '30', '50', '100'] as $value)
                                    <option value="{{ $value }}" @selected(($filters['per_page'] ?? '15') == $value)>{{ $value }}</option>
                                @endforeach
                            </select>
                        </div>
                        <div>
                            <label for="view_deleted" class="block text-sm font-medium text-gray-700">Affichage</label>
                            <select name="view_deleted" id="view_deleted" onchange="this.form.submit()" class="mt-1 block w-full border-gray-300 focus:border-primary-500 focus:ring-primary-500 rounded-md shadow-sm text-sm">
                                <option value="">Actifs</option>
                                <option value="true" @selected(request('view_deleted'))>Archivés</option>
                            </select>
                        </div>
                        <div class="flex-shrink-0 flex space-x-2">
                            <button type="submit" class="inline-flex items-center justify-center w-full px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700">Filtrer</button>
                            <a href="{{ route('admin.vehicles.index') }}" class="inline-flex items-center justify-center w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">Reset</a>
                        </div>
                    </div>
                </form>
            </div>

            

            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-6 text-gray-900">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold text-gray-700">{{ __('Liste des Véhicules') }}</h3>
                        <div class="flex space-x-2">
                            @can('create vehicles')
                                <a href="{{ route('admin.vehicles.import.show') }}" class="inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50">
                                    <x-lucide-upload class="w-4 h-4 mr-2" stroke-width="1.5"/>
                                    Importer
                                </a>
                                <a href="{{ route('admin.vehicles.create') }}" class="inline-flex items-center px-4 py-2 bg-primary-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-primary-700">
                                    <x-lucide-plus-circle class="w-4 h-4 mr-2" stroke-width="1.5"/>
                                    Ajouter
                                </a>
                            @endcan
                        </div>
                    </div>

                    <div class="overflow-x-auto border border-gray-200 rounded-lg">
                        <table class="w-full divide-y divide-gray-200">
                            <thead class="bg-gray-100">
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Immatriculation</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Marque & Modèle</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Kilométrage</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Statut</th>
                                    <th scope="col" class="px-6 py-3 text-right text-xs font-bold text-gray-600 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                @forelse ($vehicles as $vehicle)
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-3 whitespace-nowrap text-sm font-mono text-gray-900">{{ $vehicle->registration_plate }}</td>
                                        <td class="px-6 py-3 whitespace-nowrap text-sm text-gray-800">{{ $vehicle->brand }} {{ $vehicle->model }}</td>
                                        <td class="px-6 py-3 whitespace-nowrap text-sm text-gray-500">{{ number_format($vehicle->current_mileage, 0, ',', ' ') }} km</td>
                                        <td class="px-6 py-3 whitespace-nowrap text-sm">
                                            @php
                                                $statusName = $vehicle->vehicleStatus?->name ?? 'Indéfini';
                                                $statusClass = 'bg-gray-100 text-gray-800'; // Default
                                                if ($vehicle->trashed()) {
                                                    $statusName = 'Archivé';
                                                    $statusClass = 'bg-gray-200 text-gray-600';
                                                } else {
                                                    switch ($statusName) {
                                                        case 'Parking': $statusClass = 'bg-blue-100 text-blue-800'; break;
                                                        case 'En mission': $statusClass = 'bg-green-100 text-green-800'; break;
                                                        case 'En maintenance': $statusClass = 'bg-yellow-100 text-yellow-800'; break;
                                                        case 'Hors service': $statusClass = 'bg-red-100 text-red-800'; break;
                                                    }
                                                }
                                            @endphp
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full {{ $statusClass }}">{{ $statusName }}</span>
                                        </td>
                                        <td class="px-6 py-3 whitespace-nowrap text-right text-sm font-medium">
                                            <div class="flex items-center justify-end space-x-2">
                                                @if ($vehicle->trashed())
                                                    @can('restore vehicles')
                                                        <form method="POST" action="{{ route('admin.vehicles.restore', $vehicle->id) }}">
                                                            @csrf @method('PATCH')
                                                            <button type="submit" title="Restaurer" class="p-2 rounded-full text-gray-400 hover:bg-green-100 hover:text-green-600">
                                                                <x-lucide-rotate-ccw class="h-5 w-5" stroke-width="1.5"/>
                                                            </button>
                                                        </form>
                                                    @endcan
                                                    @can('force delete vehicles')
                                                        <button type="button" @click="openModal($event, 'delete')" data-vehicle='@json($vehicle)' data-url="{{ route('admin.vehicles.force-delete', $vehicle->id) }}" title="Supprimer Définitivement" class="p-2 rounded-full text-gray-400 hover:bg-red-100 hover:text-red-600">
                                                            <x-lucide-trash-2 class="h-5 w-5" stroke-width="1.5"/>
                                                        </button>
                                                    @endcan
                                                @else
                                                    @can('edit vehicles')
                                                        <a href="{{ route('admin.vehicles.edit', $vehicle) }}" title="Modifier" class="p-2 rounded-full text-gray-400 hover:bg-primary-100 hover:text-primary-600">
                                                            <x-lucide-file-pen-line class="h-5 w-5" stroke-width="1.5"/>
                                                        </a>
                                                    @endcan
                                                    @can('delete vehicles')
                                                        <button type="button" @click="openModal($event, 'archive')" data-vehicle='@json($vehicle)' data-url="{{ route('admin.vehicles.destroy', $vehicle->id) }}" title="Archiver" class="p-2 rounded-full text-gray-400 hover:bg-yellow-100 hover:text-yellow-600">
                                                            <x-lucide-archive class="h-5 w-5" stroke-width="1.5"/>
                                                        </button>
                                                    @endcan
                                                @endif
                                            </div>
                                        </td>
                                    </tr>
                                @empty
                                    <tr><td colspan="5" class="px-6 py-4 text-center text-sm text-gray-500">Aucun véhicule ne correspond à vos critères.</td></tr>
                                @endforelse
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-6">
                        {{ $vehicles->withQueryString()->links() }}
                    </div>
                </div>
            </div>
        </div>

        {{-- Fenêtre Modale de Confirmation --}}
        <div x-show="showConfirmModal" x-transition class="fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-60" style="display: none;">
            <div @click.away="showConfirmModal = false" class="bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4">
                <div class="sm:flex sm:items-start">
                    <div class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full sm:mx-0 sm:h-10 sm:w-10" :class="modalIconClass">
                        <x-lucide-alert-triangle x-show="modalAction === 'archive' || modalAction === 'delete'" class="h-6 w-6" stroke-width="1.5"/>
                    </div>
                    <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left">
                        <h3 class="text-base font-semibold leading-6 text-gray-900" x-text="modalTitle"></h3>
                        <div class="mt-2">
                            <p class="text-sm text-gray-600" x-html="modalDescription"></p>
                        </div>
                    </div>
                </div>
                <div class="mt-5 sm:mt-4 sm:flex sm:flex-row-reverse">
                    <form :action="formUrl" method="POST">
                        @csrf
                        @method('DELETE')
                        <button type="submit" class="inline-flex w-full justify-center rounded-md px-4 py-2 text-sm font-semibold text-white shadow-sm sm:ml-3 sm:w-auto" :class="modalButtonClass" x-text="modalButtonText">
                        </button>
                    </form>
                    <button type="button" @click="showConfirmModal = false" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-4 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">
                        Annuler
                    </button>
                </div>
            </div>
        </div>
    </div>
</x-app-layout>
--- FIN DU FICHIER : ./resources/views/admin/vehicles/index.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/auth/confirm-password.blade.php
////////////////////////////////////////////////////////////////

<x-guest-layout>
    <div class="mb-4 text-sm text-gray-600">
        {{ __('This is a secure area of the application. Please confirm your password before continuing.') }}
    </div>

    <form method="POST" action="{{ route('password.confirm') }}">
        @csrf

        <!-- Password -->
        <div>
            <x-input-label for="password" :value="__('Password')" />

            <x-text-input id="password" class="block mt-1 w-full"
                            type="password"
                            name="password"
                            required autocomplete="current-password" />

            <x-input-error :messages="$errors->get('password')" class="mt-2" />
        </div>

        <div class="flex justify-end mt-4">
            <x-primary-button>
                {{ __('Confirm') }}
            </x-primary-button>
        </div>
    </form>
</x-guest-layout>

--- FIN DU FICHIER : ./resources/views/auth/confirm-password.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/auth/forgot-password.blade.php
////////////////////////////////////////////////////////////////

<x-guest-layout>
    <div class="mb-4 text-sm text-gray-600">
        {{ __('Forgot your password? No problem. Just let us know your email address and we will email you a password reset link that will allow you to choose a new one.') }}
    </div>

    <!-- Session Status -->
    <x-auth-session-status class="mb-4" :status="session('status')" />

    <form method="POST" action="{{ route('password.email') }}">
        @csrf

        <!-- Email Address -->
        <div>
            <x-input-label for="email" :value="__('Email')" />
            <x-text-input id="email" class="block mt-1 w-full" type="email" name="email" :value="old('email')" required autofocus />
            <x-input-error :messages="$errors->get('email')" class="mt-2" />
        </div>

        <div class="flex items-center justify-end mt-4">
            <x-primary-button>
                {{ __('Email Password Reset Link') }}
            </x-primary-button>
        </div>
    </form>
</x-guest-layout>

--- FIN DU FICHIER : ./resources/views/auth/forgot-password.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/auth/login.blade.php
////////////////////////////////////////////////////////////////

<x-guest-layout>
    <!-- Session Status -->
    <x-auth-session-status class="mb-4" :status="session('status')" />

    <form method="POST" action="{{ route('login') }}">
        @csrf

        <!-- Email Address -->
        <div>
            <x-input-label for="email" :value="__('Email')" />
            <x-text-input id="email" class="block mt-1 w-full" type="email" name="email" :value="old('email')" required autofocus autocomplete="username" />
            <x-input-error :messages="$errors->get('email')" class="mt-2" />
        </div>

        <!-- Password -->
        <div class="mt-4">
            <x-input-label for="password" :value="__('Password')" />

            <x-text-input id="password" class="block mt-1 w-full"
                            type="password"
                            name="password"
                            required autocomplete="current-password" />

            <x-input-error :messages="$errors->get('password')" class="mt-2" />
        </div>

        <!-- Remember Me -->
        <div class="block mt-4">
            <label for="remember_me" class="inline-flex items-center">
                <input id="remember_me" type="checkbox" class="rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500" name="remember">
                <span class="ms-2 text-sm text-gray-600">{{ __('Remember me') }}</span>
            </label>
        </div>

        <div class="flex items-center justify-end mt-4">
            @if (Route::has('password.request'))
                <a class="underline text-sm text-gray-600 hover:text-gray-900 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" href="{{ route('password.request') }}">
                    {{ __('Forgot your password?') }}
                </a>
            @endif

            <x-primary-button class="ms-3">
                {{ __('Log in') }}
            </x-primary-button>
        </div>
    </form>
</x-guest-layout>

--- FIN DU FICHIER : ./resources/views/auth/login.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/auth/register.blade.php
////////////////////////////////////////////////////////////////

<x-guest-layout>
    <form method="POST" action="{{ route('register') }}">
        @csrf

        <!-- First Name -->
        <div>
            <x-input-label for="first_name" :value="__('Prénom')" />
            <x-text-input id="first_name" class="block mt-1 w-full" type="text" name="first_name" :value="old('first_name')" required autofocus autocomplete="given-name" />
            <x-input-error :messages="$errors->get('first_name')" class="mt-2" />
        </div>
       <!-- Last Name -->

	<div class="mt-4">
            <x-input-label for="last_name" :value="__('Nom de famille')" />
            <x-text-input id="last_name" class="block mt-1 w-full" type="text" name="last_name" :value="old('last_name')" required autocomplete="family-name" />
            <x-input-error :messages="$errors->get('last_name')" class="mt-2" />
        </div>


        <!-- Email Address -->
        <div class="mt-4">
            <x-input-label for="email" :value="__('Email')" />
            <x-text-input id="email" class="block mt-1 w-full" type="email" name="email" :value="old('email')" required autocomplete="username" />
            <x-input-error :messages="$errors->get('email')" class="mt-2" />
        </div>

        <!-- Password -->
        <div class="mt-4">
            <x-input-label for="password" :value="__('Password')" />

            <x-text-input id="password" class="block mt-1 w-full"
                            type="password"
                            name="password"
                            required autocomplete="new-password" />

            <x-input-error :messages="$errors->get('password')" class="mt-2" />
        </div>

        <!-- Confirm Password -->
        <div class="mt-4">
            <x-input-label for="password_confirmation" :value="__('Confirm Password')" />

            <x-text-input id="password_confirmation" class="block mt-1 w-full"
                            type="password"
                            name="password_confirmation" required autocomplete="new-password" />

            <x-input-error :messages="$errors->get('password_confirmation')" class="mt-2" />
        </div>

        <div class="flex items-center justify-end mt-4">
            <a class="underline text-sm text-gray-600 hover:text-gray-900 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" href="{{ route('login') }}">
                {{ __('Already registered?') }}
            </a>

            <x-primary-button class="ms-4">
                {{ __('Register') }}
            </x-primary-button>
        </div>
    </form>
</x-guest-layout>

--- FIN DU FICHIER : ./resources/views/auth/register.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/auth/reset-password.blade.php
////////////////////////////////////////////////////////////////

<x-guest-layout>
    <form method="POST" action="{{ route('password.store') }}">
        @csrf

        <!-- Password Reset Token -->
        <input type="hidden" name="token" value="{{ $request->route('token') }}">

        <!-- Email Address -->
        <div>
            <x-input-label for="email" :value="__('Email')" />
            <x-text-input id="email" class="block mt-1 w-full" type="email" name="email" :value="old('email', $request->email)" required autofocus autocomplete="username" />
            <x-input-error :messages="$errors->get('email')" class="mt-2" />
        </div>

        <!-- Password -->
        <div class="mt-4">
            <x-input-label for="password" :value="__('Password')" />
            <x-text-input id="password" class="block mt-1 w-full" type="password" name="password" required autocomplete="new-password" />
            <x-input-error :messages="$errors->get('password')" class="mt-2" />
        </div>

        <!-- Confirm Password -->
        <div class="mt-4">
            <x-input-label for="password_confirmation" :value="__('Confirm Password')" />

            <x-text-input id="password_confirmation" class="block mt-1 w-full"
                                type="password"
                                name="password_confirmation" required autocomplete="new-password" />

            <x-input-error :messages="$errors->get('password_confirmation')" class="mt-2" />
        </div>

        <div class="flex items-center justify-end mt-4">
            <x-primary-button>
                {{ __('Reset Password') }}
            </x-primary-button>
        </div>
    </form>
</x-guest-layout>

--- FIN DU FICHIER : ./resources/views/auth/reset-password.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/auth/verify-email.blade.php
////////////////////////////////////////////////////////////////

<x-guest-layout>
    <div class="mb-4 text-sm text-gray-600">
        {{ __('Thanks for signing up! Before getting started, could you verify your email address by clicking on the link we just emailed to you? If you didn\'t receive the email, we will gladly send you another.') }}
    </div>

    @if (session('status') == 'verification-link-sent')
        <div class="mb-4 font-medium text-sm text-green-600">
            {{ __('A new verification link has been sent to the email address you provided during registration.') }}
        </div>
    @endif

    <div class="mt-4 flex items-center justify-between">
        <form method="POST" action="{{ route('verification.send') }}">
            @csrf

            <div>
                <x-primary-button>
                    {{ __('Resend Verification Email') }}
                </x-primary-button>
            </div>
        </form>

        <form method="POST" action="{{ route('logout') }}">
            @csrf

            <button type="submit" class="underline text-sm text-gray-600 hover:text-gray-900 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                {{ __('Log Out') }}
            </button>
        </form>
    </div>
</x-guest-layout>

--- FIN DU FICHIER : ./resources/views/auth/verify-email.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/components/application-logo.blade.php
////////////////////////////////////////////////////////////////

<svg viewBox="0 0 316 316" xmlns="http://www.w3.org/2000/svg" {{ $attributes }}>
    <path d="M305.8 81.125C305.77 80.995 305.69 80.885 305.65 80.755C305.56 80.525 305.49 80.285 305.37 80.075C305.29 79.935 305.17 79.815 305.07 79.685C304.94 79.515 304.83 79.325 304.68 79.175C304.55 79.045 304.39 78.955 304.25 78.845C304.09 78.715 303.95 78.575 303.77 78.475L251.32 48.275C249.97 47.495 248.31 47.495 246.96 48.275L194.51 78.475C194.33 78.575 194.19 78.725 194.03 78.845C193.89 78.955 193.73 79.045 193.6 79.175C193.45 79.325 193.34 79.515 193.21 79.685C193.11 79.815 192.99 79.935 192.91 80.075C192.79 80.285 192.71 80.525 192.63 80.755C192.58 80.875 192.51 80.995 192.48 81.125C192.38 81.495 192.33 81.875 192.33 82.265V139.625L148.62 164.795V52.575C148.62 52.185 148.57 51.805 148.47 51.435C148.44 51.305 148.36 51.195 148.32 51.065C148.23 50.835 148.16 50.595 148.04 50.385C147.96 50.245 147.84 50.125 147.74 49.995C147.61 49.825 147.5 49.635 147.35 49.485C147.22 49.355 147.06 49.265 146.92 49.155C146.76 49.025 146.62 48.885 146.44 48.785L93.99 18.585C92.64 17.805 90.98 17.805 89.63 18.585L37.18 48.785C37 48.885 36.86 49.035 36.7 49.155C36.56 49.265 36.4 49.355 36.27 49.485C36.12 49.635 36.01 49.825 35.88 49.995C35.78 50.125 35.66 50.245 35.58 50.385C35.46 50.595 35.38 50.835 35.3 51.065C35.25 51.185 35.18 51.305 35.15 51.435C35.05 51.805 35 52.185 35 52.575V232.235C35 233.795 35.84 235.245 37.19 236.025L142.1 296.425C142.33 296.555 142.58 296.635 142.82 296.725C142.93 296.765 143.04 296.835 143.16 296.865C143.53 296.965 143.9 297.015 144.28 297.015C144.66 297.015 145.03 296.965 145.4 296.865C145.5 296.835 145.59 296.775 145.69 296.745C145.95 296.655 146.21 296.565 146.45 296.435L251.36 236.035C252.72 235.255 253.55 233.815 253.55 232.245V174.885L303.81 145.945C305.17 145.165 306 143.725 306 142.155V82.265C305.95 81.875 305.89 81.495 305.8 81.125ZM144.2 227.205L100.57 202.515L146.39 176.135L196.66 147.195L240.33 172.335L208.29 190.625L144.2 227.205ZM244.75 114.995V164.795L226.39 154.225L201.03 139.625V89.825L219.39 100.395L244.75 114.995ZM249.12 57.105L292.81 82.265L249.12 107.425L205.43 82.265L249.12 57.105ZM114.49 184.425L96.13 194.995V85.305L121.49 70.705L139.85 60.135V169.815L114.49 184.425ZM91.76 27.425L135.45 52.585L91.76 77.745L48.07 52.585L91.76 27.425ZM43.67 60.135L62.03 70.705L87.39 85.305V202.545V202.555V202.565C87.39 202.735 87.44 202.895 87.46 203.055C87.49 203.265 87.49 203.485 87.55 203.695V203.705C87.6 203.875 87.69 204.035 87.76 204.195C87.84 204.375 87.89 204.575 87.99 204.745C87.99 204.745 87.99 204.755 88 204.755C88.09 204.905 88.22 205.035 88.33 205.175C88.45 205.335 88.55 205.495 88.69 205.635L88.7 205.645C88.82 205.765 88.98 205.855 89.12 205.965C89.28 206.085 89.42 206.225 89.59 206.325C89.6 206.325 89.6 206.325 89.61 206.335C89.62 206.335 89.62 206.345 89.63 206.345L139.87 234.775V285.065L43.67 229.705V60.135ZM244.75 229.705L148.58 285.075V234.775L219.8 194.115L244.75 179.875V229.705ZM297.2 139.625L253.49 164.795V114.995L278.85 100.395L297.21 89.825V139.625H297.2Z"/>
</svg>

--- FIN DU FICHIER : ./resources/views/components/application-logo.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/components/auth-session-status.blade.php
////////////////////////////////////////////////////////////////

@props(['status'])

@if ($status)
    <div {{ $attributes->merge(['class' => 'font-medium text-sm text-green-600']) }}>
        {{ $status }}
    </div>
@endif

--- FIN DU FICHIER : ./resources/views/components/auth-session-status.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/components/danger-button.blade.php
////////////////////////////////////////////////////////////////

<button {{ $attributes->merge(['type' => 'submit', 'class' => 'inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-500 active:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition ease-in-out duration-150']) }}>
    {{ $slot }}
</button>

--- FIN DU FICHIER : ./resources/views/components/danger-button.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/components/datetime-picker.blade.php
////////////////////////////////////////////////////////////////

@props([
    'name' => '',
    'id' => '',
    'value' => '',
    'label' => '',
    'required' => false,
])

<div
    x-data="dateTimePicker({
        value: '{{ $value }}',
        name: '{{ $name }}',
        id: '{{ $id }}'
    })"
    x-init="init()"
    class="flex w-full items-center"
>
    <div class="ml-3 flex items-center first:ml-0 flex-1 min-w-0">
        <div class="relative trigger w-full">
            <x-input-label :for="$id . '-date'" :value="$label" />
            <div class="relative">
                <input
                    x-ref="datePicker"
                    id="{{ $id }}-date"
                    type="text"
                    class="form-input block w-full h-8 text-md pl-10 pr-4 py-3 text-left"
                    placeholder="Select Date"
                />
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm10 5H4v8h12V7z" clip-rule="evenodd" />
                    </svg>
                </div>
            </div>
            <input x-ref="hiddenInput" name="{{ $name }}" id="{{ $id }}" type="hidden" value="{{ $value }}">
        </div>
    </div>
    <div class="ml-3 flex items-center first:ml-0">
        <div class="relative trigger w-full" style="max-width: 175px;">
            <x-input-label for="{{ $id }}-time" value="Time" />
            <div class="relative">
                <input
                    x-ref="timePicker"
                    id="{{ $id }}-time"
                    type="text"
                    class="form-input block w-full h-8 text-md pl-10 pr-4 py-3 text-left"
                    placeholder="Select Time"
                    disabled
                />
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l3 3a1 1 0 001.414-1.414L11 10.586V6z" clip-rule="evenodd" />
                    </svg>
                </div>
            </div>
        </div>
    </div>
</div>

@push('scripts')
<script>
    function dateTimePicker(config) {
        return {
            value: config.value,
            name: config.name,
            id: config.id,
            datePicker: null,
            timePicker: null,

            init() {
                const now = new Date();
                const minutes = now.getMinutes();
                const roundedMinutes = Math.round(minutes / 30) * 30;
                now.setMinutes(roundedMinutes);
                now.setSeconds(0);

                this.datePicker = flatpickr(this.$refs.datePicker, {
                    dateFormat: 'Y-m-d',
                    onChange: (selectedDates, dateStr, instance) => {
                        if (selectedDates.length > 0) {
                            this.timePicker.set('minDate', dateStr);
                            this.timePicker.set('maxDate', dateStr);
                            this.$refs.timePicker.disabled = false;
                            if (!this.timePicker.selectedDates.length) {
                                this.timePicker.setDate(now, false);
                            }
                        } else {
                            this.$refs.timePicker.disabled = true;
                            this.timePicker.clear();
                        }
                        this.updateHiddenInput();
                    }
                });

                this.timePicker = flatpickr(this.$refs.timePicker, {
                    enableTime: true,
                    noCalendar: true,
                    dateFormat: 'H:i',
                    minuteIncrement: 30,
                    time_24hr: true,
                    allowInput: true,
                    onChange: (selectedDates, dateStr, instance) => {
                        this.updateHiddenInput();
                    }
                });

                if (this.value) {
                    const [date, time] = this.value.split(' ');
                    this.datePicker.setDate(date);
                    this.timePicker.setDate(time);
                    this.$refs.timePicker.disabled = false;
                } else {
                    // Set default time when no value is provided
                    this.timePicker.setDate(now, false);
                }
            },

            updateHiddenInput() {
                const date = this.$refs.datePicker.value;
                const time = this.$refs.timePicker.value;

                if (date && time) {
                    this.$refs.hiddenInput.value = `${date} ${time}`;
                } else {
                    this.$refs.hiddenInput.value = '';
                }
            }
        }
    }
</script>
@endpush
--- FIN DU FICHIER : ./resources/views/components/datetime-picker.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/components/dropdown-link.blade.php
////////////////////////////////////////////////////////////////

<a {{ $attributes->merge(['class' => 'block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out']) }}>{{ $slot }}</a>

--- FIN DU FICHIER : ./resources/views/components/dropdown-link.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/components/dropdown.blade.php
////////////////////////////////////////////////////////////////

@props(['align' => 'right', 'width' => '48', 'contentClasses' => 'py-1 bg-white'])

@php
switch ($align) {
    case 'left':
        $alignmentClasses = 'ltr:origin-top-left rtl:origin-top-right start-0';
        break;
    case 'top':
        $alignmentClasses = 'origin-top';
        break;
    case 'right':
    default:
        $alignmentClasses = 'ltr:origin-top-right rtl:origin-top-left end-0';
        break;
}

switch ($width) {
    case '48':
        $width = 'w-48';
        break;
}
@endphp

<div class="relative" x-data="{ open: false }" @click.outside="open = false" @close.stop="open = false">
    <div @click="open = ! open">
        {{ $trigger }}
    </div>

    <div x-show="open"
            x-transition:enter="transition ease-out duration-200"
            x-transition:enter-start="opacity-0 scale-95"
            x-transition:enter-end="opacity-100 scale-100"
            x-transition:leave="transition ease-in duration-75"
            x-transition:leave-start="opacity-100 scale-100"
            x-transition:leave-end="opacity-0 scale-95"
            class="absolute z-50 mt-2 {{ $width }} rounded-md shadow-lg {{ $alignmentClasses }}"
            style="display: none;"
            @click="open = false">
        <div class="rounded-md ring-1 ring-black ring-opacity-5 {{ $contentClasses }}">
            {{ $content }}
        </div>
    </div>
</div>

--- FIN DU FICHIER : ./resources/views/components/dropdown.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/components/flash-message.blade.php
////////////////////////////////////////////////////////////////

@props(['type' => 'success', 'message'])

@php
    $isVisible = $message ? true : false;
    $bgColor = [
        'success' => 'bg-green-100 border-green-500',
        'error' => 'bg-red-100 border-red-500',
        'warning' => 'bg-yellow-100 border-yellow-500',
        'info' => 'bg-blue-100 border-blue-500',
    ][$type];
    $textColor = [
        'success' => 'text-green-700',
        'error' => 'text-red-700',
        'warning' => 'text-yellow-700',
        'info' => 'text-blue-700',
    ][$type];
@endphp

<div x-data="{ show: @json($isVisible) }"
     x-show="show"
     x-transition
     x-init="setTimeout(() => show = false, 5000)"
     {{ $attributes->merge(['class' => 'mb-4 border-l-4 p-4 ' . $bgColor . ' ' . $textColor]) }}
     role="alert">
    <p class="font-bold">{{ $message }}</p>
</div>

--- FIN DU FICHIER : ./resources/views/components/flash-message.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/components/handover-status-switcher.blade.php
////////////////////////////////////////////////////////////////

{{-- /resources/views/components/handover-status-switcher.blade.php --}}
@props([
    'item',                                 // Le nom de l'item à vérifier (ex: "Carte Grise")
    'category',                             // La catégorie de l'item (ex: "Papiers du véhicule")
    'statuses' => ['Bon', 'Moyen', 'Mauvais', 'N/A'], // Les options de statut possibles
    'selected' => null                      // Le statut actuellement sélectionné (pour l'édition)
])

@php
    // CLÉ DE LA CORRECTION :
    // On détermine l'état initial. Priorité à la prop 'selected' (valeur de la BDD),
    // sinon à l'ancien input en cas d'erreur de validation, sinon 'N/A' par défaut.
    $initialStatus = $selected ?? old('checklist.' . $category . '.' . Str::slug($item, '_'), 'N/A');

    // On transforme les noms d'item et de catégorie en slugs pour les attributs HTML
    $itemSlug = Str::slug($item, '_');
@endphp

{{-- 
    La valeur calculée en PHP est injectée dans x-data pour initialiser l'état d'Alpine.js.
    C'est le pont entre le backend (Laravel) et le frontend (JavaScript).
--}}
<div x-data="{ status: '{{ $initialStatus }}' }" class="flex items-center justify-between py-2">
    <label class="text-sm text-gray-800 font-medium" for="status-switcher-{{ $category }}-{{ $itemSlug }}">{{ $item }}</label>

    <div class="flex items-center space-x-1 p-0.5 bg-gray-200 rounded-full" id="status-switcher-{{ $category }}-{{ $itemSlug }}">
        
        {{-- Input caché qui enverra la valeur au serveur. Son nom est dynamique. --}}
        <input type="hidden" name="checklist[{{ $category }}][{{ $itemSlug }}]" x-model="status">

        {{-- Boucle sur les statuts pour générer les boutons --}}
        @foreach($statuses as $buttonStatus)
            <button 
                type="button" 
                @click="status = '{{ $buttonStatus }}'"
                :class="{
                    'bg-green-500 text-white shadow-md': status === '{{ $buttonStatus }}' && ('{{ $buttonStatus }}' === 'Bon' || '{{ $buttonStatus }}' === 'Oui'),
                    'bg-red-500 text-white shadow-md': status === '{{ $buttonStatus }}' && ('{{ $buttonStatus }}' === 'Mauvais' || '{{ $buttonStatus }}' === 'Non'),
                    'bg-yellow-500 text-white shadow-md': status === '{{ $buttonStatus }}' && '{{ $buttonStatus }}' === 'Moyen',
                    'bg-gray-400 text-white shadow-md': status === '{{ $buttonStatus }}' && '{{ $buttonStatus }}' === 'N/A',
                    'bg-transparent text-gray-500 hover:bg-gray-300': status !== '{{ $buttonStatus }}'
                }"
                class="px-3 py-1 text-xs font-bold rounded-full transition-all duration-200 ease-in-out"
                aria-label="Définir le statut de {{ $item }} à {{ $buttonStatus }}"
            >
                {{ $buttonStatus }}
            </button>
        @endforeach
    </div>
</div>
--- FIN DU FICHIER : ./resources/views/components/handover-status-switcher.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/components/input-error.blade.php
////////////////////////////////////////////////////////////////

@props(['messages'])

@if ($messages)
    <ul {{ $attributes->merge(['class' => 'text-sm text-red-600 space-y-1']) }}>
        @foreach ((array) $messages as $message)
            <li>{{ $message }}</li>
        @endforeach
    </ul>
@endif

--- FIN DU FICHIER : ./resources/views/components/input-error.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/components/input-label.blade.php
////////////////////////////////////////////////////////////////

@props(['value'])

<label {{ $attributes->merge(['class' => 'block font-medium text-sm text-gray-700']) }}>
    {{ $value ?? $slot }}
</label>

--- FIN DU FICHIER : ./resources/views/components/input-label.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/components/modal.blade.php
////////////////////////////////////////////////////////////////

@props([
    'name',
    'show' => false,
    'maxWidth' => '2xl'
])

@php
$maxWidth = [
    'sm' => 'sm:max-w-sm',
    'md' => 'sm:max-w-md',
    'lg' => 'sm:max-w-lg',
    'xl' => 'sm:max-w-xl',
    '2xl' => 'sm:max-w-2xl',
][$maxWidth];
@endphp

<div
    x-data="{
        show: @js($show),
        focusables() {
            // All focusable element types...
            let selector = 'a, button, input:not([type=\'hidden\']), textarea, select, details, [tabindex]:not([tabindex=\'-1\'])'
            return [...$el.querySelectorAll(selector)]
                // All non-disabled elements...
                .filter(el => ! el.hasAttribute('disabled'))
        },
        firstFocusable() { return this.focusables()[0] },
        lastFocusable() { return this.focusables().slice(-1)[0] },
        nextFocusable() { return this.focusables()[this.nextFocusableIndex()] || this.firstFocusable() },
        prevFocusable() { return this.focusables()[this.prevFocusableIndex()] || this.lastFocusable() },
        nextFocusableIndex() { return (this.focusables().indexOf(document.activeElement) + 1) % (this.focusables().length + 1) },
        prevFocusableIndex() { return Math.max(0, this.focusables().indexOf(document.activeElement)) -1 },
    }"
    x-init="$watch('show', value => {
        if (value) {
            document.body.classList.add('overflow-y-hidden');
            {{ $attributes->has('focusable') ? 'setTimeout(() => firstFocusable().focus(), 100)' : '' }}
        } else {
            document.body.classList.remove('overflow-y-hidden');
        }
    })"
    x-on:open-modal.window="$event.detail == '{{ $name }}' ? show = true : null"
    x-on:close-modal.window="$event.detail == '{{ $name }}' ? show = false : null"
    x-on:close.stop="show = false"
    x-on:keydown.escape.window="show = false"
    x-on:keydown.tab.prevent="$event.shiftKey || nextFocusable().focus()"
    x-on:keydown.shift.tab.prevent="prevFocusable().focus()"
    x-show="show"
    class="fixed inset-0 overflow-y-auto px-4 py-6 sm:px-0 z-50"
    style="display: {{ $show ? 'block' : 'none' }};"
>
    <div
        x-show="show"
        class="fixed inset-0 transform transition-all"
        x-on:click="show = false"
        x-transition:enter="ease-out duration-300"
        x-transition:enter-start="opacity-0"
        x-transition:enter-end="opacity-100"
        x-transition:leave="ease-in duration-200"
        x-transition:leave-start="opacity-100"
        x-transition:leave-end="opacity-0"
    >
        <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
    </div>

    <div
        x-show="show"
        class="mb-6 bg-white rounded-lg overflow-hidden shadow-xl transform transition-all sm:w-full {{ $maxWidth }} sm:mx-auto"
        x-transition:enter="ease-out duration-300"
        x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
        x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100"
        x-transition:leave="ease-in duration-200"
        x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100"
        x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
    >
        {{ $slot }}
    </div>
</div>

--- FIN DU FICHIER : ./resources/views/components/modal.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/components/nav-link.blade.php
////////////////////////////////////////////////////////////////

@props(['active'])

@php
$classes = ($active ?? false)
            ? 'inline-flex items-center px-1 pt-1 border-b-2 border-indigo-400 text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-indigo-700 transition duration-150 ease-in-out'
            : 'inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out';
@endphp

<a {{ $attributes->merge(['class' => $classes]) }}>
    {{ $slot }}
</a>

--- FIN DU FICHIER : ./resources/views/components/nav-link.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/components/primary-button.blade.php
////////////////////////////////////////////////////////////////

<button {{ $attributes->merge(['type' => 'submit', 'class' => 'inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150']) }}>
    {{ $slot }}
</button>

--- FIN DU FICHIER : ./resources/views/components/primary-button.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/components/responsive-nav-link.blade.php
////////////////////////////////////////////////////////////////

@props(['active'])

@php
$classes = ($active ?? false)
            ? 'group flex items-center px-3 py-2 text-sm font-medium rounded-lg bg-violet-50 text-violet-700'
            : 'group flex items-center px-3 py-2 text-sm font-medium rounded-lg text-gray-600 hover:bg-gray-50 hover:text-gray-900';
@endphp

<a {{ $attributes->merge(['class' => $classes]) }}>
    {{ $slot }}
</a>

--- FIN DU FICHIER : ./resources/views/components/responsive-nav-link.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/components/secondary-button.blade.php
////////////////////////////////////////////////////////////////

<button {{ $attributes->merge(['type' => 'button', 'class' => 'inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150']) }}>
    {{ $slot }}
</button>

--- FIN DU FICHIER : ./resources/views/components/secondary-button.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/components/sidebar/sidebar-group.blade.php
////////////////////////////////////////////////////////////////

@props(['title', 'active'])

<div x-data="{ open: {{ $active ? 'true' : 'false' }} }" class="relative">
    <button @click="open = !open" class="w-full flex items-center p-2 text-base text-gray-700 rounded-lg hover:bg-gray-100 group">
        @if(isset($icon))
            <span class="mr-3 text-gray-500 group-hover:text-gray-700">
                {{ $icon }}
            </span>
        @endif
        <span class="flex-1 ml-1 text-left whitespace-nowrap">{{ $title }}</span>
        <x-lucide-chevron-down class="h-4 w-4 transform transition-transform" ::class="{'rotate-180': open}" stroke-width="1.5"/>
    </button>
    <div x-show="open" x-transition class="mt-1 space-y-1 pl-4 border-l-2 border-dotted border-gray-300 ml-4">
        {{ $slot }}
    </div>
</div>
--- FIN DU FICHIER : ./resources/views/components/sidebar/sidebar-group.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/components/sidebar/sidebar-link.blade.php
////////////////////////////////////////////////////////////////

@props(['active'])

@php
$classes = ($active ?? false)
            ? 'flex items-center p-2 text-base font-medium text-indigo-600 bg-indigo-50 rounded-lg'
            : 'flex items-center p-2 text-base text-gray-700 rounded-lg hover:bg-gray-100 group';
@endphp

<a {{ $attributes->merge(['class' => $classes]) }}>
    @if(isset($icon))
        <span class="mr-3 text-gray-500 group-hover:text-gray-700 {{ ($active ?? false) ? 'text-indigo-600' : '' }}">
            {{ $icon }}
        </span>
    @endif
    <span class="flex-1 ml-1 whitespace-nowrap">{{ $slot }}</span>
</a>
--- FIN DU FICHIER : ./resources/views/components/sidebar/sidebar-link.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/components/sidebar/sidebar-sub-link.blade.php
////////////////////////////////////////////////////////////////

@props(['active'])

@php
$classes = ($active ?? false)
            ? 'flex items-center w-full p-2 pl-4 text-sm font-medium text-indigo-600 rounded-lg bg-indigo-50 active'
            : 'flex items-center w-full p-2 pl-4 text-sm text-gray-600 rounded-lg hover:bg-gray-100';

$iconWrapperClasses = ($active ?? false)
    ? 'flex items-center justify-center h-7 w-7 rounded-full mr-3 bg-indigo-600 text-white'
    : 'flex items-center justify-center h-7 w-7 rounded-full mr-3 bg-gray-100 text-gray-500 border border-gray-300 hover:bg-white hover:border-gray-300';
@endphp

<a {{ $attributes->merge(['class' => $classes]) }}>
    @if(isset($icon))
        <span class="{{ $iconWrapperClasses }}">
            @php
                $newIcon = clone $icon;
                $newIcon->attributes['class'] = 'h-2.5 w-2.5'; // Force 10px
            @endphp
            {{ $newIcon }}
        </span>
    @else
        <span class="mr-3 w-7"></span>
    @endif
    <span class="truncate">{{ $slot }}</span>
</a>
--- FIN DU FICHIER : ./resources/views/components/sidebar/sidebar-sub-link.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/components/sub-nav-link.blade.php
////////////////////////////////////////////////////////////////

@props(['active' => false])

@php
// ----- CLASSES DE CONFIGURATION -----

// Classes de base pour le lien <a>
$linkClasses = 'flex items-center w-full px-3 py-2 text-sm rounded-lg transition-colors group';

// Classes pour l'état ACTIF du lien
$activeLinkClasses = 'font-semibold text-primary-600 bg-primary-50';

// Classes pour l'état INACTIF du lien
$inactiveLinkClasses = 'text-gray-600 hover:bg-gray-100 hover:text-gray-900';


// Classes de base pour le conteneur de l'icône (le cercle)
$iconWrapperClasses = 'flex items-center justify-center h-6 w-6 mr-3 rounded-full';

// Classes pour l'état ACTIF du cercle (fond plein)
$activeIconWrapperClasses = 'bg-primary-600';

// Classes pour l'état INACTIF du cercle (bordure fine)
$inactiveIconWrapperClasses = 'ring-1 ring-inset ring-gray-400 group-hover:ring-gray-500';


// Classes de base pour l'icône <svg>
$iconBaseClasses = 'h-4 w-4';

// Classe pour la couleur de l'icône à l'état ACTIF
$activeIconColor = 'text-white';

// Classe pour la couleur de l'icône à l'état INACTIF
$inactiveIconColor = 'text-gray-500 group-hover:text-gray-700';

// ----- LOGIQUE D'APPLICATION DES CLASSES -----

// On fusionne les classes du lien
$finalLinkClasses = $attributes->merge(['class' => $linkClasses . ' ' . ($active ? $activeLinkClasses : $inactiveLinkClasses)]);

// On fusionne les classes du conteneur de l'icône
$finalIconWrapperClasses = $iconWrapperClasses . ' ' . ($active ? $activeIconWrapperClasses : $inactiveIconWrapperClasses);

// On prépare les classes à appliquer à l'icône qui sera passée dans le slot
$iconAttributes = ['class' => $iconBaseClasses . ' ' . ($active ? $activeIconColor : $inactiveIconColor)];

@endphp

<a {{ $finalLinkClasses }}>
    {{-- Le conteneur du cercle pour l'icône --}}
    <span class="{{ $finalIconWrapperClasses }}">
        {{-- On applique les classes dynamiques à l'icône passée dans le slot --}}
        {{ $icon->withAttributes($iconAttributes) }}
    </span>

    {{-- Le texte du lien --}}
    <span>{{ $slot }}</span>
</a>
--- FIN DU FICHIER : ./resources/views/components/sub-nav-link.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/components/text-input.blade.php
////////////////////////////////////////////////////////////////

@props(['disabled' => false])

<input {{ $disabled ? 'disabled' : '' }} {!! $attributes->merge(['class' => 'border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm']) !!}>

--- FIN DU FICHIER : ./resources/views/components/text-input.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/components/toast.blade.php
////////////////////////////////////////////////////////////////

<div
    x-data="{
        show: false,
        type: 'success',
        message: '',
        description: '',
        timer: null,
        init() {
            window.addEventListener('toast', event => {
                this.type = event.detail.type || 'success';
                this.message = event.detail.message || 'Action réussie.';
                this.description = event.detail.description || '';
                this.show = true;
                clearTimeout(this.timer);
                this.timer = setTimeout(() => {
                    this.show = false;
                }, 8000);
            });
        },
        typeClasses() {
            switch (this.type) {
                case 'success': return 'bg-green-50 border-green-400 text-green-700';
                case 'error': return 'bg-red-50 border-red-400 text-red-700';
                case 'warning': return 'bg-yellow-50 border-yellow-400 text-yellow-700';
                default: return 'bg-blue-50 border-blue-400 text-blue-700';
            }
        },
        iconClasses() {
            switch (this.type) {
                case 'success': return 'text-green-500';
                case 'error': return 'text-red-500';
                case 'warning': return 'text-yellow-500';
                default: return 'text-blue-500';
            }
        }
    }"
    x-show="show"
    x-transition:enter="transform ease-out duration-300 transition"
    x-transition:enter-start="translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2"
    x-transition:enter-end="translate-y-0 opacity-100 sm:translate-x-0"
    x-transition:leave="transition ease-in duration-100"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0"
    class="fixed top-5 right-5 z-[100] w-full max-w-sm"
    style="display: none;"
>
    <div class="rounded-lg shadow-lg border-l-4 p-4" :class="typeClasses()">
        <div class="flex items-start">
            <div class="flex-shrink-0" :class="iconClasses()">
                <template x-if="type === 'success'"><x-lucide-check-circle class="h-6 w-6" /></template>
                <template x-if="type === 'error'"><x-lucide-x-circle class="h-6 w-6" /></template>
                <template x-if="type === 'warning'"><x-lucide-alert-triangle class="h-6 w-6" /></template>
                <template x-if="type === 'info'"><x-lucide-info class="h-6 w-6" /></template>
            </div>
            <div class="ml-3 w-0 flex-1 pt-0.5">
                <p class="text-sm font-bold" x-text="message"></p>
                <p class="mt-1 text-sm" x-show="description" x-text="description"></p>
            </div>
            <div class="ml-4 flex-shrink-0 flex">
                <button @click="show = false" class="inline-flex rounded-md text-gray-400 hover:text-gray-500 focus:outline-none">
                    <span class="sr-only">Close</span>
                    <x-lucide-x class="h-5 w-5" />
                </button>
            </div>
        </div>
    </div>
</div>
--- FIN DU FICHIER : ./resources/views/components/toast.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/components/toast.blade.php.OK.php
////////////////////////////////////////////////////////////////

{{-- Ce composant gère l'affichage des notifications Toast via Alpine.js --}}
<div
    x-data="{
        show: false,
        type: 'success',
        message: '',
        description: '',
        timer: null,
        init() {
            // On écoute un événement global 'toast' qui peut être déclenché n'importe où
            window.addEventListener('toast', event => {
                this.type = event.detail.type || 'success';
                this.message = event.detail.message || 'Action réussie.';
                this.description = event.detail.description || '';
                this.show = true;

                // On annule le timer précédent s'il y en a un
                clearTimeout(this.timer);

                // La notification disparaît après 5 secondes
                this.timer = setTimeout(() => {
                    this.show = false;
                }, 5000);
            });
        },
        // Classes dynamiques pour les couleurs en fonction du type de notification
        typeClasses() {
            switch (this.type) {
                case 'success':
                    return 'bg-green-50 border-green-400 text-green-700';
                case 'error':
                    return 'bg-red-50 border-red-400 text-red-700';
                case 'warning':
                    return 'bg-yellow-50 border-yellow-400 text-yellow-700';
                default:
                    return 'bg-blue-50 border-blue-400 text-blue-700';
            }
        },
        iconClasses() {
             switch (this.type) {
                case 'success':
                    return 'text-green-500';
                case 'error':
                    return 'text-red-500';
                case 'warning':
                    return 'text-yellow-500';
                default:
                    return 'text-blue-500';
            }
        }
    }"
    x-show="show"
    x-transition:enter="transform ease-out duration-300 transition"
    x-transition:enter-start="translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2"
    x-transition:enter-end="translate-y-0 opacity-100 sm:translate-x-0"
    x-transition:leave="transition ease-in duration-100"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0"
    class="fixed top-5 right-5 z-[100] w-full max-w-sm"
    style="display: none;"
>
    <div class="rounded-lg shadow-lg border-l-4 p-4" :class="typeClasses()">
        <div class="flex items-start">
            <div class="flex-shrink-0" :class="iconClasses()">
                {{-- Icône dynamique --}}
                <template x-if="type === 'success'"><x-heroicon-s-check-circle class="h-6 w-6" /></template>
                <template x-if="type === 'error'"><x-heroicon-s-x-circle class="h-6 w-6" /></template>
                <template x-if="type === 'warning'"><x-heroicon-s-exclamation-triangle class="h-6 w-6" /></template>
                <template x-if="type === 'info'"><x-heroicon-s-information-circle class="h-6 w-6" /></template>
            </div>
            <div class="ml-3 w-0 flex-1 pt-0.5">
                <p class="text-sm font-bold" x-text="message"></p>
                <p class="mt-1 text-sm" x-show="description" x-text="description"></p>
            </div>
            <div class="ml-4 flex-shrink-0 flex">
                <button @click="show = false" class="inline-flex rounded-md text-gray-400 hover:text-gray-500 focus:outline-none">
                    <span class="sr-only">Close</span>
                    <x-heroicon-s-x-mark class="h-5 w-5" />
                </button>
            </div>
        </div>
    </div>
</div>

--- FIN DU FICHIER : ./resources/views/components/toast.blade.php.OK.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/dashboard.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            {{ __('Dashboard') }}
        </h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-6 text-gray-900">
                    {{ __("You're logged in!") }}
                </div>
            </div>
        </div>
    </div>
</x-app-layout>

--- FIN DU FICHIER : ./resources/views/dashboard.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/layouts/app.blade.php
////////////////////////////////////////////////////////////////

<!DOCTYPE html>
<html lang="{{ str_replace('_', '-', app()->getLocale()) }}">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="csrf-token" content="{{ csrf_token() }}">
        <title>{{ config('app.name', 'Laravel') }}</title>

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

        @vite(['resources/css/app.css', 'resources/js/app.js'])
        <style>
            .ongoing-assignment-bar {
                background-image: linear-gradient(to right, #93c5fd, #bfdbfe);
            }
        </style>
    </head>
    <body class="font-sans antialiased">
        <div x-data="{ sidebarOpen: false }" class="min-h-screen bg-gray-100">
            <div class="flex h-screen bg-gray-100">
                
                <aside class="hidden w-72 flex-shrink-0 bg-white border-r md:block">
                    @include('layouts.navigation')
                </aside>

                <div x-show="sidebarOpen" class="fixed inset-0 z-40 flex md:hidden" 
                     x-transition:enter="transition-opacity ease-linear duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" 
                     x-transition:leave="transition-opacity ease-linear duration-300" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" 
                     style="display: none;">
                    <div @click="sidebarOpen = false" class="fixed inset-0 bg-gray-600 bg-opacity-75"></div>
                    <div class="relative flex-1 flex flex-col max-w-xs w-full bg-white">
                        <div class="absolute top-0 right-0 -mr-12 pt-2">
                            <button @click="sidebarOpen = false" type="button" class="ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white">
                                <span class="sr-only">Close sidebar</span>
                                <x-lucide-x class="h-6 w-6 text-white" />
                            </button>
                        </div>
                        @include('layouts.navigation')
                    </div>
                </div>

                <div class="flex-1 flex flex-col overflow-hidden">
                    <header class="relative z-10 flex-shrink-0 flex h-16 bg-white shadow">
                        <button @click.stop="sidebarOpen = true" type="button" class="px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden">
                            <span class="sr-only">Open sidebar</span>
                            <x-lucide-menu class="h-6 w-6" />
                        </button>
                        <div class="flex-1 px-4 flex justify-between">
                            <div class="flex-1 flex items-center">
                                @if (isset($header))
                                    {{ $header }}
                                @endif
                            </div>
                        </div>
                    </header>

                    <main class="flex-1 relative overflow-y-auto focus:outline-none">
                         <div class="py-6">
                            <div class="max-w-7xl mx-auto px-4 sm:px-6 md:px-8">
                                {{-- Le contenu de chaque page sera injecté ici --}}
                                {{ $slot }}
                            </div>
                        </div>
                    </main>
                </div>
            </div>
        </div>
        
        {{-- Composant de notification global (Toast) --}}
        <x-toast />

        {{-- Emplacement pour les scripts spécifiques à une page --}}
        @stack('scripts')

        <script>
            document.addEventListener('DOMContentLoaded', function () {
                @if (session('success'))
                    window.dispatchEvent(new CustomEvent('toast', { detail: { type: 'success', message: {{ Illuminate\Support\Js::from(session('success')) }} } }));
                @endif

                @if (session('error'))
                    window.dispatchEvent(new CustomEvent('toast', { detail: { type: 'error', message: {{ Illuminate\Support\Js::from(session('error')) }} } }));
                @endif

                @if (session('warning'))
                    window.dispatchEvent(new CustomEvent('toast', { detail: { type: 'warning', message: {{ Illuminate\Support\Js::from(session('warning')) }} } }));
                @endif

                @if (session('info'))
                    window.dispatchEvent(new CustomEvent('toast', { detail: { type: 'info', message: {{ Illuminate\Support\Js::from(session('info')) }} } }));
                @endif
            });
        </script>
    </body>
</html>
--- FIN DU FICHIER : ./resources/views/layouts/app.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/layouts/guest.blade.php
////////////////////////////////////////////////////////////////

<!DOCTYPE html>
<html lang="{{ str_replace('_', '-', app()->getLocale()) }}">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="csrf-token" content="{{ csrf_token() }}">

        <title>{{ config('app.name', 'Laravel') }}</title>

        <!-- Fonts -->
        <link rel="preconnect" href="https://fonts.bunny.net">
        <link href="https://fonts.bunny.net/css?family=figtree:400,500,600&display=swap" rel="stylesheet" />

        <!-- Scripts -->
        @vite(['resources/css/app.css', 'resources/js/app.js'])
    </head>
    <body class="font-sans text-gray-900 antialiased">
        <div class="min-h-screen flex flex-col sm:justify-center items-center pt-6 sm:pt-0 bg-gray-100">
            <div>
                <a href="/">
                    <x-application-logo class="w-20 h-20 fill-current text-gray-500" />
                </a>
            </div>

            <div class="w-full sm:max-w-md mt-6 px-6 py-4 bg-white shadow-md overflow-hidden sm:rounded-lg">
                {{ $slot }}
            </div>
        </div>
    </body>
</html>

--- FIN DU FICHIER : ./resources/views/layouts/guest.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/layouts/navigation.blade.php
////////////////////////////////////////////////////////////////

<nav x-data="{ open: true }" class="flex flex-col h-full bg-white shadow-md font-sans">
    {{-- Logo --}}
    <div class="flex items-center justify-center h-20 border-b border-gray-200 shrink-0 px-6">
        <a href="{{ route('dashboard') }}">
            <x-application-logo class="block h-10 w-auto" />
        </a>
    </div>

    {{-- Liens de navigation --}}
    <div class="flex-1 px-4 py-4 overflow-y-auto space-y-1 text-sm">

        <x-sidebar.sidebar-link :href="route('dashboard')" :active="request()->routeIs('dashboard')">
            <x-slot name="icon">
                <x-lucide-layout-grid class="h-5 w-5" stroke-width="1.5" />
            </x-slot>
            {{ __('Tableau de bord') }}
        </x-sidebar.sidebar-link>

        {{-- Section Gestion de la Flotte --}}
        @canany(['view vehicles', 'view assignments'])
            <x-sidebar.sidebar-group title="Flotte" :active="request()->routeIs('admin.vehicles.*') || request()->routeIs('admin.assignments.*')">
                <x-slot name="icon">
                    <x-lucide-truck stroke-width="1.5" />
                </x-slot>
                @can('view vehicles')
                    <x-sidebar.sidebar-sub-link :href="route('admin.vehicles.index')" :active="request()->routeIs('admin.vehicles.*')">
                        <x-slot name="icon"><x-lucide-truck stroke-width="1.5" /></x-slot>
                        {{ __('Véhicules') }}
                    </x-sidebar.sidebar-sub-link>
                @endcan
                @can('view assignments')
                    <x-sidebar.sidebar-sub-link :href="route('admin.assignments.index')" :active="request()->routeIs('admin.assignments.*')">
                        <x-slot name="icon"><x-lucide-clipboard-list stroke-width="1.5" /></x-slot>
                        {{ __('Affectations') }}
                    </x-sidebar.sidebar-sub-link>
                @endcan
                @can('view assignments') {{-- Reuse same permission for now --}}
                    <x-sidebar.sidebar-sub-link :href="route('admin.planning.index')" :active="request()->routeIs('admin.planning.*')">
                        <x-slot name="icon"><x-lucide-calendar-days stroke-width="1.5" /></x-slot>
                        {{ __('Planning') }}
                    </x-sidebar.sidebar-sub-link>
                @endcan
            </x-sidebar.sidebar-group>
        @endcanany

        {{-- Section Chauffeurs --}}
        @can('view drivers')
             <x-sidebar.sidebar-group title="Chauffeurs" :active="request()->routeIs('admin.drivers.*')">
                <x-slot name="icon">
                    <x-lucide-users stroke-width="1.5" />
                </x-slot>
                <x-sidebar.sidebar-sub-link :href="route('admin.drivers.index')" :active="request()->routeIs('admin.drivers.index')">
                    <x-slot name="icon"><x-lucide-list stroke-width="1.5" /></x-slot>
                    {{ __('Liste des chauffeurs') }}
                </x-sidebar.sidebar-sub-link>
                 <x-sidebar.sidebar-sub-link :href="route('admin.drivers.import.show')" :active="request()->routeIs('admin.drivers.import.*')">
                    <x-slot name="icon"><x-lucide-file-up stroke-width="1.5" /></x-slot>
                    {{ __('Importer des chauffeurs') }}
                </x-sidebar.sidebar-sub-link>
            </x-sidebar.sidebar-group>
        @endcan

        {{-- Section Maintenance --}}
        @canany(['view maintenance', 'manage maintenance plans'])
            <x-sidebar.sidebar-group title="Maintenance" :active="request()->routeIs('admin.maintenance.*')">
                <x-slot name="icon">
                    <x-lucide-wrench stroke-width="1.5" />
                </x-slot>
                <x-sidebar.sidebar-sub-link :href="route('admin.maintenance.dashboard')" :active="request()->routeIs('admin.maintenance.dashboard')">
                    <x-slot name="icon"><x-lucide-bar-chart-2 stroke-width="1.5" /></x-slot>
                    Tableau de Bord
                </x-sidebar.sidebar-sub-link>
                <x-sidebar.sidebar-sub-link :href="route('admin.maintenance.plans.index')" :active="request()->routeIs('admin.maintenance.plans.*')">
                    <x-slot name="icon"><x-lucide-calendar-check stroke-width="1.5" /></x-slot>
                    Plans de Maintenance
                </x-sidebar.sidebar-sub-link>
            </x-sidebar.sidebar-group>
        @endcanany

        {{-- Section Supplier --}}
        @can('view suppliers')
            <x-responsive-nav-link :href="route('admin.suppliers.index')" :active="request()->routeIs('admin.suppliers.*')">
                <x-lucide-building-2 class="mr-3 h-6 w-6 shrink-0"/>
                {{ __('Fournisseurs') }}
            </x-responsive-nav-link>
        @endcan


        {{-- Section Administration --}}
        @hasanyrole('Super Admin|Admin')
            <x-sidebar.sidebar-group title="Administration" :active="request()->routeIs('admin.organizations.*') || request()->routeIs('admin.users.*') || request()->routeIs('admin.roles.*')">
                <x-slot name="icon">
                    <x-lucide-settings stroke-width="1.5" />
                </x-slot>
                @role('Super Admin')
                <x-sidebar.sidebar-sub-link :href="route('admin.organizations.index')" :active="request()->routeIs('admin.organizations.*')">
                    <x-slot name="icon"><x-lucide-building-2 stroke-width="1.5" /></x-slot>
                    {{ __('Organisations') }}
                </x-sidebar.sidebar-sub-link>
                @endrole
                <x-sidebar.sidebar-sub-link :href="route('admin.users.index')" :active="request()->routeIs('admin.users.*')">
                    <x-slot name="icon"><x-lucide-user-cog stroke-width="1.5" /></x-slot>
                    {{ __('Utilisateurs') }}
                </x-sidebar.sidebar-sub-link>
                <x-sidebar.sidebar-sub-link :href="route('admin.roles.index')" :active="request()->routeIs('admin.roles.*')">
                    <x-slot name="icon"><x-lucide-key-round stroke-width="1.5" /></x-slot>
                    {{ __('Rôles') }}
                </x-sidebar.sidebar-sub-link>
            </x-sidebar.sidebar-group>
        @endhasanyrole
    </div>

    {{-- Section Utilisateur / Déconnexion --}}
    <div class="mt-auto shrink-0 p-4 border-t border-gray-200">
        <div x-data="{ open: false }" @keydown.escape.window="open = false" @click.away="open = false" class="relative">
            <button @click="open = !open" class="w-full flex-1 flex items-center space-x-3 group p-2 rounded-lg hover:bg-gray-100">
                <span class="inline-block h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center">
                     <x-lucide-user-round class="h-8 w-8 text-gray-500" stroke-width="1.5"/>
                </span>
                <div class="flex-1 text-left">
                    <p class="text-sm font-medium text-gray-700 group-hover:text-gray-900 truncate">{{ Auth::user()->name }}</p>
                    <p class="text-xs text-gray-500">Options</p>
                </div>
                <x-lucide-chevron-up class="h-5 w-5 text-gray-400 shrink-0" stroke-width="1.5"/>
            </button>

            <div x-show="open"
                 x-transition:enter="transition ease-out duration-100"
                 x-transition:enter-start="transform opacity-0 scale-95"
                 x-transition:enter-end="transform opacity-100 scale-100"
                 x-transition:leave="transition ease-in duration-75"
                 x-transition:leave-start="transform opacity-100 scale-100"
                 x-transition:leave-end="transform opacity-0 scale-95"
                 class="absolute bottom-full left-0 right-0 mb-2 w-full origin-bottom z-10"
                 style="display: none;">
                <div class="bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 p-1">
                    <a href="{{ route('profile.edit') }}" class="flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md">
                        <x-lucide-user class="mr-3 h-5 w-5" stroke-width="1.5"/>
                        Mon Profil
                    </a>
                    <form method="POST" action="{{ route('logout') }}">
                        @csrf
                        <a href="{{ route('logout') }}" onclick="event.preventDefault(); this.closest('form').submit();" class="flex items-center w-full px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-md">
                            <x-lucide-log-out class="mr-3 h-5 w-5" stroke-width="1.5"/>
                            Déconnexion
                        </a>
                    </form>
                </div>
            </div>
        </div>
    </div>
</nav>
--- FIN DU FICHIER : ./resources/views/layouts/navigation.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/profile/edit.blade.php
////////////////////////////////////////////////////////////////

<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            {{ __('Profile') }}
        </h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6">
            <div class="p-4 sm:p-8 bg-white shadow sm:rounded-lg">
                <div class="max-w-xl">
                    @include('profile.partials.update-profile-information-form')
                </div>
            </div>

            <div class="p-4 sm:p-8 bg-white shadow sm:rounded-lg">
                <div class="max-w-xl">
                    @include('profile.partials.update-password-form')
                </div>
            </div>

            <div class="p-4 sm:p-8 bg-white shadow sm:rounded-lg">
                <div class="max-w-xl">
                    @include('profile.partials.delete-user-form')
                </div>
            </div>
        </div>
    </div>
</x-app-layout>

--- FIN DU FICHIER : ./resources/views/profile/edit.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/profile/partials/delete-user-form.blade.php
////////////////////////////////////////////////////////////////

<section class="space-y-6">
    <header>
        <h2 class="text-lg font-medium text-gray-900">
            {{ __('Delete Account') }}
        </h2>

        <p class="mt-1 text-sm text-gray-600">
            {{ __('Once your account is deleted, all of its resources and data will be permanently deleted. Before deleting your account, please download any data or information that you wish to retain.') }}
        </p>
    </header>

    <x-danger-button
        x-data=""
        x-on:click.prevent="$dispatch('open-modal', 'confirm-user-deletion')"
    >{{ __('Delete Account') }}</x-danger-button>

    <x-modal name="confirm-user-deletion" :show="$errors->userDeletion->isNotEmpty()" focusable>
        <form method="post" action="{{ route('profile.destroy') }}" class="p-6">
            @csrf
            @method('delete')

            <h2 class="text-lg font-medium text-gray-900">
                {{ __('Are you sure you want to delete your account?') }}
            </h2>

            <p class="mt-1 text-sm text-gray-600">
                {{ __('Once your account is deleted, all of its resources and data will be permanently deleted. Please enter your password to confirm you would like to permanently delete your account.') }}
            </p>

            <div class="mt-6">
                <x-input-label for="password" value="{{ __('Password') }}" class="sr-only" />

                <x-text-input
                    id="password"
                    name="password"
                    type="password"
                    class="mt-1 block w-3/4"
                    placeholder="{{ __('Password') }}"
                />

                <x-input-error :messages="$errors->userDeletion->get('password')" class="mt-2" />
            </div>

            <div class="mt-6 flex justify-end">
                <x-secondary-button x-on:click="$dispatch('close')">
                    {{ __('Cancel') }}
                </x-secondary-button>

                <x-danger-button class="ms-3">
                    {{ __('Delete Account') }}
                </x-danger-button>
            </div>
        </form>
    </x-modal>
</section>

--- FIN DU FICHIER : ./resources/views/profile/partials/delete-user-form.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/profile/partials/update-password-form.blade.php
////////////////////////////////////////////////////////////////

<section>
    <header>
        <h2 class="text-lg font-medium text-gray-900">
            {{ __('Update Password') }}
        </h2>

        <p class="mt-1 text-sm text-gray-600">
            {{ __('Ensure your account is using a long, random password to stay secure.') }}
        </p>
    </header>

    <form method="post" action="{{ route('password.update') }}" class="mt-6 space-y-6">
        @csrf
        @method('put')

        <div>
            <x-input-label for="update_password_current_password" :value="__('Current Password')" />
            <x-text-input id="update_password_current_password" name="current_password" type="password" class="mt-1 block w-full" autocomplete="current-password" />
            <x-input-error :messages="$errors->updatePassword->get('current_password')" class="mt-2" />
        </div>

        <div>
            <x-input-label for="update_password_password" :value="__('New Password')" />
            <x-text-input id="update_password_password" name="password" type="password" class="mt-1 block w-full" autocomplete="new-password" />
            <x-input-error :messages="$errors->updatePassword->get('password')" class="mt-2" />
        </div>

        <div>
            <x-input-label for="update_password_password_confirmation" :value="__('Confirm Password')" />
            <x-text-input id="update_password_password_confirmation" name="password_confirmation" type="password" class="mt-1 block w-full" autocomplete="new-password" />
            <x-input-error :messages="$errors->updatePassword->get('password_confirmation')" class="mt-2" />
        </div>

        <div class="flex items-center gap-4">
            <x-primary-button>{{ __('Save') }}</x-primary-button>

            @if (session('status') === 'password-updated')
                <p
                    x-data="{ show: true }"
                    x-show="show"
                    x-transition
                    x-init="setTimeout(() => show = false, 2000)"
                    class="text-sm text-gray-600"
                >{{ __('Saved.') }}</p>
            @endif
        </div>
    </form>
</section>

--- FIN DU FICHIER : ./resources/views/profile/partials/update-password-form.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/profile/partials/update-profile-information-form.blade.php
////////////////////////////////////////////////////////////////

{{-- resources/views/profile/partials/update-profile-information-form.blade.php --}}
<section>
    <header>
        <h2 class="text-lg font-medium text-gray-900 dark:text-gray-100">
            {{ __('Informations du Profil') }}
        </h2>

        <p class="mt-1 text-sm text-gray-600 dark:text-gray-400">
            {{ __("Mettez à jour les informations de profil et l'adresse e-mail de votre compte.") }}
        </p>
    </header>

    <form id="send-verification" method="post" action="{{ route('verification.send') }}">
        @csrf
    </form>

    <form method="post" action="{{ route('profile.update') }}" class="mt-6 space-y-6">
        @csrf
        @method('patch')

        {{-- First Name --}}
        <div>
            <x-input-label for="first_name" :value="__('Prénom')" />
            <x-text-input id="first_name" name="first_name" type="text" class="mt-1 block w-full" :value="old('first_name', $user->first_name)" required autofocus autocomplete="given-name" />
            <x-input-error class="mt-2" :messages="$errors->get('first_name')" />
        </div>

        {{-- Last Name --}}
        <div>
            <x-input-label for="last_name" :value="__('Nom de famille')" />
            <x-text-input id="last_name" name="last_name" type="text" class="mt-1 block w-full" :value="old('last_name', $user->last_name)" required autocomplete="family-name" />
            <x-input-error class="mt-2" :messages="$errors->get('last_name')" />
        </div>

        {{-- Email Address --}}
        <div>
            <x-input-label for="email" :value="__('Email')" />
            <x-text-input id="email" name="email" type="email" class="mt-1 block w-full" :value="old('email', $user->email)" required autocomplete="username" /> {{-- Breeze utilise 'username' pour l'autocomplete de l'email dans ce contexte --}}
            <x-input-error class="mt-2" :messages="$errors->get('email')" />

            @if ($user instanceof \Illuminate\Contracts\Auth\MustVerifyEmail && ! $user->hasVerifiedEmail())
                <div>
                    <p class="text-sm mt-2 text-gray-800 dark:text-gray-200">
                        {{ __('Votre adresse e-mail n\'est pas vérifiée.') }}

                        <button form="send-verification" class="underline text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800">
                            {{ __('Cliquez ici pour renvoyer l\'e-mail de vérification.') }}
                        </button>
                    </p>

                    @if (session('status') === 'verification-link-sent')
                        <p class="mt-2 font-medium text-sm text-green-600 dark:text-green-400">
                            {{ __('Un nouveau lien de vérification a été envoyé à votre adresse e-mail.') }}
                        </p>
                    @endif
                </div>
            @endif
        </div>

        {{-- Phone Number --}}
        <div>
            <x-input-label for="phone" :value="__('Téléphone (optionnel)')" />
            <x-text-input id="phone" name="phone" type="text" class="mt-1 block w-full" :value="old('phone', $user->phone)" autocomplete="tel" />
            <x-input-error class="mt-2" :messages="$errors->get('phone')" />
        </div>

        <div class="flex items-center gap-4">
            <x-primary-button>{{ __('Enregistrer') }}</x-primary-button>

            @if (session('status') === 'profile-updated')
                <p
                    x-data="{ show: true }"
                    x-show="show"
                    x-transition
                    x-init="setTimeout(() => show = false, 2000)"
                    class="text-sm text-gray-600 dark:text-gray-400"
                >{{ __('Enregistré.') }}</p>
            @endif
        </div>
    </form>
</section>

--- FIN DU FICHIER : ./resources/views/profile/partials/update-profile-information-form.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/vendor/pagination/bootstrap-4.blade.php
////////////////////////////////////////////////////////////////

@if ($paginator->hasPages())
    <nav>
        <ul class="pagination">
            {{-- Previous Page Link --}}
            @if ($paginator->onFirstPage())
                <li class="page-item disabled" aria-disabled="true" aria-label="@lang('pagination.previous')">
                    <span class="page-link" aria-hidden="true">&lsaquo;</span>
                </li>
            @else
                <li class="page-item">
                    <a class="page-link" href="{{ $paginator->previousPageUrl() }}" rel="prev" aria-label="@lang('pagination.previous')">&lsaquo;</a>
                </li>
            @endif

            {{-- Pagination Elements --}}
            @foreach ($elements as $element)
                {{-- "Three Dots" Separator --}}
                @if (is_string($element))
                    <li class="page-item disabled" aria-disabled="true"><span class="page-link">{{ $element }}</span></li>
                @endif

                {{-- Array Of Links --}}
                @if (is_array($element))
                    @foreach ($element as $page => $url)
                        @if ($page == $paginator->currentPage())
                            <li class="page-item active" aria-current="page"><span class="page-link">{{ $page }}</span></li>
                        @else
                            <li class="page-item"><a class="page-link" href="{{ $url }}">{{ $page }}</a></li>
                        @endif
                    @endforeach
                @endif
            @endforeach

            {{-- Next Page Link --}}
            @if ($paginator->hasMorePages())
                <li class="page-item">
                    <a class="page-link" href="{{ $paginator->nextPageUrl() }}" rel="next" aria-label="@lang('pagination.next')">&rsaquo;</a>
                </li>
            @else
                <li class="page-item disabled" aria-disabled="true" aria-label="@lang('pagination.next')">
                    <span class="page-link" aria-hidden="true">&rsaquo;</span>
                </li>
            @endif
        </ul>
    </nav>
@endif

--- FIN DU FICHIER : ./resources/views/vendor/pagination/bootstrap-4.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/vendor/pagination/bootstrap-5.blade.php
////////////////////////////////////////////////////////////////

@if ($paginator->hasPages())
    <nav class="d-flex justify-items-center justify-content-between">
        <div class="d-flex justify-content-between flex-fill d-sm-none">
            <ul class="pagination">
                {{-- Previous Page Link --}}
                @if ($paginator->onFirstPage())
                    <li class="page-item disabled" aria-disabled="true">
                        <span class="page-link">@lang('pagination.previous')</span>
                    </li>
                @else
                    <li class="page-item">
                        <a class="page-link" href="{{ $paginator->previousPageUrl() }}" rel="prev">@lang('pagination.previous')</a>
                    </li>
                @endif

                {{-- Next Page Link --}}
                @if ($paginator->hasMorePages())
                    <li class="page-item">
                        <a class="page-link" href="{{ $paginator->nextPageUrl() }}" rel="next">@lang('pagination.next')</a>
                    </li>
                @else
                    <li class="page-item disabled" aria-disabled="true">
                        <span class="page-link">@lang('pagination.next')</span>
                    </li>
                @endif
            </ul>
        </div>

        <div class="d-none flex-sm-fill d-sm-flex align-items-sm-center justify-content-sm-between">
            <div>
                <p class="small text-muted">
                    {!! __('Showing') !!}
                    <span class="fw-semibold">{{ $paginator->firstItem() }}</span>
                    {!! __('to') !!}
                    <span class="fw-semibold">{{ $paginator->lastItem() }}</span>
                    {!! __('of') !!}
                    <span class="fw-semibold">{{ $paginator->total() }}</span>
                    {!! __('results') !!}
                </p>
            </div>

            <div>
                <ul class="pagination">
                    {{-- Previous Page Link --}}
                    @if ($paginator->onFirstPage())
                        <li class="page-item disabled" aria-disabled="true" aria-label="@lang('pagination.previous')">
                            <span class="page-link" aria-hidden="true">&lsaquo;</span>
                        </li>
                    @else
                        <li class="page-item">
                            <a class="page-link" href="{{ $paginator->previousPageUrl() }}" rel="prev" aria-label="@lang('pagination.previous')">&lsaquo;</a>
                        </li>
                    @endif

                    {{-- Pagination Elements --}}
                    @foreach ($elements as $element)
                        {{-- "Three Dots" Separator --}}
                        @if (is_string($element))
                            <li class="page-item disabled" aria-disabled="true"><span class="page-link">{{ $element }}</span></li>
                        @endif

                        {{-- Array Of Links --}}
                        @if (is_array($element))
                            @foreach ($element as $page => $url)
                                @if ($page == $paginator->currentPage())
                                    <li class="page-item active" aria-current="page"><span class="page-link">{{ $page }}</span></li>
                                @else
                                    <li class="page-item"><a class="page-link" href="{{ $url }}">{{ $page }}</a></li>
                                @endif
                            @endforeach
                        @endif
                    @endforeach

                    {{-- Next Page Link --}}
                    @if ($paginator->hasMorePages())
                        <li class="page-item">
                            <a class="page-link" href="{{ $paginator->nextPageUrl() }}" rel="next" aria-label="@lang('pagination.next')">&rsaquo;</a>
                        </li>
                    @else
                        <li class="page-item disabled" aria-disabled="true" aria-label="@lang('pagination.next')">
                            <span class="page-link" aria-hidden="true">&rsaquo;</span>
                        </li>
                    @endif
                </ul>
            </div>
        </div>
    </nav>
@endif

--- FIN DU FICHIER : ./resources/views/vendor/pagination/bootstrap-5.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/vendor/pagination/default.blade.php
////////////////////////////////////////////////////////////////

@if ($paginator->hasPages())
    <nav>
        <ul class="pagination">
            {{-- Previous Page Link --}}
            @if ($paginator->onFirstPage())
                <li class="disabled" aria-disabled="true" aria-label="@lang('pagination.previous')">
                    <span aria-hidden="true">&lsaquo;</span>
                </li>
            @else
                <li>
                    <a href="{{ $paginator->previousPageUrl() }}" rel="prev" aria-label="@lang('pagination.previous')">&lsaquo;</a>
                </li>
            @endif

            {{-- Pagination Elements --}}
            @foreach ($elements as $element)
                {{-- "Three Dots" Separator --}}
                @if (is_string($element))
                    <li class="disabled" aria-disabled="true"><span>{{ $element }}</span></li>
                @endif

                {{-- Array Of Links --}}
                @if (is_array($element))
                    @foreach ($element as $page => $url)
                        @if ($page == $paginator->currentPage())
                            <li class="active" aria-current="page"><span>{{ $page }}</span></li>
                        @else
                            <li><a href="{{ $url }}">{{ $page }}</a></li>
                        @endif
                    @endforeach
                @endif
            @endforeach

            {{-- Next Page Link --}}
            @if ($paginator->hasMorePages())
                <li>
                    <a href="{{ $paginator->nextPageUrl() }}" rel="next" aria-label="@lang('pagination.next')">&rsaquo;</a>
                </li>
            @else
                <li class="disabled" aria-disabled="true" aria-label="@lang('pagination.next')">
                    <span aria-hidden="true">&rsaquo;</span>
                </li>
            @endif
        </ul>
    </nav>
@endif

--- FIN DU FICHIER : ./resources/views/vendor/pagination/default.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/vendor/pagination/semantic-ui.blade.php
////////////////////////////////////////////////////////////////

@if ($paginator->hasPages())
    <div class="ui pagination menu" role="navigation">
        {{-- Previous Page Link --}}
        @if ($paginator->onFirstPage())
            <a class="icon item disabled" aria-disabled="true" aria-label="@lang('pagination.previous')"> <i class="left chevron icon"></i> </a>
        @else
            <a class="icon item" href="{{ $paginator->previousPageUrl() }}" rel="prev" aria-label="@lang('pagination.previous')"> <i class="left chevron icon"></i> </a>
        @endif

        {{-- Pagination Elements --}}
        @foreach ($elements as $element)
            {{-- "Three Dots" Separator --}}
            @if (is_string($element))
                <a class="icon item disabled" aria-disabled="true">{{ $element }}</a>
            @endif

            {{-- Array Of Links --}}
            @if (is_array($element))
                @foreach ($element as $page => $url)
                    @if ($page == $paginator->currentPage())
                        <a class="item active" href="{{ $url }}" aria-current="page">{{ $page }}</a>
                    @else
                        <a class="item" href="{{ $url }}">{{ $page }}</a>
                    @endif
                @endforeach
            @endif
        @endforeach

        {{-- Next Page Link --}}
        @if ($paginator->hasMorePages())
            <a class="icon item" href="{{ $paginator->nextPageUrl() }}" rel="next" aria-label="@lang('pagination.next')"> <i class="right chevron icon"></i> </a>
        @else
            <a class="icon item disabled" aria-disabled="true" aria-label="@lang('pagination.next')"> <i class="right chevron icon"></i> </a>
        @endif
    </div>
@endif

--- FIN DU FICHIER : ./resources/views/vendor/pagination/semantic-ui.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/vendor/pagination/simple-bootstrap-4.blade.php
////////////////////////////////////////////////////////////////

@if ($paginator->hasPages())
    <nav>
        <ul class="pagination">
            {{-- Previous Page Link --}}
            @if ($paginator->onFirstPage())
                <li class="page-item disabled" aria-disabled="true">
                    <span class="page-link">@lang('pagination.previous')</span>
                </li>
            @else
                <li class="page-item">
                    <a class="page-link" href="{{ $paginator->previousPageUrl() }}" rel="prev">@lang('pagination.previous')</a>
                </li>
            @endif

            {{-- Next Page Link --}}
            @if ($paginator->hasMorePages())
                <li class="page-item">
                    <a class="page-link" href="{{ $paginator->nextPageUrl() }}" rel="next">@lang('pagination.next')</a>
                </li>
            @else
                <li class="page-item disabled" aria-disabled="true">
                    <span class="page-link">@lang('pagination.next')</span>
                </li>
            @endif
        </ul>
    </nav>
@endif

--- FIN DU FICHIER : ./resources/views/vendor/pagination/simple-bootstrap-4.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/vendor/pagination/simple-bootstrap-5.blade.php
////////////////////////////////////////////////////////////////

@if ($paginator->hasPages())
    <nav role="navigation" aria-label="Pagination Navigation">
        <ul class="pagination">
            {{-- Previous Page Link --}}
            @if ($paginator->onFirstPage())
                <li class="page-item disabled" aria-disabled="true">
                    <span class="page-link">{!! __('pagination.previous') !!}</span>
                </li>
            @else
                <li class="page-item">
                    <a class="page-link" href="{{ $paginator->previousPageUrl() }}" rel="prev">
                        {!! __('pagination.previous') !!}
                    </a>
                </li>
            @endif

            {{-- Next Page Link --}}
            @if ($paginator->hasMorePages())
                <li class="page-item">
                    <a class="page-link" href="{{ $paginator->nextPageUrl() }}" rel="next">{!! __('pagination.next') !!}</a>
                </li>
            @else
                <li class="page-item disabled" aria-disabled="true">
                    <span class="page-link">{!! __('pagination.next') !!}</span>
                </li>
            @endif
        </ul>
    </nav>
@endif

--- FIN DU FICHIER : ./resources/views/vendor/pagination/simple-bootstrap-5.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/vendor/pagination/simple-default.blade.php
////////////////////////////////////////////////////////////////

@if ($paginator->hasPages())
    <nav>
        <ul class="pagination">
            {{-- Previous Page Link --}}
            @if ($paginator->onFirstPage())
                <li class="disabled" aria-disabled="true"><span>@lang('pagination.previous')</span></li>
            @else
                <li><a href="{{ $paginator->previousPageUrl() }}" rel="prev">@lang('pagination.previous')</a></li>
            @endif

            {{-- Next Page Link --}}
            @if ($paginator->hasMorePages())
                <li><a href="{{ $paginator->nextPageUrl() }}" rel="next">@lang('pagination.next')</a></li>
            @else
                <li class="disabled" aria-disabled="true"><span>@lang('pagination.next')</span></li>
            @endif
        </ul>
    </nav>
@endif

--- FIN DU FICHIER : ./resources/views/vendor/pagination/simple-default.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/vendor/pagination/simple-tailwind.blade.php
////////////////////////////////////////////////////////////////

@if ($paginator->hasPages())
    <nav role="navigation" aria-label="Pagination Navigation" class="flex justify-between">
        {{-- Previous Page Link --}}
        @if ($paginator->onFirstPage())
            <span class="relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 cursor-default leading-5 rounded-md dark:text-gray-600 dark:bg-gray-800 dark:border-gray-600">
                {!! __('pagination.previous') !!}
            </span>
        @else
            <a href="{{ $paginator->previousPageUrl() }}" rel="prev" class="relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 leading-5 rounded-md hover:text-gray-500 focus:outline-none focus:ring ring-gray-300 focus:border-blue-300 active:bg-gray-100 active:text-gray-700 transition ease-in-out duration-150 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:focus:border-blue-700 dark:active:bg-gray-700 dark:active:text-gray-300">
                {!! __('pagination.previous') !!}
            </a>
        @endif

        {{-- Next Page Link --}}
        @if ($paginator->hasMorePages())
            <a href="{{ $paginator->nextPageUrl() }}" rel="next" class="relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 leading-5 rounded-md hover:text-gray-500 focus:outline-none focus:ring ring-gray-300 focus:border-blue-300 active:bg-gray-100 active:text-gray-700 transition ease-in-out duration-150 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:focus:border-blue-700 dark:active:bg-gray-700 dark:active:text-gray-300">
                {!! __('pagination.next') !!}
            </a>
        @else
            <span class="relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 cursor-default leading-5 rounded-md dark:text-gray-600 dark:bg-gray-800 dark:border-gray-600">
                {!! __('pagination.next') !!}
            </span>
        @endif
    </nav>
@endif

--- FIN DU FICHIER : ./resources/views/vendor/pagination/simple-tailwind.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/vendor/pagination/tailwind.blade.php
////////////////////////////////////////////////////////////////

@if ($paginator->hasPages())
    <nav role="navigation" aria-label="{{ __('Pagination Navigation') }}" class="flex items-center justify-between">
        <div class="flex justify-between flex-1 sm:hidden">
            @if ($paginator->onFirstPage())
                <span class="relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 cursor-default leading-5 rounded-md">
                    {!! __('pagination.previous') !!}
                </span>
            @else
                <a href="{{ $paginator->previousPageUrl() }}" class="relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 leading-5 rounded-md hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500">
                    {!! __('pagination.previous') !!}
                </a>
            @endif

            @if ($paginator->hasMorePages())
                <a href="{{ $paginator->nextPageUrl() }}" class="relative inline-flex items-center px-4 py-2 ml-3 text-sm font-medium text-gray-700 bg-white border border-gray-300 leading-5 rounded-md hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500">
                    {!! __('pagination.next') !!}
                </a>
            @else
                <span class="relative inline-flex items-center px-4 py-2 ml-3 text-sm font-medium text-gray-500 bg-white border border-gray-300 cursor-default leading-5 rounded-md">
                    {!! __('pagination.next') !!}
                </span>
            @endif
        </div>

        <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
            <div>
                <p class="text-sm text-gray-700">
                    Affiche de
                    <span class="font-medium">{{ $paginator->firstItem() }}</span>
                    à
                    <span class="font-medium">{{ $paginator->lastItem() }}</span>
                    sur
                    <span class="font-medium">{{ $paginator->total() }}</span>
                    résultats
                </p>
            </div>

            <div>
                <span class="relative z-0 inline-flex shadow-sm rounded-md">
                    {{-- Previous Page Link --}}
                    @if ($paginator->onFirstPage())
                        <span aria-disabled="true" aria-label="{{ __('pagination.previous') }}">
                            <span class="relative inline-flex items-center px-2 py-2 text-sm font-medium text-gray-400 bg-white border border-gray-300 cursor-default rounded-l-md leading-5" aria-hidden="true">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>
                            </span>
                        </span>
                    @else
                        <a href="{{ $paginator->previousPageUrl() }}" rel="prev" class="relative inline-flex items-center px-2 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-l-md leading-5 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500" aria-label="{{ __('pagination.previous') }}">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>
                        </a>
                    @endif

                    {{-- Pagination Elements --}}
                    @foreach ($elements as $element)
                        @if (is_string($element))
                            <span aria-disabled="true"><span class="relative inline-flex items-center px-4 py-2 -ml-px text-sm font-medium text-gray-500 bg-white border border-gray-300 cursor-default leading-5">{{ $element }}</span></span>
                        @endif

                        @if (is_array($element))
                            @foreach ($element as $page => $url)
                                @if ($page == $paginator->currentPage())
                                    <span aria-current="page"><span class="relative inline-flex items-center px-4 py-2 -ml-px text-sm font-medium text-white bg-violet-600 border border-violet-600 cursor-default leading-5">{{ $page }}</span></span>
                                @else
                                    <a href="{{ $url }}" class="relative inline-flex items-center px-4 py-2 -ml-px text-sm font-medium text-gray-700 bg-white border border-gray-300 leading-5 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500" aria-label="{{ __('Go to page :page', ['page' => $page]) }}">{{ $page }}</a>
                                @endif
                            @endforeach
                        @endif
                    @endforeach

                    {{-- Next Page Link --}}
                    @if ($paginator->hasMorePages())
                        <a href="{{ $paginator->nextPageUrl() }}" rel="next" class="relative inline-flex items-center px-2 py-2 -ml-px text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-r-md leading-5 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500" aria-label="{{ __('pagination.next') }}">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" /></svg>
                        </a>
                    @else
                        <span aria-disabled="true" aria-label="{{ __('pagination.next') }}">
                            <span class="relative inline-flex items-center px-2 py-2 -ml-px text-sm font-medium text-gray-400 bg-white border border-gray-300 cursor-default rounded-r-md leading-5" aria-hidden="true">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" /></svg>
                            </span>
                        </span>
                    @endif
                </span>
            </div>
        </div>
    </nav>
@endif

--- FIN DU FICHIER : ./resources/views/vendor/pagination/tailwind.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./resources/views/welcome.blade.php
////////////////////////////////////////////////////////////////

<!DOCTYPE html>
<html lang="{{ str_replace('_', '-', app()->getLocale()) }}">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Laravel</title>

        <!-- Fonts -->
        <link rel="preconnect" href="https://fonts.bunny.net">
        <link href="https://fonts.bunny.net/css?family=figtree:400,600&display=swap" rel="stylesheet" />

        <!-- Styles -->
        <style>
            /* ! tailwindcss v3.2.4 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:Figtree, sans-serif;font-feature-settings:normal}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::-webkit-backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.relative{position:relative}.mx-auto{margin-left:auto;margin-right:auto}.mx-6{margin-left:1.5rem;margin-right:1.5rem}.ml-4{margin-left:1rem}.mt-16{margin-top:4rem}.mt-6{margin-top:1.5rem}.mt-4{margin-top:1rem}.-mt-px{margin-top:-1px}.mr-1{margin-right:0.25rem}.flex{display:flex}.inline-flex{display:inline-flex}.grid{display:grid}.h-16{height:4rem}.h-7{height:1.75rem}.h-6{height:1.5rem}.h-5{height:1.25rem}.min-h-screen{min-height:100vh}.w-auto{width:auto}.w-16{width:4rem}.w-7{width:1.75rem}.w-6{width:1.5rem}.w-5{width:1.25rem}.max-w-7xl{max-width:80rem}.shrink-0{flex-shrink:0}.scale-100{--tw-scale-x:1;--tw-scale-y:1;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.grid-cols-1{grid-template-columns:repeat(1, minmax(0, 1fr))}.items-center{align-items:center}.justify-center{justify-content:center}.gap-6{gap:1.5rem}.gap-4{gap:1rem}.self-center{align-self:center}.rounded-lg{border-radius:0.5rem}.rounded-full{border-radius:9999px}.bg-gray-100{--tw-bg-opacity:1;background-color:rgb(243 244 246 / var(--tw-bg-opacity))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.bg-red-50{--tw-bg-opacity:1;background-color:rgb(254 242 242 / var(--tw-bg-opacity))}.bg-dots-darker{background-image:url("data:image/svg+xml,%3Csvg width='30' height='30' viewBox='0 0 30 30' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1.22676 0C1.91374 0 2.45351 0.539773 2.45351 1.22676C2.45351 1.91374 1.91374 2.45351 1.22676 2.45351C0.539773 2.45351 0 1.91374 0 1.22676C0 0.539773 0.539773 0 1.22676 0Z' fill='rgba(0,0,0,0.07)'/%3E%3C/svg%3E")}.from-gray-700\/50{--tw-gradient-from:rgb(55 65 81 / 0.5);--tw-gradient-to:rgb(55 65 81 / 0);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.via-transparent{--tw-gradient-to:rgb(0 0 0 / 0);--tw-gradient-stops:var(--tw-gradient-from), transparent, var(--tw-gradient-to)}.bg-center{background-position:center}.stroke-red-500{stroke:#ef4444}.stroke-gray-400{stroke:#9ca3af}.p-6{padding:1.5rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.text-center{text-align:center}.text-right{text-align:right}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-sm{font-size:0.875rem;line-height:1.25rem}.font-semibold{font-weight:600}.leading-relaxed{line-height:1.625}.text-gray-600{--tw-text-opacity:1;color:rgb(75 85 99 / var(--tw-text-opacity))}.text-gray-900{--tw-text-opacity:1;color:rgb(17 24 39 / var(--tw-text-opacity))}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128 / var(--tw-text-opacity))}.underline{-webkit-text-decoration-line:underline;text-decoration-line:underline}.antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.shadow-2xl{--tw-shadow:0 25px 50px -12px rgb(0 0 0 / 0.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-gray-500\/20{--tw-shadow-color:rgb(107 114 128 / 0.2);--tw-shadow:var(--tw-shadow-colored)}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.selection\:bg-red-500 *::selection{--tw-bg-opacity:1;background-color:rgb(239 68 68 / var(--tw-bg-opacity))}.selection\:text-white *::selection{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity))}.selection\:bg-red-500::selection{--tw-bg-opacity:1;background-color:rgb(239 68 68 / var(--tw-bg-opacity))}.selection\:text-white::selection{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity))}.hover\:text-gray-900:hover{--tw-text-opacity:1;color:rgb(17 24 39 / var(--tw-text-opacity))}.hover\:text-gray-700:hover{--tw-text-opacity:1;color:rgb(55 65 81 / var(--tw-text-opacity))}.focus\:rounded-sm:focus{border-radius:0.125rem}.focus\:outline:focus{outline-style:solid}.focus\:outline-2:focus{outline-width:2px}.focus\:outline-red-500:focus{outline-color:#ef4444}.group:hover .group-hover\:stroke-gray-600{stroke:#4b5563}.z-10{z-index: 10}@media (prefers-reduced-motion: no-preference){.motion-safe\:hover\:scale-\[1\.01\]:hover{--tw-scale-x:1.01;--tw-scale-y:1.01;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}}@media (prefers-color-scheme: dark){.dark\:bg-gray-900{--tw-bg-opacity:1;background-color:rgb(17 24 39 / var(--tw-bg-opacity))}.dark\:bg-gray-800\/50{background-color:rgb(31 41 55 / 0.5)}.dark\:bg-red-800\/20{background-color:rgb(153 27 27 / 0.2)}.dark\:bg-dots-lighter{background-image:url("data:image/svg+xml,%3Csvg width='30' height='30' viewBox='0 0 30 30' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1.22676 0C1.91374 0 2.45351 0.539773 2.45351 1.22676C2.45351 1.91374 1.91374 2.45351 1.22676 2.45351C0.539773 2.45351 0 1.91374 0 1.22676C0 0.539773 0.539773 0 1.22676 0Z' fill='rgba(255,255,255,0.07)'/%3E%3C/svg%3E")}.dark\:bg-gradient-to-bl{background-image:linear-gradient(to bottom left, var(--tw-gradient-stops))}.dark\:stroke-gray-600{stroke:#4b5563}.dark\:text-gray-400{--tw-text-opacity:1;color:rgb(156 163 175 / var(--tw-text-opacity))}.dark\:text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity))}.dark\:shadow-none{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.dark\:ring-1{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dark\:ring-inset{--tw-ring-inset:inset}.dark\:ring-white\/5{--tw-ring-color:rgb(255 255 255 / 0.05)}.dark\:hover\:text-white:hover{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity))}.group:hover .dark\:group-hover\:stroke-gray-400{stroke:#9ca3af}}@media (min-width: 640px){.sm\:fixed{position:fixed}.sm\:top-0{top:0px}.sm\:right-0{right:0px}.sm\:ml-0{margin-left:0px}.sm\:flex{display:flex}.sm\:items-center{align-items:center}.sm\:justify-center{justify-content:center}.sm\:justify-between{justify-content:space-between}.sm\:text-left{text-align:left}.sm\:text-right{text-align:right}}@media (min-width: 768px){.md\:grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}}@media (min-width: 1024px){.lg\:gap-8{gap:2rem}.lg\:p-8{padding:2rem}}
        </style>
    </head>
    <body class="antialiased">
        <div class="relative sm:flex sm:justify-center sm:items-center min-h-screen bg-dots-darker bg-center bg-gray-100 dark:bg-dots-lighter dark:bg-gray-900 selection:bg-red-500 selection:text-white">
            @if (Route::has('login'))
                <div class="sm:fixed sm:top-0 sm:right-0 p-6 text-right z-10">
                    @auth
                        <a href="{{ url('/dashboard') }}" class="font-semibold text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white focus:outline focus:outline-2 focus:rounded-sm focus:outline-red-500">Dashboard</a>
                    @else
                        <a href="{{ route('login') }}" class="font-semibold text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white focus:outline focus:outline-2 focus:rounded-sm focus:outline-red-500">Log in</a>

                        @if (Route::has('register'))
                            <a href="{{ route('register') }}" class="ml-4 font-semibold text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white focus:outline focus:outline-2 focus:rounded-sm focus:outline-red-500">Register</a>
                        @endif
                    @endauth
                </div>
            @endif

            <div class="max-w-7xl mx-auto p-6 lg:p-8">
                <div class="flex justify-center">
                    <svg viewBox="0 0 62 65" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-16 w-auto bg-gray-100 dark:bg-gray-900">
                        <path d="M61.8548 14.6253C61.8778 14.7102 61.8895 14.7978 61.8897 14.8858V28.5615C61.8898 28.737 61.8434 28.9095 61.7554 29.0614C61.6675 29.2132 61.5409 29.3392 61.3887 29.4265L49.9104 36.0351V49.1337C49.9104 49.4902 49.7209 49.8192 49.4118 49.9987L25.4519 63.7916C25.3971 63.8227 25.3372 63.8427 25.2774 63.8639C25.255 63.8714 25.2338 63.8851 25.2101 63.8913C25.0426 63.9354 24.8666 63.9354 24.6991 63.8913C24.6716 63.8838 24.6467 63.8689 24.6205 63.8589C24.5657 63.8389 24.5084 63.8215 24.456 63.7916L0.501061 49.9987C0.348882 49.9113 0.222437 49.7853 0.134469 49.6334C0.0465019 49.4816 0.000120578 49.3092 0 49.1337L0 8.10652C0 8.01678 0.0124642 7.92953 0.0348998 7.84477C0.0423783 7.8161 0.0598282 7.78993 0.0697995 7.76126C0.0884958 7.70891 0.105946 7.65531 0.133367 7.6067C0.152063 7.5743 0.179485 7.54812 0.20192 7.51821C0.230588 7.47832 0.256763 7.43719 0.290416 7.40229C0.319084 7.37362 0.356476 7.35243 0.388883 7.32751C0.425029 7.29759 0.457436 7.26518 0.498568 7.2415L12.4779 0.345059C12.6296 0.257786 12.8015 0.211853 12.9765 0.211853C13.1515 0.211853 13.3234 0.257786 13.475 0.345059L25.4531 7.2415H25.4556C25.4955 7.26643 25.5292 7.29759 25.5653 7.32626C25.5977 7.35119 25.6339 7.37362 25.6625 7.40104C25.6974 7.43719 25.7224 7.47832 25.7523 7.51821C25.7735 7.54812 25.8021 7.5743 25.8196 7.6067C25.8483 7.65656 25.8645 7.70891 25.8844 7.76126C25.8944 7.78993 25.9118 7.8161 25.9193 7.84602C25.9423 7.93096 25.954 8.01853 25.9542 8.10652V33.7317L35.9355 27.9844V14.8846C35.9355 14.7973 35.948 14.7088 35.9704 14.6253C35.9792 14.5954 35.9954 14.5692 36.0053 14.5405C36.0253 14.4882 36.0427 14.4346 36.0702 14.386C36.0888 14.3536 36.1163 14.3274 36.1375 14.2975C36.1674 14.2576 36.1923 14.2165 36.2272 14.1816C36.2559 14.1529 36.292 14.1317 36.3244 14.1068C36.3618 14.0769 36.3942 14.0445 36.4341 14.0208L48.4147 7.12434C48.5663 7.03694 48.7383 6.99094 48.9133 6.99094C49.0883 6.99094 49.2602 7.03694 49.4118 7.12434L61.3899 14.0208C61.4323 14.0457 61.4647 14.0769 61.5021 14.1055C61.5333 14.1305 61.5694 14.1529 61.5981 14.1803C61.633 14.2165 61.6579 14.2576 61.6878 14.2975C61.7103 14.3274 61.7377 14.3536 61.7551 14.386C61.7838 14.4346 61.8 14.4882 61.8199 14.5405C61.8312 14.5692 61.8474 14.5954 61.8548 14.6253ZM59.893 27.9844V16.6121L55.7013 19.0252L49.9104 22.3593V33.7317L59.8942 27.9844H59.893ZM47.9149 48.5566V37.1768L42.2187 40.4299L25.953 49.7133V61.2003L47.9149 48.5566ZM1.99677 9.83281V48.5566L23.9562 61.199V49.7145L12.4841 43.2219L12.4804 43.2194L12.4754 43.2169C12.4368 43.1945 12.4044 43.1621 12.3682 43.1347C12.3371 43.1097 12.3009 43.0898 12.2735 43.0624L12.271 43.0586C12.2386 43.0275 12.2162 42.9888 12.1887 42.9539C12.1638 42.9203 12.1339 42.8916 12.114 42.8567L12.1127 42.853C12.0903 42.8156 12.0766 42.7707 12.0604 42.7283C12.0442 42.6909 12.023 42.656 12.013 42.6161C12.0005 42.5688 11.998 42.5177 11.9931 42.4691C11.9881 42.4317 11.9781 42.3943 11.9781 42.3569V15.5801L6.18848 12.2446L1.99677 9.83281ZM12.9777 2.36177L2.99764 8.10652L12.9752 13.8513L22.9541 8.10527L12.9752 2.36177H12.9777ZM18.1678 38.2138L23.9574 34.8809V9.83281L19.7657 12.2459L13.9749 15.5801V40.6281L18.1678 38.2138ZM48.9133 9.14105L38.9344 14.8858L48.9133 20.6305L58.8909 14.8846L48.9133 9.14105ZM47.9149 22.3593L42.124 19.0252L37.9323 16.6121V27.9844L43.7219 31.3174L47.9149 33.7317V22.3593ZM24.9533 47.987L39.59 39.631L46.9065 35.4555L36.9352 29.7145L25.4544 36.3242L14.9907 42.3482L24.9533 47.987Z" fill="#FF2D20"/>
                    </svg>
                </div>

                <div class="mt-16">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 lg:gap-8">
                        <a href="https://laravel.com/docs" class="scale-100 p-6 bg-white dark:bg-gray-800/50 dark:bg-gradient-to-bl from-gray-700/50 via-transparent dark:ring-1 dark:ring-inset dark:ring-white/5 rounded-lg shadow-2xl shadow-gray-500/20 dark:shadow-none flex motion-safe:hover:scale-[1.01] transition-all duration-250 focus:outline focus:outline-2 focus:outline-red-500">
                            <div>
                                <div class="h-16 w-16 bg-red-50 dark:bg-red-800/20 flex items-center justify-center rounded-full">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" class="w-7 h-7 stroke-red-500">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" />
                                    </svg>
                                </div>

                                <h2 class="mt-6 text-xl font-semibold text-gray-900 dark:text-white">Documentation</h2>

                                <p class="mt-4 text-gray-500 dark:text-gray-400 text-sm leading-relaxed">
                                    Laravel has wonderful documentation covering every aspect of the framework. Whether you are a newcomer or have prior experience with Laravel, we recommend reading our documentation from beginning to end.
                                </p>
                            </div>

                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" class="self-center shrink-0 stroke-red-500 w-6 h-6 mx-6">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12h15m0 0l-6.75-6.75M19.5 12l-6.75 6.75" />
                            </svg>
                        </a>

                        <a href="https://laracasts.com" class="scale-100 p-6 bg-white dark:bg-gray-800/50 dark:bg-gradient-to-bl from-gray-700/50 via-transparent dark:ring-1 dark:ring-inset dark:ring-white/5 rounded-lg shadow-2xl shadow-gray-500/20 dark:shadow-none flex motion-safe:hover:scale-[1.01] transition-all duration-250 focus:outline focus:outline-2 focus:outline-red-500">
                            <div>
                                <div class="h-16 w-16 bg-red-50 dark:bg-red-800/20 flex items-center justify-center rounded-full">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" class="w-7 h-7 stroke-red-500">
                                        <path stroke-linecap="round" d="M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25h-9A2.25 2.25 0 002.25 7.5v9a2.25 2.25 0 002.25 2.25z" />
                                    </svg>
                                </div>

                                <h2 class="mt-6 text-xl font-semibold text-gray-900 dark:text-white">Laracasts</h2>

                                <p class="mt-4 text-gray-500 dark:text-gray-400 text-sm leading-relaxed">
                                    Laracasts offers thousands of video tutorials on Laravel, PHP, and JavaScript development. Check them out, see for yourself, and massively level up your development skills in the process.
                                </p>
                            </div>

                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" class="self-center shrink-0 stroke-red-500 w-6 h-6 mx-6">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12h15m0 0l-6.75-6.75M19.5 12l-6.75 6.75" />
                            </svg>
                        </a>

                        <a href="https://laravel-news.com" class="scale-100 p-6 bg-white dark:bg-gray-800/50 dark:bg-gradient-to-bl from-gray-700/50 via-transparent dark:ring-1 dark:ring-inset dark:ring-white/5 rounded-lg shadow-2xl shadow-gray-500/20 dark:shadow-none flex motion-safe:hover:scale-[1.01] transition-all duration-250 focus:outline focus:outline-2 focus:outline-red-500">
                            <div>
                                <div class="h-16 w-16 bg-red-50 dark:bg-red-800/20 flex items-center justify-center rounded-full">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" class="w-7 h-7 stroke-red-500">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 01-2.25 2.25M16.5 7.5V18a2.25 2.25 0 002.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 002.25 2.25h13.5M6 7.5h3v3H6v-3z" />
                                    </svg>
                                </div>

                                <h2 class="mt-6 text-xl font-semibold text-gray-900 dark:text-white">Laravel News</h2>

                                <p class="mt-4 text-gray-500 dark:text-gray-400 text-sm leading-relaxed">
                                    Laravel News is a community driven portal and newsletter aggregating all of the latest and most important news in the Laravel ecosystem, including new package releases and tutorials.
                                </p>
                            </div>

                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" class="self-center shrink-0 stroke-red-500 w-6 h-6 mx-6">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12h15m0 0l-6.75-6.75M19.5 12l-6.75 6.75" />
                            </svg>
                        </a>

                        <div class="scale-100 p-6 bg-white dark:bg-gray-800/50 dark:bg-gradient-to-bl from-gray-700/50 via-transparent dark:ring-1 dark:ring-inset dark:ring-white/5 rounded-lg shadow-2xl shadow-gray-500/20 dark:shadow-none flex motion-safe:hover:scale-[1.01] transition-all duration-250 focus:outline focus:outline-2 focus:outline-red-500">
                            <div>
                                <div class="h-16 w-16 bg-red-50 dark:bg-red-800/20 flex items-center justify-center rounded-full">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" class="w-7 h-7 stroke-red-500">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6.115 5.19l.319 1.913A6 6 0 008.11 10.36L9.75 12l-.387.775c-.217.433-.132.956.21 1.298l1.348 1.348c.21.21.329.497.329.795v1.089c0 .426.24.815.622 1.006l.153.076c.433.217.956.132 1.298-.21l.723-.723a8.7 8.7 0 002.288-4.042 1.087 1.087 0 00-.358-1.099l-1.33-1.108c-.251-.21-.582-.299-.905-.245l-1.17.195a1.125 1.125 0 01-.98-.314l-.295-.295a1.125 1.125 0 010-1.591l.13-.132a1.125 1.125 0 011.3-.21l.603.302a.809.809 0 001.086-1.086L14.25 7.5l1.256-.837a4.5 4.5 0 001.528-1.732l.146-.292M6.115 5.19A9 9 0 1017.18 4.64M6.115 5.19A8.965 8.965 0 0112 3c1.929 0 3.716.607 5.18 1.64" />
                                    </svg>
                                </div>

                                <h2 class="mt-6 text-xl font-semibold text-gray-900 dark:text-white">Vibrant Ecosystem</h2>

                                <p class="mt-4 text-gray-500 dark:text-gray-400 text-sm leading-relaxed">
                                    Laravel's robust library of first-party tools and libraries, such as <a href="https://forge.laravel.com" class="underline hover:text-gray-700 dark:hover:text-white focus:outline focus:outline-2 focus:rounded-sm focus:outline-red-500">Forge</a>, <a href="https://vapor.laravel.com" class="underline hover:text-gray-700 dark:hover:text-white focus:outline focus:outline-2 focus:rounded-sm focus:outline-red-500">Vapor</a>, <a href="https://nova.laravel.com" class="underline hover:text-gray-700 dark:hover:text-white focus:outline focus:outline-2 focus:rounded-sm focus:outline-red-500">Nova</a>, and <a href="https://envoyer.io" class="underline hover:text-gray-700 dark:hover:text-white focus:outline focus:outline-2 focus:rounded-sm focus:outline-red-500">Envoyer</a> help you take your projects to the next level. Pair them with powerful open source libraries like <a href="https://laravel.com/docs/billing" class="underline hover:text-gray-700 dark:hover:text-white focus:outline focus:outline-2 focus:rounded-sm focus:outline-red-500">Cashier</a>, <a href="https://laravel.com/docs/dusk" class="underline hover:text-gray-700 dark:hover:text-white focus:outline focus:outline-2 focus:rounded-sm focus:outline-red-500">Dusk</a>, <a href="https://laravel.com/docs/broadcasting" class="underline hover:text-gray-700 dark:hover:text-white focus:outline focus:outline-2 focus:rounded-sm focus:outline-red-500">Echo</a>, <a href="https://laravel.com/docs/horizon" class="underline hover:text-gray-700 dark:hover:text-white focus:outline focus:outline-2 focus:rounded-sm focus:outline-red-500">Horizon</a>, <a href="https://laravel.com/docs/sanctum" class="underline hover:text-gray-700 dark:hover:text-white focus:outline focus:outline-2 focus:rounded-sm focus:outline-red-500">Sanctum</a>, <a href="https://laravel.com/docs/telescope" class="underline hover:text-gray-700 dark:hover:text-white focus:outline focus:outline-2 focus:rounded-sm focus:outline-red-500">Telescope</a>, and more.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex justify-center mt-16 px-0 sm:items-center sm:justify-between">
                    <div class="text-center text-sm sm:text-left">
                        &nbsp;
                    </div>

                    <div class="text-center text-sm text-gray-500 dark:text-gray-400 sm:text-right sm:ml-0">
                        Laravel v{{ Illuminate\Foundation\Application::VERSION }} (PHP v{{ PHP_VERSION }})
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>

--- FIN DU FICHIER : ./resources/views/welcome.blade.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./routes/api.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Http\Request;
use Illuminate\Support\Facades\Route;

/*
|--------------------------------------------------------------------------
| API Routes
|--------------------------------------------------------------------------
|
| Here is where you can register API routes for your application. These
| routes are loaded by the RouteServiceProvider and all of them will
| be assigned to the "api" middleware group. Make something great!
|
*/

Route::middleware('auth:sanctum')->get('/user', function (Request $request) {
    return $request->user();
});

    Route::middleware(['auth:sanctum', 'can:view assignments'])->prefix('admin')->name('api.admin.')->group(function () {
    Route::patch('assignments/{assignment}/move', [\App\Http\Controllers\Api\AssignmentController::class, 'move'])->name('assignments.move');
    Route::apiResource('assignments', \App\Http\Controllers\Api\AssignmentController::class)->only(['show', 'update', 'store', 'destroy']);
});
--- FIN DU FICHIER : ./routes/api.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./routes/auth.php
////////////////////////////////////////////////////////////////

<?php

use App\Http\Controllers\Auth\AuthenticatedSessionController;
use App\Http\Controllers\Auth\ConfirmablePasswordController;
use App\Http\Controllers\Auth\EmailVerificationNotificationController;
use App\Http\Controllers\Auth\EmailVerificationPromptController;
use App\Http\Controllers\Auth\NewPasswordController;
use App\Http\Controllers\Auth\PasswordController;
use App\Http\Controllers\Auth\PasswordResetLinkController;
use App\Http\Controllers\Auth\RegisteredUserController;
use App\Http\Controllers\Auth\VerifyEmailController;
use Illuminate\Support\Facades\Route;

Route::middleware('guest')->group(function () {
    Route::get('register', [RegisteredUserController::class, 'create'])
                ->name('register');

    Route::post('register', [RegisteredUserController::class, 'store']);

    Route::get('login', [AuthenticatedSessionController::class, 'create'])
                ->name('login');

    Route::post('login', [AuthenticatedSessionController::class, 'store']);

    Route::get('forgot-password', [PasswordResetLinkController::class, 'create'])
                ->name('password.request');

    Route::post('forgot-password', [PasswordResetLinkController::class, 'store'])
                ->name('password.email');

    Route::get('reset-password/{token}', [NewPasswordController::class, 'create'])
                ->name('password.reset');

    Route::post('reset-password', [NewPasswordController::class, 'store'])
                ->name('password.store');
});

Route::middleware('auth')->group(function () {
    Route::get('verify-email', EmailVerificationPromptController::class)
                ->name('verification.notice');

    Route::get('verify-email/{id}/{hash}', VerifyEmailController::class)
                ->middleware(['signed', 'throttle:6,1'])
                ->name('verification.verify');

    Route::post('email/verification-notification', [EmailVerificationNotificationController::class, 'store'])
                ->middleware('throttle:6,1')
                ->name('verification.send');

    Route::get('confirm-password', [ConfirmablePasswordController::class, 'show'])
                ->name('password.confirm');

    Route::post('confirm-password', [ConfirmablePasswordController::class, 'store']);

    Route::put('password', [PasswordController::class, 'update'])->name('password.update');

    Route::post('logout', [AuthenticatedSessionController::class, 'destroy'])
                ->name('logout');
});

--- FIN DU FICHIER : ./routes/auth.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./routes/channels.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Support\Facades\Broadcast;

/*
|--------------------------------------------------------------------------
| Broadcast Channels
|--------------------------------------------------------------------------
|
| Here you may register all of the event broadcasting channels that your
| application supports. The given channel authorization callbacks are
| used to check if an authenticated user can listen to the channel.
|
*/

Broadcast::channel('App.Models.User.{id}', function ($user, $id) {
    return (int) $user->id === (int) $id;
});

--- FIN DU FICHIER : ./routes/channels.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./routes/console.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Foundation\Inspiring;
use Illuminate\Support\Facades\Artisan;

/*
|--------------------------------------------------------------------------
| Console Routes
|--------------------------------------------------------------------------
|
| This file is where you may define all of your Closure based console
| commands. Each Closure is bound to a command instance allowing a
| simple approach to interacting with each command's IO methods.
|
*/

Artisan::command('inspire', function () {
    $this->comment(Inspiring::quote());
})->purpose('Display an inspiring quote');

--- FIN DU FICHIER : ./routes/console.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./routes/web.php
////////////////////////////////////////////////////////////////

<?php

use Illuminate\Support\Facades\Route;
use App\Http\Controllers\ProfileController;
use App\Http\Controllers\Admin\DashboardController;
use App\Http\Controllers\Admin\UserController;
use App\Http\Controllers\Admin\RoleController;
use App\Http\Controllers\Admin\DriverController;
use App\Http\Controllers\Admin\VehicleController;
use App\Http\Controllers\Admin\AssignmentController;
use App\Http\Controllers\Admin\OrganizationController;
use App\Http\Controllers\Admin\SupplierController;
use App\Http\Controllers\Admin\SupplierCategoryController;
use App\Http\Controllers\Admin\Maintenance\DashboardController as MaintenanceDashboardController;
use App\Http\Controllers\Admin\Maintenance\MaintenancePlanController;
use App\Http\Controllers\Admin\Maintenance\MaintenanceLogController;
use App\Http\Controllers\Admin\Handover\VehicleHandoverController;

/*
|--------------------------------------------------------------------------
| Web Routes
|--------------------------------------------------------------------------
*/

// --- Routes Publiques et Authentification ---
Route::get('/', function () { return view('welcome'); });

Route::middleware('auth')->group(function () {
    Route::get('/dashboard', [DashboardController::class, 'index'])->name('dashboard');
    Route::get('/profile', [ProfileController::class, 'edit'])->name('profile.edit');
    Route::patch('/profile', [ProfileController::class, 'update'])->name('profile.update');
    Route::delete('/profile', [ProfileController::class, 'destroy'])->name('profile.destroy');
});

// --- GROUPE DE ROUTES POUR L'ADMINISTRATION ---
Route::middleware(['auth'])->prefix('admin')->name('admin.')->group(function () {

    // --- Routes accessibles au Super Admin ET aux Admins d'organisation ---
    // La vérification des permissions se fait maintenant au niveau de chaque contrôleur,
    // donc on retire le middleware de rôle qui était trop restrictif.
    Route::middleware([])->group(function() {

        // --- MAINTENANCE ---
        Route::get('/maintenance', [MaintenanceDashboardController::class, 'index'])->name('maintenance.dashboard');
        Route::resource('maintenance/plans', MaintenancePlanController::class)->names('maintenance.plans');
        Route::resource('maintenance/logs', MaintenanceLogController::class)->only(['create', 'store'])->names('maintenance.logs');

        // --- FICHES DE REMISE ---
        Route::get('/assignments/{assignment}/handovers/create', [VehicleHandoverController::class, 'create'])->name('handovers.vehicles.create');
        Route::post('/handovers/{handover}/upload-signed', [VehicleHandoverController::class, 'uploadSigned'])->name('handovers.vehicles.uploadSigned');
        Route::get('/handovers/{handover}/download', [VehicleHandoverController::class, 'downloadPdf'])->name('handovers.vehicles.downloadPdf');
        Route::resource('handovers', VehicleHandoverController::class)->names('handovers.vehicles')->except(['create', 'index']);


        // --- CORRECTION : DÉCLARATION DES ROUTES SPÉCIFIQUES AVANT LES ROUTES DE RESSOURCE ---

        // --- ACTIONS SPÉCIFIQUES POUR LES VÉHICULES ---
        Route::get('/vehicles/import', [VehicleController::class, 'showImportForm'])->name('vehicles.import.show');
        Route::post('/vehicles/import', [VehicleController::class, 'handleImport'])->name('vehicles.import.handle');
        Route::get('/vehicles/import-template', [VehicleController::class, 'downloadTemplate'])->name('vehicles.import.template');
        Route::get('/vehicles/import/export-errors/{import_id}', [VehicleController::class, 'exportErrors'])->name('vehicles.import.export-errors');
        Route::get('/vehicles/import/results', [VehicleController::class, 'showImportResults'])->name('vehicles.import.results');
        Route::patch('/vehicles/{vehicle}/restore', [VehicleController::class, 'restore'])->name('vehicles.restore')->withTrashed();
        Route::delete('/vehicles/{vehicle}/force-delete', [VehicleController::class, 'forceDelete'])->name('vehicles.force-delete')->withTrashed();
        
        // --- CHAUFFEURS ---
        // --- ACTIONS SPÉCIFIQUES POUR LES CHAUFFEURS ---
        Route::patch('/drivers/{driver}/restore', [DriverController::class, 'restore'])->name('drivers.restore')->withTrashed();
        Route::delete('/drivers/{driver}/force-delete', [DriverController::class, 'forceDelete'])->name('drivers.force-delete')->withTrashed();

        // AJOUT : Routes pour l'importation CSV des chauffeurs
        Route::get('/drivers/import', [DriverController::class, 'showImportForm'])->name('drivers.import.show');
        Route::post('/drivers/import', [DriverController::class, 'handleImport'])->name('drivers.import.handle');
        Route::get('/drivers/import-template', [DriverController::class, 'downloadTemplate'])->name('drivers.import.template');
        Route::get('/drivers/import/results', [DriverController::class, 'showImportResults'])->name('drivers.import.results');

        // Routes existantes pour le CRUD des chauffeurs
        Route::patch('/drivers/{driver}/restore', [DriverController::class, 'restore'])->name('drivers.restore')->withTrashed();
        Route::delete('/drivers/{driver}/force-delete', [DriverController::class, 'forceDelete'])->name('drivers.force-delete')->withTrashed();
        Route::resource('drivers', DriverController::class);


        // --- ACTIONS SPÉCIFIQUES POUR LES AFFECTATIONS ---
        Route::patch('/assignments/{assignment}/end', [AssignmentController::class, 'end'])->name('assignments.end');

        // --- NOUVEAU : Route pour le planning GANTT ---
        Route::get('/planning', [\App\Http\Controllers\Admin\PlanningController::class, 'index'])->name('planning.index');

        // --- GESTION DES RESSOURCES PRINCIPALES (DÉCLARÉES APRÈS LES ROUTES SPÉCIFIQUES) ---
        Route::resource('users', UserController::class);
        Route::resource('drivers', DriverController::class);
        Route::resource('vehicles', VehicleController::class);
        Route::resource('assignments', AssignmentController::class);
        Route::resource('suppliers', SupplierController::class);
        Route::resource('supplier-categories', SupplierCategoryController::class)->only(['store']);

    });

    // --- Routes accessibles UNIQUEMENT au Super Admin ---
    Route::middleware(['role:Super Admin'])->group(function() {
        Route::resource('organizations', OrganizationController::class);
    });

    // --- Routes accessibles au Super Admin et Admin pour la gestion des rôles ---
    Route::middleware(['role:Super Admin|Admin'])->group(function() {
        Route::resource('roles', RoleController::class)->only(['index', 'edit', 'update']);
    });
});

require __DIR__.'/auth.php';
--- FIN DU FICHIER : ./routes/web.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./tests/CreatesApplication.php
////////////////////////////////////////////////////////////////

<?php

namespace Tests;

use Illuminate\Contracts\Console\Kernel;
use Illuminate\Foundation\Application;

trait CreatesApplication
{
    /**
     * Creates the application.
     */
    public function createApplication(): Application
    {
        $app = require __DIR__.'/../bootstrap/app.php';

        $app->make(Kernel::class)->bootstrap();

        return $app;
    }
}

--- FIN DU FICHIER : ./tests/CreatesApplication.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./tests/Feature/Auth/AuthenticationTest.php
////////////////////////////////////////////////////////////////

<?php

namespace Tests\Feature\Auth;

use App\Models\User;
use App\Providers\RouteServiceProvider;
use Illuminate\Foundation\Testing\RefreshDatabase;
use Tests\TestCase;

class AuthenticationTest extends TestCase
{
    use RefreshDatabase;

    public function test_login_screen_can_be_rendered(): void
    {
        $response = $this->get('/login');

        $response->assertStatus(200);
    }

    public function test_users_can_authenticate_using_the_login_screen(): void
    {
        $user = User::factory()->create();

        $response = $this->post('/login', [
            'email' => $user->email,
            'password' => 'password',
        ]);

        $this->assertAuthenticated();
        $response->assertRedirect(RouteServiceProvider::HOME);
    }

    public function test_users_can_not_authenticate_with_invalid_password(): void
    {
        $user = User::factory()->create();

        $this->post('/login', [
            'email' => $user->email,
            'password' => 'wrong-password',
        ]);

        $this->assertGuest();
    }

    public function test_users_can_logout(): void
    {
        $user = User::factory()->create();

        $response = $this->actingAs($user)->post('/logout');

        $this->assertGuest();
        $response->assertRedirect('/');
    }
}

--- FIN DU FICHIER : ./tests/Feature/Auth/AuthenticationTest.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./tests/Feature/Auth/EmailVerificationTest.php
////////////////////////////////////////////////////////////////

<?php

namespace Tests\Feature\Auth;

use App\Models\User;
use App\Providers\RouteServiceProvider;
use Illuminate\Auth\Events\Verified;
use Illuminate\Foundation\Testing\RefreshDatabase;
use Illuminate\Support\Facades\Event;
use Illuminate\Support\Facades\URL;
use Tests\TestCase;

class EmailVerificationTest extends TestCase
{
    use RefreshDatabase;

    public function test_email_verification_screen_can_be_rendered(): void
    {
        $user = User::factory()->create([
            'email_verified_at' => null,
        ]);

        $response = $this->actingAs($user)->get('/verify-email');

        $response->assertStatus(200);
    }

    public function test_email_can_be_verified(): void
    {
        $user = User::factory()->create([
            'email_verified_at' => null,
        ]);

        Event::fake();

        $verificationUrl = URL::temporarySignedRoute(
            'verification.verify',
            now()->addMinutes(60),
            ['id' => $user->id, 'hash' => sha1($user->email)]
        );

        $response = $this->actingAs($user)->get($verificationUrl);

        Event::assertDispatched(Verified::class);
        $this->assertTrue($user->fresh()->hasVerifiedEmail());
        $response->assertRedirect(RouteServiceProvider::HOME.'?verified=1');
    }

    public function test_email_is_not_verified_with_invalid_hash(): void
    {
        $user = User::factory()->create([
            'email_verified_at' => null,
        ]);

        $verificationUrl = URL::temporarySignedRoute(
            'verification.verify',
            now()->addMinutes(60),
            ['id' => $user->id, 'hash' => sha1('wrong-email')]
        );

        $this->actingAs($user)->get($verificationUrl);

        $this->assertFalse($user->fresh()->hasVerifiedEmail());
    }
}

--- FIN DU FICHIER : ./tests/Feature/Auth/EmailVerificationTest.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./tests/Feature/Auth/PasswordConfirmationTest.php
////////////////////////////////////////////////////////////////

<?php

namespace Tests\Feature\Auth;

use App\Models\User;
use Illuminate\Foundation\Testing\RefreshDatabase;
use Tests\TestCase;

class PasswordConfirmationTest extends TestCase
{
    use RefreshDatabase;

    public function test_confirm_password_screen_can_be_rendered(): void
    {
        $user = User::factory()->create();

        $response = $this->actingAs($user)->get('/confirm-password');

        $response->assertStatus(200);
    }

    public function test_password_can_be_confirmed(): void
    {
        $user = User::factory()->create();

        $response = $this->actingAs($user)->post('/confirm-password', [
            'password' => 'password',
        ]);

        $response->assertRedirect();
        $response->assertSessionHasNoErrors();
    }

    public function test_password_is_not_confirmed_with_invalid_password(): void
    {
        $user = User::factory()->create();

        $response = $this->actingAs($user)->post('/confirm-password', [
            'password' => 'wrong-password',
        ]);

        $response->assertSessionHasErrors();
    }
}

--- FIN DU FICHIER : ./tests/Feature/Auth/PasswordConfirmationTest.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./tests/Feature/Auth/PasswordResetTest.php
////////////////////////////////////////////////////////////////

<?php

namespace Tests\Feature\Auth;

use App\Models\User;
use Illuminate\Auth\Notifications\ResetPassword;
use Illuminate\Foundation\Testing\RefreshDatabase;
use Illuminate\Support\Facades\Notification;
use Tests\TestCase;

class PasswordResetTest extends TestCase
{
    use RefreshDatabase;

    public function test_reset_password_link_screen_can_be_rendered(): void
    {
        $response = $this->get('/forgot-password');

        $response->assertStatus(200);
    }

    public function test_reset_password_link_can_be_requested(): void
    {
        Notification::fake();

        $user = User::factory()->create();

        $this->post('/forgot-password', ['email' => $user->email]);

        Notification::assertSentTo($user, ResetPassword::class);
    }

    public function test_reset_password_screen_can_be_rendered(): void
    {
        Notification::fake();

        $user = User::factory()->create();

        $this->post('/forgot-password', ['email' => $user->email]);

        Notification::assertSentTo($user, ResetPassword::class, function ($notification) {
            $response = $this->get('/reset-password/'.$notification->token);

            $response->assertStatus(200);

            return true;
        });
    }

    public function test_password_can_be_reset_with_valid_token(): void
    {
        Notification::fake();

        $user = User::factory()->create();

        $this->post('/forgot-password', ['email' => $user->email]);

        Notification::assertSentTo($user, ResetPassword::class, function ($notification) use ($user) {
            $response = $this->post('/reset-password', [
                'token' => $notification->token,
                'email' => $user->email,
                'password' => 'password',
                'password_confirmation' => 'password',
            ]);

            $response
                ->assertSessionHasNoErrors()
                ->assertRedirect(route('login'));

            return true;
        });
    }
}

--- FIN DU FICHIER : ./tests/Feature/Auth/PasswordResetTest.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./tests/Feature/Auth/PasswordUpdateTest.php
////////////////////////////////////////////////////////////////

<?php

namespace Tests\Feature\Auth;

use App\Models\User;
use Illuminate\Foundation\Testing\RefreshDatabase;
use Illuminate\Support\Facades\Hash;
use Tests\TestCase;

class PasswordUpdateTest extends TestCase
{
    use RefreshDatabase;

    public function test_password_can_be_updated(): void
    {
        $user = User::factory()->create();

        $response = $this
            ->actingAs($user)
            ->from('/profile')
            ->put('/password', [
                'current_password' => 'password',
                'password' => 'new-password',
                'password_confirmation' => 'new-password',
            ]);

        $response
            ->assertSessionHasNoErrors()
            ->assertRedirect('/profile');

        $this->assertTrue(Hash::check('new-password', $user->refresh()->password));
    }

    public function test_correct_password_must_be_provided_to_update_password(): void
    {
        $user = User::factory()->create();

        $response = $this
            ->actingAs($user)
            ->from('/profile')
            ->put('/password', [
                'current_password' => 'wrong-password',
                'password' => 'new-password',
                'password_confirmation' => 'new-password',
            ]);

        $response
            ->assertSessionHasErrorsIn('updatePassword', 'current_password')
            ->assertRedirect('/profile');
    }
}

--- FIN DU FICHIER : ./tests/Feature/Auth/PasswordUpdateTest.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./tests/Feature/Auth/RegistrationTest.php
////////////////////////////////////////////////////////////////

<?php

namespace Tests\Feature\Auth;

use App\Providers\RouteServiceProvider;
use Illuminate\Foundation\Testing\RefreshDatabase;
use Tests\TestCase;

class RegistrationTest extends TestCase
{
    use RefreshDatabase;

    public function test_registration_screen_can_be_rendered(): void
    {
        $response = $this->get('/register');

        $response->assertStatus(200);
    }

    public function test_new_users_can_register(): void
    {
        $response = $this->post('/register', [
            'name' => 'Test User',
            'email' => 'test@example.com',
            'password' => 'password',
            'password_confirmation' => 'password',
        ]);

        $this->assertAuthenticated();
        $response->assertRedirect(RouteServiceProvider::HOME);
    }
}

--- FIN DU FICHIER : ./tests/Feature/Auth/RegistrationTest.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./tests/Feature/ExampleTest.php
////////////////////////////////////////////////////////////////

<?php

namespace Tests\Feature;

// use Illuminate\Foundation\Testing\RefreshDatabase;
use Tests\TestCase;

class ExampleTest extends TestCase
{
    /**
     * A basic test example.
     */
    public function test_the_application_returns_a_successful_response(): void
    {
        $response = $this->get('/');

        $response->assertStatus(200);
    }
}

--- FIN DU FICHIER : ./tests/Feature/ExampleTest.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./tests/Feature/ProfileTest.php
////////////////////////////////////////////////////////////////

<?php

namespace Tests\Feature;

use App\Models\User;
use Illuminate\Foundation\Testing\RefreshDatabase;
use Tests\TestCase;

class ProfileTest extends TestCase
{
    use RefreshDatabase;

    public function test_profile_page_is_displayed(): void
    {
        $user = User::factory()->create();

        $response = $this
            ->actingAs($user)
            ->get('/profile');

        $response->assertOk();
    }

    public function test_profile_information_can_be_updated(): void
    {
        $user = User::factory()->create();

        $response = $this
            ->actingAs($user)
            ->patch('/profile', [
                'name' => 'Test User',
                'email' => 'test@example.com',
            ]);

        $response
            ->assertSessionHasNoErrors()
            ->assertRedirect('/profile');

        $user->refresh();

        $this->assertSame('Test User', $user->name);
        $this->assertSame('test@example.com', $user->email);
        $this->assertNull($user->email_verified_at);
    }

    public function test_email_verification_status_is_unchanged_when_the_email_address_is_unchanged(): void
    {
        $user = User::factory()->create();

        $response = $this
            ->actingAs($user)
            ->patch('/profile', [
                'name' => 'Test User',
                'email' => $user->email,
            ]);

        $response
            ->assertSessionHasNoErrors()
            ->assertRedirect('/profile');

        $this->assertNotNull($user->refresh()->email_verified_at);
    }

    public function test_user_can_delete_their_account(): void
    {
        $user = User::factory()->create();

        $response = $this
            ->actingAs($user)
            ->delete('/profile', [
                'password' => 'password',
            ]);

        $response
            ->assertSessionHasNoErrors()
            ->assertRedirect('/');

        $this->assertGuest();
        $this->assertNull($user->fresh());
    }

    public function test_correct_password_must_be_provided_to_delete_account(): void
    {
        $user = User::factory()->create();

        $response = $this
            ->actingAs($user)
            ->from('/profile')
            ->delete('/profile', [
                'password' => 'wrong-password',
            ]);

        $response
            ->assertSessionHasErrorsIn('userDeletion', 'password')
            ->assertRedirect('/profile');

        $this->assertNotNull($user->fresh());
    }
}

--- FIN DU FICHIER : ./tests/Feature/ProfileTest.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./tests/TestCase.php
////////////////////////////////////////////////////////////////

<?php

namespace Tests;

use Illuminate\Foundation\Testing\TestCase as BaseTestCase;

abstract class TestCase extends BaseTestCase
{
    use CreatesApplication;
}

--- FIN DU FICHIER : ./tests/TestCase.php ---


////////////////////////////////////////////////////////////////
CHEMIN : ./tests/Unit/ExampleTest.php
////////////////////////////////////////////////////////////////

<?php

namespace Tests\Unit;

use PHPUnit\Framework\TestCase;

class ExampleTest extends TestCase
{
    /**
     * A basic test example.
     */
    public function test_that_true_is_true(): void
    {
        $this->assertTrue(true);
    }
}

--- FIN DU FICHIER : ./tests/Unit/ExampleTest.php ---


