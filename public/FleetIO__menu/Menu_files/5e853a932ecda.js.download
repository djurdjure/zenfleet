//15.133.4-es2019 2025-09-11T12:20:12.980Z (5e853a932ecda)
var CS_CONF={"collectionEnabled":true,"useSentry":false,"projectId":237444,"status":1,"hostnames":["fleetio.com"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":0,"consentRequired":0,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":100,"validationRate":10,"lastTrackingDraw":1744645027,"trackerDomain":"c.contentsquare.net","recordingDomain":"r.contentsquare.net","useMalkaPipeline":1,"ed":"l.contentsquare.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"autoInsightsEnabled":0,"jsErrorsEnabled":1,"customErrorsEnabled":0,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":1,"customHashIdEnabled":0,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":null,"whitelistedAttributes":null,"replayRecordingUnmaskedUrlRegex":null,"replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":null,"anonymisationMethod":null,"tagDeploymentMode":"CONTENTSQUARE","experimental":null,"iframesTracking":0,"textVisibilityEnabled":0,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":0,"pathComputationRules":{},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":0,"useStaticResourceManager":1,"performanceTimingOptions":{"withResource":false,"withNavigation":false},"replayConsentRequiredForSession":0,"eventsApiEnabled":0,"clickedElementTextEnabled":1,"collectHierarchy":0,"collectSubmit":0,"collectTargetText":1,"apiErrors":{"collectStandardHeaders":0,"collectionRules":[]},"displayAdOptions":null,"taskSchedulerOptions":{"enabled":1},"malkaQuotaServiceDomain":"q-aus1.contentsquare.net","malkaRecordingDomain":"k-aus1.contentsquare.net","staticResourceManagerDomain":"srm.bf.contentsquare.net","voc":{"siteId":null,"enabled":0},"heapEnvironment":{"env_id":"3735544073","heap_tag_status":"heap_sideloads_cs"}};
(()=>{var Rh=Object.defineProperty;var Ch=(s,r,t)=>r in s?Rh(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t;var pe=(s,r,t)=>Ch(s,typeof r!="symbol"?r+"":r,t);var oe={};oe.d=(s,r)=>{for(var t in r)oe.o(r,t)&&!oe.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:r[t]})};oe.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();oe.o=(s,r)=>Object.prototype.hasOwnProperty.call(s,r);oe.r=s=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var gn={};oe.r(gn);oe.d(gn,{getRequestParameters:()=>sm});function ds(s,r){let t;return window.Zone&&typeof window.Zone.__symbol__=="function"&&(t=s[window.Zone.__symbol__(r)]),t!=null?t:s[r]}function Xt(s){return J(s)&&(typeof s=="number"||s instanceof Number)&&!isNaN(s)}function Ps(s){return s===parseInt(s,10)}function $(s){return J(s)&&(typeof s=="string"||s instanceof csString)}function zi(s){return typeof s=="boolean"}function Os(s){return typeof s=="object"}function J(s){return typeof s!="undefined"}function Mt(s){return J(s)&&s!==null}function mn(s){return typeof s=="object"&&s!==null}function Ih(s,r,t){return Ps(s)&&s>=r&&s<=t}function zr(s){for(let r in s)return!1;return!0}function Xe(s){return typeof s=="function"}function hi(s){return s instanceof Element}function Ke(s){return s instanceof Error}function Gr(s){let r=s.length;for(let t=0;t<r;t++)switch(csString.prototype.charCodeAt.call(s,t)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}var ui=typeof window=="undefined";function Ph(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof oe.g!="undefined"?oe.g:typeof process!="undefined"?process:Function("return this")()}var et=Ph();var nt=(()=>{let s;return function(r){r.debug="debug",r.warn="warn",r.implementation="implementation",r.error="error",r.critical="critical"}(s||(s={})),s})(),yr={[nt.debug]:0,[nt.warn]:1,[nt.implementation]:1,[nt.error]:2,[nt.critical]:3},at={debug(...s){},warn(...s){},implementation(...s){},error(...s){},critical(...s){},isPerfLoggingActive(){return!1}};function Oh(s){at=s}var x=s=>(r,t,e)=>{let i=(t==null?void 0:t.toString())||"",n=s||`${r.constructor&&r.constructor.name}.${i}`;if(e){let a=e.value;e.value=function(...c){return ls(n,a.bind(this))(...c)}}};function ls(s,r){return function(...t){try{let e=r.apply(this,t);return J(et.Promise)&&e instanceof et.Promise?e.then(i=>i,i=>at.error(Ke(i)?i:new Error(i),s)):e}catch(e){try{at.error(Ke(e)?e:new Error(e),s)}catch{}}}}function lt(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(a=s[c])&&(n=(i<3?a(n):i>3?a(r,t,n):a(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function yn(s){let r=new ArrayBuffer(s.length),t=new Uint8Array(r);for(let e=0,i=s.length;e<i;e+=1)t[e]=csString.prototype.charCodeAt.call(s,e);return r}function Eo(s){let r=new Uint8Array(s),t="";for(let e=0;e<r.byteLength;e+=1)t+=csString.fromCodePoint(r[e]);return t}function Na(s){let r=self.atob(s);return yn(r)}function qr(s){let r=csArray.from(new Uint8Array(s));return csArray.prototype.join.call(csArray.prototype.map.call(r,t=>csString.prototype.padStart.call(t.toString(16),2,"0")),"")}function So(s){let r=csString.prototype.indexOf.call(s,";base64,")!==-1,t=csString.prototype.indexOf.call(s,","),e=r?[csString.prototype.substring.call(s,0,t-7),csString.prototype.substring.call(s,t+1)]:[csString.prototype.substring.call(s,0,t),csString.prototype.substring.call(s,t+1)];if(!r&&/^%3Csvg/i.test(e[1]))try{e[1]=decodeURIComponent(e[1])}catch(a){at.warn(`${a}, calling decodeURIComponent on: ${e[1]}`)}let n=r?Na(e[1]):yn(e[1]);return new Blob([n],{type:csString.prototype.replace.call(e[0],"data:","")})}var Ma=typeof performance!="undefined"&&!!performance.now,vo=Ma?()=>performance.now():()=>csDate.now(),Nh=(()=>{var s,r;return Ma?(r=(s=performance.timing)===null||s===void 0?void 0:s.navigationStart)!==null&&r!==void 0?r:Math.floor(performance.timeOrigin):0})(),En=34164e6,C={now(){return Math.round(vo()+Nh)},elapsed(){return vo()}};function _o(){return Math.floor(C.now()/1e3)}function ka(){return typeof window.Promise=="function"}function Mh(){var s;return typeof crypto!="undefined"&&Xe((s=crypto.subtle)===null||s===void 0?void 0:s.digest)}function wo(){var s,r;return typeof((s=window.navigation)===null||s===void 0?void 0:s.addEventListener)=="function"&&typeof((r=window.navigation)===null||r===void 0?void 0:r.removeEventListener)=="function"}function Tt(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function di(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var kh=Number.MAX_SAFE_INTEGER||9007199254740991,hs={percentage(){return Math.floor(Math.random()*1e4)/100},boolean(s){return this.percentage()<s},integer(s=kh){return Math.floor(Math.random()*s)}};function ii(s,r){let t,e,i,n,a,c=null,l=g=>{let d=C.elapsed();if(!g&&c!==null){let y=r-(d-c);if(y>=1){i=et.csSetTimeout(l,y);return}}let E=d-n;i=null,c=null,n=null,a=s.apply(t,[E,...e])},u=function(){if(t=this,e=arguments,n){c=C.elapsed();return}return n=C.elapsed(),i=et.csSetTimeout(l,r),a};return u.flushPending=()=>{i&&(et.csClearTimeout(i),l(!0))},u.cancel=()=>{c=null,n=null,i&&(et.csClearTimeout(i),i=null)},u}function Dh(s=0){return(r,t,e)=>{e.value=ii(e.value,s)}}var ri=(()=>{class s{static setGlobalService(t){s.globalService=t}constructor(t){this.name=t,this.values={}}reset(){this.values={}}flush(){if(!s.globalService)return!1;let t=this.values,e=Object.keys(t);if(!e.length)return!1;let i=csArray.prototype.map.call(e,n=>({name:this.name,parameter:n,value:Math.round(t[n])}));return s.globalService.push(i),this.reset(),i.length>0}}return s.globalService=null,lt([x()],s.prototype,"flush",null),s})(),_t=(()=>{class s extends ri{constructor(t,e=100){super(t),this.cy=e,this.values={},e&&(this.debouncedFlush=ii(()=>this.flush(),this.cy))}count(t,e=1){ri.globalService&&(this.values[t]=(this.values[t]||0)+e,this.debouncedFlush())}}return s})(),bo=(()=>{class s extends ri{constructor(){super(...arguments),this.values={average:0,count:0,max:0,total:0}}get average(){return this.values.average}get count(){return this.values.count}get max(){return this.values.max}get total(){return this.values.total}push(t){this.values.count++,this.values.total+=t,this.values.max=Math.max(this.values.max,t),this.values.average=this.values.total/this.values.count}reset(){this.values={count:0,total:0,max:0,average:0}}}return s})(),xh=(()=>{class s extends ri{add(t,e){var i,n,a,c,l,u,g;let d=E=>this.values[`${t}.${E}`];(i=(c=this.values)[l=`${t}.count`])!==null&&i!==void 0||(c[l]=0),(n=(u=this.values)[g=`${t}.total`])!==null&&n!==void 0||(u[g]=0),this.values[`${t}.count`]++,this.values[`${t}.total`]+=e,this.values[`${t}.max`]=Math.max((a=d("max"))!==null&&a!==void 0?a:0,e),this.values[`${t}.average`]=d("total")/d("count")}}return s})(),q={counters:{commandsFromIntegrations:new _t("commands-from-integrations"),commandsFromCSTC:new _t("commands-from-cstc"),commandsFromIframe:new _t("commands-from-iframe"),commandApplied:new _t("command-applied"),commandError:new _t("command-error"),commandMisuse:new _t("command-misuse"),CSTCSnippetUsed:new _t("cstc-snippet-used"),redactedPII:new _t("redacted-pii"),pageAnonymisation:new _t("page-anonymisation"),patchedNativeFunctions:new _t("patched-native-functions"),pureWindowState:new _t("pure-window-state"),sensitiveElements:new _t("sensitive-elements"),cspErrors:new _t("csp-errors"),networkRequests:new _t("network-requests"),webVitalsErrors:new _t("web-vitals-errors"),trackedFeatures:new _t("tracked-features"),longTasks:new bo("longTasks"),tasks:new bo("tasks"),errors:new _t("errors"),methodPerformance:new xh("perf")},setService(s){ri.setGlobalService(s)}},pi=(()=>{class s{constructor(){this.yo=0}get length(){return this.yo}get isEmpty(){return!this.xs}pushAll(t){for(let e=0;e<t.length;e++)this.push(t[e])}push(t){this.yo++,this.Lr?this.Lr=this.Lr[1]=[t,void 0]:this.Lr=this.xs=[t,void 0]}pop(){if(!this.xs)return null;this.yo--;let t=this.xs[0];return this.xs=this.xs[1],this.xs||(this.Lr=void 0),t}forEach(t){let e=this.xs;for(;e!=null&&e.length;)t(e[0]),e=e[1]}clear(){this.yo=0,this.xs=this.Lr=void 0}}return s})(),Wr=0,Sn=s=>{Wr++,csQueueMicrotask(()=>ps(()=>{try{s()}finally{Wr--}},ce.MicroTask))},Gi=new pi,qi=new pi;function Bt(s,r="high"){Gi.isEmpty&&qi.isEmpty&&Da(Lh),r==="high"?qi.push(To(s)):Gi.push(To(s))}function Da(s,r=10){r===0?Sn(s):csQueueMicrotask(()=>Da(s,r-1))}function Lh(){for(;!qi.isEmpty;)qi.pop()();for(;!Gi.isEmpty;)Gi.pop()()}async function xa(s=1){for(let r=0;r<s;r++)await new Promise(t=>Bt(t))}function To(s){return function(){try{s.apply(window,arguments)}catch(r){at.critical(r)}}}var Hi="null",ze=null,La=[],Vh=()=>{var s;return ui||!!(!((s=document.body)===null||s===void 0)&&s.getAttribute("data-cs-tag-extension"))};!ui&&Vh()&&(window._uxa?_uxa.push(["debugEvents",!0]):window._uxa=[["debugEvents",!0]],ze=new BroadcastChannel("cs-tag"),document.addEventListener("cs.tracking.recordingEvent",s=>{Yr({type:"UXA_EVENT",event:s.detail})}),ze.addEventListener("message",s=>{if(s.data.type==="CONNECT"){if(s.data.sessionId===Hi)return;Hi=s.data.sessionId,csArray.prototype.forEach.call(La,r=>r()),ze==null||ze.postMessage({type:"CONNECTED",sessionId:Hi})}}));function Uh(s){ui||(Hi!==null&&csSetTimeout(s),csSetTimeout(()=>csArray.prototype.push.call(La,s)))}function Yr(s){ze==null||ze.postMessage(s)}function Ns(s){var r;let t=(r=s.length)!==null&&r!==void 0?r:0,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=s[i];return e}function We(s,r){let t=s.length,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=r(s[i]);return e}function jh(s,r,t){let e=[],i=0;for(let n=0;n<s.length;n+=1){let a=r(s[n]);for(let c=0;c<a.length;c++)t(a[c],i++)}return e}function Va(s,r){let t=[];return jh(s,r,e=>csArray.prototype.push.call(t,e)),t}function Q(s,r){if(Hh(s)){let t=s.length;for(let e=0;e<t;e++)r(s[e],e)}else{let t=0,e=s.next();for(;!e.done;)r(e.value,t++),e=s.next()}}function Hh(s){return s.length>=0}function ve(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return s[e]}function Xr(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return!0;return!1}function Bh(s,r){let t=s.length;for(let e=0;e<t;e++)if(!r(s[e],e))return!1;return!0}function vn(s,r){let t=s.length,e=[];for(let i=0;i<t;i+=1){let n=s[i];r(n)&&csArray.prototype.push.call(e,n)}return e}function Fh(s,r,t){let e=s.length+r.length+((t==null?void 0:t.length)||0),i=new csArray(e),n=0;for(let a=0;a<s.length;a++)i[n++]=s[a];for(let a=0;a<r.length;a++)i[n++]=r[a];if(!t)return i;for(let a=0;a<t.length;a++)i[n++]=t[a];return i}function Ao(s,r){for(let t=0;t<s.length;t++)csArray.prototype.push.call(r,s[t])}function xs(s){let r=s instanceof Map,t=[];return s.forEach((e,i)=>csArray.prototype.push.call(t,r?[i,e]:e)),t}var fi=(()=>{class s{constructor(t,e=""){this.name=t,this.format=e}}return s})(),fe=(()=>{class s extends fi{constructor(t){super(t,"Value: {count}"),this.count=0}increase(t=1){this.count+=t}decrease(){this.count>0&&this.count--}clear(){this.count=0}getData(){return{count:this.count}}}return s})();var Ro=(()=>{class s extends fi{constructor(t){super(t,"Living intances: {instances}<br/>Added: {added}<br/>Removed: {removed}"),this.added=0,this.removed=0}get value(){return this.added-this.removed}increase(){this.added++}decrease(){this.removed++}getData(){return{added:this.added,removed:this.removed,instances:this.added-this.removed}}}return s})(),ge=(()=>{class s extends fi{constructor(t){super(t,"Count: {count}<br/>Average: {average}ms<br/>Max: {max}ms<br/>Total: {total}ms"),this.total=0,this.count=0,this.max=0}get average(){return this.count?this.total/this.count:0}elapsed(t){return this.count++,this.max=Math.max(this.max,t),this.total+=t,t}measure(t){let e=C.elapsed();t(),this.count++;let i=C.elapsed()-e;return this.max=Math.max(this.max,i),this.total+=i,i}asyncMeasure(){let t=C.elapsed();return()=>{this.count++;let e=C.elapsed()-t;return this.max=Math.max(this.max,e),this.total+=e,e}}getData(){return{total:this.total,count:this.count,average:this.average,max:this.max}}}return s})(),$h=(()=>{class s extends fi{constructor(){super("INP","Value: {value}")}getData(){return{value:Lt.tasks.eventListener.max}}}return s})(),Lt={general:{category:"General",nbEvents:new fe("Nb of Events"),pendingTasks:new fe("Pending Tasks"),pendingEvents:new fe("Pending Tasks"),nbOfMutationObservers:new Ro("Nb of Mutation Observers"),inp:new $h},mutations:{category:"Mutations",initialDOM:new ge("Initial DOM"),pendingMutations:new fe("Nb of Mutations scheduled"),serializedMutations:new ge("Serialized Mutations"),count:new fe("Mutation Count"),elementMutationObserved:new Ro("Nb of Elements Observed by MutationObserver"),unobserveGarbageCollection:new ge("Unobserve GC")},visibilityObserver:{category:"Visibility Observer",hiddenElements:new fe("Nb of Hidden Elements "),nbElements:new fe("Nb of  Elements")},tasks:{category:"Tasks",tasks:new fe("Tasks"),errors:new fe("Errors"),timer:new ge("Timers"),microtask:new ge("Microtasks"),mutationObserver:new ge("MutationObserver"),monkeyPatch:new ge("MonkeyPatch"),eventListener:new ge("EventListener"),intersectionObserver:new ge("Intersection")}};function zh(){let s=null;Uh(()=>{let r=n=>Object.keys(n),t=csArray.prototype.map.call(r(Lt),n=>Lt[n]),e=csArray.prototype.map.call(t,n=>csArray.prototype.filter.call(csArray.prototype.map.call(r(n),a=>n[a]),a=>a instanceof fi));Yr({type:"UXA_PERFORMANCE_COUNTER_SCHEMA",event:csArray.prototype.map.call(t,(n,a)=>({category:n.category,performanceCounters:csArray.prototype.map.call(e[a],c=>({name:c.name,format:c.format}))}))}),!s&&(s=csSetInterval(()=>{ps(()=>{let n=Va(We(e,a=>We(a,c=>c.getData())),a=>a);Yr({type:"UXA_PERFORMANCE_COUNTER",event:n})},ce.Timer)},1e3))})}var ce=(()=>{let s;return function(r){r.Timer="timer",r.MonkeyPatch="monkeyPatch",r.MutationObserver="mutationObserver",r.EventListener="eventListener",r.IntersectionObserver="intersectionObserver",r.MicroTask="microtask"}(s||(s={})),s})(),Gt=null;async function ps(s,r,t=null){if(Gt&&r!==ce.MicroTask)return s();t&&(Gt=t),Gt||(Gt={type:r,elapsed:0},Lt.tasks.tasks.increase());try{Gt.elapsed+=Gh(s)}catch(e){Lt.tasks.errors.increase(),at.critical(new Error(`Task error:  ${r}/${s.name}.
${e.message}
${e.stack}`,e),"TASK_ERROR")}finally{Wr<=0&&(Lt.tasks[Gt.type].elapsed(Gt.elapsed),Gt.elapsed>50?q.counters.longTasks.push(Gt.elapsed):q.counters.tasks.push(Gt.elapsed),Gt=null)}}function Gh(s){let r=C.elapsed();return s(),C.elapsed()-r}var Er,Ua="cs-native-frame";var De={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen",RegExp:"csRegExp"}};function ja(s,r){let t=ds(window,s);return function(e,i){return t(()=>ps(e,r),i)}}window.csSetTimeout=ja("setTimeout",ce.Timer);window.csSetInterval=ja("setInterval",ce.Timer);window.csQueueMicrotask=(Er=ds(window,"queueMicrotask"))!==null&&Er!==void 0?Er:setTimeout;window.csClearTimeout=ds(window,"clearTimeout");window.csClearInterval=ds(window,"clearInterval");window.csFileReader=ds(window,"FileReader");(()=>{var s;let r=0;function t(i){return"cs$Symbol_"+i}function e(i){return t(i)+ ++r}e.for=t,window.csSymbol=(s=window.Symbol)!==null&&s!==void 0?s:e})();function qh(){let s=document.createElement("iframe");s.id=Ua,s.setAttribute("hidden",""),s.setAttribute("title","Intentionally blank"),s.setAttribute("sandbox","allow-same-origin");let r=document.createElement("cs-native-frame-holder");if(r.setAttribute("hidden",""),document.body.appendChild(r),!!Element.prototype.attachShadow){let e=r.attachShadow({mode:"closed"});return e.innerHTML=s.outerHTML,e.firstElementChild.contentWindow}return r.innerHTML=s.outerHTML,r.firstElementChild.contentWindow}function Wh(s,r){let t,e=s;for(;e&&!(t=Object.getOwnPropertyDescriptor(e,r));)e=Object.getPrototypeOf(e);return t}function Yh(s,r,t){let e=Wh(s,r);if(!e)return function(){return this[r]};switch(t){case"get":return e.get;case"set":return e.set;case"value":return e.value}}function Ha(s){var r,t;Object.keys(De.constructors).forEach(i=>{window[De.constructors[i]]=s[i]instanceof Function&&s[i].prototype==null?s[i].bind(window):s[i]}),Jh(s);let e=s.MutationObserver;("Prototype"in window||Kh())&&(e=(t=(r=ds(window,"MutationObserver"))!==null&&r!==void 0?r:window.WebKitMutationObserver)!==null&&t!==void 0?t:window.MutationObserver),window.csIntersectionObserver=Co(window.IntersectionObserver,ce.IntersectionObserver),window.csMutationObserver=Co(e,ce.MutationObserver),vs("csNode",De.nodeProperties,s.Node.prototype,"get"),vs("csElement",De.elementProperties,s.Element.prototype,"get"),vs("csElement",De.elementPropertiesValues,s.Element.prototype,"value",!1),vs("csHTMLImageElement",De.imageProperties,s.HTMLImageElement.prototype,"set"),vs("csEvent",De.eventProperties,s.Event.prototype,"get"),vs("csNavigator",De.navigatorProperties,s.navigator,"value")}function vs(s,r,t,e,i=!0){r.forEach(n=>{let a=typeof n!="string"&&"binding"in n,c=a?n.propertyName:n;(i||c in t)&&(window[`${s+c}`]=Yh(t,c,e),a&&(window[`${s+c}`]=window[`${s+c}`].bind(n.binding)))})}function _n(s,r){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[s]=r}function Xh(){try{let s=qh();return s?(window.CSPureWindow=s,Ha(window.CSPureWindow),!0):!1}catch(s){return _n("Warning",`failed to copy references from pure iframe: ${s.message}`),!1}}if(!Xh())try{Ha(et)}catch(s){_n("Critical",`failed to copy references from window: ${s.message}`)}function Kh(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Jh(s){window.csquerySelector={1:s.Element.prototype.querySelector,9:s.Document.prototype.querySelector,11:s.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:s.Element.prototype.querySelectorAll,9:s.Document.prototype.querySelectorAll,11:s.DocumentFragment.prototype.querySelectorAll}}function Co(s,r){try{let t=function(e,i){return new s((a,c)=>{ps(()=>e(a,c),r)},i)};return t.base=s,t}catch{return _n("Warning",`failed to extends ${s.name}`),s}}var ht=(()=>{let s;return function(r){r.ELLIPSIS="\u2026";function t(a){return csString.prototype.replace.call(a,/[.*+?^${}()|[\]\\]/g,"\\$&")}function e(a){return csString.prototype.replace.call(a,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}r.escapeInvalidCharacters=e;function i(a,c,l){if("replaceAll"in csString.prototype)return csString.prototype.replaceAll.call(a,c,l);let u=new csRegExp(t(c),"g");return csString.prototype.replace.call(a,u,l)}r.stringReplaceAll=i;function n(a,c,l=""){return a.length<=c?a:csString.prototype.slice.call(a,0,c-l.length)+l}r.truncate=n}(s||(s={})),s})();function Kr(s){return ht.escapeInvalidCharacters(csString.prototype.toLowerCase.call(s.localName))}function Qh(s){let r=s.getAttribute("id");return r&&ht.escapeInvalidCharacters(r)}function ct(s){return s.nodeType===1}function Wi(s){return s.nodeType===3}function Zh(s){return s.nodeType===8}function Ba(s){return ct(s)&&s.localName==="link"}function tu(s){return ct(s)&&s.localName==="source"}function Fa(s){return ct(s)&&s.localName==="a"}function wn(s){return Ba(s)&&csString.prototype.indexOf.call(s.rel,"stylesheet")!==-1}function eu(s){return ct(s)&&s.localName==="img"}function er(s){return ct(s)&&s.localName==="style"}function sr(s){return ct(s)&&s.localName==="input"}function bn(s){return ct(s)&&s.localName==="textarea"}function ir(s){return ct(s)&&s.localName==="script"}function su(s){return ct(s)&&s.localName==="button"}function Ls(s){return ct(s)&&"ownerSVGElement"in s}function Tn(s){return ct(s)&&s.localName==="select"}function iu(s){return ct(s)&&s.localName==="details"}function ru(s){return ct(s)&&s.localName==="summary"}function nu(s){return Ls(s)&&s.localName==="image"}function ou(s){return Ls(s)&&s.localName==="use"}function au(s){return Ls(s)&&s.localName==="feImage"}function cu(s){switch(s.nodeType){case 9:case 11:return!0;default:return!1}}function lu(s){switch(s.nodeType){case 9:case 11:case 1:return!0;default:return!1}}function Yi(s){return s.nodeType===9}function ni(s){return cu(s)&&"host"in s&&"mode"in s}function $a(s){return ct(s)&&!!csElementshadowRoot.apply(s)&&ni(csElementshadowRoot.apply(s))}var hu=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];function uu(s){return ct(s)&&Mt(s.tagName)&&csString.prototype.indexOf.call(s.tagName,"-")>0&&csString.prototype.indexOf.call(s.tagName,":")===-1&&csString.prototype.indexOf.call(s.tagName,'"')===-1&&csString.prototype.indexOf.call(s.tagName,",")===-1&&csArray.prototype.indexOf.call(hu,csString.prototype.toLocaleLowerCase.call(s.tagName))<0}var gi="detached";function za(s){let r=s,t=[r];for(;csNodeparentNode.apply(r)!==null;)r=csNodeparentNode.apply(r),csArray.prototype.push.call(t,r);return Xi(r)&&csArray.prototype.push.call(t,gi),{ancestors:t,selectionRoot:r}}function du(s){let r=s,t=[r],e=null;for(;csNodeparentNode.apply(r)!==null;)e===null&&Fa(r)&&(e=r),csArray.prototype.push.call(t,csNodeparentNode.apply(r)),r=csNodeparentNode.apply(r);return Xi(r)&&csArray.prototype.push.call(t,gi),{firstAnchorParent:e,ancestors:t,selectionRoot:r}}function Xi(s){return _e.isValidElement(s)}var os=(()=>{var s,r;return(r=(s=et.Element)===null||s===void 0?void 0:s.prototype)!==null&&r!==void 0?r:{}})(),te=os.matches||os.matchesSelector||os.mozMatchesSelector||os.msMatchesSelector||os.oMatchesSelector||os.webkitMatchesSelector,Io=os.closest,Ga=9;function pu(s,r){return r?csArray.prototype.some.call(r,t=>te.call(s,t)):!1}function fu(s,r,t){if(s===gi||s.nodeType===Ga)return 0;let e=t.dynamicElementNameRegex,i=!!(e!=null&&e.test(r.localName)),n=Kr(r),a=0,c=r.previousElementSibling;for(;c;)(Kr(c)===n||i&&(e!=null&&e.test(c.localName)))&&!pu(c,t.reliableSelectors)&&(a+=1),c=c.previousElementSibling;return a}function gu(s,r,t){if(s===gi||s.nodeType===Ga)return 0;let e=0,i=r.previousElementSibling;for(;i;)te.call(i,t)&&(e+=1),i=i.previousElementSibling;return e}var mu=[/\d{4}/,/^ember\d+$/],yu="@",An="data-cs-override-id",Eu="data-cs-dynamic-id";function qa(s,r,t,e){let i=e.dynamicIdRegex||null,n=e.dynamicElementNameRegex,a=Kr(s);if(n&&n.test(s.localName)&&(a=csString.prototype.replace.call(a,n,`$1${yu}`)),_u(s,t)){let E=Rn(s);return{hasUniqueIdentifier:!0,elementSelector:`${a}[${An}="${E}"]`}}let c=Iu(s,t,e);if(c.success)return{hasUniqueIdentifier:!0,elementSelector:`${a}#UA[${c.attributeName}="${c.attributeValue}"]`};let l=Su(s,t,e);if(l)return{hasUniqueIdentifier:!0,elementSelector:`${a}#UCS[${l}]`};let u=Qh(s);if(bu(s,u,t,i))return{hasUniqueIdentifier:!0,elementSelector:`${a}#${u}`};let g=vu(s,e);if(g){let E=gu(r,s,g);return{hasUniqueIdentifier:!1,elementSelector:`${a}[${g}](${E})`}}let d=fu(r,s,e);return{hasUniqueIdentifier:!1,elementSelector:`${a}:eq(${d})`}}function Su(s,r,t){if(t.uniqueCssSelectors){for(let e of t.uniqueCssSelectors)if(te.call(s,e)&&Cu(e,r))return e}}function vu(s,r){if(r.reliableSelectors){for(let t of r.reliableSelectors)if(te.call(s,t))return t}}function _u(s,r){let t=Rn(s);return t&&csString.prototype.match.call(t,/^[\w-]+$/)&&Cn(An,t,r)}function wu(s){return Rn(s)!==null}function Rn(s){return s.getAttribute(An)}function bu(s,r,t,e){return r&&!wu(s)&&!Tu(s,r,e)&&Ru(r,t)}function Tu(s,r,t){return s.hasAttribute(Eu)||Au(r,t)}function Au(s,r){let t=!1;return s&&r&&(t=r.test(s)),s&&(csArray.prototype.some.call(mu,e=>e.test(s))||t)}function Ru(s,r){return s&&Cn("id",s,r)}function Cn(s,r,t){try{return window.csquerySelectorAll[t.nodeType].call(t,`[${s}="${r}"]`).length===1}catch(e){if(e.name!=="SyntaxError")throw e}return!1}function Cu(s,r){try{return window.csquerySelectorAll[r.nodeType].call(r,s).length===1}catch(t){if(t.name!=="SyntaxError")throw t}return!1}function Iu(s,r,t){if(!t.uniqueAttributes)return{success:!1};for(let e of t.uniqueAttributes){let i=s.getAttribute(e);if(i!==null&&Cn(e,i,r))return{attributeName:e,attributeValue:i,success:!0}}return{success:!1}}var Jr=11;function Ki(s,r,t){let e=csArray.prototype.shift.call(s);if(s.length===0)return Po(e,t);let i=e,n=s[0],{elementSelector:a,hasUniqueIdentifier:c}=qa(i,n,r,t);if(!t.fullPath&&c){let u=s[s.length-1];return`${Po(u,t)}${a}`}let l=Ki(s,r,t);return`${l?`${l}>`:""}${a}`}function Po(s,r){if(s===gi)return"|detached|";if(s.host){let{ancestors:t,selectionRoot:e}=za(s.host);return`${Ki(t,e,r)}|shadow-root|`}return s.nodeType===Jr?"|fragment|":""}var Wa=(()=>{class s{constructor(t){this.options=t,this.done=!1,this.path=null}getPath(){if(this.path===null)throw new Error("getPath was called before serializeElement");return this.path}isDone(){return this.done}}return s})(),Pu=(()=>{class s extends Wa{constructor(){super(...arguments),this.Eo=!1,this.So=!1,this.cc=!1}ly(t,e){return this.Eo&&!(e===null&&Xi(t))&&t.nodeType!==Jr&&!t.host}hy(t){return!t.localName}serializeElement(t,e,i){var n;if((n=this.path)!==null&&n!==void 0||(this.path=""),this.ly(t,e))return;let a=!1;e===null&&Xi(t)&&(a=!0,this.done=!0);let c=this.So&&!this.options.fullPath?"":">",l=!!t.host;if(l&&this.path&&(this.path="|shadow-root|"+c+this.path,this.cc=!0,this.Eo=!1,this.So=!1),!l&&e===null&&t.nodeType===Jr){this.path="|fragment|"+c+this.path,this.done=!0;return}if(this.hy(t))return;let u=e!=null?e:"detached",{elementSelector:g,hasUniqueIdentifier:d}=qa(t,u,i,this.options);d&&(this.So=!0,this.Eo=!this.options.fullPath);let E=`${a?`|detached|${c}`:""}${this.Eo&&!d?"":g}`,v=!d&&this.So&&!this.options.fullPath?"":this.path&&!this.cc?">":"";this.cc=!1,this.path=`${E}${v}${this.path}`}}return s})();function Zt(s,r=Nt.SHOW_ALL){let t=r|Nt.SHOW_ELEMENT,e=[document.createTreeWalker(s,t,null,!1)],i=Oo(s);i&&csArray.prototype.push.call(e,document.createTreeWalker(i,t,null,!1));let n=null;return{root:s,nextNode(){if(i){let a=i;return i=null,a}for(;e.length>0;){if(n){let u=n;return n=null,u}let c=e[e.length-1].nextNode();if(!c){csArray.prototype.pop.call(e);continue}let l=Oo(c);if(r&Nt.SHOW_DOCUMENT_FRAGMENT&&l&&(n=l),l&&csArray.prototype.push.call(e,document.createTreeWalker(l,t,null,!1)),(vr[c.nodeType]&r)!==0)return c}return null},visitAll(a){vr[s.nodeType]&r&&a(s);let c=this.nextNode();for(;c;){if((vr[c.nodeType]&r)===0){c=this.nextNode();continue}a(c),c=this.nextNode()}},collectAll(a){let c=[];return this.visitAll(l=>csArray.prototype.push.call(c,a?a(l):l)),c}}}function Oo(s){return s&&$a(s)?s.shadowRoot:null}var Sr=(()=>{var s;return(s=et.Node)!==null&&s!==void 0?s:{}})(),Nt=(()=>{var s;return(s=et.NodeFilter)!==null&&s!==void 0?s:{}})(),vr={2:Nt.SHOW_ATTRIBUTE,4:Nt.SHOW_CDATA_SECTION,8:Nt.SHOW_COMMENT,11:Nt.SHOW_DOCUMENT_FRAGMENT,9:Nt.SHOW_DOCUMENT,10:Nt.SHOW_DOCUMENT_TYPE,1:Nt.SHOW_ELEMENT,[Sr.ENTITY_NODE]:Nt.SHOW_ENTITY,[Sr.ENTITY_REFERENCE_NODE]:Nt.SHOW_ENTITY_REFERENCE,[Sr.NOTATION_NODE]:Nt.SHOW_NOTATION,7:Nt.SHOW_PROCESSING_INSTRUCTION,3:Nt.SHOW_TEXT},Ya=!1,Qr=5;function Ou(s=5){Ya=at.isPerfLoggingActive(),Qr=s}function fs(s,r){return function(){if(!Ya)return s.apply(this,arguments);let t=C.elapsed(),e=s.apply(this,arguments);if(e!=null&&e.then)e.then(()=>{let i=C.elapsed()-t;i>=Qr&&q.counters.methodPerformance.add(r,i)});else{let i=C.elapsed()-t;i>=Qr&&q.counters.methodPerformance.add(r,i)}return e}}var kt=function(s){return function(r,t,e){let i=e.value;e.value=fs(i,s)}},cs=(()=>{let s;return function(r){function t(){return!!Element.prototype.attachShadow}r.isSupported=t;function e(n){return n&&$a(n)?n.shadowRoot:null}r.getShadowRoot=e;function i(n){return Zt(n,NodeFilter.SHOW_DOCUMENT_FRAGMENT).collectAll(a=>a.host)}r.getAllShadowHosts=fs(i,"getAllShadowHosts")}(s||(s={})),s})(),gt=(()=>{let s;return function(r){function t(){let d=[i()];return document.documentElement&&csArray.prototype.push.call(d,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(d,document.body.scrollHeight,document.body.offsetHeight),Math.max(...d)}r.documentHeight=t;function e(){return document.documentElement.scrollWidth}r.documentWidth=e;function i(){return window.innerHeight}r.windowHeight=i;function n(){return window.innerWidth}r.windowWidth=n;function a(){let d=window.csScreen.width;return Ps(d)&&d>0?d:window.screen.width}r.screenWidth=a;function c(){let d=window.csScreen.height;return Ps(d)&&d>0?d:window.screen.height}r.screenHeight=c;function l(){return window.pageXOffset}r.windowOffsetX=l;function u(){return window.pageYOffset}r.windowOffsetY=u;function g(){return{dw:`${e()}`,dh:`${t()}`,ww:`${n()}`,wh:`${i()}`,sw:`${a()}`,sh:`${c()}`}}r.getRequestParameters=g}(s||(s={})),s})(),_r=(()=>{var s;return(s=et.Node)!==null&&s!==void 0?s:Object})(),dt=(()=>{let s;return function(r){let t="isConnected"in _r.prototype?b=>b.isConnected:b=>!b.ownerDocument||!(b.ownerDocument.compareDocumentPosition(b)&b.DOCUMENT_POSITION_DISCONNECTED);function e(b,k){for(let U=b;U;U=csNodenextSibling.apply(U))k(b)}r.forEachChild=e;function i(b){return t(b)}r.isConnected=i;function n(b,k){let U=[];for(let B of l(b,k))csArray.prototype.push.call(U,B);return U}r.getAncestors=n;let a=(b,k)=>{var U;return(U=csNodeparentNode.apply(b))!==null&&U!==void 0?U:k&&ni(b)?b.host:null};function c(b,k,U=!1){let B=b;for(;B;){if(k(B))return B;let ot=a(B,U);if(ot&&ot!==B)B=ot;else break}return null}r.findAncestor=c;function*l(b,k=!1){let U=b;for(;U;){yield U;let B=a(U,k);if(B&&B!==U)U=B;else break}}r.walkUp=l;function u(b,k){if(b===k||k.contains(b))return!0;let U=r.getParentElement(b);return U&&U!==b?u(U,k):!1}r.isDescendantOf=u;function g(b){var k;return b.parentElement?b.parentElement:r.getRootNode(b)?(k=r.getRootNode(b))===null||k===void 0?void 0:k.host:null}r.getParentElement=g;function d(b,k=document){let U=Ns(window.csquerySelectorAll[k.nodeType].call(k,b)),B=cs.getAllShadowHosts(k);for(let ot of B){let Ot=cs.getShadowRoot(ot);if(!Ot)continue;let Vt=Ns(window.csquerySelectorAll[Ot.nodeType].call(Ot,b));csArray.prototype.push.call(U,...Vt)}return U}r.findAllElements=d,r.getRootNode=(()=>{if("getRootNode"in _r.prototype)return(U,B)=>U.getRootNode(B);function b(U){let B=k(U);return ni(B)?b(B.host):B}function k(U){return csNodeparentNode.apply(U)!=null?k(csNodeparentNode.apply(U)):U}return(U,B)=>typeof B=="object"&&!!B.composed?b(U):k(U)})();function E(b){return b==="transparent"||/^(rgba|hsla)\(\d+, \d+%?, \d+%?, 0\)$/.test(b)}function y(b){let k=b.getBoundingClientRect();return k.right+gt.windowOffsetX()<0||k.bottom+gt.windowOffsetY()<0}function v(b){var k,U;if(((k=b.checkVisibility)===null||k===void 0?void 0:k.call(b,{checkOpacity:!0,checkVisibilityCSS:!0}))===!1)return!0;if(!b.offsetParent){if(!b.getBoundingClientRect)return at.warn(`SUP-11432: Element doesn't have getBoundingClientRect. Node: ${b instanceof _r} Ctor: ${(U=b==null?void 0:b.constructor)===null||U===void 0?void 0:U.name}`),!1;let Ot=b.getBoundingClientRect();if(Ot.width==0&&Ot.height==0)return!0}let B=window.getComputedStyle(b);return B?B.display==="none"||B.visibility==="hidden"||B.visibility==="collapse"||B.opacity==="0"||B.filter==="opacity(0)"||B.width==="0px"&&B.height==="0px"||E(B.color):!0}r.isHiddenByCSS=v;function I(b){if(v(b))return!0;let U=g(b);return U!=null&&I(U)}r.areAncestorsHiddenByCSS=I;function P(b){let k=null,U=b;do if(v(U))k=U;else break;while(U=g(U));return k}r.getTopAncestorHiddenByCSS=P;function S(b){let k=_(b);return k!==null&&!b.contains(k)&&!k.contains(b)}function _(b){let k=b.getBoundingClientRect(),U=k.left+.5*k.width,B=k.top+.5*k.height;return O(document,U,B)}r.getTopElement=_;function D(b){if(!b.getBoundingClientRect)return null;let k=b.getBoundingClientRect(),U=k.x+k.width/2,B=k.y+k.height/2;return r.getTopElementFromPoint(document,U,B)}r.getElementOnTop=D;function O(b,k,U){let B=b.elementFromPoint(k,U);if(!B)return null;let ot=cs.getShadowRoot(B);return ot&&ot!=r.getRootNode(document.body)&&ot!==b?O(ot,k,U):B}r.getTopElementFromPoint=O;function T(b){return!y(b)&&!v(b)&&!S(b)}r.isVisibleInDocument=T;function L(b){return v(b)?!1:Z(b)}r.isVisibleInViewportInForeground=L;function Z(b){let k=_(b);return k===null?!1:b===k?!0:St(b)?b.textContent!==""&&k.contains(b):b.contains(k)}r.isInViewPort=Z;function rt(b,k,U){let B=b.getAttributeNS(k,U);return B===""?b.hasAttributeNS(k,U)?B:null:B}r.getAttributeNS=rt;function Et(b){return!!(b.hasAttribute("tabIndex")||b.getAttribute("contentEditable")==="true"||Fa(b)&&b.hasAttribute("href")||(Tn(b)||bn(b)||sr(b)||su(b))&&!b.hasAttribute("disabled")||iu(b)||ru(b))}r.isElementFocusable=Et;function St(b){return b.localName==="span"||b.localName==="a"||b.localName==="b"||b.localName==="i"||b.localName==="button"||b.localName==="input"||b.localName==="label"||b.localName==="cite"||b.localName==="small"||b.localName==="strong"||b.localName==="code"||b.localName==="abbr"||b.localName==="em"||b.localName==="dfn"||b.localName==="time"||b.localName==="output"||b.localName==="object"||b.localName==="sub"}r.isInlineElement=St}(s||(s={})),s})(),Nu=(()=>{class s{constructor(t){this.uy=t}run(t){let e=[...this.uy],i=dt.getAncestors(t,!1),n=i[i.length-1];for(;e.length>0&&i.length>0;){let a=csArray.prototype.shift.call(i),c=i[0]||null;if(this.dy(e,a,c,n),this.py(e),e.length===0)break;i.length===0&&a.host&&(i=dt.getAncestors(a.host,!1),n=i[i.length-1])}}dy(t,e,i,n){for(let a of t)a.serializeElement(e,i,n)}py(t){for(let e=0;e<t.length;e++)t[e].isDone()&&(csArray.prototype.splice.call(t,e,1),e--)}}return s})(),Mu=(()=>{class s extends Wa{serializeElement(t){var e;if((e=this.path)!==null&&e!==void 0||(this.path=""),(t==="detached"||t.localName==="body")&&(this.done=!0,this.path.length>0))return;let i=this.fy(t);if(i+=i.length>0?"|":"",this.path.length+i.length>this.options.hierarchyMaxLength){this.done=!0;return}this.path=i+this.path}fy(t){if(!t.localName)return"";let e=`@${t.localName};`;return e+=this.gy(t.id),t.classList&&(e+=this.my(csArray.from(t.classList))),t.attributes&&(e+=this.yy(t)),e}gy(t){return t?`#${t};`:""}my(t){return t.length>0?`.${csArray.prototype.join.call(csArray.prototype.sort.call(t),";.")};`:""}Ey(t,e){var i,n;return((n=(i=this.options).isAttributeSensitive)===null||n===void 0?void 0:n.call(i,t,e))||csArray.prototype.indexOf.call(this.options.attributeIgnoreTokens,e)!==-1||Ls(t)&&csString.prototype.indexOf.call(e,"data-")===-1&&e!=="aria-label"||sr(t)&&e==="value"}Sy(t,e){return this.options.useAnonymization&&!this.options.allWhitelistedAttributes.has(t)||e.length>this.options.attrMaxLength}vy(t){let e={};for(let i of csArray.from(t.attributes))this.Ey(t,i.name)||(e[i.name]=i.value);return e}yy(t){var e,i;if(!((i=(e=this.options).isNodeSensitive)===null||i===void 0)&&i.call(e,t))return"";let n=Object.entries(this.vy(t));return csArray.prototype.join.call(csArray.prototype.sort.call(csArray.prototype.map.call(csArray.prototype.filter.call(n,([a])=>a.length<this.options.attrMaxLength),([a,c])=>this.Sy(a,c)?`[${a}]`:`[${a}=${c}]`)),";")+(n.length>0?";":"")}}return s})(),_e=(()=>{let s;return function(r){r.INVALID_ELEMENT="INVALID_ELEMENT";function t(c){return!!c&&"localName"in c&&"getAttribute"in c&&"hasAttribute"in c&&"parentNode"in c}r.isValidElement=t;function e(c,l,u={fullPath:!1,dynamicIdRegex:null}){let g=a(c);if(g===document)return{path:"",hierarchy:""};if(!t(g))return{path:r.INVALID_ELEMENT,hierarchy:r.INVALID_ELEMENT};let d=new Pu(u),E=new Mu(l);return new Nu([d,E]).run(g),{path:d.getPath(),hierarchy:E.getPath()}}r.getElementPathAndHierarchy=e;function i(c,l={fullPath:!1,dynamicIdRegex:null}){let u=a(c);if(u===document)return"";if(!t(u))return r.INVALID_ELEMENT;let{ancestors:g,selectionRoot:d}=za(u);return Ki(g,d,l)}r.getElementPath=i;function n(c,l={fullPath:!1,dynamicIdRegex:null}){let u=a(c);if(u===document)return{path:"",firstAnchorParent:null};if(!t(u))return{path:r.INVALID_ELEMENT,firstAnchorParent:null};let{firstAnchorParent:g,ancestors:d,selectionRoot:E}=du(u);return{path:Ki(d,E,l),firstAnchorParent:g}}r.getElementPathAndFirstAnchorParent=n;function a(c){return c&&"jquery"in c&&c.length===1?c[0]:c}}(s||(s={})),s})();window.CSPathComputation=window.CSPathComputation||_e;var Xa=["t.contentsquare.net","clicktale"],ku=s=>{var r;if(typeof s.filename=="string"&&csArray.prototype.some.call(Xa,t=>csString.prototype.indexOf.call(s.filename,t)>-1)&&!(csString.prototype.indexOf.call(s.filename,"blob")>-1&&(s.message==null?void 0:csString.prototype.indexOf.call(s.message,"importScripts"))>-1)){let t=new Error(s.message);t.stack=(r=s.error)===null||r===void 0?void 0:r.stack,j.critical(t)}};window.addEventListener("error",ku);var j=(()=>{class s{constructor(){}static whiteListFilename(t){csArray.prototype.push.call(Xa,t)}static setStrategy(t){s.qi=t}static computeIsActive(t){s.$e=hs.boolean(t),s.$e?s.lc=hs.boolean(10):s.lc=!1}static isLoggingActive(){return s.$e}static getStrategy(){return s.qi}static debug(t,e=""){s.$e&&this.qi.send(t,e,nt.debug)}static warn(t,e=!0,i=""){var n;q.counters.errors.count("warning"),s.$e&&e&&this.qi.send(t,i,nt.warn),(n=window.UXAnalytics.Console)===null||n===void 0||n.warn(t)}static implementation(t,e=""){q.counters.errors.count("implementation"),s.$e&&this.qi.send(t,e,nt.implementation)}static error(t,e=""){var i;q.counters.errors.count("error"),s.$e&&this.qi.send(t,e,nt.error),(i=window.UXAnalytics.Console)===null||i===void 0||i.error(t)}static critical(t,e=""){q.counters.errors.count("critical"),this.qi.send(t,e,nt.critical)}static tryToExecute(t,e){return function(...i){try{let n=e.apply(this,i);return J(et.Promise)&&n instanceof et.Promise?n.then(a=>a,a=>s.error(Ke(a)?a:new Error(a),t)):n}catch(n){try{s.error(Ke(n)?n:new Error(n),t)}catch{}}}}static isPerfLoggingActive(){return s.lc}}return s.$e=!1,s.lc=!1,s})();var Du=/^\d+\.\d+(?:\.\d+)?$/,xu=s=>{if(!Du.test(s))return;let[r,t,e]=csArray.prototype.map.call(csString.prototype.split.call(s,"."),Number);return{major:r,minor:t,patch:!e||Number.isNaN(e)?0:e}},Lu=(s,r)=>s.major!==r.major?s.major-r.major:s.minor!==r.minor?s.minor-r.minor:s.patch-r.patch,Vu=(s,r)=>Lu(s,r)>=0;function Wt(s){return Tt(s,"data:")}function Uu(s){return Tt(s,"#")}function ju(s){return!!s&&(di(s,".css")||Tt(s,"https://fonts.googleapis.com/css"))}var Hu=["id","class","style","srcset","sizes","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot","data-cs-override-id"],Ka=s=>{let r=new Set(Hu);return csArray.prototype.forEach.call(s,t=>{r.add(t)}),r},Bu=["svg","slot"],Fu=(s,r,t)=>t==="radio"&&s==="input"&&r==="name"||csArray.prototype.indexOf.call(Bu,s)>-1,Ja={href:new Set(["a"]),src:new Set(["iframe"])},$u=s=>Ja.hasOwnProperty(s),zu=(s,r,t)=>{var e;return((e=Ja[r])===null||e===void 0?void 0:e.has(s))&&!Wt(t)},Gu=(s,r,t)=>(t==="submit"||t==="button")&&s==="input"&&r==="value";function wr(s){return s?qu(s):null}function qu(s){try{let r=/^\/(.*)\/([gim]*)$/.exec(s);if(r){let[,t,e]=r;return new csRegExp(`^${t}$`,e)}return new csRegExp(`^${s}$`)}catch{return null}}var Wu=1,Yu="f553e78fb58e051e51fe8074c4c6e73e",Zr=(()=>{let s;return function(r){r[r.Disabled=0]="Disabled",r[r.ButtonAndLinkOnly=1]="ButtonAndLinkOnly",r[r.Enabled=2]="Enabled"}(s||(s={})),s})(),Xu=(()=>{class s{constructor(t){var e,i,n,a,c,l,u,g,d,E,y,v,I,P;this.isChild=!1,this.isSMB=(e=t.isSMB)!==null&&e!==void 0?e:!1,this.trackerDomain=t.trackerDomain,this.dynamicConfDomain=t.dynamicConfDomain,this.settingsFileUri=t.settingsFileUri,this.tagDomain=t.tagDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.smbConfig=t.smbConfig,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||En,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.mouseMoveHeatmapEnabled=t.mouseMoveHeatmapEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.collectionEnabled=!!(!((a=(i=t.collectionEnabled)!==null&&i!==void 0?i:(n=t.smbConfig)===null||n===void 0?void 0:n.record)!==null&&a!==void 0)||a),this.useSentry=!!((c=t.useSentry)!==null&&c!==void 0?c:!((l=t.smbConfig)===null||l===void 0)&&l.useSentry),this.apiErrors={enabled:(u=t.apiErrorsEnabled)!==null&&u!==void 0?u:0,...t.apiErrors},this.customErrors={enabled:(g=t.customErrorsEnabled)!==null&&g!==void 0?g:0,...t.customErrors},this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=wr(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new csRegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=wr(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=wr(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.recordingUrlRules=(d=t.recordingUrlRules)!==null&&d!==void 0?d:[],this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex===""&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new csRegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions={...t.taskSchedulerOptions,enabled:!!t.taskSchedulerOptions.enabled}),this.uxaDomain=t.uxaDomain,this.environment=((E=t.uxaDomain)===null||E===void 0?void 0:E.indexOf("staging"))>-1?"staging":"production",this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions),t.voc&&(this.voc={...t.voc,enabled:!!t.voc.enabled}),this.vocData=t.vocData,t.heapEnvironment&&(this.heapEnvironment=t.heapEnvironment),t.implementations&&t.implementations.length&&(this.implementations=t.implementations),this.eventsApiEnabled=!!t.eventsApiEnabled,this.anonymizeDigits=(y=t.anonymizeDigits)!==null&&y!==void 0?y:null,this.isHeapPresent=window.heap!==void 0,this.recordTargetingRules=(v=t.recordTargetingRules)!==null&&v!==void 0?v:[],this.paProxyDomainUri=t.paProxyDomainUri||null,this.emitRecordInfoEvents=t.emitRecordInfoEvents!=!1,this.collectHierarchy=!!t.collectHierarchy,this.collectSubmit=!!t.collectSubmit,this.collectTargetText=(I=t.collectTargetText)!==null&&I!==void 0?I:Zr.Disabled,this.identityEncryptionKey=t.identityEncryptionKey||null,this.tagVerificationDomain=t.tagVerificationDomain,this.tagVerificationEnabled=!!t.tagVerificationEnabled,this.trackingCodeVerified=!!t.trackingCodeVerified,this.quotas=(P=t.quotas)!==null&&P!==void 0?P:null}getTrackerUri(){return`${this.us()}://${this.trackerDomain}`}getSentryFileUri(){return`${this.us()}://${this.tagDomain}/uxa/smb/errors.js`}getSentryDSNUri(){return`https://${Yu}@${this.loggerDomain}/4508608369131520`}getRecordingUri(){return`${this.us()}://${this.malkaRecordingDomain}`}getLoggerUri(){return`${this.us()}://${this.loggerDomain}`}getMetricsUri(){return`${this.us()}://${this.loggerDomain}/metrics`}getStaticResourceManagerUri(){return`${this.us()}://${this.staticResourceManagerDomain}`}getVerificationEndpoint(){return`${this.us()}://${this.tagVerificationDomain}`}getSettingsFileUri(){return this.settingsFileUri?this.settingsFileUri:`${this.us()}://${this.dynamicConfDomain}/${this.projectId}.json`}isQuotaEnabled(){return this.isSMB||this.quotas!==null}getPaProxyDomainUri(){return`${this.us()}://${this.paProxyDomainUri}`}us(){return this.useHttps?"https":"http"}isProjectActive(){return this.status===Wu}processOptionOverrides(t){t&&t.forEach&&t.forEach(([e,...i])=>{if(e==="setOption"){let[n,a]=i;this._y(n,a)}})}_y(t,e){t==="trackerDomain"&&(this.trackerDomain=e),t==="loggerDomain"&&(this.loggerDomain=e),t==="malkaRecordingDomain"&&(this.malkaRecordingDomain=e),t==="staticResourceManagerDomain"&&(this.staticResourceManagerDomain=e),t==="minLogLevel"&&(this.minLogLevel=e),t==="useHttps"&&(this.useHttps=!!e),t==="isWebView"&&(this.isWebView=e),t==="dynamicConfDomain"&&(this.dynamicConfDomain=e),t==="paProxyDomainUri"&&(this.paProxyDomainUri=e)}getRequestParameters(){return{pid:`${this.projectId}`}}updateDynamicFields(t,e){t==="emitDebugEvents"&&(this.emitDebugEvents=e),t==="minLogLevel"&&(this.minLogLevel=e)}isHeaderCollectionActive(){var t,e;return this.apiErrors.collectStandardHeaders||!!(!((t=this.apiErrors.validCustomHeaders)===null||t===void 0)&&t.length)||!!(!((e=this.apiErrors.plainCustomHeaders)===null||e===void 0)&&e.length)}isCsSideloadingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_sideloads_heap"&&!this.isHeapPresent}isHeapSideloadsCs(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"}isHeapSideloadsCsV5(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"&&this.rd()}isHeapSideloadsStartDataCollection(){if(this.isHeapSideloadsCs()){if(this.rd())return!0;let t=xu(this.getHeapVersion()||"");if(t&&t.major===4&&Vu(t,{major:4,minor:23,patch:5}))return!0}return!1}rd(){var t;return typeof((t=window.heap)===null||t===void 0?void 0:t.getUserId)=="function"}getHeapVersion(){var t,e,i,n,a,c;return typeof((t=window.heap)===null||t===void 0?void 0:t.getConfig)=="function"&&((n=(i=(e=window.heap)===null||e===void 0?void 0:e.getConfig())===null||i===void 0?void 0:i.sdk)===null||n===void 0?void 0:n.version)||((c=(a=window.heap)===null||a===void 0?void 0:a.version)===null||c===void 0?void 0:c.heapJsVersion)||void 0}isCsCrosswritingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_crosswrites_heap"}getHeapStorageLocation(){var t,e;return(e=(t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_storage_location)!==null&&e!==void 0?e:null}getHeapWebAppUri(){return this.getHeapStorageLocation()==="eu-west-1"?"https://eu.heapanalytics.com":"https://heapanalytics.com"}isCollectTargetTextEnabled(){return this.isSMB||this.collectTargetText!==Zr.Disabled}isNetworkDetailsEnabled(){return this.performanceTimingOptions?this.performanceTimingOptions.withResource||this.performanceTimingOptions.withNavigation:!1}hasRecordingUrlRules(){var t;return!!(!((t=this.recordingUrlRules)===null||t===void 0)&&t.length)}hasTargetingRules(){var t;return!!(!((t=this.recordTargetingRules)===null||t===void 0)&&t.length)}getHeapEnvId(){return this.heapEnvironment?this.heapEnvironment.env_id:""}}return s})(),Ku=(()=>{class s{constructor(t,e){this.vo=t,this.nd=e}init(){this.od=this.vo!==this.vo.top,this.ad=this.nd.isWebView&&this.vo===this.vo.top,this.nd.iframesTracking&&this.od||this.ad?this.cd=!1:this.cd=!0}isInIframeContext(){return this.od}isTopWindowTracker(){return this.cd}isInWebViewContext(){return this.ad}}return s})();function No(){}function Ji(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function Ju(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var br=csSymbol("cachedJson");function Qu(s){if(s[br])return s[br];if(csArray.isArray(s)){if(s.length===0)return"[]";let r="["+Ms(s[0]);for(let t=1;t<s.length;t++)r+=","+Ms(s[t]);return r+="]"}return s[br]=csJSON.stringify(s)}var Ms=typeof window.Symbol!="undefined"?Qu:csJSON.stringify;function Qa(s,r){return csArray.prototype.reduce.call(Object.keys(s),(t,e)=>(r(s[e])||(t[e]=s[e]),t),{})}var oi=(()=>{let s;return function(r){function t(e){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(e),i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`),"&")}r.toQuery=t}(s||(s={})),s})(),Za=(()=>{class s{constructor(t,e){this.domainUri=t,this.path=e,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}setRequestParametersProviders(...t){this.requestParametersProviders=t}before(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)}after(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)}retrieveParameters(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,t=>t.getRequestParameters()),(t,e)=>({...t,...e})):{}}}return s})(),ks=(()=>{class s extends Za{constructor(t,e){super(t,e)}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,i=>i());let t=this.retrieveParameters();this.hc(t);let e=oi.toQuery(t);this.wy(e),csArray.prototype.forEach.call(this.afterRequestCallbacks,i=>i())}wy(t){let e=new window.Image(1,1);e.onload=No,e.onerror=No,csHTMLImageElementsrc.call(e,`${this.domainUri}${this.path?`/${this.path}`:""}?${t}`)}hc(t){t.r=csString.prototype.slice.call(`${Math.random()}`,2,8)}}return s})();var Zu=(()=>{class s{constructor(t,e){this.ds=t,this.by=e}init(){this.ps=new ks(this.ds.getLoggerUri()),this.ps.setRequestParametersProviders(this,this.by)}send(t){this._o=t,this.ps.send()}getRequestParameters(){return{a:this._o.app,l:this._o.level,m:this._o.message,s:this._o.stacktrace}}}return s})(),td=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,ed=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,sd="CS_ANONYMIZED_EMAIL",Tr="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",id=new csRegExp(`(ey${Tr}\\.ey${Tr}\\.${Tr})`,"g"),rd="CS_ANONYMIZED_JWT",nd=/[0-9]{4}/,od=/(^|[^a-zA-Z0-9*.,-])([45*][0-9*]{3}([ -]?)[0-9*]{4}\3[0-9*]{4}\3[0-9*]{4})($|[^a-zA-Z0-9*.,-])/g,ad="CS_ANONYMIZED_PII",cd="\u2022",ld=/\d/g,hd=/([+(]{0,2}\d[-_ ()/]{0,4}){9,}/,ud=/(?:\d{1,3}\.){3}\d{1,3}/,dd=/(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}/,xe=(()=>{let s;return function(r){function t(g){return csString.prototype.replace.call(g,td,sd)}r.replaceEmail=t;function e(g){return csString.prototype.replace.call(g,id,rd)}r.replaceJWT=e;function i(g,d){return csString.prototype.replace.call(g,od,d)}r.replaceCreditCardNumber=i;function n(g){return csString.prototype.replace.call(g,ld,cd)}r.replaceDigits=n;function a(g){return ud.test(g)||dd.test(g)}r.mayHaveIPAddress=a;function c(g){return hd.test(g)}r.mayHaveNumberSequence=c;function l(g){return nd.test(g)}r.mayHaveCreditCardNumber=l;function u(g){return ed.test(g)}r.mayHaveEmail=u}(s||(s={})),s})(),mi=(()=>{class s{hasPII(t,e){let i=this.checkAndAnonymizePII(t,e);return t!==i}checkAndAnonymizePII(t,e=null){let i=this.Ty(this.pc(t));return e===!0?i=this.Ay(i):e===!1&&(i=this.Ry(i)),i}anonymizePII(t){return this.pc(t)}anonymizeJwt(t){return xe.replaceJWT(t)}anonymizeFields(t,e){return csArray.prototype.forEach.call(e,i=>{t[i]=this.pc(t[i])}),t}pc(t){if(xe.mayHaveEmail(t)){let e=xe.replaceEmail(t);return e!==t&&q.counters.redactedPII.count("email"),e}return t}Ay(t){return xe.replaceDigits(t)}Ry(t){return xe.mayHaveNumberSequence(t)?xe.replaceDigits(t):t}Ty(t){return xe.mayHaveCreditCardNumber(t)?xe.replaceCreditCardNumber(t,(e,i,n,a,c)=>{if(csString.prototype.indexOf.call(n,"*")===-1){let u=a.length?csArray.prototype.join.call(csString.prototype.split.call(n,a),""):n;if(!this.Cy(u))return e;q.counters.redactedPII.count("cc")}else q.counters.redactedPII.count("cc-partial");return`${i}${ad}${c}`}):t}Cy(t){let e=parseInt(t[t.length-1]),i=0;for(let n=t.length-2;n>=0;n--){let a=parseInt(t[n]);n%2===0&&(a*=2),i+=Math.floor(a/10)+a%10}return 10-i%10===e}}return s})(),tc="15.133.4";function In(){return{v:tc}}var pd=(()=>{class s{constructor(t,e){this.f=t,this.O=e}getRequestParameters(){return{d:`${C.now()}`,p:this.O.anonymizePII(window.location.href),...this.f.getRequestParameters(),...In()}}}return s})(),fd="uxa",Mo=5,gd="No stacktrace",ec="snippet-",sc="implementation-snippet-",ko=(()=>{let s;return function(r){r.IMPLEMENTATION="implementation",r.DYNAMIC="dynamic"}(s||(s={})),s})(),md=(()=>{class s{constructor(t,e,i){this.fs=e,this.O=new mi,this.ld=yr[nt.warn],this.ld=yr[t.minLogLevel||nt.warn],this.ps=i||new Zu(t,new pd(t,this.O)),this.ud={[nt.debug]:[],[nt.warn]:[],[nt.implementation]:[],[nt.error]:[],[nt.critical]:[]},this.wo={implementation:{},dynamic:{}},this.ps.init()}send(t,e="",i=nt.warn){if(!this.Iy(i,e))return;csArray.prototype.push.call(this.ud[i],e||"");let n={message:this.Py(t,e),stacktrace:this.Oy(t),app:fd,level:i};this.ps.send(n)}Py(t,e){let i=Ke(t)?this.O.anonymizePII(t.message||t.toString()):t;return e&&(i+=` ErrorCode: ${e}`),i}Oy(t){return Ke(t)?`${t.stack||gd} ${this.Vr()}`:this.Vr()}Vr(){let t=this.fs.getVisitorService(),e=t==null?void 0:t.getVisitor();if(!e)return"No context";let i=this.fs.getSessionService(),n=i&&i.getSession(),a={userId:e.id,sessionNumber:e.visitsCount,pageNumber:n&&n.pageNumber};return csJSON.stringify(a)}Iy(t,e){if(yr[t]<this.ld)return!1;if((e==null?void 0:csString.prototype.indexOf.call(e,sc,0))===0)return this.dd(e,ko.IMPLEMENTATION);if((e==null?void 0:csString.prototype.indexOf.call(e,ec,0))===0)return this.dd(e,ko.DYNAMIC);let i=this.ud[t];return i.length>=Mo?!1:!(e&&csArray.prototype.some.call(i,n=>n===e))}dd(t,e){return t in this.wo[e]?this.wo[e][t]>=Mo?!1:(this.wo[e][t]+=1,!0):(this.wo[e][t]=1,!0)}}return s})(),wt=!ui&&document.createElement("a"),yd=/(:443|:80)$/;function ae(s){return wt?(wt.href=s,wt.href):""}function Ed(s,r){return new csURL(s,r).href}function ic(s){let r=On(s);return r===null?"":decodeURIComponent(r.hostname)}function Pn(s,r){return csArray.prototype.some.call(r,t=>di(s,`.${t}`)||s===t||t==="")}function Sd(s){return s[0]==="/"?s:`/${s}`}function Do(s){return csString.prototype.replace.call(s,yd,"")}function On(s){return!wt||!Tt(s,"http://")&&!Tt(s,"https://")?null:(wt.href=s,{hash:wt.hash,host:Do(wt.host),hostname:wt.hostname,href:wt.href,origin:wt.origin?wt.origin:Do(`${wt.protocol}//${wt.host}`),pathname:Sd(wt.pathname),port:wt.port,protocol:wt.protocol,search:wt.search})}var xo="CS_IFRAME_MESSAGE",vd=(()=>{let s;return function(r){r.AfterPageView="afterPageView",r.GetSessionKey="getSessionKey"}(s||(s={})),s})(),re=(()=>{let s;return function(r){r.Parent="parent",r.Child="child"}(s||(s={})),s})(),K=(()=>{let s;return function(r){r.Discovery="discovery",r.Stop="stop",r.RecordingContext="recordingContext",r.SensitiveStatus="sensitiveStatus",r.RecordingEvent="recordingEvent",r.EndOfBufferedMessages="endOfBufferedMessages",r.ChildLogMessage="childLogMessage",r.AnalysisEvent="analysisEvent",r.JavascriptError="javascriptError",r.ApiError="apiError",r.Assets="assets",r.DetailedApiError="detailedApiError",r.EmerchandisingMessage="emerchandisingMessage",r.Commands="commands",r.IntegrationCallback="integrationCallback",r.StaticResource="staticResource",r.TrackingContextResultMessage="trackingContextResultMessage",r.TrackingContextRequestMessage="trackingContextRequestMessage",r.CustomError="customError"}(s||(s={})),s})(),ft=(()=>{let s;return function(r){function t(l,u,g,d){let E={type:l,from:u,pid:g,signature:xo};return d!==void 0&&d>=0&&(E.id=d),E}r.buildBaseMessage=t;function e(l,u,g,d){let E=ic(l.origin);return!!l.data&&!!l.data.type&&l.data.signature===xo&&l.data.from===u&&l.data.pid===g&&Pn(E,d)}r.isMessageValid=e;function i(l,u,g,d){d?l.postMessage(g,u,d):l.postMessage(g,u)}r.sendPostMessage=i;function n(){return new MessageChannel}r.getNewChannelMessage=n;function a(l,u){l.postMessage(u)}r.sendChannelMessage=a;function c(l){l.close()}r.closeChannelPort=c}(s||(s={})),s})(),_d=(()=>{class s{constructor(t){this.f=t}send(t,e="",i=nt.warn){let n={message:t,errorCode:e,level:i},a=ft.buildBaseMessage(K.ChildLogMessage,re.Child,this.f.projectId);a.content=n,ft.sendPostMessage(window.parent,"*",a)}}return s})(),wd=(()=>{class s{setContext(t,e){this.N=t,this.R=e}getVisitorService(){return this.N}getSessionService(){return this.R}}return s})();function bd(s){if(document!=null&&document.prerendering){document.addEventListener("prerenderingchange",s,{once:!0});return}s()}function H(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(a=s[c])&&(n=(i<3?a(n):i>3?a(r,t,n):a(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function Td(){let s=new MutationObserver(r=>{r.forEach(t=>{Q(t.removedNodes,e=>{e instanceof HTMLElement&&e.tagName==="CS-NATIVE-FRAME-HOLDER"&&(q.counters.pureWindowState.count("iframe-deletion"),at.warn("<cs-native-frame-holder> deleted"),s.disconnect())})})});s.observe(document.body,{childList:!0})}function Lo(s){return typeof s!="function"?!1:s.toString().indexOf("[native code]")!==-1}function Ad(){(!Lo(MutationObserver)||!Lo(MutationObserver.prototype.observe))&&q.counters.patchedNativeFunctions.count("MutationObserver")}function Rd(){try{window.CSPureWindow&&Td(),Ad()}catch{}}var ut=(()=>{let s;return function(r){r.CURRENT_DOMAIN="CURRENT_DOMAIN";function t(l){let g=new csRegExp(`(^|;)[ ]*${l}=([^;]*)`).exec(document.cookie);return g?decodeURIComponent(g[2]):null}r.get=t;function e(l,u,g,d,E,y){let v=encodeURIComponent(`${u}`),I=g===r.CURRENT_DOMAIN?void 0:g,P=i(d),S=P?`;expires=${P.toUTCString()}`:"",_=";path=/",D=Mt(I)?`;domain=${I}`:"",O=`${l}=${v}${S}${_}${D}`;return J(E)&&E!==Ge.NotSet&&(O=`${O};SameSite=${E}`),J(y)&&y===ne.Yes&&(O=`${O};Secure`),document.cookie=O,!0}r.set=e;function i(l){return Xt(l)?new csDate(C.now()+l):l}r.toExpireDate=i;function n(l,u){t(l)&&e(l,"",u,new csDate(0)),t(l)&&e(l,"",u,new csDate(0),Ge.None,ne.Yes)}r.remove=n;function a(){return document.cookie.length>0}r.isCookiePresent=a;function c(l,u){let g="_cs_root-domain",d=t(g);if(d!==null&&d!=="1")return d;let E=csString.prototype.split.call(window.location.hostname,"."),y=csArray.prototype.pop.call(E);for(;E.length&&(d===null||d==="1");)y=csArray.prototype.join.call([csArray.prototype.pop.call(E),y],"."),e(g,y,y,void 0,l,u),d=t(g);return n(g,y),y}r.getRootDomain=c}(s||(s={})),s})(),Cd=(()=>{let s;return function(r){function t(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}r.browserIsSafariV12=t}(s||(s={})),s})(),Ge=(()=>{let s;return function(r){r.None="None",r.Lax="Lax",r.NotSet="X"}(s||(s={})),s})(),ne=(()=>{let s;return function(r){r[r.Yes=1]="Yes",r[r.No=0]="No"}(s||(s={})),s})(),rr=(()=>{class s{constructor(t,e,i){this.f=t,this.w=e,this.gi=i,this.fc=!1,this.pd=Ge.NotSet,this.gc=ne.No}getSameSiteFlag(){return this.pd}getSecureFlag(){return this.gc}getDomain(){return this.mc}getRootDomain(){return this.gd}init(){if(this.f.cookielessTrackingEnabled)return;let t=this.Ny(),e=this.My();this.fc=this.ky(t,e),this.fc?(this.pd=t,this.gc=e):this.f.secureCookiesEnabled&&this.w.getUrlProtocol()==="https:"&&(this.gc=ne.Yes),this.gd=this.Dy(),this.mc=this.xy(this.gd)}ky(t,e){return Cd.browserIsSafariV12()?!1:(ut.set(s.COOKIE_TEST_FOR_SAME_SITE,"Test same site",s.CURRENT_DOMAIN,void 0,t,e),ut.get(s.COOKIE_TEST_FOR_SAME_SITE)?(ut.remove(s.COOKIE_TEST_FOR_SAME_SITE,s.CURRENT_DOMAIN),!0):!1)}Ny(){return this.w.getUrlProtocol()==="http:"?Ge.Lax:this.gi.isSameSiteNoneSecureNeeded()||this.f.crossDomainTracking?Ge.None:Ge.Lax}My(){return this.w.getUrlProtocol()==="http:"?ne.No:this.f.secureCookiesEnabled||this.f.crossDomainTracking||this.gi.isSameSiteNoneSecureNeeded()?ne.Yes:ne.No}isSameSiteSupported(){return this.fc}set(t,e,i,n){let a=ut.toExpireDate(i),c=n?ne.Yes:this.getSecureFlag();ut.set(t,e,this.mc,a,this.getSameSiteFlag(),c)}get(t){let i=new csRegExp(`(^|;)[ ]*${t}=([^;]*)`).exec(document.cookie);return i?decodeURIComponent(i[2]):null}delete(t,e){let i=e||this.mc;ut.remove(t,i)}Dy(){let t=this.gi.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),e=t?Ge.None:void 0,i=t?ne.Yes:void 0;return ut.getRootDomain(e,i)}xy(t){return this.f.allowSubdomains?t:ut.CURRENT_DOMAIN}}return s.CURRENT_DOMAIN="CURRENT_DOMAIN",s.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",s})(),_s="_cs_t",Vo="1",Id=(()=>{class s{constructor(t,e){this.wt=t,this.f=e,this.bo=!1,this.To=!1}init(){if(!this.f.cookielessTrackingEnabled&&this.wt.isTopWindowTracker()&&"cookie"in document){if(!this.wt.isInIframeContext()&&ut.isCookiePresent()){this.bo=!0,this.To=!1;return}if(ut.set(_s,Vo,ut.CURRENT_DOMAIN),ut.get(_s)!==null){this.bo=!0,this.To=!1,ut.remove(_s,ut.CURRENT_DOMAIN);return}ut.set(_s,Vo,ut.CURRENT_DOMAIN,void 0,Ge.None,ne.Yes),ut.get(_s)!==null&&(this.bo=!0,this.To=!0,ut.remove(_s,ut.CURRENT_DOMAIN))}}areCookiesEnabled(){return this.bo}isSameSiteNoneSecureNeeded(){return this.To}}return s})();function Pd(){let s="CSSessionStorageTest";try{return sessionStorage.setItem(s,s),sessionStorage.getItem(s)!==s?!1:(sessionStorage.removeItem(s),!0)}catch{return!1}}var Od=(()=>{class s{constructor(t,e){this.f=t,this.gi=e}canTrack(){return this.f.isProjectActive()&&this.Ly()&&this.md()&&this.Vy()}canTrackInChild(){return this.f.isProjectActive()&&this.Uy()&&(this.md()||this.jy())}Vy(){return this.f.cookielessTrackingEnabled?Pd():this.gi.areCookiesEnabled()}md(){return Pn(window.location.hostname,this.f.hostnames)}Ly(){return!this.yd()&&this.Hy()}Uy(){return!this.yd()&&this.By()}jy(){return window.location.protocol==="about:"&&window.location.hostname===""}yd(){return"visibilityState"in document&&document.visibilityState==="prerender"}Hy(){return this.Ed()&&this.Fy()}By(){return this.Ed()}Fy(){try{return!!window.localStorage}catch{return!1}}Ed(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window}}return s})(),Nd=(()=>{class s{constructor(t,e){this.yc=!1,this.Sd=new Map,this.vd=new Map,this._d=new Map,this.wd="CS_WORKER_SIGNATURE";let i=`
    const algorithm = ${t.algorithm};
    const compressor = (${t.getCompressorSourceCode()})();
    (()=>{"use strict";function e(e,t,r,s){return new(r||(r=Promise))((function(o,a){function i(e){try{c(s.next(e))}catch(e){a(e)}}function n(e){try{c(s.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,n)}c((s=s.apply(e,t||[])).next())}))}var t,r;Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError,function(e){e.UNCOMPRESSED="0",e.GZIP="2"}(t||(t={})),function(e){e.debug="debug",e.warn="warn",e.implementation="implementation",e.error="error",e.critical="critical"}(r||(r={})),r.debug,r.warn,r.implementation,r.error,r.critical;let s={debug(...e){},warn(...e){},implementation(...e){},error(...e){},critical(...e){},isPerfLoggingActive:()=>!1};class o{constructor(e){var t;this.queryParams={},this.headers={},this.handleRecoveredRequests=e=>{for(const t of e){const{metadata:e,events:r}=t;this.send(r,e)}},this.endpoint=e.endpoint,this.compressionOpts=e.compressionOpts,this.recoveryStorage=e.recoveryStorage,this.mandatoryParameters=null!==(t=e.mandatoryParameters)&&void 0!==t?t:[],this.contentType=e.contentType,this.worker=!!e.worker,this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests)}setQueryParams(e){Object.keys(e).forEach((t=>{this.queryParams[t]=e[t]}))}removeQueryParams(e){e?e.forEach((e=>{delete this.queryParams[e]})):this.queryParams={}}send(e,r){const o=r||Object.assign({},this.queryParams),a=!("ct"in o),i="application/json"===this.contentType||"string"!=typeof e&&!this.isArrayBuffer(e);"ct"in o||(this.compressionOpts&&a?o.ct=this.compressionOpts.compressionType:o.ct=t.UNCOMPRESSED);const n=i?JSON.stringify(e):e,c=Object.keys(o).map((e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(o[e])}\`)).join("&"),h=\`\${this.endpoint}?\${c}\`;!function(e,t){const r=e.length;for(let s=0;s<r;s++)if(t(e[s],s))return!0;return!1}(this.mandatoryParameters,(e=>null==o[e]))?this.compressionOpts&&a&&"string"==typeof n?this.compressionOpts.compressor(n,this.compressionOpts.compressionOutputType,(e=>this.doSend(h,o,e))):this.doSend(h,o,n):s.warn(\`[\${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on \${h}\`)}onLoad(e){this.onLoadCallback=e}onError(e){this.onErrorCallback=e}onTimeout(e,t){this.onTimeoutCallback=e,this.timeout=t}abort(){this.abortCurrentXhrCall&&this.abortCurrentXhrCall()}setRequestHeader(e,t){this.headers[e]=t}getQueryParams(){return this.queryParams}isArrayBuffer(e){return e&&void 0!==e.byteLength}doSend(e,t,r){const s=new XMLHttpRequest,o=Object.keys(t).map((e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(t[e])}\`)).join("&");s.open("POST",e),this.contentType&&s.setRequestHeader("Content-Type",this.contentType),s.onload=()=>{if(this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests),this.onLoadCallback){const e={params:t,responseText:s.responseText,status:s.status};this.onLoadCallback(e)}},s.onerror=()=>{this.recoveryStorage&&this.recoveryStorage.save({key:o,metadata:t,events:r}),this.onErrorCallback&&this.onErrorCallback({params:t})},this.timeout&&this.onTimeoutCallback&&(s.timeout=this.timeout,s.ontimeout=()=>{this.onTimeoutCallback()}),this.abortCurrentXhrCall=()=>s.abort(),Object.keys(this.headers).forEach((e=>{s.setRequestHeader(e,this.headers[e])})),s.send(r)}}class a{constructor(e){this.maxStoredBytes=e,this.storageBytesUsed=0}addString(e){this.storageBytesUsed+=2*e.length}addArrayBuffer(e){this.storageBytesUsed+=e.byteLength}isThresholdReached(){return this.storageBytesUsed>this.maxStoredBytes}reset(){this.storageBytesUsed=0}}class i{constructor(e){this.ramStorage={},this.byteSizeCounter=new a(e)}save({key:e,metadata:t,events:r}){this.byteSizeCounter.isThresholdReached()||(this.byteSizeCounter.addString(e),"string"==typeof r?this.byteSizeCounter.addString(r):this.byteSizeCounter.addArrayBuffer(r),this.byteSizeCounter.isThresholdReached()||(this.ramStorage[e]={metadata:t,events:r}))}recover(e){const t=[];this.getStorageKeys().forEach((e=>{const r=this.ramStorage[e];void 0!==r&&(delete r.metadata.datatype,t.push(r),this.removeItem(e))})),0!==t.length&&(e(t),this.byteSizeCounter.reset())}getStorageKeys(){return Object.keys(this.ramStorage)}removeItem(e){delete this.ramStorage[e]}}var n;!function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",e[e.OPEN_FAILED=2]="OPEN_FAILED",e[e.READY=3]="READY"}(n||(n={}));class c{constructor(e,t,r){this.storageName=e,this.onOpenError=r,this.cacheState=n.NOT_STARTED,this.toBeSavedBuffer=[],this.recoveryInProgress=0,this.origin=self.origin,this.context="object"==typeof window?"":"worker-",this.byteSizeCounter=new a(t),this.init()}init(){return e(this,void 0,void 0,(function*(){yield this.openCache(),this.cacheState===n.READY?this.flushToBeSavedBuffer():this.onOpenError(this.toBeSavedBuffer)}))}flushToBeSavedBuffer(){this.toBeSavedBuffer.forEach((e=>{this.save(e)})),this.toBeSavedBuffer=[]}save(t){return e(this,void 0,void 0,(function*(){try{if(this.cacheState===n.OPEN_IN_PROGRESS)return void this.toBeSavedBuffer.push(t);if(this.cacheState!==n.READY)return;if(this.byteSizeCounter.isThresholdReached())return;const{key:e,metadata:r,events:s}=t;if(this.byteSizeCounter.addString(e),"string"==typeof s?this.byteSizeCounter.addString(s):this.byteSizeCounter.addArrayBuffer(s),this.byteSizeCounter.isThresholdReached())return;yield this.cache.put(\`\${this.origin}/\${e}\`,new Response(s,{headers:r}))}catch(e){}}))}recover(t){return e(this,void 0,void 0,(function*(){(this.cache||(yield this.openCache(),this.cacheState===n.READY))&&this.doRecover(t)}))}openCache(){return e(this,void 0,void 0,(function*(){try{this.cacheState=n.OPEN_IN_PROGRESS,this.cache=yield self.caches.open(\`\${this.context}\${this.storageName}\`),this.cacheState=n.READY}catch(e){this.cacheState=n.OPEN_FAILED}}))}doRecover(t){return e(this,void 0,void 0,(function*(){try{if(this.recoveryInProgress++,this.recoveryInProgress>1)return;const e=yield this.cache.keys();if(0===e.length)return;const r=(yield this.cache.matchAll()).map((e=>{const t={};e.headers.forEach(((e,r)=>{t[r]=e})),delete t["content-type"];const r=t.datatype;return delete t.datatype,"json"===r||"base64"===r?e.text().then((e=>({metadata:t,events:e}))):e.arrayBuffer().then((e=>({metadata:t,events:e})))})),s=yield Promise.all(r);yield Promise.all(e.map((e=>this.cache.delete(e)))),t(s),this.byteSizeCounter.reset()}catch(e){}finally{this.recoveryInProgress--}}))}}class h{constructor(e){try{this.initializeStorageStrategy(e)}catch(e){this.setRamStorageStrategy()}}initializeStorageStrategy(e){self.caches?this.setCachesStrategy(e):this.setRamStorageStrategy()}save(e){this.storageStrategy.save(e)}recover(e){this.storageStrategy.recover(e)}setCachesStrategy(e){this.storageStrategy=new c(e,h.MAX_SIZE,(e=>{this.setRamStorageStrategy(e)}))}setRamStorageStrategy(e){this.storageStrategy=new i(h.MAX_SIZE),e&&e.forEach((e=>{this.storageStrategy.save(e)}))}}h.MAX_SIZE=16777216,function(){const t="CS_WORKER_SIGNATURE",r=new Map,s=new h("csPersisted");function a(e){var a;if((a=e)&&a.WORKER_SIGNATURE===t)switch(e.type){case"CreatePostRequest":{const{endpoint:a,compressionOutputType:i,useRetry:n,mandatoryParameters:c}=e,h={endpoint:a,mandatoryParameters:c,worker:!0};i&&(h.compressionOpts={compressor,compressionOutputType:i,compressionType:algorithm}),n&&(h.recoveryStorage=s);const d=new o(h);r.set(a,d),d.onLoad((e=>{const r={type:"onLoad",endpoint:a,response:e,WORKER_SIGNATURE:t};self.postMessage(r)})),d.onError((e=>{const r={type:"onError",endpoint:a,response:e,WORKER_SIGNATURE:t};self.postMessage(r)}))}break;case"SetQueryParams":{const{endpoint:t,queryParams:s}=e,o=r.get(t);o&&o.setQueryParams(s)}break;case"RemoveQueryParams":{const{endpoint:t,queryParams:s}=e,o=r.get(t);o&&o.removeQueryParams(s)}break;case"Send":{const{endpoint:t,payload:s,queryParams:o}=e,a=r.get(t);a&&a.send(s,o)}break;case"Abort":{const{endpoint:t}=e,s=r.get(t);s&&s.abort()}break;case"SetHeader":{const{endpoint:t,headerName:s,headerValue:o}=e,a=r.get(t);a&&a.setRequestHeader(s,o)}break;case"SetTimeout":{const{endpoint:s,timeout:o}=e,a=r.get(s);a&&a.onTimeout((()=>{const e={type:"onTimeout",endpoint:s,WORKER_SIGNATURE:t};self.postMessage(e)}),o)}break;default:throw new Error(JSON.stringify(e))}}self.addEventListener("message",(function(t){t.data.getReader?function(t,r){e(this,void 0,void 0,(function*(){const e=t.getReader();for(;;){const{done:t,value:s}=yield e.read();if(t)break;r(s)}}))}(t.data,a):a(t.data)}))}()})();`;try{this.gs=this.$y(e||i),this.yc=!0,s.isTransferableStreamSupported()&&(this.bd=new ReadableStream({start:n=>{this.Ec=n},cancel:()=>{this.Ec=null}}),this.gs.postMessage(this.bd,[this.bd]))}catch(n){n.name==="SecurityError"&&q.counters.cspErrors.count("network-worker"),this.yc=!1}}postMessage(t){t.WORKER_SIGNATURE=this.wd,this.Ec?this.Ec.enqueue(t):this.gs.postMessage(t)}$y(t){let e=window.csURL||window.webkitURL,i=window.Blob,n=window.Worker,a=new i([t],{type:"application/javascript"}),c=e.createObjectURL(a);j.whiteListFilename(c);let l=new n(c);return l.onmessage=u=>{let{type:g,endpoint:d,WORKER_SIGNATURE:E}=u.data;if(E===this.wd){if(g==="onLoad"){let{response:y}=u.data,v=this.Sd.get(d);v&&v(y)}else if(g==="onError"){let{response:y}=u.data,v=this.vd.get(d);v&&v(y)}else if(g==="onTimeout"){let y=this._d.get(d);y&&y()}}},l}registerOnLoadCallback(t,e){this.Sd.set(t,e)}registerOnErrorCallback(t,e){this.vd.set(t,e)}registerOnTimeoutCallback(t,e){this._d.set(t,e)}isSupported(){return this.yc}static isTransferableStreamSupported(){try{let t=new ReadableStream;return structuredClone(t,{transfer:[t]}),!0}catch{return!1}}}return s})(),Md=(()=>{class s{constructor(t){var e;this.Jt={},this.Qt=t.endpoint,this.be=t.networkWorker,this.zy=t.compressionOutputType,this.Gy=t.useRetry,this.be.postMessage({type:"CreatePostRequest",endpoint:this.Qt,compressionOutputType:this.zy,useRetry:this.Gy,mandatoryParameters:(e=t.mandatoryParameters)!==null&&e!==void 0?e:[]})}setQueryParams(t){this.be.postMessage({type:"SetQueryParams",endpoint:this.Qt,queryParams:t}),csArray.prototype.forEach.call(Object.keys(t),e=>{this.Jt[e]=t[e]})}getQueryParams(){return this.Jt}removeQueryParams(t){this.be.postMessage({type:"RemoveQueryParams",endpoint:this.Qt,queryParams:t}),t&&csArray.prototype.forEach.call(t,e=>{delete this.Jt[e]})}send(t,e){this.be.postMessage({type:"Send",endpoint:this.Qt,payload:t,queryParams:e})}abort(){this.be.postMessage({type:"Abort",endpoint:this.Qt})}onLoad(t){this.be.registerOnLoadCallback(this.Qt,t)}onError(t){this.be.registerOnErrorCallback(this.Qt,t)}setRequestHeader(t,e){this.be.postMessage({type:"SetHeader",endpoint:this.Qt,headerName:t,headerValue:e})}onTimeout(t,e){this.be.registerOnTimeoutCallback(this.Qt,t),this.be.postMessage({type:"SetTimeout",endpoint:this.Qt,timeout:e})}}return s})(),nr=(()=>{let s;return function(r){r.UNCOMPRESSED="0",r.GZIP="2"}(s||(s={})),s})(),rc=(()=>{class s{constructor(t){this.onError=t}}return s})(),kd=(()=>{class s{constructor(t){var e;this.Jt={},this.Sc={},this.Td=i=>{for(let n of i){let{metadata:a,events:c}=n;this.send(c,a)}},this.Qt=t.endpoint,this.Ur=t.compressionOpts,this.Zt=t.recoveryStorage,this.mandatoryParameters=(e=t.mandatoryParameters)!==null&&e!==void 0?e:[],this.vc=t.contentType,this.worker=!!t.worker,this.Zt&&this.Zt.recover(this.Td)}setQueryParams(t){Object.keys(t).forEach(e=>{this.Jt[e]=t[e]})}removeQueryParams(t){t?t.forEach(e=>{delete this.Jt[e]}):this.Jt={}}send(t,e){let i=e||{...this.Jt},n=!("ct"in i),a=this.vc==="application/json"||typeof t!="string"&&!this.qy(t);"ct"in i||(!this.Ur||!n?i.ct=nr.UNCOMPRESSED:i.ct=this.Ur.compressionType);let c=a?JSON.stringify(t):t,l=Object.keys(i).map(g=>`${encodeURIComponent(g)}=${encodeURIComponent(i[g])}`).join("&"),u=`${this.Qt}?${l}`;if(Xr(this.mandatoryParameters,g=>i[g]==null)){at.warn(`[${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on ${u}`);return}this.Ur&&n&&typeof c=="string"?this.Ur.compressor(c,this.Ur.compressionOutputType,g=>this.Ad(u,i,g)):this.Ad(u,i,c)}onLoad(t){this.Wi=t}onError(t){this.jr=t}onTimeout(t,e){this.mi=t,this.Hr=e}abort(){this.Rd&&this.Rd()}setRequestHeader(t,e){this.Sc[t]=e}getQueryParams(){return this.Jt}qy(t){return t&&t.byteLength!==void 0}Ad(t,e,i){let n=new XMLHttpRequest,a=Object.keys(e).map(c=>`${encodeURIComponent(c)}=${encodeURIComponent(e[c])}`).join("&");n.open("POST",t),this.vc&&n.setRequestHeader("Content-Type",this.vc),n.onload=()=>{if(this.Zt&&this.Zt.recover(this.Td),this.Wi){let c={params:e,responseText:n.responseText,status:n.status};this.Wi(c)}},n.onerror=()=>{this.Zt&&this.Zt.save({key:a,metadata:e,events:i}),this.jr&&this.jr({params:e})},this.Hr&&this.mi&&(n.timeout=this.Hr,n.ontimeout=()=>{this.mi()}),this.Rd=()=>n.abort(),Object.keys(this.Sc).forEach(c=>{n.setRequestHeader(c,this.Sc[c])}),n.send(i)}}return s})(),nc=(()=>{class s{constructor(t){this._c=t,this.be=new Nd(this._c)}create(t,e,i,n,a=[]){if(this.be.isSupported()&&e)return new Md({networkWorker:this.be,endpoint:t,compressionOutputType:i,useRetry:!!n,mandatoryParameters:a});{let c=i?{compressor:this._c.compress,compressionOutputType:i,compressionType:this._c.algorithm}:void 0;return new kd({endpoint:t,compressionOpts:c,recoveryStorage:n})}}}return s})(),Dd=(()=>{class s{constructor(t,e,i,n,a){this.N=t,this.R=e,this.Je=i,this.vt=n,this.f=a}get(){return{exclusion:this.Je.getAppliedTrackingDraw(),visitor:this.N.getVisitor(),session:this.R.getSession(),cvars:this.vt.getCustomVariablesSession()}}apply(t){t&&(t.exclusion?this.exclude():this.include(t))}exclude(){this.Je.exclude(this.f),this.N.removeVisitor(),this.R.removeSession(),this.vt.removeCustomVariablesSession()}include(t){this.Je.removeExclusion(),this.N.setVisitor(t.visitor),t.session?this.R.setSession(t.session):this.R.removeSession(),t.cvars?this.vt.setCustomVariableSession(t.cvars):this.vt.removeCustomVariablesSession()}}return s})(),Qi=".",Nn="__DOT__",xd=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.[0-1])?(\.\b(x|[0-9a-fA-F]{12})\b)?$/,oc="x";function Ld(s){let[r,t,e,i,n,a,c,l,u]=Bd(s);return{id:r,creationTimestamp:Number(t),visitsCount:Number(e),hitTimestamp:Number(i),lastVisitTimestamp:Number(n),appliedTrackingDraw:Number(a),expires:Number(c),allowSubdomains:l===void 0?void 0:!!Number(l),identityPrint:u===void 0||u===oc?null:u}}function Vd(s){var r;return csArray.prototype.join.call(csArray.prototype.map.call(csArray.prototype.map.call([s.id,s.creationTimestamp,s.visitsCount,s.hitTimestamp,s.lastVisitTimestamp,s.appliedTrackingDraw,s.expires,s.allowSubdomains?1:0,(r=s.identityPrint)!==null&&r!==void 0?r:oc],csString),jd),Qi)}function Ud(s){return xd.test(s)}function jd(s){return csString.prototype.replace.call(s,/\./g,Nn)}function Hd(s){return csString.prototype.replace.call(s,new csRegExp(Nn,"g"),Qi)}function Bd(s){return csString.prototype.indexOf.call(s,Nn)!==-1?csArray.prototype.map.call(csString.prototype.split.call(s,Qi),Hd):csString.prototype.split.call(s,Qi)}var V=(()=>{let s;return function(r){r.QUOTA_REACHED="X",r.RECORDING_RULES_TARGETING="8",r.ANALYTICS_ONLY_RULES_TARGETING="9",r.ANALYTICS_ONLY="0",r.RECORDING_GLOBAL_SAMPLING="5",r.RECORDING_TEMPORARILY="T",r.RECORDING_URL_SAMPLING="6",r.RECORDING_ETR_SAMPLING="7",r.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",r.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN="W"}(s||(s={})),s})(),Ht=(()=>{let s;return function(r){r.ETR_OFF="0",r.ETR_ON="1"}(s||(s={})),s})(),Ye=(()=>{let s;return function(r){r.ETR_LEGACY="0",r.ETR_SESSION="1",r.ETR_PAGE="2"}(s||(s={})),s})(),qt=(()=>{let s;return function(r){r.ETR_DISABLED="0",r.ETR_PENDING="1",r.ETR_SAVED_PAGE="2",r.ETR_SAVED_SESSION="3",r.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),tn=(()=>{let s;return function(r){r.UNNECESSARY="U",r.NOT_EXPRESSED="N",r.WITHDRAWN="W",r.GRANTED="G"}(s||(s={})),s})();var Fd=(()=>{let s;return function(r){r.ETR_DISABLED="0",r.ETR_PENDING="1",r.ETR_SAVED_PAGE="2",r.ETR_SAVED_SESSION="3",r.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),ac=/^(\d+\.[01356789TBWX](\.[01UNWG])?(\.[39])?)(\.\d+)?$/,cc=".";function $d(s){return csArray.prototype.join.call([s.pageNumber,s.collectState,s.replayConsent,s.etrStatus],cc)}function zd(s){if(!Mn(s))return null;let r=en(s);return r!==null?lc(r):null}function lc(s){var r,t;let[e,i,n,a]=csString.prototype.split.call(s,cc);return{collectState:i,replayConsent:(r=n)!==null&&r!==void 0?r:tn.UNNECESSARY,etrStatus:(t=a)!==null&&t!==void 0?t:Fd.ETR_NOT_SAVED_SESSION,pageNumber:parseInt(e,10)}}function Mn(s){return ac.test(s)}function en(s){if(!s)return null;let r=(()=>{var t;return(t=csString.prototype.match.call(s,ac))===null||t===void 0?void 0:t[1]})();return r!=null?r:null}var ye="_cs_ex",Uo=2592e6,Gd=/^[0-9]+$/,qd=(()=>{class s{constructor(t,e,i){this.f=t,this.M=e,this.J=i}onCookieToSet(t){this.yi=t}onCookieToRemove(t){this.Ei=t}get(){return this.f.cookielessTrackingEnabled?Number(this.J.getItem(ye)):Number(this.M.get(ye))}set(t){var e;this.f.cookielessTrackingEnabled?this.J.setItem(ye,t):(this.M.set(ye,t,Uo),(e=this.yi)===null||e===void 0||e.call(this,ye,t,Uo))}remove(){var t;this.f.cookielessTrackingEnabled?this.J.removeItem(ye):(this.M.delete(ye),(t=this.Ei)===null||t===void 0||t.call(this,ye))}static isValidExclusionString(t){return Gd.test(t)}}return s})(),Le="_cs_cvars",Wd=(()=>{class s{constructor(t,e,i){this.f=t,this.M=e,this.J=i}onCookieToSet(t){this.yi=t}onCookieToRemove(t){this.Ei=t}get(){return this.f.cookielessTrackingEnabled?this.J.getItem(Le):this.M.get(Le)}set(t){var e;this.f.cookielessTrackingEnabled?this.J.setItem(Le,t):(this.M.set(Le,t),(e=this.yi)===null||e===void 0||e.call(this,Le,t))}remove(){var t;this.f.cookielessTrackingEnabled?this.J.removeItem(Le):(this.M.delete(Le),(t=this.Ei)===null||t===void 0||t.call(this,Le))}static isValidCustomVarString(t){return typeof t=="string"}}return s})();function be(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(a=s[c])&&(n=(i<3?a(n):i>3?a(r,t,n):a(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}var or=(()=>{class s{constructor(){this.set=new Set}add(t){this.set.add(t),this.set.size===1&&csSetTimeout(()=>{this.set.clear()})}has(t){return this.set.has(t)}del(t){this.set.delete(t)}clear(){this.set.clear()}values(){return xs(this.set)}get count(){return this.set.size}}return s})(),Yd=(()=>{class s extends or{constructor(t="high"){super(),this.Jy=t}add(t){this.set.add(t),this.set.size===1&&Bt(()=>{this.set.clear()},this.Jy)}}return s})();function ar(s,r=!1){let t=new or;return{push(e){t.count===0&&(r?Bt:csSetTimeout)(()=>{s(t.values()),t.clear()}),t.add(e)}}}function Xd(){let s=new Error,r=s.stack?csArray.prototype.filter.call(csString.prototype.split.call(s.stack,`
`),e=>e!=="Error"&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(e),"promise ")===-1&&csString.prototype.indexOf.call(e,"[native code]")===-1&&csString.prototype.indexOf.call(e,"(<anonymous>)")===-1):[];if(r.length===0)return"";let t=Jd(r);return t===""||(r=Qd(r,t),r.length===0)?"":hc(r[0])}function Kd(s){return csString.prototype.indexOf.call(s,"@")!==-1}function Jd(s){return s.length>0?hc(s[0]):""}function Qd(s,r){return csArray.prototype.filter.call(s,t=>csString.prototype.indexOf.call(t,r)===-1)}function hc(s){let r="",t;Kd(s)?t=new csRegExp("@(.+):(\\d+):(\\d+)$"):t=new csRegExp("\\((.+):(\\d+):(\\d+)\\)");let e=t.exec(s);return e&&(r=e[1]),r}var Zd=s=>s;function tp(s,r,t,e){let i=csSymbol.for("propertyProxy");Object.defineProperty(s,r,{get(){var n;if(this[i])return this[i];let a=(n=t.get)===null||n===void 0?void 0:n.apply(this);return typeof a!="object"?a:(typeof Proxy=="function"?this[i]=new Proxy(a,{get(c,l){let u=Reflect.get(c,l);return typeof u=="function"?u.bind(c):u},set:(c,l,u)=>{let g=c[l],d=Reflect.set(c,l,u);return e.forEach(E=>E(this,u,g,"subproperty")),d}}):this[i]=a,this[i])},set(){var n;let a=arguments,c=this[r],l=(n=t.set)===null||n===void 0?void 0:n.apply(this,a);delete this[i];try{e.forEach(u=>u(this,a[0],c,"property"))}catch(u){at.error(u)}return l}})}function ep(s,r,t){let e=sp(s,r);if(!e)return null;let i=(n,a,c,l)=>t(n,a,c,l);return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function sp(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,r);return i?i.configurable?(s[t]=e,tp(s,r,i,e),e):(at.warn(`Cannot intercept non configurable property '${csString(r)}' of object '${s}'`),null):(at.warn(`Cannot intercept property '${csString(r)}' because it does not exist directly on the target object '${s}'`),null)}function ip(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=Object.getOwnPropertyDescriptor(s,r);if(!(e!=null&&e.writable)&&!(e!=null&&e.set))return at.warn(`Cannot intercept read only function '${csString(r)}' of object '${s}'`),null;let i=new Set;s[t]=i;let n=s[r];if(typeof n=="function"){let a=function(){let c=arguments,l=[];try{l=csArray.prototype.map.call(xs(i),g=>g(c))}catch(g){at.critical(g)}let u=n.apply(this,c);return ps(()=>{let g={result:u,context:this,args:c};csArray.prototype.forEach.call(l,d=>d(g))},ce.MonkeyPatch),u};np(a,n),s[r]=a}return i}function Qt({target:s,methodName:r,hook:t,hookPrepareArgs:e=Zd,options:i}){let n=ip(s,r);if(!n)return null;let a=c=>{let l=e(c),u=i!=null&&i.withCallerName?{callerName:Xd()}:{};return g=>t({...g,...u,args:l})};return{activate:()=>{n.add(a)},deactivate:()=>{n.delete(a)}}}function rp(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,r);return i?i.configurable?(s[t]=e,Object.defineProperty(s,r,{set(){var n;let a=this[r],c=arguments;return ps(()=>{e.forEach(l=>l(this,c[0],a,"property"))},ce.MonkeyPatch),(n=i.set)===null||n===void 0?void 0:n.apply(this,c)}}),e):(at.warn(`Cannot intercept read only property '${csString(r)}' of object '${s}'`),null):e}function Zi(s,r,t){let e=rp(s,r);if(!e)return null;let i=(n,a,c)=>t(n,a,c,"property");return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function np(s,r){s.prototype=r.prototype,Object.defineProperty(s,"toString",{value:()=>r.toString()})}var Vs=(()=>{var s;class r{static Qy(e){this.Ls.forEach(i=>{e(i,"initial")})}static Br(e){if(this.D||(this.D=new csMutationObserver(i=>{for(let n of i)n.target.isConnected&&Q(n.addedNodes,this.Zy),Q(n.removedNodes,this.tE)})),csArray.prototype.push.call(this.Ae,e),!this.G){this.G=!0,this.D.observe(document,this.Fr);for(let i of cs.getAllShadowHosts(document)){let n=csElementshadowRoot.apply(i);this.Ls.add(n),this.D.observe(n,this.Fr)}this.Rc||(this.Rc=Qt({target:Element.prototype,methodName:"attachShadow",hook:i=>i.result.isConnected&&this.Pd(i.result)})),this.Rc.activate()}this.Qy(e)}static $r(e){var i,n;this.Ae=csArray.prototype.filter.call(this.Ae,a=>a!==e),this.Ae.length===0&&(this.Ae=[],this.G=!1,(i=this.D)===null||i===void 0||i.disconnect(),(n=this.Rc)===null||n===void 0||n.deactivate(),this.Ls.clear())}constructor(e){this.A=e,this.A=ls("DocumentShadowRootObserver:callback",(i,n)=>e(i,n))}get shadowRoots(){return xs(s.Ls)}takeRecords(){var e,i;return(i=(e=s.D)===null||e===void 0?void 0:e.takeRecords())!==null&&i!==void 0?i:[]}observe(){cs.isSupported()&&s.Br(this.A)}disconnect(){cs.isSupported()&&s.$r(this.A)}}return s=r,r.Ae=[],r.Ls=new Set,r.G=!1,r.Fr={childList:!0,subtree:!0},r.Pd=t=>{s.Ls.has(t)||(s.D.observe(t,s.Fr),s.Ls.add(t),Q(s.Ae,e=>e(t,"added")))},r.Zy=t=>{Zt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(s.Pd)},r.tE=t=>{t.isConnected||Zt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(e=>{s.Ls.has(e)&&(s.Ls.delete(e),Q(s.Ae,i=>i(e,"removed")))})},lt([x()],r.prototype,"observe",null),lt([x()],r.prototype,"disconnect",null),r})(),jo={childList:!0,subtree:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,attributeOldValue:!0},Je=(()=>{var s;class r{static setShadowRootFilter(e){csArray.prototype.push.call(s.shadowRootFilters,e)}static Cc(e){if(s.shadowRootFilters.length>0&&ni(e))for(let i=0;i<s.shadowRootFilters.length;i++){let n=s.shadowRootFilters[i];if(n(e))return}this.observedTargets.add(e),this.mutationObserver.observe(e,jo)}static disconnectShadowRoot(e){this.observedTargets.has(e)&&(this.observedTargets.delete(e),this.isRefreshing||(this.isRefreshing=!0,Bt(()=>{this.isRefreshing=!1;let i=this.mutationObserver.takeRecords();i.length&&s.mutationCallback(i),this.mutationObserver.disconnect(),this.observedTargets.forEach(n=>{this.mutationObserver.observe(n,jo)})})))}static observe(e,i){csArray.prototype.push.call(this.callbacks,e),i&&csArray.prototype.push.call(this.shadowRootCallbacks,i),this.started?i&&csArray.prototype.forEach.call(cs.getAllShadowHosts(document),n=>i(csElementshadowRoot.apply(n),"initial")):(this.mutationObserver=new csMutationObserver(this.mutationCallback),this.Cc(document),this.shadowRootObserver=new Vs(this.onShadowRoot),this.shadowRootObserver.observe(),this.started=!0,Q(this.shadowRootObserver.shadowRoots,n=>{this.Cc(n)}))}static disconnect(e,i){var n,a;this.callbacks=csArray.prototype.filter.call(this.callbacks,c=>c!==e),i&&(this.shadowRootCallbacks=csArray.prototype.filter.call(this.shadowRootCallbacks,c=>c!==i)),this.callbacks.length===0&&(this.callbacks=[],this.shadowRootCallbacks=[],s.shadowRootFilters=[],(n=this.shadowRootObserver)===null||n===void 0||n.disconnect(),(a=this.mutationObserver)===null||a===void 0||a.disconnect(),this.observedTargets.clear(),this.started=!1)}constructor(e,i){this.A=e,this.Od=i;let n=ar(a=>e(a,this),!0);this.A=ls("DocumentMutationObserver:callback",a=>{Q(a,c=>n.push(c))})}get shadowRoots(){var e,i;return(i=(e=s.shadowRootObserver)===null||e===void 0?void 0:e.shadowRoots)!==null&&i!==void 0?i:[]}takeRecords(){var e;let i=(e=s.mutationObserver)===null||e===void 0?void 0:e.takeRecords(),n=s.shadowRootObserver.takeRecords();return i!=null&&i.length&&n.length?Fh(i,n):i!=null?i:n}observe(){s.observe(this.A,this.Od)}disconnect(){s.disconnect(this.A,this.Od)}}return s=r,r.callbacks=[],r.shadowRootCallbacks=[],r.started=!1,r.observedTargets=new Set,r.shadowRootFilters=[],r.mutationCallback=t=>{Lt.mutations.count.increase(t.length),csArray.prototype.forEach.call(s.callbacks,e=>e(t,s.mutationObserver))},r.onShadowRoot=(t,e)=>{Q(s.shadowRootCallbacks,i=>i(t,e)),e!=="removed"?s.Cc(t):s.disconnectShadowRoot(t)},r.isRefreshing=!1,lt([x()],r.prototype,"observe",null),lt([x()],r.prototype,"disconnect",null),r})(),Ar;function Ks(s){if(Ar||(Ar=document.createElement("div")),!(!!s&&$(s)))return at.warn(`isValidSelector: invalid selector provided '${s}'`),!1;try{return te.call(Ar,s),!0}catch{return at.warn(`isValidSelector: invalid selector provided '${s}'`),!1}}function sn(s,r){if(Io)return Io.call(s,r);let t=s;do{if(te.call(t,r))return t;t=t==null?void 0:t.parentElement}while(t!==null&&t.nodeType===1);return null}var Ds=(()=>{class s{get selectors(){return this.ze===""?null:this.ze}constructor(t,e={closest:!1}){this.A=t,this.Tt=e,this.ze="",this.zr=new or,this.Ao=fs(i=>{if(this.ze==="")return;let n=[];for(let a of Va(i,c=>c.addedNodes)){if(!(lu(a)||this.Tt.closest&&Wi(a)))continue;let c=this.Tt.closest?this.eE(a,this.ze):this.findMatchingElements(a,this.ze);Ao(c,n)}n.length&&this.A(n,"added")},"SelectorObserver.processMutations"),this.sE=(i,n)=>{if(this.ze===""||n!=="added")return;let a=this.findMatchingElements(i,this.ze);a.length&&this.A(a,"added")},this.W=new Je(this.Ao,this.sE)}observe(t){this.ze===""?this.W.observe():this.ze+=",",this.ze+=t;let e=this.findMatchingElements(document,t);for(let i of this.W.shadowRoots){let n=this.findMatchingElements(i,t);Ao(n,e)}e.length&&(Q(e,i=>{this.zr.add(i)}),this.A(e,"initial"))}processPendingMutations(){this.Ao(this.W.takeRecords())}disconnect(){this.W.disconnect(),this.zr.clear(),this.ze=""}eE(t,e){let i=[];if(Wi(t)){if(t.parentElement){let n=sn(t.parentElement,e);n&&csArray.prototype.push.call(i,n)}return csArray.prototype.filter.call(i,n=>this.zr.has(n)===!1)}else{if(hi(t)){let n=sn(t,e);if(n)return csArray.prototype.push.call(i,n),csArray.prototype.filter.call(i,a=>this.zr.has(a)===!1)}return this.findMatchingElements(t,e)}}findMatchingElements(t,e){let i=Ns(window.csquerySelectorAll[t.nodeType].call(t,e));return ct(t)&&te.call(t,e)&&csArray.prototype.push.call(i,t),csArray.prototype.filter.call(i,n=>this.zr.has(n)===!1)}}return lt([x()],s.prototype,"observe",null),lt([x()],s.prototype,"disconnect",null),lt([kt("SelectorObserver.findMatchingElements")],s.prototype,"findMatchingElements",null),s})();function op(){let s=csSymbol.for("propStore");return{getStore(r){return r[s]},get(r,t){let e=r[s];return e==null?void 0:e[t]},set(r,t,e){let i=r[s];i||(i={},r[s]=i),i[t]=e}}}var Bi=op(),W=(()=>{let s;return function(r){function t(l,u,g){var d;if(typeof Node!="undefined"&&l instanceof Node)Bi.set(l,u,g);else{let E=l;(d=E.props)!==null&&d!==void 0||(E.props={}),E.props[u]=g}}r.setProperty=t;function e(l,u){var g;return typeof Node!="undefined"&&l instanceof Node?Bi.get(l,u):(g=l.props)===null||g===void 0?void 0:g[u]}r.getProperty=e;function i(l){return typeof Node!="undefined"&&l instanceof Node?Bi.getStore(l):l.props}r.getProperties=i;function n(l,u){let g=null;return a(l,(d,E,y)=>u(d)&&(g=d)&&!!y()),g}r.findDescendant=n;function a(l,u){c(l,void 0,u)}r.traverse=a;function c(l,u,g){let d=!1;if(g(l,u,()=>d=!0),d)return;let y=l.shadowRoot;y&&c(y,l,g);let v=l.children;if(v!=null&&v.length){for(let I of v)if(I&&(c(I,l,g),d))break}}}(s||(s={})),s})(),N=(()=>{let s;return function(r){let t;(function(S){S[S.NotMasked=0]="NotMasked",S[S.Parent=1]="Parent",S[S.Child=2]="Child"})(t=r.MaskedElementState||(r.MaskedElementState={})),r.maskedProp="masked",r.maskedAttributeProp="maskedAttribute";function e(S){return Os(S)&&"Attributes"in S&&"PIISelectors"in S?S.Attributes instanceof Array&&S.PIISelectors instanceof Array:!1}r.isSelectorUserInput=e;function i(S){if(!Os(S)||S===null)throw new Error("Command misuse: setPIISelectors");return"Attributes"in S||(S.Attributes=[]),"PIISelectors"in S||(S.PIISelectors=[]),S}r.sanitizeSelectorUserInput=i;function n(S){var _;return(_=W.getProperty(S,r.maskedProp))!==null&&_!==void 0?_:{state:t.NotMasked}}r.getMaskedElementDetails=n;function a(S){var _;return(_=W.getProperty(S,r.maskedAttributeProp))!==null&&_!==void 0?_:{attributes:[]}}r.getMaskedAttributeDetails=a;function c(S){let _=W.getProperty(S,r.maskedProp);return(_==null?void 0:_.state)===t.Parent}r.isMaskedElement=c;function l(S){let _=W.getProperty(S,r.maskedProp);return(_==null?void 0:_.state)===t.Child}r.isMaskedElementChild=l;function u(S,_){let D=W.getProperty(S,r.maskedAttributeProp);return((D==null?void 0:D.attributes)==null?void 0:csArray.prototype.indexOf.call(D==null?void 0:D.attributes,_))>-1}r.isMaskedAttribute=u;function g(S,_){W.setProperty(S,r.maskedProp,_)}r.setMaskedElementProperty=g;function d(S){W.setProperty(S,r.maskedProp,void 0)}r.unsetMaskedElementProperty=d;function E(S,_){W.setProperty(S,r.maskedAttributeProp,_)}r.setMaskedAttributeProperty=E;function y(S,_){let D=csArray.prototype.filter.call(S.PIISelectors,L=>Ks(L));_.elementSelector.length>0&&csArray.prototype.push.call(D,...csString.prototype.split.call(_.elementSelector,","));let O=P([...D]),T={elementSelector:csArray.prototype.join.call(O,","),attrSelector:_.attrSelector,attrSelectors:_.attrSelectors};return csArray.prototype.forEach.call(S.Attributes,L=>{L!=null&&L.attrName&&(L!=null&&L.selector)&&Ks(L.selector)&&!v(T.attrSelectors,L)&&csArray.prototype.push.call(T.attrSelectors,L)}),T.attrSelector=I(T.attrSelectors),T}r.getComputedSelectorSettings=y;function v(S,_){return csArray.prototype.some.call(S,D=>D.selector===_.selector&&D.attrName===_.attrName)}function I(S){let _="";return csArray.prototype.forEach.call(S,D=>{let O=csString.prototype.split.call(D.selector,",");csArray.prototype.forEach.call(O,T=>{Ks(T)&&(_&&(_+=","),_+=T)})}),_}function P(S){if(S.length<=1)return S;let _=[];for(let D of S){let O=csString.prototype.split.call(D,",");for(let T of O)csArray.prototype.indexOf.call(_,T)===-1&&csArray.prototype.push.call(_,T)}return _}}(s||(s={})),s})(),ue=(()=>{class s{constructor(){this.ce=[],this.isStarted=!1}produceEvent(t){var e;this.isStarted&&(t.timestamp=(e=t.timestamp)!==null&&e!==void 0?e:C.now(),t.timestamp==null&&(t.timestamp=C.now()),csArray.prototype.forEach.call(this.ce,i=>i(t)))}onStop(){}start(){this.isStarted||(this.isStarted=!0,this.onStart())}stop(){this.isStarted&&(this.isStarted=!1,this.onStop(),this.ce=[])}stopForInactivity(){this.isStarted&&(this.isStarted=!1,this.onStop())}subscribe(t){return csArray.prototype.push.call(this.ce,t),()=>{let e=csArray.prototype.indexOf.call(this.ce,t);csArray.prototype.splice.call(this.ce,e,1)}}}return s})(),uc=1,Js=csSymbol("nodeIdentifier");function ap(s=!1){s&&(uc=1),Js=csSymbol("nodeIdentifier")}function cp(s){return W.getProperty(s,Js)}function st(s){let r=W.getProperty(s,Js);return r!=null?r:(W.setProperty(s,Js,uc++),W.getProperty(s,Js))}var lp=(()=>{class s extends ue{constructor(t){super(),this.B=null,this.Ro=null,this.D=null,this.Vs=null,this.Nd=["value","checked","src","data","alt"],this.Co={state:N.MaskedElementState.Child},this.iE=e=>{for(let i of e){if(N.isMaskedElement(i.target)||N.isMaskedElementChild(i.target))for(let n=0;n<i.addedNodes.length;n+=1){let a=i.addedNodes[n];N.isMaskedElement(a)||N.isMaskedElementChild(a)||ct(a)&&this.Md(a)}for(let n=0;n<i.removedNodes.length;n+=1){let a=i.removedNodes[n];dt.isConnected(a)||this.kd(a)}}},this.rE=t}setMaskedElementSettings(t){this.ms=t}startIdentifier(){this.isStarted||(this.isStarted=!0,this.onStart())}stopIdentifier(){return this.isStarted=!1,this.onStop()}start(){}stop(){}onStart(){var t,e,i,n;this.ms||(at.error("maskedElementSettings not initialized","MaskedElementIdentifier.start"),this.ms={elementSelector:"",attrSelector:"",attrSelectors:[]});let{elementSelector:a,attrSelector:c,attrSelectors:l}=this.ms;(t=this.Vs)!==null&&t!==void 0||(this.Vs=this.nE()),a.length!==0&&((e=this.B)!==null&&e!==void 0||(this.B=this.oE()),this.B.observe(a)),c.length!==0&&((i=this.Ro)!==null&&i!==void 0||(this.Ro=this.aE(l)),this.Ro.observe(c)),(n=this.D)!==null&&n!==void 0||(this.D=new Je(this.iE,(u,g)=>g==="added"&&this.cE(u))),this.D.observe(),csSetTimeout(this.rE)}onStop(){var t,e,i;this.B&&(this.kd(document),this.B.disconnect()),(t=this.Ro)===null||t===void 0||t.disconnect(),(e=this.D)===null||e===void 0||e.disconnect(),(i=this.Vs)===null||i===void 0||i.disconnect()}nE(){return window.ResizeObserver?new ResizeObserver(t=>{csArray.prototype.forEach.call(t,e=>{this.resizeObserverCallback(e)})}):null}oE(){return new Ds(t=>{csArray.prototype.forEach.call(t,e=>{this.lE(e)?this.Md(e):(this.hE(e),this.uE(e))})})}aE(t){return new Ds(e=>{csArray.prototype.forEach.call(e,i=>this.dE(i,t))})}resizeObserverCallback(t){let e=t.target.getBoundingClientRect(),i=N.getMaskedElementDetails(t.target);if(i.state!==N.MaskedElementState.Parent||e.width===i.width&&e.height===i.height)return;let n={state:N.MaskedElementState.Parent,width:e.width,height:e.height};N.setMaskedElementProperty(t.target,n),this.produceEvent({type:"ResizeMaskedElement",target:st(t.target),width:e.width,height:e.height})}uE(t){!this.Vs||!ct(t)||ir(t)||this.Vs.observe(t)}lE(t){let e=csNodeparentNode.apply(t);return e?N.isMaskedElement(e)||N.isMaskedElementChild(e):ni(t)?N.isMaskedElement(t.host)||N.isMaskedElementChild(t.host):!1}cE(t){(N.isMaskedElement(t.host)||N.isMaskedElementChild(t.host))&&N.setMaskedElementProperty(t,this.Co)}kd(t){Zt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{N.unsetMaskedElementProperty(i)})}hE(t){let e=t.getBoundingClientRect(),i={state:N.MaskedElementState.Parent,width:e.width,height:e.height};N.setMaskedElementProperty(t,i),this.pE(t),Zt(t).visitAll(n=>n!=t&&N.setMaskedElementProperty(n,this.Co))}Md(t){N.setMaskedElementProperty(t,this.Co),Zt(t).visitAll(e=>e!=t&&N.setMaskedElementProperty(e,this.Co))}pE(t){var e;let i=(e=W.getProperty(t,N.maskedAttributeProp))!==null&&e!==void 0?e:{attributes:[]};for(let n=0;n<this.Nd.length;n+=1){let a=this.Nd[n];csArray.prototype.indexOf.call(i.attributes,a)===-1&&csArray.prototype.push.call(i.attributes,a)}i.attributes.length!==0&&N.setMaskedAttributeProperty(t,i)}dE(t,e){var i;let n=(i=W.getProperty(t,N.maskedAttributeProp))!==null&&i!==void 0?i:{attributes:[]};for(let a=0;a<t.attributes.length;a+=1){let c=t.attributes[a].name;csArray.prototype.indexOf.call(n.attributes,c)===-1&&csArray.prototype.some.call(e,l=>csString.prototype.indexOf.call(l.attrName,c)>-1&&te.call(t,l.selector))&&csArray.prototype.push.call(n.attributes,c)}n.attributes.length!==0&&N.setMaskedAttributeProperty(t,n)}}return be([x()],s.prototype,"resizeObserverCallback",null),s})(),Ee=(()=>{let s;return function(r){r.ANONYMIZED_TEXT_STATUS_PROP="anonymizationStatus",r.WHITELISTED_STATUS="whitelisted";function t(n){return W.getProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP)===r.WHITELISTED_STATUS}r.isWhitelistedElement=t;function e(n){W.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,r.WHITELISTED_STATUS)}r.whitelistElement=e;function i(n){W.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,void 0)}r.removeWhitelistElement=i}(s||(s={})),s})(),hp=(()=>{class s{constructor(){this.Ic=0,this.V=!1,this.Dd="data-cs-capture",this.Us=t=>{for(let e of t){if(Ee.isWhitelistedElement(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];Ee.isWhitelistedElement(n)||ct(n)&&this.xd(n)}for(let i=0;i<e.removedNodes.length;i+=1){let n=e.removedNodes[i];dt.isConnected(n)||this.Ld(n)}}}}start(){this.Ic++,!this.V&&(this.V=!0,this.fE())}fE(){this.B||(this.B=new Ds(e=>Q(e,i=>this.xd(i))));let t=this.Pc?`[${this.Dd}], ${this.Pc}`:`[${this.Dd}]`;this.B.observe(t),this.D||(this.D=new Je(this.Us,(e,i)=>i==="added"&&this.gE(e))),this.D.observe()}stop(){this.V&&(this.Ic--,this.Ic===0&&(this.V=!1,this.mE()))}mE(){this.B&&(this.Ld(document),this.B.disconnect()),this.D&&this.D.disconnect()}setWhitelistedElementsSelector(t,e=!0){if(Ks(t))this.Pc=t;else if(e)throw new Error("Command misuse: setCapturedElementsSelector")}getWhitelistedElementsSelector(){return this.Pc}xd(t){Zt(t).visitAll(e=>{Ee.whitelistElement(e)})}gE(t){Ee.isWhitelistedElement(t.host)&&Ee.whitelistElement(t)}Ld(t){Zt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{Ee.removeWhitelistElement(i)})}}return s})(),$e=(()=>{let s;return function(r){r.EDITABLE_NODE_PROP="editableNode";function t(n){return W.getProperty(n,r.EDITABLE_NODE_PROP)===!0}r.isEditableNode=t;function e(n){W.setProperty(n,r.EDITABLE_NODE_PROP,!0)}r.markEditableNode=e;function i(n){W.setProperty(n,r.EDITABLE_NODE_PROP,void 0)}r.unmarkEditableNode=i}(s||(s={})),s})(),up=(()=>{class s{constructor(){this.B=null,this.D=null,this.V=!1,this.Us=t=>{for(let e of t)if($e.isEditableNode(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];if(!$e.isEditableNode(n)){if(Wi(n)||Zh(n)){$e.markEditableNode(n);continue}ct(n)&&this.Vd(n)}}}}start(){this.V||(this.V=!0,this.B=new Ds(t=>Q(t,e=>{this.Vd(e)})),this.B.observe("[contenteditable]"),this.D=new Je(this.Us,(t,e)=>e==="added"&&this.yE(t)),this.D.observe())}stop(){var t,e;this.V&&(this.V=!1,(t=this.B)===null||t===void 0||t.disconnect(),this.B=null,(e=this.D)===null||e===void 0||e.disconnect(),this.D=null)}Vd(t){Zt(t).visitAll(e=>{$e.markEditableNode(e)})}yE(t){$e.isEditableNode(t.host)&&$e.markEditableNode(t)}}return s})(),dp=(()=>{let s;return function(r){r.ENCRYPTED_NODE_PROP="toEncrypt";function t(n){return W.getProperty(n,r.ENCRYPTED_NODE_PROP)===!0}r.shouldEncrypt=t;function e(n){W.setProperty(n,r.ENCRYPTED_NODE_PROP,!0)}r.markEncryptedNode=e;function i(n){W.setProperty(n,r.ENCRYPTED_NODE_PROP,void 0)}r.unmarkEncryptedNode=i}(s||(s={})),s})();var pp="spki",Ho="RSA-OAEP",fp="SHA-256",Bo="AES-CTR",gp="SHA-1",Fo=190,Qs=(()=>{let s;return function(r){var t;let e=!1,i=null,n,a=typeof TextEncoder!="undefined"?new TextEncoder:null,c;r.crypto=(t=et.crypto)===null||t===void 0?void 0:t.subtle,r.MAX_DIGEST_INPUT_SIZE=100;function l(){return!e}r.isKeyImported=l;function u(){return i}r.getCryptoKey=u;function g(){var O,T;return((T=(O=et.self.crypto)===null||O===void 0?void 0:O.subtle)===null||T===void 0?void 0:T.encrypt)!=null&&et.self.CryptoKey!=null}r.isSupported=g;async function d(O){n=r.crypto.importKey(pp,Na(O),{name:Ho,hash:fp},!1,["encrypt"]).catch(()=>(e=!0,null)),i=await n,n=void 0,i||at.warn(`Fail to import public key '${O}'`)}r.importKey=d;async function E(O){if(!g()||e)return null;await n;let T=yn(O);T.byteLength>Fo&&(T=T.slice(0,Fo));try{let L=await r.crypto.encrypt({name:Ho},i,T);return Eo(L)}catch{return null}}r.asymmetricEncrypt=E;async function y(O,T){if(!g()||e)return null;let L={counter:T.initializationVector,name:Bo,length:64},Z=a.encode(O);try{let rt=await r.crypto.encrypt(L,T.cryptoKey,Z);return Eo(rt)}catch{return null}}r.symmetricEncrypt=y;async function v(O){let T=await I(O);if(!T)throw new Error("Export secret failed");let L=await E(T);if(!L)throw new Error("Encrypt secret failed");return L}r.encryptSecret=v;async function I(O){var T;if(!g())return null;try{return(T=(await r.crypto.exportKey("jwk",O)).k)!==null&&T!==void 0?T:null}catch{return null}}async function P(){if(!g()||e)return null;try{return{cryptoKey:await r.crypto.generateKey({name:Bo,length:128},!0,["encrypt","decrypt"]),initializationVector:et.crypto.getRandomValues(new Uint8Array(16))}}catch{return null}}r.generateSymmetricKey=P;function S(O){c=O}r.setDigestSalt=S;async function _(O){O=csString.prototype.toLocaleLowerCase.call(csString.prototype.trim.call(O)),c&&(O=`${O}:${c}`);let T=a.encode(O);try{let L=await r.crypto.digest(gp,T);return qr(L)}catch{return null}}r.digest=_;function D(){return et.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}r.generateKeyPair=D}(s||(s={})),s})(),me=(()=>{let s;return function(r){r.REGEX="regex",r.START="start",r.NOT_START="not-start",r.END="end",r.NOT_END="not-end",r.CONTAIN="contain",r.NOT_CONTAIN="not-contain",r.EXACT="exact",r.NOT_EXACT="not-exact"}(s||(s={})),s})(),Ve=(()=>{let s;return function(r){r.START="start",r.NOT_START="not-start",r.END="end",r.NOT_END="not-end",r.CONTAIN="contain",r.NOT_CONTAIN="not-contain",r.EXACT="exact",r.NOT_EXACT="not-exact"}(s||(s={})),s})(),rs=(()=>{let s;return function(r){r.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",r.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",r.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",r.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"}(s||(s={})),s})(),dc=(()=>{class s{constructor(){this.Nc=[]}setRegexRules(t){this.Nc=csArray.prototype.filter.call(csArray.prototype.map.call(t,e=>this.SE(e)),e=>e!==null)}evaluateUrl(t){return csArray.prototype.some.call(this.Nc,e=>this.jd(t,e))}getMatchingRules(t){return csArray.prototype.filter.call(this.Nc,e=>this.jd(t,e))}jd(t,e){var i,n;let a=this.vE(t,e);return!this._E(e)||!this.wE(e)?!1:!!(e!=null&&e.notOperator?!(!((i=e.regex)===null||i===void 0)&&i.test(a)):!((n=e.regex)===null||n===void 0)&&n.test(a))}_E(t){let e=new csDate,i=t.startDate&&t.startDate>e,n=t.endDate&&t.endDate<e;return!i&&!n}wE(t){let e=t.samplingRate!==100,i=e&&hs.boolean(t.samplingRate);return!e||i}Io(t){return!Tt(t,"http://")&&!Tt(t,"https://")?`https://${t}`:t}vE(t,e){let i=On(this.Io(t));return i?e.ignoreQueryParams&&e.ignoreURIFragments?`${i.origin}${i.pathname}`:e.ignoreQueryParams?`${i.origin}${i.pathname}${i.hash}`:e.ignoreURIFragments?`${i.origin}${i.pathname}${i.search}`:t:t}Po(t){return t!=null&&t.ignoreCaseSensitivity?"i":""}SE(t){let e=null,i=!1;switch(t.operator){case Ve.NOT_START:case me.NOT_START:i=!0;case Ve.START:case me.START:e=new csRegExp(`^${t.value}`,this.Po(t));break;case Ve.NOT_END:case me.NOT_END:i=!0;case Ve.END:case me.END:e=new csRegExp(`${t.value}$`,this.Po(t));break;case Ve.NOT_CONTAIN:case me.NOT_CONTAIN:i=!0;case Ve.CONTAIN:case me.CONTAIN:case me.REGEX:e=new csRegExp(`${t.value}`,this.Po(t));break;case Ve.NOT_EXACT:case me.NOT_EXACT:i=!0;case Ve.EXACT:case me.EXACT:e=new csRegExp(`^${t.value}$`,this.Po(t));break;default:at.warn(`compileRegexRule, unknown operator: ${t.operator}`)}if(e===null)return null;let n=t.startDate?this.Hd(t.startDate):void 0,a=t.endDate?this.Hd(t.endDate):void 0;return{regex:e,ignoreQueryParams:t.ignoreQueryParams,ignoreURIFragments:t.ignoreURIFragments,notOperator:i,maskMedia:t.maskMedia,samplingRate:t.samplingRate!==void 0?t.samplingRate:100,startDate:n,endDate:a}}Hd(t){let e=new csDate(t);return isNaN(e.getTime())?void 0:e}}return s})(),mp=(()=>{class s{constructor(t,e,i,n){this.le=t,this.Gr=e,this.qr=i,this.bt=n}init(){this.bE()}shouldMaskNonTextElements(){if(this.le.anonymisationMethod!==rs.replayRecordingMaskedUrlRegexRules)return!1;if(this.le.isSMB)return this.shouldUseAnonymization();let t=this.qr.getMatchingRules(this.Gr.getAnonymizedUrl());return csArray.prototype.some.call(t,e=>e.maskMedia)}shouldUseAnonymization(){if(this.bt&&!this.bt.isReplayUnanonymizedAllowedByConsent()){switch(this.le.anonymisationMethod){case null:case rs.replayRecordingUnmaskedUrlRegex:return!(this.le.replayRecordingUnmaskedUrlRegex&&this.le.replayRecordingUnmaskedUrlRegex.test(this.Gr.getAnonymizedUrl()));case rs.replayRecordingUnmaskedUrlRegexRules:return!this.qr.evaluateUrl(this.Gr.getAnonymizedUrl())}return!0}else{switch(this.le.anonymisationMethod){case null:case rs.replayRecordingMaskedUrlRegex:return!!(this.le.replayRecordingMaskedUrlRegex&&this.le.replayRecordingMaskedUrlRegex.test(this.Gr.getAnonymizedUrl()));case rs.replayRecordingMaskedUrlRegexRules:return this.qr.evaluateUrl(this.Gr.getAnonymizedUrl())}return!1}}bE(){this.le.anonymisationMethod===rs.replayRecordingMaskedUrlRegexRules&&this.le.replayRecordingMaskedUrlRegexRules?this.qr.setRegexRules(this.le.replayRecordingMaskedUrlRegexRules):this.le.anonymisationMethod===rs.replayRecordingUnmaskedUrlRegexRules&&this.le.replayRecordingUnmaskedUrlRegexRules&&this.qr.setRegexRules(this.le.replayRecordingUnmaskedUrlRegexRules)}}return s})();function yp(s){return s.nodeType===1}function mt(s){let r=csEventtarget.apply(s);return r&&yp(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}function Ep(s){return s.composedPath&&Object.defineProperty(s,"__csOriginalTarget",{value:s.composedPath()[0],writable:!1,enumerable:!1}),s}function Sp(){return(s,r,t)=>{let e=t.value;return e&&(t.value=function(i){if(mt(i)===csEventtarget.apply(i))return e.call(this,i)}),t}}var yt=(()=>{let s;return function(r){r[r.TAP=0]="TAP",r[r.LONG_PRESS=1]="LONG_PRESS",r[r.DRAG=2]="DRAG",r[r.FLICK=3]="FLICK",r[r.PINCH_IN=4]="PINCH_IN",r[r.PINCH_OUT=5]="PINCH_OUT"}(s||(s={})),s})(),Mi=(()=>{let s;return function(r){r[r.UP=1]="UP",r[r.DOWN=2]="DOWN",r[r.LEFT=3]="LEFT",r[r.RIGHT=4]="RIGHT"}(s||(s={})),s})(),vp=(()=>{class s{compute(t,e){let i=this.js(e.x)-this.js(t.x),n=this.js(e.y)-this.js(t.y),a=e.time-t.time;return{duration:a,distance:this.Bd(i,n),direction:this.TE(i,n),velocity:this.AE(i,n,a)}}computePinchMetrics(t,e){let i=this.js(e.x)-this.js(t.x),n=this.js(e.y)-this.js(t.y);return{duration:e.time-t.time,distance:this.Bd(i,n)}}getScale(t,e){return Math.abs(e/t-1)}js(t){return t/window.devicePixelRatio}Bd(t,e){return Math.round(Math.sqrt(t*t+e*e))}AE(t,e,i){let n=i/1e3,a=t/n,c=e/n;return Math.round(Math.abs(a)+Math.abs(c))}TE(t,e){return Math.abs(t)>Math.abs(e)?t>0?Mi.RIGHT:Mi.LEFT:e>0?Mi.DOWN:Mi.UP}}return s})(),pc=typeof performance!="undefined"&&!!performance.now,$o=pc?()=>performance.now():()=>csDate.now(),_p=(()=>{var s;return pc?(s=performance.timing)===null||s===void 0?void 0:s.navigationStart:0})(),ki={now(){return Math.round($o()+_p)},elapsed(){return $o()}};function zo(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var wp=1e3,bp=100,Tp=.1,rn=(()=>{class s{constructor(){this.Bt={},this.Mc=()=>{},this.Oo=new vp,this.Re()}static isGestureDetectionSupported(){return typeof devicePixelRatio!="undefined"}onGesture(t){this.Mc=t}isValidTouchEvent(t){return"touches"in t&&"changedTouches"in t}processActionDown(t){if(!this.RE(t))return;this.CE(t)&&this.Re();let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:ki.now()};if(t.touches.length===1)this.Bt.startPinchTime=e.time,this.Bt.firstTouch=e;else if(t.touches.length===2&&(this.Bt.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:ki.now()},this.Bt.firstTouch&&this.Bt.secondTouch)){let i=this.Oo.computePinchMetrics(this.Bt.firstTouch,this.Bt.secondTouch);this.Yi=i.distance}csArray.prototype.push.call(this.Wr,e),this.Mo=mt(t)}processActionMove(){this.kc=!0}processActionUp(t){if(this.IE(t)){if(csArray.prototype.push.call(this.Wr,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:ki.now()}),this.PE(t)&&this.Bt.startPinchTime){let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.Bt.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:ki.now()};this.Bt.firstTouch&&(this.Bt.firstTouch=e,this.Bt.secondTouch=i),this.OE(t)}this.Yi||this.NE()&&this.ME(t)}}Re(){this.Wr=[],this.Mo=null,this.kc=!1,this.Yi=null,this.Yr=!0}ME(t){let e=this.Oo.compute(this.Wr[0],this.Wr[1]);this.Yr=t.isTrusted;let i=this.kc?this.kE(e):this.DE(e);if(this.xE(i.type,t.changedTouches)){let n=t.changedTouches[0];i.pageX=zo(n.pageX,1),i.pageY=zo(n.pageY,1)}this.Mc(i,t)}OE(t){if(!(this.Bt.firstTouch&&this.Bt.secondTouch))return;let e=this.Oo.computePinchMetrics(this.Bt.firstTouch,this.Bt.secondTouch);this.Yr=t.isTrusted;let i=this.LE(e);i&&this.Mc(i,t)}LE(t){return!this.Yi||this.Oo.getScale(this.Yi,t.distance)<Tp?void 0:{type:this.Yi>t.distance?yt.PINCH_IN:yt.PINCH_OUT,target:this.Mo,distance:t.distance,isTrusted:this.Yr}}kE(t){return{type:t.velocity<bp?yt.DRAG:yt.FLICK,target:this.Mo,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.Yr}}DE(t){return{type:t.duration<wp?yt.TAP:yt.LONG_PRESS,target:this.Mo,isTrusted:this.Yr}}xE(t,e){return t===yt.TAP&&e&&e.length===1}CE(t){return t.touches.length===1}NE(){return this.Wr.length===2}RE(t){return t.touches.length>0}IE(t){return t.changedTouches.length>0}PE(t){return this.kc&&!!this.Yi&&t.changedTouches.length===1&&t.touches.length===1}}return s})(),kn=(()=>{class s{constructor(){this.subscriptions={}}subscribe(t,e){this.subscriptions[t]=e,Object.keys(this.subscriptions).length===1&&this.onStartTracking()}unsubscribe(t){delete this.subscriptions[t],Object.keys(this.subscriptions).length===0&&this.onStopTracking()}}return s})(),fc=!0,Fi=csSymbol("safe"),Go=csSymbol("task");function Ct(s,r=fc){var t;(t=s[Fi])!==null&&t!==void 0||(s[Fi]=function(e){let i=arguments;ps(()=>(e[Go]=Gt,s.listener.apply(s.boundElement,i)),ce.EventListener,e[Go])}),s.boundElement.addEventListener(s.type,s[Fi],r)}function It(s,r=fc){s.boundElement.removeEventListener(s.type,s[Fi],r)}var Ap=(()=>{class s extends kn{constructor(t){super(),this.VE=t,this.Hs=[{boundElement:document,type:"touchstart",listener:e=>this.Q(e)},{boundElement:document,type:"touchmove",listener:e=>this.Q(e)},{boundElement:document,type:"touchend",listener:e=>this.Q(e)}],this.Xr=new rn,this.Xr.onGesture((e,i)=>this.Dc(e,i))}Dc(t,e){for(let i in this.subscriptions){let n=this.subscriptions[i];n(t,e)}}onStartTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Hs,t=>Ct(t))}onStopTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Hs,t=>It(t))}canDetectGesture(){return typeof devicePixelRatio!="undefined"}Q(t){this.VE.tryToExecute("process gesture event",()=>{if(this.Xr.isValidTouchEvent(t))switch(t.type){case"touchstart":this.Xr.processActionDown(t);break;case"touchmove":this.Xr.processActionMove();break;case"touchend":this.Xr.processActionUp(t);break}})()}static isSwipe(t){return t.type===yt.FLICK||t.type===yt.DRAG}}return s})();var Rp=(()=>{class s{constructor(t,e,i,n,a){this.f=t,this.tt=e,this.Bs=i,this.he=n,this.ut=a}init(){this.tt.onChildMessage((t,e,i)=>this.ut.emitIframeEvent(t,e,i)),this.tt.setSentiveStatusCallback(()=>this.he.getSensitiveStatus()),this.tt.setRecordingContextCallback(()=>this.Bs.getRecordingContext())}onStartTracking(){this.f.iframesTracking&&this.tt.start()}onOptout(){this.f.iframesTracking&&this.tt.stop()}onSensitiveStatusChange(){if(this.f.iframesTracking){let t=this.he.getSensitiveStatus();this.tt.onSensitiveStatusChange(t)}}onRecordingContextChange(){if(this.f.iframesTracking){let t=this.Bs.getRecordingContext();this.tt.onRecordingContextChange(t)}}}return s})(),Pt=(()=>{class s{constructor(){this._isStarted=!1}get isStarted(){return this._isStarted}start(...t){this._isStarted||(this._isStarted=!0,this.onStart(...t))}stop(){this._isStarted&&(this._isStarted=!1,this.onStop())}restart(){this.stop(),this.start()}}return s})(),Cp=(()=>{class s extends Pt{constructor(t){super(),this.f=t,this.xc=0,this.Ie=new Map,this.Fd={boundElement:window,type:"message",listener:e=>this.Lc(e)}}onChildMessage(t){this.$d=t}setRecordingContextCallback(t){this.UE=t}setSentiveStatusCallback(t){this.jE=t}onSensitiveStatusChange(t){let e=ft.buildBaseMessage(K.SensitiveStatus,re.Parent,this.f.projectId);e.content=t;let i=ft.buildBaseMessage(K.SensitiveStatus,re.Parent,this.f.projectId);i.content={...t,started:!1,useAnonymization:!0,capturedElementSelector:""},this.Ie.forEach(n=>{if(n.port){let a=this.Do(n)?i:e;this.Vc(n,a)}})}onRecordingContextChange(t){let e=ft.buildBaseMessage(K.RecordingContext,re.Parent,this.f.projectId);e.content=t,this.Ie.forEach(i=>{!this.Do(i)&&i.port&&this.Vc(i,e)})}sendToChildren(t,e){let i=ft.buildBaseMessage(t,re.Parent,this.f.projectId);i.content=e,this.HE(i)}onStart(){Ct(this.Fd,!1),this.zd()}onStop(){this.BE(),It(this.Fd,!1),this.FE()}zd(){let t=this.$E();this.zE(t),csArray.prototype.forEach.call(t,e=>{if(this.GE(e)===null){let n={iframe:e};this.Ie.set(this.xc,n),this.xc+=1}}),this.qE()}$E(){return csArray.prototype.filter.call(dt.findAllElements("iframe"),t=>this.WE(t))}zE(t){this.Ie.forEach((e,i)=>{e.iframe&&csArray.prototype.indexOf.call(t,e.iframe)===-1&&this.YE(i,e)})}YE(t,e){e.port&&ft.closeChannelPort(e.port),this.Ie.delete(t)}FE(){this.Ie.forEach(t=>{t.port&&ft.closeChannelPort(t.port)}),this.Ie.clear()}GE(t){let e=null;return this.Ie.forEach((i,n)=>{e===null&&i.iframe===t&&(e=n)}),e}WE(t){return t.id!==Ua&&(!t.src||Tt(t.src,"about:")||Pn(ic(t.src),this.f.hostnames))}HE(t){this.Ie.forEach(e=>{this.Vc(e,t)})}Vc(t,e){let i=e.type===K.SensitiveStatus||e.type===K.RecordingContext;t.port&&(!i||t.initialStatusSent)&&ft.sendChannelMessage(t.port,e)}qE(){this.Ie.forEach((t,e)=>{if(t.iframe.contentWindow){let i=this.XE(e);ft.sendPostMessage(t.iframe.contentWindow,"*",i)}})}BE(){let t=this.KE();this.Ie.forEach(e=>{e.port?ft.sendChannelMessage(e.port,t):e.iframe.contentWindow&&ft.sendPostMessage(e.iframe.contentWindow,"*",t)})}XE(t){return ft.buildBaseMessage(K.Discovery,re.Parent,this.f.projectId,t)}KE(){return ft.buildBaseMessage(K.Stop,re.Parent,this.f.projectId)}JE(t,e){let i=this.Ie.get(t);if(i===void 0){j.error(`Parent received channel messaging initialization from unknow child id : ${t} (${this.xc})`);return}i.port=e,i.port.onmessage=n=>{this.Uc(n,i)}}QE(t){if(!t.port)return;let e=ft.buildBaseMessage(K.SensitiveStatus,re.Parent,this.f.projectId),i=this.jE();this.Do(t)&&(i.started=!1,i.capturedElementSelector="",i.useAnonymization=!0),e.content=i,ft.sendChannelMessage(t.port,e)}ZE(t){if(!t.port)return;let e=ft.buildBaseMessage(K.RecordingContext,re.Parent,this.f.projectId),i=this.UE();this.Do(t)&&(i.isRecording=!1),e.content=i,ft.sendChannelMessage(t.port,e)}Uc(t,e){if(e===void 0){j.error(`Parent received channelMessage from unknown child : ${csJSON.stringify(t.data)}`);return}let i=t.data.type,n=t.data.content;i===K.EndOfBufferedMessages?(this.QE(e),this.ZE(e),e.initialStatusSent=!0):this.$d(e.iframe,i,n)}Lc(t){if(ft.isMessageValid(t,re.Child,this.f.projectId,this.f.hostnames))switch(t.data.type){case K.Discovery:if(t.data.id===void 0){this.zd();return}if(t.ports&&t.ports.length===1&&this.Ie.has(t.data.id)){this.JE(t.data.id,t.ports[0]);return}j.error(`Parent received wrong channelMessage initialization : (${t.origin}) : ${csJSON.stringify(t.data)}`);break;case K.ChildLogMessage:this.$d(null,K.ChildLogMessage,t.data.content);break;default:j.warn(`Parent received unexpected postMessage type from child (${t.origin}) : ${csJSON.stringify(t.data)}`)}}Do(t){return N.isMaskedElement(t.iframe)||N.isMaskedElementChild(t.iframe)}}return s})(),us;(function(s){s.ContentSquare="CONTENTSQUARE",s.LoadedByClicktale="LOADED_BY_CLICKTALE",s.LoadClicktalePtc="LOAD_CLICKTALE_PTC",s.DualCollectionReview="DUAL_COLLECTION_REVIEW",s.DualCollection="DUAL_COLLECTION",s.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"})(us||(us={}));function gc(s){return s.tagDeploymentMode===us.DualCollectionReview||s.tagDeploymentMode===us.DualCollection}function Ip(s){return gc(s)||s.tagDeploymentMode===us.LoadClicktalePtc}var qo=(()=>{let s;return function(r){function t(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()}r.isRecording=t;function e(){window.ClickTaleStop&&window.ClickTaleStop()}r.stopRecording=e;function i(c){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(c)}r.triggerLogicalPageView=i;function n(c){window.ClickTaleEvent&&window.ClickTaleEvent(c)}r.sendPageEvent=n;function a(c){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(c)}r.sendEventTriggerRecording=a}(s||(s={})),s})();var Pp=(()=>{class s{constructor(t){this.mt=t}on(t,e){return i=>{this.mt.hasValidEventTarget(i)&&this.nS(i,t)&&e(i)}}nS(t,e){let i=mt(t);return te.call(i,e)}isMatchesSelectorSupported(){return!!te}}return s})(),Op=(()=>{class s extends Pt{constructor(){super(),this.Wd=0}onStart(){j.isPerfLoggingActive()&&(this.Kr=window.csSetInterval(()=>this.Yd(),s.oS))}onStop(){j.isPerfLoggingActive()&&(this.Yd(),csClearInterval(this.Kr))}Yd(){this.Wd>=s.aS||q.counters.methodPerformance.flush()&&this.Wd++}}return s.oS=5e3,s.aS=5,s})(),Np=(()=>{class s{constructor(){}init(){this.Xd=new Op}onStartTracking(){this.Xd.start()}onOptout(){this.Xd.stop()}}return s})();var Mp=["hpd"],kp=["hrfs","hsd","hsp","hss","hsh","hpp","hps","hph"],Dp=["sendHeapContext"],xp=(()=>{class s{constructor(t,e){this.Xi=t,this.E=e}init(){this.E.register(Dp,t=>{let e=this.uS(t);e&&this.Xi.setHeapPageViewProps(e)})}onAfterNaturalPageView(){this.Xi.resetHeapPageViewProps()}onAfterArtificialPageView(){this.Xi.resetHeapPageViewProps()}uS(t){if(!mn(t)){j.error("heapPvProps must be an object");return}let e={};for(let i of Mp){let n=t[i];if(!$(n)||n.length===0){j.error(`heapPvProps.${i} is required and must be a non-empty string`);return}e[i]=n}for(let i of kp){let n=t[i];if(n!=null&&!$(n)){j.error(`heapPvProps.${i} must be a string, undefined or null`);return}e[i]=n||void 0}return Lp(e)}}return s})();function Lp(s){return Qa(s,r=>r===void 0)}var Vp=(()=>{class s{getRequestParameters(){if(!this.Fs)return{};let t={hr:this.Fs.hrfs,hl:Up(this.Fs),hpd:this.Fs.hpd,hpp:this.Fs.hpp,hpq:this.Fs.hps,hph:this.Fs.hph};return jp(t)}setHeapPageViewProps(t){this.Fs=t}resetHeapPageViewProps(){this.Fs=void 0}}return s})();function Up(s){let{hsd:r,hsp:t,hss:e,hsh:i}=s;return r?csString.prototype.concat.call(r,t||"",e||"",i||""):void 0}function jp(s){return Qa(s,r=>!r)}var Hp=s=>{let r=s*60*1e3;return`${Math.floor(csDate.now()/r)}`},Bp=5e3,Fp=(()=>{class s extends Za{constructor(t,e,i){super(t,e),this.Ki=null,this.dS=(i==null?void 0:i.type)||"json",this.Qd=i==null?void 0:i.cacheMinutes,this.Hr=i==null?void 0:i.timeout}onLoad(t){this.Wi=t}onError(t){this.jr=t}onTimeout(t,e){this.mi=t,this.Hr=e}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,n=>n());let t=this.retrieveParameters();this.hc(t);let e=oi.toQuery(t),i=`${this.domainUri}${this.path?`/${this.path}`:""}?${e}`;this.pS(i,this.dS)}abort(){this.Ki&&(this.Ki.abort(),this.Ki=null)}isInProgress(){return this.Ki!==null}pS(t,e){var i;let n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType=e,n.onerror=()=>{var a;return(a=this.jr)===null||a===void 0?void 0:a.call(this,n)},n.ontimeout=()=>{var a;return(a=this.mi)===null||a===void 0?void 0:a.call(this,n)},n.onload=()=>{var a,c;n.status>=200&&n.status<400?((a=this.Wi)===null||a===void 0||a.call(this,this.fS(n,e)?n.response:n.responseText),csArray.prototype.forEach.call(this.afterRequestCallbacks,l=>l())):(c=this.jr)===null||c===void 0||c.call(this,n)},n.onloadend=()=>{this.Ki=null},n.timeout=(i=this.Hr)!==null&&i!==void 0?i:Bp,this.Ki=n,n.send()}fS(t,e){let i=t.getResponseHeader("Content-Type");return i===null?e==="json":csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(i),"json")>0}hc(t){let e;this.Qd?e=`${Hp(this.Qd)}`:e=csString.prototype.slice.call(`${Math.random()}`,2,8),t.r=e}}return s})();var ai={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11};var Wo=new Map,Rr=!ui&&document.implementation.createHTMLDocument("");function mc(s){var r,t;return(t=(r=s.sheet)===null||r===void 0?void 0:r.href)!==null&&t!==void 0?t:s.getAttribute("href")}function $p(s){if(!er(s))return null;let r=yc(s);if(r===null||r.length===0)return null;let t="";if(Gr(s.textContent))Q(r,e=>t+=e.cssText);else{let e=zp(s);if(e===r.length||e>r.length)return null;let i=new csArray(r.length-e);for(let n=e,a=0;n<r.length;n+=1,a+=1)i[a]=r[n];Q(i,n=>t+=n.cssText)}return t}function zp(s){if(!Rr)return 0;let r=Wo.get(s.textContent);if(r)return r;let t=s.cloneNode(!0);t.textContent=s.textContent,Rr.head.appendChild(t);let e=yc(t);return r=e?e.length:0,Wo.set(s.textContent,r),Rr.head.removeChild(t),r}function yc(s){try{if(s.disabled)return null;let r=s.sheet;return r?r.cssRules||r.rules:null}catch(r){if(r.name!=="SecurityError"&&r.name!=="InvalidAccessError")throw r;return null}}var Ys=s=>s instanceof HTMLFormElement?"form":s.localName;var gs=(()=>{class s{constructor(t){this.csId=st(t),this.props=Bi.getStore(t)}}return s})(),Ec=(()=>{class s extends gs{constructor(t){super(t),this.nodeType=3,this.data=t.data}}return s})(),Rs=(()=>{class s extends gs{constructor(t){var e,i,n;super(t),this.attributes=[],this.nodeType=ai.ELEMENT_NODE,this.localName=Ys(t),this.namespaceURI=(e=t.namespaceURI)!==null&&e!==void 0?e:void 0,this.children=[];let a=$p(t);if(a){this.children=new csArray(csNodechildNodes.apply(t).length);let c=document.createTextNode(a),l=new Ec(c);csArray.prototype.push.call(this.children,l)}Ls(t)&&W.setProperty(this,"SVG",!0),(er(t)||wn(t))&&(this.disabledSheet=(n=(i=t.sheet)===null||i===void 0?void 0:i.disabled)!==null&&n!==void 0?n:!1)}static isElement(t){return t.nodeType===ai.ELEMENT_NODE}static getAttribute(t,e){return ve(t.attributes,i=>i.name===e)}static getAttributeValue(t,e){var i;return(i=this.getAttribute(t,e))===null||i===void 0?void 0:i.value}}return s})(),Gp=(()=>{class s extends gs{constructor(t){super(t),this.nodeType=4,this.data=t.data}}return s})(),qp=(()=>{class s extends gs{constructor(t){super(t),this.nodeType=8,this.data=t.data}}return s})(),Wp=(()=>{class s extends gs{constructor(t){super(t),this.nodeType=10,this.name=t.name,this.publicId=t.publicId,this.systemId=t.systemId}}return s})(),Yp=(()=>{class s extends gs{constructor(t){super(t),this.nodeType=9,this.baseURI=s.getBaseURI(t),this.children=[]}static getBaseURI(t){let e=t.baseURI;if(e==null){let i=t.getElementsByTagName("base");e=i.length!==0?i[0].href:t.URL}return e}}return s})(),Xp=(()=>{class s extends gs{constructor(t){super(t),this.nodeType=11,this.mode=t.mode,this.children=[]}}return s})(),Kp=(()=>{class s{constructor(t,e,i){var n;typeof t=="string"?(this.name=t,this.value=e,this.namespaceURI=i!=null?i:""):(this.name=t.name,this.value=t.value,this.namespaceURI=(n=t.namespaceURI)!==null&&n!==void 0?n:"")}static create(t){let e=t.attributes,i=new csArray(e.length);for(let n=0;n<i.length;n++){let a=e[n];i[n]=new s(a.name,a.value,a.namespaceURI),a.name==="href"&&wn(t)&&(i[n].value=mc(t))}return i}}return s})(),Yo={workTime:40,async:!0,initialDOM:!0};var Zs=csSymbol("InitialDom"),Xo=csSymbol.for("ignoreNextSerialization");function Sc(s){return s[Xo]?(delete s[Xo],!0):!1}function Jp(s=Yo){return function(t,e){var i;(i=s.workTime)!==null&&i!==void 0||(s.workTime=Yo.workTime);let n=ls("serialize:callback",E=>e(E)),a=new pi,c=(E,y)=>{E.hasChildNodes()&&a.push({node:E,serializedNode:y});let v=E instanceof Element&&csElementshadowRoot.apply(E);if(v){let I=y.shadowRoot=ti(v);s.async&&s.initialDOM&&W.setProperty(v,Zs,!0),c(v,I)}},l,u=!0,g=8,d=ls("work",()=>{var E;if(u)l=ti(t),s.async&&s.initialDOM&&W.setProperty(t,Zs,!0),c(t,l),u=!1;else if(a.isEmpty)return;let y=tf(100);for(;!a.isEmpty;){if(s.async&&y.elapsed()>=s.workTime){--g<=0&&csSetTimeout(d);return}let{node:v,serializedNode:I}=a.pop(),P=(E=I.children)!==null&&E!==void 0?E:[];if(ir(v))continue;let S=0;for(let _=csNodefirstChild.apply(v);_;_=csNodenextSibling.apply(_)){if(Sc(_))continue;let D=ti(_);s.async&&s.initialDOM&&W.setProperty(_,Zs,!0),P[S++]=D,c(_,D)}}s.async?csSetTimeout(()=>n(l)):e(l)});if(!s.async)s.workTime=1/0,d();else for(let E=0;E<g;E++)csSetTimeout(d,1)}}function Qp(s){let r=ti(s),t=r;if(ir(s))return r;let e=0;for(let n=csNodefirstChild.apply(s);n;n=csNodenextSibling.apply(n))Sc(n)||(t.children[e++]=nn(n));let i=s.shadowRoot;return i&&(t.shadowRoot=nn(i)),r}var nn=fs(Qp,"serializeSync");function ti(s){let r,t;switch(s.nodeType){case 1:t=r=new Rs(s),r.attributes=ef(s);break;case 3:t=new Ec(s);break;case 4:t=new Gp(s);break;case 8:t=new qp(s);break;case 10:t=new Wp(s);break;case 9:t=new Yp(s);break;case 11:t=new Xp(s);break;default:throw new Error("Node type not supported: "+s.nodeType)}return t}function Zp(){Zs=csSymbol("InitialDom")}function tf(s){if(s<1)throw new Error("Precision should be >= 1");let r=0,t=C.elapsed();return{started:t,elapsed(){return++r%s===0&&(t=C.elapsed()),t-this.started}}}function ef(s){return ir(s)?[]:Kp.create(s)}var sf=/[\u4E00-\u9FFF]|[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]/g,rf="\uFF41",nf=/[^\s]/g,of="a";function Cr(s){let r=csString.prototype.replace.call(s,sf,rf);return csString.prototype.replace.call(r,nf,of)}var af=(()=>{class s{constructor(t,e,i,n=null,a=!1){this.Qe=t,this.mS=e,this.O=i,this.Ho=n,this.yS=a,this.ES=Ka(this.mS)}sanitize(t,e){return W.traverse(t,(i,n)=>{if(i.anonymized=this.Qe,i.nodeType===ai.TEXT_NODE){let a=i,{anonymizedValue:c,withAnonymization:l}=this.getAnonymizedValue(a.data,n?n==null?void 0:n.localName:e==null?void 0:e.targetLocalName,n?W.getProperties(n):e==null?void 0:e.targetProps);i.anonymized=l,a.data=c;return}if(Rs.isElement(i))return this.SS(i);if(i.nodeType===ai.CDATA_SECTION_NODE){let a=i;a.data=this.Qe?Cr(a.data):this.O.checkAndAnonymizePII(a.data,this.Ho);return}}),t}setAnonymization(t){this.Qe=t}getAnonymizedValue(t,e,i){if(e==="style")return{anonymizedValue:t,withAnonymization:!1};let n=(i==null?void 0:i[Ee.ANONYMIZED_TEXT_STATUS_PROP])===Ee.WHITELISTED_STATUS;return this.Qe&&!n?{anonymizedValue:Cr(t),withAnonymization:!0}:{anonymizedValue:this.O.checkAndAnonymizePII(t,this.Ho),withAnonymization:!1}}SS(t){if(W.getProperty(t,"SVG"))return;let e=ve(t.attributes,n=>n.name==="type"),i=e==null?void 0:e.value;t.attributes=csArray.prototype.map.call(t.attributes,n=>(n.anonymized=this.Qe,n.value=this.getAnonymizedAttributeValue(t.localName,n.name,n.value,i),n))}getAnonymizedAttributeValue(t,e,i,n){if(this.vS(t,e,n))return i;if($u(e))return zu(t,e,i)?this.O.anonymizePII(i):i;let a=this.yS&&e==="placeholder";return this.Qe&&(Gu(t,e,n)||a)?Cr(i):this.Qe?"":this.O.checkAndAnonymizePII(i,null)}vS(t,e,i){return Fu(t,e,i)||this.ES.has(e)}}return s})(),cf=(()=>{let s;return function(r){function t(){let i=navigator.userAgent+navigator.language+navigator.platform,n=csString.prototype.slice.call(e(i).toString(16),-4),a=new csDate().getTime(),c="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,l=>{let u=(a+Math.random()*16)%16|0;return a=Math.floor(a/16),(l==="x"?u:u&7|8).toString(16)});return csString.prototype.replace.call(c,"hhhh",n)}r.generate=t;function e(i){let n=0;for(let a=0;a<i.length;a+=1)n=csString.prototype.charCodeAt.call(i,a)+(n<<6)+(n<<16)-n;return Math.abs(n)}}(s||(s={})),s})();var vc=(()=>{class s{emit(t,e,i,n=document){let c=`${i!==void 0?`${i}`:`${s.CS}`}${t}`,l=s.createEvent(c,{detail:e});l!==null&&n.dispatchEvent(l)}static createEvent(t,e={}){if(typeof CustomEvent=="function")return new CustomEvent(t,e);let i=this.IS();if(i===null)return null;let{bubbles:n=!1,cancelable:a=!1,detail:c}=e;return i.initCustomEvent(t,n,a,c),i}static IS(){try{return document.createEvent("CustomEvent")}catch{return null}}}return s.CS="cs.tracking.",s})();var Ko=!1;function bt(){return(s,r,t)=>{if(t){let e=t.value;t.value=function(i,n){(i==null?void 0:i.isTrusted)===!1&&Ko||e.call(this,i,n)}}else{let e=s[r];if(typeof e!="function")return;s[r]=function(i,...n){(i==null?void 0:i.isTrusted)===!1&&Ko||e.call(this,i,n)}}}}var _c=(()=>{class s{constructor(){this.LS=["application/json","application/graphql","application/xml","text/plain","text/csv","text/html","text/xml","text/javascript"]}setCollectionOptions(t){this.Wc=t}isValidBodyType(t){let e=t["content-type"];if(!e)return!1;let i=csString.prototype.toLocaleLowerCase.call(e);return Xr(this.LS,n=>Ji(i,n))}canCollect(t,e){return this.VS(t,e)&&this.US(e)}VS(t,e){return t>=400||t>=200&&t<300&&this.Wc.statusCodes.has(t)&&this.Yc(e)}Yc(t){return Xr(this.Wc.urls,e=>csString.prototype.indexOf.call(t,e)!==-1)}US(t){return Bh(this.Wc.excludedDomains,e=>csString.prototype.indexOf.call(t,e)===-1)}}return s})(),lf=(()=>{class s extends _c{constructor(){super(),this.V=!1,this.Zi=null,this.jS=({result:t,args:e,callerName:i})=>{this.interceptFetch(t,e,i)}}onEvent(t){this.L=t}start(){this.V||this.HS()&&(this.BS(),this.Zi&&this.Zi.activate(),this.V=!0)}stop(){this.V&&(this.Zi&&this.Zi.deactivate(),this.V=!1)}HS(){return!!window.fetch&&typeof window.fetch=="function"}FS(t){if(t[0]&&typeof t[0].clone=="function"){let e=Ns(t);return e[0]=t[0].clone(),e}return t}BS(){this.Zi||(this.Zi=Qt({target:window,methodName:"fetch",hook:this.jS,hookPrepareArgs:this.FS,options:{withCallerName:!0}}))}async interceptFetch(t,e,i){let n=e[0],a=e[1],c=new Request(n,a);if(!$(c.url))return;let l=C.now(),u;try{u=await t}catch(y){if(this.$S(y)||this.op(y)||this.zS(y)||this.GS(y))return;throw y}let[g,d]=csString.prototype.split.call(c.url,"?"),E=ae(g);if(u&&super.canCollect(u.status,E)){let y={library:i,method:c.method,url:E,queryParameters:d,requestTime:l,responseTime:C.now(),statusCode:u.status,requestBody:"",responseBody:"",requestHeaders:this.ap(c.headers),responseHeaders:this.ap(u.headers)};if(!u.bodyUsed&&super.isValidBodyType(y.responseHeaders))try{y.responseBody=await u.clone().text()}catch(v){if(this.op(v))return}super.isValidBodyType(y.requestHeaders)&&(y.requestBody=await c.text()),this.L(y)}}$S(t){return t instanceof TypeError}op(t){return t instanceof DOMException&&t.name==="AbortError"}GS(t){return t instanceof DOMException&&t.name==="TimeoutError"}zS(t){return t instanceof DOMException&&csArray.prototype.some.call(s.qS,e=>e===t.name)}ap(t){let e={};return t.forEach((i,n)=>{i&&(e[csString.prototype.toLowerCase.call(n)]=csString.prototype.trim.call(i))}),e}}return s.qS=["NoModificationAllowedError","InvalidStateError","OperationError"],H([x("FetchRequestTracker.interceptFetch")],s.prototype,"interceptFetch",null),s})(),hf=0,uf=(()=>{class s extends _c{constructor(){super(),this.$t=csSymbol("ApiCall"),this.V=!1,this.tr=null,this.er=null,this.Bo=null,this.WS=({context:t,args:e,callerName:i})=>this.interceptOpen(t,e,i),this.YS=({context:t,args:e})=>this.interceptSetRequestHeader(t,e),this.XS=({context:t,args:e})=>this.interceptSend(t,e)}onEvent(t){this.L=t}start(){this.V||(this.Xc(),this.tr&&this.tr.activate(),this.er&&this.er.activate(),this.Bo&&this.Bo.activate(),this.V=!0)}stop(){this.V&&(this.tr&&this.tr.deactivate(),this.er&&this.er.deactivate(),this.V=!1)}Xc(){this.tr||(this.tr=Qt({target:XMLHttpRequest.prototype,methodName:"open",hook:this.WS,options:{withCallerName:!0}})),this.er||(this.er=Qt({target:XMLHttpRequest.prototype,methodName:"setRequestHeader",hook:this.YS})),this.Bo||(this.Bo=Qt({target:XMLHttpRequest.prototype,methodName:"send",hook:this.XS}))}interceptOpen(t,e,i){if(!e[1]||!$(e[1]))return;let[n,a]=csString.prototype.split.call(e[1],"?");t[this.$t]={library:i,requestTime:C.now(),method:e[0],url:ae(n),queryParameters:a,statusCode:hf,responseHeaders:{},requestHeaders:{},responseBody:"",requestBody:""},t.addEventListener("readystatechange",()=>this.readyStateChangeListener(t))}readyStateChangeListener(t){t[this.$t]&&t.readyState===XMLHttpRequest.DONE&&this.canCollect(t.status,t[this.$t].url)&&(t[this.$t].responseTime=C.now(),t[this.$t].statusCode=t.status,t[this.$t].responseHeaders=this.KS(t.getAllResponseHeaders()),super.isValidBodyType(t[this.$t].responseHeaders)&&(t.responseType===""||t.responseType==="text")&&(t[this.$t].responseBody=t.responseText),this.L(t[this.$t]))}interceptSetRequestHeader(t,e){if(!t[this.$t])return;let i=e[0],n=csString.prototype.valueOf.call(new csString(e[1]));typeof i!="string"||n.length===0||(i=csString.prototype.toLowerCase.call(csString.prototype.trim.call(i)),n=csString.prototype.trim.call(n),t[this.$t].requestHeaders[i]?t[this.$t].requestHeaders[i]+=`, ${n}`:t[this.$t].requestHeaders[i]=n)}interceptSend(t,e){t[this.$t]&&super.isValidBodyType(t[this.$t].requestHeaders)&&typeof e[0]=="string"&&(t[this.$t].requestBody=e[0])}KS(t){let e={};return csArray.prototype.forEach.call(csString.prototype.split.call(t,/[\r\n]+/),i=>{let[n,a]=csString.prototype.split.call(i,/:\s*/);a&&(e[csString.prototype.toLowerCase.call(n)]=csString.prototype.trim.call(a))}),e}}return H([x("XhrRequestTracker.interceptOpen")],s.prototype,"interceptOpen",null),H([x("XhrRequestTracker.readyStateChangeListener")],s.prototype,"readyStateChangeListener",null),H([x("XhrRequestTracker.interceptSetRequestHeader")],s.prototype,"interceptSetRequestHeader",null),H([x("XhrRequestTracker.interceptSend")],s.prototype,"interceptSend",null),s})(),df=(()=>{class s{constructor(){}onLoad(t){this.Wi=t}onLoadCallbackExecute(){this.Wi()}start(){let t=this.onLoadCallbackExecute.bind(this);this.JS(t)}JS(t){document.readyState==="complete"||document.readyState!=="loading"&&!document.documentElement.doScroll?csSetTimeout(t):(document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e));function e(){document.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e),t()}}}return H([x("onLoad")],s.prototype,"onLoadCallbackExecute",null),s})(),pf=(()=>{class s{constructor(t){this.Fo=t.performance}getRequestParameters(){if(this.QS())return{};let t=this.ZS();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}}ZS(){let t=this.Fo.timing;return{startRender:`${t.domLoading-t.requestStart}`,domInteractive:`${t.domInteractive-t.requestStart}`,domComplete:`${t.domComplete-t.requestStart}`,fullyLoaded:`${t.loadEventEnd-t.requestStart}`}}QS(){return!(this.Fo&&this.Fo.timing&&this.Fo.timing.loadEventEnd>0)}}return s})(),xt=(()=>{class s{static build(t,e,i){return csArray.prototype.reduce.call(i,(n,a)=>a.enhanceAnalysisEvent(t,n),e)}}return s})(),z=(()=>{let s;return function(r){r[r.RESIZE=0]="RESIZE",r[r.SCROLL=1]="SCROLL",r[r.MOUSEMOVE=2]="MOUSEMOVE",r[r.MOUSEDOWN=3]="MOUSEDOWN",r[r.MOUSEUP=4]="MOUSEUP",r[r.CLICK=5]="CLICK",r[r.MOUSEOVER=6]="MOUSEOVER",r[r.MOUSEOUT=7]="MOUSEOUT",r[r.CHANGE=10]="CHANGE",r[r.FOCUSIN=11]="FOCUSIN",r[r.FOCUSOUT=12]="FOCUSOUT",r[r.TAP=14]="TAP",r[r.KEYDOWN=15]="KEYDOWN",r[r.KEYUP=16]="KEYUP",r[r.COMMAND=17]="COMMAND",r[r.SUBMIT_COMMAND=18]="SUBMIT_COMMAND",r[r.PERFORMANCE=19]="PERFORMANCE",r[r.DRAG=20]="DRAG",r[r.FLICK=21]="FLICK",r[r.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",r[r.ZOOM=23]="ZOOM",r[r.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",r[r.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",r[r.DEAD_CLICK=30]="DEAD_CLICK",r[r.DEAD_ZOOM=31]="DEAD_ZOOM",r[r.PAGE_RELOAD=32]="PAGE_RELOAD",r[r.THRASHED_CURSOR=33]="THRASHED_CURSOR",r[r.BLANK_PAGE=34]="BLANK_PAGE",r[r.EXTERNAL_EVENT=35]="EXTERNAL_EVENT",r[r.SUBMIT=36]="SUBMIT",r[r.CUSTOM_EVENT=37]="CUSTOM_EVENT"}(s||(s={})),s})(),Ir=(()=>{let s;return function(r){r.SUCCESS="success",r.FAILURE="failure",r.ATTEMPT="attempt"}(s||(s={})),s})(),bs=(()=>{let s;return function(r){r.APPCUES="appcues",r.CHAMELEON="chameleon",r.CONTENTSQUARE="contentsquare",r.SEGMENT="segment",r.WEB="web"}(s||(s={})),s})();function ff(s){return s.tgtHM!==void 0}function wc(s){return s.tgt!==void 0}function gf(s){return s.tgtLk!==void 0}function mf(s){return s.x!==void 0&&s.y!==void 0}function yf(s){return s===Ir.SUCCESS||s===Ir.FAILURE||s===Ir.ATTEMPT}function Ef(s){return s===bs.APPCUES||s===bs.CHAMELEON||s===bs.CONTENTSQUARE||s===bs.SEGMENT||s===bs.WEB}var Sf=(()=>{class s{constructor(t,e,i){this.te=t,this.Lt=e,this.Tt=i}processGesture(t,e){switch(t.type){case yt.TAP:this.sv(e);break;case yt.FLICK:this.iv(t,e);break;case yt.DRAG:this.rv(t,e);break;default:break}}sv(t){let e={type:z.TAP,ts:0,x:0,y:0,tgt:""},i=xt.build(t,e,this.te);i.tgt!==_e.INVALID_ELEMENT&&this.L(i)}rv(t,e){var i,n;let a={type:z.DRAG,ts:0,fd:t.direction,tgt:""};!((i=this.Tt)===null||i===void 0)&&i.collectGestureDistance&&(a.distance=t.distance),!((n=this.Tt)===null||n===void 0)&&n.collectGestureVelocity&&(a.velocity=t.velocity);let c=xt.build(e,a,this.te);c.tgt!==_e.INVALID_ELEMENT&&this.L(c)}iv(t,e){var i,n;let a={type:z.FLICK,ts:0,fd:t.direction,tgt:""};!((i=this.Tt)===null||i===void 0)&&i.collectGestureDistance&&(a.distance=t.distance),!((n=this.Tt)===null||n===void 0)&&n.collectGestureVelocity&&(a.velocity=t.velocity);let c=xt.build(e,a,this.te);c.tgt!==_e.INVALID_ELEMENT&&this.L(c)}onEvent(t){this.L=t}start(){this.Lt.subscribe(s.cp,(t,e)=>this.processGesture(t,e))}stop(){this.Lt.unsubscribe(s.cp)}}return s.cp="AnalysisGestureTracker",H([bt()],s.prototype,"processGesture",null),s})();function cr(s,r){typeof r=="number"&&(r={wait:r});let t=r.wait,e=r.mode||"leading",i,n=[],a=null,c=0,l,u=()=>{c=C.now(),a=null,l=s.apply(i,n),n=[],i=null},g=function(...d){if(i=this!==null&&this!==void 0?this:et,n=[...d],e==="trailing")return a||(a=et.csSetTimeout(u,t)),l;let E=C.now(),y=t-(E-c);return y<=0||y>t?(c=E,l=s.apply(i,n),a?(et.csClearTimeout(a),a=null):n=[]):a||(a=et.csSetTimeout(u,y)),l};return g.cancel=()=>{a&&(et.csClearTimeout(a),c=0,a=null,n=[])},g.flushPending=()=>{a&&(et.csClearTimeout(a),u())},g}var Dn=s=>(r,t,e)=>{e.value=cr(e.value,s)},Jo="data-cs-scroll-container";function vf(s){try{if(Mt(csEventtarget.apply(s)))return!0}catch{}return!1}var Cs=(()=>{let s;return function(r){function t(i){return!!(Mt(i)&&vf(i)&&hi(csEventtarget.apply(i))&&csEventtarget.apply(i).getAttribute(Jo)!==null)}r.isEventOnScrollContainer=t;function e(){return window.csquerySelector[document.nodeType].call(document,`[${Jo}]`)}r.getScrollContainer=e}(s||(s={})),s})(),Is=(()=>{let s;return function(r){r[r.COPY=0]="COPY",r[r.CUT=1]="CUT",r[r.PASTE=2]="PASTE"}(s||(s={})),s})(),G=(()=>{let s;return function(r){r[r.SPACE=0]="SPACE",r[r.ENTER=1]="ENTER",r[r.BACKSPACE=2]="BACKSPACE",r[r.DELETE=3]="DELETE",r[r.ARROWUP=4]="ARROWUP",r[r.ARROWDOWN=5]="ARROWDOWN",r[r.ARROWLEFT=6]="ARROWLEFT",r[r.ARROWRIGHT=7]="ARROWRIGHT",r[r.CAPSLOCK=8]="CAPSLOCK",r[r.SHIFT=9]="SHIFT",r[r.TAB=10]="TAB",r[r.ALPHANUMERICAL=11]="ALPHANUMERICAL",r[r.ESCAPE=12]="ESCAPE",r[r.END=13]="END",r[r.ALT=14]="ALT",r[r.CTRL=15]="CTRL",r[r.META=16]="META"}(s||(s={})),s})(),_f=(()=>{class s{constructor(t,e,i,n=["submit"]){this.te=t,this.mt=e,this.Vt=i,this.nv=n,this.lp="select, select *, input, textarea",this.ov="select, select *, input, textarea",this.hp="a, a *, button, button *, select, select *, input, textarea",this.Zr="input, select, textarea",this.av="form",this.$o=150,this.cv=400,this.up=!1,this.tn=ii((a,c)=>this.scrollListener(a,c),this.$o),this.dp=ii(a=>this.resizeListener(a),this.$o),this.lv=cr(a=>this.mouseMoveListener(a),this.cv),this.hv=[{boundElement:window,type:"resize",listener:()=>this.dp()},{boundElement:document,type:"scroll",listener:a=>this.tn(a)},{boundElement:window,type:"mousemove",listener:a=>{this.lv(Ep(a))}},{boundElement:document,type:"mousedown",listener:a=>this.mouseDownListener(a)},{boundElement:document,type:"mouseup",listener:a=>this.mouseUpListener(a)},{boundElement:document,type:"click",listener:a=>this.clickListener(a)}],this.pp=[{type:"change",listener:this.Vt.on(this.ov,a=>this.changeListener(a))},{type:"submit",listener:this.Vt.on(this.av,a=>this.submitListener(a))}],this.uv=[{boundElement:document,type:"mouseover",listener:this.Vt.on(this.hp,a=>this.mouseOverListener(a))},{boundElement:document,type:"mouseout",listener:this.Vt.on(this.hp,a=>this.mouseOutListener(a))},{boundElement:document,type:"focusin",listener:this.Vt.on(this.lp,a=>this.focusInListener(a))},{boundElement:document,type:"focusout",listener:this.Vt.on(this.lp,a=>this.focusOutListener(a))},{boundElement:document,type:"keyup",listener:this.Vt.on(this.Zr,a=>this.keyUpListener(a))},{boundElement:document,type:"keydown",listener:this.Vt.on(this.Zr,a=>this.keyDownListener(a))},{boundElement:document,type:"copy",listener:this.Vt.on(this.Zr,a=>this.copyListener(a))},{boundElement:document,type:"cut",listener:this.Vt.on(this.Zr,a=>this.cutListener(a))},{boundElement:document,type:"paste",listener:this.Vt.on(this.Zr,a=>this.pasteListener(a))},...csArray.prototype.map.call(this.pp,a=>({...a,boundElement:document}))],this.U={},this.Kc=(a,c)=>{switch(c){case"initial":case"added":this.vi(a);break;case"removed":this._i(a);break}},this.de=new Vs(this.Kc),this.Jc()}vi(t){if(Yi(t)){let e=this.fp();csArray.prototype.forEach.call(e,i=>Ct(i))}else{let e=this.gp();csArray.prototype.forEach.call(e,i=>{Ct({...i,boundElement:t})})}}_i(t){if(Yi(t)){let e=this.fp();csArray.prototype.forEach.call(e,i=>It(i))}else{let e=this.gp();csArray.prototype.forEach.call(e,i=>{It({...i,boundElement:t})})}}onEvent(t){this.L=t}start(){this.de.observe(),this.vi(document),this.resizeListener()}stop(){this._i(document),this.de.disconnect()}flushPendingDebouncedListeners(){this.tn.flushPending(),this.dp.flushPending()}mp(t){return csArray.prototype.some.call(this.nv,e=>e===t)}gp(){return this.Vt.isMatchesSelectorSupported()?csArray.prototype.filter.call(this.pp,t=>!this.mp(t.type)):(j.warn("Element.matches is not implemented yet"),[])}fp(){let t=[];return csArray.prototype.push.call(t,...this.hv),this.Vt.isMatchesSelectorSupported()?csArray.prototype.push.call(t,...this.uv):j.warn("Element.matches is not implemented yet"),csArray.prototype.filter.call(t,e=>!this.mp(e.type))}resizeListener(t){let e=Cs.getScrollContainer(),i=hi(e);i&&(this.up=!0);let n={type:z.RESIZE,ts:0,x:i?e.clientWidth:gt.windowWidth(),y:i?e.clientHeight:gt.windowHeight()};t!==void 0&&(n.d=t),this.L(n)}scrollListener(t,e){let i=Cs.isEventOnScrollContainer(e);!this.up&&i&&this.resizeListener();let n={type:z.SCROLL,ts:0,x:i?csEventtarget.apply(e).scrollLeft:gt.windowOffsetX(),y:i?csEventtarget.apply(e).scrollTop:gt.windowOffsetY(),d:t},a=xt.build(e,n,this.te);this.L(a)}mouseMoveListener(t){let e={type:z.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=xt.build(t,e,this.te);this.L(i)}mouseDownListener(t){let e={type:z.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=xt.build(t,e,this.te);this.pe(i)}mouseUpListener(t){let e={type:z.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=xt.build(t,e,this.te);this.pe(i)}clickListener(t){let e={type:z.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=xt.build(t,e,this.te);this.pe(i)}mouseOverListener(t){let e={type:z.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=xt.build(t,e,this.te);this.pe(i)}mouseOutListener(t){let e={type:z.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.mt.getEventTargetPath(t)},i=xt.build(t,e,this.te);this.pe(i)}focusInListener(t){let e={type:z.FOCUSIN,ts:0,tgt:this.mt.getEventTargetPath(t)},i=xt.build(t,e,this.te);this.pe(i)}focusOutListener(t){let e={type:z.FOCUSOUT,ts:0,tgt:this.mt.getEventTargetPath(t)},i=xt.build(t,e,this.te);this.pe(i)}changeListener(t){let e={type:z.CHANGE,ts:0,tgt:""},i=xt.build(t,e,this.te);this.pe(i)}submitListener(t){let e={type:z.SUBMIT,ts:0,tgt:""},i=xt.build(t,e,this.te);this.pe(i)}copyListener(t){let e={type:z.COMMAND,ts:0,tgt:this.mt.getEventTargetPath(t),key:Is.COPY};this.pe(e)}cutListener(t){let e={type:z.COMMAND,ts:0,tgt:this.mt.getEventTargetPath(t),key:Is.CUT};this.pe(e)}pasteListener(t){let e={type:z.COMMAND,ts:0,tgt:this.mt.getEventTargetPath(t),key:Is.PASTE};this.pe(e)}keyUpListener(t){let e={type:z.KEYUP,ts:0,tgt:this.mt.getEventTargetPath(t),key:this.yp(t)};this.pe(e)}keyDownListener(t){let e={type:z.KEYDOWN,ts:0,tgt:this.mt.getEventTargetPath(t),key:this.yp(t)};this.pe(e)}yp(t){let e=this.U[t.key];return e===void 0?G.ALPHANUMERICAL:e}pe(t){wc(t)&&t.tgt!==_e.INVALID_ELEMENT&&this.L(t)}Jc(){this.U[" "]=G.SPACE,this.U.Spacebar=G.SPACE,this.U.Enter=G.ENTER,this.U.Backspace=G.BACKSPACE,this.U.Delete=G.DELETE,this.U.ArrowUp=G.ARROWUP,this.U.ArrowDown=G.ARROWDOWN,this.U.ArrowLeft=G.ARROWLEFT,this.U.ArrowRight=G.ARROWRIGHT,this.U.Up=G.ARROWUP,this.U.Down=G.ARROWDOWN,this.U.Left=G.ARROWLEFT,this.U.Right=G.ARROWRIGHT,this.U.CapsLock=G.CAPSLOCK,this.U.Shift=G.SHIFT,this.U.Tab=G.TAB}}return H([x("Event handler type: resize")],s.prototype,"resizeListener",null),H([x("Event handler type: scroll")],s.prototype,"scrollListener",null),H([x("Event handler type: mouseMove"),bt()],s.prototype,"mouseMoveListener",null),H([x("Event handler type: mouseDown"),bt()],s.prototype,"mouseDownListener",null),H([x("Event handler type: mouseUp"),bt()],s.prototype,"mouseUpListener",null),H([x("Event handler type: click"),bt()],s.prototype,"clickListener",null),H([x("Event handler type: mouseOver"),bt()],s.prototype,"mouseOverListener",null),H([x("Event handler type: mouseOut"),bt()],s.prototype,"mouseOutListener",null),H([x("Event handler type: focusIn")],s.prototype,"focusInListener",null),H([x("Event handler type: focusOut")],s.prototype,"focusOutListener",null),H([x("Event handler type: change")],s.prototype,"changeListener",null),H([x("Event handler type: submit"),bt()],s.prototype,"submitListener",null),H([x("Event handler type: copy")],s.prototype,"copyListener",null),H([x("Event handler type: cut")],s.prototype,"cutListener",null),H([x("Event handler type: paste")],s.prototype,"pasteListener",null),H([x("Event handler type: keyup")],s.prototype,"keyUpListener",null),H([x("Event handler type: keydown")],s.prototype,"keyDownListener",null),s})(),wf=(()=>{class s{constructor(){this.Ep=100,this.rn=0,this.nn=gt.documentHeight(),this.Sp={boundElement:document,type:"scroll",listener:t=>this.maxScrollRateListener(t)},this.rn=this.Qc(Cs.getScrollContainer()).maxScrollRate}onEvent(t){this.L=t}start(){Ct(this.Sp)}stop(){It(this.Sp)}reset(){let t=Cs.getScrollContainer(),{maxScrollRate:e,maxDocumentHeight:i}=this.Qc(t);this.nn=i,this.rn=e,this.L()}Qc(t){let e=0,i=0;if(t===null)i=gt.documentHeight(),e=this.pv(i);else{let n=this.fv(t);i=this.vp(t,n),e=this.gv(t,n)}return{maxScrollRate:e,maxDocumentHeight:i}}maxScrollRateListener(t){let e=null;Cs.isEventOnScrollContainer(t)&&(e=csEventtarget.apply(t));let{maxScrollRate:i,maxDocumentHeight:n}=this.Qc(e);(i>this.rn||n>this.nn)&&(this.rn=i,n>this.nn&&(this.nn=n),this.L())}pv(t){let e=Math.round(this.mv()/t*100);return Math.min(e,this.Ep)}mv(){let t=gt.windowHeight();return gt.windowOffsetY()+t}gv(t,e){let i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+e,n=this.vp(t,e),a=Math.round(i/n*100);return Math.min(a,this.Ep)}fv(t){let e=window.getComputedStyle(t).paddingTop||"0px";return parseInt(e,10)}vp(t,e){return t.scrollHeight+t.getBoundingClientRect().top+e}getRequestParameters(){return{sr:`${this.rn}`,mdh:`${this.nn}`}}}return H([x("MaxScrollRate handler")],s.prototype,"maxScrollRateListener",null),s})(),Yt=(()=>{let s;return function(r){r.Visible="visible",r.Hidden="hidden",r.Blur="blur",r.PagehideVisible="pagehideVisible",r.PagehideHidden="pagehideHidden",r.ExitPageByNavigate="exitPageByNavigate"}(s||(s={})),s})(),bc=(()=>{class s{constructor(){this.V=!1,this.Gs=t=>{try{switch(t.type){case"visibilitychange":return document.visibilityState==="hidden"?this.ee(Yt.Hidden):this.ee(Yt.Visible);case"pagehide":return document.visibilityState==="hidden"?this.ee(Yt.PagehideHidden):this.ee(Yt.PagehideVisible);case"blur":return this.ee(Yt.Blur);case"navigate":return this.yv(t)?this.ee(Yt.ExitPageByNavigate):void 0;default:return}}catch{}}}start(){this.V||(this.V=!0,this.Zc(),this.Ev(),this.Sv(),wo()&&this.vv())}stop(){this.V&&(this.V=!1,this.tl(),this._v(),this.wv(),wo()&&this.bv())}onEvent(t){this.ee=t}vv(){window.navigation.addEventListener("navigate",this.Gs)}bv(){window.navigation.removeEventListener("navigate",this.Gs)}Zc(){document.addEventListener("visibilitychange",this.Gs)}tl(){document.removeEventListener("visibilitychange",this.Gs)}Ev(){window.addEventListener("pagehide",this.Gs)}_v(){window.removeEventListener("pagehide",this.Gs)}Sv(){window.addEventListener("blur",this.Gs)}wv(){window.removeEventListener("blur",this.Gs)}yv(t){return t instanceof NavigateEvent?!t.downloadRequest&&!t.formData:!1}}return s})();var bf=1024,Tf=512,Pr=1024,Or="||",Af=(()=>{class s extends Pt{constructor(t,e,i,n,a,c,l,u,g,d,E,y,v,I,P,S,_,D,O,T,L){super(),this.f=t,this.qs=e,this.Lt=i,this.ir=n,this.sl=a,this.Ge=c,this.Pe=l,this.il=u,this.Y=g,this.Zt=d,this.Z=E,this.rl=y,this.qe=v,this.X=I,this.zo=P,this.Es=S,this.Ss=_,this.nl=D,this.wi=O,this.bi=T,this.Ti=L,this.zs=new vc,this.Go=!1,this.ol=[]}init(){var t,e,i,n,a,c,l;this.qs.onEvent(u=>this.Mt(u)),this.Lt.onEvent(u=>this.Mt(u)),this.ir.onEvent(()=>{let u=this.ir.getRequestParameters();this.X.setQueryParams(u),this.Pe.setQueryParams(u)}),this.rl.onEvent(u=>this.Oe(u)),this.al(),(t=this.zo)===null||t===void 0||t.onEvent(u=>this.Mt(u)),(e=this.wi)===null||e===void 0||e.onEvent(u=>this.Mt(u)),(i=this.Es)===null||i===void 0||i.onEvent(u=>this.Mt(u)),(n=this.Ss)===null||n===void 0||n.onEvent(u=>this.Mt(u)),this.Tv(),(a=this.nl)===null||a===void 0||a.onEvent(u=>this.Oe(u)),(c=this.bi)===null||c===void 0||c.onEvent(u=>this.Oe(u)),(l=this.Ti)===null||l===void 0||l.onEvent(u=>this.Oe(u))}Tv(){this.Pe.onBeaconSuccess(()=>{this.Ge.clearEvents()}),this.Pe.onBeaconFailure(t=>{this.Av(t)})}initStates(){let t=this.il.getRequestParameters(),e=this.sl.getRequestParameters(),i=this.ir.getRequestParameters();this.X.setQueryParams(t),this.X.setQueryParams(e),this.X.setQueryParams(i),this.Pe.setQueryParams(t),this.Pe.setQueryParams(e),this.Pe.setQueryParams(i),this.cl()}clearStates(t){var e,i;this.qs.flushPendingDebouncedListeners(),(e=this.Es)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.Ss)===null||i===void 0||i.flushPendingTextHighlightEvent(),t?(this.ll(),this.sendLastMessageBeacon()):this.sendEvents(),this.ir.reset(),this.X.removeQueryParams()}onStart(t){var e,i,n,a,c,l,u;t||(e=this.nl)===null||e===void 0||e.start(),this.qe.start(),this.qs.start(),this.ir.start(),this.Lt.start(),(i=this.zo)===null||i===void 0||i.start(),(n=this.Ss)===null||n===void 0||n.start(),t||this.rl.start(),(a=this.Es)===null||a===void 0||a.start(),(c=this.wi)===null||c===void 0||c.start(),(l=this.bi)===null||l===void 0||l.start(),(u=this.Ti)===null||u===void 0||u.start(),csArray.prototype.forEach.call(this.ol,g=>{this.Oe(g)}),this.ol=[]}collectInitialEvents(){var t;(t=this.zo)===null||t===void 0||t.collectInitialEvents()}onIframeAnalysisBrowserEvent(t){this.Oe(t)}onIframeAnalysisUserEvent(t){this.Mt(t)}onExternalEvent(t){this.Q(t)}Oe(t){this.Y.isCurrentPageviewValid()&&this.Q(t)}Mt(t){this.Y.refreshSession(),this.Y.isSessionValid()&&this.Q(t)}Q(t){this.Ge.addEvent(this.Rv(t)),this.Ge.isFull()&&this.sendEvents(),this.f.emitDebugEvents&&this.zs.emit("analysisEvent",{...t,typeName:z[t.type]})}Rv(t){return t.ts=this.Ai(),t}ll(){this.Pe.setQueryParams({hlm:"true"}),this.Go=!0}sendLastMessageBeacon(){this.Pe.removeQueryParams(["i"]),this.Pe.setQueryParams(this.il.getRequestParameters()),this.Pe.setQueryParams(this.sl.getRequestParameters()),this.Pe.send(this.Ge.stringifyEvents()),this.Pe.removeQueryParams(["hlm"]),this.Go=!1}sendEvents(){this.Ge.isEmpty()||(this.Pe.removeQueryParams(["i"]),this.X.setQueryParams(this.il.getRequestParameters()),this.X.setQueryParams(this.sl.getRequestParameters()),this.X.send(this.Ge.getEvents()),this.Ge.clearEvents())}onStop(){var t,e,i,n,a,c,l;this.qe.stop(),this.qs.stop(),this.ir.stop(),this.Lt.stop(),this.rl.stop(),(t=this.zo)===null||t===void 0||t.stop(),(e=this.Es)===null||e===void 0||e.stop(),(i=this.Ss)===null||i===void 0||i.stop(),(n=this.wi)===null||n===void 0||n.stop(),this.Ge.empty(),(a=this.nl)===null||a===void 0||a.stop(),(c=this.bi)===null||c===void 0||c.stop(),(l=this.Ti)===null||l===void 0||l.stop()}cl(){this.es=C.now()}Ai(){return C.now()-this.es}al(){this.qe.onEvent(t=>{var e,i;t!==Yt.Visible&&((e=this.Es)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.Ss)===null||i===void 0||i.flushPendingTextHighlightEvent(),t===Yt.PagehideVisible?this.ll():t===Yt.PagehideHidden?(this.ll(),this.sendLastMessageBeacon()):(!this.Ge.isEmpty()||this.Go)&&this.sendLastMessageBeacon())})}Av(t){try{(!this.Ge.isEmpty()||this.Go)&&this.Zt.save({requestParameters:t,events:this.Ge.getEvents()})}catch{}}pushSubmitCommandEvent(t,e){if(!yf(t)||!hi(e))throw new Error(`Command misuse: ${Dc}`);let i={status:t,type:z.SUBMIT_COMMAND,ts:0,tgt:this.Z.getElementPath(e)};i.tgt!==_e.INVALID_ELEMENT&&this.Oe(i)}pushCustomEvent(t,e,i){if(!($(t)&&!Gr(t))||i!==void 0&&!mn(i))throw new Error(`Command misuse: ${un}`);let n=Ef(e)?e:bs.WEB,a=this.Cv(i),c={type:z.CUSTOM_EVENT,ts:0,customEventName:ht.truncate(t,bf),sourceLibrary:n,...zr(a)?{}:{properties:a}};this.isStarted?this.Oe(c):csArray.prototype.push.call(this.ol,c)}Cv(t){let e={};for(let i in t){if(i.length>Tf)continue;let n=t[i];if(Xt(n)||zi(n))e[i]=n;else if(this._p(n))e[i]=ht.truncate(n,Pr);else if(this.Iv(n)){let a=this.Pv(n);a!==""&&(e[i]=a)}}return e}Pv(t){let e="";for(let i=0;i<t.length;i++){let n=t[i];if(!Xt(n)&&!zi(n)&&!this._p(n))continue;let a=csString(n);if(e==="")e=ht.truncate(a,Pr);else if(e.length+Or.length+a.length<=Pr)e+=Or+a;else break}return e}_p(t){return $(t)&&!Gr(t)&&!csString.prototype.includes.call(t,Or)}Iv(t){return csArray.isArray(t)&&t.length>0}}return s})(),ci=(()=>{class s{constructor(...t){this.wp=t}addProvider(t){csArray.prototype.push.call(this.wp,t)}getRequestParameters(){return csArray.prototype.reduce.call(this.wp,(t,e)=>({...e.getRequestParameters(),...t}),{})}}return s})(),Rf=(()=>{class s{constructor(t,e){this.Zt=t,this.X=e,this.bp=()=>{document.visibilityState==="visible"&&this.Tp()}}start(){this.Tp(),this.Zc()}stop(){this.tl()}getRecoveryStorage(){return this.Zt}Tp(){let t=this.Zt.recover();if(t!==null){let{requestParameters:e,events:i}=t;this.X.send(i,e)}}Zc(){document.addEventListener("visibilitychange",this.bp)}tl(){document.removeEventListener("visibilitychange",this.bp)}}return s})(),Tc=(()=>{class s{constructor(t){this.Ap=[],this.Rp=[],this.Jt={},this.Qt=t}setQueryParams(t){csArray.prototype.forEach.call(Object.keys(t),e=>{this.Jt[e]=t[e]})}removeQueryParams(t){t?csArray.prototype.forEach.call(t,e=>{delete this.Jt[e]}):this.Jt={}}onBeaconSuccess(t){csArray.prototype.push.call(this.Ap,t)}onBeaconFailure(t){csArray.prototype.push.call(this.Rp,t)}send(t){let e=oi.toQuery({...this.Jt,ct:nr.UNCOMPRESSED}),i=this.Ov(e,t);return i?csArray.prototype.forEach.call(this.Ap,n=>n()):csArray.prototype.forEach.call(this.Rp,n=>n(this.Jt)),i}Ov(t,e){try{if(typeof csNavigatorsendBeacon!="function")return!1;let i=csNavigatorsendBeacon(`${this.Qt}?${t}`,e||"");if(i)return i}catch{}return typeof navigator.sendBeacon!="function"?!1:navigator.sendBeacon(`${this.Qt}?${t}`,e||"")}}return s})(),Cf=(()=>{class s{constructor(t){this.rr=t}save(t){localStorage.setItem(this.rr,csJSON.stringify(t))}clear(){localStorage.removeItem(this.rr)}recover(){let t=localStorage.getItem(this.rr);if(t===null)return null;let e=null;try{e=csJSON.parse(t)}catch{j.error(`Invalid item in localStorage.
         (key:${this.rr}; value:${t})`)}finally{this.clear()}return e}}return s})(),If=(()=>{class s{constructor(t){this.an=t,this.cn=e=>this.processMetric(e),this.V=!1}onEvent(t){this.L=t}start(){this.V||(this.V=!0,this.an.onFCP(this.cn),this.an.onCLS(this.cn),this.an.onLCP(this.cn),this.an.onTTFB(this.cn),this.an.onINP(this.cn))}stop(){this.V=!1}processMetric(t){if(!this.V)return;let e={type:z.PERFORMANCE,name:t.name,val:t.value,ts:0};this.L(e)}}return H([x("Performance metric handler")],s.prototype,"processMetric",null),s})(),Ac=-1,Us=s=>{addEventListener("pageshow",r=>{r.persisted&&(Ac=r.timeStamp,s(r))},!0)},le=(s,r,t,e)=>{let i,n;return a=>{r.value>=0&&(a||e)&&(n=r.value-(i!=null?i:0),(n||i===void 0)&&(i=r.value,r.delta=n,r.rating=((c,l)=>c>l[1]?"poor":c>l[0]?"needs-improvement":"good")(r.value,t),s(r)))}},xn=s=>{requestAnimationFrame(()=>requestAnimationFrame(()=>s()))},Ln=()=>{let s=performance.getEntriesByType("navigation")[0];if(s&&s.responseStart>0&&s.responseStart<performance.now())return s},yi=()=>{var r;let s=Ln();return(r=s==null?void 0:s.activationStart)!=null?r:0},he=(s,r=-1)=>{let t=Ln(),e="navigate";return Ac>=0?e="back-forward-cache":t&&(document.prerendering||yi()>0?e="prerender":document.wasDiscarded?e="restore":t.type&&(e=t.type.replace(/_/g,"-"))),{name:s,value:r,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:e}},Nr=new WeakMap;function Vn(s,r){return Nr.get(s)||Nr.set(s,new r),Nr.get(s)}var on=class{constructor(){pe(this,"t");pe(this,"i",0);pe(this,"o",[])}h(r){var i;if(r.hadRecentInput)return;let t=this.o[0],e=this.o.at(-1);this.i&&t&&e&&r.startTime-e.startTime<1e3&&r.startTime-t.startTime<5e3?(this.i+=r.value,this.o.push(r)):(this.i=r.value,this.o=[r]),(i=this.t)==null||i.call(this,r)}},Ei=(s,r,t={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(s)){let e=new PerformanceObserver(i=>{Promise.resolve().then(()=>{r(i.getEntries())})});return e.observe({type:s,buffered:!0,...t}),e}}catch{}},Un=s=>{let r=!1;return()=>{r||(s(),r=!0)}},As=-1,Qo=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,tr=s=>{document.visibilityState==="hidden"&&As>-1&&(As=s.type==="visibilitychange"?s.timeStamp:0,Pf())},Zo=()=>{addEventListener("visibilitychange",tr,!0),addEventListener("prerenderingchange",tr,!0)},Pf=()=>{removeEventListener("visibilitychange",tr,!0),removeEventListener("prerenderingchange",tr,!0)},Rc=()=>{var s;if(As<0){let r=yi(),t=document.prerendering||(s=globalThis.performance.getEntriesByType("visibility-state").filter(e=>e.name==="hidden"&&e.startTime>r)[0])==null?void 0:s.startTime;As=t!=null?t:Qo(),Zo(),Us(()=>{setTimeout(()=>{As=Qo(),Zo()})})}return{get firstHiddenTime(){return As}}},lr=s=>{document.prerendering?addEventListener("prerenderingchange",()=>s(),!0):s()},ta=[1800,3e3],Cc=(s,r={})=>{lr(()=>{let t=Rc(),e,i=he("FCP"),n=Ei("paint",a=>{for(let c of a)c.name==="first-contentful-paint"&&(n.disconnect(),c.startTime<t.firstHiddenTime&&(i.value=Math.max(c.startTime-yi(),0),i.entries.push(c),e(!0)))});n&&(e=le(s,i,ta,r.reportAllChanges),Us(a=>{i=he("FCP"),e=le(s,i,ta,r.reportAllChanges),xn(()=>{i.value=performance.now()-a.timeStamp,e(!0)})}))})},ea=[.1,.25],Of=(s,r={})=>{Cc(Un(()=>{let t,e=he("CLS",0),i=Vn(r,on),n=c=>{for(let l of c)i.h(l);i.i>e.value&&(e.value=i.i,e.entries=i.o,t())},a=Ei("layout-shift",n);a&&(t=le(s,e,ea,r.reportAllChanges),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(a.takeRecords()),t(!0))}),Us(()=>{i.i=0,e=he("CLS",0),t=le(s,e,ea,r.reportAllChanges),xn(()=>t())}),setTimeout(t))}))},Ic=0,Mr=1/0,Di=0,Nf=s=>{for(let r of s)r.interactionId&&(Mr=Math.min(Mr,r.interactionId),Di=Math.max(Di,r.interactionId),Ic=Di?(Di-Mr)/7+1:0)},an,sa=()=>{var s;return an?Ic:(s=performance.interactionCount)!=null?s:0},Mf=()=>{"interactionCount"in performance||an||(an=Ei("event",Nf,{type:"event",buffered:!0,durationThreshold:0}))},ia=0,cn=class{constructor(){pe(this,"u",[]);pe(this,"l",new Map);pe(this,"m");pe(this,"p")}v(){ia=sa(),this.u.length=0,this.l.clear()}P(){let r=Math.min(this.u.length-1,Math.floor((sa()-ia)/50));return this.u[r]}h(r){var i,n;if((i=this.m)==null||i.call(this,r),!r.interactionId&&r.entryType!=="first-input")return;let t=this.u.at(-1),e=this.l.get(r.interactionId);if(e||this.u.length<10||r.duration>t.T){if(e?r.duration>e.T?(e.entries=[r],e.T=r.duration):r.duration===e.T&&r.startTime===e.entries[0].startTime&&e.entries.push(r):(e={id:r.interactionId,entries:[r],T:r.duration},this.l.set(e.id,e),this.u.push(e)),this.u.sort((a,c)=>c.T-a.T),this.u.length>10){let a=this.u.splice(10);for(let c of a)this.l.delete(c.id)}(n=this.p)==null||n.call(this,e)}}},Pc=s=>{let r=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?s():(r(s=Un(s)),document.addEventListener("visibilitychange",s,{once:!0}))},ra=[200,500],kf=(s,r={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&lr(()=>{var c;Mf();let t,e=he("INP"),i=Vn(r,cn),n=l=>{Pc(()=>{for(let g of l)i.h(g);let u=i.P();u&&u.T!==e.value&&(e.value=u.T,e.entries=u.entries,t())})},a=Ei("event",n,{durationThreshold:(c=r.durationThreshold)!=null?c:40});t=le(s,e,ra,r.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(a.takeRecords()),t(!0))}),Us(()=>{i.v(),e=he("INP"),t=le(s,e,ra,r.reportAllChanges)}))})},ln=class{constructor(){pe(this,"m")}h(r){var t;(t=this.m)==null||t.call(this,r)}},na=[2500,4e3],Df=(s,r={})=>{lr(()=>{let t=Rc(),e,i=he("LCP"),n=Vn(r,ln),a=l=>{r.reportAllChanges||(l=l.slice(-1));for(let u of l)n.h(u),u.startTime<t.firstHiddenTime&&(i.value=Math.max(u.startTime-yi(),0),i.entries=[u],e())},c=Ei("largest-contentful-paint",a);if(c){e=le(s,i,na,r.reportAllChanges);let l=Un(()=>{a(c.takeRecords()),c.disconnect(),e(!0)});for(let u of["keydown","click","visibilitychange"])addEventListener(u,()=>Pc(l),{capture:!0,once:!0});Us(u=>{i=he("LCP"),e=le(s,i,na,r.reportAllChanges),xn(()=>{i.value=performance.now()-u.timeStamp,e(!0)})})}})},oa=[800,1800],hn=s=>{document.prerendering?lr(()=>hn(s)):document.readyState!=="complete"?addEventListener("load",()=>hn(s),!0):setTimeout(s)},xf=(s,r={})=>{let t=he("TTFB"),e=le(s,t,oa,r.reportAllChanges);hn(()=>{let i=Ln();i&&(t.value=Math.max(i.responseStart-yi(),0),t.entries=[i],e(!0),Us(()=>{t=he("TTFB",0),e=le(s,t,oa,r.reportAllChanges),e(!0)}))})},Lf=(()=>{class s{onFCP(t){try{Cc(t,{reportAllChanges:!0})}catch{q.counters.webVitalsErrors.count("FCP")}}onCLS(t){try{Of(t,{reportAllChanges:!0})}catch{q.counters.webVitalsErrors.count("CLS")}}onLCP(t){try{Df(t,{reportAllChanges:!0})}catch{q.counters.webVitalsErrors.count("LCP")}}onTTFB(t){try{xf(t,{reportAllChanges:!0})}catch{q.counters.webVitalsErrors.count("TTFB")}}onINP(t){try{kf(t,{reportAllChanges:!0})}catch{q.counters.webVitalsErrors.count("INP")}}}return s})();var Si=(()=>{class s{isEventTypeSupported(t){return csArray.prototype.indexOf.call(this.supportedEventTypes,t)!==-1}enhanceAnalysisEvent(t,e){return this.isEventTypeSupported(e.type)?this.baseEnhanceAnalysisEvent(t,e):e}}return s})(),Vf=(()=>{class s extends Si{constructor(){super(...arguments),this.supportedEventTypes=[z.CHANGE],this.e_=["text","email","number","search","tel","url","password"]}baseEnhanceAnalysisEvent(t,e){let i=mt(t);return sr(i)&&csArray.prototype.indexOf.call(this.e_,i.type)>=0&&(e.isBlank=i.value===""),e}}return s})();var Oc=(()=>{class s extends Si{constructor(t){super(),this.mt=t,this.supportedEventTypes=[z.MOUSEDOWN,z.MOUSEUP,z.CLICK,z.MOUSEOVER,z.TAP,z.DRAG,z.FLICK,z.SUBMIT,z.CHANGE]}baseEnhanceAnalysisEvent(t,e){return e.tgt||(e.tgt=this.mt.getEventTargetPath(t)),e}}return s})(),aa=65535,Uf=(()=>{let s;return function(r){function t(e){let i=mt(e);if(!i||!ct(i)||!Xe(i.getBoundingClientRect)||!Mt(e.pageX)||!Mt(e.pageY))return{xRel:-1,yRel:-1,valid:!1};let n=i.getBoundingClientRect(),a=e.pageX-n.left-gt.windowOffsetX(),c=e.pageY-n.top-gt.windowOffsetY();i!==document.documentElement&&(a+=i.scrollLeft,c+=i.scrollTop);let l=Math.max(i.scrollWidth,n.width),u=Math.max(i.scrollHeight,n.height),g=Math.round(a/l*aa),d=Math.round(c/u*aa);return{xRel:g,yRel:d,valid:!0}}r.getRelativePosition=t}(s||(s={})),s})(),jf=Math.pow(2,31);function Hf(s,r=0){let l=r>>>0,u=s.length;for(let y=0;y<u-3;y+=4){let v=(csString.prototype.charCodeAt.call(s,y)&255|(csString.prototype.charCodeAt.call(s,y+1)&255)<<8|(csString.prototype.charCodeAt.call(s,y+2)&255)<<16|(csString.prototype.charCodeAt.call(s,y+3)&255)<<24)>>>0;v=Math.imul(v,3432918353),v=v<<15|v>>>17,v=Math.imul(v,461845907),l^=v,l=l<<13|l>>>19,l=Math.imul(l,5)+3864292196}let g=0,d=u&3,E=u-d;switch(d){case 3:g^=(csString.prototype.charCodeAt.call(s,E+2)&255)<<16;case 2:g^=(csString.prototype.charCodeAt.call(s,E+1)&255)<<8;case 1:g^=csString.prototype.charCodeAt.call(s,E)&255,g=Math.imul(g,3432918353),g=g<<15|g>>>17,g=Math.imul(g,461845907),l^=g}return l^=u,l^=l>>>16,l=Math.imul(l,2246822507),l^=l>>>13,l=Math.imul(l,3266489909),l^=l>>>16,l>>>0}function Nc(s){return Hf(s)+jf>>>0}var Bf=(()=>{class s extends Si{constructor(t,e){super(),this.ds=t,this.mt=e,this.supportedEventTypes=[z.MOUSEMOVE,z.CLICK],this.vl=""}baseEnhanceAnalysisEvent(t,e){let{valid:i,xRel:n,yRel:a}=Uf.getRelativePosition(t);if(i){let c=this.mt.getEventTargetPath(t);c!==_e.INVALID_ELEMENT&&(e.xRel=n,e.yRel=a,e.type===z.MOUSEMOVE&&(c!==this.vl||this.ds.iframesTracking?(this.vl=c,e.tgtHM=c,this.ds.isChild||(e.tgtHMH=Nc(e.tgtHM))):e.tgtHM=""))}else e.type===z.MOUSEMOVE&&(this.vl="");return e}}return s})(),Be=(()=>{let s;return function(r){r[r.ANONYMIZED=0]="ANONYMIZED",r[r.CAPTURED=1]="CAPTURED",r[r.MASKED=2]="MASKED",r[r.ENCRYPTED=3]="ENCRYPTED"}(s||(s={})),s})(),ca=100,Mc=(()=>{class s extends Si{constructor(t,e,i){super(),this.f=t,this.he=e,this.O=i,this.supportedEventTypes=[z.TAP,z.CLICK,z.SUBMIT]}s_(t){let e="",i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT),n=i.nextNode();for(;n;){if(e+=n.textContent,Tn(n.parentElement)||bn(n.parentElement)||this.he.getElementSensitiveStatus(n.parentElement)!==Be.CAPTURED)return!0;if(csString.prototype.trim.call(e).length>=ca)break;n=i.nextNode()}return!1}i_(t){let e=sn(t,"button,a");return e||(this.f.collectTargetText===Zr.ButtonAndLinkOnly?null:t)}baseEnhanceAnalysisEvent(t,e){if(hi(csEventtarget.apply(t))){let i=this.i_(csEventtarget.apply(t));if(i&&$(i.textContent)&&!this.s_(i)&&!this.O.hasPII(i.textContent,this.f.anonymizeDigits)){let n=ht.truncate(csString.prototype.trim.call(i.textContent),ca);n.length>0&&(e.text=n)}}return e}}return s})(),kc=(()=>{class s extends Si{constructor(t,e){super(),this.mt=t,this.he=e,this.supportedEventTypes=[z.CLICK,z.SUBMIT,z.CHANGE,z.TAP]}baseEnhanceAnalysisEvent(t,e){let i=this.he.getSensitiveStatus().useAnonymization,{path:n,hierarchy:a}=this.mt.getEventTargetPathAndHierarchy(t,i);return e.tgt=n,e.hrchy=a,e}}return s})();function Ff(s,r,t){let e=[];return s.mouseMoveHeatmapEnabled&&csArray.prototype.push.call(e,new Bf(s,r)),s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new Mc(s,t,new mi)),s.collectHierarchy&&csArray.prototype.push.call(e,new kc(r,t)),csArray.prototype.push.call(e,new Vf,new Oc(r)),e}function $f(s,r,t){let e=[];return s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new Mc(s,t,new mi)),s.collectHierarchy&&csArray.prototype.push.call(e,new kc(r,t)),csArray.prototype.push.call(e,new Oc(r)),e}var zf=50,Gf=(()=>{class s{constructor(t=[]){this.Ut=t}stringifyEvents(){return csJSON.stringify(this.Ut)}addEvent(t){csArray.prototype.push.call(this.Ut,t)}eventsCount(){return this.Ut.length}clearEvents(){this.Ut=[]}empty(){this.clearEvents()}isFull(){return this.eventsCount()>=zf}isEmpty(){return this.Ut.length===0}getEvents(){return this.Ut}}return s})(),qf="csAnalysisEventsPersisted",la="v2/events",Dc=["submit"],un=["trackEvent"];var Wf=(()=>{class s{constructor(t,e,i,n,a,c,l,u,g,d,E,y,v){this.f=t,this.Et=e,this.N=i,this.Z=n,this.Vt=a,this.E=c,this.Y=l,this.Lt=u,this.ut=g,this.Gt=d,this.K=E,this.he=y,this._l=v}init(){let t=new Gf,e=this.Gt.create(`${this.f.getTrackerUri()}/${la}`,!0,"base64");this.Xo=this.r_(e),this.Ne=this.n_(t,this.Xo.getRecoveryStorage(),e),this.Ne.init(),this.K.addListener(this.Ne),this.ut.addListener(this.Ne),this.E.register(Dc,(i,n)=>{this.Ne.pushSubmitCommandEvent(i,n)}),this.E.register(un,i=>{if(!mn(i))throw new Error(`Command misuse: ${un}`);this.Ne.pushCustomEvent(i.name,i.source,i.properties)})}onStartTracking(t){this.Xo.start(),this.Ne.start(t)}onAfterNaturalPageView(){this.Ne.initStates()}onAfterArtificialPageView(){this.Ne.initStates(),this.Ne.collectInitialEvents()}onArtificialPageViewEnd(){this.Ne.clearStates(!0)}onBeforeSessionRenewal(){this.Ne.clearStates(),this.Ne.stop(),this.Xo.stop()}onOptout(){this.Ne.stop(),this.Xo.stop()}n_(t,e,i){var n;let a=new pf(window),c=new wf,l=Ff(this.f,this.Z,this.he),u=[];this.f.collectSubmit||csArray.prototype.push.call(u,"submit");let g=new _f(l,this.Z,this.Vt,u),d=$f(this.f,this.Z,this.he),E=new Sf(d,this.Lt),y=new If(new Lf),v=new bc,I,P,S,_=new Tc(`${this.f.getTrackerUri()}/${la}`),D=new ci(this.Et,this.N),O,T,L,Z;return new Af(this.f,g,E,c,a,t,_,D,this.Y,e,this.Z,y,v,i,I,P,S,O,T,L,Z)}r_(t){return new Rf(new Cf(qf),t)}}return s})(),Yf=(()=>{class s extends Pt{constructor(t,e,i,n){super(),this.pt=t,this.wl=e,this.Et=i,this.fe=n,this.Ko=[],this.Xs=0}init(){this.pt.init()}initStates(){this.bl(),this.Ko=[],this.Xs=0,this.cl()}cl(){this.es=C.now()}Ai(){return C.now()-this.es}onStart(){this.pt.subscribe(s.jt,t=>this.Q(t))}onStop(){this.pt.unsubscribe(s.jt)}onIframeApiError(t){this.Q(t)}Q(t){this.isStarted&&this.Xs<s.un&&(t.relativeTime=this.Ai(),csArray.prototype.push.call(this.Ko,this.fe.anonymize(t)),this.dn(),q.counters.networkRequests.count("collected"))}bl(){this.wl.removeQueryParams(),this.wl.setQueryParams(this.Et.getRequestParameters())}dn(){this.wl.send({errors:this.Ko}),this.Ko=[],this.Xs+=1}}return s.jt="ApiErrorsService",s.un=20,s})(),Xf="api-errors",ha=["api-errors:maskUrl"],Kf=(()=>{class s{constructor(t,e,i,n,a,c,l){this.pt=t,this.fe=e,this.f=i,this.Et=n,this.ut=a,this.E=c,this.Gt=l}init(){let t=this.Gt.create(`${this.f.getTrackerUri()}/${Xf}`,!0);this.Ii=new Yf(this.pt,t,this.Et,this.fe),this.Ii.init(),this.ut.addListener(this.Ii),this.ht()}ht(){this.E.register(ha,t=>{if(!$(t))throw new Error(`Command misuse: ${ha[0]}`);this.fe.addUrlMaskingPattern(t)})}onStartTracking(){this.Ii.start()}onAfterNaturalPageView(){this.Ii.initStates()}onAfterArtificialPageView(){this.Ii.initStates()}onBeforeSessionRenewal(){this.Ii.stop()}onOptout(){this.Ii.stop()}}return s})(),Jf=(()=>{class s{constructor(t){this.o_=t}buildApiErrors(t,e){let i=this.o_.collectDataPoints(t,e);if(i===null)return null;let n=this.a_(t,i);if(e){let a=this.c_(t,i);return{apiError:n,detailedApiError:a}}return{apiError:n}}c_(t,e){let i=this.Yp(t);return e.collectQueryParam&&t.queryParameters&&(i.queryParameters=t.queryParameters),e.collectRequestBody&&t.requestBody&&(i.requestBody=t.requestBody),e.collectResponseBody&&t.responseBody&&(i.responseBody=t.responseBody),Object.keys(e.standardRequestHeaders).length>0&&(i.standardRequestHeaders=e.standardRequestHeaders),Object.keys(e.standardResponseHeaders).length>0&&(i.standardResponseHeaders=e.standardResponseHeaders),Object.keys(e.customRequestHeaders).length>0&&(i.customRequestHeaders=csJSON.stringify(e.customRequestHeaders)),Object.keys(e.customResponseHeaders).length>0&&(i.customResponseHeaders=csJSON.stringify(e.customResponseHeaders)),Object.keys(e.plainCustomRequestHeaders).length>0&&(i.plainCustomRequestHeaders=e.plainCustomRequestHeaders),Object.keys(e.plainCustomResponseHeaders).length>0&&(i.plainCustomResponseHeaders=e.plainCustomResponseHeaders),e.plainResponseBodyAttributes&&Object.keys(e.plainResponseBodyAttributes).length>0&&(i.plainResponseBodyAttributes=e.plainResponseBodyAttributes),e.plainRequestBodyAttributes&&Object.keys(e.plainRequestBodyAttributes).length>0&&(i.plainRequestBodyAttributes=e.plainRequestBodyAttributes),Object.keys(e.responseBodyAttributes).length>0&&(i.responseBodyAttributes=csJSON.stringify(e.responseBodyAttributes)),Object.keys(e.requestBodyAttributes).length>0&&(i.requestBodyAttributes=csJSON.stringify(e.requestBodyAttributes)),i}Yp(t){return{errorType:"apiError",url:t.url,method:t.method,requestTime:t.requestTime,responseTime:t.responseTime,statusCode:t.statusCode,library:t.library}}a_(t,e){let i=this.Yp(t);return e.matchingBodyContents.length>0&&(i.matchingBodyContents=e.matchingBodyContents),Object.keys(e.plainResponseBodyAttributes).length>0&&(i.plainBodyResponseAttributes=e.plainResponseBodyAttributes),i}}return s})(),Qf=(()=>{class s extends kn{constructor(t,e,i){super(),this.Jo=t,this.Qo=e,this.l_=i,this.Tl=0,this.h_=new Jf(i)}subscribe(t,e,i){i!=null&&i.detailedEvent&&(Object.defineProperty(e,"detailedEvent",{value:i.detailedEvent}),this.Tl++),super.subscribe(t,e)}unsubscribe(t){var e;!((e=this.subscriptions[t])===null||e===void 0)&&e.hasOwnProperty("detailedEvent")&&this.Tl--,super.unsubscribe(t)}init(){let t=this.l_.computeApiErrorCollectionOptions();this.Jo.setCollectionOptions(t),this.Jo.onEvent(e=>this.Xp(e)),this.Qo.setCollectionOptions(t),this.Qo.onEvent(e=>this.Xp(e))}onStartTracking(){this.Jo.start(),this.Qo.start()}onStopTracking(){this.Jo.stop(),this.Qo.stop()}Xp(t){let e=this.h_.buildApiErrors(t,this.Tl!==0);if(e)for(let i in this.subscriptions){let n=this.subscriptions[i];n.hasOwnProperty("detailedEvent")?e.detailedApiError&&n(e.detailedApiError):n(e.apiError)}}}return s})(),Zf=(()=>{class s{constructor(t,e,i=!1){this.ft=t,this.et=e,this.En=i}addUrlMaskingPattern(t){this.ft.addUrlMaskingPattern(t)}anonymize(t){let e=this.et.removeQueryString(t.url),i={maskingPatterns:this.ft.getUrlMaskingPatterns(),partialMaskingPatterns:this.ft.getPartialUrlMaskingPatterns(),maskNames:this.En};return{...t,url:this.et.anonymizeUrl(e,i),library:t.library?this.et.anonymizeUrl(t.library,i):void 0}}}return s})(),tg=(()=>{class s{constructor(){this.u_=64e3,this.d_=5e3,this.p_=2e3,this.Kp=8e3,this.bs=!!self.TextEncoder,this.bs&&(this.f_=new TextEncoder)}Sn(t){return this.f_.encode(t).byteLength}Jp(t,e,i){let n=0;t[e]&&(n+=this.Sn(t[e]),n>this.Kp&&(n=0,t[e]=ht.ELLIPSIS)),t[i]&&(n+=this.Sn(csJSON.stringify(t[i])),n>this.Kp&&(t[i]=s.truncatedObjectMarker))}g_(t){t.queryParameters&&this.Sn(t.queryParameters)>this.p_&&(t.queryParameters=ht.ELLIPSIS)}m_(t){t.requestBody&&this.Sn(t.requestBody)>this.u_&&(t.requestBody=ht.ELLIPSIS),t.responseBody&&this.Sn(t.responseBody)>this.d_&&(t.responseBody=ht.ELLIPSIS)}truncate(t){this.bs?(this.g_(t),this.m_(t),this.Jp(t,"customResponseHeaders","plainCustomResponseHeaders"),this.Jp(t,"customRequestHeaders","plainCustomRequestHeaders")):(t.queryParameters="",t.requestBody="",t.responseBody="",t.customResponseHeaders="",t.customRequestHeaders="",t.plainCustomResponseHeaders={},t.plainCustomRequestHeaders={})}}return s.truncatedObjectMarker={[ht.ELLIPSIS]:ht.ELLIPSIS},s})(),eg=(()=>{let s;return function(r){function t(n){let a="[",c="]",l=[];for(let u=0;u<n.length;++u)if(n[u]===a)csArray.prototype.push.call(l,n[u]);else if(n[u]===c)if(csString.prototype.indexOf.call(n,a)>-1)csArray.prototype.pop.call(l);else return!1;return l.length===0}function e(n){if(!n)return!0;if(!t(n))return!1;let a=csString.prototype.split.call(n,/[\[\]]/);return csArray.prototype.every.call(a,c=>{let l=c[0],u=c[c.length-1];if((l==="'"||l==='"')&&l!==u)return!1;let g=csString.prototype.split.call(c,".");return g[0].length===0&&csArray.prototype.shift.call(g),csArray.prototype.every.call(g,d=>{let E=/^\-?\d+$/.exec(d);return E?parseInt(E[0],10)>=0:d==="$"||/\w+/.test(d)})})}r.isValidJSONPath=e;function i(n,a){if(!n)return;let c=csString.prototype.split.call(n,/[\$\[\]]/),l=[];csArray.prototype.forEach.call(c,g=>{if(g[0]==="'"||g[0]==='"'){csArray.prototype.push.call(l,csString.prototype.substring.call(g,1,g.length-1));return}csArray.prototype.push.call(l,...csArray.prototype.filter.call(csString.prototype.split.call(g,"."),d=>d.length>0))}),l[0]==="$"&&csArray.prototype.shift.call(l);let u=a;for(let g of l)if(u[g]!==void 0)u=u[g];else return;return u}r.getJSONPathValue=i}(s||(s={})),s})(),sg=(()=>{class s{constructor(){this.y_=new Set(["age","cache-control","clear-site-data","expires","pragma","warning","downlink","ect","rtt","last-modified","connection","keep-alive","accept","accept-encoding","accept-language","expect","access-control-allow-origin","access-control-allow-credentials","access-control-allow-headers","access-control-allow-methods","access-control-expose-headers","access-control-max-age","access-control-request-headers","access-control-request-method","origin","timing-allow-origin","content-length","content-type","content-encoding","content-language","via","host","referrer-policy","user-agent","allow","server","accept-ranges","range","if-range","content-range","cross-origin-embedder-policy","cross-origin-opener-policy","cross-origin-resource-policy","content-security-policy","content-security-policy-report-only","expect-ct","feature-policy","strict-transport-security","upgrade-insecure-requests","x-content-type-options","x-download-options","x-frame-options","x-permitted-cross-domain-policies","x-powered-by","x-xss-protection","sec-fetch-site","sec-fetch-mode","sec-fetch-user","sec-fetch-dest"])}isValidStandardHeader(t){return this.y_.has(t)}}return s})(),xc=(()=>{class s{constructor(){this.E_=64e3,this.S_=100,this.j={collectQueryParam:!1,collectRequestBody:!1,collectResponseBody:!1,matchingBodyContents:[],plainResponseBodyAttributes:{},plainRequestBodyAttributes:{},requestBodyAttributes:{},responseBodyAttributes:{},standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{},plainCustomRequestHeaders:{},plainCustomResponseHeaders:{}},this.Qp=new sg}v_(t){return t.length<=this.E_}__(t){let e=t["content-type"];return e!==void 0&&(Tt(e,"application/json")||Tt(e,"application/graphql"))}w_(t,e){return t&&this.v_(t)&&this.__(e)}Zo(t,e,i,n){let a=n==="request"?this.b_:this.T_;if(a!==void 0||this.w_(e,i)){if(a===void 0)try{a=csJSON.parse(e),n==="request"?this.b_=a:this.T_=a}catch{return}let c=eg.getJSONPathValue(t,a);if(c!==void 0&&(c===null||!Os(c))){let l=$(c)?c:csJSON.stringify(c);return ht.truncate(l,this.S_,ht.ELLIPSIS)}}}isBodyAttributeValueFound(t,e){let i,n;return(e.type==="request-response"||e.type==="response")&&(i=this.Zo(e.path,t.responseBody,t.responseHeaders,"response")),(e.type==="request-response"||e.type==="request")&&(n=this.Zo(e.path,t.requestBody,t.requestHeaders,"request")),J(i)||J(n)}collectBodyAttribute(t,e,i){let n;(e.type==="request-response"||e.type==="response")&&(n=this.Zo(e.path,t.responseBody,t.responseHeaders,"response"),n&&(e.encrypted?this.j.responseBodyAttributes[e.path]=n:(n=i(n),this.j.plainResponseBodyAttributes[e.path]=n))),(e.type==="request-response"||e.type==="request")&&(n=this.Zo(e.path,t.requestBody,t.requestHeaders,"request"),n&&(e.encrypted?n&&(this.j.requestBodyAttributes[e.path]=n):(n=i(n),this.j.plainRequestBodyAttributes[e.path]=n)))}isBodyContentMatching(t,e){return t.responseBody?!!new csRegExp(e,"i").test(t.responseBody):!1}collectBodyContent(t){csArray.prototype.indexOf.call(this.j.matchingBodyContents,t)===-1&&csArray.prototype.push.call(this.j.matchingBodyContents,t)}collectCustomHeaders(t,e,i){let n=csString.prototype.toLocaleLowerCase.call(e.headerName);t.responseHeaders[n]&&(e.type==="request-response"||e.type==="response")&&(e.encrypted?this.j.customResponseHeaders[n]=t.responseHeaders[n]:this.j.plainCustomResponseHeaders[n]=i(t.responseHeaders[n])),t.requestHeaders[n]&&(e.type==="request-response"||e.type==="request")&&(e.encrypted?this.j.customRequestHeaders[n]=t.requestHeaders[n]:this.j.plainCustomRequestHeaders[n]=i(t.requestHeaders[n]))}collectStandardHeaders(t){if(!(Object.keys(this.j.standardRequestHeaders).length>0||Object.keys(this.j.standardResponseHeaders).length>0)){for(let[e,i]of Object.entries(t.requestHeaders))this.Qp.isValidStandardHeader(e)&&(this.j.standardRequestHeaders[e]=i);for(let[e,i]of Object.entries(t.responseHeaders))this.Qp.isValidStandardHeader(e)&&(this.j.standardResponseHeaders[e]=i)}}setCollectQueryParam(t){t&&(this.j.collectQueryParam=!0)}setCollectResponseBody(t){t&&(this.j.collectResponseBody=!0)}setCollectRequestBody(t){t&&(this.j.collectRequestBody=!0)}getCollectedDataPoints(){return this.j}}return s})(),we=(()=>{let s;return function(r){r.CONTENTSQUARE="contentsquare.net",r.CLICKTALE="clicktale.net",r.FAKE_TRACKER="fake-tracker.content-square.fr"}(s||(s={})),s})(),Lc=(()=>{class s{computeApiErrorCollectionOptions(){let t=new Set,e=[];if(this.rules)for(let n of this.rules)n.statusCode!==void 0&&t.add(n.statusCode),n.url!==void 0&&csArray.prototype.indexOf.call(e,n.url)===-1&&csArray.prototype.push.call(e,n.url);let i=[we.CONTENTSQUARE,we.CLICKTALE];return csArray.prototype.push.call(i,we.FAKE_TRACKER),{statusCodes:t,urls:e,excludedDomains:i}}}return s})(),ig=(()=>{class s extends Lc{constructor(t,e){super(),this.It=t,this.O=e,this.rules=t.collectionRules}collectDataPoints(t,e){this.j=new xc;let i=!1;if(this.It.collectionRules)for(let n of this.It.collectionRules)this.A_(n,t)&&this.R_(n,t)&&this.C_(n,t)&&(i=!0,this.I_(t,n,e));return i||(i=this.P_(t)),i&&e&&this.It.collectStandardHeaders&&this.j.collectStandardHeaders(t),i?this.j.getCollectedDataPoints():null}computeApiErrorCollectionOptions(){let t=this.It.collectionRules||[],e=new Set,i=[];for(let a of t)a.statusCode!==void 0&&e.add(a.statusCode),a.url!==void 0&&csArray.prototype.indexOf.call(i,a.url)===-1&&csArray.prototype.push.call(i,a.url);let n=[we.CONTENTSQUARE,we.CLICKTALE];return csArray.prototype.push.call(n,we.FAKE_TRACKER),{statusCodes:e,urls:i,excludedDomains:n}}A_(t,e){return(!t.statusCode&&e.statusCode>=400||t.statusCode!==void 0&&t.statusCode===e.statusCode)&&(!t.url||csString.prototype.indexOf.call(e.url,t.url)!==-1)}R_(t,e){return t.bodyContent?this.j.isBodyContentMatching(e,t.bodyContent):!0}C_(t,e){let i=csArray.prototype.find.call(t.bodyAttributePaths,n=>n.primary);return i===void 0?!0:this.j.isBodyAttributeValueFound(e,i)}P_(t){return t.statusCode>=400}I_(t,e,i){e.bodyContent&&this.j.collectBodyContent(e.bodyContent);let n=ve(e.bodyAttributePaths,a=>a.primary===1);if(n&&this.j.collectBodyAttribute(t,n,a=>this.O.anonymizePII(a)),i){this.j.setCollectQueryParam(e.collectQueryParam),this.j.setCollectResponseBody(e.collectResponseBody),this.j.setCollectRequestBody(e.collectRequestBody);for(let c of e.customHeaders)this.j.collectCustomHeaders(t,c,l=>this.O.anonymizePII(l));let a=vn(e.bodyAttributePaths,c=>!c.primary);for(let c of a)this.j.collectBodyAttribute(t,c,l=>this.O.anonymizePII(l))}}}return s})(),rg=(()=>{class s extends Lc{constructor(t,e){super(),this.It=t,this.O=e,this.rules=t.configurableApiErrorRules}collectDataPoints(t,e){this.j=new xc;let i=this.O_(t,this.It.configurableApiErrorRules);return i.isMatching?(i.matchingBodyContents.length>0&&this.j.collectBodyContent(i.matchingBodyContents[0]),e&&this.N_(t),this.j.getCollectedDataPoints()):null}computeApiErrorCollectionOptions(){let t=this.It.configurableApiErrorRules||[],e=new Set,i=[];for(let a of t)a.statusCode!==void 0&&e.add(a.statusCode),a.url!==void 0&&csArray.prototype.indexOf.call(i,a.url)===-1&&csArray.prototype.push.call(i,a.url);let n=[we.CONTENTSQUARE,we.CLICKTALE];return csArray.prototype.push.call(n,we.FAKE_TRACKER),{statusCodes:e,urls:i,excludedDomains:n}}O_(t,e){if(t.statusCode>=400)return{isMatching:!0,matchingBodyContents:[]};if(e){for(let i of e)if(this.M_(t,i))return{isMatching:!0,matchingBodyContents:i.bodyContent?[i.bodyContent]:[]}}return{isMatching:!1,matchingBodyContents:[]}}M_(t,e){return!!(t.statusCode===e.statusCode&&csString.prototype.indexOf.call(t.url,e.url)!==-1&&(!e.bodyContent||this.j.isBodyContentMatching(t,e.bodyContent)))}N_(t){this.It.collectStandardHeaders&&this.j.collectStandardHeaders(t),this.It.validCustomHeaders&&this.Zp(t,this.It.validCustomHeaders,1),this.It.plainCustomHeaders&&this.Zp(t,this.It.plainCustomHeaders,0),this.Yc(t.url,this.It.validUrls)&&(this.It.collectQueryParam&&this.j.setCollectQueryParam(Number(this.It.collectQueryParam)),this.It.collectResponseBody&&this.j.setCollectResponseBody(Number(this.It.collectResponseBody)),this.It.collectRequestBody&&this.j.setCollectRequestBody(Number(this.It.collectRequestBody)))}Zp(t,e,i){for(let n of e)this.j.collectCustomHeaders(t,{headerName:n,encrypted:i,type:"request-response"},a=>this.O.anonymizePII(a))}Yc(t,e){return e?csArray.prototype.some.call(e,i=>csString.prototype.indexOf.call(t,i)!==-1):!1}}return s})();var ng=["trackError"];var og=20,ag="Custom Error:",cg="https://cserror.com/texterror.js",lg=(()=>{class s extends Pt{constructor(t,e,i,n,a,c){super(),this.As=t,this.Ol=e,this.Et=i,this.ge=n,this.Ks=a,this.w=c,this.sa=[],this.Mi=0,this.Oi=[]}initStates(){this.es=C.now(),this.Ol.removeQueryParams(),this.Ol.setQueryParams(this.Et.getRequestParameters()),this.sa=[],this.Mi=0}onStart(){this.As.subscribe(s.jt,t=>this.Q(t)),this.Pl()}onStop(){this.As.unsubscribe(s.jt)}onIframeJavascriptError(t){this.Q(t)}trackCustomError(t){let e={errorType:"jsError",message:`${ag} ${t}`,lineno:1,colno:1,filename:cg};this._n(e)}_n(t){if(this.isStarted){let e=this.Q(t);e&&this.Ks.emitCustomJavaScriptErrorEvent(e)}else csArray.prototype.push.call(this.Oi,t)}Pl(){this.isStarted&&(csArray.prototype.forEach.call(this.Oi,t=>this._n(t)),this.Oi=[])}Q(t){if(this.isStarted&&this.Mi<og){let e={...t,pageUrl:this.w.getAnonymizedUrl(),rt:this.Ai()};return this.ge.anonymize(e),csArray.prototype.push.call(this.sa,e),this.dn(),e}return null}Ai(){return C.now()-this.es}dn(){this.Ol.send({errors:this.sa}),this.sa=[],this.Mi+=1}}return s.jt="JavaScriptErrorsService",s})(),hg="errors",ug=(()=>{class s{constructor(t,e,i,n,a,c,l,u,g){this.As=t,this.ge=e,this.f=i,this.Et=n,this.ut=a,this.E=c,this.Ks=l,this.w=u,this.Gt=g}init(){let t=this.Gt.create(`${this.f.getTrackerUri()}/${hg}`,!0);this.ki=new lg(this.As,t,this.Et,this.ge,this.Ks,this.w),this.ut.addListener(this.ki),this.ht()}ht(){this.f.jsCustomErrorsEnabled&&!this.f.customErrors.enabled&&this.E.register(ng,t=>{this.ki.trackCustomError(t)})}onStartTracking(){this.ki.start()}onAfterNaturalPageView(){this.ki.initStates()}onAfterArtificialPageView(){this.ki.initStates()}onBeforeSessionRenewal(){this.ki.stop()}onOptout(){this.ki.stop()}}return s})(),Vc=(()=>{class s{constructor(t){this.A=t,this.Js=!1,this.zt={boundElement:et,type:"error",listener:e=>this.L_(e)}}observe(){Ct(this.zt,this.Js)}disconnect(){It(this.zt,this.Js)}L_(t){this.A(t)}}return s})(),dg=(()=>{class s extends kn{constructor(){super(),this.W=new Vc(t=>this.errorListener(t))}onStartTracking(){this.W.observe()}onStopTracking(){this.W.disconnect()}errorListener(t){let e=this.V_(t);for(let i in this.subscriptions){let n=this.subscriptions[i];n(e)}}U_(t){return t=t!=null?t:"[NO ERROR MESSAGE]",ht.truncate(t,s.Nl,ht.ELLIPSIS)}j_(t){return!t||Wt(t)?"":ht.truncate(t,s.Ml,ht.ELLIPSIS)}V_(t){return{errorType:"jsError",message:this.U_(t.message),filename:this.j_(t.filename),lineno:t.lineno,colno:t.colno}}}return s.Nl=1024,s.Ml=150,H([x("Event handler type: error")],s.prototype,"errorListener",null),s})(),pg="CS_ANONYMIZED_VALUE",fg=(()=>{class s{constructor(t,e){this.O=t,this.w=e}anonymize(t){return $(t.message)&&(t.message=this.H_(t.message),t.message=this.O.anonymizePII(t.message)),$(t.filename)&&(t.filename=this.w.computeOverriddenUrl(t.filename)),t}H_(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,`value='${pg}'`)}}return s})(),gg=512,mg=255,kr=(()=>{class s{constructor(t,e){this.key=csString.prototype.slice.call(t,0,gg),this.value=$(e)?csString.prototype.slice.call(e,0,mg):e}static isKeyValid(t){return $(t)}static isValueValid(t){return $(t)||Ps(t)}}return s})(),yg=(()=>{class s extends Pt{constructor(t,e){super(),this.qt=t,this.O=e,this.kl=[]}onStart(){csArray.prototype.forEach.call(this.kl,t=>this.ef(t.key,t.value)),this.kl=[]}onStop(){}ef(t,e){let i=this.O.anonymizePII(t),n=Ps(e)?e:this.O.anonymizePII(e);this.qt.add(new kr(i,n))}trackDynamicVariable(t,e){if(kr.isKeyValid(t)&&kr.isValueValid(e)){if(!this.isStarted){csArray.prototype.push.call(this.kl,{key:t,value:e});return}this.ef(t,e)}else throw new Error(`Command misuse: ${Uc[0]}`)}}return s})(),Eg=(()=>{class s{constructor(t){this.ye=t,this.qt=[]}add(t){csArray.prototype.push.call(this.qt,t),this.setBatchReadyCall()}clear(){this.qt=[]}onBatchReady(t){this.B_=t}getRequestParameters(){let t={};for(let e of this.qt)t[e.key]=e.value;return{dv:this.ye.compressSync(csJSON.stringify(t),"base64"),ct:this.ye.algorithm}}setBatchReadyCall(){this.B_()}}return H([Dn({wait:0,mode:"trailing"}),x("dynamicVariablesBatchReady")],s.prototype,"setBatchReadyCall",null),s})(),Sg="dvar",Uc=["trackDynamicVariable"],vg=(()=>{class s{constructor(t,e,i,n,a,c){this.E=t,this.R=e,this.f=i,this.Ue=n,this.ye=a,this.O=c,this.ps=new ks(this.f.getTrackerUri(),Sg),this.qt=new Eg(this.ye),this.Di=new yg(this.qt,this.O)}init(){this.ps.setRequestParametersProviders(this.Ue,this.qt),this.R.setDynamicVariablesService(this.Di),this.qt.onBatchReady(()=>this.ps.send()),this.ps.after(()=>this.qt.clear()),this.E.register(Uc,({key:t,value:e}={})=>{this.Di.trackDynamicVariable(t,e)})}onStartTracking(){this.Di.start()}}return s})(),ua=(()=>{class s{constructor(t,e){this.id=t,this.revenue=e}static from(t){let e=new s(t.id,parseFloat(t.revenue));return isNaN(parseFloat(t.tax))||(e.tax=parseFloat(t.tax)),isNaN(parseFloat(t.shipping))||(e.shipping=parseFloat(t.shipping)),$(t.currency)&&t.currency.length<=10&&(e.currency=t.currency),e}hasValidRevenue(){return!isNaN(this.revenue)&&this.revenue>=0}static isValid(t){return Mt(t)&&Xt(t.revenue)&&$(t.currency)&&t.currency.length<=10&&(!Mt(t.id)||$(t.id))}}return s})(),jc=100,_g=100,wg=(()=>{class s{constructor(t,e,i,n){this.id=t,this.name=e,this.price=i,this.quantity=n}static from(t){if(!s.Bc(t))return null;let e=new s(t.id,t.name,parseFloat(t.price),parseInt(t.quantity,10));return J(t.sku)&&(e.sku=t.sku),J(t.category)&&(e.category=t.category),J(t.merchant)&&t.merchant.length>0&&(e.merchant=t.merchant.slice(0,jc)),e}static Bc(t){return Mt(t)&&$(t.id)&&$(t.name)&&Xt(parseFloat(t.price))&&Ps(parseInt(t.quantity,10))&&(!J(t.sku)||$(t.sku))&&(!J(t.category)||$(t.category))&&(!J(t.merchant)||$(t.merchant))}}return s})(),bg=(()=>{class s extends Pt{constructor(t,e,i){super(),this.O=t,this.sf=e,this.Y=i,this.Dl=[],this.clear()}onStart(){csArray.prototype.forEach.call(this.Dl,t=>{this.Ee=t.transaction,this.wn=t.transactionItems,this.sendTransaction()}),this.Dl=[]}onStop(){}addTransaction(t){let e=this.O.anonymizeFields(t,["id"]);this.Ee=ua.from(e)}getTransaction(){return this.Ee}sendTransaction(){if(!this.isStarted){csArray.prototype.push.call(this.Dl,{transaction:this.Ee,transactionItems:[...this.wn]}),this.clear();return}if(!(this.sf===null||this.Y===null)&&(this.Y.refreshSession(),!!this.Y.isSessionValid())){if(!this.Ee.hasValidRevenue()){j.warn("Transaction Service: unable to send transaction with invalid parameters");return}this.sf.send()}}addItem(t){if(Xe(t))throw new Error(`Command misuse: ${Hc[1]}`);let e=this.O.anonymizeFields(t,["id","name","sku","category"]),i=wg.from(e);i!==null&&csArray.prototype.push.call(this.wn,i)}getItems(){return this.wn}clear(){this.Ee=ua.from({revenue:NaN}),this.wn=[]}getRequestParameters(){let t={id:this.Ee.id?`${this.Ee.id}`:"",revenue:`${this.Ee.revenue}`};return J(this.Ee.tax)&&(t.tax=`${this.Ee.tax}`),J(this.Ee.shipping)&&(t.shipping=`${this.Ee.shipping}`),J(this.Ee.currency)&&(t.cu=`${this.Ee.currency}`),t.items=window.csJSON.stringify(this.wn),t}}return s})(),Tg=(()=>{class s extends Pt{constructor(t,e){super(),this.F_=t,this.Y=e,this.Me=null,this.xl=[]}onStart(){csArray.prototype.forEach.call(this.xl,t=>{this.Me=t,this.rf()}),this.xl=[]}onStop(){}addToCart(t){let e={};$(t.sku)&&(e.sku=csString.prototype.slice.call(t.sku,0,_g)),$(t.merchant)&&(e.merchant=csString.prototype.slice.call(t.merchant,0,jc)),(e.sku||e.merchant)&&(this.Me=e,this.rf())}getCartItem(){return this.Me}rf(){if(!this.isStarted&&this.Me!==null){csArray.prototype.push.call(this.xl,this.Me),this.clear();return}this.Y.refreshSession(),this.Y.isSessionValid()&&this.F_.send()}clear(){this.Me=null}getRequestParameters(){if(!this.Me)return{};let t={};return $(this.Me.sku)&&this.Me.sku.length>0&&(t.sku=this.Me.sku),$(this.Me.merchant)&&this.Me.merchant.length>0&&(t.me=this.Me.merchant),t}}return s})(),Ag=["ecommerce:addToCart","ec:cart:add"],Rg=["ecommerce:addTransaction","ec:transaction:create"],Hc=["ecommerce:addItem","ec:transaction:items:add"],Cg=["ecommerce:send","ec:transaction:send"],Ig=(()=>{class s{constructor(t,e,i,n,a,c,l){this.f=t,this.Et=e,this.N=i,this.E=n,this.O=a,this.Y=c,this.w=l}init(){let t=new ks(this.f.getTrackerUri(),"transaction"),e=new ks(this.f.getTrackerUri(),"addtocart");this.is=new bg(this.O,t,this.Y),this.ia=new Tg(e,this.Y);let i=new ci(this.Et,this.N,this.w,this.is);t.setRequestParametersProviders(i),t.after(()=>{this.is.clear()});let n=new ci(this.Et,this.N,this.w,this.ia);e.setRequestParametersProviders(n),e.after(()=>{this.ia.clear()}),this.E.register(Rg,a=>{this.is.addTransaction(a)}),this.E.register(Hc,a=>this.is.addItem(a)),this.E.register(Cg,()=>this.is.sendTransaction()),this.E.register(Ag,a=>{this.ia.addToCart(a)})}onStartTracking(){this.is.start(),this.ia.start()}}return s})();var Pg=2,jn=(()=>{class s{constructor(t){this.K_=t,this.ra=0}addString(t){this.ra+=t.length*Pg}addArrayBuffer(t){this.ra+=t.byteLength}isThresholdReached(){return this.ra>this.K_}reset(){this.ra=0}}return s})();var Og=()=>(s,r,t)=>{t.value=Ng(t.value)};function Ng(s){let r=csSymbol("oncePerTickSymbol"),t=null,e={},i=function(){var n;let a=(n=this)!==null&&n!==void 0?n:e;if(t=arguments,a[r])return;a[r]=!0,Sn(()=>{a[r]=!1,s.apply(a,t)})};return i.oncePerTickSymbol=r,i}Og.isScheduled=(s,r)=>{let t=r.oncePerTickSymbol;return s[t]};var xi=(()=>{let s;return function(r){r[r.NOT_NEEDED=1]="NOT_NEEDED",r[r.NOT_EXPRESSED=2]="NOT_EXPRESSED",r[r.WITHDRAWN=3]="WITHDRAWN",r[r.GRANTED=4]="GRANTED"}(s||(s={})),s})(),qe=(()=>{let s;return function(r){function t(n){return n.replayConsentRequiredForSession}r.isReplayConsentNeeded=t;function e(n){return n.collectState===V.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED||n.collectState===V.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingBlockedByConsent=e;function i(n){return n.collectState===V.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingWithDrawn=i}(s||(s={})),s})(),Mg=(()=>{class s{constructor(t,e,i,n){this.N=t,this.R=e,this.f=i,this.cs=n,this.vf=!1}isNaturalPageViewSent(){return this.vf}setNaturalPageViewSent(t){this.vf=t}getTrackingContext(){let t=this.R.getSession();if(!t)return null;let e=this.getSessionKey();if(!e)return null;let i=this.f.projectId,n=this.f.uxaDomain,a=t.pageNumber,c=this.cs.getPageViewType(),l=this.R.isReplayRecorded(),u=this.Ow(t);return{projectId:i,sessionKey:e,pageNumber:a,pageViewType:c,isRecording:l,uxaDomain:n,recordingConsentState:u,...this.f.smbConfig}}getSessionKey(){let t=this.N.getVisitor();return t?`${t.id}.${t.visitsCount}`:null}Ow(t){return qe.isReplayConsentNeeded(this.f)?t.collectState===V.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED?xi.NOT_EXPRESSED:t.collectState===V.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?xi.WITHDRAWN:xi.GRANTED:xi.NOT_NEEDED}}return s})(),kg=(()=>{class s{constructor(t){this.Rt=t,this.ie=[]}handleCommand(t){if(Xe(t)&&(this.Pn(t),this.Rt.isNaturalPageViewSent())){let e=this.Rt.getTrackingContext();e!==null&&this.Ht(t,e)}}Pn(t){csArray.prototype.push.call(this.ie,t)}executeRegisteredCallbacks(){let t=this.Rt.getTrackingContext();t!==null&&csArray.prototype.map.call(this.ie,e=>this.Ht(e,t))}Ht(t,e){csSetTimeout(()=>{t(e)})}}return s})(),Dg=(()=>{class s{constructor(t){this.Rt=t,this.xi=[]}handleCommand(t){if(this.Rt.isNaturalPageViewSent())return this.Nw(t);this.On(t)}Nw(t){let e=this.Rt.getSessionKey();return this._f(t)&&e!==null&&this.Ht(t.callback,e),e}On(t){this._f(t)&&csArray.prototype.push.call(this.xi,t.callback)}flushPendingCallbacks(){let t=this.Rt.getSessionKey();t!==null&&csArray.prototype.forEach.call(this.xi,e=>{this.Ht(e,t)}),this.xi=[]}_f(t){return t&&typeof t.callback=="function"}Ht(t,e){csSetTimeout(()=>{t(e)})}}return s})(),xg=(()=>{class s{constructor(t,e){this.tt=t,this.Rt=e}onTrackingContextRequestCallback(t){let e=this.Rt.getTrackingContext();e!==null&&this.tt.sendToChildren(K.TrackingContextResultMessage,{...t,trackingContext:e})}onIframeIntegrationCallback(t){if(!this.Rt.isNaturalPageViewSent())return;let e=this.Rt.getTrackingContext();e!==null&&(t.trackingContext=e,this.tt.sendToChildren(K.IntegrationCallback,t))}sendAfterPageViewCallbackToChildren(){let t=this.Rt.getTrackingContext();if(t===null)return;let e={trackingContext:t,initiator:vd.AfterPageView};this.tt.sendToChildren(K.IntegrationCallback,e)}}return s})();function Lg(s,r){let{isRecording:t,pageNumber:e,projectId:i,siteId:n,uxaDomain:a,csLiteDomain:c}=s,l=/^(.+)\.(\d+)$/.exec(s.sessionKey),u;if(t&&l){let[,g,d]=l;n?u=`${c}/sites/${n}/player?uu=${g}&sn=${d}&pn=${e}`:u=`${a}/quick-playback/index.html?pid=${i}&uu=${g}&sn=${d}&pvid=${e}&recordingType=cs`,r.withTimestamp&&(u+=`&t=${C.now()-r.recordingStartTimestamp}`)}return{replayLink:u,isRecording:t}}var Vg=(()=>{class s{constructor(t){this.Rt=t}handleCommand(t,e){Os(t)&&Xe(e)&&this.Ht(t,e)}Ht(t,e){csSetTimeout(()=>{let i=this.Rt.getTrackingContext();if(i){let n=Lg(i,t);e(n)}})}}return s})(),Ug=(()=>{class s{constructor(){this.ie=new Set}handleCommand(t,e){return!Xe(t)||this.ie.has(t)?null:(this.ie.add(t),e&&(this.De=e,this.wf(t,e)),()=>this.ie.delete(t))}executeCallbacks(t){this.Mw(t)&&(this.De=t,this.ie.forEach(e=>this.wf(e,t)))}wf(t,e){csSetTimeout(()=>{try{t(e)}catch{}})}Mw(t){let{isRecording:e,recordingStartTimestamp:i,etrState:n,etrStatus:a,collectState:c}=t;return this.De&&(this.De.isRecording!==e||this.De.recordingStartTimestamp!==i||this.De.etrState!==n||this.De.etrStatus!==a||this.De.collectState!==c)}}return s})(),jg=["afterPageView"],Hg=["getSessionKey"],Bg=["onRecordingContextChange","onRecordingStateChange"],Fg=["replay:link:generate"],$g=(()=>{class s{constructor(t,e,i,n,a,c,l,u){this.N=t,this.R=e,this.E=i,this.ut=n,this.tt=a,this.f=c,this.cs=l,this.Bs=u}init(){this.Rt=new Mg(this.N,this.R,this.f,this.cs),this.Hl=new kg(this.Rt),this.bf=new Dg(this.Rt),this.Nn=new Ug,this.kw=new Vg(this.Rt),this.Bl=new xg(this.tt,this.Rt),this.ut.addListener(this.Bl),this.E.register(Hg,t=>this.bf.handleCommand(t)),this.E.register(jg,t=>this.Hl.handleCommand(t)),this.E.register(Bg,t=>this.Nn.handleCommand(t,this.Bs.getRecordingContext())),this.E.register(Fg,(t,e)=>{this.gr&&this.kw.handleCommand({...t,recordingStartTimestamp:this.Bs.getRecordingContext().recordingStartTimestamp},e)})}onAfterNaturalPageView(){this.Rt.setNaturalPageViewSent(!0),this.bf.flushPendingCallbacks(),this.Hl.executeRegisteredCallbacks(),this.Bl.sendAfterPageViewCallbackToChildren()}onAfterArtificialPageView(){this.Hl.executeRegisteredCallbacks(),this.Bl.sendAfterPageViewCallbackToChildren()}onCollectStateChange(){this.executeRecordingContextChangeCallbacks()}onRecordingContextChange(){this.executeRecordingContextChangeCallbacks()}executeRecordingContextChangeCallbacks(){this.Nn.executeCallbacks(this.Bs.getRecordingContext())}setRecordingService(t){this.gr=t}}return H([Dn({wait:0,mode:"trailing"})],s.prototype,"executeRecordingContextChangeCallbacks",null),s})(),zg=(()=>{class s{constructor(t){this.E=t}init(){this.Tf(s.Dw,sc),this.Tf(s.xw,ec)}Tf(t,e){this.E.register([t],(i,n)=>{!$(i)||!($(n)||Ke(n))||j.error(n,`${e}${i}`)})}}return s.xw="logSnippetError",s.Dw="logImplementationSnippetError",s})(),Gg="@ETP@",da="@user-identifier@",qg=(()=>{class s extends Pt{constructor(t,e,i,n){super(),this.f=t,this.Lw=e,this.ye=i,this.K=n,this.Fl=[],this.Li=[]}onStart(){csArray.prototype.forEach.call(this.Fl,t=>this.Af(t)),this.Fl=[],csArray.prototype.forEach.call(this.Li,t=>this.Rf(t)),this.Li=[]}onStop(){}Af(t){this.Vw(t)?Qs.isSupported()&&this.Uw(t):this.jw(t)}trackPageEvent(t){if(!s.Cf(t))throw new Error(`Command misuse: ${Bc[0]}`);this.isStarted?this.Af(t):csArray.prototype.push.call(this.Fl,t)}Vw(t){return Ji(t,da)}async Uw(t){if(!this.f.customHashIdEnabled)return;let e=csString.prototype.slice.call(t,da.length);if(e.length>Qs.MAX_DIGEST_INPUT_SIZE){j.warn("UserIdentifier event: invalid user identifier");return}let i=await Qs.digest(e);i?(this.mr={eventName:i,isETR:!1,isCustomHashId:!0},this.pa()):j.warn("Page event: unable to compute customHashId"),this.f.encryptionEnabled&&this.K.emitUserIdentifierEvent(e)}jw(t){this.K.emitPageEvent(t),this.mr={eventName:t,isETR:!1,isCustomHashId:!1},this.pa(),this.f.tagDeploymentMode===us.LoadClicktalePtc&&qo.sendPageEvent(t)}Rf(t){this.f.malkaEtrEnabled?this.Hw(t):this.Bw(t)}trackEventTriggerRecording(t){if(!s.Cf(t))throw new Error(`Command misuse: ${Fc[0]}`);this.isStarted?this.Rf(t):csArray.prototype.push.call(this.Li,t)}Hw(t){Ji(t,Gg)?this.K.emitEventTriggerRecording(t,Ye.ETR_PAGE):this.K.emitEventTriggerRecording(t,Ye.ETR_SESSION),this.mr={eventName:t,isETR:!0,isCustomHashId:!1},this.pa()}Bw(t){Ip(this.f)&&(this.K.emitEventTriggerRecording(t,Ye.ETR_LEGACY),this.mr={eventName:t,isETR:!0,isCustomHashId:!1},this.pa(),this.f.tagDeploymentMode===us.LoadClicktalePtc&&qo.sendEventTriggerRecording(t))}getRequestParameters(){return{value:this.ye.compressSync(this.mr.eventName,"base64"),ct:this.ye.algorithm,isETR:`${this.mr.isETR}`,isCustomHashId:`${this.mr.isCustomHashId}`}}pa(){this.Lw.send()}static Cf(t){return $(t)&&!!csString.prototype.trim.call(t)}}return s})(),Bc=["trackPageEvent"],Fc=["trackEventTriggerRecording"],Wg=(()=>{class s{constructor(t,e,i,n,a){this.f=t,this.E=e,this.ye=i,this.Ue=n,this.K=a}init(){let t=new ks(this.f.getTrackerUri(),"pageEvent");this.fa=new qg(this.f,t,this.ye,this.K),t.setRequestParametersProviders(this.fa,this.Ue),this.E.register(Bc,e=>{this.fa.trackPageEvent(e)}),this.E.register(Fc,e=>{this.fa.trackEventTriggerRecording(e)})}onStartTracking(){this.fa.start()}}return s})(),Yg=["hidePageTitle"],Xg=["resetHidePageTitle"],Kg="onNextPageviewOnly",Jg=(()=>{class s{constructor(t,e){this.ve=t,this.E=e}init(){this.E.register(Yg,t=>{let e=t===Kg;this.ve.setHidePageTitle(e)}),this.E.register(Xg,()=>this.ve.resetHidePageTitle())}onAfterNaturalPageView(){this.ve.updateStateOnAfterPageview()}onAfterArtificialPageView(){this.ve.updateStateOnAfterPageview()}}return s})(),Qg=(()=>{class s{constructor(){this.If=255,this.Fw="****",this.$w="data-cs-hide-title",this.zw="data-heap-redact-text",this.ga={value:!1,onNextPageviewOnly:!1}}getRequestParameters(){return{t:this.getPageTitle()}}getPageTitle(){return this.ga.value||this.Gw()?this.Fw:this.qw(window.document.title)}setHidePageTitle(t){this.ga={value:!0,onNextPageviewOnly:t}}resetHidePageTitle(){this.ga={value:!1,onNextPageviewOnly:!1}}updateStateOnAfterPageview(){this.ga.onNextPageviewOnly&&this.resetHidePageTitle()}Gw(){let t=window.csquerySelector[document.nodeType].call(document,"head > title");return t===null?!1:t.getAttribute(this.$w)!==null||t.getAttribute(this.zw)!==null}qw(t){return t.length>this.If?csString.prototype.substring.call(t,0,this.If):t}}return s})(),$i=(()=>{let s;return function(r){r.Artificial="a",r.Renewal="r",r.Natural="n"}(s||(s={})),s})(),Zg=(()=>{class s{constructor(){this.$l=$i.Natural}setPageViewType(t){this.$l=t}getPageViewType(){return this.$l}getRequestParameters(){return{pvt:this.$l}}}return s})();var tm=(()=>{class s extends Pt{constructor(t,e,i,n,a){super(),this.S=t,this.K=e,this.zl=i,this.w=n,this.cs=a}init(){this.Ww()}onStart(t){t?this.Yw():this.Xw()}onStop(){}triggerArtificialPageView(t,e){this.isStarted?this.Pf(t,e):Mt(t)&&this.w.overridePath(t,e),this.isStarted||(this.K.emitTargetingRulesArtificialPageview(this.w.getUrl()),this.w.cleanupOverrideLifespan())}Xw(){this.cs.setPageViewType($i.Natural),this.S.emitBeforeNaturalPageView(this.w.getAnonymizedUrl()),this.zl.send(),this.w.cleanupOverrideLifespan(),this.S.emitAfterNaturalPageView()}Yw(){this.cs.setPageViewType($i.Renewal),this.S.emitBeforeNaturalPageView(this.w.getAnonymizedUrl()),this.zl.send(),this.S.emitAfterNaturalPageView()}Pf(t,e){let i=this.w.getAnonymizedUrl();this.cs.setPageViewType($i.Artificial),this.S.emitArtificialPageViewEnd(),Mt(t)&&this.w.overridePath(t,e),this.S.emitBeforeArtificialPageView(i,this.w.getAnonymizedUrl()),this.zl.send(),this.w.cleanupOverrideLifespan(),this.S.emitAfterArtificialPageView()}Ww(){window.addEventListener("pageshow",t=>{this.isStarted&&t.persisted&&this.Pf()})}}return s})(),em=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function sm(){return{la:em}}var im=99999,rm=(()=>{class s{constructor(t){this.R=t,this.Kw=this.Jw()&&window.CSCurrentScript}Qw(){let t=window.CSCurrentScript;if(!t)return null;let e=window.performance.getEntriesByName(t.src,"resource")[0];return!e||this.Zw(e)?null:Math.round(e.responseEnd-e.fetchStart)}Zw(t){let e=t.transferSize;return e!==void 0?e===0||e===300||e<t.encodedBodySize:t.connectStart===t.domainLookupEnd}getRequestParameters(){if(!this.Kw||this.tb()!==1)return{};let t=this.Qw();return t===null?{}:{dt:`${Math.min(t,im)}`}}tb(){var t;return((t=this.R.getSession())===null||t===void 0?void 0:t.pageNumber)||null}Jw(){return typeof window.performance=="object"&&typeof window.performance.getEntriesByName=="function"}}return s})(),nm=["trackPageview"],pa=["setPath"],fa=["setQuery"],ga=["referrer:maskUrl"],om=["referrer:removeQueryString"],am=["referrer:keepQueryString"],Dr=s=>Os(s)&&s!==null,cm=(s,r,t,e)=>{s.register(nm,(i,n)=>{if(!$(i)){r.triggerArtificialPageView();return}Dr(n)?r.triggerArtificialPageView(i,n):r.triggerArtificialPageView(i)}),s.register(pa,(i,n)=>{if(!$(i))throw new Error(`Command misuse: ${pa[0]}`);Dr(n)?t.overridePath(i,n):t.overridePath(i)}),s.register(fa,(i,n)=>{if(!$(i))throw new Error(`Command misuse: ${fa[0]}`);Dr(n)?t.overrideQuery(i,n):t.overrideQuery(i)}),e&&(s.register(ga,i=>{if(!$(i))throw new Error(`Command misuse: ${ga[0]}`);e.addUrlMaskingPattern(i)}),s.register(om,()=>e.enableRemoveQueryString()),s.register(am,()=>e.disableRemoveQueryString()))};var lm=(()=>{class s{constructor(t,e,i,n,a,c,l,u,g,d,E,y,v,I,P){this.f=t,this.E=e,this.S=i,this.Ue=n,this.N=a,this.R=c,this.Vi=l,this.bt=u,this.vt=g,this.w=d,this.re=E,this.cs=y,this.K=v,this.ve=I,this.Xi=P}init(){let t=new ks(this.f.getTrackerUri(),"pageview");this.ti=new tm(this.S,this.K,t,this.w,this.cs),this.ti.init();let e=new ci(this.Ue,this.N,gt,this.Vi,this.w,this.bt,gn,this.vt,this.cs,new rm(this.R),this.re);this.ve&&e.addProvider(this.ve),this.Xi&&e.addProvider(this.Xi);let i=this.f.isCsCrosswritingHeap();if(i||this.f.isCsSideloadingHeap()||this.f.isHeapSideloadsCs()){let n=this.f.getHeapEnvId()||void 0;e.addProvider({getRequestParameters(){let a={cw:i?"1":"2"};return n&&(a.happid=n),a}})}t.setRequestParametersProviders(e),cm(this.E,this.ti,this.w,this.Vi)}start(t){this.ti.start(t)}onBeforeSessionRenewal(){this.ti.stop()}}return s})();function hm(s,r){let t=!1,e=function(){if(!t)return s.apply(r,arguments)};return e.cancel=()=>t=!0,e}var Se=csSymbol(),Hn=(()=>{class s{constructor(t){var e,i,n,a,c,l,u,g,d,E,y,v,I;this.A=t,this.Gl=null,this.ql=null,this.Wl=null,this.Yl=null,this.Xl=null,this.eb=ar(P=>this.processUpdateRulesInATick(P)),this.Kl=null,this.Jl=null,this.Ql=null,this.A=P=>Bt(()=>t(P)),typeof((i=(e=window.CSSStyleSheet)===null||e===void 0?void 0:e.prototype)===null||i===void 0?void 0:i.insertRule)=="function"&&(this.Gl=Qt({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:({context:P,args:S})=>{this.processInsertRule(P,S)}})),typeof((a=(n=window.CSSStyleSheet)===null||n===void 0?void 0:n.prototype)===null||a===void 0?void 0:a.deleteRule)=="function"&&(this.ql=Qt({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:({context:P,args:S})=>{this.processDeleteRule(P,S)}})),typeof((l=(c=window.CSSGroupingRule)===null||c===void 0?void 0:c.prototype)===null||l===void 0?void 0:l.insertRule)=="function"&&(this.Wl=Qt({target:window.CSSGroupingRule.prototype,methodName:"insertRule",hook:({context:P})=>this.processUpdateRule(P)})),typeof((g=(u=window.CSSGroupingRule)===null||u===void 0?void 0:u.prototype)===null||g===void 0?void 0:g.deleteRule)=="function"&&(this.Yl=Qt({target:window.CSSGroupingRule.prototype,methodName:"deleteRule",hook:({context:P})=>this.processUpdateRule(P)})),!((d=window.StyleSheet)===null||d===void 0)&&d.prototype&&"disabled"in window.StyleSheet.prototype&&(this.Xl=Zi(window.StyleSheet.prototype,"disabled",(P,S,_)=>{S!==_&&this.sb(P,S)})),typeof((y=(E=window.CSSStyleDeclaration)===null||E===void 0?void 0:E.prototype)===null||y===void 0?void 0:y.setProperty)=="function"&&(this.Kl=Qt({target:window.CSSStyleDeclaration.prototype,methodName:"setProperty",hook:({context:P})=>{let S=P.parentRule;S instanceof CSSStyleRule&&this.processUpdateRule(S)}})),typeof((I=(v=window.CSSStyleDeclaration)===null||v===void 0?void 0:v.prototype)===null||I===void 0?void 0:I.removeProperty)=="function"&&(this.Jl=Qt({target:window.CSSStyleDeclaration.prototype,methodName:"removeProperty",hook:({context:P})=>{let S=P.parentRule;S instanceof CSSStyleRule&&this.processUpdateRule(S)}})),Object.getOwnPropertyDescriptor(window.CSSStyleRule.prototype,"style")&&(this.Ql=ep(window.CSSStyleRule.prototype,"style",P=>{this.processUpdateRule(P)}))}observe(){var t,e,i,n,a,c,l,u;(t=this.Gl)===null||t===void 0||t.activate(),(e=this.ql)===null||e===void 0||e.activate(),(i=this.Wl)===null||i===void 0||i.activate(),(n=this.Yl)===null||n===void 0||n.activate(),(a=this.Xl)===null||a===void 0||a.activate(),(c=this.Kl)===null||c===void 0||c.activate(),(l=this.Jl)===null||l===void 0||l.activate(),(u=this.Ql)===null||u===void 0||u.activate()}disconnect(){var t,e,i,n,a,c,l,u;(t=this.Gl)===null||t===void 0||t.deactivate(),(e=this.ql)===null||e===void 0||e.deactivate(),(i=this.Wl)===null||i===void 0||i.deactivate(),(n=this.Yl)===null||n===void 0||n.deactivate(),(a=this.Xl)===null||a===void 0||a.deactivate(),(c=this.Kl)===null||c===void 0||c.deactivate(),(l=this.Jl)===null||l===void 0||l.deactivate(),(u=this.Ql)===null||u===void 0||u.deactivate()}processInsertRule(t,[e,i]){if(t[Se]==null&&!t.ownerNode)return;let n={type:"cssRuleInserted",sheet:t,rule:e,index:i};this.A(n)}processUpdateRule(t){let e=t;for(;e.parentRule!==null;)e=e.parentRule;e.parentStyleSheet!==null&&this.eb.push(e)}processUpdateRulesInATick(t){for(let e of t){if(e.parentStyleSheet===null)return;let i=e.parentStyleSheet,n=csArray.prototype.indexOf.call(Ns(i.cssRules),e);if(n===-1)return;let a={type:"cssRuleUpdated",sheet:i,rule:e.cssText,index:n};this.A(a)}}processDeleteRule(t,[e]){if(t[Se]==null&&!t.ownerNode)return;let i={type:"cssRuleDeleted",sheet:t,index:e};this.A(i)}sb(t,e){if(t[Se]==null&&!t.ownerNode)return;let i={type:"cssStyleSheetDisabled",sheet:t,disabled:e};this.A(i)}}return lt([x()],s.prototype,"observe",null),lt([x()],s.prototype,"disconnect",null),lt([x()],s.prototype,"processInsertRule",null),lt([x()],s.prototype,"processUpdateRule",null),lt([x()],s.prototype,"processUpdateRulesInATick",null),lt([x()],s.prototype,"processDeleteRule",null),s})(),um=(()=>{class s{constructor(t){this.ib=1,this.ma=new Set,this.Zl=null,this.th=null,this.Kc=(e,i)=>{(i==="initial"||i==="added")&&this.setStyleSheets(e,e.adoptedStyleSheets)},this.rb=e=>{let i=e.sheet;if(this.ma.has(i)){if(e.type==="cssRuleInserted"){let n={type:"adoptedStyleSheetRuleInserted",sheetId:i[Se],rule:e.rule,index:e.index};this.A(n)}else if(e.type==="cssRuleDeleted"){let n={type:"adoptedStyleSheetRuleDeleted",sheetId:i[Se],index:e.index};this.A(n)}else if(e.type==="cssRuleUpdated"){let n={type:"adoptedStyleSheetRuleUpdated",sheetId:i[Se],rule:e.rule,index:e.index};this.A(n)}else if(e.type==="cssStyleSheetDisabled"){let n={type:"adoptedStyleSheetDisabled",sheetId:i[Se],disabled:e.disabled};this.A(n)}}},this.A=e=>Bt(async()=>{await xa(2),t(e)}),this.de=new Vs(this.Kc),"adoptedStyleSheets"in Document.prototype&&(this.Zl=Zi(window.Document.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),"ShadowRoot"in window&&"adoptedStyleSheets"in window.ShadowRoot.prototype&&(this.th=Zi(window.ShadowRoot.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),this.Of=new Hn(this.rb)}observe(){var t,e;this.setStyleSheets(document,document.adoptedStyleSheets),this.de.observe(),(t=this.Zl)===null||t===void 0||t.activate(),(e=this.th)===null||e===void 0||e.activate(),this.Of.observe()}disconnect(){var t,e;this.ma.clear(),this.de.disconnect(),(t=this.Zl)===null||t===void 0||t.deactivate(),(e=this.th)===null||e===void 0||e.deactivate(),this.Of.disconnect()}setStyleSheets(t,e){if(!e.length)return;this.nb(e);let i=We(e,a=>a[Se]),n={type:"adoptedStyleSheetsSet",target:t,sheetsIds:i};this.A(n)}nb(t){Q(t,e=>{if(this.ma.has(e))return;let i=this.ib++;e[Se]=i,this.ma.add(e);let n=this.ob(e),a={type:"adoptedStyleSheetRegistered",sheetId:i,cssRules:n,disabled:e==null?void 0:e.disabled};this.A(a)})}ob(t){let e=[];try{e=We(t.cssRules,i=>i.cssText)}catch{}return e}}return lt([x()],s.prototype,"observe",null),lt([x()],s.prototype,"disconnect",null),lt([x()],s.prototype,"setStyleSheets",null),s})(),dm=fs(mm,"optimizeMutations"),pm=csSymbol.for("ignoreNextSerialization");function fm(){let s=new Set,r=new Set,t=new Set,e=new Set,i=new Map,n=new Map,a=new Map,c=new Set,l=new Set,u=new Map,g=new Set;return{isMovedNode(d){return s.has(d)},markAsMovedNode(d){g.delete(d),s.add(d)},isDetachedMove(d){return!!dt.findAncestor(d,E=>g.has(E),!0)},isAddedNode(d){let E=dt.findAncestor(d,y=>r.has(y)||l.has(y)||s.has(y),!0);return!!E&&!s.has(E)},isMovedNodeIntoAddedNode(d){return s.has(d)&&!!dt.findAncestor(d,E=>r.has(E)||l.has(E),!0)},markAsAddedNode(d){g.delete(d),l.delete(d),r.add(d)},markAsPendingInsert(d){l.add(d)},isPendingInsert(d){return l.has(d)},isRemovedNode(d){return!!dt.findAncestor(d,E=>t.has(E),!0)},markAsRemovedNode(d){t.add(d)},isUselessNode(d){return e.has(d)},markAsUselessNode(d){e.add(d)},getPlaceholder(d,E){let y=E==="previous"?n:i;return d&&y.has(d)?y.get(d)||null:d},getSiblings(d){let E=d.addedNodes.length,y=this.getPlaceholder(d.previousSibling,"previous"),v=this.getPlaceholder(d.nextSibling,"next");if(E){let I=y,P=v,S=d.previousSibling!==y,_=d.nextSibling!==v;for(let D=0;D<E;D++){let O=d.addedNodes[D],T=d.addedNodes[E-D-1];this.isLatestNodeMutation(O,d)?(n.delete(O),d.previousSibling&&S&&(i.set(d.previousSibling,O),S=!1),I=O):n.set(O,I),this.isLatestNodeMutation(T,d)?(i.delete(T),d.nextSibling&&_&&(n.set(d.nextSibling,T),_=!1),P=T):i.set(T,P)}}else d.previousSibling&&d.previousSibling!==y&&i.set(d.previousSibling,v),d.nextSibling&&d.nextSibling!==v&&n.set(d.nextSibling,y);return{previousSibling:y,nextSibling:v}},setAttributeMutation(d,E){let y=a.get(d)||new Set;y.add(E),a.set(d,y)},isAttributeMutated(d,E){var y;return!!(!((y=a.get(d))===null||y===void 0)&&y.has(E))},setLatestNodeMutation(d,E){u.set(d,E)},isLatestNodeMutation(d,E){return u.get(d)===E},markAsFutureAddedNode(d){u.has(d)||g.add(d)},isTextMutated(d){return c.has(d)},setTextMutated(d){return c.add(d)}}}function gm(s,r){for(let t=0;t<s.addedNodes.length;t++){let e=s.addedNodes[t];r.markAsFutureAddedNode(e),r.setLatestNodeMutation(e,s)}for(let t=0;t<s.removedNodes.length;t++){let e=s.removedNodes[t];r.setLatestNodeMutation(e,s)}}function mm(s){let r=fm(),t=[];for(let e of s)e.type==="childList"&&gm(e,r);for(let e of s)switch(e.type){case"attributes":Em(e,r,t);break;case"characterData":ym(e,r,t);break;case"childList":_m(e,r,t);break}return t}function ym(s,r,t=[]){let e=s.target;return dt.isConnected(e)&&!r.isTextMutated(e)&&!r.isAddedNode(e)&&!vm(e,"characterData")&&(r.setTextMutated(e),csArray.prototype.push.call(t,s)),t}function Em(s,r,t=[]){let e=s.target,i=`${s.attributeNamespace}/${s.attributeName}`;return dt.isConnected(e)&&!r.isAttributeMutated(e,i)&&!r.isAddedNode(e)&&(r.setAttributeMutation(e,i),csArray.prototype.push.call(t,s)),t}var Sm=30;function vm(s,r,t){let e=csSymbol.for(t?`${r}:${t}`:r),i=C.now(),n=s[e];return n&&i<n?!0:(s[e]=i+Sm,!1)}function _m(s,r,t=[]){let e=dt.isConnected(s.target),i=!e&&r.isRemovedNode(s.target),n=e&&r.isAddedNode(s.target),a=r.getSiblings(s),c=a.nextSibling,l=a.previousSibling,u=null,g=()=>{if(u){let{childListType:y,movedNodes:v,...I}=u;csArray.prototype.push.call(t,y==="added"?I:{...I,movedNodes:v}),u=null}},d=y=>y===(u==null?void 0:u.childListType)?u:(g(),{childListType:y,type:"childList",target:s.target,addedNodes:[],removedNodes:[],movedNodes:[],previousSibling:l,nextSibling:c});if(e){for(let y=0;y<s.addedNodes.length;y++){let v=s.addedNodes[y];r.isLatestNodeMutation(v,s)?(r.isMovedNode(v)?(u=d("moved"),csArray.prototype.push.call(u.movedNodes,v)):(r.markAsAddedNode(v),n||(u=d("added"),csArray.prototype.push.call(u.addedNodes,v))),l=v):dt.isConnected(v)?r.isMovedNode(v)||r.markAsPendingInsert(v):r.markAsUselessNode(v)}g()}let E=vn(s.removedNodes,y=>{if(dt.isConnected(y)){if(!i&&!r.isPendingInsert(y)){if(r.isDetachedMove(y))return!0;r.markAsMovedNode(y),r.isMovedNodeIntoAddedNode(y)&&(y[pm]=!0)}return!1}return r.isUselessNode(y)?!1:(r.markAsRemovedNode(y),!0)});return E.length&&csArray.prototype.push.call(t,{type:"childList",removedNodes:E,addedNodes:[],movedNodes:[],target:s.target,nextSibling:c,previousSibling:l}),t}var wm=(()=>{class s{constructor(t){this.A=t,this.eh=!1,this.ab=e=>{e.sheet.ownerNode&&(e.type==="cssRuleInserted"?this.A({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssRuleDeleted"?this.A({type:e.type,target:e.sheet.ownerNode,index:e.index}):e.type==="cssRuleUpdated"?this.A({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssStyleSheetDisabled"&&this.A({type:e.type,target:e.sheet.ownerNode,disabled:e.disabled}))},this.A=e=>Bt(()=>t(e)),this.Nf=new Hn(e=>Bt(async()=>{await xa(),this.ab(e)})),"adoptedStyleSheets"in Document.prototype&&(this.Mf=new um(t))}observe(){var t;this.eh=!1,this.D=new Je(e=>this.cb(e),(e,i)=>{i==="added"&&this.lb(e)}),this.D.observe(),this.Nf.observe(),(t=this.Mf)===null||t===void 0||t.observe()}disconnect(){var t,e;(t=this.D)===null||t===void 0||t.disconnect(),this.Nf.disconnect(),(e=this.Mf)===null||e===void 0||e.disconnect(),this.eh=!0}cb(t){if(this.eh)return;let e=dm(t);for(let i=0;i<e.length;i++){let n=e[i];if(!n){at.error("processRawMutations: empty record");continue}switch(n.type){case"attributes":this.processAttributeChanged(n);break;case"characterData":this.processCharacterDataChanged(n);break;case"childList":this.processChildListChanged(n);break;default:at.error(`processRawMutations: unknown record type '${n.type}'`);break}}}processAttributeChanged(t){let e={type:"attributeChanged",target:t.target,attribute:t.attributeName,namespace:t.attributeNamespace,oldValue:t.oldValue,newValue:dt.getAttributeNS(t.target,t.attributeNamespace,t.attributeName)};this.A(e)}processCharacterDataChanged(t){let e={type:"characterDataChanged",target:t.target,oldValue:t.oldValue,newValue:t.target.data};this.A(e)}processChildListChanged(t){var e,i,n;if(!((e=t.movedNodes)===null||e===void 0)&&e.length){let a={type:"nodesMoved",target:t.target,nodes:t.movedNodes,previousSibling:t.previousSibling,nextSibling:t.nextSibling};this.A(a)}if(!((i=t.addedNodes)===null||i===void 0)&&i.length){let a={type:"nodesAdded",target:t.target,previousSibling:t.previousSibling,nextSibling:t.nextSibling,nodes:Ns(t.addedNodes)};this.A(a)}if(!((n=t.removedNodes)===null||n===void 0)&&n.length){let a={type:"nodesRemoved",target:t.target,nodes:We(t.removedNodes,c=>c)};this.A(a)}}lb(t){let e={type:"shadowRootAttached",target:t.host,shadowRoot:t};this.A(e)}}return lt([x()],s.prototype,"processAttributeChanged",null),lt([x()],s.prototype,"processCharacterDataChanged",null),lt([x()],s.prototype,"processChildListChanged",null),s})(),Bn=(()=>{class s{constructor(t){this.type="asyncEvent",this.ih=!1,t&&t(e=>this.resolve(e))}resolve(t){if(this.ih)throw new Error("AsyncEvent already resolve.");t.timestamp==null&&(t={...t,timestamp:this.timestamp}),this.Ws=t,this.ih=!0,this.A&&this.A(this.Ws)}complete(t){this.ih&&t(this.Ws),this.A=t}wait(){return new Promise(t=>this.complete(t))}}return s})(),bm=Jp(),Tm=(()=>{class s extends ue{constructor(){super(...arguments),this.ya=!1}onStart(){this.ya=!0,this.A=hm(this.hb,this),this.W=new wm(this.A),this.W.observe();let t=Lt.mutations.initialDOM.asyncMeasure(),e=()=>{this.ya=!1,Zp(),t()};this.produceEvent(new Bn(i=>bm(document,n=>{e(),i({type:"DomEvent",domEvent:"initialDOM",initialDOM:n})})))}onStop(){var t,e;this.ya=!1,(t=this.A)===null||t===void 0||t.cancel(),(e=this.W)===null||e===void 0||e.disconnect()}Wt(t,e){let i={type:"DomEvent",domEvent:e.type,target:0,targetProps:{}};return"target"in e&&(i.target=st(e.target),i.targetProps=W.getProperties(e.target)),[e,i]}hb(t){if(!this.db(t))switch(t.type){case"attributeChanged":{let[e,i]=this.Wt(t.type,t);i.attribute=e.attribute,i.isSvg=Ls(e.target),i.namespace=e.namespace,i.newValue=e.newValue,i.oldValue=e.oldValue,i.localName=Ys(e.target),i.linkRel=Ba(e.target)?e.target.rel:null,i.parentLocalName=e.target.parentElement?Ys(e.target.parentElement):void 0,i.localName==="input"&&(i.inputType=e.target.getAttribute("type")),this.produceEvent(i)}break;case"characterDataChanged":{let[e,i]=this.Wt(t.type,t);i.newValue=e.newValue,i.oldValue=e.oldValue,i.targetNodeType=e.target.nodeType,i.parentLocalName=e.target.parentElement?Ys(e.target.parentElement):null,i.parentProps=e.target.parentElement?W.getProperties(e.target.parentElement):void 0,this.produceEvent(i)}break;case"nodesAdded":{let[e,i]=this.Wt(t.type,t);i.targetLocalName=ct(e.target)?Ys(e.target):null,i.nextSibling=e.nextSibling?st(e.nextSibling):null,i.previousSibling=e.previousSibling?st(e.previousSibling):null,Lt.mutations.serializedMutations.measure(()=>{i.nodes=We(e.nodes,nn)}),this.produceEvent(i);break}case"nodesMoved":{let[e,i]=this.Wt(t.type,t);i.previousSibling=e.previousSibling?st(e.previousSibling):null,i.nextSibling=e.nextSibling?st(e.nextSibling):null,i.nodesIds=We(e.nodes,st),this.produceEvent(i);break}case"nodesRemoved":{let[e,i]=this.Wt(t.type,t);i.nodesIds=We(e.nodes,st),this.produceEvent(i);break}case"shadowRootAttached":{let[e,i]=this.Wt(t.type,t);i.shadowRoot=ti(e.shadowRoot),this.produceEvent(i);break}case"cssRuleInserted":{let[e,i]=this.Wt(t.type,t);i.index=e.index,i.rule=e.rule,this.produceEvent(i);break}case"cssRuleDeleted":{let[e,i]=this.Wt(t.type,t);i.index=e.index,this.produceEvent(i);break}case"cssRuleUpdated":{let[e,i]=this.Wt(t.type,t);i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"cssStyleSheetDisabled":{let[e,i]=this.Wt(t.type,t);i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetRegistered":{let[e,i]=this.Wt(t.type,t);i.sheetId=e.sheetId,i.cssRules=e.cssRules,i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetsSet":{let[e,i]=this.Wt(t.type,t);i.sheetsIds=e.sheetsIds,this.produceEvent(i);break}case"adoptedStyleSheetRuleInserted":{let[e,i]=this.Wt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleDeleted":{let[e,i]=this.Wt(t.type,t);i.sheetId=e.sheetId,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleUpdated":{let[e,i]=this.Wt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetDisabled":{let[e,i]=this.Wt(t.type,t);i.sheetId=e.sheetId,i.disabled=e.disabled,this.produceEvent(i);break}}}Ea(t){return this.ya&&!W.getProperty(t,Zs)}db(t){switch(t.type){case"nodesAdded":case"nodesMoved":case"nodesRemoved":case"shadowRootAttached":return this.Ea(t.target)||N.isMaskedElement(t.target)||N.isMaskedElementChild(t.target);case"characterDataChanged":{let e=t.target.parentElement;return e!==null&&(this.Ea(e)||N.isMaskedElement(e)||N.isMaskedElementChild(e))}case"attributeChanged":return this.Ea(t.target)||N.isMaskedElementChild(t.target)||N.isMaskedAttribute(t.target,t.attribute);case"cssRuleInserted":case"cssRuleDeleted":case"cssRuleUpdated":case"cssStyleSheetDisabled":return this.Ea(t.target)||N.isMaskedElementChild(t.target);default:return!1}}}return s})(),vi=(()=>{let s;return function(r){function t(e){return e.type==="DomEvent"}r.isDOMEvent=t}(s||(s={})),s})(),js=(()=>{class s{constructor(){this.ce=[]}start(){}stop(){this.ce.length=0,this.ce=[]}pushEvent(t){if(s.pendingEvents++,this.isListening(t)){let e=this.ce;csSetTimeout(()=>{let n=ls("Processor:processEvent",a=>this.processEvent(a))(t);n!=null&&csArray.prototype.forEach.call(e,a=>a(n)),s.pendingEvents--})}else csSetTimeout(()=>{csArray.prototype.forEach.call(this.ce,e=>e(t))})}subscribe(t){return csArray.prototype.push.call(this.ce,t),()=>{this.ce=csArray.prototype.filter.call(this.ce,e=>e!==t)}}emitEvent(t){Bt(()=>csArray.prototype.forEach.call(this.ce,e=>e(t)))}}return s.pendingEvents=0,s})(),Am=(()=>{class s extends js{isListening(t){return vi.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded")}processEvent(t){let e=0,i=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let n of i){if(n instanceof Rs){let c=N.getMaskedAttributeDetails(n);n.attributes=this.jo(n,c)}if(N.getMaskedElementDetails(n).state===N.MaskedElementState.Child){if(t.domEvent==="initialDOM")return null;t.nodes=csArray.prototype.filter.call(t.nodes,c=>c!==n);continue}W.traverse(n,c=>{if(c instanceof Rs){let l=N.getMaskedAttributeDetails(c);c.attributes=this.jo(c,l);let u=N.getMaskedElementDetails(c);u.state===N.MaskedElementState.Parent&&(this.Fc(c,u),e++)}})}return e>0&&q.counters.sensitiveElements.count("masked-elements",e),t}jo(t,e){return e.attributes.length===0?t.attributes:csArray.prototype.filter.call(t.attributes,i=>csArray.prototype.indexOf.call(e.attributes,i.name)===-1)}Fc(t,e){let i=`width: ${e.width}px !important; height: ${e.height}px !important;`;t.children=[],t.shadowRoot=void 0,csArray.prototype.push.call(t.attributes,{name:"style",value:i,namespaceURI:""}),Rs.getAttribute(t,"data-cs-mask")||csArray.prototype.push.call(t.attributes,{name:"data-cs-mask",value:"",namespaceURI:""})}}return be([kt("MaskedElementProcessor.processEvent")],s.prototype,"processEvent",null),s})();var ma=(()=>{let s;return function(r){function t(e){return e.type==="TextVisibility"}r.isTextVisibilityEvent=t}(s||(s={})),s})(),Rm=(()=>{class s extends js{constructor(t,e,i,n=null,a=!1){super(),this.O=i,this.Ho=n,this.captureAnonymizedPlaceholders=a,this.Sa=new af(t,e,i,n,a)}setAnonymization(t){this.Sa.setAnonymization(t)}isListening(t){return ma.isTextVisibilityEvent(t)||vi.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged")}processEvent(t){if(ma.isTextVisibilityEvent(t))return t.text=this.O.checkAndAnonymizePII(t.text,this.Ho),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.oh(t);break;case"attributeChanged":this.fb(t);break;case"characterDataChanged":this.gb(t);break}return t}oh(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes,i;t.domEvent==="nodesAdded"&&(i={targetLocalName:t.targetLocalName,targetProps:t.targetProps});for(let n of e)this.Sa.sanitize(n,i)}fb(t){if(!t.isSvg&&t.newValue){if(t.localName===null){t.newValue="";return}t.newValue=this.Sa.getAnonymizedAttributeValue(t.localName,t.attribute,t.newValue,t.inputType)}}gb(t){t.newValue=this.Sa.getAnonymizedValue(t.newValue,t.parentLocalName,t.parentProps).anonymizedValue}}return be([kt("AnonymizedTextProcessor.processEvent")],s.prototype,"processEvent",null),s})();function Fn(s){let r=csString.prototype.trim.call(s);if(s==="")return[];let[t,e]=Cm(r);return e?(di(t,",")||(e=Im(e)),[ya(t),...Fn(e)]):[ya(t)]}function Cm(s){return csString.prototype.split.call(s,/\s(.+)/)}function ya(s){return csString.prototype.split.call(s,/,$/)[0]}function Im(s){return csString.prototype.split.call(s,/,(.+)/)[1]||""}var Pm=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\)(?!\\))/g;function Om(s,r){return csString.prototype.replace.call(s,Pm,(...e)=>{let i=e[3]||e[4],n=e[9]||e[10]||e[11],a=Mm((i||n).trim()),c=i?"@import ":"",l=r(a)||a;return`${c}url(${Nm(l)})`})}function Nm(s){return csString.prototype.indexOf.call(s,'"')===-1?`"${s}"`:csString.prototype.indexOf.call(s,"'")===-1?`'${s}'`:s}function ei(s){let r=new Set;return Om(s,t=>{var e,i;return r.add((i=(e=csString.prototype.match.call(t,/^["|'](.*)?["|']$/))===null||e===void 0?void 0:e[1])!==null&&i!==void 0?i:t),t}),xs(r)}function Mm(s){let r=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return csString.prototype.replace.call(s,r,(t,e,i,n)=>{if(e==="\\")return csString.prototype.slice.call(t,1);if(n)return n;let a=parseInt(i,16);return 55296<=a&&a<=57343||a===0||a>1114111?"\uFFFD":csString.fromCodePoint(a)})}var Ea=(()=>{class s{static async toStaticResourceEvent(t,e,i){let n=await s.yb(t);if(!n)return null;let a=await s.xf(n),c=Wt(t)?void 0:t,l={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:a,data:n}};return c&&(l.originalResourceName=c),l}static async toCSSStaticResourceEvent(t,e,i,n){let a=await s.Eb(t,n),c=ae(t),l=a.get(c);if(!l)return null;let u={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:l.hash,data:l.data}};return a.delete(c),a.size&&(u.nestedResources=[],a.forEach(g=>{g&&csArray.prototype.push.call(u.nestedResources,{hash:g.hash,data:g.data})})),u}static async xf(t){let e=await t.arrayBuffer(),i=await crypto.subtle.digest(this.Lf,e);return qr(i)}static async yb(t){let e;if(!Wt(t))e=await(await window.fetch(t)).blob();else{let i=So(t);if(!i)return null;e=i}return e}static async Eb(t,e){let i=new Map,n=ae(t),c=[{resourceRawPath:t,resourceAbsolutePath:n}];for(;c.length>0;){let l=csArray.prototype.pop.call(c);if(!e&&l.resourceAbsolutePath!==null&&!Wt(l.resourceAbsolutePath)){i.set(l.resourceAbsolutePath,null);continue}if(i.get(l.resourceAbsolutePath)===void 0)try{if(l.resourceRawPath===null||csString.prototype.indexOf.call(l.resourceRawPath,".css")>0){if(!l.data){let y=await fetch(l.resourceAbsolutePath);l.data=await y.text()}l.nestedResources||(l.nestedResources=ei(l.data));let d=!1,E=!1;for(let y of l.nestedResources){let v=Wt(y)?y:l.resourceAbsolutePath?Ed(y,l.resourceAbsolutePath):ae(y),I=i.get(v);if(I!==void 0){if(I!==null){let S=s.Sb(I,y);l.data=ht.stringReplaceAll(l.data,y,S)}continue}ve(c,S=>S.resourceAbsolutePath===v)!==void 0||(d=!0,E||(csArray.prototype.push.call(c,l),E=!0),csArray.prototype.push.call(c,{resourceRawPath:y,resourceAbsolutePath:v}))}if(!d){let y=await s.vb(l.data);i.set(l.resourceAbsolutePath,{hash:y.hash,data:y.data})}}else{let d;if(!Wt(l.resourceAbsolutePath))d=await(await fetch(l.resourceAbsolutePath)).blob();else{let y=So(l.resourceAbsolutePath);if(!y){i.set(l.resourceAbsolutePath,null);continue}d=y}let E=await s.xf(d);i.set(l.resourceAbsolutePath,{hash:E,data:d})}}catch{i.set(l.resourceAbsolutePath,null)}}return i}static Sb(t,e){let i=`cs://resources/${t.hash}`;return Wt(e)||(i+=`?${s.ah}=${e}`),i}static async vb(t){let e=new Blob([t],{type:"text/css"}),i=await e.arrayBuffer(),n=await crypto.subtle.digest(s.Lf,i);return{data:e,hash:qr(n)}}}return s.Lf="SHA-256",s.ah="original-resource-name",s})(),dn=(()=>{class s extends js{constructor(){super(),this.va="cssrm://",this._e=0,this.Cs=!1}isListening(t){return!s.isSupported()||!vi.isDOMEvent(t)?!1:t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged"}processEvent(t){switch(t.domEvent){case"initialDOM":case"nodesAdded":this._b(t);break;case"attributeChanged":this.wb(t);break;case"characterDataChanged":this.bb(t);break}return t}disableOnlineAssets(){this.Cs=!1}enableOnlineAssets(){this.Cs=!0}isOnlineAssetsActivated(){return this.Cs}_b(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)W.traverse(i,(n,a)=>{if(n.nodeType===ai.TEXT_NODE&&a){this.Tb(n,a.localName);return}if(!Rs.isElement(n))return;let c=ve(n.attributes,l=>l.name==="style");if(c&&(c.value=this._a(c.value)),this.Ab(n)||this.Rb(n,a)){let l=ve(n.attributes,g=>g.name==="src");l&&l.value&&(l.value=this.Vf(l.value));let u=ve(n.attributes,g=>g.name==="srcset");if(u){u.value=this.Uf(u.value);return}}if(this.Cb(n)&&this.Cs){let l=ve(n.attributes,u=>u.name==="href");if(!l||!l.value)return;this._e++,this.yr(ae(l.value),this._e,!0),this.Ib(n,l,this._e)}})}Ib(t,e,i){csArray.prototype.push.call(t.attributes,{name:"data-cs-original-href",namespaceURI:"",value:e.value}),e.value=this.va+i}Tb(t,e){if(!t||e!=="style")return;let i=this._a(t.data);i!==null&&(t.data=i)}bb(t){if(t.parentLocalName!=="style"||!t.newValue)return;let e=this._a(t.newValue);e!==null&&(t.newValue=e)}wb(t){if(!t.newValue||t.newValue===t.oldValue)return;let e=t.attribute==="src",i=t.attribute==="srcset";if(t.attribute==="style"){t.newValue=this._a(t.newValue);return}if(!e&&!i)return;let a=t.localName==="img",c=t.localName==="source"&&t.parentLocalName&&t.parentLocalName==="picture";!a&&!c||(e&&(t.newValue=this.Vf(t.newValue)),i&&(t.newValue=this.Uf(t.newValue)))}Vf(t){return Wt(t)||this.Cs?(this._e++,this.yr(t,this._e,!1,C.now()),this.va+this._e):t}Uf(t){if(!this.Cs)return t;let e=t,i=Fn(t),n=C.now();for(let a of i)this._e++,this.yr(ae(a),this._e,!1,n),e=csString.prototype.replace.call(e,a,this.va+this._e);return e}_a(t){let e=ei(t),i=t,n=C.now();for(let a of e){let c=Wt(a);if(!(c||this.Cs)||this.Pb(a))continue;this._e++,i=csString.prototype.replace.call(i,a,this.va+this._e);let l=ju(a);c?this.yr(a,this._e,!1,n):this.Cs&&(l?this.yr(a,this._e,!0,n):this.yr(ae(a),this._e,!1,n))}return i}yr(t,e,i,n=C.now()){let a=i?Ea.toCSSStaticResourceEvent:Ea.toStaticResourceEvent,c=new Bn(async l=>{try{let u=await a(t,e,n,this.Cs);l(u||{type:"warning",message:`Failed to process static resource: ${t}`})}catch(u){l({type:"warning",message:u})}});this.emitEvent(c)}Ab(t){return t.localName==="img"}Rb(t,e){return t.localName==="source"&&!!e&&e.localName==="picture"}Cb(t){return t.localName==="link"&&csArray.prototype.some.call(t.attributes,e=>e.name==="rel"&&e.value==="stylesheet")}static isSupported(){return ka()&&Mh()&&!!csArray.from}Pb(t){return csString.prototype.replace.call(t,/['"]+/g,"").length===0}}return be([kt("StaticResourceManagerProcessor.processEvent")],s.prototype,"processEvent",null),s})(),km=(()=>{class s extends js{constructor(t){super(),this.et=t}isListening(t){return vi.isDOMEvent(t)&&t.domEvent==="initialDOM"}processEvent(t){return t.domEvent==="initialDOM"&&(t.initialDOM.baseURI=this.et.anonymizeUrl(t.initialDOM.baseURI)),t}}return be([kt("UrlAnonymizationProcessor.processEvent")],s.prototype,"processEvent",null),s})(),xr="textarea",Dm=(()=>{class s extends js{isListening(t){return vi.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="characterDataChanged")}processEvent(t){switch(t.domEvent){case"initialDOM":this.Ob(t);break;case"nodesAdded":this.Nb(t);break;case"characterDataChanged":this.Mb(t);break}return t}Ob(t){W.traverse(t.initialDOM,(e,i)=>{(this.jf(e,i)||this.Hf(e))&&(e.data=this.ch(e.data))})}Nb(t){for(let e of t.nodes)W.traverse(e,(i,n)=>{(this.kb(i,n,t)||this.Hf(i))&&(i.data=this.ch(i.data))})}Mb(t){var e;(t.parentLocalName===xr||!((e=t.targetProps)===null||e===void 0)&&e.editableNode)&&(t.newValue=this.ch(t.newValue))}ch(t){return csString.prototype.replace.call(t,/\S/g,"\u2022")}kb(t,e,i){return this.Db(t,i)||this.jf(t,e)}Db(t,e){return t.nodeType===3&&e.targetLocalName===xr}jf(t,e){return t.nodeType===3&&J(e)&&e.localName===xr}Hf(t){return t.nodeType===3&&$e.isEditableNode(t)}}return be([kt("AnonymizedEditableTextProcessor.processEvent")],s.prototype,"processEvent",null),s})(),xm=(()=>{class s{constructor(t){this.A=t,this.zt={boundElement:window,type:"resize",listener:()=>this.resizeListener()},this.A=t}observe(){Ct(this.zt),this.lh()}lh(){this.resizeListener()}disconnect(){It(this.zt)}resizeListener(){let t={width:gt.windowWidth(),height:gt.windowHeight()};this.A(t)}}return lt([x("resize")],s.prototype,"resizeListener",null),s})(),Fe=(()=>{let s;return function(r){r.PORTRAIT="Portrait",r.LANDSCAPE="Landscape"}(s||(s={})),s})(),Li=(()=>{let s;return function(r){r.PORTRAIT_PRIMARY="portrait-primary",r.PORTRAIT_SECONDARY="portrait-secondary",r.LANDSCAPE_PRIMARY="landscape-primary",r.LANDSCAPE_SECONDARY="landscape-secondary"}(s||(s={})),s})(),Vi=(()=>{let s;return function(r){r[r.PORTRAIT=0]="PORTRAIT",r[r.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",r[r.LANDSCAPE=-90]="LANDSCAPE",r[r.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(s||(s={})),s})(),Lm=(()=>{let s;return function(r){let t=null;r.isScreenOrientationApiSupported=()=>{var c;return t!=null?t:t=!!(!((c=et.screen)===null||c===void 0)&&c.orientation)},r.isDeprecatedScreenOrientationApiSupported=()=>"orientation"in et;function e(){return Fe.LANDSCAPE}function i(){var c;switch((c=et.screen.orientation)===null||c===void 0?void 0:c.type){case Li.PORTRAIT_PRIMARY:case Li.PORTRAIT_SECONDARY:return Fe.PORTRAIT;case Li.LANDSCAPE_PRIMARY:case Li.LANDSCAPE_SECONDARY:return Fe.LANDSCAPE;default:return Fe.PORTRAIT}}function n(){switch(window.orientation){case Vi.PORTRAIT:case Vi.PORTRAIT_REVERSE:return Fe.PORTRAIT;case Vi.LANDSCAPE:case Vi.LANDSCAPE_REVERSE:return Fe.LANDSCAPE;default:return Fe.PORTRAIT}}function a(){return r.isScreenOrientationApiSupported()?i():r.isDeprecatedScreenOrientationApiSupported()?n():e()}r.getCurrentOrientation=a}(s||(s={})),s})(),Vm=(()=>{class s extends ue{constructor(){super(...arguments),this.hh=null,this.uh=null,this.Vs=new xm(t=>{this.produceEvent({...t,type:"viewportResize"}),this.onScreenPotentiallyChanged()})}onScreenPotentiallyChanged(){let t=Lm.getCurrentOrientation(),{screenWidth:e,screenHeight:i}=this.xb(t);if(e!==this.hh||i!==this.uh){this.hh=e,this.uh=i;let n={type:"screenResize",width:e,height:i};this.produceEvent(n)}}xb(t){let e,i,n=gt.screenWidth(),a=gt.screenHeight();return t===Fe.PORTRAIT?(e=n,i=a):(e=Math.max(n,a),i=Math.min(n,a)),{screenWidth:e,screenHeight:i}}onStart(){this.Vs.observe()}onStop(){this.hh=null,this.uh=null,this.Vs.disconnect()}}return s})();function Um(s){let r=csEventtarget.apply(s);return r&&ct(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}var jm=(()=>{class s extends ue{constructor(){super(),this.Bf=t=>{let e=Um(t);e&&this.ph(e,t.type)},this.de=new Vs((t,e)=>{switch(e){case"initial":case"added":this.Ff(t);break;case"removed":this.$f(t);break}}),this.B=new Ds((t,e)=>{(e==="initial"||e==="added")&&this.Lb(t)})}static shouldProcessElement(t){return t.tagName==="VIDEO"&&dt.isConnected(t)&&!N.isMaskedElement(t)&&!N.isMaskedElementChild(t)}static isPlaying(t){return!t.paused&&!t.ended}onStart(){this.Ff(document),this.de.observe(),this.B.observe("video")}onStop(){this.$f(document),this.de.disconnect(),this.B.disconnect()}ph(t,...e){if(this.isStarted&&s.shouldProcessElement(t))for(let i of e){let n=st(t),a={type:"VideoEvent",videoEventType:i,nodeId:n};i==="seeked"&&(a.newTimePositionInSec=t.currentTime),Sn(()=>this.produceEvent(a))}}Lb(t){for(let e of t)this.ph(e,"seeked"),s.isPlaying(e)&&this.ph(e,"play")}Ff(t){for(let e of["play","pause","seeked"])Ct({type:e,listener:this.Bf,boundElement:t})}$f(t){for(let e of["play","pause","seeked"])It({type:e,listener:this.Bf,boundElement:t})}}return s})();function Hm(s){return s.nodeName==="SELECT"}function $n(s){return s.nodeName==="INPUT"}function Bm(s){return s.nodeName==="TEXTAREA"||$n(s)&&!$c(s)&&!zc(s)}function $c(s){return $n(s)&&s.type==="number"}function zc(s){return $n(s)&&(s.type==="checkbox"||s.type==="radio")}var Fm=(()=>{class s extends ue{constructor(t){super(),this.ot=t,this.fh=new Yd("low"),this.Er=e=>this.inputHandler(e),this.Ci=[],this.Vb(),this.Ub(),this.B=new Ds(e=>{for(let i of e)this.gh(i)&&Bt(()=>{this.mh(i,st(i))},"low")}),this.de=new Vs((e,i)=>{switch(i){case"initial":case"added":Ct({type:"change",listener:this.Er,boundElement:e});break;case"removed":It({type:"change",boundElement:e,listener:this.Er});break}})}onStart(){Ct({type:"keyup",boundElement:document,listener:this.Er}),Ct({type:"change",boundElement:document,listener:this.Er}),Q(this.Ci,t=>t.activate()),this.B.observe(csArray.prototype.join.call(s.jb,",")),this.de.observe()}onStop(){It({type:"keyup",boundElement:document,listener:this.Er}),It({type:"change",boundElement:document,listener:this.Er}),Q(this.Ci,t=>t.deactivate()),this.B.disconnect(),this.de.disconnect(),this.fh.clear()}mh(t,e){var i,n,a;if(this.fh.has(t))return;if(this.fh.add(t),Hm(t)){let u={type:"InputEvent",inputType:"select",target:st(t),selectedIndex:t.selectedIndex,timestamp:C.now()};this.produceEvent(u);return}if(zc(t)){let u={type:"InputEvent",inputType:"checkable",target:st(t),checked:t.checked,timestamp:C.now()};this.produceEvent(u);return}let c=Bm(t),l=$c(t);if(c||l){let u=(i=t.value)!==null&&i!==void 0?i:"";if(!((n=this.ot)===null||n===void 0)&&n.shouldEncrypt(t)){(a=this.ot)===null||a===void 0||a.registerInputNodeToEncrypt({targetId:e,targetValue:u,date:C.now()});return}let g=l?"0":"\u2022",d={type:"InputEvent",inputType:"text",target:st(t),value:csString.prototype.replace.call(u,/\S/g,g),timestamp:C.now()};this.produceEvent(d)}}inputHandler(t){if(!this.isStarted)return;let e=mt(t),i=st(e);!i||!this.gh(e)||dt.isConnected(e)&&Bt(()=>{this.mh(e,i)},"low")}Vb(){this.trackChanges(HTMLInputElement,"checked"),this.trackChanges(HTMLInputElement,"value"),this.trackChanges(HTMLTextAreaElement,"value")}Ub(){this.trackChanges(HTMLSelectElement,"selectedIndex"),this.trackChanges(HTMLSelectElement,"value"),this.trackChanges(HTMLOptionElement,"selected",!0)}trackChanges(t,e,i=!1){let n=Zi(t.prototype,e,(a,c,l)=>{if(l!==c&&dt.isConnected(a)){let u=i?a.parentElement:a;this.Hb(u)}});n&&csArray.prototype.push.call(this.Ci,n)}gh(t){return!N.isMaskedElement(t)&&!N.isMaskedElementChild(t)&&(sr(t)||Tn(t)||bn(t))}Hb(t){if(this.isStarted&&dt.isConnected(t)){let e=st(t);e&&this.gh(t)&&Bt(()=>{this.mh(t,e)},"low")}}}return s.jb=["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]','input[type="number"]','input[type="checkbox"]','input[type="radio"]',"select"],be([bt()],s.prototype,"inputHandler",null),be([x()],s.prototype,"trackChanges",null),s})();var $m=(()=>{class s{constructor(t=Number.POSITIVE_INFINITY){this.si=[],this.nt=[],this.Bb=t}next(t){this.nt.length===this.Bb&&csArray.prototype.shift.call(this.nt),csArray.prototype.push.call(this.nt,t),this.nt.length===1&&csSetTimeout(()=>this.clear());for(let e of this.si)e(t)}subscribe(t){if(ve(this.si,i=>t===i))return()=>{this.si=csArray.prototype.filter.call(this.si,i=>i!==t)};csArray.prototype.push.call(this.si,t);for(let i of this.nt)t(i);return()=>{this.si=csArray.prototype.filter.call(this.si,i=>i!==t)}}clear(){this.nt=[]}hasObservers(){return this.si.length>0}}return s})(),Gc=(()=>{var s;class r{constructor(e){this.A=e}observe(){this.Fb=s.kn.subscribe(e=>this.A(e)),s.wa||(s.wa=!0,s.Mn.observe(),Zt(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{s.Rs.add(i),s.kn.next(i)}))}disconnect(){s.wa&&(this.Fb(),s.kn.hasObservers()||(s.wa=!1,s.Mn.disconnect(),s.kn.clear(),s.Rs.clear()))}}return s=r,r.Rs=new or,r.kn=new $m,r.$b=fs(t=>{Bt(()=>{for(let e of t)e.type==="childList"&&Q(e.addedNodes,i=>{Zt(i,NodeFilter.SHOW_ELEMENT).visitAll(a=>{s.Rs.has(a)||(s.Rs.add(a),s.kn.next(a))})})})},"ElementObserver.findAllElements"),r.wa=!1,r.Mn=new Je(s.$b),lt([x()],r.prototype,"observe",null),lt([x()],r.prototype,"disconnect",null),r})(),zm=(()=>{class s extends ue{constructor(){super(),this.bs=typeof window.customElements=="object"&&typeof window.customElements.whenDefined=="function"&&typeof window.Promise=="function",this.zb=ls("CustomElementRegistrationProducer:onElementsFound",e=>{for(let i of e)N.isMaskedElement(i)||N.isMaskedElementChild(i)||uu(i)&&this.register(csString.prototype.toLowerCase.call(i.tagName))});let t=ar(this.zb);this.Dn=new Gc(e=>t.push(e)),this.ei=new Set}onStart(){this.bs&&this.Dn.observe()}onStop(){this.ei.clear(),this.Dn.disconnect()}async register(t){this.ei.has(t)||(this.ei.add(t),await window.customElements.whenDefined(t),this.produceEvent({type:"CustomElementRegistration",tagName:csString.prototype.toLowerCase.call(t)}))}}return be([x()],s.prototype,"register",null),s})(),Sa=(()=>{class s{static isNavigationTimingObserverSupported(){var t,e;return(((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.indexOf.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"navigation"))>=0}static getTimeOrigin(){return window.performance.timeOrigin}static zf(){if(this.isNavigationTimingObserverSupported())return new window.PerformanceObserver(t=>s.Gb(t))}static Gb(t){let i=t.getEntriesByType("navigation")[0];i&&(this.Ui=i,s.Sr(i))}static Br(t){this.qb(t),this.Ui&&t(this.Ui),this.je||this.Wb()}static qb(t){this.kt.add(t)}static Yb(t){this.kt.delete(t)}static Wb(){if(this.xn||(this.xn=this.zf()),!this.xn){this.Ui||(this.Ui={requestStart:window.performance.timing.requestStart,domInteractive:window.performance.timing.domInteractive}),this.Sr(this.Ui);return}this.xn.observe({type:"navigation",buffered:!0}),this.je=!0}static Sr(t){this.kt.forEach(e=>e(t))}static $r(t){this.Yb(t),this.kt.size===0&&this.Ln()}static Ln(){var t;this.je&&((t=this.xn)===null||t===void 0||t.disconnect(),this.je=!1,this.Ui=null,this.xn=this.zf())}constructor(t){this.A=t}observe(){s.Br(this.A)}disconnect(){s.$r(this.A)}}return s.je=!1,s.kt=new Set,s.Ui=null,s})(),Gm=(()=>{class s extends ue{constructor(){super(...arguments),this.ba=null,this.Gf=new Sa(t=>{if(this.ba)return;let e=this.Xb(t);e&&(this.ba=e,this.produceEvent(e))})}onStart(){if(this.ba){this.produceEvent(this.ba);return}this.Gf.observe()}onStop(){this.Gf.disconnect()}Xb(t){let e=Sa.getTimeOrigin();return{type:"PerformanceTiming",timings:{timeOrigin:e,requestStart:Math.floor(e+t.requestStart),domInteractive:Math.floor(e+t.domInteractive)},timestamp:C.now()}}}return s})(),qm="touchstart",Wm="touchmove",Ym="touchend",Xm=(()=>{class s{constructor(t){this.A=t}observe(){s.qf&&s.yh(this.A)}disconnect(){s.qf&&s.Eh(this.A)}static Kb(t,e){csArray.prototype.forEach.call(xs(s.kt),i=>i(t,e))}static yh(t){s.kt.has(t)||(s.kt.add(t),s.kt.size===1&&(s.Vn.onGesture(s.Kb),csArray.prototype.forEach.call(s.Hs,e=>Ct(e))))}static Eh(t){s.kt.delete(t),s.kt.size===0&&csArray.prototype.forEach.call(s.Hs,e=>It(e))}static Sh(t){if(s.Vn.isValidTouchEvent(t))switch(t.type){case"touchstart":s.Vn.processActionDown(t);break;case"touchmove":s.Vn.processActionMove();break;case"touchend":s.Vn.processActionUp(t);break}}}return s.Hs=[{boundElement:et.document,type:qm,listener:r=>s.Sh(r)},{boundElement:et.document,type:Wm,listener:r=>s.Sh(r)},{boundElement:et.document,type:Ym,listener:r=>s.Sh(r)}],s.qf=rn.isGestureDetectionSupported(),s.kt=new Set,s.Vn=new rn,s})(),Km=(()=>{class s extends ue{constructor(){super(),this.Un=new Xm(this.Dc.bind(this))}onStart(){this.Un.observe()}onStop(){this.Un.disconnect()}Dc(t){let e=this.Jb(t);e&&this.produceEvent(e)}Jb(t){if(!this.Qb(t))return null;let e=cp(t.target);return e?{type:"Gesture",targetId:e,data:{type:t.type,direction:t.direction,distance:t.distance,velocity:t.velocity,pageX:t.pageX,pageY:t.pageY}}:null}Qb(t){return t.target!==null&&!(ct(t.target)&&N.isMaskedElementChild(t.target))}}return s})(),Jm=(()=>{class s extends ue{constructor(){super(...arguments),this.Wf=new Vc(t=>this.Ta(t))}Ta({message:t,filename:e,lineno:i,colno:n}){t=t!=null?t:"[NO ERROR MESSAGE]",e=!e||Wt(e)?"":e,this.produceEvent({type:"JSError",message:t,filename:e,lineno:i,colno:n})}onStart(){this.Wf.observe()}onStop(){this.Wf.disconnect()}}return s})(),Qm=(()=>{class s extends js{constructor(t){super(),this.Zb=t,this.Nl=1024,this.Ml=150}isListening(t){return t.type==="JSError"}processEvent(t){return t.message=ht.truncate(t.message,this.Nl,ht.ELLIPSIS),t.filename=ht.truncate(t.filename,this.Ml,ht.ELLIPSIS),this.Zb(t)}}return s})();var Ts=[],pn=!1,qc=fs(ty,"executeTasks");function Zm(s){if(csArray.prototype.push.call(Ts,s),!pn){for(let r=0;r<3;r++)csSetTimeout(qc);pn=!0}}function ty(){let s=csDate.now();for(let r=0;r<Ts.length;r++)if(Ts[r](),csDate.now()-s>=35){Ts=csArray.prototype.slice.call(Ts,r+1),csSetTimeout(qc);return}Ts=[],pn=!1}var Ue=(()=>{let s;return function(r){r[r.Started=0]="Started",r[r.Stopped=1]="Stopped",r[r.Processing=2]="Processing",r[r.Completed=3]="Completed"}(s||(s={})),s})(),Wc=(()=>{class s{constructor(){this.Dt=new pi,this.Ot=Ue.Stopped,this.A=null,this.Xf=t=>{this.Ot===Ue.Stopped||!t||(this.A(t),this.Kf())}}get queueLength(){return this.Dt.length}start(t){if(this.A)throw new Error("callback already set");this.Ot=Ue.Started,this.A=t}push(t){this.Dt.push(t),this.vh()}stop(){this.A=null,this.Ot=Ue.Stopped,this.Dt.clear()}static pipe(t,e){let i=t,n=new csArray;for(let c of e){let l=new s;l.start(u=>{c.pushEvent(u)}),csArray.prototype.push.call(n,l),Q(i,u=>u.subscribe(g=>l.push(g))),i=[c]}let a=new ey(n);return Q(i,c=>c.subscribe(l=>a.push(l))),a}Jf(){return this.Ot===Ue.Stopped}as(){return this.Ot===Ue.Processing}Kf(){if(!this.Jf()){if(this.Dt.isEmpty){this.Ot=Ue.Completed;return}this.Ot=Ue.Processing,Zm(()=>{let t=this.Dt.pop();t instanceof Bn?t.complete(this.Xf):this.Xf(t)})}}vh(){this.Jf()||this.as()||this.Kf()}}return s})(),ey=(()=>{class s extends Wc{constructor(t){super(),this.Qf=t}get queueLength(){return csArray.prototype.reduce.call(this.Qf,(t,e)=>t+e.queueLength,0)}stop(){super.stop(),Q(this.Qf,t=>t.stop())}}return s})(),sy=(()=>{class s{constructor(t,e=[]){this.producers=t,this.processors=e,this.G=!1,this.kt=[]}get pendingEvents(){var t,e;return(e=(t=this.Dt)===null||t===void 0?void 0:t.queueLength)!==null&&e!==void 0?e:0}start(){if(this.G)throw new Error("Recording is already started.");let t=this.kt;this.Dt=Wc.pipe(this.producers,this.processors),this.Dt.start(e=>csArray.prototype.forEach.call(t,i=>i(e))),Q(this.producers,e=>e.start()),Q(this.processors,e=>e.start()),this.G=!0}stop(){this.Dt.stop(),this.kt.length=0;for(let t of this.producers)t.stop();for(let t of this.processors)t.stop();this.G=!1,this.kt=[]}subscribe(t){if(this.G)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.kt,t),()=>this.kt=csArray.prototype.filter.call(this.kt,e=>e!==t)}}return s})(),iy=(()=>{class s{constructor(t){this.Aa={},this.xe=new jn(t)}save({key:t,metadata:e,events:i}){this.xe.isThresholdReached()||(this.xe.addString(t),typeof i=="string"?this.xe.addString(i):this.xe.addArrayBuffer(i),!this.xe.isThresholdReached()&&(this.Aa[t]={metadata:e,events:i}))}recover(t){let e=[];csArray.prototype.forEach.call(this.iT(),i=>{let n=this.Aa[i];n!==void 0&&(delete n.metadata.datatype,csArray.prototype.push.call(e,n),this.rT(i))}),e.length!==0&&(t(e),this.xe.reset())}iT(){return Object.keys(this.Aa)}rT(t){delete this.Aa[t]}}return s})(),je=(()=>{let s;return function(r){r[r.NOT_STARTED=0]="NOT_STARTED",r[r.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",r[r.OPEN_FAILED=2]="OPEN_FAILED",r[r.READY=3]="READY"}(s||(s={})),s})(),ry=(()=>{class s{constructor(t,e,i){this.rr=t,this.nT=i,this.ji=je.NOT_STARTED,this.Ra=[],this._h=0,this.oT=self.origin,this.De=typeof window=="object"?"":"worker-",this.xe=new jn(e),this.Ll()}async Ll(){await this.Zf(),this.ji===je.READY?this.aT():this.nT(this.Ra)}aT(){csArray.prototype.forEach.call(this.Ra,t=>{this.save(t)}),this.Ra=[]}async save(t){try{if(this.ji===je.OPEN_IN_PROGRESS){csArray.prototype.push.call(this.Ra,t);return}if(this.ji!==je.READY||this.xe.isThresholdReached())return;let{key:e,metadata:i,events:n}=t;if(this.xe.addString(e),typeof n=="string"?this.xe.addString(n):this.xe.addArrayBuffer(n),this.xe.isThresholdReached())return;await this.ne.put(`${this.oT}/${e}`,new Response(n,{headers:i}))}catch{}}async recover(t){!this.ne&&(await this.Zf(),this.ji!==je.READY)||this.cT(t)}async Zf(){try{this.ji=je.OPEN_IN_PROGRESS,this.ne=await self.caches.open(`${this.De}${this.rr}`),this.ji=je.READY}catch{this.ji=je.OPEN_FAILED}}async cT(t){try{if(this._h++,this._h>1)return;let e=await this.ne.keys();if(e.length===0)return;let i=await this.ne.matchAll(),n=csArray.prototype.map.call(i,c=>{let l={};c.headers.forEach((g,d)=>{l[d]=g}),delete l["content-type"];let u=l.datatype;return delete l.datatype,u==="json"||u==="base64"?c.text().then(g=>({metadata:l,events:g})):c.arrayBuffer().then(g=>({metadata:l,events:g}))}),a=await Promise.all(n);await Promise.all(csArray.prototype.map.call(e,c=>this.ne.delete(c))),t(a),this.xe.reset()}catch{}finally{this._h--}}}return s})(),ny=(()=>{class s{constructor(t){try{this.lT(t)}catch{this.bh()}}lT(t){self.caches?this.hT(t):this.bh()}save(t){this.Ca.save(t)}recover(t){this.Ca.recover(t)}hT(t){this.Ca=new ry(t,s.tg,e=>{this.bh(e)})}bh(t){this.Ca=new iy(s.tg),t&&csArray.prototype.forEach.call(t,e=>{this.Ca.save(e)})}}return s.tg=1024*1024*16,s})(),oy=(()=>{class s{constructor(t,e){this.S=t,this.R=e,this.Hn=qt.ETR_DISABLED,this.Ia=qt.ETR_PENDING,this.Th=!0}getEtrStatus(t){t===void 0&&(t=this.R.getSession());let e=t==null?void 0:t.etrStatus;return this.eg()&&e===qt.ETR_SAVED_SESSION?e:this.Hn}onEventTriggerRecording(t,e){switch(e){case Ye.ETR_PAGE:this.sg(qt.ETR_SAVED_PAGE);break;case Ye.ETR_LEGACY:case Ye.ETR_SESSION:this.sg(qt.ETR_SAVED_SESSION);break}}onCollectStateChange(t,e){t===V.RECORDING_TEMPORARILY?this.Th=!0:this.Th=!1,t===V.ANALYTICS_ONLY&&e===Ht.ETR_ON?this.ig(this.Ia):this.ig(qt.ETR_DISABLED)}ig(t){this.Hn=t,this.Ia=qt.ETR_PENDING,this.rg(t),this.S.emitRecordingContextChange()}sg(t){this.Th?Number(t)>Number(this.Ia)&&(this.Ia=t):this.eg()&&Number(t)>Number(this.Hn)&&(this.Hn=t,this.rg(t),this.S.emitRecordingContextChange())}rg(t){let e=this.R.getSession();e!==null&&e.etrStatus===qt.ETR_NOT_SAVED_SESSION&&t===qt.ETR_SAVED_SESSION&&(e.etrStatus=t,this.R.setSession(e))}eg(){return this.Hn!==qt.ETR_DISABLED}}return s})(),M=(()=>{let s;return function(r){r[r.MUTATION_INSERT=1]="MUTATION_INSERT",r[r.MUTATION_REMOVE=2]="MUTATION_REMOVE",r[r.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",r[r.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",r[r.INITIAL_DOM=5]="INITIAL_DOM",r[r.SCROLL=6]="SCROLL",r[r.CLICK=8]="CLICK",r[r.RESIZE=9]="RESIZE",r[r.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",r[r.INPUT_SELECT=11]="INPUT_SELECT",r[r.INPUT_TEXT=12]="INPUT_TEXT",r[r.HASH_CHANGE=13]="HASH_CHANGE",r[r.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",r[r.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",r[r.MOUSE_OVER=16]="MOUSE_OVER",r[r.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",r[r.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",r[r.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",r[r.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",r[r.ATTACH_SHADOW=22]="ATTACH_SHADOW",r[r.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",r[r.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",r[r.PAGE_EVENT=27]="PAGE_EVENT",r[r.API_ERROR=28]="API_ERROR",r[r.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",r[r.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",r[r.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",r[r.KEY_DOWN=32]="KEY_DOWN",r[r.KEY_UP=33]="KEY_UP",r[r.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",r[r.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",r[r.USER_IDENTIFIER=38]="USER_IDENTIFIER",r[r.TOUCH_START=41]="TOUCH_START",r[r.TOUCH_MOVE=42]="TOUCH_MOVE",r[r.TOUCH_END=43]="TOUCH_END",r[r.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",r[r.POINTER_DOWN=47]="POINTER_DOWN",r[r.POINTER_MOVE=48]="POINTER_MOVE",r[r.POINTER_UP=49]="POINTER_UP",r[r.CUSTOM_ERROR=50]="CUSTOM_ERROR",r[r.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",r[r.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",r[r.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",r[r.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",r[r.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",r[r.SCREEN_RESIZE=65]="SCREEN_RESIZE",r[r.RESOURCE_HASHES=66]="RESOURCE_HASHES",r[r.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",r[r.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",r[r.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT",r[r.TEXT_REF=73]="TEXT_REF",r[r.TOUCH_CANCEL=74]="TOUCH_CANCEL",r[r.MUTATION_MOVE=75]="MUTATION_MOVE",r[r.STYLESHEET_RULE_UPDATE=76]="STYLESHEET_RULE_UPDATE",r[r.ADOPTED_STYLESHEET_RULE_UPDATE=77]="ADOPTED_STYLESHEET_RULE_UPDATE",r[r.VIDEO_PLAY=78]="VIDEO_PLAY",r[r.VIDEO_PAUSE=79]="VIDEO_PAUSE",r[r.VIDEO_SEEK=80]="VIDEO_SEEK",r[r.ADOPTED_STYLESHEET_DISABLED=98]="ADOPTED_STYLESHEET_DISABLED",r[r.STYLESHEET_DISABLED=99]="STYLESHEET_DISABLED",r[r.DEBUG=999]="DEBUG"}(s||(s={})),s})();var Ws=(()=>{let s;return function(r){r[r.SWIPE=0]="SWIPE",r[r.PINCH_IN=1]="PINCH_IN",r[r.PINCH_OUT=2]="PINCH_OUT",r[r.LONG_PRESS=3]="LONG_PRESS",r[r.TAP=4]="TAP",r[r.DOUBLE_TAP=5]="DOUBLE_TAP"}(s||(s={})),s})(),ay=(()=>{class s{constructor(t=100){this.uT=t,this.Pa={},this.Bn=null,this.ah="original-resource-name"}onEvent(t){this.dT=t}processEvent(t){this.pT(t.resourceId,t.resource.hash,t.originalResourceName),this.fT(t)}flushEvents(){this.Bn&&csClearTimeout(this.Bn),this.ng()}onSendStaticResource(t){this.fT=t}ng(){if(!Object.keys(this.Pa).length)return;let t={type:M.RESOURCE_HASHES,date:C.now(),args:[this.Pa]};this.Bn=null,this.Pa={},this.dT(t)}pT(t,e,i){let n=e;i&&(n+=`?${this.ah}=${i}`),this.Pa[t]=n,!this.Bn&&(this.Bn=window.csSetTimeout(()=>this.ng(),this.uT))}}return s})();function cy(s,r,t){let{timestamp:e}=s;switch(s.domEvent){case"initialDOM":{let{initialDOM:i}=s,n={type:M.INITIAL_DOM,date:e,args:[i]};t.emitInitialDomDone(n);break}case"nodesAdded":{csArray.prototype.forEach.call(s.nodes,i=>{r({type:M.MUTATION_INSERT,date:e,args:[s.target,s.nextSibling,i]})});break}case"nodesMoved":{for(let i of s.nodesIds)r({type:M.MUTATION_MOVE,date:e,args:[i,s.nextSibling,s.target]});break}case"nodesRemoved":{csArray.prototype.forEach.call(s.nodesIds,i=>{r({type:M.MUTATION_REMOVE,date:e,args:[i]})});break}case"attributeChanged":{let{target:i,namespace:n,attribute:a,newValue:c}=s;r({type:M.MUTATION_ATTRIBUTE,date:e,args:[i,n,a,c]});break}case"characterDataChanged":{let{target:i,newValue:n}=s;r({type:M.MUTATION_CHARACTER_DATA,date:e,args:[i,n]});break}case"cssRuleInserted":{let{target:i,rule:n,index:a}=s,c=J(a)?[i,n,a]:[i,n];r({type:M.STYLESHEET_RULE_INSERT,date:e,args:c});break}case"cssRuleDeleted":{let{target:i,index:n}=s;r({type:M.STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"cssRuleUpdated":{let{target:i,rule:n,index:a}=s;r({type:M.STYLESHEET_RULE_UPDATE,date:e,args:[i,n,a]});break}case"cssStyleSheetDisabled":{let{target:i,disabled:n}=s;r({type:M.STYLESHEET_DISABLED,date:e,args:[i,n]});break}case"shadowRootAttached":{let{target:i,shadowRoot:n}=s;r({type:M.ATTACH_SHADOW,date:e,args:[i,n]});break}case"adoptedStyleSheetRegistered":{let{sheetId:i,cssRules:n,disabled:a}=s;r({type:M.REGISTER_ADOPTED_STYLE_SHEET,date:e,args:[i,{cssRules:n,disabled:a}]});break}case"adoptedStyleSheetsSet":{let{target:i,sheetsIds:n}=s;r({type:M.SET_ADOPTED_STYLE_SHEETS,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleInserted":{let{sheetId:i,rule:n,index:a}=s,c=J(a)?[i,n,a]:[i,n];r({type:M.ADOPTED_STYLESHEET_RULE_INSERT,date:e,args:c});break}case"adoptedStyleSheetRuleDeleted":{let{sheetId:i,index:n}=s;r({type:M.ADOPTED_STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleUpdated":{let{sheetId:i,rule:n,index:a}=s,c=[i,n,a];r({type:M.ADOPTED_STYLESHEET_RULE_UPDATE,date:e,args:c});break}case"adoptedStyleSheetDisabled":{let{sheetId:i,disabled:n}=s,a=[i,n];r({type:M.ADOPTED_STYLESHEET_DISABLED,date:e,args:a});break}default:j.error("translateDOMEvent: DOMEvent not supported");break}}function ly(s){let r=hy(s.data);return{type:M.GESTURE_RECOGNITION,args:[s.targetId,r],date:s.timestamp}}function hy(s){let r={type:uy(s.type)};for(let t in s){let e=s[t];e!==void 0&&t!=="type"&&(r[t]=e)}return r}function uy(s){switch(s){case yt.DRAG:case yt.FLICK:return Ws.SWIPE;case yt.LONG_PRESS:return Ws.LONG_PRESS;case yt.TAP:return Ws.TAP;case yt.PINCH_IN:return Ws.PINCH_IN;case yt.PINCH_OUT:return Ws.PINCH_OUT}}function dy(s,r){let t=[],e=!1;return{push(i){if(csArray.prototype.push.call(t,i),t.length===r.batchSize){this.flush();return}r.autoFlushDelay&&r.autoFlushDelay>0&&!e&&(e=!0,csSetTimeout(()=>{e=!1,t.length>0&&this.flush()},r.autoFlushDelay))},flush(){if(!t.length)return;let i=t;t=[],s(i)}}}var py=20;function fy(s){return dy(r=>{let t={visibleInViewPort:r},e={type:M.TEXT_VISIBILITY,date:C.now(),args:[t]};s(e)},{batchSize:py,autoFlushDelay:1e3})}var Lr=(()=>{let s;return function(r){r.REQUEST_START="requestStart",r.DOM_INTERACTIVE="domInteractive",r.TIME_ORIGIN="timeOrigin"}(s||(s={})),s})();function gy(s){return{type:M.PERFORMANCE_TIMINGS,args:[{performanceTiming:Lr.REQUEST_START,timestamp:s.timings.requestStart},{performanceTiming:Lr.DOM_INTERACTIVE,timestamp:s.timings.domInteractive},{performanceTiming:Lr.TIME_ORIGIN,timestamp:s.timings.timeOrigin}],date:s.timestamp}}function my(s){switch(s.inputType){case"text":return{type:M.INPUT_TEXT,args:[s.target,s.value],date:s.timestamp};case"select":return{type:M.INPUT_SELECT,args:[s.target,s.selectedIndex],date:s.timestamp};case"checkable":return{type:M.INPUT_CHECKABLE,args:[s.target,s.checked],date:s.timestamp}}}var yy=500,Vr=0;function Ey(){return{processEvent(s,r){if(s.originalEvent.type===M.PERFORMANCE_RESOURCE_TIMING)return Vr>=yy?null:(Vr+=1,r({...s.originalEvent,date:s.timestamp}));r(s.originalEvent)},reset(){Vr=0}}}function Sy(s){switch(s.videoEventType){case"play":return{type:M.VIDEO_PLAY,args:[s.nodeId],date:s.timestamp};case"pause":return{type:M.VIDEO_PAUSE,args:[s.nodeId],date:s.timestamp};case"seeked":{let r=s;return{type:M.VIDEO_SEEK,args:[r.nodeId,r.newTimePositionInSec],date:s.timestamp}}default:return null}}var vy=(()=>{class s{get pendingEvents(){return this.Oa.pendingEvents}constructor(t,e,i,n,a){this.Oa=t,this.S=e,this.Le=i,this.ls=n,this.Is=a,this.oe=()=>{},this.Na=()=>{},this.og=fy(c=>this.oe(c))}start(){var t,e;this.ag=Ey(),this.Oa.subscribe(i=>{var n,a,c,l,u,g;let d=i,{timestamp:E}=d;switch(d.type){case"Legacy":{let y=d.eventType==="user"?(n=this.Na)!==null&&n!==void 0?n:()=>{}:this.oe;this.ag.processEvent(d,y)}break;case"CustomElementRegistration":{this.oe({type:M.CUSTOM_ELEMENT_REGISTRATION,date:E,args:[d.tagName]});break}case"DomEvent":{cy(d,this.oe,this.S);break}case"InputEvent":{let y=my(d);(a=this.Na)===null||a===void 0||a.call(this,y);break}case"encryptedCharacterDataChanged":{let{target:y,rawData:v,encryptedData:I,encryptionMetadata:P}=d;this.oe({type:M.MUTATION_ENCRYPTED_CHARACTER_DATA,date:E,args:[y,v,I,P]});break}case"StaticResource":{let{url:y}=d;this.oe({type:M.STATIC_RESOURCE_URL,date:E,args:[y]});break}case"ResizeMaskedElement":{let{target:y,width:v,height:I}=d;this.oe({type:M.MUTATION_ATTRIBUTE,date:E,args:[y,"","style",`width:${v}px !important;height:${I}px !important;`]});break}case"Gesture":{let y=ly(i);(c=this.Na)===null||c===void 0||c.call(this,y);break}case"TextVisibility":{this.og.push(d.text);break}case"StaticResourceManagerEvent":{(l=this.Le)===null||l===void 0||l.processEvent(d);break}case"screenResize":{let{width:y,height:v}=d,I={type:M.SCREEN_RESIZE,date:E,args:[y,v]};this.oe(I);break}case"viewportResize":{let{width:y,height:v}=d,I={type:M.RESIZE,date:E,args:[y,v]};this.oe(I);break}case"PerformanceTiming":{this.oe(gy(d));break}case"CustomError":{let y=(u=this.Is)===null||u===void 0?void 0:u.translate(d);y&&this.oe(y);break}case"JSError":{let y=(g=this.ls)===null||g===void 0?void 0:g.translate(d);y&&this.oe(y);break}case"VideoEvent":{let y=Sy(d);y&&this.oe(y);break}case"warning":{j.warn(d.message);break}default:j.error(`WebRecorderEventTranslator: Event not supported (${d.type})`);break}}),this.S.emitInitialDomStart(),(t=this.ls)===null||t===void 0||t.start(),(e=this.Is)===null||e===void 0||e.start(),this.Oa.start()}stop(){var t,e,i;this.reset(),this.flush(),this.Oa.stop(),(t=this.Le)===null||t===void 0||t.flushEvents(),(e=this.ls)===null||e===void 0||e.stop(),(i=this.Is)===null||i===void 0||i.stop()}flush(){this.og.flush()}onEvent(t,e){var i;this.oe=t,this.Na=e,(i=this.Le)===null||i===void 0||i.onEvent(n=>this.oe(n))}reset(){this.ag.reset()}}return s})();var _y=(()=>{class s{constructor(t){this.Ma=t,this.un=20,this.Mi=0,this.V=!1}translate(t){if(this.Mi>=this.un)return this.Ma.stop(),null;this.Mi+=1;let{filename:e,message:i,lineno:n,colno:a,timestamp:c}=t;return{type:M.JAVASCRIPT_ERROR,date:c,args:[{errorType:"jsError",message:i,filename:e,lineno:n,colno:a}]}}start(){this.V||(this.Mi=0,this.V=!0)}stop(){this.V=!1}}return s})(),wy=(()=>{class s extends ue{constructor(t){super(),this.He=t}subscribe(t){return super.subscribe(t)}onStart(){Q(this.He,t=>{t.onEvent(e=>{var i;return this.vr(e,(i=t.eventType)!==null&&i!==void 0?i:"browser")})}),Q(this.He,t=>{var e;(e=t.start)===null||e===void 0||e.call(t)})}onStop(){Q(this.He,t=>{var e;return(e=t.stop)===null||e===void 0?void 0:e.call(t)})}vr(t,e){this.produceEvent({timestamp:C.now(),type:"Legacy",originalEvent:t,eventType:e})}}return s})(),Rt=(()=>{let s;return function(r){r[r.Active=0]="Active",r[r.Paused=1]="Paused",r[r.Stopped=2]="Stopped"}(s||(s={})),s})(),by=(()=>{class s{constructor(t,e,i=[]){this.vr=t,this.Ah=e,this.gT=i,this.ka=null,this.Ot=Rt.Active,this.nt=[]}reset(){this.ka=null,this.nt=[],this.Ot=Rt.Active}disconnect(){this.Ot=Rt.Stopped}mT(){this.Ah(Rt.Paused),this.Ot=Rt.Paused,csSetTimeout(()=>{this.Ot===Rt.Paused&&this.Rh()},s.STOP_TIMEOUT)}yT(){this.Ah(Rt.Active),this.Ot=Rt.Active,Q(this.nt,this.vr),this.nt=[]}Rh(){this.nt=[],this.Ah(Rt.Stopped),this.Ot=Rt.Stopped}pushEvent(t,e){if(e.isUserEvent&&(this.ka=t.date,this.Ot!==Rt.Active)){this.yT(),this.vr(t);return}if(this.ET(t)){this.vr(t);return}switch(this.Ot){case Rt.Active:if(this.ST(t,e)){this.mT(),csArray.prototype.push.call(this.nt,t);return}this.vr(t);break;case Rt.Paused:csArray.prototype.push.call(this.nt,t);break;case Rt.Stopped:break}}ST(t,e){return!e.isUserEvent&&this.ka!==null&&t.date-this.ka>s.INACTIVITY_TIMEOUT}ET(t){return csArray.prototype.indexOf.call(this.gT,t.type)>-1}}return s.INACTIVITY_TIMEOUT=5e3,s.STOP_TIMEOUT=5e3,s})(),Ty=2e3,Ay=(()=>{class s extends Pt{constructor(t,e,i,n,a,c,l,u,g,d,E,y,v,I,P=[],S,_,D,O,T){super(),this.f=t,this.F=e,this.vT=i,this.Xe=n,this.Y=a,this.R=c,this.ge=l,this.pt=u,this.fe=g,this.ot=d,this.X=E,this.xt=y,this.Ct=v,this.Be=I,this.He=P,this.cg=S,this.Yt=_,this._r=D,this.ls=O,this.Is=T,this.Xs=0,this.zs=new vc,this.wr={allowFromQuotaService:!0,allowFromSerialization:!0},this.lg=cr(()=>{this.F.eventsCount()>0&&this.hg()},Ty),this.Ps=L=>this.processBrowserEvent(L),this.Fn=L=>this.Mt(L),this.ug=0,this.Da=0,this.qe=new bc,this.Ch=!1,this.dg=50*1024,this.Hi=!1,this.$n=!1,this.Li=[],this.xa=new by(L=>this.Q(L),L=>{switch(L){case Rt.Active:this._T();break;case Rt.Stopped:this.wT();break}},[M.RESOURCE_HASHES,M.TEXT_VISIBILITY,M.API_ERROR,M.JAVASCRIPT_ERROR]),this.pg=L=>{this.xt.removeBatchInProgress(`${L.params.sn}.${L.params.pn}.${L.params.ri}`)}}init(){this.Ih(),this.X.onLoad(this.pg),this.X.onError(this.pg)}_T(){csArray.prototype.forEach.call(this.cg,t=>t.start())}wT(){csArray.prototype.forEach.call(this.cg,t=>t.stopForInactivity())}Ih(){var t,e,i;this.Be.onEvent(this.Ps,this.Fn),(t=this.ot)===null||t===void 0||t.onInputNodeToEncrypt(this.Fn),(e=this.ot)===null||e===void 0||e.onApiErrorToEncrypt(n=>{this.fg(n)}),(i=this.ot)===null||i===void 0||i.onUserIdentifierToEncrypt(this.Ps),this.qe.onEvent(n=>{if(csSetTimeout(()=>this.Bi("page-state",n)),n!==Yt.Visible){if(n===Yt.Blur)return this.gg();if(!this.Ch)return this.Ch=!0,csSetTimeout(()=>{this.Ch=!1}),n===Yt.Hidden?this.gg():this.bT()}})}isRecording(){return this.R.hasValidSession()&&this.isStarted}gg(){if(!this.canSendEvents())return;this.Be.flush(),this.xt.saveBatchesInProgress(),Q(this.He,a=>{var c,l;return Q((l=(c=a.getPendingEvents)===null||c===void 0?void 0:c.call(a))!==null&&l!==void 0?l:[],u=>this.F.addEvent(u))});let t=this.F.getEvents();if(t.length===0)return;this.Bi("pending-events",this.Be.pendingEvents);let e=this.X.getQueryParams();e.rst=this.getRecordingStartTimestamp(),e.let=this.getRecordingLastEventTimestamp();let i=this.Xe.getCurrentIndex();e.ri=i.toString(),this.Ct.removeQueryParams(),this.Ct.setQueryParams(e),this.Da=t[t.length-1].date;let n=this.F.stringifyEvents();if(n.length>this.dg){let a=this.mg();if(a.length>0){let c=Ms(a);this.Ct.send(c)||this.xt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:c}),this.Xe.increment()}if(this.F.eventsCount()>0){e.ri=this.Xe.getCurrentIndex().toString();let c=this.F.stringifyEvents();this.xt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:c}),this.Xe.increment()}}else this.Ct.send(n)||this.xt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:n}),this.Xe.increment();this.Ct.removeQueryParams(),this.F.clearEvents()}bT(){if(!this.canSendEvents())return;this.Be.flush();let t=this.X.getQueryParams();this.xt.saveBatchesInProgress(),t.rst=this.getRecordingStartTimestamp(),delete t.ri,t.hlm="true",this.Ct.removeQueryParams(),Q(this.He,n=>{var a,c;return Q((c=(a=n.getPendingEvents)===null||a===void 0?void 0:a.call(n))!==null&&c!==void 0?c:[],l=>this.F.addEvent(l))});let e=this.F.getEvents();if(e.length===0){delete t.let,delete t.rst,this.Ct.setQueryParams(t),this.Ct.send(),this.Ct.removeQueryParams();return}this.Bi("pending-events",this.Be.pendingEvents),this.Da=e[e.length-1].date,t.let=this.getRecordingLastEventTimestamp(),this.Ct.setQueryParams(t);let i=this.F.stringifyEvents();if(i.length>this.dg){let n=this.mg();if(n.length>0){let a=Ms(n);this.Ct.send(a)||this.xt.save({key:`${t.sn}.${t.pn}.last`,metadata:{...t,datatype:"json"},events:a})}else delete t.let,delete t.rst,delete t.ri,this.Ct.removeQueryParams(),this.Ct.setQueryParams(t),this.Ct.send(),this.Ct.removeQueryParams();if(this.F.eventsCount()>0){t.rst=this.getRecordingStartTimestamp(),t.let=this.getRecordingLastEventTimestamp();let a=this.Xe.getCurrentIndex();t.ri=a.toString();let c=this.F.stringifyEvents();this.xt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:c}),this.Xe.increment()}}else this.Ct.send(i)||(this.xt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:i}),this.Xe.increment());this.Ct.removeQueryParams(),this.F.clearEvents()}blockSendingEventsFromQuotaService(){this.wr.allowFromQuotaService=!1}allowSendingEventsFromQuotaService(){this.wr.allowFromQuotaService=!0}blockSendingEventsFromSerialization(){this.wr.allowFromSerialization=!1}allowSendingEventsFromSerialization(){this.wr.allowFromSerialization=!0}canSendEvents(){return this.wr.allowFromQuotaService&&this.wr.allowFromSerialization}onIframeJavascriptError(t){var e;if(this.ge&&this.ls){(e=this.ge)===null||e===void 0||e.anonymize(t);let i=this.ls.translate({message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename,timestamp:C.now(),type:"JSError"});i&&this.Ps(i)}}onIframeCustomError(t){if(this.Is){let e=this.Is.translate({...t,timestamp:C.now(),type:"CustomError"});e&&this.Ps(e)}}onIframeDetailedApiError(t){this.yg(t)}onIframeRecordingUserEvent(t){for(let e of t)this.Mt(e)}onIframeRecordingBrowserEvent(t){if(this.isStarted)for(let e of t)this.processBrowserEvent(e)}processBrowserEvent(t){this.Y.isCurrentPageviewValid()&&this.xa.pushEvent(t,{isUserEvent:!1})}Mt(t){this.Y.refreshSession(),this.Y.isSessionValid()&&this.xa.pushEvent(t,{isUserEvent:!0})}Q(t){Lt.general.nbEvents.increase(),this.F.addEvent(t),this.F.isThresholdReached()?this.pushEvents():this.F.isFull()&&this.lg(),this.Eg(t)}Eg(t){this.f.emitDebugEvents&&this.zs.emit("recordingEvent",{...t,typeName:M[t.type]})}onStart(){var t;this.Bi("tag-version","15.133.4"),this.Bi("page-state",document.visibilityState),this.xa.reset(),this.qe.start(),this.initStates(),this.Be.start(),this.pt&&this.fe&&this.pt.subscribe(s.jt,e=>this.yg(e),{detailedEvent:!0}),this.f.emitDebugEvents&&this.zs.emit("replayRecordingStarted"),csArray.prototype.forEach.call(this.Li,e=>this.Sg(e)),this.Li=[],this.Hi&&((t=this.Yt)===null||t===void 0||t.enableOnlineAssets(),this.Hi=!1)}onStop(){var t;this.qe.stop(),this.pt&&this.pt.unsubscribe(s.jt),this.Be.stop(),this.xa.disconnect(),(t=this.Yt)===null||t===void 0||t.disableOnlineAssets()}clearStates(){this.Be.flush(),this.lg.cancel(),this.pushEvents(),this.X.removeQueryParams()}initStates(){this.ug=C.now(),this.Xe.reset(),this.Xs=0,this.X.setQueryParams(this.vT.getRequestParameters())}pushEvents(){Q(this.He,t=>{var e;return(e=t.flushEvents)===null||e===void 0?void 0:e.call(t)}),this.F.eventsCount()>0&&(this.isStarted?this.hg():this.F.clearEvents())}hg(){if(!this.canSendEvents())return;let t=this.F.getEvents();this.Da=t[t.length-1].date;let e=this.Xe.getCurrentIndex();this.X.setQueryParams({ri:e.toString(),rst:this.getRecordingStartTimestamp(),let:this.getRecordingLastEventTimestamp()});let i=this.X.getQueryParams();this.xt.addBatchInProgress(`${i.sn}.${i.pn}.${e}`,this.X.getQueryParams(),t),this.X.send(t),this.Xe.increment(),this.F.clearEvents(),this.vg&&this.vg()}addInitialDom(t){this.F.addEventByTimestamp(t),this.Eg(t)}yg(t){if(this._r&&(t.plainCustomRequestHeaders||t.plainCustomResponseHeaders||t.requestBodyAttributes||t.responseBodyAttributes||t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody)){if(this._r.truncate(t),this.ot){this.ot.registerApiErrorToEncrypt(t);return}t.customRequestHeaders="",t.customResponseHeaders="",t.requestBodyAttributes="",t.responseBodyAttributes="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.fg(t)}fg(t){if(this.Xs<s.TT){let e={type:M.API_ERROR,date:C.now(),args:[this.fe.anonymize(t)]};this.Ps(e),this.Xs=this.Xs+1,q.counters.networkRequests.count("collected")}}AT(t){t===Ye.ETR_SESSION?this.X.setQueryParams({[s.RT]:s._g}):t===Ye.ETR_PAGE&&this.X.setQueryParams({[s.CT]:s._g})}clearEvents(){this.F.clearEvents()}onCustomJavaScriptErrorEvent(t){var e;let i=(e=this.ls)===null||e===void 0?void 0:e.translate({type:"JSError",timestamp:C.now(),message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename});i&&this.Ps(i)}onCustomErrorEvent(t){var e;let i=(e=this.Is)===null||e===void 0?void 0:e.translate({type:"CustomError",timestamp:C.now(),message:t.message,attributes:t.attributes});i&&this.Ps(i)}onPageEvent(t){this.wg(t)}onUserIdentifierEvent(t){var e;let i={userIdentifier:t,date:C.now(),keyId:this.f.encryptionPublicKeyId};(e=this.ot)===null||e===void 0||e.registerUserIdentifierToEncrypt(i)}onEventTriggerRecording(t,e){this.isStarted?this.Sg({eventName:t,eventType:e}):csArray.prototype.push.call(this.Li,{eventName:t,eventType:e})}Sg(t){this.AT(t.eventType),this.wg(t.eventName),this.pushEvents()}wg(t){let e={type:M.PAGE_EVENT,date:C.now(),args:[{eventName:csString.prototype.slice.call(t,0,s.IT)}]};this.F.addEvent(e)}triggerUnanonymizationConsentGranted(){let t={date:C.now(),type:M.UNANONYMIZED_CONSENT_GRANTED};this.F.addEvent(t)}triggerUnanonymizationConsentWithdrawn(){let t={date:C.now(),type:M.UNANONYMIZED_CONSENT_WITHDRAWN};this.F.addEvent(t)}triggerRecordingForSessionGranted(){this.Bi("consent-granted")}triggerRecordingForSessionWithdrawn(){this.Bi("consent-withdrawn")}activateOnlineAssetsOnNextPageview(){this.$n=!0}getStaticResourceManagerStatus(){return this.Yt?{isStarted:this.f.useStaticResourceManager&&dn.isSupported(),onlineAssets:{activated:this.Yt.isOnlineAssetsActivated(),enabledOnNextPageview:this.$n}}:null}resetOnlineAssetsOnPageview(){this.Hi=!1,this.$n=!1}updateOnlineAssetsOnPageview(){this.Yt&&this.$n&&(this.Hi=!0,this.$n=!1)}onRecordingRequestSent(t){this.vg=t}getRecordingStartTimestamp(){return this.ug.toString()}getRecordingLastEventTimestamp(){return this.Da.toString()}onOptOut(){Q(this.He,t=>{var e;return(e=t.releaseResources)===null||e===void 0?void 0:e.call(t)})}Bi(t,e){if(!this.f.emitRecordInfoEvents)return;let i={date:C.now(),type:M.RECORDING_INFO_EVENT,args:e==null?[t]:[t,e]};this.F.addEvent(i)}mg(){return this.F.extractEvents(M.API_ERROR,M.JAVASCRIPT_ERROR,M.CUSTOM_ERROR,M.TEXT_VISIBILITY,M.POINTER_DOWN)}}return s.jt="RecordingService",s.IT=255,s.TT=20,s.CT="etrp",s.RT="etrs",s._g="1",H([kt("addInitialDom")],s.prototype,"addInitialDom",null),s})(),Ry=(()=>{class s extends Pt{constructor(t,e,i){super(),this.Zt=t,this.Ct=e,this.X=i,this.Ph=!1,this.zn={},this.PT=n=>{if(n.length!==0)for(let a of n){let{metadata:c,events:l}=a;this.OT(c.rt)&&this.X.send(l,c)}},window.addEventListener("focus",()=>{this.recover()})}onStart(){this.zn={}}onStop(){}recover(){this.Zt.recover(this.PT)}addBatchInProgress(t,e,i){this.zn[t]={metadata:{...e},events:i}}removeBatchInProgress(t){delete this.zn[t]}blockSendingLastMessage(){this.Ph=!1}allowSendingLastMessage(){this.Ph=!0}sendLastMessageBeacon(){if(this.Ph){let{ri:t,rst:e,let:i,...n}=this.X.getQueryParams();n.hlm="true",this.Ct.setQueryParams(n),this.Ct.send()}}OT(t){return!!t&&csString.prototype.indexOf.call(t,V.RECORDING_TEMPORARILY)===-1}saveBatchesInProgress(){csArray.prototype.forEach.call(Object.keys(this.zn),t=>{let{metadata:e,events:i}=this.zn[t];this.Zt.save({key:`${e.sn}.${e.pn}.${e.ri}`,metadata:{...e,datatype:"json"},events:csJSON.stringify(i)})})}save(t){this.Zt.save(t)}}return H([x("RecordingRecovery")],s.prototype,"recover",null),s})(),Cy=(()=>{class s{constructor(){this.La=1}getCurrentIndex(){return this.La}increment(){this.La+=1}reset(){this.La=1}getRequestParameters(){return{ri:`${this.La}`}}}return s})(),Iy=(()=>{let s;return function(r){r[r.NOT_EXIST=2]="NOT_EXIST"}(s||(s={})),s})(),Py=8*1024*1024,Oy=(()=>{class s extends Pt{constructor(t,e,i){super(),this.Le=t,this.bg=e,this.Et=i,this.Oh={},this.Tg=new Set,this.as=!1}initState(){ka()&&(this.Ue=this.Et.getRequestParameters(),this.NT=`${this.bg}/exist?${oi.toQuery(this.Ue)}`,this.MT=`${this.bg}/putTag?${oi.toQuery(this.Ue)}`,this.Ag=ii(async()=>{if(this.as){this.Ag();return}this.as=!0;try{await this.kT()}finally{this.as=!1}},300),this.Le.onSendStaticResource(t=>{this.Rg(t)}))}onStart(){}onStop(){}onIframeStaticResource(t){this.Rg(t)}Rg(t){this.Cg(t.resource.hash,t.resource.data),t.nestedResources&&t.nestedResources.length>0&&csArray.prototype.forEach.call(t.nestedResources,e=>{this.Cg(e.hash,e.data)})}Cg(t,e){this.Tg.has(t)||(this.Tg.add(t),this.Oh[t]=e,this.Ag())}async kT(){let t=this.Oh;this.Oh={};let e=await this.DT(t);if(!e.length)return;let i=this.xT(e);await Promise.all(csArray.prototype.map.call(i,n=>window.fetch(this.MT,{method:"POST",body:n})))}async LT(t){try{let e=Object.keys(t);if(!e.length)return[];let i={projectId:this.Ue.pid,filter:Iy.NOT_EXIST,hashes:e,touch:!0};return await(await window.fetch(this.NT,{method:"POST",body:csJSON.stringify(i)})).json()}catch{return[]}}async DT(t){let e=[],i=await this.LT(t);return csArray.prototype.forEach.call(i,n=>{let a=t[n];a?csArray.prototype.push.call(e,{hash:n,data:a}):j.warn("SRM: received unknown hash: "+n)}),e}xT(t){let e=0,i=[new FormData];for(let n of t){let{data:a,hash:c}=n,l=i.length-1;if(e=e+a.size,e<Py)i[l].append("",a,c);else{let u=new FormData;u.append("",a,c),e=a.size,csArray.prototype.push.call(i,u)}}return i}}return s})(),Ny=2*1e3*1024,My=200,ky=(()=>{class s{constructor(t=[],e=Ny){this.Ut=t,this.Nh=new jn(e)}addEvent(t){this.Nh.addString(Ms(t)),csArray.prototype.push.call(this.Ut,t)}addEventByTimestamp(t){let e=0;for(;e<this.Ut.length&&!(this.Ut[e].date>=t.date);e+=1);csArray.prototype.splice.call(this.Ut,e,0,t)}eventsCount(){return this.Ut.length}clearEvents(){this.Nh.reset(),this.Ut=[]}isFull(){return this.eventsCount()>=My}isThresholdReached(){return this.Nh.isThresholdReached()}getEvents(){return this.Ut}extractEvents(...t){let e=[],i=[];return csArray.prototype.forEach.call(this.Ut,n=>{csArray.prototype.indexOf.call(t,n.type)!==-1?csArray.prototype.push.call(e,n):csArray.prototype.push.call(i,n)}),this.Ut=i,e}stringifyEvents(){return Ms(this.Ut)}rI(t){t.type===M.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)}}return H([kt("RecordingBatch.addEvent")],s.prototype,"addEvent",null),s})();function Dt(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var Dy=(()=>{class s{constructor(t,e){this.Nt=t,this.O=e,this.Hs=[{boundElement:window,type:"hashchange",listener:()=>this.hashChangeListener()},{boundElement:document,type:"visibilitychange",listener:()=>this.visibilityChangeListener()}]}onEvent(t){this.L=t}start(){this.vi(),this.triggerInitialEvents()}stop(){this._i()}vi(){csArray.prototype.forEach.call(this.Hs,t=>Ct(t))}_i(){csArray.prototype.forEach.call(this.Hs,t=>It(t))}triggerInitialEvents(){this.hashChangeListener()}hashChangeListener(){let t={type:M.HASH_CHANGE,args:[this.O.anonymizePII(this.Nt.href)],date:C.now()};this.L(t)}visibilityChangeListener(){let t={type:M.VISIBILITY_CHANGE,args:[document.visibilityState],date:C.now()};this.L(t)}}return H([x("hashChange")],s.prototype,"hashChangeListener",null),H([x("visibilityChange")],s.prototype,"visibilityChangeListener",null),s})();function xy(s){if(!$(s))return null;let t=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(s);return t?Number(t[2]):null}var Ly=!!window.chrome,Vy=33,Uy=(()=>{class s{constructor(){this.eventType="user",this.kh=[],this.zT=[{type:"pointerup",listener:e=>this.pointerUpListener(e),boundElement:document},{type:"pointermove",listener:e=>this.pointerMoveListener(e),boundElement:document},{type:"pointerdown",listener:e=>this.pointerDownListener(e),boundElement:document}],this.GT=[{type:"touchstart",listener:e=>this.touchStartListener(e),boundElement:document},{type:"touchmove",listener:e=>this.touchMoveListener(e),boundElement:document},{type:"touchend",listener:e=>this.touchEndCancelListener(e),boundElement:document},{type:"touchcancel",listener:e=>this.touchEndCancelListener(e),boundElement:document}],this.Ua=[{type:"click",listener:e=>this.clickListener(e),boundElement:document},{type:"keyup",listener:e=>this.keyUpListener(e),boundElement:document},{type:"keydown",listener:e=>this.keyDownListener(e),boundElement:document},{type:"copy",listener:e=>this.copyListener(e),boundElement:document},{type:"cut",listener:e=>this.cutListener(e),boundElement:document},{type:"paste",listener:e=>this.pasteListener(e),boundElement:document},{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e)),boundElement:document},{type:"mouseover",listener:e=>this.mouseOverListener(e),boundElement:document}],this.Dh=[{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e))}];let t=xy(window.navigator.userAgent);(t===null||t&&t>=16)&&csArray.prototype.push.call(this.Dh,{type:"mouseover",listener:e=>this.mouseOverListener(e)}),this.de=new Vs((e,i)=>{switch(i){case"initial":case"added":this.vi(e);break;case"removed":this._i(e);break}})}init(){this.qT(),this.WT(),this.Jc()}onEvent(t){csArray.prototype.push.call(this.kh,t)}ae(t,e=!1){csArray.prototype.forEach.call(this.kh,i=>i(t,e))}start(){this.lh(),this.vi(document),this.de.observe()}stop(){this._i(document),this.de.disconnect(),this.kh=[]}WT(){this.YT()&&csArray.prototype.push.call(this.Ua,...this.zT)}qT(){this.XT()&&csArray.prototype.push.call(this.Ua,...this.GT)}vi(t){Yi(t)?csArray.prototype.forEach.call(this.Ua,e=>Ct(e)):csArray.prototype.forEach.call(this.Dh,e=>{let i={type:e.type,listener:e.listener,boundElement:t};Ct(i)})}_i(t){Yi(t)?csArray.prototype.forEach.call(this.Ua,e=>It(e)):csArray.prototype.forEach.call(this.Dh,e=>{let i={type:e.type,listener:e.listener,boundElement:t};It(i)})}YT(){return"PointerEvent"in window&&typeof window.PointerEvent=="function"}XT(){return"TouchEvent"in window&&typeof window.TouchEvent=="function"}lh(){this.KT()}KT(){let t=Cs.getScrollContainer()||document,e=st(t),i=this.Ig(t);if(i.top!==0||i.left!==0){let n={type:M.SCROLL,args:[e,i.left,i.top],date:C.now()};this.ae(n,!0)}}Ig(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}}scrollListener(t){if(N.isMaskedElement(t)||N.isMaskedElementChild(t))return;let e=st(t),i=this.Ig(t),n={type:M.SCROLL,args:[e,i.left,i.top],date:C.now()};this.ae(n)}mouseOverListener(t){if(N.isMaskedElementChild(t.target))return;let e=st(t.target),i={type:M.MOUSE_OVER,args:[e],date:C.now()};this.ae(i)}clickListener(t){let e=mt(t);if(N.isMaskedElementChild(e))return;let i=st(e),n={type:M.CLICK,args:[i],date:C.now()};this.ae(n)}keyUpListener(t){let e=mt(t);if(N.isMaskedElementChild(e))return;let i=st(e),n=this.U[t.key];if(n===void 0)return;let a={type:M.KEY_UP,args:[i,n],date:C.now()};this.ae(a)}keyDownListener(t){let e=mt(t);if(N.isMaskedElementChild(e))return;let i=st(e),n=this.U[t.key];if(n===void 0)return;let a={type:M.KEY_DOWN,args:[i,n],date:C.now()};this.ae(a)}copyListener(t){let e=mt(t);if(N.isMaskedElementChild(e))return;let i=st(e),n={type:M.CLIPBOARD_COMMAND,args:[i,Is.COPY],date:C.now()};this.ae(n)}cutListener(t){let e=mt(t);if(N.isMaskedElementChild(e))return;let i=st(e),n={type:M.CLIPBOARD_COMMAND,args:[i,Is.CUT],date:C.now()};this.ae(n)}pasteListener(t){let e=mt(t);if(N.isMaskedElementChild(e))return;let i=st(e),n={type:M.CLIPBOARD_COMMAND,args:[i,Is.PASTE],date:C.now()};this.ae(n)}pointerUpListener(t){let e=mt(t);if(N.isMaskedElementChild(e))return;let i=st(e),n={type:M.POINTER_UP,args:[t.pointerId,t.pointerType,Dt(t.clientX,1),Dt(t.clientY,1),i,t.button],date:C.now()};this.ae(n)}pointerMoveListener(t){let e={type:M.POINTER_MOVE,args:[t.pointerId,t.pointerType,Dt(t.clientX,1),Dt(t.clientY,1)],date:C.now()};this.ae(e)}pointerDownListener(t){let e=mt(t);if(N.isMaskedElementChild(e))return;let i=st(e),n={type:M.POINTER_DOWN,args:[t.pointerId,t.pointerType,Dt(t.clientX,1),Dt(t.clientY,1),i,t.button,{pageX:Dt(t.pageX,1),pageY:Dt(t.pageY,1)}],date:C.now()};this.ae(n)}touchStartListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],a={type:M.TOUCH_START,args:[n.identifier,Dt(n.clientX,1),Dt(n.clientY,1)],date:C.now()};this.ae(a)}}touchMoveListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],a={type:M.TOUCH_MOVE,args:[n.identifier,Dt(n.clientX,1),Dt(n.clientY,1)],date:C.now()};this.ae(a)}}touchEndCancelListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],a={type:t.type==="touchend"?M.TOUCH_END:M.TOUCH_CANCEL,args:[n.identifier,Dt(n.clientX,1),Dt(n.clientY,1)],date:C.now()};this.ae(a)}}Jc(){this.U={},this.U[" "]=G.SPACE,this.U.Spacebar=G.SPACE,this.U.Backspace=G.BACKSPACE,this.U.Enter=G.ENTER,this.U.Delete=G.DELETE,this.U.ArrowUp=G.ARROWUP,this.U.ArrowDown=G.ARROWDOWN,this.U.ArrowLeft=G.ARROWLEFT,this.U.ArrowRight=G.ARROWRIGHT,this.U.Up=G.ARROWUP,this.U.Down=G.ARROWDOWN,this.U.Left=G.ARROWLEFT,this.U.Right=G.ARROWRIGHT,this.U.CapsLock=G.CAPSLOCK,this.U.Shift=G.SHIFT,this.U.Tab=G.TAB,this.U.Escape=G.ESCAPE,this.U.Esc=G.ESCAPE,this.U.End=G.END,this.U.Alt=G.ALT,this.U.Control=G.CTRL,this.U.Meta=G.META}}return H([kt("RecordingPageEvents.start")],s.prototype,"start",null),H([x("scroll")],s.prototype,"scrollListener",null),H([x("mouseOver"),bt(),Sp()],s.prototype,"mouseOverListener",null),H([x("click"),bt()],s.prototype,"clickListener",null),H([x("Event handler type: keyup")],s.prototype,"keyUpListener",null),H([x("Event handler type: keydown")],s.prototype,"keyDownListener",null),H([x("Event handler type: copy")],s.prototype,"copyListener",null),H([x("Event handler type: cut")],s.prototype,"cutListener",null),H([x("Event handler type: paste")],s.prototype,"pasteListener",null),H([x("Event handler type: pointerup"),bt()],s.prototype,"pointerUpListener",null),H([x("Event handler type: pointermove"),bt(),Dn({wait:Vy})],s.prototype,"pointerMoveListener",null),H([x("Event handler type: pointerdown"),bt()],s.prototype,"pointerDownListener",null),H([x("Event handler type: touchstart"),bt()],s.prototype,"touchStartListener",null),H([x("Event handler type: touchmove"),bt()],s.prototype,"touchMoveListener",null),H([x("Event handler type: touchend-cancel"),bt()],s.prototype,"touchEndCancelListener",null),s})(),jy=(()=>{class s{constructor(){}onScannedAsset(t){this.ja=t}scanCssString(t){this.xh(ei(t))}scanElement(t,e){N.getMaskedElementDetails(t).state!==N.MaskedElementState.NotMasked||e&&N.isMaskedAttribute(t,e)||(er(t)?this.JT(t):wn(t)?this.QT(t,e):(this.ZT(t,e),this.tA(t,e),this.eA(t,e)))}QT(t,e){var i;if((!e||e==="href")&&t.href){let a={assetId:((i=t.sheet)===null||i===void 0?void 0:i.href)||t.href,assetBasePath:window.location.href,assetRawPath:mc(t)};this.ja({type:"stylesheet",asset:a})}}JT(t){var e;let i=new Set;if(t.textContent)for(let a of ei(t.textContent))i.add(a);let n;try{n=(e=t.sheet)===null||e===void 0?void 0:e.cssRules}catch(a){a.name==="SecurityError"||a.name==="InvalidAccessError"||j.error(a.message)}if(n)for(let a=0;a<n.length;a++){let c=n.item(a).cssText;for(let l of ei(c))i.add(l)}this.xh(xs(i))}Lh(t){return!this.sA(t)&&!Wt(t)&&!Uu(t)}ZT(t,e){if(eu(t)||tu(t)){if(!e||e==="src"){let i=t.getAttribute("src");if(i&&this.Lh(i)){let n={assetId:t.src,assetRawPath:i,assetBasePath:window.location.href};this.ja({type:"asset",asset:n})}}(!e||e==="srcset")&&t.srcset&&this.iA(t.srcset)}}tA(t,e){if(t.nodeType!==1){at.warn(`StaticResourceUrlTracker: Wrong element nodeType: ${t==null?void 0:t.nodeName}/${t.nodeType}`);return}if(t.hasAttribute&&(!e||e==="style")&&t.hasAttribute("style")){let i=t.getAttribute("style");if(typeof i=="string")this.scanCssString(i);else throw new Error("Unexpected style: "+t.outerHTML)}}iA(t){this.xh(Fn(t))}eA(t,e){if((nu(t)||ou(t)||au(t))&&(!e||e==="href"||e==="xlink:href")){let i=t.getAttribute("href")||t.getAttribute("xlink:href");if(i&&this.Lh(i)){let n={assetId:ae(i),assetRawPath:i,assetBasePath:window.location.href};this.ja({type:"asset",asset:n})}}}xh(t){return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(t,e=>this.Lh(e)),e=>({rawUrl:e,absoluteUrl:ae(e)})),e=>{let i={assetId:e.absoluteUrl,assetBasePath:window.location.href,assetRawPath:e.rawUrl};this.ja({type:"asset",asset:i})})}sA(t){return/^https:\/\/\w+:\w+@/.test(t)}}return s})(),Hy=1,By=0,Yc=(()=>{class s{constructor(t,e=Hy,i=By){this.rA=t,this.nA=e,this.oA=i,this.Ye=new pi,this.$e=!1,this.Vh=0,this.Pg=()=>{for(this.Vh=0;this.Ye.length;){if(this.Vh>=this.nA){csSetTimeout(this.Pg,this.oA);return}let n=C.elapsed(),a=this.Ye.pop();if(!a)break;this.runTask(a);let c=C.elapsed()-n;this.Vh+=c}this.$e=!1}}schedule(t,e=!1){if(!this.rA||e){t();return}Lt.general.pendingTasks.increase(),this.Ye.push(t),this.aA()}aA(){this.$e||(this.$e=!0,csSetTimeout(()=>{this.Pg()}))}runTask(t){Lt.general.pendingTasks.decrease(),t()}runPendingTasks(){this.Ye.forEach(t=>{this.runTask(t)}),this.Ye.clear()}clearQueue(){Lt.general.pendingTasks.clear(),Lt.mutations.pendingMutations.clear(),this.Ye.clear()}isEmpty(){return this.Ye.length===0}}return H([x("TaskScheduler"),kt("runTask")],s.prototype,"runTask",null),H([kt("runPendingTasks")],s.prototype,"runPendingTasks",null),s})(),Fy=(()=>{class s{constructor(){this.G=!1,this.Og=new Hn(t=>t.type==="cssRuleInserted"&&this.cA(t)),this.lA=ar(t=>{this.G&&t.length>0&&this.I.schedule(()=>Q(t,e=>this.Wn.scanElement(e)))}),this.hA=({type:t,asset:e})=>{var i,n,a;t==="stylesheet"&&((i=this.uA)===null||i===void 0||i.call(this,e)),(n=this.dA)===null||n===void 0||n.call(this,e);let c={date:C.now(),type:M.STATIC_RESOURCE_URL,args:[e.assetId]};(a=this.L)===null||a===void 0||a.call(this,c)},this.I=new Yc(!0,30,0),this.Dn=new Gc(t=>this.pA(t)),this.D=new Je(t=>this.Ao(t)),this.Wn=new jy,this.Wn.onScannedAsset(this.hA)}onEvent(t){this.L=t}onAsset(t){this.dA=t}onStyleSheetFound(t){this.uA=t}start(){this.G||(this.G=!0,this.Og.observe(),this.Dn.observe(),this.D.observe())}stop(){this.G&&(this.Og.disconnect(),this.Dn.disconnect(),this.D.disconnect(),this.G=!1)}cA(t){!t.rule||!this.G||this.Wn.scanCssString(t.rule)}pA(t){this.G&&N.getMaskedElementDetails(t).state===N.MaskedElementState.NotMasked&&this.lA.push(t)}Ao(t){csSetTimeout(()=>{for(let e of t)switch(e.type){case"attributes":this.Wn.scanElement(e.target,e.attributeName);break;case"characterData":this.fA(e.target);break;case"childList":}})}fA(t){Wi(t)&&csNodeparentNode.apply(t)&&er(csNodeparentNode.apply(t))&&this.Wn.scanCssString(t.data)}}return s})(),$y="csPersisted",va="v2/recording",zy=["isRecording"],Gy=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],qy=["replay:resourceManager:getStatus","cssrm:getStatus"],Wy=(()=>{class s{constructor(t,e,i,n,a,c,l,u,g,d,E,y,v,I,P,S,_,D,O,T,L,Z){this.Bs=t,this.R=e,this.f=i,this.Ue=n,this.E=a,this.O=c,this.Y=l,this.ue=u,this.ge=g,this.pt=d,this.fe=E,this.ft=y,this.S=v,this.Ks=I,this.Ng=P,this.re=S,this.Gt=_,this.et=D,this._r=O,this.it=T,this.nI=L,this.ot=Z}init(){var t,e;let i=[],n=[];csArray.prototype.push.call(n,new Am),this.Yn=new Rm(this.it.shouldUseAnonymization(),this.f.whitelistedAttributes,this.O,this.f.anonymizeDigits),this.Fi();let a=new ny($y);this.gA(a);let c=new Cy;this.F=new ky;let l=new Fy;csArray.prototype.push.call(i,l),this.f.useStaticResourceManager&&dn.isSupported()&&(this.Yt=new dn,this.Le=new ay,this.Mg=new Oy(this.Le,this.f.getStaticResourceManagerUri(),this.Ue),this.Ng.addListener(this.Mg),csArray.prototype.push.call(n,this.Yt));let u=new ci(c,this.Ue,{getRequestParameters:()=>({let:this.recordingService.getRecordingLastEventTimestamp()})},{getRequestParameters:()=>({rst:this.recordingService.getRecordingStartTimestamp()})},{getRequestParameters:()=>({rt:csArray.prototype.join.call(this.R.getCollectStates(),",")})}),g=new Tc(`${this.f.getRecordingUri()}/${va}`);csArray.prototype.push.call(n,this.Yn),csArray.prototype.push.call(n,new km(this.et)),csArray.prototype.push.call(n,new Dm),this.$i=new Uy,this.$i.init(),csArray.prototype.push.call(i,this.$i),this.xt=new Ry(a,g,this.X),csArray.prototype.push.call(i,new Dy(window.location,this.O));let d=new Tm,E=new Vm,y=new jm,v=new Fm(this.ot),I=new zm,P=[E,this.ue,d,new wy(csArray.prototype.filter.call(i,O=>O)),I,new Gm,new Km,v,y];this.f.jsErrorsEnabled&&(this.Ma=new Jm,this.yA=new Qm(O=>this.ge.anonymize(O)),this.ls=new _y(this.Ma),csArray.prototype.push.call(P,this.Ma),csArray.prototype.push.call(n,this.yA));let S=new sy(P,n),_=new vy(S,this.S,this.Le,this.ls,this.Is),D=[d,E,y,v,I];this.recordingService=new Ay(this.f,this.F,u,c,this.Y,this.R,this.ge,this.pt,this.fe,this.ot,this.X,this.xt,g,_,i,D,this.Yt,this._r,this.ls,this.Is),this.Ks.addListener(this.recordingService),this.Ng.addListener(this.recordingService),this.recordingService.init(),this.E.register(zy,()=>this.R.isReplayRecorded()&&!this.re.isUrlExcludedForSessionReplay()),this.E.register(Gy,()=>{this.recordingService.activateOnlineAssetsOnNextPageview(),this.S.emitRecordingContextChange()}),this.E.register(qy,()=>this.recordingService.getStaticResourceManagerStatus()),this.Xn=new oy(this.S,this.R),this.Ks.addListener(this.Xn),this.Bs.enableRecordingContext(this.recordingService,this.R,this.Xn),this.Uh()}onAfterNaturalPageView(){var t;this.re.isUrlExcludedForSessionReplay()?this.recordingService.resetOnlineAssetsOnPageview():this.recordingService.updateOnlineAssetsOnPageview(),(t=this.Mg)===null||t===void 0||t.initState()}onStartTracking(){this.xt.recover(),this.Fi(),this.R.isReplayRecorded()&&!this.re.isUrlExcludedForSessionReplay()&&(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.jh())}onArtificialPageViewEnd(){this.R.isReplayRecorded()&&!this.re.isUrlExcludedForSessionReplay()&&!this.R.isTemporarilyRecorded()&&this.xt.sendLastMessageBeacon(),this.recordingService.clearStates()}onAfterArtificialPageView(){this.Fi(),this.R.isReplayRecorded()&&!this.re.isUrlExcludedForSessionReplay()?(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.recordingService.updateOnlineAssetsOnPageview(),this.EA()):(this.recordingService.resetOnlineAssetsOnPageview(),this.br())}onBeforeSessionRenewal(){this.recordingService.clearStates(),this.br()}onOptout(){this.br(),this.recordingService.onOptOut()}onReplayUnanonymizationConsentGranted(){this.Fi(),this.recordingService.triggerUnanonymizationConsentGranted(),this.S.emitRecordingContextChange()}onReplayUnanonymizationConsentWithdrawn(){this.Fi(),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.S.emitRecordingContextChange()}onCollectStateChange(t,e){t===V.QUOTA_REACHED||t===V.ANALYTICS_ONLY&&e===Ht.ETR_OFF?(this.recordingService.clearEvents(),this.br()):(this.X.setQueryParams({rt:csArray.prototype.join.call(this.R.getCollectStates(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.recordingService.pushEvents(),this.Xn.onCollectStateChange(t,e))}onInitialDomStart(){this.recordingService.blockSendingEventsFromSerialization(),this.xt.blockSendingLastMessage()}onInitialDomDone(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.xt.allowSendingLastMessage(),this.$i.start(),this.recordingService.pushEvents(),q.counters.longTasks.count>0&&q.counters.longTasks.flush(),q.counters.tasks.count>0&&q.counters.tasks.flush()}onAfterReplayRecordingConsentGranted(){this.R.isReplayRecorded()&&!this.re.isUrlExcludedForSessionReplay()&&(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.jh(),this.recordingService.triggerRecordingForSessionGranted())}onAfterReplayRecordingConsentWithdrawn(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this.br())}Uh(){var t,e,i,n;if(!((e=(t=this.f.experimental.sessionReplay)===null||t===void 0?void 0:t.shadowRoot)===null||e===void 0)&&e.filterByHostSelector){let a=(n=(i=this.f.experimental.sessionReplay)===null||i===void 0?void 0:i.shadowRoot)===null||n===void 0?void 0:n.filterByHostSelector;Q(a,c=>{Ks(c)&&Je.setShadowRootFilter(l=>{try{return te.call(l.host,c)}catch{return!1}})})}}jh(){this.recordingService.start(),this.xt.start(),this.S.emitRecordingContextChange()}br(){ap(),this.recordingService.stop(),this.xt.stop(),this.S.emitRecordingContextChange()}EA(){this.br(),this.jh()}gA(t){let e="byteArray";this.X=this.Gt.create(`${this.f.getRecordingUri()}/${va}`,!0,e,t,["rt","v","pid","pn","sn","uu"])}Fi(){var t;let e=this.it.shouldUseAnonymization();this.Yn.setAnonymization(e),(t=this.mA)===null||t===void 0||t.setAnonymization(e)}}return H([kt("Recording.onStartTracking")],s.prototype,"onStartTracking",null),H([kt("onInitialDomDone")],s.prototype,"onInitialDomDone",null),s})(),Yy=(()=>{class s{constructor(t,e){this.he=t,this.f=e,this.kg=!1}enableRecordingContext(t,e,i){this.kg=!0,this.gr=t,this.R=e,this.Xn=i}getRecordingContext(){var t,e,i;if(!this.kg)return{isRecording:!1,recordingStartTimestamp:0,etrState:Ht.ETR_OFF,etrStatus:qt.ETR_DISABLED,collectState:V.ANALYTICS_ONLY};let n=this.R.getSession();return{isRecording:this.gr.isRecording(),useAnonymization:this.he.getSensitiveStatus().useAnonymization,enableOnlineResources:(t=this.gr.getStaticResourceManagerStatus())===null||t===void 0?void 0:t.onlineAssets.activated,enableOnlineResourcesOnNextPageview:(e=this.gr.getStaticResourceManagerStatus())===null||e===void 0?void 0:e.onlineAssets.enabledOnNextPageview,recordingStartTimestamp:parseInt(this.gr.getRecordingStartTimestamp(),10),etrState:this.f.malkaEtrEnabled?Ht.ETR_ON:Ht.ETR_OFF,etrStatus:this.Xn.getEtrStatus(n),collectState:(i=n==null?void 0:n.collectState)!==null&&i!==void 0?i:V.ANALYTICS_ONLY}}}return s})(),li=(()=>{class s{static isRecordingSupported(){return"MutationObserver"in window&&"visibilityState"in document}static isAsyncSerializationSupported(){return"Promise"in window&&"findIndex"in csArray.prototype}}return s})(),Xy=(()=>{let s;return function(r){r.COMPRESSION_DISABLED="compressionDisabled"}(s||(s={})),s})(),Ky=(()=>{class s{constructor(){}static init(t){(!this.Hh||t!==void 0)&&this.initFlags(t)}static initFlags(t=document.cookie){var e;let i=(e=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))===null||e===void 0?void 0:e[1];if(this.Hh=new Map,i){let n=csString.prototype.split.call(i,".");for(let a=0;a<n.length;a++){let[c,l]=csString.prototype.split.call(n[a],"=");this.Hh.set(c,l||"true")}}}static getBoolean(t){let e=this.getString(t);return e!=null&&e!=="false"&&parseInt(e)!==0}static getString(t){var e;return this.init(),(e=this.Hh)===null||e===void 0?void 0:e.get(t)}static isCompressionEnabled(){return!this.getBoolean(Xy.COMPRESSION_DISABLED)}static Log(t){return(e,i,n)=>{var a;let c=i.toString(),l=`${(a=e.constructor)===null||a===void 0?void 0:a.name}.${c}`,u=n.value;Jy(s.getString("debugLog"),t)&&(n.value=function(...g){return console.log(l,...g),u.bind(this)(...g)})}}}return s})();function Jy(s,r){var t;return s==null?!1:s===r||!!(!((t=csString.prototype.match.call(s,new csRegExp("(^|,)("+r+")(,|$)")))===null||t===void 0)&&t.length)}function _a(){function i(o){let p=o.length;for(;--p>=0;)o[p]=0}let n=0,a=1,c=2,l=3,u=258,g=29,d=256,E=d+1+g,y=30,v=19,I=2*E+1,P=15,S=16,_=7,D=256,O=16,T=17,L=18,Z=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),rt=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Et=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),St=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),b=512,k=new Array((E+2)*2);i(k);let U=new Array(y*2);i(U);let B=new Array(b);i(B);let ot=new Array(u-l+1);i(ot);let Ot=new Array(g);i(Ot);let Vt=new Array(y);i(Vt);function Te(o,p,f,m,h){this.static_tree=o,this.extra_bits=p,this.extra_base=f,this.elems=m,this.max_length=h,this.has_stree=o&&o.length}let ms,Ut,Ft;function de(o,p){this.dyn_tree=o,this.max_code=0,this.stat_desc=p}let _i=o=>o<256?B[o]:B[256+(o>>>7)],Qe=(o,p)=>{o.pending_buf[o.pending++]=p&255,o.pending_buf[o.pending++]=p>>>8&255},At=(o,p,f)=>{o.bi_valid>S-f?(o.bi_buf|=p<<o.bi_valid&65535,Qe(o,o.bi_buf),o.bi_buf=p>>S-o.bi_valid,o.bi_valid+=f-S):(o.bi_buf|=p<<o.bi_valid&65535,o.bi_valid+=f)},$t=(o,p,f)=>{At(o,f[p*2],f[p*2+1])},Hs=(o,p)=>{let f=0;do f|=o&1,o>>>=1,f<<=1;while(--p>0);return f>>>1},qn=o=>{o.bi_valid===16?(Qe(o,o.bi_buf),o.bi_buf=0,o.bi_valid=0):o.bi_valid>=8&&(o.pending_buf[o.pending++]=o.bi_buf&255,o.bi_buf>>=8,o.bi_valid-=8)},Wn=(o,p)=>{let f=p.dyn_tree,m=p.max_code,h=p.stat_desc.static_tree,A=p.stat_desc.has_stree,w=p.stat_desc.extra_bits,R=p.stat_desc.extra_base,X=p.stat_desc.max_length,F,jt,ke,it,is,Ss,Ni=0;for(it=0;it<=P;it++)o.bl_count[it]=0;for(f[o.heap[o.heap_max]*2+1]=0,F=o.heap_max+1;F<I;F++)jt=o.heap[F],it=f[f[jt*2+1]*2+1]+1,it>X&&(it=X,Ni++),f[jt*2+1]=it,!(jt>m)&&(o.bl_count[it]++,is=0,jt>=R&&(is=w[jt-R]),Ss=f[jt*2],o.opt_len+=Ss*(it+is),A&&(o.static_len+=Ss*(h[jt*2+1]+is)));if(Ni!==0){do{for(it=X-1;o.bl_count[it]===0;)it--;o.bl_count[it]--,o.bl_count[it+1]+=2,o.bl_count[X]--,Ni-=2}while(Ni>0);for(it=X;it!==0;it--)for(jt=o.bl_count[it];jt!==0;)ke=o.heap[--F],!(ke>m)&&(f[ke*2+1]!==it&&(o.opt_len+=(it-f[ke*2+1])*f[ke*2],f[ke*2+1]=it),jt--)}},hr=(o,p,f)=>{let m=new Array(P+1),h=0,A,w;for(A=1;A<=P;A++)m[A]=h=h+f[A-1]<<1;for(w=0;w<=p;w++){let R=o[w*2+1];R!==0&&(o[w*2]=Hs(m[R]++,R))}},Yn=()=>{let o,p,f,m,h,A=new Array(P+1);for(f=0,m=0;m<g-1;m++)for(Ot[m]=f,o=0;o<1<<Z[m];o++)ot[f++]=m;for(ot[f-1]=m,h=0,m=0;m<16;m++)for(Vt[m]=h,o=0;o<1<<rt[m];o++)B[h++]=m;for(h>>=7;m<y;m++)for(Vt[m]=h<<7,o=0;o<1<<rt[m]-7;o++)B[256+h++]=m;for(p=0;p<=P;p++)A[p]=0;for(o=0;o<=143;)k[o*2+1]=8,o++,A[8]++;for(;o<=255;)k[o*2+1]=9,o++,A[9]++;for(;o<=279;)k[o*2+1]=7,o++,A[7]++;for(;o<=287;)k[o*2+1]=8,o++,A[8]++;for(hr(k,E+1,A),o=0;o<y;o++)U[o*2+1]=5,U[o*2]=Hs(o,5);ms=new Te(k,Z,d+1,E,P),Ut=new Te(U,rt,0,y,P),Ft=new Te(new Array(0),Et,0,v,_)},Xn=o=>{let p;for(p=0;p<E;p++)o.dyn_ltree[p*2]=0;for(p=0;p<y;p++)o.dyn_dtree[p*2]=0;for(p=0;p<v;p++)o.bl_tree[p*2]=0;o.dyn_ltree[D*2]=1,o.opt_len=o.static_len=0,o.last_lit=o.matches=0},Kn=o=>{o.bi_valid>8?Qe(o,o.bi_buf):o.bi_valid>0&&(o.pending_buf[o.pending++]=o.bi_buf),o.bi_buf=0,o.bi_valid=0},rl=(o,p,f,m)=>{Kn(o),m&&(Qe(o,f),Qe(o,~f)),o.pending_buf.set(o.window.subarray(p,p+f),o.pending),o.pending+=f},Jn=(o,p,f,m)=>{let h=p*2,A=f*2;return o[h]<o[A]||o[h]===o[A]&&m[p]<=m[f]},ur=(o,p,f)=>{let m=o.heap[f],h=f<<1;for(;h<=o.heap_len&&(h<o.heap_len&&Jn(p,o.heap[h+1],o.heap[h],o.depth)&&h++,!Jn(p,m,o.heap[h],o.depth));)o.heap[f]=o.heap[h],f=h,h<<=1;o.heap[f]=m},Qn=(o,p,f)=>{let m,h,A=0,w,R;if(o.last_lit!==0)do m=o.pending_buf[o.d_buf+A*2]<<8|o.pending_buf[o.d_buf+A*2+1],h=o.pending_buf[o.l_buf+A],A++,m===0?$t(o,h,p):(w=ot[h],$t(o,w+d+1,p),R=Z[w],R!==0&&(h-=Ot[w],At(o,h,R)),m--,w=_i(m),$t(o,w,f),R=rt[w],R!==0&&(m-=Vt[w],At(o,m,R)));while(A<o.last_lit);$t(o,D,p)},dr=(o,p)=>{let f=p.dyn_tree,m=p.stat_desc.static_tree,h=p.stat_desc.has_stree,A=p.stat_desc.elems,w,R,X=-1,F;for(o.heap_len=0,o.heap_max=I,w=0;w<A;w++)f[w*2]!==0?(o.heap[++o.heap_len]=X=w,o.depth[w]=0):f[w*2+1]=0;for(;o.heap_len<2;)F=o.heap[++o.heap_len]=X<2?++X:0,f[F*2]=1,o.depth[F]=0,o.opt_len--,h&&(o.static_len-=m[F*2+1]);for(p.max_code=X,w=o.heap_len>>1;w>=1;w--)ur(o,f,w);F=A;do w=o.heap[1],o.heap[1]=o.heap[o.heap_len--],ur(o,f,1),R=o.heap[1],o.heap[--o.heap_max]=w,o.heap[--o.heap_max]=R,f[F*2]=f[w*2]+f[R*2],o.depth[F]=(o.depth[w]>=o.depth[R]?o.depth[w]:o.depth[R])+1,f[w*2+1]=f[R*2+1]=F,o.heap[1]=F++,ur(o,f,1);while(o.heap_len>=2);o.heap[--o.heap_max]=o.heap[1],Wn(o,p),hr(f,X,o.bl_count)},Zn=(o,p,f)=>{let m,h=-1,A,w=p[0*2+1],R=0,X=7,F=4;for(w===0&&(X=138,F=3),p[(f+1)*2+1]=65535,m=0;m<=f;m++)A=w,w=p[(m+1)*2+1],!(++R<X&&A===w)&&(R<F?o.bl_tree[A*2]+=R:A!==0?(A!==h&&o.bl_tree[A*2]++,o.bl_tree[O*2]++):R<=10?o.bl_tree[T*2]++:o.bl_tree[L*2]++,R=0,h=A,w===0?(X=138,F=3):A===w?(X=6,F=3):(X=7,F=4))},to=(o,p,f)=>{let m,h=-1,A,w=p[0*2+1],R=0,X=7,F=4;for(w===0&&(X=138,F=3),m=0;m<=f;m++)if(A=w,w=p[(m+1)*2+1],!(++R<X&&A===w)){if(R<F)do $t(o,A,o.bl_tree);while(--R!==0);else A!==0?(A!==h&&($t(o,A,o.bl_tree),R--),$t(o,O,o.bl_tree),At(o,R-3,2)):R<=10?($t(o,T,o.bl_tree),At(o,R-3,3)):($t(o,L,o.bl_tree),At(o,R-11,7));R=0,h=A,w===0?(X=138,F=3):A===w?(X=6,F=3):(X=7,F=4)}},nl=o=>{let p;for(Zn(o,o.dyn_ltree,o.l_desc.max_code),Zn(o,o.dyn_dtree,o.d_desc.max_code),dr(o,o.bl_desc),p=v-1;p>=3&&o.bl_tree[St[p]*2+1]===0;p--);return o.opt_len+=3*(p+1)+5+5+4,p},ol=(o,p,f,m)=>{let h;for(At(o,p-257,5),At(o,f-1,5),At(o,m-4,4),h=0;h<m;h++)At(o,o.bl_tree[St[h]*2+1],3);to(o,o.dyn_ltree,p-1),to(o,o.dyn_dtree,f-1)},al=o=>{let p=4093624447,f;for(f=0;f<=31;f++,p>>>=1)if(p&1&&o.dyn_ltree[f*2]!==0)return 0;if(o.dyn_ltree[9*2]!==0||o.dyn_ltree[10*2]!==0||o.dyn_ltree[13*2]!==0)return 1;for(f=32;f<d;f++)if(o.dyn_ltree[f*2]!==0)return 1;return 0},eo=!1,cl=o=>{eo||(Yn(),eo=!0),o.l_desc=new de(o.dyn_ltree,ms),o.d_desc=new de(o.dyn_dtree,Ut),o.bl_desc=new de(o.bl_tree,Ft),o.bi_buf=0,o.bi_valid=0,Xn(o)},so=(o,p,f,m)=>{At(o,(n<<1)+(m?1:0),3),rl(o,p,f,!0)},ll=o=>{At(o,a<<1,3),$t(o,D,k),qn(o)},hl=(o,p,f,m)=>{let h,A,w=0;o.level>0?(o.strm.data_type===2&&(o.strm.data_type=al(o)),dr(o,o.l_desc),dr(o,o.d_desc),w=nl(o),h=o.opt_len+3+7>>>3,A=o.static_len+3+7>>>3,A<=h&&(h=A)):h=A=f+5,f+4<=h&&p!==-1?so(o,p,f,m):o.strategy===4||A===h?(At(o,(a<<1)+(m?1:0),3),Qn(o,k,U)):(At(o,(c<<1)+(m?1:0),3),ol(o,o.l_desc.max_code+1,o.d_desc.max_code+1,w+1),Qn(o,o.dyn_ltree,o.dyn_dtree)),Xn(o),m&&Kn(o)},ul=(o,p,f)=>(o.pending_buf[o.d_buf+o.last_lit*2]=p>>>8&255,o.pending_buf[o.d_buf+o.last_lit*2+1]=p&255,o.pending_buf[o.l_buf+o.last_lit]=f&255,o.last_lit++,p===0?o.dyn_ltree[f*2]++:(o.matches++,p--,o.dyn_ltree[(ot[f]+d+1)*2]++,o.dyn_dtree[_i(p)*2]++),o.last_lit===o.lit_bufsize-1);var dl=cl,pl=so,fl=hl,gl=ul,ml=ll,yl={_tr_init:dl,_tr_stored_block:pl,_tr_flush_block:fl,_tr_tally:gl,_tr_align:ml},io=(o,p,f,m)=>{let h=o&65535|0,A=o>>>16&65535|0,w=0;for(;f!==0;){w=f>2e3?2e3:f,f-=w;do h=h+p[m++]|0,A=A+h|0;while(--w);h%=65521,A%=65521}return h|A<<16|0};let El=()=>{let o,p=[];for(var f=0;f<256;f++){o=f;for(var m=0;m<8;m++)o=o&1?3988292384^o>>>1:o>>>1;p[f]=o}return p},Sl=new Uint32Array(El());var Ae=(o,p,f,m)=>{let h=Sl,A=m+f;o^=-1;for(let w=m;w<A;w++)o=o>>>8^h[(o^p[w])&255];return o^-1},wi={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ro={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:vl,_tr_stored_block:_l,_tr_flush_block:wl,_tr_tally:Re,_tr_align:bl}=yl,{Z_NO_FLUSH:Ze,Z_PARTIAL_FLUSH:Tl,Z_FULL_FLUSH:Al,Z_FINISH:Ce,Z_BLOCK:no,Z_OK:ee,Z_STREAM_END:oo,Z_STREAM_ERROR:zt,Z_DATA_ERROR:Rl,Z_BUF_ERROR:pr,Z_DEFAULT_COMPRESSION:Cl,Z_FILTERED:Il,Z_HUFFMAN_ONLY:bi,Z_RLE:Pl,Z_FIXED:Ol,Z_DEFAULT_STRATEGY:Nl,Z_UNKNOWN:Ml,Z_DEFLATED:Ti}=ro,kl=9,Dl=15,xl=8,fr=256+1+29,Ll=30,Vl=19,Ul=2*fr+1,jl=15,Y=3,Ie=258,Kt=Ie+Y+1,Hl=32,Ai=42,gr=69,Ri=73,Ci=91,Ii=103,ts=113,Bs=666,pt=1,Fs=2,es=3,ys=4,Bl=3,Pe=(o,p)=>(o.msg=wi[p],p),ao=o=>(o<<1)-(o>4?9:0),Oe=o=>{let p=o.length;for(;--p>=0;)o[p]=0},Ne=(o,p,f)=>(p<<o.hash_shift^f)&o.hash_mask,Me=o=>{let p=o.state,f=p.pending;f>o.avail_out&&(f=o.avail_out),f!==0&&(o.output.set(p.pending_buf.subarray(p.pending_out,p.pending_out+f),o.next_out),o.next_out+=f,p.pending_out+=f,o.total_out+=f,o.avail_out-=f,p.pending-=f,p.pending===0&&(p.pending_out=0))},vt=(o,p)=>{wl(o,o.block_start>=0?o.block_start:-1,o.strstart-o.block_start,p),o.block_start=o.strstart,Me(o.strm)},tt=(o,p)=>{o.pending_buf[o.pending++]=p},$s=(o,p)=>{o.pending_buf[o.pending++]=p>>>8&255,o.pending_buf[o.pending++]=p&255},Fl=(o,p,f,m)=>{let h=o.avail_in;return h>m&&(h=m),h===0?0:(o.avail_in-=h,p.set(o.input.subarray(o.next_in,o.next_in+h),f),o.state.wrap===1?o.adler=io(o.adler,p,h,f):o.state.wrap===2&&(o.adler=Ae(o.adler,p,h,f)),o.next_in+=h,o.total_in+=h,h)},co=(o,p)=>{let f=o.max_chain_length,m=o.strstart,h,A,w=o.prev_length,R=o.nice_match,X=o.strstart>o.w_size-Kt?o.strstart-(o.w_size-Kt):0,F=o.window,jt=o.w_mask,ke=o.prev,it=o.strstart+Ie,is=F[m+w-1],Ss=F[m+w];o.prev_length>=o.good_match&&(f>>=2),R>o.lookahead&&(R=o.lookahead);do if(h=p,!(F[h+w]!==Ss||F[h+w-1]!==is||F[h]!==F[m]||F[++h]!==F[m+1])){m+=2,h++;do;while(F[++m]===F[++h]&&F[++m]===F[++h]&&F[++m]===F[++h]&&F[++m]===F[++h]&&F[++m]===F[++h]&&F[++m]===F[++h]&&F[++m]===F[++h]&&F[++m]===F[++h]&&m<it);if(A=Ie-(it-m),m=it-Ie,A>w){if(o.match_start=p,w=A,A>=R)break;is=F[m+w-1],Ss=F[m+w]}}while((p=ke[p&jt])>X&&--f!==0);return w<=o.lookahead?w:o.lookahead},ss=o=>{let p=o.w_size,f,m,h,A,w;do{if(A=o.window_size-o.lookahead-o.strstart,o.strstart>=p+(p-Kt)){o.window.set(o.window.subarray(p,p+p),0),o.match_start-=p,o.strstart-=p,o.block_start-=p,m=o.hash_size,f=m;do h=o.head[--f],o.head[f]=h>=p?h-p:0;while(--m);m=p,f=m;do h=o.prev[--f],o.prev[f]=h>=p?h-p:0;while(--m);A+=p}if(o.strm.avail_in===0)break;if(m=Fl(o.strm,o.window,o.strstart+o.lookahead,A),o.lookahead+=m,o.lookahead+o.insert>=Y)for(w=o.strstart-o.insert,o.ins_h=o.window[w],o.ins_h=Ne(o,o.ins_h,o.window[w+1]);o.insert&&(o.ins_h=Ne(o,o.ins_h,o.window[w+Y-1]),o.prev[w&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=w,w++,o.insert--,!(o.lookahead+o.insert<Y)););}while(o.lookahead<Kt&&o.strm.avail_in!==0)},$l=(o,p)=>{let f=65535;for(f>o.pending_buf_size-5&&(f=o.pending_buf_size-5);;){if(o.lookahead<=1){if(ss(o),o.lookahead===0&&p===Ze)return pt;if(o.lookahead===0)break}o.strstart+=o.lookahead,o.lookahead=0;let m=o.block_start+f;if((o.strstart===0||o.strstart>=m)&&(o.lookahead=o.strstart-m,o.strstart=m,vt(o,!1),o.strm.avail_out===0)||o.strstart-o.block_start>=o.w_size-Kt&&(vt(o,!1),o.strm.avail_out===0))return pt}return o.insert=0,p===Ce?(vt(o,!0),o.strm.avail_out===0?es:ys):(o.strstart>o.block_start&&(vt(o,!1),o.strm.avail_out===0),pt)},mr=(o,p)=>{let f,m;for(;;){if(o.lookahead<Kt){if(ss(o),o.lookahead<Kt&&p===Ze)return pt;if(o.lookahead===0)break}if(f=0,o.lookahead>=Y&&(o.ins_h=Ne(o,o.ins_h,o.window[o.strstart+Y-1]),f=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),f!==0&&o.strstart-f<=o.w_size-Kt&&(o.match_length=co(o,f)),o.match_length>=Y)if(m=Re(o,o.strstart-o.match_start,o.match_length-Y),o.lookahead-=o.match_length,o.match_length<=o.max_lazy_match&&o.lookahead>=Y){o.match_length--;do o.strstart++,o.ins_h=Ne(o,o.ins_h,o.window[o.strstart+Y-1]),f=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart;while(--o.match_length!==0);o.strstart++}else o.strstart+=o.match_length,o.match_length=0,o.ins_h=o.window[o.strstart],o.ins_h=Ne(o,o.ins_h,o.window[o.strstart+1]);else m=Re(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++;if(m&&(vt(o,!1),o.strm.avail_out===0))return pt}return o.insert=o.strstart<Y-1?o.strstart:Y-1,p===Ce?(vt(o,!0),o.strm.avail_out===0?es:ys):o.last_lit&&(vt(o,!1),o.strm.avail_out===0)?pt:Fs},Es=(o,p)=>{let f,m,h;for(;;){if(o.lookahead<Kt){if(ss(o),o.lookahead<Kt&&p===Ze)return pt;if(o.lookahead===0)break}if(f=0,o.lookahead>=Y&&(o.ins_h=Ne(o,o.ins_h,o.window[o.strstart+Y-1]),f=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),o.prev_length=o.match_length,o.prev_match=o.match_start,o.match_length=Y-1,f!==0&&o.prev_length<o.max_lazy_match&&o.strstart-f<=o.w_size-Kt&&(o.match_length=co(o,f),o.match_length<=5&&(o.strategy===Il||o.match_length===Y&&o.strstart-o.match_start>4096)&&(o.match_length=Y-1)),o.prev_length>=Y&&o.match_length<=o.prev_length){h=o.strstart+o.lookahead-Y,m=Re(o,o.strstart-1-o.prev_match,o.prev_length-Y),o.lookahead-=o.prev_length-1,o.prev_length-=2;do++o.strstart<=h&&(o.ins_h=Ne(o,o.ins_h,o.window[o.strstart+Y-1]),f=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart);while(--o.prev_length!==0);if(o.match_available=0,o.match_length=Y-1,o.strstart++,m&&(vt(o,!1),o.strm.avail_out===0))return pt}else if(o.match_available){if(m=Re(o,0,o.window[o.strstart-1]),m&&vt(o,!1),o.strstart++,o.lookahead--,o.strm.avail_out===0)return pt}else o.match_available=1,o.strstart++,o.lookahead--}return o.match_available&&(m=Re(o,0,o.window[o.strstart-1]),o.match_available=0),o.insert=o.strstart<Y-1?o.strstart:Y-1,p===Ce?(vt(o,!0),o.strm.avail_out===0?es:ys):o.last_lit&&(vt(o,!1),o.strm.avail_out===0)?pt:Fs},zl=(o,p)=>{let f,m,h,A,w=o.window;for(;;){if(o.lookahead<=Ie){if(ss(o),o.lookahead<=Ie&&p===Ze)return pt;if(o.lookahead===0)break}if(o.match_length=0,o.lookahead>=Y&&o.strstart>0&&(h=o.strstart-1,m=w[h],m===w[++h]&&m===w[++h]&&m===w[++h])){A=o.strstart+Ie;do;while(m===w[++h]&&m===w[++h]&&m===w[++h]&&m===w[++h]&&m===w[++h]&&m===w[++h]&&m===w[++h]&&m===w[++h]&&h<A);o.match_length=Ie-(A-h),o.match_length>o.lookahead&&(o.match_length=o.lookahead)}if(o.match_length>=Y?(f=Re(o,1,o.match_length-Y),o.lookahead-=o.match_length,o.strstart+=o.match_length,o.match_length=0):(f=Re(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++),f&&(vt(o,!1),o.strm.avail_out===0))return pt}return o.insert=0,p===Ce?(vt(o,!0),o.strm.avail_out===0?es:ys):o.last_lit&&(vt(o,!1),o.strm.avail_out===0)?pt:Fs},Gl=(o,p)=>{let f;for(;;){if(o.lookahead===0&&(ss(o),o.lookahead===0)){if(p===Ze)return pt;break}if(o.match_length=0,f=Re(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++,f&&(vt(o,!1),o.strm.avail_out===0))return pt}return o.insert=0,p===Ce?(vt(o,!0),o.strm.avail_out===0?es:ys):o.last_lit&&(vt(o,!1),o.strm.avail_out===0)?pt:Fs};function se(o,p,f,m,h){this.good_length=o,this.max_lazy=p,this.nice_length=f,this.max_chain=m,this.func=h}let zs=[new se(0,0,0,0,$l),new se(4,4,8,4,mr),new se(4,5,16,8,mr),new se(4,6,32,32,mr),new se(4,4,16,16,Es),new se(8,16,32,32,Es),new se(8,16,128,128,Es),new se(8,32,128,256,Es),new se(32,128,258,1024,Es),new se(32,258,258,4096,Es)],ql=o=>{o.window_size=2*o.w_size,Oe(o.head),o.max_lazy_match=zs[o.level].max_lazy,o.good_match=zs[o.level].good_length,o.nice_match=zs[o.level].nice_length,o.max_chain_length=zs[o.level].max_chain,o.strstart=0,o.block_start=0,o.lookahead=0,o.insert=0,o.match_length=o.prev_length=Y-1,o.match_available=0,o.ins_h=0};function Wl(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ti,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Ul*2),this.dyn_dtree=new Uint16Array((2*Ll+1)*2),this.bl_tree=new Uint16Array((2*Vl+1)*2),Oe(this.dyn_ltree),Oe(this.dyn_dtree),Oe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(jl+1),this.heap=new Uint16Array(2*fr+1),Oe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*fr+1),Oe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let lo=o=>{if(!o||!o.state)return Pe(o,zt);o.total_in=o.total_out=0,o.data_type=Ml;let p=o.state;return p.pending=0,p.pending_out=0,p.wrap<0&&(p.wrap=-p.wrap),p.status=p.wrap?Ai:ts,o.adler=p.wrap===2?0:1,p.last_flush=Ze,vl(p),ee},ho=o=>{let p=lo(o);return p===ee&&ql(o.state),p},Yl=(o,p)=>!o||!o.state||o.state.wrap!==2?zt:(o.state.gzhead=p,ee),uo=(o,p,f,m,h,A)=>{if(!o)return zt;let w=1;if(p===Cl&&(p=6),m<0?(w=0,m=-m):m>15&&(w=2,m-=16),h<1||h>kl||f!==Ti||m<8||m>15||p<0||p>9||A<0||A>Ol)return Pe(o,zt);m===8&&(m=9);let R=new Wl;return o.state=R,R.strm=o,R.wrap=w,R.gzhead=null,R.w_bits=m,R.w_size=1<<R.w_bits,R.w_mask=R.w_size-1,R.hash_bits=h+7,R.hash_size=1<<R.hash_bits,R.hash_mask=R.hash_size-1,R.hash_shift=~~((R.hash_bits+Y-1)/Y),R.window=new Uint8Array(R.w_size*2),R.head=new Uint16Array(R.hash_size),R.prev=new Uint16Array(R.w_size),R.lit_bufsize=1<<h+6,R.pending_buf_size=R.lit_bufsize*4,R.pending_buf=new Uint8Array(R.pending_buf_size),R.d_buf=1*R.lit_bufsize,R.l_buf=3*R.lit_bufsize,R.level=p,R.strategy=A,R.method=f,ho(o)},Xl=(o,p)=>uo(o,p,Ti,Dl,xl,Nl),Kl=(o,p)=>{let f,m;if(!o||!o.state||p>no||p<0)return o?Pe(o,zt):zt;let h=o.state;if(!o.output||!o.input&&o.avail_in!==0||h.status===Bs&&p!==Ce)return Pe(o,o.avail_out===0?pr:zt);h.strm=o;let A=h.last_flush;if(h.last_flush=p,h.status===Ai)if(h.wrap===2)o.adler=0,tt(h,31),tt(h,139),tt(h,8),h.gzhead?(tt(h,(h.gzhead.text?1:0)+(h.gzhead.hcrc?2:0)+(h.gzhead.extra?4:0)+(h.gzhead.name?8:0)+(h.gzhead.comment?16:0)),tt(h,h.gzhead.time&255),tt(h,h.gzhead.time>>8&255),tt(h,h.gzhead.time>>16&255),tt(h,h.gzhead.time>>24&255),tt(h,h.level===9?2:h.strategy>=bi||h.level<2?4:0),tt(h,h.gzhead.os&255),h.gzhead.extra&&h.gzhead.extra.length&&(tt(h,h.gzhead.extra.length&255),tt(h,h.gzhead.extra.length>>8&255)),h.gzhead.hcrc&&(o.adler=Ae(o.adler,h.pending_buf,h.pending,0)),h.gzindex=0,h.status=gr):(tt(h,0),tt(h,0),tt(h,0),tt(h,0),tt(h,0),tt(h,h.level===9?2:h.strategy>=bi||h.level<2?4:0),tt(h,Bl),h.status=ts);else{let w=Ti+(h.w_bits-8<<4)<<8,R=-1;h.strategy>=bi||h.level<2?R=0:h.level<6?R=1:h.level===6?R=2:R=3,w|=R<<6,h.strstart!==0&&(w|=Hl),w+=31-w%31,h.status=ts,$s(h,w),h.strstart!==0&&($s(h,o.adler>>>16),$s(h,o.adler&65535)),o.adler=1}if(h.status===gr)if(h.gzhead.extra){for(f=h.pending;h.gzindex<(h.gzhead.extra.length&65535)&&!(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>f&&(o.adler=Ae(o.adler,h.pending_buf,h.pending-f,f)),Me(o),f=h.pending,h.pending===h.pending_buf_size));)tt(h,h.gzhead.extra[h.gzindex]&255),h.gzindex++;h.gzhead.hcrc&&h.pending>f&&(o.adler=Ae(o.adler,h.pending_buf,h.pending-f,f)),h.gzindex===h.gzhead.extra.length&&(h.gzindex=0,h.status=Ri)}else h.status=Ri;if(h.status===Ri)if(h.gzhead.name){f=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>f&&(o.adler=Ae(o.adler,h.pending_buf,h.pending-f,f)),Me(o),f=h.pending,h.pending===h.pending_buf_size)){m=1;break}h.gzindex<h.gzhead.name.length?m=h.gzhead.name.charCodeAt(h.gzindex++)&255:m=0,tt(h,m)}while(m!==0);h.gzhead.hcrc&&h.pending>f&&(o.adler=Ae(o.adler,h.pending_buf,h.pending-f,f)),m===0&&(h.gzindex=0,h.status=Ci)}else h.status=Ci;if(h.status===Ci)if(h.gzhead.comment){f=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>f&&(o.adler=Ae(o.adler,h.pending_buf,h.pending-f,f)),Me(o),f=h.pending,h.pending===h.pending_buf_size)){m=1;break}h.gzindex<h.gzhead.comment.length?m=h.gzhead.comment.charCodeAt(h.gzindex++)&255:m=0,tt(h,m)}while(m!==0);h.gzhead.hcrc&&h.pending>f&&(o.adler=Ae(o.adler,h.pending_buf,h.pending-f,f)),m===0&&(h.status=Ii)}else h.status=Ii;if(h.status===Ii&&(h.gzhead.hcrc?(h.pending+2>h.pending_buf_size&&Me(o),h.pending+2<=h.pending_buf_size&&(tt(h,o.adler&255),tt(h,o.adler>>8&255),o.adler=0,h.status=ts)):h.status=ts),h.pending!==0){if(Me(o),o.avail_out===0)return h.last_flush=-1,ee}else if(o.avail_in===0&&ao(p)<=ao(A)&&p!==Ce)return Pe(o,pr);if(h.status===Bs&&o.avail_in!==0)return Pe(o,pr);if(o.avail_in!==0||h.lookahead!==0||p!==Ze&&h.status!==Bs){let w=h.strategy===bi?Gl(h,p):h.strategy===Pl?zl(h,p):zs[h.level].func(h,p);if((w===es||w===ys)&&(h.status=Bs),w===pt||w===es)return o.avail_out===0&&(h.last_flush=-1),ee;if(w===Fs&&(p===Tl?bl(h):p!==no&&(_l(h,0,0,!1),p===Al&&(Oe(h.head),h.lookahead===0&&(h.strstart=0,h.block_start=0,h.insert=0))),Me(o),o.avail_out===0))return h.last_flush=-1,ee}return p!==Ce?ee:h.wrap<=0?oo:(h.wrap===2?(tt(h,o.adler&255),tt(h,o.adler>>8&255),tt(h,o.adler>>16&255),tt(h,o.adler>>24&255),tt(h,o.total_in&255),tt(h,o.total_in>>8&255),tt(h,o.total_in>>16&255),tt(h,o.total_in>>24&255)):($s(h,o.adler>>>16),$s(h,o.adler&65535)),Me(o),h.wrap>0&&(h.wrap=-h.wrap),h.pending!==0?ee:oo)},Jl=o=>{if(!o||!o.state)return zt;let p=o.state.status;return p!==Ai&&p!==gr&&p!==Ri&&p!==Ci&&p!==Ii&&p!==ts&&p!==Bs?Pe(o,zt):(o.state=null,p===ts?Pe(o,Rl):ee)},Ql=(o,p)=>{let f=p.length;if(!o||!o.state)return zt;let m=o.state,h=m.wrap;if(h===2||h===1&&m.status!==Ai||m.lookahead)return zt;if(h===1&&(o.adler=io(o.adler,p,f,0)),m.wrap=0,f>=m.w_size){h===0&&(Oe(m.head),m.strstart=0,m.block_start=0,m.insert=0);let X=new Uint8Array(m.w_size);X.set(p.subarray(f-m.w_size,f),0),p=X,f=m.w_size}let A=o.avail_in,w=o.next_in,R=o.input;for(o.avail_in=f,o.next_in=0,o.input=p,ss(m);m.lookahead>=Y;){let X=m.strstart,F=m.lookahead-(Y-1);do m.ins_h=Ne(m,m.ins_h,m.window[X+Y-1]),m.prev[X&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=X,X++;while(--F);m.strstart=X,m.lookahead=Y-1,ss(m)}return m.strstart+=m.lookahead,m.block_start=m.strstart,m.insert=m.lookahead,m.lookahead=0,m.match_length=m.prev_length=Y-1,m.match_available=0,o.next_in=w,o.input=R,o.avail_in=A,m.wrap=h,ee};var Zl=Xl,th=uo,eh=ho,sh=lo,ih=Yl,rh=Kl,nh=Jl,oh=Ql,ah="pako deflate (from Nodeca project)",Gs={deflateInit:Zl,deflateInit2:th,deflateReset:eh,deflateResetKeep:sh,deflateSetHeader:ih,deflate:rh,deflateEnd:nh,deflateSetDictionary:oh,deflateInfo:ah};let ch=(o,p)=>Object.prototype.hasOwnProperty.call(o,p);var lh=function(o){let p=Array.prototype.slice.call(arguments,1);for(;p.length;){let f=p.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(let m in f)ch(f,m)&&(o[m]=f[m])}}return o},hh=o=>{let p=0;for(let m=0,h=o.length;m<h;m++)p+=o[m].length;let f=new Uint8Array(p);for(let m=0,h=0,A=o.length;m<A;m++){let w=o[m];f.set(w,h),h+=w.length}return f},po={assign:lh,flattenChunks:hh};let fo=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{fo=!1}let qs=new Uint8Array(256);for(let o=0;o<256;o++)qs[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;qs[254]=qs[254]=1;var uh=o=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(o);let p,f,m,h,A,w=o.length,R=0;for(h=0;h<w;h++)f=o.charCodeAt(h),(f&64512)===55296&&h+1<w&&(m=o.charCodeAt(h+1),(m&64512)===56320&&(f=65536+(f-55296<<10)+(m-56320),h++)),R+=f<128?1:f<2048?2:f<65536?3:4;for(p=new Uint8Array(R),A=0,h=0;A<R;h++)f=o.charCodeAt(h),(f&64512)===55296&&h+1<w&&(m=o.charCodeAt(h+1),(m&64512)===56320&&(f=65536+(f-55296<<10)+(m-56320),h++)),f<128?p[A++]=f:f<2048?(p[A++]=192|f>>>6,p[A++]=128|f&63):f<65536?(p[A++]=224|f>>>12,p[A++]=128|f>>>6&63,p[A++]=128|f&63):(p[A++]=240|f>>>18,p[A++]=128|f>>>12&63,p[A++]=128|f>>>6&63,p[A++]=128|f&63);return p};let go=(o,p=o.length)=>{if(p<65534&&o.subarray&&fo)return String.fromCharCode.apply(null,o.length===p?o:o.subarray(0,p));let f="";for(let m=0;m<p;m++)f+=String.fromCharCode(o[m]);return f};var dh=(o,p)=>{let f=p||o.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(o.subarray(0,p));let m,h,A=new Array(f*2);for(h=0,m=0;m<f;){let w=o[m++];if(w<128){A[h++]=w;continue}let R=qs[w];if(R>4){A[h++]=65533,m+=R-1;continue}for(w&=R===2?31:R===3?15:7;R>1&&m<f;)w=w<<6|o[m++]&63,R--;if(R>1){A[h++]=65533;continue}w<65536?A[h++]=w:(w-=65536,A[h++]=55296|w>>10&1023,A[h++]=56320|w&1023)}return go(A,h)},ph=(o,p)=>{p=p||o.length,p>o.length&&(p=o.length);let f=p-1;for(;f>=0&&(o[f]&192)===128;)f--;return f<0||f===0?p:f+qs[o[f]]>p?f:p},mo={string2buf:uh,buf2string:dh,utf8border:ph};function fh(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var gh=fh;let yo=Object.prototype.toString,{Z_NO_FLUSH:mh,Z_SYNC_FLUSH:yh,Z_FULL_FLUSH:Eh,Z_FINISH:Sh,Z_OK:Pi,Z_STREAM_END:vh,Z_DEFAULT_COMPRESSION:_h,Z_DEFAULT_STRATEGY:wh,Z_DEFLATED:bh}=ro;function Oi(o){this.options=po.assign({level:_h,method:bh,chunkSize:16384,windowBits:15,memLevel:8,strategy:wh},o||{});let p=this.options;p.raw&&p.windowBits>0?p.windowBits=-p.windowBits:p.gzip&&p.windowBits>0&&p.windowBits<16&&(p.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new gh,this.strm.avail_out=0;let f=Gs.deflateInit2(this.strm,p.level,p.method,p.windowBits,p.memLevel,p.strategy);if(f!==Pi)throw new Error(wi[f]);if(p.header&&Gs.deflateSetHeader(this.strm,p.header),p.dictionary){let m;if(typeof p.dictionary=="string"?m=mo.string2buf(p.dictionary):yo.call(p.dictionary)==="[object ArrayBuffer]"?m=new Uint8Array(p.dictionary):m=p.dictionary,f=Gs.deflateSetDictionary(this.strm,m),f!==Pi)throw new Error(wi[f]);this._dict_set=!0}}Oi.prototype.push=function(o,p){let f=this.strm,m=this.options.chunkSize,h,A;if(this.ended)return!1;for(p===~~p?A=p:A=p===!0?Sh:mh,typeof o=="string"?f.input=mo.string2buf(o):yo.call(o)==="[object ArrayBuffer]"?f.input=new Uint8Array(o):f.input=o,f.next_in=0,f.avail_in=f.input.length;;){if(f.avail_out===0&&(f.output=new Uint8Array(m),f.next_out=0,f.avail_out=m),(A===yh||A===Eh)&&f.avail_out<=6){this.onData(f.output.subarray(0,f.next_out)),f.avail_out=0;continue}if(h=Gs.deflate(f,A),h===vh)return f.next_out>0&&this.onData(f.output.subarray(0,f.next_out)),h=Gs.deflateEnd(this.strm),this.onEnd(h),this.ended=!0,h===Pi;if(f.avail_out===0){this.onData(f.output);continue}if(A>0&&f.next_out>0){this.onData(f.output.subarray(0,f.next_out)),f.avail_out=0;continue}if(f.avail_in===0)break}return!0},Oi.prototype.onData=function(o){this.chunks.push(o)},Oi.prototype.onEnd=function(o){o===Pi&&(this.result=po.flattenChunks(this.chunks)),this.chunks=[],this.err=o,this.msg=this.strm.msg};function Th(o,p){p=p||{};let f=new Oi(p);if(f.push(o,!0),f.err)throw f.msg||wi[f.err];return f.result}function Ah(o,p){return p=p||{},p.gzip=!0,Th(o,p)}return(o,p,f)=>{let m=Ah(o);return p==="base64"?m=btoa(go(m)):m=m.buffer,f&&f(m),m}}var Qy=(()=>{class s extends rc{constructor(t){super(t),this.algorithm=nr.GZIP,this.Dg=_a(),this.SA=(i,n,a)=>{let c=this.Dg(i,n);a(c)},this.compress=wa(),typeof CompressionStream!="undefined"&&Ly||(this.compress=this.SA,this.getCompressorSourceCode=()=>_a.toString())}compressSync(t,e){return this.Dg(t,e)}getCompressorSourceCode(){return wa.toString()}}return s})();function wa(){let s=r=>new Promise(t=>{let e=new FileReader;e.onload=i=>t(i.target.result.split(",")[1]),e.readAsDataURL(new Blob([r]))});return(r,t,e)=>{let i=new Response(r).body.pipeThrough(new CompressionStream("gzip")),n=new Response(i).arrayBuffer();if(t==="base64"){n.then(a=>s(a)).then(a=>e(a));return}n.then(a=>e(a))}}var Zy=(()=>{class s extends rc{constructor(){super(...arguments),this.algorithm=nr.UNCOMPRESSED}compress(t,e,i){i(this.compressSync(t,e))}compressSync(t,e){return t}getCompressorSourceCode(){return function(){return(t,e,i)=>i(t)}.toString()}}return s})(),Xc=(()=>{class s{static create(t,e=!0){return this.instance?this.instance:e&&!Ky.isCompressionEnabled()?new Zy(t):this.instance=new Qy(t)}}return s})(),tE=["setEncryptionSelectors"],Kc=["setPIISelectors"],eE=["setCapturedElementsSelector"],sE=(()=>{class s{constructor(t,e,i,n,a,c,l){this.S=t,this.E=e,this.lt=i,this.we=n,this.Ft=a,this.ot=c,this.Tr=l}init(){var t,e;this.Tr&&this.ot&&((t=this.Tr)===null||t===void 0||t.addSelector((e=this.ot)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.ht()}onStartTracking(t){this.we.start(),this.S.emitSensitiveStatusChange()}onBeforeArtificialPageView(){this.we.stop(),this.S.emitSensitiveStatusChange()}onAfterArtificialPageView(){this.we.start(),this.S.emitSensitiveStatusChange()}onBeforeSessionRenewal(){this.we.stop(),this.S.emitSensitiveStatusChange()}onOptout(){this.we.stop(),this.S.emitSensitiveStatusChange()}onReplayUnanonymizationConsentGranted(){this.S.emitSensitiveStatusChange()}onReplayUnanonymizationConsentWithdrawn(){this.S.emitSensitiveStatusChange()}ht(){this.E.register(Kc,t=>{this.lt.setMaskedElementSettingsFromCommand(t),this.S.emitSensitiveStatusChange()}),this.E.register(eE,t=>{this.Ft.setWhitelistedElementsSelector(t),this.S.emitSensitiveStatusChange()}),this.E.register(tE,t=>{var e,i;(e=this.ot)===null||e===void 0||e.setEncryptionSelectors(t),(i=this.Tr)===null||i===void 0||i.addSelector(t)})}}return s})();var iE=(()=>{class s extends Pt{constructor(t,e,i,n,a,c){super(),this.ue=t,this.lt=e,this.Ft=i,this.Tr=n,this.Ar=a,this.it=c}onStart(){var t,e,i;this.Ft.start(),this.ue.setMaskedElementSettings(this.lt.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements())),this.ue.startIdentifier(),(e=this.Tr)===null||e===void 0||e.start(),(i=this.Ar)===null||i===void 0||i.start()}onStop(){var t,e;this.Ft.stop(),this.ue.stopIdentifier(),(t=this.Tr)===null||t===void 0||t.stop(),(e=this.Ar)===null||e===void 0||e.stop()}}return s})(),rE=(()=>{class s{constructor(t,e,i,n,a){this.it=t,this.lt=e,this.we=i,this.Ft=n,this.ot=a}getSensitiveStatus(){var t,e;return{started:this.we.isStarted,useAnonymization:this.it.shouldUseAnonymization(),capturedElementSelector:this.Ft.getWhitelistedElementsSelector(),maskedElementSettings:this.lt.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements()),encryptionSelectors:(e=this.ot)===null||e===void 0?void 0:e.getEncryptionSelectors()}}getElementSensitiveStatus(t){let e=this.we.isStarted,i=this.it.shouldUseAnonymization();return e?N.isMaskedElement(t)||N.isMaskedElementChild(t)?Be.MASKED:dp.shouldEncrypt(t)?Be.ENCRYPTED:$e.isEditableNode(t)?Be.ANONYMIZED:i?Ee.isWhitelistedElement(t)?Be.CAPTURED:Be.ANONYMIZED:Be.CAPTURED:Be.ANONYMIZED}}return s})(),nE=(()=>{class s{constructor(t){this.Y=t}onAfterVisitorRenewal(){this.Y.renewSession()}}return s})(),ba=(()=>{let s;return function(r){function t(d,E){for(let y of d)if(i(y,E))return!0;return!1}r.isUrlMatching=t;function e(d,E){if($(E)){for(let y of d)if(i(y,E))return!0}else if(zi(E)){for(let y of d)if(i(y,csString(E)))return!0}return!1}r.isMatching=e;function i(d,E){let y=n(d,E);return d.negate?!y:y}function n(d,E){switch(d.rule_type==="date"&&(d.match_operation==="less_than"||d.match_operation==="greater_than")&&(E=(new csDate(E).valueOf()/1e3).toFixed(0)),d.match_operation){case"exact":switch(d.rule_type){case"string":return $(d.pattern)?csString.prototype.toLowerCase.call(E)===csString.prototype.toLowerCase.call(d.pattern):!1;case"boolean":return E===d.pattern||E===csString(d.pattern);case"number":return Mt(E)?Number(E)===Number(d.pattern):!1;default:return E===d.pattern}case"starts_with":return $(d.pattern)?csString.prototype.indexOf.call(E,d.pattern)===0:!1;case"ends_with":return $(d.pattern)?di(E,d.pattern):!1;case"contains":return $(d.pattern)?csString.prototype.indexOf.call(E,d.pattern)!==-1:!1;case"regex":if(!$(d.pattern))return!1;try{return new csRegExp(d.pattern).test(E)}catch(y){return j.warn(`targeting.matchOperation.regex invalid ${y==null?void 0:y.message}`),!1}case"simple":return $(d.pattern)?g(E)===g(d.pattern):!1;case"greater_than":return Number(E)>Number(d.pattern);case"less_than":return Number(E)<Number(d.pattern);case"exact_date":{let y=Number(d.pattern);if(!Xt(y))return!1;let v=new csDate(y*1e3);return new csDate(E).toDateString()===v.toDateString()}case"exact_days_ago":return a(d,E);case"more_than_days_ago":return c(d,E);case"less_than_days_ago":return l(d,E);case"unknown":return u(E);default:return j.warn(`targeting.matchOperation.regex not managed operation ${d.match_operation}`),!1}}function a(d,E){let y=new csDate,v=y.setDate(y.getDate()-Number(d.pattern)),I=new csDate(v);return new csDate(E).toDateString()===I.toDateString()}function c(d,E){let y=Number(d.pattern);if(!Xt(y))return!1;let v=Number(y)+1,I=new csDate,P=new csDate(I);return P.setDate(I.getDate()-v),new csDate(E).getTime()<=P.getTime()}function l(d,E){let y=Number(d.pattern);if(!Xt(y))return!1;if(y===0)return a(d,E);let v=new csDate,I=new csDate(v);return I.setDate(v.getDate()-y),new csDate(E).getTime()>=I.getTime()}function u(d){return Mt(d)?$(d)?csString.prototype.trim.call(d)==="":zi(d)?d===!0:Xt(d)?d!==0:!1:!0}function g(d){let E=Tt(d,"http://")||Tt(d,"https://")?d:`https://${d}`,y=On(E);return y!==null?csString.prototype.replace.call(y.host,/^www./,""):d}}(s||(s={})),s})(),oE=(()=>{class s{constructor(){this.Lg=[],this.Vg=[]}setTargetingRules(t){for(let e of t)e.component==="url"?csArray.prototype.push.call(this.Lg,e):e.component==="trigger"&&csArray.prototype.push.call(this.Vg,e)}matchUrl(t){return ba.isUrlMatching(this.Lg,t)}matchTrigger(t){return ba.isMatching(this.Vg,t)}}return s})(),aE=(()=>{class s extends Pt{constructor(t,e,i){super(),this.Ha=t,this.Fh=e,this.w=i}init(){this.$h=new oE,this.Ha&&this.$h.setTargetingRules(this.Ha)}onStart(){}checkInitialUrlTargetingRules(){let t=this.w.getAnonymizedUrl();this.zh(t,"url")&&this.Fh()}onStop(){}onTargetingRulesArtificialPageview(t){this.isStarted&&this.zh(t,"url")&&this.Fh()}onExternalEvent(t){this.isStarted&&this.zh(t.name,"trigger")&&this.Fh()}zh(t,e){var i,n;return e==="url"&&$(t)&&(!((i=this.$h)===null||i===void 0)&&i.matchUrl(t))?!0:!!(e==="trigger"&&(!((n=this.$h)===null||n===void 0)&&n.matchTrigger(t)))}}return s})(),cE=(()=>{class s{constructor(t,e,i,n,a,c){this.Ha=t,this.AA=e,this.S=i,this._t=n,this.K=a,this.w=c}init(){this.Jn=new aE(this.Ha,this.AA,this.w),this.K.addListener(this.Jn),this.Jn.init()}start(){this.Jn.start()}stop(){this.Jn.stop()}checkInitialUrlTargetingRules(){this.Jn.checkInitialUrlTargetingRules()}emitTargetingCollectState(){let t=this._t.getInitialCollectState();t===V.ANALYTICS_ONLY?this.S.emitCollectStateChange(V.ANALYTICS_ONLY_RULES_TARGETING,Ht.ETR_OFF):t===V.RECORDING_GLOBAL_SAMPLING&&this.S.emitCollectStateChange(V.RECORDING_RULES_TARGETING,Ht.ETR_OFF)}}return s})(),lE=["networkRequest:maskUrls"],hE=["networkRequest:maskUrls:reset"],uE=(()=>{class s{constructor(t,e){this.Ug=t,this.ft=e}init(){this.Ug.register(lE,t=>{if($(t)){this.ft.addPartialUrlMaskingPattern(t);return}if(csArray.isArray(t))for(let e of t)$(e)&&this.ft.addPartialUrlMaskingPattern(e)}),this.Ug.register(hE,()=>this.ft.resetPartialUrlMaskingPatterns())}}return s})(),Jc=":";function Ta(s){let r=[],t=dE(s),e=csString.prototype.split.call(t,"/");for(let i of e)Tt(i,Jc)?csArray.prototype.push.call(r,{key:i,value:`CS_ANONYMIZED_${csString.prototype.toUpperCase.call(csString.prototype.slice.call(i,1))}`}):csArray.prototype.push.call(r,{key:i,value:null});return r}function dE(s){let r=s;return Tt(s,"/")&&(r=csString.prototype.substring.call(r,1)),di(s,"/")&&(r=csString.prototype.slice.call(r,0,-1)),r}var Qc=(()=>{class s{constructor(){this.jg=new Set,this.Hg=[],this.Gh=new Set,this.qh=[]}addUrlMaskingPattern(t){if(this.jg.has(t))return;this.jg.add(t);let e=Ta(t);csArray.prototype.push.call(this.Hg,e)}getUrlMaskingPatterns(){return this.Hg}resetPartialUrlMaskingPatterns(){this.Gh.clear(),this.qh=[]}addPartialUrlMaskingPattern(t){if(this.Gh.has(t))return;this.Gh.add(t);let e=Ta(t);csArray.prototype.push.call(this.qh,e)}getPartialUrlMaskingPatterns(){return this.qh}}return s})();var pE=(()=>{class s{constructor(t,e,i){this.f=t,this.N=e,this.R=i,this.es=C.now()}resetStartTime(){this.es=C.now()}getSessionData(){let{projectId:t}=this.f,e=this.N.getVisitor();e==null&&j.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{id:i,visitsCount:n}=e!=null?e:{},a=this.R.getSession();a===null&&j.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{pageNumber:c}=a!=null?a:{};return{projectId:t,userId:i,sessionNumber:n,pageNumber:c,relativeTimestamp:C.now()-this.es}}}return s})(),fE=["clearSession"],gE=["extendSession"],mE=["extendSessionV2"],yE=["getSessionData"],EE=["session:start:newVisitor"],SE=["session:clear:visitor"],vE=(()=>{class s{constructor(t,e,i,n){this.f=t,this.N=e,this.R=i,this.E=n}init(){this.Wh=new pE(this.f,this.N,this.R),this.E.register(fE,()=>this.R.removeSession()),this.E.register(gE,()=>this.R.extendSessionPeriodically(),{disableApplyPending:!0}),this.f.isHeapSideloadsCs()&&this.E.register(mE,()=>this.R.extendSession(),{disableApplyPending:!0}),this.E.register(yE,()=>this.Wh.getSessionData(),{disableApplyPending:!0}),this.E.register(EE,()=>this.N.renewVisitor()),this.E.register(SE,()=>{this.N.resetVisitor()},{disableApplyImmediate:!0})}onBeforeNaturalPageView(){this.N.createOrUpdateVisitor(),this.R.createOrUpdateSession()}onBeforeArtificialPageView(){this.N.createOrUpdateVisitor(),this.R.createOrUpdateSession()}onAfterNaturalPageView(){this.Wh.resetStartTime()}onAfterArtificialPageView(){this.Wh.resetStartTime()}onOptout(){this.N.removeVisitor(),this.R.removeSession()}onCollectStateChange(t){this.R.updateCollectState(t)}}return s})(),_E=(()=>{class s{constructor(t,e,i,n,a,c,l,u,g,d,E,y,v,I,P,S,_,D,O,T,L,Z,rt,Et,St,b,k,U,B,ot,Ot,Vt,Te,ms){this.Et=t,this.Rr=e,this.ye=i,this.N=n,this.R=a,this.Y=c,this.Vi=l,this.S=u,this.E=g,this.Yh=d,this.f=E,this.Xh=y,this.ii=v,this.Qn=I,this.bt=P,this.O=S,this.Z=_,this.et=D,this.w=O,this.PA=T,this.K=L,this.ut=Z,this.vt=rt,this.Bg=Et,this.re=St,this.OA=b,this.I=k,this.Gt=U,this.M=B,this.At=ot,this._t=Ot,this.lt=Vt,this.ve=Te,this.ys=ms,this.NA=(Ut=!1)=>{let Ft=this.R.getSession();Ft===null?(this.Cr=new cE(this.f.recordTargetingRules,this.Fg,this.S,this._t,this.K,this.w),this.Cr.init(),this.Cr.start()):(Ft.collectState===V.RECORDING_RULES_TARGETING||Ft.collectState===V.ANALYTICS_ONLY_RULES_TARGETING)&&this.Fg(Ut)},this.Fg=(Ut=!1)=>{this.Ir.onLoad(()=>{var Ft,de;(Ft=this.Cr)===null||Ft===void 0||Ft.emitTargetingCollectState(),(de=this.Cr)===null||de===void 0||de.stop(),this.S.emitStartTracking(Ut)}),this.Zn(Ut)},this.Zn=(Ut=!1)=>{this.ii.isActive()||(this.lt.init(),this.Kh.start(Ut),this.Ir.start())},this.MA=()=>{this.S.emitBeforeSessionRenewal(),this.Pr(!0),this.S.emitAfterSessionRenewal()},this.kA=()=>{this.S.emitBeforeSessionRenewal(),this._t.refreshQuota(Ut=>{Ut!==V.QUOTA_REACHED&&(this.Pr(!0),this.S.emitAfterSessionRenewal())})}}start(){if(this.Xh.init(),this.ii.init(),this.ii.isActive())return;let t,e,i,n,a,c,l,u,g,d,E,y,v,I,P,S,_,D,O;this.I.schedule(()=>{P=new nE(this.Y),y=new Pp(this.Z),v=new lp(()=>{}),S=new hp,O=new up;let T=new iE(v,this.lt,S,D,O,this.Jh());I=new rE(this.Jh(),this.lt,T,S,_);let L=new sE(this.S,this.E,this.lt,T,S,_,D);L.init(),this.S.addListener(L),t=new Wf(this.f,this.Rr,this.N,this.Z,y,this.E,this.Y,new Ap(j),this.ut,this.Gt,this.K,I,this._l),e=new vg(this.E,this.R,this.f,this.Et,this.ye,this.O),E=new Yy(I,this.f);let Z=new Cp(this.f);d=new Rp(this.f,Z,E,I,this.ut),d.init();let rt=new Zg;i=new $g(this.N,this.R,this.E,this.ut,Z,this.f,rt,E),n=new Ig(this.f,this.Rr,this.N,this.E,this.O,this.Y,this.w),this.f.isHeapSideloadsCs()&&(this.ve||(this.ve=new Qg),this.$g=new Jg(this.ve,this.E),this.S.addListener(this.$g),this.$g.init());let Et;if(this.f.isHeapSideloadsCs()){Et=new Vp;let St=new xp(Et,this.E);this.S.addListener(St),St.init()}this.Kh=new lm(this.f,this.E,this.S,this.Rr,this.N,this.R,this.Vi,this.bt,this.vt,this.w,this.re,rt,this.K,this.ve,Et),this.zg=new vE(this.f,this.N,this.R,this.E),l=new Wg(this.f,this.E,this.ye,this.Rr,this.K),u=new zg(this.E),g=new Np,this.Ir=new df}),this.f.apiErrors.enabled&&this.I.schedule(()=>{this.ft=new Qc,this.DA=new uE(this.E,this.ft),this.DA.init()}),this.f.apiErrors.enabled&&this.I.schedule(()=>{var T,L,Z;let rt;!((T=this.f.apiErrors.collectionRules)===null||T===void 0)&&T.length?rt=new ig(this.f.apiErrors,this.O):rt=new rg(this.f.apiErrors,this.O),this.pt=new Qf(new uf,new lf,rt),this.fe=new Zf(this.ft,this.et,!!(!((Z=(L=this.f)===null||L===void 0?void 0:L.experimental)===null||Z===void 0)&&Z.anonymizeNameInUrls)),this._r=new tg;let Et=new Kf(this.pt,this.fe,this.f,this.Rr,this.ut,this.E,this.Gt);Et.init(),this.S.addListener(Et)}),this.f.jsErrorsEnabled&&this.I.schedule(()=>{this.As=new dg,this.ge=new fg(this.O,this.w);let T=new ug(this.As,this.ge,this.f,this.Rr,this.ut,this.E,this.K,this.w,this.Gt);T.init(),this.S.addListener(T)}),this.I.schedule(()=>{this.Qn.init()}),this.I.schedule(()=>{i.init()}),this.I.schedule(()=>{e.init()}),this.I.schedule(()=>{n.init()}),this.I.schedule(()=>{this.Bg.init()}),this.I.schedule(()=>{this.Kh.init()}),this.I.schedule(()=>{this.zg.init()}),this.I.schedule(()=>{l.init()}),this.I.schedule(()=>{this.PA.init()}),this.I.schedule(()=>{u.init()}),this.I.schedule(()=>{g.init()}),this.I.schedule(()=>{this.OA.init()}),this.I.schedule(()=>{this.S.addListener(this.zg),this.S.addListener(this.Yh),this.S.addListener(t),this.S.addListener(this.Qn),this.S.addListener(i),this.S.addListener(n),this.S.addListener(this.Bg),this.S.addListener(this.Kh),this.S.addListener(l),this.S.addListener(e),this.S.addListener(d),this.S.addListener(g),this.S.addListener(P)}),li.isRecordingSupported()&&this.I.schedule(()=>{let T=new Wy(E,this.R,this.f,this.Et,this.E,this.O,this.Y,v,this.ge,this.pt,this.fe,this.ft,this.S,this.K,this.ut,this.re,this.Gt,this.et,this._r,this.Jh(),this.cr,_);T.init(),this.S.addListener(T),i.setRecordingService(T.recordingService)}),this.I.schedule(()=>{var T;let L,Z}),this.I.schedule(()=>{t.init()}),this.f.isHeapSideloadsStartDataCollection()&&this.I.schedule(()=>{this.E.register(["startDataCollection"],()=>{this.Zn()})}),this.I.schedule(()=>{this.f.isQuotaEnabled()?this.Y.onSessionExpired(()=>{this.kA()}):this.Y.onSessionExpired(()=>{this.MA()}),this.Pr()})}Pr(t=!1){var e,i,n;if(this.f.hasTargetingRules()){this.NA(t),this.E.start(),(e=this._l)===null||e===void 0||e.start(),this.Cr&&this.Cr.checkInitialUrlTargetingRules();return}this.E.start(),(i=this._l)===null||i===void 0||i.start(),this.Ir.onLoad(()=>{this.S.emitStartTracking(t)}),(!gc(this.f)&&!this.f.isHeapSideloadsStartDataCollection()||t)&&this.Zn(t)}Jh(){if(this.it)return this.it;let t=new dc;return this.it=new mp(this.f,this.w,t,this.bt),this.it.init(),this.it.shouldUseAnonymization()&&q.counters.pageAnonymisation.count("anonymized-on-start"),this.it}}return s})(),wE=(()=>{class s{constructor(t,e,i,n,a,c,l,u){this.f=t,this.N=e,this.Je=i,this.Gg=n,this.xA=a,this.LA=c,this.VA=l,this.Qh=u}compute(t){var e,i;this.f.crossDomainTracking&&!this.f.cookielessTrackingEnabled?this.f.crossDomainSingleIframeTracking?(e=this.VA)===null||e===void 0||e.start(()=>this.Zh(t)):(i=this.LA)===null||i===void 0||i.applyUpToDate(()=>this.Zh(t)):this.Zh(t)}Zh(t){this.xA.handle(),this.Gg.clear(),this.UA()?(this.Gg.restoreClearedVisitor(),t(!0)):(this.Je.exclude(this.f),t(!1))}UA(){let t=hs.boolean(this.f.sampleRate);return this.Qh.isForceIncluded()||!this.Je.isExcluded()&&this.N.doesVisitorExist()||!this.Je.isExcluded()&&t}}return s})(),bE=(()=>{class s{constructor(t,e,i,n){this.f=t,this.gt=e,this.S=i,this.R=n,this.jA=10*1e3}createOrUpdateVisitor(){var t;let e=this.getVisitor();e===null&&(e=this.HA(),(t=this.R)===null||t===void 0||t.removeSession()),this.BA(e),this.setVisitor(e)}HA(){return{id:cf.generate(),visitsCount:0,appliedTrackingDraw:this.f.lastTrackingDraw,creationTimestamp:_o(),lastVisitTimestamp:0,hitTimestamp:0,expires:C.now()+this.f.visitorCookieTimeout,allowSubdomains:this.f.allowSubdomains,identityPrint:null}}BA(t){let e=_o();this.R&&!this.R.doesSessionExist()&&(t.visitsCount+=1,t.lastVisitTimestamp=e),t.hitTimestamp=e,t.appliedTrackingDraw=this.f.lastTrackingDraw,this.qg=t.visitsCount}getRequestParameters(){let t=this.getVisitor();return t?{uu:t.id,sn:`${t.visitsCount}`,hd:`${t.hitTimestamp}`}:{}}getVisitor(){return this.gt.get()}setVisitor(t){this.gt.set(t)}doesVisitorExist(){return this.gt.get()!==null}resetVisitor(){this.Wg(),this.S.emitAfterVisitorCleared()}removeVisitor(){this.gt.remove()}hasAllowSubdomainsChanged(){let t=this.getVisitor();return t?t.allowSubdomains!==this.f.allowSubdomains:!1}handleSubdomainChange(){this.gt.handleSubdomainChange()}isSessionRenewed(){let t=this.getVisitor();return t===null||this.qg===void 0?!1:t.visitsCount!==this.qg}FA(){return!J(this.Yg)||C.now()-this.Yg>this.jA}renewVisitor(){this.FA()?(this.Yg=C.now(),this.Wg(),this.S.emitAfterVisitorRenewal()):j.warn("session:start:newVisitor is trying to renew visitor under time limit")}Wg(){this.S.emitBeforeVisitorRenewal(),this.removeVisitor()}}return s})(),Jt="_cs_s",fn=18e5,Ur=".",TE=13,Ui=(()=>{let s;return function(r){r[r.NOT_FOUND=0]="NOT_FOUND",r[r.EXPIRED=1]="EXPIRED",r[r.FOUND=2]="FOUND"}(s||(s={})),s})(),AE=(()=>{class s{constructor(t,e,i){this.f=t,this.M=e,this.J=i,this.ne=null,this.tu=!1}get(t){let e=this.getRawSession(t);return this.isValid(e)?lc(e):null}getRawSession(t){if(t){let g=this.eu();return en(g)}let{sessionString:e,status:i}=this.$A(),n=en(e);if(i!==Ui.EXPIRED)return n;if(this.f.cookielessTrackingEnabled)return null;let a=this.eu();if(!a)return null;let c=csString.prototype.split.call(a,Ur);if(!s.Xg(c))return a;let l=c[c.length-1],u=parseInt(l,10);return isNaN(u)||this.zA(u),n}onCookieToSet(t){this.yi=t}onCookieToRemove(t){this.Ei=t}set(t,e=fn){var i;let n=C.now()+e,a=$d(t);a+=`${Ur}${n}`,this.GA(a,n),this.f.cookielessTrackingEnabled?this.J.setItem(Jt,a):(this.M.set(Jt,a,e),(i=this.yi)===null||i===void 0||i.call(this,Jt,a,e))}remove(){var t;this.f.cookielessTrackingEnabled?this.J.removeItem(Jt):(this.M.delete(Jt),(t=this.Ei)===null||t===void 0||t.call(this,Jt)),this.qA()}handleSubdomainChange(){if(this.f.cookielessTrackingEnabled)return;let t=this.get(!0);t&&(this.f.allowSubdomains?this.M.delete(Jt,rr.CURRENT_DOMAIN):this.M.delete(Jt,this.M.getRootDomain()),this.set(t))}isValid(t){return t!==null&&Mn(t)}GA(t,e){this.ne={sessionString:t,expires:e}}$A(){return this.ne?this.ne&&C.now()<=this.ne.expires?{sessionString:this.ne.sessionString,status:Ui.FOUND}:{sessionString:this.ne.sessionString,status:Ui.EXPIRED}:{sessionString:this.eu(),status:Ui.NOT_FOUND}}qA(){this.ne=null}zA(t){this.ne&&(this.ne.expires=t,this.tu=!0)}isCacheRefreshed(){return this.tu}resetCacheRefreshed(){this.tu=!1}eu(){if(this.f.cookielessTrackingEnabled){let e=this.J.getItem(Jt);return!e||this.Kg(e)?null:e}let t=this.M.get(Jt);return!t||this.Kg(t)?null:t}Kg(t){let e=csString.prototype.split.call(t,Ur);if(!s.Xg(e))return!1;let i=parseInt(e[e.length-1],10);return!isNaN(i)&&C.now()>i}static Xg(t){return t[t.length-1].length===TE}}return s})(),zn=60*1e3,RE=60*zn,CE=4*RE-zn,ws=(()=>{let s;return function(r){r[r.NO=0]="NO",r[r.WITHDRAWN=1]="WITHDRAWN",r[r.GRANTED=2]="GRANTED"}(s||(s={})),s})(),IE=(()=>{class s{constructor(t,e,i,n,a){this.Ve=t,this._t=e,this.S=i,this.WA=n,this.YA=a,this.to=null,this.su=0,this.eo=ws.NO}setDynamicVariablesService(t){this.KA=t}createOrUpdateSession(){this.iu(),this.JA=C.now(),this.su=0;let t=this.Jg();t===null?(t=this.QA(),this.Ba(t),this.S.emitSessionCreated()):(t=this._t.sanitizeSessionCollectState(t),this.ZA(t),t.collectState=this._t.getEligibleCollectState(t)),this.setSession(t)}grantReplayRecording(t){t.collectState=this._t.getInitialCollectState(),t.collectState=this._t.computeInitialCollectStateFromRecordingConsentGranted(t),this.setSession(t)}grantReplayRecordingBeforeSessionStart(){this.eo=ws.GRANTED}withdrawnReplayRecording(t){t.collectState=this._t.getRecordingConsentWithdrawn(),this.setSession(t)}withdrawnReplayRecordingBeforeSessionStart(){this.eo=ws.WITHDRAWN}Ba(t){this.eo===ws.WITHDRAWN?(t.collectState=this._t.getRecordingConsentWithdrawn(),this.setSession(t)):this.eo===ws.GRANTED?t.collectState=this._t.computeInitialCollectStateFromRecordingConsentGranted(t):t.collectState=this._t.computeInitialCollectState(t),this.eo=ws.NO}QA(){return{pageNumber:1,collectState:this._t.getInitialCollectState(),replayConsent:this.WA?tn.NOT_EXPRESSED:tn.UNNECESSARY,etrStatus:qt.ETR_NOT_SAVED_SESSION}}ZA(t){t.pageNumber+=1}isReplayRecorded(){let t=this.getSession();return!!t&&this._t.isReplayRecorded(t)}isTemporarilyRecorded(){let t=this.getSession();return(t==null?void 0:t.collectState)===V.RECORDING_TEMPORARILY}getRequestParameters(){let t={},e=this.getSession();return e!==null&&(t.pn=`${e.pageNumber}`),t}getSession(){return this.Ve.get()}Jg(){return this.Ve.get(!0)}doesSessionExist(){return this.Ve.get()!==null}setSession(t){this.Ve.set(t),this.S.emitSessionRefreshed()}refreshSession(){let t=this.Jg();t&&this.setSession(t)}removeSession(){this.Ve.remove(),this.S.emitSessionRemoved()}getCollectStates(){let t=this.getSession(),e=[];return t&&(t.collectState!==V.ANALYTICS_ONLY&&csArray.prototype.push.call(e,t.collectState===V.RECORDING_RULES_TARGETING?V.RECORDING_GLOBAL_SAMPLING:t.collectState),this.YA&&csArray.prototype.push.call(e,V.RECORDING_ETR_SAMPLING)),e}updateCollectState(t){let e=this.getSession();e!==null&&(e.collectState=t,this.setSession(e))}hasValidSession(){let t=this.Ve.getRawSession();return this.Ve.isValid(t)}handleSubdomainChange(){this.Ve.handleSubdomainChange()}pollCacheRefreshEvent(t=!0){let e=this.Ve.isCacheRefreshed();return e&&t&&this.Ve.resetCacheRefreshed(),e}extendSessionPeriodically(){this.to||this.Qg()}extendSession(){let t=this.getSession();return t===null?(j.warn("extendSession is trying to extend an expired session"),this.iu(),!1):(this.setSession(t),!0)}Qg(){if(this.t0()){this.iu();return}this.extendSession()&&(this.e0(),this.s0())}s0(){this.to=window.csSetTimeout(()=>{this.Qg()},fn-zn)}t0(){return CE-(C.now()+fn-this.JA)<0}iu(){this.to&&(window.csClearTimeout(this.to),this.to=null)}e0(){this.su+=1,this.KA.trackDynamicVariable("session_expiry_update",this.su)}}return s})(),PE=(()=>{class s{constructor(t,e,i){this.f=t,this.N=e,this.Je=i}clear(){this.i0()&&(this.Zg=this.N.getVisitor(),this.N.removeVisitor()),this.r0()&&this.Je.removeExclusion()}i0(){return this.N.doesVisitorExist()&&this.N.getVisitor().appliedTrackingDraw!==this.f.lastTrackingDraw}r0(){return this.Je.getAppliedTrackingDraw()!==this.f.lastTrackingDraw}restoreClearedVisitor(){this.Zg&&this.N.setVisitor(this.Zg)}}return s})(),OE=(()=>{class s{constructor(t,e,i){this.N=t,this.R=e,this.n0=i}handle(){this.N.hasAllowSubdomainsChanged()&&(this.N.handleSubdomainChange(),this.R.handleSubdomainChange(),this.n0.handleSubdomainChange())}}return s})(),He="_cs_c",ns=(()=>{let s;return function(r){r[r.NOT_REQUIRED=0]="NOT_REQUIRED",r[r.NOT_EXPRESSED=1]="NOT_EXPRESSED",r[r.GRANTED=2]="GRANTED",r[r.WITHDRAWN=3]="WITHDRAWN"}(s||(s={})),s})(),NE=(()=>{class s{constructor(t,e,i){this.f=t,this.M=e,this.At=i}get(){let t;return this.f.cookielessTrackingEnabled?t=this.At.getItem(He):t=this.M.get(He),t===null?t:Number(t)}set(t){this.f.cookielessTrackingEnabled?this.At.setItem(He,csString(t)):this.M.set(He,csString(t),En)}remove(){this.f.cookielessTrackingEnabled?this.At.removeItem(He):this.M.delete(He)}handleSubdomainChange(){this.f.cookielessTrackingEnabled||(this.f.allowSubdomains?this.M.delete(He,rr.CURRENT_DOMAIN):this.M.delete(He,this.M.getRootDomain()))}}return s})(),ME=(()=>{class s{constructor(t,e,i){this.f=t,this.R=e,this.S=i}grantReplayConsent(){if(!qe.isReplayConsentNeeded(this.f))return;let t=this.R.getSession();if(!t){this.R.grantReplayRecordingBeforeSessionStart();return}qe.isRecordingBlockedByConsent(t)&&(this.R.grantReplayRecording(t),this.S.emitAfterReplayRecordingConsentGranted())}withdrawReplayConsent(){if(!qe.isReplayConsentNeeded(this.f))return;let t=this.R.getSession();if(!t){this.R.withdrawnReplayRecordingBeforeSessionStart();return}qe.isRecordingWithDrawn(t)||(this.R.withdrawnReplayRecording(t),this.S.emitAfterReplayRecordingConsentWithdrawn())}}return s})(),kE=["replay:consent:unanonymized:granted","trackConsentGranted"],DE=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],xE=["replay:consent:startForSession:granted"],LE=["replay:consent:startForSession:withdrawn"],VE=(()=>{class s{constructor(t,e,i,n,a){this.f=t,this.E=e,this.bt=i,this.R=n,this.S=a}init(){this.tm=new ME(this.f,this.R,this.S),this.bt.setInitialConsent(),this.ht()}ht(){this.E.register(kE,()=>{this.bt.grantReplayAnonymizationConsent()}),this.E.register(DE,()=>{this.bt.withdrawReplayAnonymizationConsent()}),this.E.register(xE,()=>{this.tm.grantReplayConsent()}),this.E.register(LE,()=>{this.tm.withdrawReplayConsent()})}onOptout(){this.bt.removeAllConsents()}onBeforeVisitorRenewal(){this.bt.removeAllConsents()}onAfterVisitorRenewal(){this.bt.setInitialConsent()}onAfterVisitorCleared(){this.bt.setInitialConsent()}}return s})(),UE=(()=>{class s{constructor(t,e,i){this.f=t,this.gt=e,this.S=i}setInitialConsent(){let t=this.gt.get();(t===null||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()}hasConsentRequiredChanged(t){let e=this.f.consentRequired;return e&&t===ns.NOT_REQUIRED||!e&&t!==ns.NOT_REQUIRED}handleSubdomainChange(){this.gt.handleSubdomainChange()}setDefaultReplayAnonymization(){let t=this.f.consentRequired?ns.NOT_EXPRESSED:ns.NOT_REQUIRED;this.gt.set(t)}grantReplayAnonymizationConsent(){this.f.consentRequired&&(this.gt.set(ns.GRANTED),this.S.emitReplayUnanonymizationConsentGranted())}withdrawReplayAnonymizationConsent(){this.f.consentRequired&&(this.gt.set(ns.WITHDRAWN),this.S.emitReplayUnanonymizationConsentWithdrawn())}removeAllConsents(){this.gt.remove()}isReplayUnanonymizedAllowedByConsent(){return!this.f.consentRequired||this.gt.get()===ns.GRANTED}getRequestParameters(){return{uc:`${this.gt.get()}`}}}return s})(),jE=(()=>{class s{constructor(t,e,i,n,a,c,l){this.S=t,this.E=e,this.Yh=i,this.Xh=n,this.ii=a,this.o0=c,this.Qn=l}start(){this.S.addListener(this.o0),this.S.addListener(this.Qn),this.S.addListener(this.Yh),this.Qn.init(),this.Xh.init(),this.ii.init(),!this.ii.isActive()&&this.E.start()}}return s})(),HE=(()=>{class s{constructor(t,e){this.Nt=t,this.gt=e}exclude(t){this.gt.set(csString(t.lastTrackingDraw))}removeExclusion(){this.gt.remove()}isExcluded(){return this.a0()||this.c0()}a0(){return this.getAppliedTrackingDraw()!==0}getAppliedTrackingDraw(){return this.gt.get()}c0(){return csString.prototype.indexOf.call(this.Nt.href,ye)>0}}return s})(),BE=(()=>{class s{constructor(t){this.Di=t}onOptout(){this.Di.removeExclusion()}}return s})(),jr=(()=>{let s;return function(r){r.SessionReplay="SR",r.None=""}(s||(s={})),s})(),FE=".^",$E=".*",zE=(()=>{class s{constructor(t){this.w=t,this.ru=new csRegExp(`${FE}`)}setExcludeUrlForSessionReplay(t){try{this.ru=new csRegExp(t)}catch{j.warn(`excludeURLforReplay - invalid regex '${t}'`),this.ru=new csRegExp(`${$E}`)}}em(){return this.ru.test(this.w.getAnonymizedUrl())?jr.SessionReplay:jr.None}isUrlExcludedForSessionReplay(){return this.em()===jr.SessionReplay}getRequestParameters(){return{ex:this.em()}}}return s})(),GE=["excludeURLforReplay"],qE=(()=>{class s{constructor(t,e){this.Di=t,this.E=e}init(){this.E.register(GE,t=>{if($(t))this.Di.setExcludeUrlForSessionReplay(t);else throw new Error("Command misuse: excludeURLforReplay")})}}return s})(),Hr="_cs_inc",WE=(()=>{class s{constructor(t,e){this.Nt=t,this.M=e}isForceIncluded(){return this.l0()||this.h0()}isForceReplayRecorded(){return this.u0(V.RECORDING_GLOBAL_SAMPLING)}l0(){return this.M.get(Hr)!==null}u0(t){return this.M.get(Hr)===t}h0(){return csString.prototype.indexOf.call(this.Nt.href,Hr)>0}}return s})(),Xs="_cs_optout",YE=(()=>{class s{constructor(t,e,i){this.f=t,this.M=e,this.At=i}get(){return this.f.cookielessTrackingEnabled?this.At.getItem(Xs):this.M.get(Xs)}set(t){this.f.cookielessTrackingEnabled?this.At.setItem(Xs,t):this.M.set(Xs,t,En)}}return s})(),Aa="1",XE=(()=>{class s{constructor(t,e,i){this.S=t,this.Nt=e,this.gt=i}init(){!this.isActive()&&this.d0()&&this.activate()}isActive(){return this.gt.get()===Aa}activate(){this.S.emitOptout(),this.gt.set(Aa)}d0(){return csString.prototype.indexOf.call(this.Nt.href,Xs)>0}}return s})(),KE=["optout"];var JE=(()=>{class s{constructor(t,e){this.E=t,this.ii=e}init(){this.E.register(KE,()=>{this.ii.activate()})}}return s})();var QE=(()=>{class s{constructor(t,e){this.E=t,this.ut=e}init(){this.ut.addListener(this.E)}onOptout(){this.E.stop()}onBeforeSessionRenewal(){this.E.stop()}}return s})();var ZE=(()=>{let s;return function(r){r.UXA="_uxa",r.WVT="cs_wvt"}(s||(s={})),s})(),tS=(()=>{class s extends Pt{constructor(t){super(),this.nu=t,this.hs={}}register(t,e,i){for(let n of t){let a=(...c)=>{try{let l=e(...c);return q.counters.commandApplied.count(n),l}catch(l){q.counters.commandMisuse.count(n),j.warn(`Misused Command: ${n}; Args: ${csJSON.stringify(c)}; Error: ${Ke(l)?l.stack:l}`)}};this.hs[n]={callback:a,configuration:i},this.hs}}onStart(){this.f0(),this.g0()}onStop(){for(let t of this.nu)window[t]=[]}applyFromIntegration(t,e,i){this.sm(t,e,`Commands.apply.from.integration: ${i}`),q.counters.commandsFromIntegrations.count(t)}applyFromImplementation(t,e,i){this.sm(t,e,`Commands.apply.from.implementation: ${i}`),q.counters.commandsFromCSTC.count(t)}onIframeCommands(t){for(let e of t.commands)this.m0(e.name,e.params,t.iframePath),q.counters.commandsFromIframe.count(e.name)}sm(t,e,i){if(!this.isStarted){window._uxa.push([t,...e]);return}j.tryToExecute(i,()=>{if(this.hs[t])return this.hs[t].callback(...e)})()}m0(t,e,i){j.tryToExecute(`Commands.apply.from.iframe: ${i}`,()=>{if(this.hs[t])return this.hs[t].callback(...e)})()}f0(){for(let t of this.nu)window[t].forEach(([e,...i])=>this.im(e,i,!1))}g0(){for(let t of this.nu)window[t]={push:([e,...i])=>this.im(e,i,!0)}}im(t,e,i){var n,a;if(this.hs[t]){if(((n=this.hs[t].configuration)===null||n===void 0?void 0:n.disableApplyPending)&&!i||((a=this.hs[t].configuration)===null||a===void 0?void 0:a.disableApplyImmediate)&&i)return;try{return this.hs[t].callback(...e)}catch(l){q.counters.commandError.count(t),j.error(`Command ${t} failed - params: ${csJSON.stringify(e)}`,l)}}}}return s})();var Ra=(()=>{class s{constructor(t,e,i,n,a){this.f=t,this.N=e,this.R=i,this.pm=n,this.ai=a}getRequestParameters(){var t;let e={...In(),...this.f.getRequestParameters()},i=this.R.getSession();i&&(e.pn=`${i.pageNumber}`);let n=this.N.getVisitor();if(n&&(e.sn=`${n.visitsCount}`,e.uu=`${n.id}`),!((t=this.pm)===null||t===void 0)&&t.hasSubProjectId()&&(e.subProjectID=`${this.pm.getSubProjectId()}`),this.w0(e),window.heap&&!this.f.isCsCrosswritingHeap())try{e.happid=window.heap.appid,window.heap.getSessionId&&(e.hsid=window.heap.getSessionId()),window.heap.getUserId?e.huu=window.heap.getUserId():window.heap.userId&&(e.huu=window.heap.userId),window.heap.getPageviewMetadata&&(e.hpvid=window.heap.getPageviewMetadata().pageviewId)}catch{delete e.happid,delete e.hsid,delete e.huu,delete e.hpvid}return e}w0(t){if(!this.ai)return;let e=this.ai.getSharedContext();e&&(t.happid=e.happid,t.t=e.pageTitle,t.fvt=csString(e.firstViewTime),t.fvurl=e.firstViewUrl,t.pvurl=e.previousViewUrl,t.url=e.currentViewUrl,t.fpvurl=e.sessionReferrer,t.sw=csString(e.screenWidth),t.sh=csString(e.screenHeight),t.cvt=csString(e.currentViewTime),e.encryptedIdentity&&(t.i=e.encryptedIdentity),e.cvarp&&(t.cvarp=e.cvarp))}}return s})(),eS=(()=>{class s{constructor(t,e){this.E=t,this.ds=e}init(){this.E.register(["debugEvents"],t=>{typeof t=="boolean"&&this.ds.updateDynamicFields("emitDebugEvents",t)})}}return s})();function Ca(s,r,t){if(!J(r)&&!J(t))return s.href;let e=J(r)?Zc(r):s.pathname,i=J(t)?tl(t):s.search;return`${s.protocol}//${s.host}${e}${i}`}function Zc(s){return Tt(s,"/")?s:`/${s}`}function tl(s){return Tt(s,"?")||s===""?s:`?${s}`}var Br=(()=>{let s;return function(r){r[r.page=1]="page",r[r.onNextPageviewOnly=2]="onNextPageviewOnly"}(s||(s={})),s})(),sS=(()=>{class s{constructor(t,e){this.Nt=t,this.et=e,this.b0=10}overridePath(t,e){if(t===""){this.Or=void 0;return}let i=this.fm(e);i&&(this.lu=i),this.Or=e?this.gm(t,e):t}overrideQuery(t,e){let i=this.fm(e);i&&(this.hu=i),this.io=e?this.gm(t,e):t}computeOverriddenUrl(t){return this.T0(t)?this.getAnonymizedUrl():t}A0(t){return(typeof t=="string"||typeof t=="number")&&t in Br}T0(t){let e=this.Io(this.Nt.href);return this.Io(t)===e}Io(t){return Ju(t,"/")?csString.prototype.slice.call(t,0,-1):t}fm(t){return J(t==null?void 0:t.lifespan)&&this.A0(t==null?void 0:t.lifespan)?t==null?void 0:t.lifespan:null}R0(){return this.lu&&this.lu in Br}C0(){return this.hu&&this.hu in Br}cleanupOverrideLifespan(){this.R0()&&(this.Or=void 0,this.lu=void 0),this.C0()&&(this.io=void 0,this.hu=void 0)}getAnonymizedUrl(){let t=Ca(this.Nt,this.Or,this.io);return this.et.anonymizeUrl(t)}getUrl(){return Ca(this.Nt,this.Or,this.io)}getAnonymizedPathAndQuery(){let t=J(this.Or)?Zc(this.Or):this.Nt.pathname,e=J(this.io)?tl(this.io):this.Nt.search;return this.et.anonymizeUrl(t+e)}getUrlProtocol(){return this.Nt.protocol}getRequestParameters(){return{url:this.getAnonymizedUrl()}}gm(t,e){return this.I0(e)?this.P0(t):this.O0(e)?this.N0(t):t}O0(t){return!!t.decodeURI}N0(t){return this.mm(t,1,!1)}I0(t){return!!t.decodeURIDeep}P0(t){return this.mm(t,this.b0,!0)}mm(t,e,i){let n=t;for(let a=0;a<e;a++)try{let c=window.decodeURI(n);if(c===n)return n;n=c}catch{return n}return i&&j.warn(`decodeURIDeep limit reached: ${n}`),n}}return s})(),Gn=(()=>{class s{constructor(){this.listeners=[]}addListener(t){csArray.prototype.push.call(this.listeners,t)}}return s})(),iS=(()=>{class s extends Gn{emitPageEvent(t){for(let e of this.listeners)e.onPageEvent&&e.onPageEvent(t)}emitEventTriggerRecording(t,e){for(let i of this.listeners)i.onEventTriggerRecording&&i.onEventTriggerRecording(t,e)}emitCustomJavaScriptErrorEvent(t){for(let e of this.listeners)e.onCustomJavaScriptErrorEvent&&e.onCustomJavaScriptErrorEvent(t)}emitCustomErrorEvent(t){for(let e of this.listeners)e.onCustomErrorEvent&&e.onCustomErrorEvent(t)}emitUserIdentifierEvent(t){for(let e of this.listeners)e.onUserIdentifierEvent&&e.onUserIdentifierEvent(t)}emitExternalEvent(t){for(let e of this.listeners)e.onExternalEvent&&e.onExternalEvent({type:z.EXTERNAL_EVENT,name:t,ts:0})}emitTargetingRulesArtificialPageview(t){for(let e of this.listeners)e.onTargetingRulesArtificialPageview&&e.onTargetingRulesArtificialPageview(t)}}return s})(),si="|iframe|",rS=(()=>{class s extends Gn{constructor(t,e,i,n){super(),this.M0=t,this.k0=e,this.D0=i,this.x0=n}emitIframeEvent(t,e,i){if(this.L0(e)&&t===null){j.error(`iframeEventEmitter received event ${e} with null iframe, content:${csJSON.stringify(i)}`);return}switch(e){case K.ChildLogMessage:this.V0(i);break;case K.AnalysisEvent:{let n=i,a=this.M0.transformEvent(t,n);a.isUserEvent?this.U0(a.event):this.j0(a.event);break}case K.RecordingEvent:{let n=i,a=this.x0.transformEvents(t,n);if(a.events.length===0)return;a.containsUserEvent?this.H0(a.events):this.B0(a.events);break}case K.JavascriptError:this.F0(i);break;case K.ApiError:this.$0(i);break;case K.DetailedApiError:this.z0(i);break;case K.CustomError:this.G0(i);break;case K.EmerchandisingMessage:{let n=this.D0.transformEvent(t,i);this.q0(n);break}case K.Commands:{let n=this.k0.transformEvent(t,i);this.W0(n);break}case K.IntegrationCallback:this.Y0(i);break;case K.StaticResource:this.X0(i);break;case K.TrackingContextRequestMessage:this.K0(i);break;default:j.error(`Parent received unknown data type from iframe : ${csJSON.stringify(i)}`)}}L0(t){let e=[K.AnalysisEvent,K.RecordingEvent,K.EmerchandisingMessage,K.Commands];return csArray.prototype.indexOf.call(e,t)!==-1}V0(t){let{message:e,errorCode:i,level:n}=t;switch(n){case nt.debug:j.debug(e,i);break;case nt.warn:j.warn(e,!0,i);break;case nt.implementation:j.implementation(e,i);break;case nt.error:j.error(e,i);break;case nt.critical:j.critical(e,i);break}}U0(t){for(let e of this.listeners)e.onIframeAnalysisUserEvent&&e.onIframeAnalysisUserEvent(t)}j0(t){for(let e of this.listeners)e.onIframeAnalysisBrowserEvent&&e.onIframeAnalysisBrowserEvent(t)}H0(t){for(let e of this.listeners)e.onIframeRecordingUserEvent&&e.onIframeRecordingUserEvent(t)}B0(t){for(let e of this.listeners)e.onIframeRecordingBrowserEvent&&e.onIframeRecordingBrowserEvent(t)}F0(t){for(let e of this.listeners)e.onIframeJavascriptError&&e.onIframeJavascriptError(t)}$0(t){for(let e of this.listeners)e.onIframeApiError&&e.onIframeApiError(t)}z0(t){for(let e of this.listeners)e.onIframeDetailedApiError&&e.onIframeDetailedApiError(t)}q0(t){for(let e of this.listeners)e.onIframeEmerchandisingMessage&&e.onIframeEmerchandisingMessage(t)}W0(t){for(let e of this.listeners)e.onIframeCommands&&e.onIframeCommands(t)}Y0(t){for(let e of this.listeners)e.onIframeIntegrationCallback&&e.onIframeIntegrationCallback(t)}X0(t){for(let e of this.listeners)e.onIframeStaticResource&&e.onIframeStaticResource(t)}K0(t){for(let e of this.listeners)e.onTrackingContextRequestCallback&&e.onTrackingContextRequestCallback(t)}G0(t){for(let e of this.listeners)e.onIframeCustomError&&e.onIframeCustomError(t)}}return s})(),nS=(()=>{class s{setItem(t,e){window.localStorage.setItem(t,e)}getItem(t){return window.localStorage.getItem(t)}removeItem(t){window.localStorage.removeItem(t)}}return s})(),el=["setCustomVariable"],oS=(()=>{class s{constructor(t,e){this.E=t,this.vt=e}init(){this.E.register(el,(t,e,i,n)=>{this.vt.set(t,e,i,n)})}onAfterArtificialPageView(){this.vt.deleteNextPageOnlyCustomVariables()}onAfterNaturalPageView(){this.vt.deleteNextPageOnlyCustomVariables()}onOptout(){this.vt.removeCustomVariablesSession()}onBeforeVisitorRenewal(){this.vt.removeCustomVariablesSession(),this.vt.removeCustomVariablesPage()}}return s})(),Ia=512,Pa=255,Fr={SESSION:["visit",2],PAGE:["page",3],NEXT_PAGE_ONLY:["nextPageOnly",4]},aS=(()=>{class s{constructor(t,e){this.O=t,this.gt=e,this.Xt={},this.Fe={}}set(t,e,i,n){let a,c;if((Xt(t)||$(t))&&Number(t)>0&&Mt(e)&&Mt(i)&&!Xe(e)&&!Xe(i)&&this.J0(n)){let l=this.O.anonymizePII(csString(e)),u=this.O.anonymizePII(csString(i));if(a=[csString.prototype.slice.call(l,0,Ia),csString.prototype.slice.call(u,0,Pa)],c=i!=="",!J(n)||csArray.prototype.indexOf.call(Fr.SESSION,n)>=0){let g=this.getCustomVariablesSession();c?g[t]=a:delete g[t],this.setCustomVariableSession(g)}(!J(n)||csArray.prototype.indexOf.call(Fr.PAGE,n)>=0)&&(c?this.Xt[t]=a:delete this.Xt[t]),J(n)&&csArray.prototype.indexOf.call(Fr.NEXT_PAGE_ONLY,n)>=0&&(c?this.Fe[t]=a:delete this.Fe[t])}else throw new Error(`Command misuse: ${el[0]}`)}getCustomVariablesSession(){let t=this.gt.get();if(!t)return{};let e=window.csJSON.parse(t);return e!==null&&Os(e)?e:{}}setCustomVariableSession(t){this.gt.set(window.csJSON.stringify(t))}removeCustomVariablesSession(){this.gt.remove()}removeCustomVariablesPage(){this.Xt={}}getRequestParameters(){let t=this.getCustomVariablesSession();for(let i in this.Fe)this.Fe.hasOwnProperty(i)&&(this.Xt[i]=this.Fe[i]);for(let i in this.Xt)this.Xt.hasOwnProperty(i)&&(t[i]=this.Xt[i]);if(window.csJSON.stringify(t).length<=2)return{};let e={cvars:this.ym(t)};return this.hasCustomVariablesPage()&&(e.cvarp=this.getCustomVariablesPage()),e}deleteNextPageOnlyCustomVariables(){if(Object.keys(this.Fe).length>0)for(let t in this.Fe)this.Fe[t]===this.Xt[t]&&(delete this.Xt[t],delete this.Fe[t])}hasCustomVariablesPage(){return this.Xt&&!zr(this.Xt)}getCustomVariablesPage(){return this.ym(this.Xt)}Em(t){for(let e in t)if(t.hasOwnProperty(e)){let i=parseInt(e,10),n=t[e],a=n[0],c=n[1];(!Ih(i,1,20)||a.length>Ia||c.length>Pa)&&delete t[e]}}ym(t){this.Em(t);let e=zr(t)?[]:t;return window.csJSON.stringify(e)}J0(t){return!J(t)||$(t)||Xt(t)}getAllValidCustomVars(){let t=this.getCustomVariablesSession();for(let e in this.Fe)this.Fe.hasOwnProperty(e)&&(this.Xt[e]=this.Fe[e]);for(let e in this.Xt)this.Xt.hasOwnProperty(e)&&(t[e]=this.Xt[e]);return this.Em(t),t}}return s})(),ie="_cs_id",cS=(()=>{class s{constructor(t,e,i){this.f=t,this.M=e,this.J=i}onCookieToSet(t){this.yi=t}onCookieToRemove(t){this.Ei=t}get(){let t;return this.f.cookielessTrackingEnabled?t=this.J.getItem(ie):t=this.M.get(ie),t?(Ud(t)||j.warn(`Invalid visitor string: ${t}`),Ld(t)):null}set(t){var e;let i=Vd(t);if(this.f.cookielessTrackingEnabled)this.J.setItem(ie,i);else{let n=new csDate(t.expires);this.M.set(ie,i,n),(e=this.yi)===null||e===void 0||e.call(this,ie,i,n)}}remove(){var t;this.f.cookielessTrackingEnabled?this.J.removeItem(ie):(this.M.delete(ie),(t=this.Ei)===null||t===void 0||t.call(this,ie))}handleSubdomainChange(){if(this.f.cookielessTrackingEnabled)return;let t=this.get();t&&(t.allowSubdomains=this.f.allowSubdomains,this.f.allowSubdomains?this.M.delete(ie,rr.CURRENT_DOMAIN):this.M.delete(ie,this.M.getRootDomain()),this.set(t))}}return s})(),lS=["class","data-com.agilebits.onepassword.initial-value","data-com.onepassword.iv","data-ember-action","data-initial-value","data-previous-value","data-react-checksum","data-reactid","id","maxlength","onclick","onsubmit","style"],hS=1024,uS=1024,dS=(()=>{class s{constructor(t,e){this.mt=t,this.f=e}getEventTargetPathAndHierarchy(t,e){let i=mt(t),n={isNodeSensitive(a){return N.isMaskedElement(a)||N.isMaskedElementChild(a)},isAttributeSensitive(a,c){return N.isMaskedAttribute(a,c)},allWhitelistedAttributes:Ka(this.f.whitelistedAttributes),attributeIgnoreTokens:lS,useAnonymization:e,attrMaxLength:uS,hierarchyMaxLength:hS};return this.mt.getElementPathAndHierarchy(i,n,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}getEventTargetPath(t){let e=mt(t);return this.mt.getElementPath(e,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}getEventTargetPathAndTargetLink(t){let e=mt(t),{path:i,firstAnchorParent:n}=this.mt.getElementPathAndFirstAnchorParent(e,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules}),a=this.Q0(n)?n.href:"";return{path:i,targetLink:a}}hasValidEventTarget(t){let e=mt(t);return this.mt.isValidElement(e)}getElementPath(t){return this.mt.getElementPath(t,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}Q0(t){var e;return t!==null&&t.hasAttribute("href")&&!Ji((e=t.getAttribute("href"))!==null&&e!==void 0?e:"","#")}}return s})(),pS=(()=>{class s{constructor(t,e){this.Z=t,this.Z0=e}transformEvent(t,e){this.tR(t,e.event);let i=this.Z.getElementPath(t);return this.eR(i,e.event),e}tR(t,e){if(mf(e)){let i=t.getBoundingClientRect();e.x=Math.round(i.left+e.x+gt.windowOffsetX()),e.y=Math.round(i.top+e.y+gt.windowOffsetY())}}eR(t,e){wc(e)&&(e.tgt=`${t}${si}${e.tgt}`),ff(e)&&(e.tgtHM=`${t}${si}${e.tgtHM}`,this.Z0||(e.tgtHMH=Nc(e.tgtHM))),gf(e)&&(e.tgtLk=`${t}${si}${e.tgtLk}`)}}return s})(),fS=(()=>{class s{constructor(t){this.Z=t}transformEvent(t,e){let i=this.Z.getElementPath(t);return{iframePath:e.iframePath?`${i}${si}${e.iframePath}`:i,commands:e.commands}}}return s})(),gS=(()=>{class s{constructor(t){this.Z=t}transformEvent(t,e){if(e.products.length===0)return e;let i=this.Z.getElementPath(t),n=csArray.prototype.map.call(e.products,a=>({...a,targetPath:`${i}${si}${a.targetPath}`}));return{...e,products:n}}}return s})(),mS=(()=>{class s{constructor(){this.sR={clientX:2,clientY:3},this.iR={clientX:1,clientY:2},this.rR=[M.POINTER_DOWN,M.POINTER_MOVE,M.POINTER_UP],this.nR=[M.TOUCH_START,M.TOUCH_MOVE,M.TOUCH_END]}transformEvents(t,e){if(!dt.isConnected(t))return e.events=csArray.prototype.filter.call(e.events,c=>c.type!==M.VISIBILITY_CHANGE),e.events.length===0||(j.warn(`IframeRecordingEventsTransformer received event ${K.RecordingEvent}
        from disconnected iframe, content:${csJSON.stringify(e.events)}`),e.events=[]),e;let i=st(t),n=null;csArray.prototype.some.call(e.events,c=>this.Sm(c)||this.vm(c))&&(n=t.getBoundingClientRect());for(let c of e.events)this.Sm(c)?this.oR(n,c):this.vm(c)&&this.aR(n,c),c.context=c.context&&c.context.length>0?`${i}/${c.context}`:`${i}`;return e}aR(t,e){this._m(this.iR,t,e)}oR(t,e){this._m(this.sR,t,e)}_m(t,e,i){i.args&&(i.args[t.clientX]=Math.round(e.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(e.top+i.args[t.clientY]))}Sm(t){return csArray.prototype.indexOf.call(this.rR,t.type)!==-1}vm(t){return csArray.prototype.indexOf.call(this.nR,t.type)!==-1}}return s})(),yS=(()=>{class s{constructor(t){this.du=t}start(){this.du.onEvent(t=>this.Q(t)),this.du.start()}stop(){this.du.stop()}Q(t){let e=`Content Security Policy error. Violated directive: ${t.violatedDirective} - Source file: ${t.sourceFile}`;j.warn(e)}}return s})(),ES=(()=>{class s{constructor(){this.zt={boundElement:document,type:"securitypolicyviolation",listener:t=>this.securityPolicyViolationListener(t)},csArray.prototype.push.call(s.pu,"localhost"),csArray.prototype.push.call(s.pu,"fake-tracker.content-square.fr")}start(){Ct(this.zt)}stop(){It(this.zt)}onEvent(t){this.L=t}cR(t){if(!t)return!1;let e=t.disposition;return $(t.sourceFile)&&csArray.prototype.some.call(s.pu,i=>csString.prototype.indexOf.call(t.sourceFile,i)>0)&&e!=="report"}securityPolicyViolationListener(t){this.cR(t)&&this.L({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})}}return s.pu=["contentsquare","cdnssl.clicktale.net"],H([x("Event handler type: securitypolicyviolation")],s.prototype,"securityPolicyViolationListener",null),s})(),SS=(()=>{class s{init(){this.wm=new yS(new ES),this.wm.start()}onOptout(){this.wm.stop()}}return s})();var{toString:tv}=Object.prototype;function sl(s,r){if(typeof s!="function"||r!=null&&typeof r!="function")throw new TypeError("Expected a function");let t=function(...e){let i=r?r.apply(this,e):e[0],{cache:n}=t;if(n.has(i))return n.get(i);let a=s.apply(this,e);return t.cache=n.set(i,a)||n,a};return t.cache=new(sl.Cache||Map),t}sl.Cache=Map;var{hasOwnProperty:ev}=Object.prototype;var il=(()=>{class s{constructor(t){this.configuration=t}}return s})(),vS=(()=>{class s extends il{constructor(t,e,i){super(t),this.configuration=t,this.co=e,this.S=i,this.NR=V.RECORDING_GLOBAL_SAMPLING}refreshQuota(t){this.Dm=t,this.lo=void 0,this.MR()}init(t){this.kR();let e=ut.get(Jt);e!==null&&Mn(e)?t(this.canCollect(zd(e))):this.refreshQuota(i=>{t(i!==V.QUOTA_REACHED)})}sanitizeSessionCollectState(t){return t}canCollect(t){return t!==null&&t.collectState!==V.QUOTA_REACHED}computeInitialCollectState(t){return this.lo?(this.S.emitCollectStateChange(this.lo,this.configuration.malkaEtrEnabled?Ht.ETR_ON:Ht.ETR_OFF),this.lo):(j.warn("Quota file error computeInitialCollectState() called before quota answered"),V.QUOTA_REACHED)}getEligibleCollectState(t){return t.collectState===V.QUOTA_REACHED?V.QUOTA_REACHED:!li.isRecordingSupported()&&this.isReplayRecorded(t)?V.ANALYTICS_ONLY:t.collectState===V.RECORDING_RULES_TARGETING?V.RECORDING_RULES_TARGETING:t.collectState===V.ANALYTICS_ONLY_RULES_TARGETING?V.ANALYTICS_ONLY_RULES_TARGETING:t.collectState===V.RECORDING_GLOBAL_SAMPLING?V.RECORDING_GLOBAL_SAMPLING:V.ANALYTICS_ONLY}isReplayRecorded(t){return t.collectState===V.RECORDING_GLOBAL_SAMPLING||t.collectState===V.RECORDING_RULES_TARGETING}getInitialCollectState(){return this.lo||V.QUOTA_REACHED}computeInitialCollectStateFromRecordingConsentGranted(t){return V.ANALYTICS_ONLY}ho(t){this.lo=t,this.Dm&&this.Dm(t)}kR(){this.co.onError(t=>this.quotaServiceErrorHandler(`HTTP:${t.status} - fetching quota file for pid: ${this.configuration.projectId}`)),this.co.onTimeout(()=>this.quotaServiceErrorHandler("timeout")),this.co.onLoad(t=>this.quotaFileHandler(t))}MR(){this.co.isInProgress()||this.co.send()}quotaFileHandler(t){var e;if(!(!((e=t==null?void 0:t.quotas)===null||e===void 0)&&e.length)){this.quotaServiceErrorHandler("Quota types missing from config file");return}this.DR(t)}quotaServiceErrorHandler(t){let e=`Quota error - ${t}`;j.warn(e),this.ho(this.NR)}DR(t){let e=!1,i=!1;for(let n of t.quotas)n.quotaType==="ANALYTICS"&&n.value?e=!0:n.quotaType==="RECORDING"&&n.value&&hs.boolean(Math.round(n.value*100))&&(i=!0);!e&&i?this.quotaServiceErrorHandler(`Quota types impossible: replay without analytics - ${csJSON.stringify(t)}`):e&&i?li.isRecordingSupported()?this.ho(V.RECORDING_GLOBAL_SAMPLING):this.ho(V.ANALYTICS_ONLY):e&&!i?this.ho(V.ANALYTICS_ONLY):this.ho(V.QUOTA_REACHED)}getRecordingConsentWithdrawn(){return V.ANALYTICS_ONLY}}return H([x("Quota File: quotaFileHandler")],s.prototype,"quotaFileHandler",null),H([x("Quota File: onerror")],s.prototype,"quotaServiceErrorHandler",null),s})(),_S=(()=>{class s extends il{constructor(t,e,i,n,a){super(t),this.configuration=t,this.S=e,this.Qh=i,this.w=n,this.wu=a,this.bu=!1}refreshQuota(){}canCollect(t){return!0}init(){this.configuration.malkaUrlEnabled&&this.configuration.hasRecordingUrlRules()&&(this.bu=!0,this.wu.setRegexRules(this.configuration.recordingUrlRules))}sanitizeSessionCollectState(t){return(t.collectState===V.QUOTA_REACHED||t.collectState===V.RECORDING_RULES_TARGETING||t.collectState===V.RECORDING_TEMPORARILY)&&(t.collectState=V.ANALYTICS_ONLY),t}computeInitialCollectState(){return qe.isReplayConsentNeeded(this.configuration)?V.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.Ba()}computeInitialCollectStateFromRecordingConsentGranted(){return this.Ba()}Ba(){if(!li.isRecordingSupported())return V.ANALYTICS_ONLY;let t=V.ANALYTICS_ONLY,e=Ht.ETR_OFF;return hs.percentage()<this.configuration.replayRecordingRate||this.Qh.isForceReplayRecorded()?t=V.RECORDING_GLOBAL_SAMPLING:this.bu&&this.wu.evaluateUrl(this.w.getAnonymizedUrl())&&(t=V.RECORDING_URL_SAMPLING),this.configuration.malkaEtrEnabled&&(e=Ht.ETR_ON),this.S.emitCollectStateChange(t,e),t}getEligibleCollectState(t){if(!li.isRecordingSupported())return V.ANALYTICS_ONLY;if(qe.isRecordingBlockedByConsent(t))return t.collectState===V.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?V.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN:V.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED;if(t.collectState===V.RECORDING_GLOBAL_SAMPLING)return V.RECORDING_GLOBAL_SAMPLING;let e=this.configuration.malkaEtrEnabled?Ht.ETR_ON:Ht.ETR_OFF;return this.bu&&this.wu.evaluateUrl(this.w.getAnonymizedUrl())?(this.S.emitCollectStateChange(V.RECORDING_URL_SAMPLING,e),V.RECORDING_URL_SAMPLING):(this.S.emitCollectStateChange(V.ANALYTICS_ONLY,e),V.ANALYTICS_ONLY)}isReplayRecorded(t){return qe.isRecordingBlockedByConsent(t)?!1:t.collectState===V.RECORDING_TEMPORARILY||t.collectState===V.RECORDING_GLOBAL_SAMPLING||t.collectState===V.RECORDING_URL_SAMPLING||this.configuration.malkaEtrEnabled}getInitialCollectState(){return V.ANALYTICS_ONLY}getRecordingConsentWithdrawn(){return V.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}}return s})();function wS(){let s="[data-cs-mask]",r="#c1_card_info_id",t=".ctHidden",e=["[data-heap-redact-text]","[heap-ignore]","[data-heap-ignore]","[data-heap-redact-attributes]"],i=["[data-hj-suppress]",".data-hj-suppress","[data-hj-masked]"];return[s,r,t,...e,...i]}function bS(){return[{selector:".ctHidden,input:not([type=button]):not([type=submit])",attrName:"value"}]}var TS=(()=>{class s{constructor(){this.xR={PIISelectors:["picture","img","video","audio"],Attributes:[]},this.ms={elementSelector:"",attrSelector:"",attrSelectors:[]};let t={PIISelectors:wS(),Attributes:bS()};this.ms=N.getComputedSelectorSettings(t,this.ms)}init(){this.LR()}setMaskedElementSettingsFromCommand(t){if(t=N.sanitizeSelectorUserInput(t),!N.isSelectorUserInput(t))throw new Error(`Command misuse: ${Kc[0]}`);this.Tu(t)}setMaskedElementSettingsFromParent(t){let e={PIISelectors:csString.prototype.split.call(t.elementSelector,","),Attributes:t.attrSelectors};this.Tu(e)}getMaskedElementSettings(t){return t?this.xm(this.xR):this.ms}LR(){var t,e,i,n,a,c;let l={PIISelectors:[],Attributes:[]};((i=(e=(t=window==null?void 0:window.ClickTaleSettings)===null||t===void 0?void 0:t.DOM)===null||e===void 0?void 0:e.PII)===null||i===void 0?void 0:i.Text)instanceof Array&&l.PIISelectors.push(...window.ClickTaleSettings.DOM.PII.Text),((c=(a=(n=window==null?void 0:window.ClickTaleSettings)===null||n===void 0?void 0:n.DOM)===null||a===void 0?void 0:a.PII)===null||c===void 0?void 0:c.Attributes)instanceof Array&&window.ClickTaleSettings.DOM.PII.Attributes.forEach(u=>{$(u.attr)&&$(u.rule)&&l.Attributes.push({selector:u.rule,attrName:u.attr})}),this.Tu(l)}Tu(t){this.ms=this.xm(t)}xm(t){return N.getComputedSelectorSettings(t,this.ms)}}return s})();var AS=(()=>{class s{constructor(t,e){this.et=t,this.ft=e,this.Au=!1}getRequestParameters(){return{dr:this.get()}}addUrlMaskingPattern(t){this.ft.addUrlMaskingPattern(t)}enableRemoveQueryString(){this.Au=!0}disableRemoveQueryString(){this.Au=!1}get(){let t=this.Au?this.et.removeQueryString(this.Lm()):this.Lm();return this.et.anonymizeUrl(t,{maskingPatterns:this.ft.getUrlMaskingPatterns()})}Lm(){let t="";try{t=window.top.document.referrer}catch{if(window.parent)try{t=window.parent.document.referrer}catch{t=""}}return t===""&&(t=document.referrer),typeof t!="string"&&(t=""),t}}return s})(),RS=60*1e3,CS=30*1e3,IS=(()=>{class s{constructor(t,e){this.R=t,this.N=e,this.Ru=!1,this.VR=cr(()=>this.R.refreshSession(),CS)}onSessionExpired(t){this.UR=t}isSessionValid(){return this.Ru?!0:!(!this.R.hasValidSession()||this.R.pollCacheRefreshEvent()&&this.N.isSessionRenewed())}isCurrentPageviewValid(){let t=this.R.hasValidSession();return this.R.pollCacheRefreshEvent(!1)?!this.N.isSessionRenewed():t}refreshSession(){this.isSessionValid()?this.VR():this.jR()&&(this.Vm=C.now(),this.renewSession())}renewSession(){this.Ru=!0,this.UR(),this.Ru=!1}jR(){return!J(this.Vm)||C.now()-this.Vm>RS}}return s})();var PS=/\b((?:profile|user|last|first|primary|primary(?:[/_+-]|%20)?last)(?:[/_+-]|%20)?(?:name)[/=])[^#;?&/]+/gi,OS="$1CS_ANONYMIZED_NAME",NS=(()=>{class s{constructor(t){this.O=t}anonymizeUrl(t,e={}){let i=e.maskingPatterns||[],n=e.partialMaskingPatterns||[],a=this.O.anonymizePII(t);if(a=this.O.anonymizeJwt(a),e.maskNames){let u=a;a=this.En(a),a!==u&&(q.counters.redactedPII.count("name"),q.counters.redactedPII.count("name-in-url"))}let c=this.JR(a,i);if(c!==a)return q.counters.redactedPII.count("url"),c;let l=this.QR(a,n);return l!==a&&q.counters.redactedPII.count("url"),l}removeQueryString(t){let{path:e,queryString:i}=this.Du(t);return i!==""?`${e}?`:e}Du(t){let e=csString.prototype.indexOf.call(t,"?"),i,n="";return e!==-1?(i=csString.prototype.slice.call(t,0,e),n=csString.prototype.slice.call(t,e,t.length)):i=t,{path:i,queryString:n}}JR(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.Du(t),a=csString.prototype.split.call(i,"/");for(let c of e){let l=this.ZR(a,c);if(l!==null)return`${l}${n}`}return t}ZR(t,e){if(t.length<e.length)return null;let i=[];for(let n=0;n<t.length;n++){let a=t[n];if(n>=e.length){csArray.prototype.push.call(i,a);continue}let c=e[n].key;if(this.zm(c)){let l=e[n].value;csArray.prototype.push.call(i,l);continue}if(a===c){csArray.prototype.push.call(i,a);continue}return null}return csArray.prototype.join.call(i,"/")}QR(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.Du(t),a=csString.prototype.split.call(i,"/");for(let c of e)a=this.tC(a,c);return`${csArray.prototype.join.call(a,"/")}${n}`}tC(t,e){let i=[],n=0,c=t[0]==="http:"||t[0]==="https:"?2:0;for(let l=0;l<t.length;l++){let u=t[l],g=e[n].key;if(this.zm(g)&&l>=c){let d=e[n].value;csArray.prototype.push.call(i,u.length>0?d:""),n++,n===e.length&&(n=0);continue}if(u===g){csArray.prototype.push.call(i,u),n++,n===e.length&&(n=0);continue}for(let d=0;d<n;d++){let E=l-n+d;i[E]=t[E]}n=0,csArray.prototype.push.call(i,u)}for(let l=0;l<n;l++){let u=t.length-n+l;i[u]=t[u]}return i}zm(t){return Tt(t,Jc)}En(t){return csString.prototype.replace.call(t,PS,OS)}}return s})(),MS=(()=>{class s{constructor(t,e,i,n,a,c){this.f=t,this.gi=e,this.fs=i,this.I=n,this.S=a,this.J=c}initWithQuota(){if(!this.f.collectionEnabled){this.Gm();return}let t=new Fp(this.f.getSettingsFileUri(),"",{type:"json",cacheMinutes:15});this._t=new vS(this.f,t,this.S),this._t.init(e=>{e?this.init():this.Gm()})}eC(){this.I.schedule(()=>{this.O=new mi,this.et=new NS(this.O),this.w=new sS(window.location,this.et),this.M=new rr(this.f,this.w,this.gi),this.M.init(),this.At=new nS,this.E=new tS([ZE.UXA]),this.K=new iS,this.lt=new TS,this.bt=new UE(this.f,new NE(this.f,this.M,this.At),this.S)})}Gm(){}init(){Qs.isSupported()&&Qs.setDigestSalt(this.f.projectId.toString());let t,e,i,n,a,c,l,u,g,d,E,y,v,I,P,S,_,D,O,T,L,Z,rt,Et,St,b,k;this.eC(),this.I.schedule(()=>{E=new WE(window.location,this.M),new SS().init(),y=Xc.create(j.warn),d=new nc(y),this._t===void 0&&(this._t=new _S(this.f,this.S,E,this.w,new dc),this._t.init())}),this.I.schedule(()=>{t=new AE(this.f,this.M,this.J),e=new IE(t,this._t,this.S,this.f.replayConsentRequiredForSession,this.f.malkaEtrEnabled),i=new cS(this.f,this.M,this.J),n=new bE(this.f,i,this.S,e),this.fs.setContext(n,e)}),this.I.schedule(()=>{c=new OE(n,e,this.bt),l=new qd(this.f,this.M,this.J),u=new HE(window.location,l),g=new BE(u),P=new PE(this.f,n,u),St=new dS(_e,this.f),T=new pS(St,this.f.isChild),L=new fS(St),Z=new gS(St),rt=new mS,Et=new rS(T,L,Z,rt),S=new QE(this.E,Et),_=new zE(this.w),D=new qE(_,this.E);let U=new Wd(this.f,this.M,this.J);b=new aS(this.O,U),O=new oS(this.E,b);let B=new Dd(n,e,u,b,this.f)}),this.I.schedule(()=>{new wE(this.f,n,u,P,c,v,a,E).compute(B=>{this.I.schedule(()=>{S.init();let ot=new VE(this.f,this.E,this.bt,e,this.S),Ot=new YE(this.f,this.M,this.At),Vt=new XE(this.S,window.location,Ot),Te=new JE(this.E,Vt),ms=new eS(this.E,this.f),Ut=new AS(this.et,new Qc),Ft=new IS(e,n),de,_i,Qe,At=new Ra(this.f,n,e,I),$t=new Ra(this.f,n,e,I,_i);B?(this.S.emitInitTracking(),new _E(At,$t,y,n,e,Ft,Ut,this.S,this.E,S,this.f,Te,Vt,ot,this.bt,this.O,St,this.et,this.w,ms,this.K,Et,b,O,_,D,this.I,d,this.M,this.At,this._t,this.lt,Qe,de).start()):new jE(this.S,this.E,S,Te,Vt,g,ot).start()})})})}}return s})(),as=(()=>{let s;return function(r){let t="{domain}/tag/tag.bundle.js?v={version}",e,i={loadBundle(_){let D=_.source,O=_.data;if(c(O)){let T=()=>{let L=n(t,O);E(L,()=>D.postMessage("csBundleLoaded",_.origin))};e=O.token,S(i.loadBundle),l(_.origin)&&T()}}};function n(_,D){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(_,"{version}",D.version),"{token}",D.token),"{domain}",D.domain)}function a(){return e}r.getToken=a;function c(_){return _&&_.type==="csBundleInjection"&&l(_.domain)&&g(_.version)&&u(_.token)}r.isAuthorizedIncomingMessage=c,r.hjDomainRegex=/^https?:\/\/[a-zA-Z0-9\.\-]+\.hotjar\.com$/;function l(_){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(_)||r.hjDomainRegex.test(_)}r.isAuthorizedDomain=l;function u(_){return/^[a-zA-Z0-9]+$/.test(_)}r.isAuthorizedToken=u;function g(_){return/^[a-zA-Z0-9\.]+$/.test(_)}r.isAuthorizedTagVersion=g;function d(){let _=window.opener||window.parent;return window!==_&&window.addEventListener}r.isActivable=d;function E(_,D){let O=document.createElement("script");O.type="text/javascript",O.async=!0,O.src=_,O.onload=D,O.charset="utf-8",document.head.appendChild(O)}r.addScript=E;function y(_){let D=document.createElement("link");D.rel="stylesheet",D.href=_,document.head.appendChild(D)}r.addStyle=y;function v(_){return`${_}?cb=${new csDate().getTime()}`}r.addCacheBusting=v;function I(){P(i.loadBundle)}r.waitForBundleInjection=I;function P(_){window.addEventListener("message",_,!1)}r.listen=P;function S(_){window.removeEventListener("message",_,!1)}r.removeListener=S}(s||(s={})),s})(),Oa="_hp_ved",kS=18e5,DS="/js/ved.js",xS="/css/ved.css",LS="/js/ved.css",VS=(()=>{let s;return function(r){r.StatusUpdate="status"}(s||(s={})),s})(),US=(()=>{let s;return function(r){r.ReceivedInitMessage="received_init_message"}(s||(s={})),s})();var $r=(()=>{let s;return function(r){let t=!1,e;function i(E){return e+E}function n(){let E=[i(xS),i(LS)];csArray.prototype.forEach.call(E,y=>{as.addStyle(y)})}function a(E){let y=new csRegExp("(^|;)[ ]*"+E+"=([^;]*)"),v=y.exec(document.cookie);return v?decodeURIComponent(v[2]):null}function c(E,y,v){let I=encodeURIComponent(E)+"="+encodeURIComponent(y),P=new csDate;P.setTime(P.getTime()+v);let S=I+"; expires="+P.toUTCString()+"; path=/";document.cookie=S}function l(){c(Oa,"on",kS)}function u(){return a(Oa)==="on"}r.isVLCookieEnabled=u;function g(E){window.heapV=Object.assign({},window.heap,{source:E==null?void 0:E.source,uri:e,loadArgs:E==null?void 0:E.data.args,identify:()=>{},track:()=>{}})}r.initializeHeapV=g;function d(E,y){var v;if(e=E,y){let I={type:VS.StatusUpdate,value:US.ReceivedInitMessage},P={targetOrigin:y==null?void 0:y.origin};(v=y==null?void 0:y.source)===null||v===void 0||v.postMessage(I,P)}t||(t=!0,l(),g(y),window.heapV&&(as.addScript(i(DS)),n()))}r.init=d}(s||(s={})),s})(),jS=(()=>{let s;return function(r){let t=window.opener||window.parent,e="tag",i="https://app.contentsquare.com",n=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/,as.hjDomainRegex],a,c,l,u={initHeapVisualLabeler(T){var L;T.origin===l&&((L=T.data)===null||L===void 0?void 0:L.message)==="init"&&T.source&&($r.init(l,T),_(u.initHeapVisualLabeler))},ping(T){typeof T.data=="string"&&T.data==="ping"&&E(T.origin)&&(c=T.origin,a=as.hjDomainRegex.test(T.origin)?i:T.origin,_(u.ping),S(u.insertMessageScript),y(as.addCacheBusting("utils.js")))},insertMessageScript:D(T=>{typeof T.data=="string"&&T.data!=="ping"&&(_(u.insertMessageScript),y(T.data))})};function g(){return as.getToken()}r.getToken=g;function d(){return window!==t&&window.addEventListener}r.isActivable=d;function E(T){return csArray.prototype.some.call(n,L=>L.test(T))}r.isAuthorizedDomain=E;function y(T,L){let Z=document.createElement("script");Z.type="text/javascript",Z.async=!0;let rt=a==null?void 0:csString.prototype.replace.call(a,/^https?:/,"");Z.src=`${rt}/${e}/${T}`,Z.onload=L,Z.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(Z),v(T)}function v(T){csString.prototype.includes.call(T,"&mode=")&&sessionStorage.setItem("_hjRetakerMode",csString.prototype.split.call(T,"&mode=")[1])}function I(){S(u.ping),as.waitForBundleInjection()}r.waitForConnection=I;function P(T){l=T,S(u.initHeapVisualLabeler),$r.isVLCookieEnabled()&&$r.init(l)}r.waitForHeapVisualLabeler=P;function S(T){window.addEventListener("message",T,!1)}r.listen=S;function _(T){window.removeEventListener("message",T,!1)}r.removeListener=_;function D(T){return function(L){L.origin===c&&T(L)}}r.secureListener=D;function O(T){c&&t.postMessage(T,c)}r.post=O}(s||(s={})),s})();var ji=window.CSFrameCommunication||jS;var HS=(()=>{class s extends Gn{constructor(t){super(),this.I=t}emitBeforeNaturalPageView(t){for(let e of this.listeners)e.onBeforeNaturalPageView&&e.onBeforeNaturalPageView(t)}emitAfterNaturalPageView(){for(let t of this.listeners)t.onAfterNaturalPageView&&t.onAfterNaturalPageView()}emitInitTracking(){for(let t of this.listeners)t.onInitTracking&&t.onInitTracking()}emitStartTracking(t){for(let e of this.listeners)e.onStartTracking&&this.I.schedule(()=>e.onStartTracking(t))}emitStartNoTrackingMode(){for(let t of this.listeners)t.onStartNoTrackingMode&&this.I.schedule(()=>t.onStartNoTrackingMode())}emitArtificialPageViewEnd(){for(let t of this.listeners)if(t.onArtificialPageViewEnd)try{t.onArtificialPageViewEnd()}catch(e){j.error(e)}}emitBeforeArtificialPageView(t,e){for(let i of this.listeners)i.onBeforeArtificialPageView&&i.onBeforeArtificialPageView(t,e)}emitAfterArtificialPageView(){for(let t of this.listeners)t.onAfterArtificialPageView&&t.onAfterArtificialPageView()}emitBeforeSessionRenewal(){for(let t of this.listeners)t.onBeforeSessionRenewal&&t.onBeforeSessionRenewal()}emitAfterSessionRenewal(){for(let t of this.listeners)t.onAfterSessionRenewal&&t.onAfterSessionRenewal()}emitOptout(){for(let t of this.listeners)t.onOptout&&t.onOptout()}emitReplayUnanonymizationConsentGranted(){for(let t of this.listeners)t.onReplayUnanonymizationConsentGranted&&t.onReplayUnanonymizationConsentGranted()}emitReplayUnanonymizationConsentWithdrawn(){for(let t of this.listeners)t.onReplayUnanonymizationConsentWithdrawn&&t.onReplayUnanonymizationConsentWithdrawn()}emitAfterReplayRecordingConsentGranted(){for(let t of this.listeners)t.onAfterReplayRecordingConsentGranted&&t.onAfterReplayRecordingConsentGranted()}emitAfterReplayRecordingConsentWithdrawn(){for(let t of this.listeners)t.onAfterReplayRecordingConsentWithdrawn&&t.onAfterReplayRecordingConsentWithdrawn()}emitCollectStateChange(t,e){for(let i of this.listeners)i.onCollectStateChange&&i.onCollectStateChange(t,e)}emitInitialDomStart(){for(let t of this.listeners)t.onInitialDomStart&&t.onInitialDomStart()}emitInitialDomDone(t){for(let e of this.listeners)e.onInitialDomDone&&e.onInitialDomDone(t)}emitRecordingContextChange(){for(let t of this.listeners)t.onRecordingContextChange&&t.onRecordingContextChange()}emitSensitiveStatusChange(){var t;for(let e of this.listeners)(t=e.onSensitiveStatusChange)===null||t===void 0||t.call(e)}emitBeforeVisitorRenewal(){for(let t of this.listeners)t.onBeforeVisitorRenewal&&t.onBeforeVisitorRenewal()}emitAfterVisitorCleared(){for(let t of this.listeners)t.onAfterVisitorCleared&&t.onAfterVisitorCleared()}emitAfterVisitorRenewal(){for(let t of this.listeners)t.onAfterVisitorRenewal&&t.onAfterVisitorRenewal()}emitSessionCreated(){for(let t of this.listeners)t.onSessionCreated&&t.onSessionCreated()}emitSessionRemoved(){for(let t of this.listeners)t.onSessionRemoved&&t.onSessionRemoved()}emitSessionRefreshed(){for(let t of this.listeners)t.onSessionRefreshed&&t.onSessionRefreshed()}}return H([kt("emitStartTracking")],s.prototype,"emitStartTracking",null),s})();var BS=(()=>{let s;return function(r){function t(){return typeof window.CSJavascriptBridge=="object"&&typeof window.CSJavascriptBridge.optIn=="function"&&typeof window.CSJavascriptBridge.optOut=="function"&&typeof window.CSJavascriptBridge.sendEvent=="function"&&typeof window.CSJavascriptBridge.sendDynamicVar=="function"&&typeof window.CSJavascriptBridge.sendTransaction=="function"}r.isCSJavascriptBridgeDefined=t;function e(){if(typeof window.CSJavascriptBridge.getVersion=="function")try{let S=window.CSJavascriptBridge.getVersion();if(Xt(S))return S}catch{j.warn("an error occurred when calling getVersion")}return null}r.getBridgeVersion=e;function i(){typeof window.CSJavascriptBridge.onWebviewTrackingReady=="function"&&window.CSJavascriptBridge.onWebviewTrackingReady()}r.notifyIsReadyForTracking=i;function n(S,_){window.CSJavascriptBridge.identify&&window.CSJavascriptBridge.identify(S,csJSON.stringify(_))}r.identify=n;function a(){window.CSJavascriptBridge.resetIdentity&&window.CSJavascriptBridge.resetIdentity()}r.resetIdentity=a;function c(S){window.CSJavascriptBridge.addUserProperties&&window.CSJavascriptBridge.addUserProperties(csJSON.stringify(S))}r.addUserProperties=c;function l(S){window.CSJavascriptBridge.sendEvent(csJSON.stringify(S))}r.sendAnalysisEvent=l;function u(S){if(window.CSJavascriptBridge.sendSREvent)for(let _ of S.events)window.CSJavascriptBridge.sendSREvent(csJSON.stringify(_))}r.sendSREvent=u;function g(S){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(S))}r.sendLog=g;function d(){window.CSJavascriptBridge.optIn()}r.sendOptIn=d;function E(){window.CSJavascriptBridge.optOut()}r.sendOptOut=E;function y(S,_){window.CSJavascriptBridge.sendDynamicVar(S,_)}r.sendDynamicVariable=y;function v(S,_,D){window.CSJavascriptBridge.sendTransaction(S,_,D)}r.sendTransaction=v;function I(S,_){if(window.CSJavascriptBridge.sendAssets){let D=csJSON.stringify(S);window.CSJavascriptBridge.sendAssets(D,_||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(S,D=>D.assetId))}r.sendAssets=I;function P(S){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(S))}r.sendNativeSREvent=P}(s||(s={})),s})();var FS=(()=>{class s{setItem(t,e){window.sessionStorage.setItem(t,e)}getItem(t){return window.sessionStorage.getItem(t)}removeItem(t){window.sessionStorage.removeItem(t)}}return s})(),$S=(()=>{class s{constructor(t,e,i){this.f=t,this.wt=e,this.fs=i}start(){var t,e,i,n,a;if(window.CSQ_TAGS=csArray.prototype.concat.call(window.CSQ_TAGS||[],this.f.projectId),window.UXAnalytics)return;window.UXAnalytics={};let c=new FS,l=new Yc(!!(!((t=this.f.taskSchedulerOptions)===null||t===void 0)&&t.enabled),(e=this.f.taskSchedulerOptions)===null||e===void 0?void 0:e.maxProcessingTime,(i=this.f.taskSchedulerOptions)===null||i===void 0?void 0:i.waitDuration),u=new Id(this.wt,this.f);u.init();let g=new Od(this.f,u);if(this.wt.isTopWindowTracker()&&g.canTrack()){if(!((n=window.CSProtectnativeFunctionsLogs)===null||n===void 0)&&n.Warning&&j.warn(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Warning}`),!((a=window.CSProtectnativeFunctionsLogs)===null||a===void 0)&&a.Critical){j.error(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Critical}`);return}Rd();let E=new HS(l),y=new MS(this.f,u,this.fs,l,E,c);this.f.isQuotaEnabled()?y.initWithQuota():y.init()}let d=csString.prototype.indexOf.call(window.location.href,"csDebug=1")>-1;window.UXAnalytics={Sensitive:{isNodeSensitive(E){return N.isMaskedElement(E)||N.isMaskedElementChild(E)},isAttributeSensitive(E,y){return N.isMaskedAttribute(E,y)},getSensitiveAttributes(E){return vn(E.attributes,y=>N.isMaskedAttribute(E,y.name))}},Console:{warn(E){d&&console.warn("cs.tracking.warning",E)},error(E){d&&console.error("cs.tracking.error",E)}},Version:tc},window.CSFrameCommunication||(window.CSFrameCommunication=ji,ji.isActivable()&&ji.waitForConnection(),this.f.isCsCrosswritingHeap()&&ji.waitForHeapVisualLabeler(this.f.getHeapWebAppUri()))}}return H([kt("main.start"),x("main.start")],s.prototype,"start",null),s})(),zS=(()=>{class s{constructor(){}send(t,e,i=nt.warn){let n={message:t,errorCode:e,level:i};BS.sendLog(n)}}return s})();var GS=(()=>{class s{constructor(t,e,i){this.X=t,this.O=e,this.sI=i,this.Dt=[],this.iI=In().v}flush(){this.Dt.length!==0&&(this.X.send({m:csArray.prototype.map.call(this.Dt,t=>({n:t.name,p:t.parameter,v:t.value})),p:this.O.anonymizePII(window.location.pathname),pid:this.sI,v:this.iI}),this.Dt=[])}push(t){csArray.prototype.push.call(this.Dt,...t),this.flush()}}return s.DEBOUNCE_INTERVAL=5e3,H([Dh(s.DEBOUNCE_INTERVAL)],s.prototype,"flush",null),s})();function qS(s,r){let t=s.validationRate/10,e=hs.boolean(t);if((s.environment==="staging"||!1||e)&&!r.isInWebViewContext())try{let a=Xc.create(j.warn,r.isTopWindowTracker()),l=new nc(a).create(s.getMetricsUri(),!0),u=new mi,g=new GS(l,u,s.projectId);q.setService(g)}catch(a){j.warn(`Error initializing metrics: ${a.message}`)}}function WS(){var s;zh();let r=new Xu(window.CS_CONF);window._uxa=window._uxa||[],r.processOptionOverrides(window._uxa);let t=new Ku(window,r);t.init();let e=new wd;if(Oh(j),j.computeIsActive(r.validationRate),t.isTopWindowTracker()){let a=new md(r,e);j.setStrategy(a)}else if(t.isInIframeContext()){let n=new _d(r);j.setStrategy(n)}else if(t.isInWebViewContext()){let n=new zS;j.setStrategy(n)}!((s=r==null?void 0:r.experimental)===null||s===void 0)&&s.disableMutationObserverProtection&&window.csMutationObserver&&(window.csMutationObserver=ds(window,"MutationObserver")),Ou(),qS(r,t),new $S(r,t,e).start()}window.CSCurrentScript=document.currentScript;csSetTimeout(()=>{try{bd(WS)}catch{}});})();

// signature-d05670e36dd9c07d577861f87d307c420270b82733132784ca91747a4695acfa